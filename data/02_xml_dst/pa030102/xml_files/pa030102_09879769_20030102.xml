<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE patent-application-publication SYSTEM "pap-v16-2002-01-01.dtd" [
<!ENTITY US20030005145A1-20030102-P00001.TIF SYSTEM "US20030005145A1-20030102-P00001.TIF" NDATA TIF>
<!ENTITY US20030005145A1-20030102-P00002.TIF SYSTEM "US20030005145A1-20030102-P00002.TIF" NDATA TIF>
<!ENTITY US20030005145A1-20030102-P00003.TIF SYSTEM "US20030005145A1-20030102-P00003.TIF" NDATA TIF>
<!ENTITY US20030005145A1-20030102-P00004.TIF SYSTEM "US20030005145A1-20030102-P00004.TIF" NDATA TIF>
<!ENTITY US20030005145A1-20030102-P00005.TIF SYSTEM "US20030005145A1-20030102-P00005.TIF" NDATA TIF>
<!ENTITY US20030005145A1-20030102-P00006.TIF SYSTEM "US20030005145A1-20030102-P00006.TIF" NDATA TIF>
<!ENTITY US20030005145A1-20030102-P00007.TIF SYSTEM "US20030005145A1-20030102-P00007.TIF" NDATA TIF>
<!ENTITY US20030005145A1-20030102-P00008.TIF SYSTEM "US20030005145A1-20030102-P00008.TIF" NDATA TIF>
<!ENTITY US20030005145A1-20030102-D00000.TIF SYSTEM "US20030005145A1-20030102-D00000.TIF" NDATA TIF>
<!ENTITY US20030005145A1-20030102-D00001.TIF SYSTEM "US20030005145A1-20030102-D00001.TIF" NDATA TIF>
<!ENTITY US20030005145A1-20030102-D00002.TIF SYSTEM "US20030005145A1-20030102-D00002.TIF" NDATA TIF>
<!ENTITY US20030005145A1-20030102-D00003.TIF SYSTEM "US20030005145A1-20030102-D00003.TIF" NDATA TIF>
<!ENTITY US20030005145A1-20030102-D00004.TIF SYSTEM "US20030005145A1-20030102-D00004.TIF" NDATA TIF>
<!ENTITY US20030005145A1-20030102-D00005.TIF SYSTEM "US20030005145A1-20030102-D00005.TIF" NDATA TIF>
<!ENTITY US20030005145A1-20030102-D00006.TIF SYSTEM "US20030005145A1-20030102-D00006.TIF" NDATA TIF>
<!ENTITY US20030005145A1-20030102-D00007.TIF SYSTEM "US20030005145A1-20030102-D00007.TIF" NDATA TIF>
<!ENTITY US20030005145A1-20030102-D00008.TIF SYSTEM "US20030005145A1-20030102-D00008.TIF" NDATA TIF>
<!ENTITY US20030005145A1-20030102-D00009.TIF SYSTEM "US20030005145A1-20030102-D00009.TIF" NDATA TIF>
<!ENTITY US20030005145A1-20030102-D00010.TIF SYSTEM "US20030005145A1-20030102-D00010.TIF" NDATA TIF>
<!ENTITY US20030005145A1-20030102-D00011.TIF SYSTEM "US20030005145A1-20030102-D00011.TIF" NDATA TIF>
]>
<patent-application-publication>
<subdoc-bibliographic-information>
<document-id>
<doc-number>20030005145</doc-number>
<kind-code>A1</kind-code>
<document-date>20030102</document-date>
</document-id>
<publication-filing-type>new</publication-filing-type>
<domestic-filing-data>
<application-number>
<doc-number>09879769</doc-number>
</application-number>
<application-number-series-code>09</application-number-series-code>
<filing-date>20010612</filing-date>
</domestic-filing-data>
<technical-information>
<classification-ipc>
<classification-ipc-primary>
<ipc>G06F015/173</ipc>
</classification-ipc-primary>
<classification-ipc-edition>07</classification-ipc-edition>
</classification-ipc>
<classification-us>
<classification-us-primary>
<uspc>
<class>709</class>
<subclass>238000</subclass>
</uspc>
</classification-us-primary>
<classification-us-secondary>
<uspc>
<class>709</class>
<subclass>224000</subclass>
</uspc>
</classification-us-secondary>
</classification-us>
<title-of-invention>Network service assurance with comparison of flow activity captured outside of a service network with flow activity captured in or at an interface of a service network</title-of-invention>
</technical-information>
<inventors>
<first-named-inventor>
<name>
<given-name>Wm. Carter</given-name>
<family-name>Bullard</family-name>
</name>
<residence>
<residence-us>
<city>New York</city>
<state>NY</state>
<country-code>US</country-code>
</residence-us>
</residence>
<authority-applicant>INV</authority-applicant>
</first-named-inventor>
</inventors>
<assignee>
<organization-name>Qosient LLC</organization-name>
<assignee-type>02</assignee-type>
</assignee>
<correspondence-address>
<name-1>AKIN, GUMP, STRAUSS, HAUER &amp; FELD, L.L.P.</name-1>
<name-2></name-2>
<address>
<address-1>ONE COMMERCE SQUARE, SUITE 2200</address-1>
<address-2>2005 MARKET STREET</address-2>
<city>PHILADELPHIA</city>
<state>PA</state>
<postalcode>19103</postalcode>
<country>
<country-code>US</country-code>
</country>
</address>
</correspondence-address>
</subdoc-bibliographic-information>
<subdoc-abstract>
<paragraph id="A-0001" lvl="0">A process is provided for auditing a communication session between a source connected to a first node of a service network and a destination connected to a second node of the service network. At least one of the source and destination are outside of the service network and are in communication with an interface of the service network. In the process, flow activity of selected traffic outside of the service network, as well as in or at an interface of the service network, is captured between the source and the destination at selected states and points in time during the communication session. Comparisons are conducted between the flow activity captured outside of the service network and flow activity captured in or at an interface of the service network to audit the delivery of services in the service network. </paragraph>
</subdoc-abstract>
<subdoc-description>
<summary-of-invention>
<section>
<heading lvl="1">BACKGROUND OF THE INVENTION </heading>
<paragraph id="P-0001" lvl="0"><number>&lsqb;0001&rsqb;</number> Network service assurance refers to the process of verifying or auditing a service network to determine if the service network is operating in the intended manner and is providing the expected service. One conventional technique of performing service assurance is to conduct packet analysis on datagrams at an interface of the service network or in the service network. Typically, a packet analyzer is used for this process. At very high data rates, such as at the gigabit level, packet analysis is not feasible. Other types of network measurement tools have been developed to measure and analyze network performance at high data rates. One such tool is the &ldquo;flow meter,&rdquo; also referred to as a &ldquo;real time flow monitor&rdquo; (RTFM). The flow meter tracks and reports on the status and performance of network streams or groups of related packets seen in an Internet Protocol (IP) traffic stream. A flow meter does not perform packet capture. That is, a flow meter is not a packet collector. Instead, a flow meter captures abstractions of the traffic, not the traffic itself. </paragraph>
<paragraph id="P-0002" lvl="0"><number>&lsqb;0002&rsqb;</number> Flow meter data or output is collected, processed and stored in or by flow collectors. One conventional flow meter and collector is known as ARGUS, and is commercially available from Qosient, LLC, New York, N.Y. ARGUS provides a common data format for reporting flow metrics such as connectivity, capacity and responsiveness, for all flows, on a per transaction basis. The network transaction audit data that ARGUS generates has been used for a wide range of tasks including security management, network billing and accounting, network operations management, and performance analysis. In a conventional configuration, one flow collector is used, and may be situated either inside a service network or outside of a service network. </paragraph>
<paragraph id="P-0003" lvl="0"><number>&lsqb;0003&rsqb;</number> One type of ARGUS record is a Flow Activity Record (FAR). The FAR provides information about network transaction flows that ARGUS tracks. A FAR has a flow descriptor and some activity metrics bounded over a time range. More specifically, each FAR has an ARGUS transaction identifier, a time range descriptor (start time and duration in microseconds), a flow descriptor and flow metrics. One basic type of flow descriptor is a flow key descriptor which includes source and destination addresses, type of protocol (e.g., TCP), and service access ports (e.g., source DSAP, SSAP). Another type of flow descriptor is a DiffServ (DS) byte or type of service (ToS) field label. Some flow metrics include src and dst packets, network and application bytes, and interpacket arrival time information. ARGUS specifications and the format of a prior art ARGUS FAR are shown in the Appendix below. </paragraph>
<paragraph id="P-0004" lvl="0"><number>&lsqb;0004&rsqb;</number> Another flow collector that may be used for network data analysis and service auditing is the &ldquo;NetFlow FlowCollector,&rdquo; commercially available from Cisco Systems, Inc., San Jose, Calif. NetFlow traffic describes details such as source and destination addresses, autonomous system numbers, port addresses, time of day, number of packets, bytes and type of service. </paragraph>
<paragraph id="P-0005" lvl="0"><number>&lsqb;0005&rsqb;</number> Conventional flow collectors and other types of traffic monitoring devices provide many useful service auditing functions. However, there are still many types of audit data that are not available when using conventional flow collectors and implementations thereof. The present invention uses novel configurations of flow collectors to provide enhanced network auditing functions.</paragraph>
</section>
</summary-of-invention>
<brief-description-of-drawings>
<section>
<heading lvl="1">BRIEF DESCRIPTION OF THE DRAWINGS </heading>
<paragraph id="P-0006" lvl="0"><number>&lsqb;0006&rsqb;</number> The foregoing summary, as well as the following detailed description of preferred embodiments of the invention, will be better understood when read in conjunction with the appended drawings. For the purpose of illustrating the invention, there is shown in the drawings an embodiment that is presently preferred. It should be understood, however, that the invention is not limited to the precise arrangements and instrumentalities shown. In the drawings: </paragraph>
<paragraph id="P-0007" lvl="0"><number>&lsqb;0007&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1</cross-reference> is a schematic block diagram of a network system having service assurance elements in accordance with a first embodiment of the present invention; </paragraph>
<paragraph id="P-0008" lvl="0"><number>&lsqb;0008&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 2</cross-reference> shows selected content of prior art flow activity records stored in a flow collector for use in the system of the present invention; </paragraph>
<paragraph id="P-0009" lvl="0"><number>&lsqb;0009&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3</cross-reference> is a schematic block diagram of a network system having service assurance elements in accordance with a second embodiment of the present invention; </paragraph>
<paragraph id="P-0010" lvl="0"><number>&lsqb;0010&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 4</cross-reference> shows a data analysis process in accordance with the present invention which uses internal and external flow activity records to determine if a service network is providing an expected service; </paragraph>
<paragraph id="P-0011" lvl="0"><number>&lsqb;0011&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 5</cross-reference> shows a data analysis process in accordance with the present invention which uses sequence numbers of internal and external flow collector records to determine if traffic which is missing within a service network is actually using a path outside of the service network; </paragraph>
<paragraph id="P-0012" lvl="0"><number>&lsqb;0012&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 6</cross-reference> shows a data analysis process in accordance with the present invention which uses internal and external flow collector records to perform reachability assurance; </paragraph>
<paragraph id="P-0013" lvl="0"><number>&lsqb;0013&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 7</cross-reference> shows a data analysis process in accordance with the present invention which uses internal and external flow collector records to perform connectivity assurance; </paragraph>
<paragraph id="P-0014" lvl="0"><number>&lsqb;0014&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 8A</cross-reference> shows a data analysis process for performing network round-trip delay analysis in accordance with the present invention; </paragraph>
<paragraph id="P-0015" lvl="0"><number>&lsqb;0015&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 8B</cross-reference> is a schematic block diagram of a network system related to <cross-reference target="DRAWINGS">FIG. 8A</cross-reference> which shows delay times for datagrams passing through the network; </paragraph>
<paragraph id="P-0016" lvl="0"><number>&lsqb;0016&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 9A</cross-reference> shows a data analysis process for performing one-way delay analysis in accordance with the present invention; and </paragraph>
<paragraph id="P-0017" lvl="0"><number>&lsqb;0017&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 9B</cross-reference> is a schematic block diagram of a network system related to <cross-reference target="DRAWINGS">FIG. 9A</cross-reference> which shows delay times for datagrams passing through the network.</paragraph>
</section>
</brief-description-of-drawings>
<detailed-description>
<section>
<heading lvl="1">BRIEF SUMMARY OF THE INVENTION </heading>
<paragraph id="P-0018" lvl="0"><number>&lsqb;0018&rsqb;</number> A process is provided to audit a communication session between a source connected to a first node of a service network and a destination connected to a second node of the service network. At least one of the source and destination are outside of the service network and are in communication with an interface of the service network. In the process, flow activity of selected traffic outside of the service network between the source and the destination is captured at selected states and points in time during the communication session. The flow activity includes a flow descriptor and corresponding time data for selected datagrams outside of the service network that are intended to be placed in the service network. Also, flow activity of selected traffic in or at an interface of the service network between the source and the destination is captured at selected states and points in time during the communication session. This flow activity includes a flow descriptor and corresponding time data for selected datagrams placed in the service network. The flow descriptors and their corresponding time data are used to identify flow activity outside of the service network that corresponds to flow activity in or at an interface of the service network. </paragraph>
</section>
<section>
<heading lvl="1">DETAILED DESCRIPTION OF THE INVENTION </heading>
<paragraph id="P-0019" lvl="0"><number>&lsqb;0019&rsqb;</number> Certain terminology is used herein for convenience only and is not to be taken as a limitation on the present invention. In the drawings, the same reference letters are employed for designating the same elements throughout the several figures. </paragraph>
<paragraph id="P-0020" lvl="0"><number>&lsqb;0020&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1</cross-reference> shows a system <highlight><bold>10</bold></highlight> in accordance with a preferred embodiment of the present invention. The system <highlight><bold>10</bold></highlight> audits a communication session between a source <highlight><bold>12</bold></highlight> connected to a first node <highlight><bold>14</bold></highlight> (node A) of a service network <highlight><bold>16</bold></highlight> and a destination <highlight><bold>18</bold></highlight> connected to a second node <highlight><bold>20</bold></highlight> (node B) of the service network <highlight><bold>16</bold></highlight>. Nodes A and B of the service network <highlight><bold>16</bold></highlight> are connected to each other via a communication path <highlight><bold>21</bold></highlight>. At least one of the source <highlight><bold>12</bold></highlight> and the destination <highlight><bold>18</bold></highlight> are outside of the service network <highlight><bold>16</bold></highlight> and are in communication with an interface of the service network <highlight><bold>16</bold></highlight>. In <cross-reference target="DRAWINGS">FIG. 1</cross-reference>, the source <highlight><bold>12</bold></highlight> and the destination <highlight><bold>18</bold></highlight> are outside of the service network <highlight><bold>16</bold></highlight>. </paragraph>
<paragraph id="P-0021" lvl="0"><number>&lsqb;0021&rsqb;</number> Nodes A and B abstractly represent the ingress and egress interfaces for the flow into and out of the service network <highlight><bold>16</bold></highlight>. Thus, for example, node A may be one physical node, or may be a plurality of nodes such as two unidirectional nodes which together allow for bidirectional flow. If node A represents a plurality of nodes, the nodes may be in one physical location or facility, or may be physically dispersed among plural locations or facilities. </paragraph>
<paragraph id="P-0022" lvl="0"><number>&lsqb;0022&rsqb;</number> Flow activity of selected traffic outside of the service network <highlight><bold>16</bold></highlight> between the source <highlight><bold>12</bold></highlight> and the destination <highlight><bold>18</bold></highlight> is captured at selected states and points in time during the communication session. The captured flow activity includes a flow descriptor for selected datagrams outside of the service network <highlight><bold>16</bold></highlight> that are intended to be placed in the service network <highlight><bold>16</bold></highlight>. Flow activity of selected traffic in or at an interface of the service network <highlight><bold>16</bold></highlight> between the source <highlight><bold>12</bold></highlight> and the destination <highlight><bold>18</bold></highlight> is also captured at selected states and points in time during the communication session. This captured flow activity includes a flow descriptor for selected datagrams placed in the service network <highlight><bold>16</bold></highlight>. The flow activity outside of the service network <highlight><bold>16</bold></highlight> is stored in time-stamped flow activity records of one or more external network flow collectors <highlight><bold>22</bold></highlight>. The flow activity in or at the interface of the service network <highlight><bold>16</bold></highlight> is stored in time-stamped flow activity records of one or more internal network flow collectors <highlight><bold>24</bold></highlight>. The records are used to audit the delivery of services in the service network <highlight><bold>16</bold></highlight>. The internal network flow collector(s) capture flow activity at an interface or edge of the service network <highlight><bold>16</bold></highlight> (see the data lines extending from the ingress and egress of the nodes A and B), as well as flow activity in the service network <highlight><bold>16</bold></highlight> (see the data line extending from the communication path <highlight><bold>21</bold></highlight>). </paragraph>
<paragraph id="P-0023" lvl="0"><number>&lsqb;0023&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1</cross-reference> shows a single external flow activity collector <highlight><bold>24</bold></highlight> and a single internal flow activity collector <highlight><bold>22</bold></highlight>. In practice, there may be a plurality of flow activity collectors capturing flow activity at different locations in a service network, at an interface of the service network <highlight><bold>16</bold></highlight>, or outside of the service network <highlight><bold>16</bold></highlight>. If so, then the flow records may be merged prior to analysis. However, the internal flow activity records are kept separate from the external flow activity records, as conceptually shown in <cross-reference target="DRAWINGS">FIG. 1</cross-reference>. For illustration purposes and to simplify the explanation of the invention concepts, the subsequent explanations will refer to a single external flow collector <highlight><bold>22</bold></highlight> and a single internal flow collector <highlight><bold>24</bold></highlight>. </paragraph>
<paragraph id="P-0024" lvl="0"><number>&lsqb;0024&rsqb;</number> In <cross-reference target="DRAWINGS">FIG. 1</cross-reference>, the external flow collector <highlight><bold>22</bold></highlight> receives its data from flow record collection points <highlight><bold>25</bold></highlight> outside of the service network <highlight><bold>16</bold></highlight>. Preferably, the flow record collection points <highlight><bold>25</bold></highlight> are located at the ingress/egress of the respective source <highlight><bold>12</bold></highlight> and destination <highlight><bold>18</bold></highlight>. The further away that the collection points <highlight><bold>25</bold></highlight> are located from the source and destination ingress/egress, the less reliable the data. </paragraph>
<paragraph id="P-0025" lvl="0"><number>&lsqb;0025&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 2</cross-reference> shows selected content of flow activity records <highlight><bold>26</bold></highlight> stored in the flow collectors <highlight><bold>22</bold></highlight> and <highlight><bold>24</bold></highlight>. Each flow activity record entry has time stamp data, a flow descriptor, and performance metrics of the flow. The time stamp data includes a start time, and a stop time or a duration of time from the start time. In a bidirectional flow collector, the flow descriptor accounts for corresponding ingress and egress flows. In a unidirectional flow collector, the flow descriptor accounts for only one flow (either ingress or egress), and contains only the performance metrics for the one flow. To obtain the complete flow record when using unidirectional flow collectors, records from the two unidirectional flow collectors (each capturing one-half of the flow) must be correlated or merged. The scope of the present invention includes embodiments that use bidirectional and unidirectional flow collectors. </paragraph>
<paragraph id="P-0026" lvl="0"><number>&lsqb;0026&rsqb;</number> The methods used by a flow collector to capture flow activity are well-known in the prior art. For the purposes of the present invention, a flow collector captures sufficient flow activity information so that the same network activity, captured by multiple independent flow collectors along a given network path, can be unambiguously identified and matched. Flow activity timestamps must represent the time of observation of the same network event, so that comparisons of flow activity timestamps from multiple flow collectors has relevance. To support this requirement, flow collectors may use flow state and flow duration characteristics to determine when to generate flow activity records. Although not a strict requirement, the flow descriptors can include sufficient identifying information so that making the determination that the reported network events are indeed the same, is possible. Examples of flow states include flow start, flow continuance and flow stop. </paragraph>
<paragraph id="P-0027" lvl="0"><number>&lsqb;0027&rsqb;</number> The types of flow activity records stored in the flow collectors <highlight><bold>22</bold></highlight> and <highlight><bold>24</bold></highlight> are well-known in the prior art. It is also well-known to use time data and flow descriptors to identify flow activity within a single flow collector. For example, such analysis may show that flow descriptor fd<highlight><subscript>1 </subscript></highlight>relates to a datagram X that is communicated from the source <highlight><bold>12</bold></highlight> to the destination <highlight><bold>18</bold></highlight>, and to a datagram Y that is communicated from the destination <highlight><bold>18</bold></highlight> to the source <highlight><bold>16</bold></highlight> in response to the datagram X. The resulting flow activity record may be analyzed to obtain selected performance metrics of the service network <highlight><bold>16</bold></highlight>. Also, if no bidirectional traffic is seen for the flow descriptor fd<highlight><subscript>1</subscript></highlight>, this information may be used to detect a problem in the service network <highlight><bold>16</bold></highlight>. For example, the destination <highlight><bold>18</bold></highlight> may not have received the datagram X associated with flow descriptor fd<highlight><subscript>1</subscript></highlight>, or there may be some communication problem at node B. Although it is known to analyze flow activity records in a single flow collector, heretofore, such records have not been used to audit service networks and to obtain performance metrics of service networks by comparing flow activity records captured outside of a service network with flow activity records captured in or at an interface of a service network. The processes described below detect potential problems in service networks that were not possible to detect using conventional flow collector analysis techniques. </paragraph>
<paragraph id="P-0028" lvl="0"><number>&lsqb;0028&rsqb;</number> Flow descriptors and performance metrics are available at flow collection points <highlight><bold>25</bold></highlight> external to a service network and at the interfaces of the service network <highlight><bold>16</bold></highlight>. However, for some services, flow descriptors are not available in the service network, such as at points along the communication path <highlight><bold>21</bold></highlight>. Performance metrics may be available at such points, even when flow descriptors are not available. For some services, the flow descriptors at the points along the communication path <highlight><bold>21</bold></highlight> may be indirectly obtained by a mapping of other flow data that can be derived from the datagram payload. Unless there is a particular need to obtain flow activity records in the service network, such as when differentiated analysis for network service debugging and troubleshooting is required, the preferred flow capture point for service network flow is at the service interfaces, such as the ingress and egress of nodes A and B. </paragraph>
<paragraph id="P-0029" lvl="0"><number>&lsqb;0029&rsqb;</number> Referring again to <cross-reference target="DRAWINGS">FIG. 1</cross-reference>, the data in the internal and external flow collectors <highlight><bold>22</bold></highlight> and <highlight><bold>24</bold></highlight> are provided to a processor <highlight><bold>30</bold></highlight> which performs record matching using conventional techniques. Once related internal and external flow activity records are identified, at least the following types of information may be obtained: </paragraph>
<paragraph id="P-0030" lvl="0"><number>&lsqb;0030&rsqb;</number> (1) It may be determined if the service network <highlight><bold>16</bold></highlight> is carrying the traffic monitored by the external flow collector <highlight><bold>22</bold></highlight>. To obtain this information, it is determined as to whether selected flow activity record entries in the external flow collector <highlight><bold>22</bold></highlight> corresponds to flow activity record entries in the internal flow collector <highlight><bold>24</bold></highlight>. If so, then the datagrams associated with the flow activity record entries in the external flow collector <highlight><bold>22</bold></highlight> have successfully passed through the service network <highlight><bold>16</bold></highlight>, and thus have received a desired service. In the example of <cross-reference target="DRAWINGS">FIG. 1</cross-reference>, the processor <highlight><bold>30</bold></highlight> compares records from the external flow collector <highlight><bold>22</bold></highlight> with the records of the internal flow collector <highlight><bold>24</bold></highlight>. </paragraph>
<paragraph id="P-0031" lvl="0"><number>&lsqb;0031&rsqb;</number> (2) It may be determined if the service network is not carrying the traffic monitored by an external flow collector <highlight><bold>22</bold></highlight>. To obtain this information, it is determined if selected flow activity record entries in the external flow collector <highlight><bold>22</bold></highlight> do not correspond to any flow activity record entries in the internal flow collector <highlight><bold>24</bold></highlight>. If so, then the datagrams associated with the flow activity record entries in the external flow collector <highlight><bold>22</bold></highlight> may not have passed through the service network <highlight><bold>16</bold></highlight>, and thus may not have received a desired service. The comparisons are performed in a similar manner as described above. </paragraph>
<paragraph id="P-0032" lvl="0"><number>&lsqb;0032&rsqb;</number> (3) It may be determined if the service network is carrying only the ingress or egress traffic and is thereby operating in a half-duplex mode. To obtain this information, it is determined if flow activity record entries in the external flow collector <highlight><bold>22</bold></highlight> corresponds to one, but not both of, ingress and egress flow activity record entries in the internal flow collector <highlight><bold>24</bold></highlight>. If so, then the datagrams associated with the flow activity record entries in the external flow collector <highlight><bold>22</bold></highlight> may not have passed bidirectionally through the service network <highlight><bold>16</bold></highlight>. </paragraph>
<paragraph id="P-0033" lvl="0"><number>&lsqb;0033&rsqb;</number> (4) It may be determined if the service network <highlight><bold>16</bold></highlight> is carrying only a portion of the traffic monitored by the external flow collector <highlight><bold>22</bold></highlight>. To obtain this information, it is determined as to whether selected flow activity record entries in the external flow collector <highlight><bold>22</bold></highlight> corresponds to only some (but not all) of the ingress and egress flow activity record entries in the internal flow collector <highlight><bold>24</bold></highlight>. If so, then only some of the datagrams associated with the flow activity record entries in the external flow collector <highlight><bold>22</bold></highlight> have successfully passed through the service network <highlight><bold>16</bold></highlight>, and thus have received a desired service. In the example of <cross-reference target="DRAWINGS">FIG. 1</cross-reference>, the processor <highlight><bold>30</bold></highlight> compares records from the external flow collector <highlight><bold>22</bold></highlight> with the records of the internal flow collector <highlight><bold>24</bold></highlight>. </paragraph>
<paragraph id="P-0034" lvl="0"><number>&lsqb;0034&rsqb;</number> (5) It may be determined if the service network is providing the expected service. Consider an example wherein a customer is paying for the use of a service network <highlight><bold>16</bold></highlight> with a guaranteed packet loss of less than 0. 10%. <cross-reference target="DRAWINGS">FIG. 4</cross-reference> shows four different examples wherein record matching has been performed on a flow activity record associated with flow descriptor fd<highlight><subscript>1</subscript></highlight>. Referring to <cross-reference target="DRAWINGS">FIG. 1</cross-reference>, flow is captured at the source egress and the destination ingress by an external flow collector <highlight><bold>22</bold></highlight>, and at the service network ingress <highlight><bold>32</bold></highlight><highlight><subscript>A </subscript></highlight>and the service network egress <highlight><bold>34</bold></highlight><highlight><subscript>B </subscript></highlight>by the internal flow collector <highlight><bold>24</bold></highlight>. The performance metric of &ldquo;total packets&rdquo; is compared among the records. In all of the examples, it is determined that the service network is carrying the traffic associated with the flow descriptor fd<highlight><subscript>1 </subscript></highlight>because the flow descriptor fd<highlight><subscript>1 </subscript></highlight>exists in each of the flow records. In the first example, it is discovered that the service network <highlight><bold>16</bold></highlight> is not experiencing any packet loss. In the second example, it is discovered that the service network <highlight><bold>16</bold></highlight> experienced a packet loss of about 10%, which is significantly greater than the expected service. In the third example, it is discovered that the service network did not experience packet loss, but that there was packet loss of about 10% outside of the service network. In the fourth example, it was discovered that there was loss inside and outside of the service network with the service network causing about 10% of the total packet loss. In a practical example, many different flow activity records (fd<highlight><subscript>1</subscript></highlight>, fd<highlight><subscript>1</subscript></highlight>, . . . fd<highlight><subscript>n</subscript></highlight>) would be compared in the same manner as described above to determine specific packet loss in specific points of the service network. In this manner, an expected service of the network, here, &ldquo;packet loss of less than 0.10%,&rdquo; may be determined by using the present invention. </paragraph>
<paragraph id="P-0035" lvl="0"><number>&lsqb;0035&rsqb;</number> (6) When packet loss is detected, it may be determined if the apparent packet loss is actually the result of the flow using multiple paths. Referring again to <cross-reference target="DRAWINGS">FIG. 4</cross-reference>, in the fifth example, it is discovered that there is an apparent packet loss outside of the service network and that there is an alternate path into the service network, since the original 10 packets were detected at the service network egress when only 5 packets were detected at the service network ingress. In the sixth example, it is discovered that there is an apparent packet loss outside of the service network <highlight><bold>16</bold></highlight> and that there is an alternate path around the service network <highlight><bold>16</bold></highlight>, since the original 10 packets were detected at the destination egress, but were not detected at the service network ingress or egress. </paragraph>
<paragraph id="P-0036" lvl="0"><number>&lsqb;0036&rsqb;</number> (7) The loss pattern or loss distribution of sequence numbers may be used to strengthen the determination that apparent loss is actually a path outside of the service network. In <cross-reference target="DRAWINGS">FIG. 5</cross-reference>, the processor <highlight><bold>30</bold></highlight> has extracted the sequence numbers of selected flow activity records from the flow descriptors at the source egress and the destination ingress in the external flow collector <highlight><bold>22</bold></highlight> and at the service network ingress and egress in the internal flow collector <highlight><bold>24</bold></highlight>. The sequence numbers at the source egress and destination ingress are continuous from 10001 to 10010. However, in the first example, the sequence numbers at the service network ingress skip every even number. Thus, in addition to discovering that the service network is not carrying half of the traffic, it can be presumed that the service network is performing round-robin load balancing by routing one-half of the traffic outside of the service network <highlight><bold>16</bold></highlight>, presumably via the open and exposed Internet. In the second example, the service network <highlight><bold>16</bold></highlight> is performing load balancing by routing one-third of the traffic outside of the service network <highlight><bold>16</bold></highlight>. Any deterministic pattern or non-random distribution of loss may be used to uncover the systematic use of paths outside of the service network <highlight><bold>16</bold></highlight>, and thus the loss of expected service. </paragraph>
<paragraph id="P-0037" lvl="0"><number>&lsqb;0037&rsqb;</number> (8) Network service availability, such as &ldquo;reachability assurance&rdquo; may be analyzed. &ldquo;Reachability&rdquo; refers to whether packets sent from one or more sources can be received at a particular destination, whether or not the packets take an alternative path. If packets can be received at the particular destination, then the destination is said to be &ldquo;reachable.&rdquo; If packets cannot be received at the particular destination, then the destination is said to be &ldquo;not reachable.&rdquo; Referring to <cross-reference target="DRAWINGS">FIGS. 1 and 6</cross-reference>, the processor <highlight><bold>30</bold></highlight> matches up a particular flow descriptor, here fd<highlight><subscript>1</subscript></highlight>, from the flow descriptors at the source egress and the destination ingress in the external flow collector <highlight><bold>22</bold></highlight> and at the service network ingress and egress in the internal flow collector <highlight><bold>24</bold></highlight>. In the first example, there is an fd<highlight><subscript>1 </subscript></highlight>record from all four flow capture points. Thus, the destination <highlight><bold>18</bold></highlight> is reachable from the source <highlight><bold>12</bold></highlight> via the service network <highlight><bold>16</bold></highlight>. In the examples 2-4, the destination <highlight><bold>18</bold></highlight> is not reachable. In the example 5, the destination <highlight><bold>18</bold></highlight> is reachable, but the packets are not passing through the service network <highlight><bold>16</bold></highlight>. In a practical example, many different flow activity records (fd<highlight><subscript>1</subscript></highlight>, fd<highlight><subscript>1</subscript></highlight>, . . . fd<highlight><subscript>n</subscript></highlight>) would be compared in the same manner as described above before a determination is made that a particular destination is not reachable. </paragraph>
<paragraph id="P-0038" lvl="0"><number>&lsqb;0038&rsqb;</number> (9) Connectivity assurance may be analyzed. When a packet is sent from the source <highlight><bold>12</bold></highlight> to the destination <highlight><bold>18</bold></highlight>, a response is sent from the destination <highlight><bold>18</bold></highlight> to the source <highlight><bold>12</bold></highlight> for those network transactions that involve connectivity. In a bidirectional flow collector, the flow descriptor accounts for corresponding ingress and egress flows which relate to the sending of the packet from the source to the destination (egress) and the receipt of a response at the source from the destination (ingress). In a unidirectional flow collector, the flow descriptor accounts for only one flow (either ingress or egress). To obtain the complete flow record when using unidirectional flow collectors, records from two unidirectional flow collectors (each capturing one-half of the flow) must be correlated or merged. In either case, a flow record will have an ingress and an egress portion. Connectivity at a specific point in the network exists when a flow record includes both ingress and egress portions. Connectivity does not exist when a flow record is missing one of the ingress or egress portions of the record. Referring to <cross-reference target="DRAWINGS">FIGS. 1 and 7</cross-reference>, the processor <highlight><bold>30</bold></highlight> matches up a particular flow descriptor, here fd<highlight><subscript>1</subscript></highlight>, from the flow descriptors captured at the source <highlight><bold>12</bold></highlight> in the external flow collector <highlight><bold>22</bold></highlight>, and from the corresponding flow descriptors captured at an interface of the service network <highlight><bold>16</bold></highlight> in the internal flow collector <highlight><bold>24</bold></highlight>. In the first example, each flow record has an ingress and egress portion, and thus connectivity exists. In the second example, each flow record has only an ingress or an egress portion, and thus connectivity does not exist. In the second example, the source <highlight><bold>12</bold></highlight> may be sending packets to the destination <highlight><bold>18</bold></highlight> through the service network <highlight><bold>16</bold></highlight>, but the destination <highlight><bold>18</bold></highlight> is not providing any response, and thus connectivity does not exist. In the third example, the external flow collector record has only an egress portion, and the corresponding internal flow collector record has both an ingress and egress portion. Thus, connectivity does not exist. In a practical example, many different flow activity records (fd<highlight><subscript>1</subscript></highlight>, fd<highlight><subscript>1</subscript></highlight>, . . . fd<highlight><subscript>n</subscript></highlight>) would be compared in the same manner as described above before a determination is made that connectivity does not exist between a particular source/destination pair. </paragraph>
<paragraph id="P-0039" lvl="0"><number>&lsqb;0039&rsqb;</number> (10) Round-trip delay may be analyzed. <cross-reference target="DRAWINGS">FIG. 8A</cross-reference> shows a data analysis process for performing network round-trip delay analysis in accordance with the present invention. <cross-reference target="DRAWINGS">FIG. 8B</cross-reference> is a schematic block diagram of a network system related to <cross-reference target="DRAWINGS">FIG. 8A</cross-reference> which shows delay times for datagrams passing through the network. Time stamp data of matched flow records from internal and external flow collectors (not shown, but represented by capture points FR<highlight><subscript>I1</subscript></highlight>, FR<highlight><subscript>I2 </subscript></highlight>and FR<highlight><subscript>E1</subscript></highlight>, FR<highlight><subscript>E2</subscript></highlight>, respectively) may be used to determine various network delay parameters, such as non-remote network delay, non-local network delay, local network delay, and remote network delay. Time stamp data of matched flow records from solely internal or solely external flow collectors may be used to determine other network delay parameters, such as total network delay and service network delay. </paragraph>
<paragraph id="P-0040" lvl="0"><number>&lsqb;0040&rsqb;</number> With respect to <cross-reference target="DRAWINGS">FIGS. 8A and 8B</cross-reference>, the service network is element <highlight><bold>16</bold></highlight>, the local network comprises the sum of network components between elements <highlight><bold>12</bold></highlight> and <highlight><bold>14</bold></highlight>, and the remote network comprises the sum of network components between elements <highlight><bold>20</bold></highlight> and <highlight><bold>18</bold></highlight>. </paragraph>
<paragraph id="P-0041" lvl="0"><number>&lsqb;0041&rsqb;</number> (11) One-way delay may be analyzed. <cross-reference target="DRAWINGS">FIG. 9A</cross-reference> shows a data analysis process for performing one-way delay analysis in accordance with the present invention. <cross-reference target="DRAWINGS">FIG. 9B</cross-reference> is a schematic block diagram of a network system related to <cross-reference target="DRAWINGS">FIG. 9A</cross-reference> which shows delay times for datagrams passing through the network. Time stamp data of matched flow records from internal and external flow collectors (not shown, but represented by capture points FR<highlight><subscript>I1</subscript></highlight>, FR<highlight><subscript>I2 </subscript></highlight>and FR<highlight><subscript>E1</subscript></highlight>, FR<highlight><subscript>E2</subscript></highlight>, respectively) may be used to determine various one-way delay parameters, such as local network egress delay, remote network ingress delay, remote network egress delay, and local network ingress delay. Time stamp data of matched flow records from solely internal or solely external flow collectors may be used to determine other one-way delay parameters, such as service network ingress delay and service network egress delay. </paragraph>
<paragraph id="P-0042" lvl="0"><number>&lsqb;0042&rsqb;</number> Similar techniques may be used to analyze variations of one-way delay, such as jitter. </paragraph>
<paragraph id="P-0043" lvl="0"><number>&lsqb;0043&rsqb;</number> With respect to <cross-reference target="DRAWINGS">FIGS. 9A and 9B</cross-reference>, the service network is element <highlight><bold>16</bold></highlight>, the local network comprises the sum of network components between elements <highlight><bold>12</bold></highlight> and <highlight><bold>14</bold></highlight>, and the remote network comprises the sum of network components between elements <highlight><bold>20</bold></highlight> and <highlight><bold>18</bold></highlight>. Also, in <cross-reference target="DRAWINGS">FIG. 9</cross-reference>B, all flow meters must be time synchronized. Conventional methods may be used for the time synchronization. </paragraph>
<paragraph id="P-0044" lvl="0"><number>&lsqb;0044&rsqb;</number> The results of the various comparisons and analyses described above are provided to a network service assurance report <highlight><bold>28</bold></highlight>, shown in <cross-reference target="DRAWINGS">FIG. 1</cross-reference>. </paragraph>
<paragraph id="P-0045" lvl="0"><number>&lsqb;0045&rsqb;</number> The scope of the present invention includes embodiments wherein the service network <highlight><bold>16</bold></highlight> is asymmetric or symmetric, and wherein the nodes are unidirectional or bidirectional. <cross-reference target="DRAWINGS">FIG. 3</cross-reference> shows a system <highlight><bold>40</bold></highlight> which is similar to system <highlight><bold>10</bold></highlight>, except that node A is unidirectional and the service network <highlight><bold>16</bold></highlight> is asymmetric. Another unidirectional node <highlight><bold>42</bold></highlight> (labeled as node C) is provided. Datagrams to be sent from the source <highlight><bold>12</bold></highlight> to the destination <highlight><bold>18</bold></highlight> flow through node A and the communication path <highlight><bold>21</bold></highlight>, whereas datagrams sent from the destination <highlight><bold>18</bold></highlight> to the source <highlight><bold>12</bold></highlight> flow through node C via an additional communication path <highlight><bold>44</bold></highlight>. The flow activity at node C is also captured by the internal flow collector <highlight><bold>24</bold></highlight>. Alternatively, the nodes A and C may be bidirectional, and, thus may each include an ingress and an egress. </paragraph>
<paragraph id="P-0046" lvl="0"><number>&lsqb;0046&rsqb;</number> It is not necessary to obtain flow activity records from all of the flow capture points shown in <cross-reference target="DRAWINGS">FIGS. 1 and 3</cross-reference> to practice the present invention. For example, referring to <cross-reference target="DRAWINGS">FIG. 3</cross-reference>, to determine if the service network <highlight><bold>16</bold></highlight> is carrying the bidirectional traffic seen at the source <highlight><bold>12</bold></highlight> as monitored by the external flow collector <highlight><bold>22</bold></highlight>, it is only necessary to match flow activity records captured at the source (stored in the external flow collector <highlight><bold>22</bold></highlight>) with flow activity records captured from node A and node C (stored in the internal flow collector <highlight><bold>24</bold></highlight>), or with the flow activity records captured from node B (also stored in the internal flow collector <highlight><bold>24</bold></highlight>). The flow activity captured at node B thus provides redundant information to the flow activity captured at nodes A and C. </paragraph>
<paragraph id="P-0047" lvl="0"><number>&lsqb;0047&rsqb;</number> In the preferred embodiment of the present invention, flow activity is captured by a flow meter, stored in time-stamped flow activity records of flow collectors, and then the flow activity record entries are used in subsequent correlating, merging, comparing and processing steps. However, the scope of the present invention includes embodiments without flow collectors, as well as embodiments without flow collectors that use elements which perform functions similar to flow collectors. </paragraph>
<paragraph id="P-0048" lvl="0"><number>&lsqb;0048&rsqb;</number> The present invention may be implemented with any combination of hardware and software. If implemented as a computer-implemented apparatus, the present invention is implemented using means for performing all of the steps and functions described above. </paragraph>
<paragraph id="P-0049" lvl="0"><number>&lsqb;0049&rsqb;</number> The present invention can be included in an article of manufacture (e.g., one or more computer program products) having, for instance, computer useable media. The media has embodied therein, for instance, computer readable program code means for providing and facilitating the mechanisms of the present invention. The article of manufacture can be included as part of a computer system or sold separately. </paragraph>
<paragraph id="P-0050" lvl="0"><number>&lsqb;0050&rsqb;</number> Changes can be made to the embodiments described above without departing from the broad inventive concept thereof. The present invention is thus not limited to the particular embodiments disclosed, but is intended to cover modifications within the spirit and scope of the present invention. 
<image file="US20030005145A1-20030102-P00001.TIF" id="EMI-00001"></image>
<image file="US20030005145A1-20030102-P00002.TIF" id="EMI-00002"></image>
<image file="US20030005145A1-20030102-P00003.TIF" id="EMI-00003"></image>
<image file="US20030005145A1-20030102-P00004.TIF" id="EMI-00004"></image>
<image file="US20030005145A1-20030102-P00005.TIF" id="EMI-00005"></image>
<image file="US20030005145A1-20030102-P00006.TIF" id="EMI-00006"></image>
<image file="US20030005145A1-20030102-P00007.TIF" id="EMI-00007"></image>
<image file="US20030005145A1-20030102-P00008.TIF" id="EMI-00008"></image>
</paragraph>
</section>
</detailed-description>
</subdoc-description>
<subdoc-claims>
<heading lvl="1">What is claimed is: </heading>
<claim id="CLM-00001">
<claim-text><highlight><bold>1</bold></highlight>. A method of auditing a communication session between a source connected to a first node of a service network and a destination connected to a second node of the service network, wherein at least one of the source and destination are outside of the service network and are in communication with an interface of the service network, the method comprising: 
<claim-text>(a) capturing flow activity of selected traffic outside of the service network between the source and the destination at selected states and points in time during the communication session, including a flow descriptor and corresponding time data for selected datagrams outside of the service network that are intended to be placed in the service network; </claim-text>
<claim-text>(b) capturing flow activity of selected traffic in or at an interface of the service network between the source and the destination at selected states and points in time during the communication session, including a flow descriptor and corresponding time data for selected datagrams placed in the service network; and </claim-text>
<claim-text>(c) using the flow descriptors and their corresponding time data to identify flow activity outside of the service network that corresponds to flow activity in or at an interface of the service network. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00002">
<claim-text><highlight><bold>2</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference> wherein the flow activity captured in steps (a) and (b) further includes total packets for the selected datagrams, the method further comprising: 
<claim-text>(d) comparing the total packets of selected flow activity outside of the service network with the total packets in corresponding flow activity in or at a service interface of the service network to perform packet loss data analysis. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00003">
<claim-text><highlight><bold>3</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00002">claim 2</dependent-claim-reference> wherein step (d) further comprises comparing the total packets of selected flow activity outside of the service network with the total packets in corresponding flow activity in or at a service interface of the service network to determine at least one of the conditions of: no loss, loss in the service network, loss outside of the service network, and loss inside and outside of the service network. </claim-text>
</claim>
<claim id="CLM-00004">
<claim-text><highlight><bold>4</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00002">claim 2</dependent-claim-reference> wherein step (d) further comprises comparing the total packets of selected flow activity outside of the service network with the total packets in corresponding flow activity in or at a service interface of the service network to determine at least one of the conditions of: an alternate path into the service network and an alternate path around the service network. </claim-text>
</claim>
<claim id="CLM-00005">
<claim-text><highlight><bold>5</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference> further comprising: 
<claim-text>(d) storing the flow activity outside of the service network in time-stamped flow activity records of one or more external network flow collectors, and storing the flow activity in or at the interface of the service network in time-stamped flow activity records of one or more internal network flow collectors, wherein step (c) is performed using the records in the external and internal network flow collectors. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00006">
<claim-text><highlight><bold>6</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference> wherein steps (a) and (b) are performed by a flow meter. </claim-text>
</claim>
<claim id="CLM-00007">
<claim-text><highlight><bold>7</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference> further comprising: 
<claim-text>(d) determining if selected flow activity captured outside of the service network corresponds to flow activity captured in or at an interface of the service network, and, if so, then the datagrams associated with the selected flow activity captured outside of the service network have successfully passed through the service network, and thus have received a desired service. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00008">
<claim-text><highlight><bold>8</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference> further comprising: 
<claim-text>(d) determining if selected flow activity captured outside of the service network does not correspond to any flow activity captured in or at an interface of the service network, and, if so, then the datagrams associated with the selected flow activity outside of the service network may not have passed through the service network, and thus may not have received a desired service. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00009">
<claim-text><highlight><bold>9</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference> wherein ingress and egress flow activity is captured at a service interface in the service network, the method further comprising: 
<claim-text>(d) determining if selected flow activity captured outside of the service network corresponds to one, but not both of, ingress and egress flow activity captured at the ingress and egress service interface in the service network, and, if so, then the datagrams associated with the selected flow activity captured outside of the service network may not have passed bidirectionally through the service network, and thus may not have received a desired service. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00010">
<claim-text><highlight><bold>10</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference> wherein ingress and egress flow activity is captured at a service interface in the service network, the method further comprising: 
<claim-text>(d) determining if selected flow activity captured outside of the service network corresponds to only some, but not all, of ingress and egress flow activity captured at the ingress and egress service interface in the service network, and, if so, then only some of the datagrams associated with the selected flow activity captured outside of the service network have successfully passed through the service network, and thus may not have received a desired service. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00011">
<claim-text><highlight><bold>11</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference> wherein the flow activity captured in steps (a) and (b) further includes a mathematical representation of the sequence number loss distribution for the selected datagrams, the method further comprising: 
<claim-text>(d) comparing the sequence number loss distribution of flow activity captured outside of the service network with the sequence number loss distribution in corresponding flow activity in or at an interface of the service network to detect whether there is a deterministic pattern of missing sequence numbers in the flow activity captured in or at an interface of the service network that indicates that the service network is performing load balancing, and is thus not passing selected traffic through the service network. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00012">
<claim-text><highlight><bold>12</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference> further comprising: 
<claim-text>(d) determining if selected source egress and destination ingress flow activity captured outside of the service network corresponds to flow activity captured in or at an interface of the service network, and, if so, then the destination is determined to be reachable from the source via the service network. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00013">
<claim-text><highlight><bold>13</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference> further comprising: 
<claim-text>(d) determining if selected ingress and egress flow activity captured outside of the service network corresponds to both ingress and egress flow activity captured in or at an interface of the service network, and, if so, then connectivity is determined to exist between the source and the destination. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00014">
<claim-text><highlight><bold>14</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference> further comprising: 
<claim-text>(d) calculating time duration data of the identified flow activity outside of the service network that corresponds to flow activity in or at an interface of the service network; and </claim-text>
<claim-text>(e) using the time duration data to determine one or more round-trip delay parameters. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00015">
<claim-text><highlight><bold>15</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference> further comprising: 
<claim-text>(d) calculating time duration data of the identified flow activity outside of the service network that corresponds to flow activity in or at an interface of the service network; and </claim-text>
<claim-text>(e) using the time duration data to determine one or more one-way delay parameters.</claim-text>
</claim-text>
</claim>
</subdoc-claims>
<subdoc-drawings id="DRAWINGS">
<heading lvl="0" align="CENTER">Drawings</heading>
<representative-figure>1</representative-figure>
<figure id="figure-D00000">
<image id="EMI-D00000" file="US20030005145A1-20030102-D00000.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00001">
<image id="EMI-D00001" file="US20030005145A1-20030102-D00001.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00002">
<image id="EMI-D00002" file="US20030005145A1-20030102-D00002.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00003">
<image id="EMI-D00003" file="US20030005145A1-20030102-D00003.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00004">
<image id="EMI-D00004" file="US20030005145A1-20030102-D00004.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00005">
<image id="EMI-D00005" file="US20030005145A1-20030102-D00005.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00006">
<image id="EMI-D00006" file="US20030005145A1-20030102-D00006.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00007">
<image id="EMI-D00007" file="US20030005145A1-20030102-D00007.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00008">
<image id="EMI-D00008" file="US20030005145A1-20030102-D00008.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00009">
<image id="EMI-D00009" file="US20030005145A1-20030102-D00009.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00010">
<image id="EMI-D00010" file="US20030005145A1-20030102-D00010.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00011">
<image id="EMI-D00011" file="US20030005145A1-20030102-D00011.TIF" imf="TIFF" ti="DR"/>
</figure>
</subdoc-drawings>
</patent-application-publication>
