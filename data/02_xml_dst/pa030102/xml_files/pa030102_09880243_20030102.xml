<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE patent-application-publication SYSTEM "pap-v16-2002-01-01.dtd" [
<!ENTITY US20030002581A1-20030102-D00000.TIF SYSTEM "US20030002581A1-20030102-D00000.TIF" NDATA TIF>
<!ENTITY US20030002581A1-20030102-D00001.TIF SYSTEM "US20030002581A1-20030102-D00001.TIF" NDATA TIF>
<!ENTITY US20030002581A1-20030102-D00002.TIF SYSTEM "US20030002581A1-20030102-D00002.TIF" NDATA TIF>
<!ENTITY US20030002581A1-20030102-D00003.TIF SYSTEM "US20030002581A1-20030102-D00003.TIF" NDATA TIF>
<!ENTITY US20030002581A1-20030102-D00004.TIF SYSTEM "US20030002581A1-20030102-D00004.TIF" NDATA TIF>
<!ENTITY US20030002581A1-20030102-D00005.TIF SYSTEM "US20030002581A1-20030102-D00005.TIF" NDATA TIF>
]>
<patent-application-publication>
<subdoc-bibliographic-information>
<document-id>
<doc-number>20030002581</doc-number>
<kind-code>A1</kind-code>
<document-date>20030102</document-date>
</document-id>
<publication-filing-type>new</publication-filing-type>
<domestic-filing-data>
<application-number>
<doc-number>09880243</doc-number>
</application-number>
<application-number-series-code>09</application-number-series-code>
<filing-date>20010613</filing-date>
</domestic-filing-data>
<technical-information>
<classification-ipc>
<classification-ipc-primary>
<ipc>H04N007/12</ipc>
</classification-ipc-primary>
<classification-ipc-edition>07</classification-ipc-edition>
</classification-ipc>
<classification-us>
<classification-us-primary>
<uspc>
<class>375</class>
<subclass>240030</subclass>
</uspc>
</classification-us-primary>
<classification-us-secondary>
<uspc>
<class>375</class>
<subclass>240180</subclass>
</uspc>
</classification-us-secondary>
<classification-us-secondary>
<uspc>
<class>375</class>
<subclass>240200</subclass>
</uspc>
</classification-us-secondary>
<classification-us-secondary>
<uspc>
<class>375</class>
<subclass>240190</subclass>
</uspc>
</classification-us-secondary>
<classification-us-secondary>
<uspc>
<class>375</class>
<subclass>240240</subclass>
</uspc>
</classification-us-secondary>
</classification-us>
<title-of-invention>Non-compensated transcoding of a video stream</title-of-invention>
</technical-information>
<inventors>
<first-named-inventor>
<name>
<given-name>Shankar</given-name>
<family-name>Moni</family-name>
</name>
<residence>
<residence-us>
<city>San Jose</city>
<state>CA</state>
<country-code>US</country-code>
</residence-us>
</residence>
<authority-applicant>INV</authority-applicant>
</first-named-inventor>
<inventor>
<name>
<given-name>Andrew</given-name>
<middle-name>W.</middle-name>
<family-name>Walters</family-name>
</name>
<residence>
<residence-us>
<city>San Jose</city>
<state>CA</state>
<country-code>US</country-code>
</residence-us>
</residence>
<authority-applicant>INV</authority-applicant>
</inventor>
<inventor>
<name>
<given-name>John</given-name>
<middle-name>A.</middle-name>
<family-name>Tardif</family-name>
</name>
<residence>
<residence-us>
<city>San Jose</city>
<state>CA</state>
<country-code>US</country-code>
</residence-us>
</residence>
<authority-applicant>INV</authority-applicant>
</inventor>
<inventor>
<name>
<given-name>Padma</given-name>
<family-name>Parthasarathy</family-name>
</name>
<residence>
<residence-us>
<city>Fremont</city>
<state>CA</state>
<country-code>US</country-code>
</residence-us>
</residence>
<authority-applicant>INV</authority-applicant>
</inventor>
</inventors>
<correspondence-address>
<name-1>Rick D. Nydegger</name-1>
<name-2>WORKMAN, NYDEGGER &amp; SEELEY</name-2>
<address>
<address-1>1000 Eagle Gate Tower</address-1>
<address-2>60 East South Temple</address-2>
<city>Salt Lake City</city>
<state>UT</state>
<postalcode>84111</postalcode>
<country>
<country-code>US</country-code>
</country>
</address>
</correspondence-address>
</subdoc-bibliographic-information>
<subdoc-abstract>
<paragraph id="A-0001" lvl="0">Systems and methods for transcoding a transport stream or a video stream. A video stream includes a quantization matrix and a quantization scale that define how DCT frequency coefficients are quantized. A transport stream is transcoded by updating the quantization matrix and/or the quantization scale such that a new set of DCT frequency coefficients may be generated. Typically the quantization scale and/or the quantization matrix are updated such that the DCT frequency coefficients are more coarsely quantized such that their encoding consumes fewer bits. The quantization matrix can be updated such that select frequency coefficients are affected. Transcoding can operate at any level of the video stream, such as the frame level, the slice level, or the macroblock level. The bit rate of the video stream can therefore be adjusted or altered according to a current quantization level and a current bit rate. </paragraph>
</subdoc-abstract>
<subdoc-description>
<summary-of-invention>
<section>
<heading lvl="1">BACKGROUND OF THE INVENTION </heading>
<paragraph id="P-0001" lvl="0"><number>&lsqb;0001&rsqb;</number> 1. The Field of the Invention </paragraph>
<paragraph id="P-0002" lvl="0"><number>&lsqb;0002&rsqb;</number> The present invention relates to systems, methods, and computer program products for transcoding transport or video streams. More particularly, the present invention relates to systems, methods, and computer program products for reducing a bit rate of a video or transport stream by generating a new set of discrete cosine transform (DCT) frequency coefficients. </paragraph>
<paragraph id="P-0003" lvl="0"><number>&lsqb;0003&rsqb;</number> b <highlight><bold>2</bold></highlight>. Description of the Related Art </paragraph>
<paragraph id="P-0004" lvl="0"><number>&lsqb;0004&rsqb;</number> Digital video signals have several significant advantages over their analog counterparts. They can be transmitted over long distances and stored without degradation. They can be encrypted and otherwise processed for purposes such as security and unnecessary or redundant information can be removed from the digital video signals. One cost, however, of digital signals is related to the bandwidth that they consume. More specifically, uncompressed digital or video signals can consume significant bandwidth. This is particularly a problem in situations where multiple digital signals are being broadcast or where the digital signal is being transmitted over a medium such as the Internet, which has limited bandwidth in many circumstances. </paragraph>
<paragraph id="P-0005" lvl="0"><number>&lsqb;0005&rsqb;</number> This problem has been partially solved through the use of compression. One compression scheme is defined by the Moving Pictures Expert Group (MPEG). The bit stream defined by MPEG is the output of an encoding process that is designed to significantly compress the video picture information. As the MPEG standard only defines the syntax of the resulting bit stream, the standard is flexible enough to be used in a variety of different situations, such as satellite broadcast services, cable television, interactive television services, and the Internet. </paragraph>
<paragraph id="P-0006" lvl="0"><number>&lsqb;0006&rsqb;</number> The MPEG encoding process generally occurs as follows. A video signal is sampled and quantized to define color and luminance components for each pixel of the digital video. Values representing the color and luminance components are stored in structures known as macroblocks. The color and luminance values stored in the macroblocks are converted to frequency values using a discrete cosine transform (DCT). The transform coefficients obtained from the DCT represent different frequencies in the brightness and the color of the picture. </paragraph>
<paragraph id="P-0007" lvl="0"><number>&lsqb;0007&rsqb;</number> The MPEG encoding process takes advantage of the fact that human visual system is insensitive to high frequencies in color and luminance changes, and quantizes the transform coefficients to represent the color and luminance information by smaller or more coarsely scaled values. The quantized DCT transform coefficients are then encoded using run level (RLC) and variable length coding (VLC) techniques, which further compress the video stream. The MPEG standard also provides additional compression through motion compensation techniques. </paragraph>
<paragraph id="P-0008" lvl="0"><number>&lsqb;0008&rsqb;</number> However, even compressed video or MPEG streams may still have a bit rate that is unsatisfactorily high for certain applications, and therefore there is a need to further compress the video stream or reduce the bit rate of the stream. One solution to this problem is to transcode the MPEG stream by completely decoding the MPEG stream and then re-encoding the MPEG stream at a higher compression ratio to reduce the bit rate to an acceptable level. However, transcoding an MPEG stream in this fashion is often computationally expensive because of the need to perform an inverse quantization and an inverse DCT to recreate an approximation of the original data prior to re-encoding the data in accordance with a desired bit rate. Transcoding a video stream is even more complex when motion estimation and compensation are performed. </paragraph>
<paragraph id="P-0009" lvl="0"><number>&lsqb;0009&rsqb;</number> As previously stated however, transcoding a video stream is often necessary because the bit rate of the incoming video stream may be higher than the available bandwidth or the bit rate of the incoming MPEG stream may be higher than the optimal bit rate for storage of the video stream on a storage medium such as a hard disk drive. In view of these and other problems presented by video streams, minimally complex systems and methods are needed for transcoding a video stream. </paragraph>
</section>
<section>
<heading lvl="1">SUMMARY OF THE INVENTION </heading>
<paragraph id="P-0010" lvl="0"><number>&lsqb;0010&rsqb;</number> The present invention provides a low complexity approach for transcoding a video stream to reduce a bit rate of a previously compressed video stream. The present invention further provides the ability to store or alter a video stream such that the video stream complies with a user defined or otherwise specified quality level. Thus, reducing the bandwidth consumed by the transport or video stream and memory management are exemplary advantages of the present invention. </paragraph>
<paragraph id="P-0011" lvl="0"><number>&lsqb;0011&rsqb;</number> A video stream is transcoded by re-quantizing previously quantized transform frequency coefficients, without performing inverse quantization and inverse transform operations. This enables the video stream to be compressed to an acceptable bit rate without incurring the additional complexity of the inverse quantization and inverse transform operations. Although the present invention is described with reference to MPEG, the systems and methods described herein is applicable to any type of transform (such as wavelet and DCT transforms) that is followed by a form of quantization. </paragraph>
<paragraph id="P-0012" lvl="0"><number>&lsqb;0012&rsqb;</number> For example, when a video stream has been previously encoded using a DCT, run level coding (RLC) and/or variable length coding (VLC) techniques, the RLC and/or the VLC codes are decoded by performing an inverse RLC and/or VLC to obtain the blocks of quantized DCT frequency coefficients. Then, using a new value of a quantization matrix and/or a quantization scale, the quantized DCT frequency coefficients are re-quantized based on the new values of the quantization matrix and/or the quantization scale. After the DCT frequency coefficients have been thus re-quantized, they are re-encoded using RLC and/or VLC coding techniques. By re-quantizing the DCT frequency coefficients more coarsely, encoding the re-quantized DCT frequency coefficients requires fewer bits. As a result, the overall bit rate of the transcoded video stream is reduced and resources such as storage space and network bandwidth are more optimally utilized. </paragraph>
<paragraph id="P-0013" lvl="0"><number>&lsqb;0013&rsqb;</number> Another aspect of the present invention enables a user to define the quality of the video stream, for example, by selecting a video stream bit rate. In other situations, the quality of the video stream is dependent on the amount of memory available to store the video stream, which is limited in some cases. The desired bit rate may be realized by relying on the current bit rate and a current quantization level. By measuring the current bit rate, the amount of memory required to store a video stream may be determined. If the current bit rate will cause the available or specified memory to be used too quickly, then the current bit rate is changed or reduced by altering the quantization level. Because the bit rate has been reduced in this manner, the available or specified storage can be accommodated. </paragraph>
<paragraph id="P-0014" lvl="0"><number>&lsqb;0014&rsqb;</number> Additional features and advantages of the invention will be set forth in the description which follows, and in part will be obvious from the description, or may be learned by the practice of the invention. The features and advantages of the invention may be realized and obtained by means of the instruments and combinations particularly pointed out in the appended claims. These and other features of the present invention will become more fully apparent from the following description and appended claims, or may be learned by the practice of the invention as set forth hereinafter. </paragraph>
</section>
</summary-of-invention>
<brief-description-of-drawings>
<section>
<heading lvl="1">BRIEF DESCRIPTION OF THE DRAWINGS </heading>
<paragraph id="P-0015" lvl="0"><number>&lsqb;0015&rsqb;</number> In order to describe the manner in which the above-recited and other advantages and features of the invention can be obtained, a more particular description of the invention briefly described above will be rendered by reference to specific embodiments thereof which are illustrated in the appended drawings. Understanding that these drawings depict only typical embodiments of the invention and are not therefore to be considered to be limiting of its scope, the invention will be described and explained with additional specificity and detail through the use of the accompanying drawings in which: </paragraph>
<paragraph id="P-0016" lvl="0"><number>&lsqb;0016&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1</cross-reference> illustrates an exemplary system that provides a suitable operating environment for the present invention; </paragraph>
<paragraph id="P-0017" lvl="0"><number>&lsqb;0017&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 2</cross-reference> is a block diagram illustrating a video stream that is respectively encoded, transcoded, and decoded; </paragraph>
<paragraph id="P-0018" lvl="0"><number>&lsqb;0018&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3</cross-reference> is a block diagram that more fully depicts how a video stream is transcoded in accordance with the present invention; </paragraph>
<paragraph id="P-0019" lvl="0"><number>&lsqb;0019&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 4</cross-reference> is a block diagram illustrating a system for transcoding a video stream using multipliers and rounding; and </paragraph>
<paragraph id="P-0020" lvl="0"><number>&lsqb;0020&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 5</cross-reference> is a block diagram that illustrates an exemplary system and method for transcoding a video stream where the new bit rate is dependent on the current bit rate of the video stream. </paragraph>
</section>
</brief-description-of-drawings>
<detailed-description>
<section>
<heading lvl="1">DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENTS </heading>
<paragraph id="P-0021" lvl="0"><number>&lsqb;0021&rsqb;</number> The present invention is discussed with respect to MPEG streams and to compression techniques involving a Discrete Cosine Transform (DCT). It is understood that the systems and methods described herein also apply to other transforms (wavelet, for example) that are followed by quantization. Thus, &ldquo;transform,&rdquo; as used herein, is not limited to DCT but can be applied to other transforms, such as wavelets and the like. </paragraph>
<paragraph id="P-0022" lvl="0"><number>&lsqb;0022&rsqb;</number> In MPEG, the quantized DCT frequency coefficients are determined by dividing the DCT frequency coefficients by some value. The factors by which the DCT frequency coefficients are divided include values stored in one or more quantization matrices and a quantization scale factor. Different quantization matrices and quantization scales can be provided for chrominance blocks, luminance blocks, intra blocks, non-intra blocks and the like. &ldquo;Quantization level,&rdquo; as used herein, refers to quantization matrices, quantization scales, ratios between quantization matrices, ratios between entries in the quantization matrices, ratios between quantization scales and the like. The ratios between quantization matrices and quantization scales include ratios between new values of the quantization matrices and/or scales and old or current values of the quantization matrices and/or scales. </paragraph>
<paragraph id="P-0023" lvl="0"><number>&lsqb;0023&rsqb;</number> As previously described, transcoding a transport or video stream is often a difficult process that frequently involves complex computations such as converting significant amounts of data to and from the frequency domain as the video stream is decoded and re-encoded. The complexity of transcoding a video stream is also increased when compensation is performed for changes in the reference frames which were caused as the reference frames were transcoded. The present invention provides low complexity systems and methods for non-compensated re-quantization of a transport or video stream. According to one aspect of the present invention, the complexity of transcoding the video stream is reduced by using the current quantization level and current bit rate of the video stream. </paragraph>
<paragraph id="P-0024" lvl="0"><number>&lsqb;0024&rsqb;</number> More specifically, the DCT frequency coefficients of an original encoded video stream are re-quantized without computing an inverse DCT. In some cases, an inverse quantization is also not performed to transcode the original coded video stream. The DCT frequency coefficients are re-quantized by updating a quantization matrix and a quantization scale associated with the macroblock, frame, or slice level of the video stream. As the bit rate of the video stream can be altered by updating parameters such as the quantization matrix and/or the quantization scale, the quality of the video stream can also be controlled automatically or by a user. Further, the available bandwidth for the video stream and the storage required to store the video stream may be optimally utilized by transcoding the video stream. </paragraph>
<paragraph id="P-0025" lvl="0"><number>&lsqb;0025&rsqb;</number> The present invention extends to both methods and systems for transcoding a video stream using both software and/or hardware. The embodiments of the present invention may comprise a special purpose or general purpose computer including various computer hardware, as discussed in greater detail below. Set top boxes that enhance the capabilities of conventional televisions represent an example of a special purpose computer. The embodiments may further comprise multiple computers linked in a networked environment. </paragraph>
<paragraph id="P-0026" lvl="0"><number>&lsqb;0026&rsqb;</number> Embodiments within the scope of the present invention also include computer-readable media for carrying or having computer-executable instructions or data structures stored thereon. Such computer-readable media can be any available media that can be accessed by a general purpose or special purpose computer. By way of example, and not limitation, such computer-readable media can comprise physical storage media such as RAM, ROM, EEPROM, CD-ROM or other optical disk storage, magnetic disk storage or other magnetic storage devices, or any other medium that can be used to carry or store desired program code means in the form of computer-executable instructions or data structures and that can be accessed by a general purpose or special purpose computer. When information is transferred or provided over a network or another communications connection (either hardwired, wireless, or a combination of hardwired or wireless) to a computer, the computer properly views the connection as a computer-readable medium. Thus, such a connection is also properly termed a computer-readable medium. Combinations of the above should also be included within the scope of computer-readable media. Computer-executable instructions comprise, for example, instructions and data which cause a general purpose computer, special purpose computer, or special purpose processing device to perform a certain function or group of functions. </paragraph>
<paragraph id="P-0027" lvl="0"><number>&lsqb;0027&rsqb;</number> The invention will be described in the general context of computer-executable instructions, such as program modules, being executed by set-top boxes or other computers. Generally, program modules include routines, programs, objects, components, data structures, etc. that perform particular tasks or implement particular abstract data types. Computer-executable instructions, associated data structures, and program modules represent examples of the program code means for executing steps of the methods disclosed herein. The particular sequence of such executable instructions or associated data structures represents examples of corresponding acts for implementing the functions described in such steps. </paragraph>
<paragraph id="P-0028" lvl="0"><number>&lsqb;0028&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1</cross-reference> and the corresponding discussion are intended to provide a general description of an exemplary environment in which the invention may be implemented. In the discussion, reference is made to a system that may be used for displaying and/or recording programming. A system may be a display unit, such as a television screen, coupled to a processing device for performing the data processing steps disclosed herein, or may include any number of interconnected consumer electronic devices, one or more of which may have a processing device for performing the data processing steps disclosed herein. Examples of such consumer electronic devices include a video cassette recorder (&ldquo;VCR&rdquo;), a video game system, a stereo system, a television or monitor with data processing capabilities, a cable television box, a digital satellite system receiver (&ldquo;DSS&rdquo;), a digital video broadcasting system (&ldquo;DVB&rdquo;), a digital versatile disc system (&ldquo;DVD&rdquo;), a set-top box that serves as an Internet terminal, and any other device capable of processing data as described herein. Also for purposes of this description and in the claims, the term &ldquo;programming&rdquo; includes both the viewable portions of moving image data and its associated sound data. However, the teachings of the present invention are not limited to any specific physical embodiment, but can be used in any application in which originally compressed data may need to be further compressed to achieve some designated bit rate or compression ratio. </paragraph>
<paragraph id="P-0029" lvl="0"><number>&lsqb;0029&rsqb;</number> In one embodiment, the present invention is implemented in a system that uses a conventional television screen or other display unit to display information and includes a set-top box or a similar Internet terminal that has been adapted to perform the operations that include composing, sending and receiving email, browsing the World Wide Web (&ldquo;Web&rdquo;), accessing other segments of the Internet, and otherwise displaying information. An Internet terminal typically uses standard telephone lines, Integrated Services Digital Network (ISDN) lines, cable lines associated with cable television service, or the like to connect to the Internet or other wide area networks. </paragraph>
<paragraph id="P-0030" lvl="0"><number>&lsqb;0030&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1</cross-reference> illustrates a system <highlight><bold>10</bold></highlight> that includes a management system <highlight><bold>12</bold></highlight>, a display device <highlight><bold>14</bold></highlight> and an audio system <highlight><bold>16</bold></highlight>. Management system <highlight><bold>12</bold></highlight> may be a set-top box or Internet terminal that has been adapted to perform the operations disclosed herein. Management system <highlight><bold>12</bold></highlight> may be integrally positioned with or separate from display device <highlight><bold>14</bold></highlight>, which may be a high definition television display, a standard television display, a flat panel display, a projection device, a high definition television display, a computer monitor, or any other device capable of displaying viewable video image data. Audio system <highlight><bold>16</bold></highlight> may be a speaker, a stereo system, or any device capable of emitting sound data, and similarly may be integrally positioned with or separate from display device <highlight><bold>14</bold></highlight>. </paragraph>
<paragraph id="P-0031" lvl="0"><number>&lsqb;0031&rsqb;</number> Management system <highlight><bold>12</bold></highlight> includes a signal input <highlight><bold>18</bold></highlight>, which receives programming from a signal source <highlight><bold>20</bold></highlight>. The programming is transmitted from signal source <highlight><bold>20</bold></highlight> to signal input <highlight><bold>18</bold></highlight> via a programming input line <highlight><bold>22</bold></highlight>, which can be a cable or optic connection, a terrestrial antenna system, a satellite system, or any device or system capable of transmitting programming to home management system <highlight><bold>12</bold></highlight>. </paragraph>
<paragraph id="P-0032" lvl="0"><number>&lsqb;0032&rsqb;</number> The signal source <highlight><bold>20</bold></highlight> may be either a single channel signal source or a multiple channel signal source. Examples of the signal source <highlight><bold>20</bold></highlight> include a VCR, a DVD, and the like. In addition, the signal source <highlight><bold>20</bold></highlight> includes any system or device that is capable of sending a signal that may be received by a satellite receiver, a cable or optic connection, a terrestrial antenna, or the like. Examples of a multiple channel signal source include DSS/DVB, a cable box, locally broadcast programming (i.e. programming broadcast using UHF or VHF), and the like. The programming or signals received from the signal source <highlight><bold>20</bold></highlight> include transport streams, video streams, compressed video streams, and the like. </paragraph>
<paragraph id="P-0033" lvl="0"><number>&lsqb;0033&rsqb;</number> While <cross-reference target="DRAWINGS">FIG. 1</cross-reference> illustrates system <highlight><bold>10</bold></highlight> as having a single programming input line <highlight><bold>22</bold></highlight> and a single signal source <highlight><bold>20</bold></highlight>, there can instead be a plurality of programming input lines that transmit programming from a plurality of signal sources. In such embodiments, the system <highlight><bold>10</bold></highlight> may receive the programming from one signal source or from a plurality of signal sources at a time. </paragraph>
<paragraph id="P-0034" lvl="0"><number>&lsqb;0034&rsqb;</number> Management system <highlight><bold>12</bold></highlight> also includes a user input interface <highlight><bold>24</bold></highlight>, which receives input from an input device <highlight><bold>26</bold></highlight>, such as a remote control, keyboard, microphone, or any other device capable of generating electronic instructions for management system <highlight><bold>12</bold></highlight>. Input device <highlight><bold>26</bold></highlight> is communicatively coupled to management system <highlight><bold>12</bold></highlight> over an input link <highlight><bold>28</bold></highlight> so as to enable such control. Input device <highlight><bold>26</bold></highlight> generates electronic instructions over input link <highlight><bold>28</bold></highlight> in response to preprogrammed data or in response to a viewer pressing buttons on input device <highlight><bold>26</bold></highlight>. Input device <highlight><bold>26</bold></highlight> may also control Web browser software within management system <highlight><bold>12</bold></highlight> as when management system <highlight><bold>12</bold></highlight> is a set-top box or an Internet terminal that has been adapted to perform the operations disclosed herein. For instance, input device <highlight><bold>26</bold></highlight> may be programmed to turn on home entertainment system <highlight><bold>10</bold></highlight> and to tune management system <highlight><bold>12</bold></highlight> to a channel. </paragraph>
<paragraph id="P-0035" lvl="0"><number>&lsqb;0035&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1</cross-reference> illustrates a signal recorder <highlight><bold>30</bold></highlight>, which is capable of receiving video and/or audio data and recording the data on a storage medium. Video signals are transmitted to signal recorder <highlight><bold>30</bold></highlight> and/or display device <highlight><bold>14</bold></highlight> by video image link <highlight><bold>32</bold></highlight>, examples of which include a radio-frequency (&ldquo;RF&rdquo;) link, an S-video link, a composite link, or any other equivalent form of video image link. Similarly, audio link <highlight><bold>34</bold></highlight> transmits audio data from management system <highlight><bold>12</bold></highlight> to audio system <highlight><bold>16</bold></highlight> or to signal recorder <highlight><bold>30</bold></highlight>. </paragraph>
<paragraph id="P-0036" lvl="0"><number>&lsqb;0036&rsqb;</number> The operation of management system <highlight><bold>12</bold></highlight> is controlled by a central processing unit (&ldquo;CPU&rdquo;), illustrated as processing unit <highlight><bold>36</bold></highlight>, which is coupled to an application-specific integrated circuit (&ldquo;ASIC&rdquo;) <highlight><bold>38</bold></highlight> and uses computer-executable instructions implemented in software and/or hardwired logic circuitry. Processing unit <highlight><bold>36</bold></highlight> and ASIC <highlight><bold>38</bold></highlight> are coupled via a system bus <highlight><bold>40</bold></highlight>, which also interconnects various other system components, such as the system memory <highlight><bold>42</bold></highlight>, mass storage interface <highlight><bold>44</bold></highlight>, user interface <highlight><bold>24</bold></highlight> and signal input <highlight><bold>18</bold></highlight>. Processing unit <highlight><bold>36</bold></highlight> executes software designed to implement features of management system <highlight><bold>12</bold></highlight> including features of the present invention. ASIC <highlight><bold>38</bold></highlight> contains circuitry that is used to implement certain functions of management system <highlight><bold>12</bold></highlight>. Instructions, data, and other software useful for the operation of processing unit <highlight><bold>36</bold></highlight> and ASIC <highlight><bold>38</bold></highlight> may be stored in the system memory <highlight><bold>42</bold></highlight>, such as in read-only memory (&ldquo;ROM&rdquo;) <highlight><bold>46</bold></highlight> and/or in random-access memory (&ldquo;RAM&rdquo;) <highlight><bold>48</bold></highlight>, and/or in a mass storage device <highlight><bold>50</bold></highlight>, which is coupled to mass storage interface <highlight><bold>44</bold></highlight>. ROM <highlight><bold>46</bold></highlight>, RAM <highlight><bold>48</bold></highlight> and mass storage device <highlight><bold>50</bold></highlight> are communicatively coupled to ASIC <highlight><bold>38</bold></highlight> so as to be readable by ASIC <highlight><bold>38</bold></highlight> and so that data may be written from ASIC <highlight><bold>38</bold></highlight> to RAM <highlight><bold>48</bold></highlight> and possibly mass storage device <highlight><bold>50</bold></highlight>. </paragraph>
<paragraph id="P-0037" lvl="0"><number>&lsqb;0037&rsqb;</number> Mass storage device <highlight><bold>50</bold></highlight> may be a magnetic hard disk <highlight><bold>52</bold></highlight> or any other magnetic or optical mass memory device that is capable of storing large amounts of data. Any desired computer-readable instructions or data, including application programs <highlight><bold>54</bold></highlight>, other program modules <highlight><bold>56</bold></highlight>, and an electronic programming guide (&ldquo;EPG&rdquo;) <highlight><bold>58</bold></highlight>, which specifies the broadcast times and channels of programs can be stored in mass storage device <highlight><bold>50</bold></highlight>. Mass storage device <highlight><bold>50</bold></highlight> can also be used to record video data <highlight><bold>53</bold></highlight>, such as a transport stream or a video stream. </paragraph>
<paragraph id="P-0038" lvl="0"><number>&lsqb;0038&rsqb;</number> In the embodiment where management system <highlight><bold>12</bold></highlight> is associated with the Internet, management system <highlight><bold>12</bold></highlight> communicates with a remote computer <highlight><bold>60</bold></highlight> via a wide area network (&ldquo;WAN&rdquo;) <highlight><bold>62</bold></highlight> by including a serial port interface <highlight><bold>64</bold></highlight> that is interposed between the system bus <highlight><bold>40</bold></highlight> and a modem <highlight><bold>66</bold></highlight>, a wireless link, or other means for establishing communications over a WAN that may be internal or external to management system <highlight><bold>12</bold></highlight>. Management device <highlight><bold>12</bold></highlight> is also capable of transmitting information via the Internet by direct-dial communication over standard telephone lines, or by using any other available communication medium. </paragraph>
<paragraph id="P-0039" lvl="0"><number>&lsqb;0039&rsqb;</number> While serial port interface <highlight><bold>64</bold></highlight> may be utilized to connect a modem <highlight><bold>66</bold></highlight> for communicating across a WAN, serial port interface may also be utilized to connect other consumer electronic devices, such as video game <highlight><bold>68</bold></highlight>, and/or various input devices, such as a keyboard (not shown) or joystick (not shown), to management device <highlight><bold>12</bold></highlight>. </paragraph>
<paragraph id="P-0040" lvl="0"><number>&lsqb;0040&rsqb;</number> Referring now to signal input <highlight><bold>18</bold></highlight>, if the signal on programming input line <highlight><bold>22</bold></highlight> includes multiple channels, a tuner <highlight><bold>70</bold></highlight> included in signal input <highlight><bold>18</bold></highlight> tunes to a selected channel in the signal. Multiple tuners <highlight><bold>70</bold></highlight> can be used to provide enhanced viewing features, such as picture, recording one channel while viewing another, and recording a plurality of channels simultaneously A signal decoder <highlight><bold>72</bold></highlight> converts video data from an analog format to a digital format, or from a digital format to an analog format, in the event that ASIC <highlight><bold>38</bold></highlight> and tuner <highlight><bold>70</bold></highlight> employ different formats. Signal decoder <highlight><bold>72</bold></highlight> also decodes or transcodes video data from a compressed video format (e.g. MPEG). In embodiments where the management system <highlight><bold>12</bold></highlight> includes multiple tuners <highlight><bold>70</bold></highlight>, management system <highlight><bold>12</bold></highlight> may also include multiple signal decoders <highlight><bold>72</bold></highlight> to perform the operations disclosed herein. Management system <highlight><bold>12</bold></highlight> also includes a video output <highlight><bold>74</bold></highlight> and an audio output <highlight><bold>76</bold></highlight>. </paragraph>
<paragraph id="P-0041" lvl="0"><number>&lsqb;0041&rsqb;</number> While <cross-reference target="DRAWINGS">FIG. 1</cross-reference> and the corresponding discussion above provide a general description of a suitable environment in which the invention may be implemented, it will be appreciated that the features of the present invention disclosed herein may be practiced in association with a variety of different system configurations. </paragraph>
<paragraph id="P-0042" lvl="0"><number>&lsqb;0042&rsqb;</number> An analog video signal is typically digitized using sampling structures that are often represented by macroblocks, where each macroblock represents pixel data. The macroblocks typically separate the various luminance and chrominance pixel data into separate blocks. Exemplary macroblock structures include 4:2:2, 4:4:4, 4:2:0, and 4:1:1 macroblock structures where the first number relates to the luminance pixel data and the other numbers relate to the chrominance pixel data. The 4:2:0 macroblock structure, for example, includes four 8&times;8 blocks of luminance pixel data and their associated 8&times;8 chrominance (Cb and Cr or U and V) blocks. Thus, a 4:2:0 structure includes four Y blocks, one Cb (U) block and one Cr (V) block. The human eye is more sensitive to changes in brightness than in hue and in some macroblock structures, some of the chrominance values (Cb and Cr) are often discarded. </paragraph>
<paragraph id="P-0043" lvl="0"><number>&lsqb;0043&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 2</cross-reference> is a block diagram that describes the compression of a video stream after the video stream has been organized into macroblocks, which initially represent spatial pixel data. Thus, <cross-reference target="DRAWINGS">FIG. 2</cross-reference> begins with a Discrete Cosine Transform (DCT) encoder <highlight><bold>202</bold></highlight>. Generally stated, the DCT encoder <highlight><bold>202</bold></highlight> converts spatial data to frequency data. More specifically, the DCT encoder <highlight><bold>202</bold></highlight> coverts the blocks of pixel data into corresponding blocks of frequency coefficients. Thus, each 8&times;8 block of pixel data is converted into an 8&times;8 block of frequency coefficients. </paragraph>
<paragraph id="P-0044" lvl="0"><number>&lsqb;0044&rsqb;</number> At this point, the compression of the video stream is effectively lossless except for finite-precision effects in the computation of the forward and inverse DCT. The loss associated with the compression of a video stream usually begins to occur when the frequency coefficients in the DCT block are quantized. While quantization (<highlight><bold>204</bold></highlight>) of the blocks of frequency coefficients causes data or information to be lost, quantization aids the transmission of the video stream by reducing the number of bits that are actually transmitted. </paragraph>
<paragraph id="P-0045" lvl="0"><number>&lsqb;0045&rsqb;</number> During quantization (<highlight><bold>204</bold></highlight>) of the blocks of frequency coefficients, each frequency coefficient is divided by a number typically greater than one to produce quantized frequency coefficients that are smaller than the original values. As previously stated, the numbers used to quantized the blocks of frequency coefficients include the quantization scale and/or the values located in the quantization matrices. After quantization (<highlight><bold>204</bold></highlight>), many of the frequency coefficients become zero or can be rounded to zero. It is understood that each individual frequency coefficient in the blocks of frequency coefficients may be divided by a different number. </paragraph>
<paragraph id="P-0046" lvl="0"><number>&lsqb;0046&rsqb;</number> Next, the quantized blocks of frequency coefficients, many of which are now zero or have been rounded to zero, are scanned (<highlight><bold>206</bold></highlight>) using, for example, a zig zag pattern through each 8&times;8 block. This method of scanning the coefficients is typically chosen because it tends to group together the zero coefficients that are present in the DCT block of quantized frequency coefficients. Then, the scanned DCT frequency coefficients are encoded using run level coding (RLC) and variable length coding (VLC) techniques (<highlight><bold>206</bold></highlight>). RLC typically replaces a string of frequency coefficients, all but the last one having a value of zero, with a small token that lists the number of times that zero is repeated and the value of the non-zero coefficient. The number of times that zero is repeated may be zero for encoding a non-zero coefficient with no zero coefficients preceding it. VLC coding achieves more compression by assigning shorter codes to those values that occur most often. The video stream has now been compressed and may be transmitted. As described previously, the bit rate of this video stream can still be large and may consume too much bandwidth or too much storage. </paragraph>
<paragraph id="P-0047" lvl="0"><number>&lsqb;0047&rsqb;</number> The present invention therefore provides systems and methods for transcoding the video stream such that the bit rate of the video stream is reduced. Transcoding (<highlight><bold>208</bold></highlight>) in accordance with the teachings of the present invention provides significant advantages. Primarily, the systems and methods of the present invention are computationally inexpensive and can be performed in real time. Another advantage of the present invention is the ability to transcode the video stream based on the bit rate of the video stream rather than the activity or changes that occur from one macroblock to the next. The ability to quickly alter the bit rate enables the present invention to optimally accommodate computational, bandwidth, and storage constraints. </paragraph>
<paragraph id="P-0048" lvl="0"><number>&lsqb;0048&rsqb;</number> After a video stream has been transcoded, it can be stored in memory such as on a hard disk. Alternatively, the video stream may be decoded (<highlight><bold>210</bold></highlight>), which includes decoding the RLC and VLC schemes as well as performing an inverse DCT to obtain pixel data from the re-quantized frequency coefficients. The decoded pixel data will not usually be equal to the original pixel data because the quantization process was lossy. </paragraph>
<paragraph id="P-0049" lvl="0"><number>&lsqb;0049&rsqb;</number> While <cross-reference target="DRAWINGS">FIG. 2</cross-reference> describes how a transport or video stream is encoded, transcoded and decoded with respect to MPEG and DCT, <cross-reference target="DRAWINGS">FIG. 2</cross-reference> can also be applied to other compression schemes. For example, a signal can be transformed using wavelets instead of DCT. In this case, the resulting signal may also be quantized and encoded. The systems and methods described herein can also apply to such a stream or signal. Thus, the quantized wavelet stream can be re-quantized such that the bit rate is reduced. </paragraph>
<paragraph id="P-0050" lvl="0"><number>&lsqb;0050&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3</cross-reference> is a block diagram that illustrates an exemplary system and method for transcoding a video stream. At block <highlight><bold>302</bold></highlight>, an inverse VLC and/or RLC is performed on the video stream. Decoding the VLC and/or the RLC codes is performed to obtain the quantized frequency coefficients that are included in a particular DCT block of frequency coefficients. Decoding the VLC and RLC codes thus provides access to the quantized DCT frequency coefficients. </paragraph>
<paragraph id="P-0051" lvl="0"><number>&lsqb;0051&rsqb;</number> The quantized DCT frequency coefficients of the video stream are available for re-quantization at block <highlight><bold>304</bold></highlight> after the inverse VLC and/or RLC is performed. The updated or new quantization matrix and/or quantization scale, the ratio between the new quantization matrix and the old quantization matrix, and the ratios between the new quantization scale and the old quantization scale can be pre-computed and stored in a lookup table such that they may be looked up when necessary. The LUT, quantization matrix, quantization scale, matrix ratios and scale ratios are typically updated once per frame. In general, the quantization level can be updated at various intervals including, but not limited to, once per slice (a series of macroblocks), one per frame, one per macroblock, and the like, although updating the quantization level may not be necessary in some circumstances. For example, the current bit rate may be satisfactory and it is not necessary to update the LUT, the quantization matrix, and the quantization scale. </paragraph>
<paragraph id="P-0052" lvl="0"><number>&lsqb;0052&rsqb;</number> After the quantization matrix <highlight><bold>308</bold></highlight> and/or the quantization scale <highlight><bold>310</bold></highlight> have been adjusted or updated, they are combined with or applied to the quantized DCT frequency coefficients to create a new block of re-quantized DCT frequency coefficients at block <highlight><bold>312</bold></highlight>. Typically, the quantization matrix <highlight><bold>308</bold></highlight> and/or the quantization scale <highlight><bold>310</bold></highlight> are updated or adjusted such that the resulting block of re-quantized DCT frequency coefficients are more coarse. The actual numbers in the quantization matrix and/or the quantization scale can be determined by a user. </paragraph>
<paragraph id="P-0053" lvl="0"><number>&lsqb;0053&rsqb;</number> Because the re-quantized DCT frequency coefficients are more coarse, it is likely that more zeros will exist in each block of re-quantized DCT frequency coefficients. Because more zeros are present in the new DCT block, it is likely that it can be encoded using fewer bits, which reduces the overall bit rate of the video stream. </paragraph>
<paragraph id="P-0054" lvl="0"><number>&lsqb;0054&rsqb;</number> After the quantized DCT frequency coefficients have been re-quantized, they are scanned and re-encoded using VLC and/or RLC techniques as previously described. The resulting video stream has a lower bit rate because fewer bits are usually necessary to encode the re-quantized DCT frequency coefficients. Also, the resulting video stream consumes less bandwidth and consumes less storage space if the transcoded video stream is committed to memory. </paragraph>
<paragraph id="P-0055" lvl="0"><number>&lsqb;0055&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 4</cross-reference> is a block diagram of a system used to re-quantize the DCT coefficients that are obtained from a video stream as previously described. The matrix ratio <highlight><bold>402</bold></highlight> represents a ratio between a new value of the quantization matrix (QMATnew) and a current value of the quantization matrix (QMATold). The quantization matrix contains multiple values, each of which was used to quantize a corresponding position in the block of DCT frequency coefficients. The matrix ratio <highlight><bold>402</bold></highlight> is represented as: </paragraph>
<paragraph id="P-0056" lvl="2"><number>&lsqb;0056&rsqb;</number> QMATnew &lsqb;i&rsqb; &lsqb;j&rsqb;/QMATold &lsqb;I&rsqb; &lsqb;j&rsqb;. </paragraph>
<paragraph id="P-0057" lvl="0"><number>&lsqb;0057&rsqb;</number> The scale ratio <highlight><bold>404</bold></highlight> represents a ratio between a new value of a quantization scale (MQUANTnew) and a current value of the quantization scale (MQUANTold), or </paragraph>
<paragraph id="P-0058" lvl="2"><number>&lsqb;0058&rsqb;</number> MQUANTnew/MQUANTold. </paragraph>
<paragraph id="P-0059" lvl="0"><number>&lsqb;0059&rsqb;</number> The matrix ratio <highlight><bold>402</bold></highlight> and the scale ratio <highlight><bold>404</bold></highlight> are multiplied at block <highlight><bold>410</bold></highlight> to produce a value that will be used to re-quantize the quantized DCT frequency coefficients that have been obtained from the video stream. In one embodiment, a pre-quantization factor is to the quantized DCT frequency coefficients <highlight><bold>408</bold></highlight> to account for the non-linearity of the original quantization as shown in <cross-reference target="DRAWINGS">FIG. 4</cross-reference>. The pre-quantization factor <highlight><bold>406</bold></highlight> is often varied according to a magnitude of the quantized DCT frequency coefficient. In addition, the value of the pre-quantization factor is also determined according to whether an intra or a non-intra block is being transcoded because the inverse quantization of intra blocks, as specified by MPEG, is different than the inverse quantization of non-intra blocks. Optimum values for both the pre-quantization factor <highlight><bold>406</bold></highlight> and the post-quantization factor <highlight><bold>418</bold></highlight> can be theoretically determined for both intra and non-intra blocks when the distribution of frequency coefficients is uniform. In the case where the distribution of frequency coefficients is not uniform, the pre-quantization factor <highlight><bold>406</bold></highlight> and the post-quantization factor <highlight><bold>418</bold></highlight> can be determined empirically. Usually, the distribution of the quantized DCT frequency coefficients is unknown and the empirically derived pre-quantization factor <highlight><bold>406</bold></highlight> and post-quantization factor <highlight><bold>418</bold></highlight> will be used for both intra and non-intra blocks. </paragraph>
<paragraph id="P-0060" lvl="0"><number>&lsqb;0060&rsqb;</number> The pre-quantization factor represented at block <highlight><bold>406</bold></highlight> and the post quantization factor <highlight><bold>418</bold></highlight> are selected using a multiplexer. In one example, the pre-quantization factor for intra blocks is 0.0 and the post quantization factor <highlight><bold>418</bold></highlight> for intra blocks is 0.5. For non-intra blocks, the following table is an example of exemplary pre quantization factors and post quantization factors. It is understood that these values are exemplary and that the present invention is not limited to these specific values. The table presents a case, which represents a magnitude of the quantized DCT coefficient and the corresponding pre and post quantization factors. The present table presents eight ranges, but more or less ranges can also be selected for non-intra blocks.  
<table-cwu id="TABLE-US-00001">
<number>1</number>
<table frame="none" colsep="0" rowsep="0">
<tgroup align="left" colsep="0" rowsep="0" cols="3">
<colspec colname="1" colwidth="91PT" align="center"/>
<colspec colname="2" colwidth="56PT" align="center"/>
<colspec colname="3" colwidth="70PT" align="center"/>
<thead>
<row>
<entry></entry>
</row>
<row><entry namest="1" nameend="3" align="center" rowsep="1"></entry>
</row>
<row>
<entry></entry>
<entry>Pre quantization</entry>
<entry>Post quantization</entry>
</row>
<row>
<entry>Case</entry>
<entry>Factor</entry>
<entry>Factor</entry>
</row>
<row><entry namest="1" nameend="3" align="center" rowsep="1"></entry>
</row>
</thead>
<tbody valign="top">
<row>
<entry></entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="3">
<colspec colname="1" colwidth="91PT" align="center"/>
<colspec colname="2" colwidth="56PT" align="char" char="."/>
<colspec colname="3" colwidth="70PT" align="char" char="."/>
<tbody valign="top">
<row>
<entry>0 &lt; coefficient &lE; 2</entry>
<entry>0.109375</entry>
<entry>0.40625</entry>
</row>
<row>
<entry>2 &lt; coefficient &lE; 4</entry>
<entry>0.203125</entry>
<entry>0.3125</entry>
</row>
<row>
<entry>4 &lt; coefficient &lE; 8</entry>
<entry>0.234375</entry>
<entry>0.234375</entry>
</row>
<row>
<entry>&ensp;8 &lt; coefficient &lE; 16</entry>
<entry>0.265625</entry>
<entry>0.15625</entry>
</row>
<row>
<entry>16 &lt; coefficient &lE; 32</entry>
<entry>0.390625</entry>
<entry>0.109375</entry>
</row>
<row>
<entry>32 &lt; coefficient &lE; 64</entry>
<entry>0.375</entry>
<entry>0.09375</entry>
</row>
<row>
<entry>&ensp;64 &lt; coefficient &lE; 128</entry>
<entry>0.421875</entry>
<entry>0.0625</entry>
</row>
<row>
<entry>128 &lE; coefficient&emsp;&emsp;&emsp;</entry>
<entry>0.453125</entry>
<entry>0.046875</entry>
</row>
<row><entry namest="1" nameend="3" align="center" rowsep="1"></entry>
</row>
</tbody>
</tgroup>
</table>
</table-cwu>
</paragraph>
<paragraph id="P-0061" lvl="0"><number>&lsqb;0061&rsqb;</number> In this exemplary embodiment, block <highlight><bold>414</bold></highlight>, the output of block <highlight><bold>410</bold></highlight> is rounded using rounding <highlight><bold>411</bold></highlight> and then multiplied against the rounded DCT frequency coefficients in block <highlight><bold>416</bold></highlight>. The output of block <highlight><bold>416</bold></highlight> is the preliminary re-quantized DCT frequency coefficients. At block <highlight><bold>420</bold></highlight>, a post quantization factor <highlight><bold>418</bold></highlight> is combined with the output of block <highlight><bold>416</bold></highlight> to produce the re-quantized DCT frequency coefficients <highlight><bold>422</bold></highlight>. The pre-quantization factor <highlight><bold>406</bold></highlight> and the post quantization factor <highlight><bold>418</bold></highlight> are chosen to account for the non-linearity that is introduced when the original DCT frequency coefficients are quantized. The rounding, which is accomplished by the pre-quantization factor <highlight><bold>406</bold></highlight>, rounding <highlight><bold>411</bold></highlight>, and post quantization factor <highlight><bold>418</bold></highlight> are chosen to ensure that the re-quantized frequency coefficients will ultimately render an image that is minimally distorted from the original image. The present invention does not exclude other rounding techniques or does not require that any rounding be used at all. </paragraph>
<paragraph id="P-0062" lvl="0"><number>&lsqb;0062&rsqb;</number> Choosing the pre-quantization factor <highlight><bold>406</bold></highlight> and the post quantization factor <highlight><bold>418</bold></highlight> is often dependent on the original quantization level because the distribution of the re-quantized frequency coefficients is a result of multiplying the original quantized frequency coefficients by the matrix ratio <highlight><bold>402</bold></highlight> and by the scale ratio <highlight><bold>404</bold></highlight>. Because the multiplications have finite precision and because the distribution of the original frequency coefficients is typically unknown, a quantization error is often incurred. The quantization error is accounted for, in one example, by using the empirically derived pre-quantization factor <highlight><bold>406</bold></highlight> and post-quantization factor <highlight><bold>418</bold></highlight>. </paragraph>
<paragraph id="P-0063" lvl="0"><number>&lsqb;0063&rsqb;</number> After the re-quantized DCT frequency coefficients have been computed, they are re-encoded using RLC and VLC techniques. The overall result of transcoding the video stream in this manner is that the bit rate has been reduced. <cross-reference target="DRAWINGS">FIG. 4</cross-reference> therefore represents the following quantization of the DCT frequency coefficients: Coefficient(new) &equals;&lsqb;coefficient(old)&plus;pre-quantization factor&rsqb;*&lcub;&lsqb;QMAT ratio * MQUANT ratio&rsqb;&plus;rounding&rcub;&plus;post quantization factor. </paragraph>
<paragraph id="P-0064" lvl="0"><number>&lsqb;0064&rsqb;</number> A user may determine the new values of the new quantization matrix and the new quantization scale or pre-defined values can be provided. As the potential number of values for the quantization matrix is limited (in one example, only 256 values are possible), the ratio of the new quantization matrix to the current or old quantization matrix is pre-computed. This computation may be repeated, for example, on a per frame basis and is performed for each coefficient in each quantization matrix (luminance, chrominance, intra block, non-intra block). This process can be further simplified by computing the inverses (1/x) for each of the possible values in the quantization matrix to enable the ratio of the new quantization matrix to the old quantization matrix to be generated using a multiply operation instead of a divide operation. In a similar manner, the ratio of the new quantization scale to the current or old quantization scale can also be pre-computed. </paragraph>
<paragraph id="P-0065" lvl="0"><number>&lsqb;0065&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 5</cross-reference> is a block diagram that used to describe how the bit rate of a video stream can be used in transcoding the video stream in conjunction with a current quantization level. In fact, the bit rate can be the deciding factor in choosing a new quantization level. <cross-reference target="DRAWINGS">FIG. 5</cross-reference> is explained in the context of a video stream that is being stored in the memory, such as a hard disk, of a set top box or of a computer and further illustrates how the number of bits that have been stored within a particular time interval may be used, in conjunction with a present bit rate, to alter the present bit rate to enable more precise control of the number of bits stored in a particular time interval. </paragraph>
<paragraph id="P-0066" lvl="0"><number>&lsqb;0066&rsqb;</number> Controlling the bit rate of a video stream effectively guarantees that a given amount of memory will be consumed or used in given time interval. Area <highlight><bold>500</bold></highlight> represents how many bits have been stored within a certain time period. Often, the area <highlight><bold>500</bold></highlight> is defined by a user who selects how much storage a video stream is allowed to consume. Alternatively, the bit rate can be controlled autonomously such that the bit rate of the video stream is automatically adjusted in order to optimally utilize available resources such as bandwidth and memory. </paragraph>
<paragraph id="P-0067" lvl="0"><number>&lsqb;0067&rsqb;</number> A user decides to use a particular bit rate, for example, by examining how much storage is available for the video stream, or by considering the available bandwidth. In this manner, a user is able to more effectively use and manage available resources. If the bit rate of a video stream cannot be altered or changed, then there is a potential that the available storage will become full before the video stream is fully recorded. Conversely, the ability to control the bit rate can enable a user to store more data in the available storage space and ensure that the entire video stream is recorded. </paragraph>
<paragraph id="P-0068" lvl="0"><number>&lsqb;0068&rsqb;</number> The following example assumes that a user desires to store 40 Megabits of the video stream every 10 seconds. In <cross-reference target="DRAWINGS">FIG. 5</cross-reference>, the y axis corresponds to the number of bits that have been stored or consumed while the x axis corresponds to the amount of time that has passed. The area <highlight><bold>500</bold></highlight> therefore conveys, in this example, that 40 Mbits will be stored every 10 seconds. The dashed line <highlight><bold>512</bold></highlight> represents an ideal level of storage for a particular video stream while the line <highlight><bold>513</bold></highlight> represents how much of the 40 Mbits has actually been consumed at a given time. If the line <highlight><bold>513</bold></highlight> is above the dashed line <highlight><bold>512</bold></highlight> then the bit rate is too fast and the 40 Mbits of storage will be consumed before the 10 seconds expires unless the bit rate is altered. On the other hand, if the line <highlight><bold>513</bold></highlight> is below the dashed line <highlight><bold>512</bold></highlight>, then the bit rate may be allowed to increase. </paragraph>
<paragraph id="P-0069" lvl="0"><number>&lsqb;0069&rsqb;</number> At point <highlight><bold>515</bold></highlight> for example, the line <highlight><bold>513</bold></highlight> is above the dashed line <highlight><bold>512</bold></highlight> and to continue to record or store the video stream at this rate will consume more than the allotted memory in the specified time interval. The solution is to reduce the bit rate of the video stream. Thus, the video stream is transcoded by altering the quantization scale and/or the quantization matrix as described above such that the bit rate is reduced. The important factors are the current bit rate and the current quantization level of the video stream. This potentially reduces the quality of the video stream, but the memory required to store the video stream can be more precisely managed. </paragraph>
<paragraph id="P-0070" lvl="0"><number>&lsqb;0070&rsqb;</number> At point <highlight><bold>514</bold></highlight>, the line <highlight><bold>513</bold></highlight> is below the dashed line <highlight><bold>512</bold></highlight>. In this case, transcoding the video stream may not be necessary as the current bit rate will not cause the available storage to be fully used. If transcoding is not performed, it is likely that the line <highlight><bold>513</bold></highlight> will rise above the dashed line <highlight><bold>512</bold></highlight> at a later point, at which time the bit rate will be reduced by the transcoding systems and methods described herein. Alternatively, the coarseness of the transcoding can be reduced such that the line <highlight><bold>513</bold></highlight> approaches the dashed line <highlight><bold>512</bold></highlight>. </paragraph>
<paragraph id="P-0071" lvl="0"><number>&lsqb;0071&rsqb;</number> Area <highlight><bold>500</bold></highlight> is additionally divided into portions <highlight><bold>502</bold></highlight>, <highlight><bold>504</bold></highlight>, <highlight><bold>506</bold></highlight>, <highlight><bold>508</bold></highlight>, and <highlight><bold>510</bold></highlight>. The coarseness of the transcoding, or the degree to which the DCT frequency coefficients are re-quantized may be dependent on which portion of area <highlight><bold>500</bold></highlight> that the line <highlight><bold>513</bold></highlight> occupies. For example, if the bit rate causes the line <highlight><bold>513</bold></highlight> to enter the portion <highlight><bold>510</bold></highlight> of area <highlight><bold>500</bold></highlight>, then it may be necessary to more coarsely re-quantize the DCT frequency coefficients in order to ensure that, in this example, only 40 Mbits are consumed in 10 seconds. Alternatively, if the line <highlight><bold>513</bold></highlight> is in the portion <highlight><bold>502</bold></highlight> of area <highlight><bold>500</bold></highlight>, then the bit rate may be allowed to increase such that the available 40 Mbits are fully consumed. The preceding discussion does not dictate that an exact number of bits must be consumed in a particular time period although it is possible. Rather, controlling the bit rate of a video stream by re-quantizing the frequency coefficients enables the available storage to be managed more precisely and effectively. </paragraph>
<paragraph id="P-0072" lvl="0"><number>&lsqb;0072&rsqb;</number> Similarly, controlling the bit rate of a video stream can be used to effectively manage or use the available bandwidth. For example, if a particular video stream is consuming too much bandwidth, then the bit rate can be decreased by transcoding the video stream as described herein. Alternatively, the bit rate of a video stream can also be allowed to increase to take advantage of unused or available bandwidth in appropriate circumstances. </paragraph>
<paragraph id="P-0073" lvl="0"><number>&lsqb;0073&rsqb;</number> The present invention often does not need to do an act or step of performing an inverse quantization on the quantized coefficients. In some instances, an inverse quantization may be performed. However, the more computationally intensive act of performing an inverse DCT or other transform is generally not done when transcoding a transport or video stream. </paragraph>
<paragraph id="P-0074" lvl="0"><number>&lsqb;0074&rsqb;</number> The present invention has been primarily described with respect to a single video stream, but the systems and methods described herein can be applied, for example, to multiple video streams or to a transport stream. The systems and methods of the present invention can likewise be applied to other compression techniques and is not limited to MPEG. </paragraph>
<paragraph id="P-0075" lvl="0"><number>&lsqb;0075&rsqb;</number> The present invention may be embodied in other specific forms without departing from its spirit or essential characteristics. The described embodiments are to be considered in all respects only as illustrative and not restrictive. The scope of the invention is, therefore, indicated by the appended claims rather than by the foregoing description. All changes which come within the meaning and range of equivalency of the claims are to be embraced within their scope.</paragraph>
</section>
</detailed-description>
</subdoc-description>
<subdoc-claims>
<heading lvl="1">What is claimed and desired to be secured by United States Letters Patent is: </heading>
<claim id="CLM-00001">
<claim-text><highlight><bold>1</bold></highlight>. In a system including a compressed video stream that has a bit rate that is higher than a desired bit rate, a method for transcoding the video stream such that the bit rate of the video stream is reduced, the method comprising acts of: 
<claim-text>obtaining original sets of quantized transform coefficients from the video stream; </claim-text>
<claim-text>updating an original quantization level of the original sets of quantized transform coefficients to a new quantization level; </claim-text>
<claim-text>generating new sets of transform coefficients using the new quantization level such that the new sets of transform coefficients are more coarsely quantized; and </claim-text>
<claim-text>encoding the new transform coefficients. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00002">
<claim-text><highlight><bold>2</bold></highlight>. A method as defined in <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein the transform coefficients are discrete cosine transform coefficients. </claim-text>
</claim>
<claim id="CLM-00003">
<claim-text><highlight><bold>3</bold></highlight>. A method as defined in <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein the transform coefficients are wavelet transform coefficients. </claim-text>
</claim>
<claim id="CLM-00004">
<claim-text><highlight><bold>4</bold></highlight>. A method as defined in <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein the quantized transform coefficients of the video stream are encoded and wherein the act of obtaining original sets of quantized transform coefficients further comprises an act of decoding the quantized transform coefficients. </claim-text>
</claim>
<claim id="CLM-00005">
<claim-text><highlight><bold>5</bold></highlight>. A method as defined in <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, further comprising an act of performing an inverse quantization on the quantized transform coefficients to produce unquantized coefficients that approximate the original unquantized coefficients. </claim-text>
</claim>
<claim id="CLM-00006">
<claim-text><highlight><bold>6</bold></highlight>. A method as defined in <dependent-claim-reference depends_on="CLM-00005">claim 5</dependent-claim-reference>, further comprising an act of performing a more coarse quantization on the original unquantized coefficients. </claim-text>
</claim>
<claim id="CLM-00007">
<claim-text><highlight><bold>7</bold></highlight>. A method as defined in <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein the quantization level includes at least one of a quantization matrix and a quantization scale and wherein the act of updating an original quantization level of the original quantized transform coefficients further comprises one or more of: 
<claim-text>an act of selecting a new quantization matrix; and </claim-text>
<claim-text>an act of selecting a new quantization scale. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00008">
<claim-text><highlight><bold>8</bold></highlight>. A method as defined in <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein the act of updating an original quantization level of the original sets of quantized transform coefficients further comprises at least one of: 
<claim-text>an act of computing a matrix ratio between a new quantization matrix and a current quantization matrix of the video stream; and </claim-text>
<claim-text>an act of computing a scale ratio between a new quantization scale and a current quantization scale of the video stream. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00009">
<claim-text><highlight><bold>9</bold></highlight>. In a system that receives an input signal, the input signal including a video stream that is compressed, wherein a bit rate of the video stream is higher than a desired bit rate, a method for transcoding the video stream such that the bit rate of the video stream is reduced, the method comprising acts of: 
<claim-text>obtaining original sets of quantized discrete cosine transform coefficients from the video stream corresponding to macroblock data; </claim-text>
<claim-text>updating an original quantization level of the original sets of quantized discrete cosine transform coefficients to a new quantization level; </claim-text>
<claim-text>generating new sets of discrete cosine transform coefficients using the new quantization level such that the new sets of discrete cosine transform coefficients are more coarsely quantized than the original sets of quantized discrete cosine transform coefficients; and </claim-text>
<claim-text>encoding the new discrete cosine transform coefficients, wherein fewer bits are needed to encode the new sets of discrete cosine transform coefficients. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00010">
<claim-text><highlight><bold>10</bold></highlight>. A method as defined in <dependent-claim-reference depends_on="CLM-00009">claim 9</dependent-claim-reference>, wherein the act of obtaining original sets of quantized discrete cosine transform coefficients from the video stream further comprises: 
<claim-text>an act of performing an inverse run level coding on the video stream. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00011">
<claim-text><highlight><bold>11</bold></highlight>. A method as defined in <dependent-claim-reference depends_on="CLM-00009">claim 9</dependent-claim-reference>, wherein the act of obtaining original sets of quantized discrete cosine transform coefficients from the video stream further comprises: 
<claim-text>an act of performing an inverse variable length coding on the video stream. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00012">
<claim-text><highlight><bold>12</bold></highlight>. A method as defined in <dependent-claim-reference depends_on="CLM-00009">claim 9</dependent-claim-reference>, wherein the quantization level includes a quantization matrix and a quantization scale and wherein the act of updating an original quantization level of the original sets of quantized discrete cosine transform coefficients further comprises one or more of: 
<claim-text>an act of selecting a new quantization matrix; and </claim-text>
<claim-text>an act of selecting a new quantization scale. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00013">
<claim-text><highlight><bold>13</bold></highlight>. A method as defined in <dependent-claim-reference depends_on="CLM-00009">claim 9</dependent-claim-reference>, wherein the act of updating an original quantization level of the original sets of quantized discrete cosine transform coefficients further comprises at least one of: 
<claim-text>an act of computing a matrix ratio of a new quantization matrix to a current quantization matrix, the current quantization matrix included in the original quantization level; </claim-text>
<claim-text>an act of computing a scale ratio of a new quantization scale to a current quantization scale, the current quantization scale included in the original quantization level; and </claim-text>
<claim-text>an act of refraining from computing either the matrix ratio or the scale ratio. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00014">
<claim-text><highlight><bold>14</bold></highlight>. A method as defined in <dependent-claim-reference depends_on="CLM-00011">claim 13</dependent-claim-reference>, further comprising an act of pre-computing the matrix ratio and the scale ratio for each potential value of the new quantization scale and the new quantization matrix. </claim-text>
</claim>
<claim id="CLM-00015">
<claim-text><highlight><bold>15</bold></highlight>. A method as defined in <dependent-claim-reference depends_on="CLM-00011">claim 14</dependent-claim-reference>, wherein the act of pre-computing the matrix ratio occurs at one or more of: per frame, per macroblock, per slice, and per picture of the video stream. </claim-text>
</claim>
<claim id="CLM-00016">
<claim-text><highlight><bold>16</bold></highlight>. A method as defined in <dependent-claim-reference depends_on="CLM-00011">claim 14</dependent-claim-reference>, wherein the act of pre-computing the scale ratio occurs at one or more of: per frame, per macroblock, per slice, and per picture of the video stream. </claim-text>
</claim>
<claim id="CLM-00017">
<claim-text><highlight><bold>17</bold></highlight>. In a system including a set top box that receives a transport stream, wherein the transport stream includes one or more compressed video streams, a method for transcoding a video stream included in the transport stream to reduce a bit rate of the video stream, the method comprising steps for: 
<claim-text>performing an inverse coding on the video stream such that original quantized discrete cosine transform (DCT) blocks are known; </claim-text>
<claim-text>selecting at least one of a new quantization matrix and a new quantization scale for the original quantized DCT blocks; </claim-text>
<claim-text>re-quantizing the original quantized DCT blocks using at least one of the new quantization matrix and the new quantization scale; and </claim-text>
<claim-text>performing a coding on the re-quantized DCT blocks such that the bit rate of the video stream is reduced. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00018">
<claim-text><highlight><bold>18</bold></highlight>. A method as defined in <dependent-claim-reference depends_on="CLM-00011">claim 17</dependent-claim-reference>, wherein the step for performing an inverse coding further comprises steps for: 
<claim-text>performing an inverse variable length coding; and </claim-text>
<claim-text>performing an inverse run level coding. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00019">
<claim-text><highlight><bold>19</bold></highlight>. A method as defined in <dependent-claim-reference depends_on="CLM-00011">claim 17</dependent-claim-reference>, wherein the step for selecting at least one of a new quantization matrix and a new quantization scale occurs at one or more of: once per frame, once per picture, once per slice, and once per macroblock. </claim-text>
</claim>
<claim id="CLM-00020">
<claim-text><highlight><bold>20</bold></highlight>. A method as defined in <dependent-claim-reference depends_on="CLM-00011">claim 17</dependent-claim-reference>, wherein the step for re-quantizing the original quantized DCT blocks using at least one of the new quantization matrix and the new quantization scale occurs without performing an inverse quantization of the original quantized DCT blocks. </claim-text>
</claim>
<claim id="CLM-00021">
<claim-text><highlight><bold>21</bold></highlight>. A method as defined in <dependent-claim-reference depends_on="CLM-00011">claim 17</dependent-claim-reference>, wherein the step for selecting at least one of a new quantization matrix and a new quantization scale further comprises: 
<claim-text>an act of determining a matrix ratio between the new quantization matrix and an original quantization matrix; </claim-text>
<claim-text>an act of determining a scale ratio between the new quantization scale and an original quantization scale; and </claim-text>
<claim-text>an act of multiplying the matrix ratio with the scale ratio. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00022">
<claim-text><highlight><bold>22</bold></highlight>. A method as defined in <dependent-claim-reference depends_on="CLM-00022">claim 20</dependent-claim-reference>, further comprising a step of accounting for non linearity of the original quantized DCT blocks using a pre-quantization factor and a post quantization factor. </claim-text>
</claim>
<claim id="CLM-00023">
<claim-text><highlight><bold>23</bold></highlight>. A method as defined in <dependent-claim-reference depends_on="CLM-00011">claim 17</dependent-claim-reference>, wherein the step for re-quantizing the original quantized DCT blocks using at least one of the new quantization matrix and the new quantization scale further comprises steps for: 
<claim-text>adjusting the original quantized DCT blocks by applying a pre-quantization factor to the original quantized DCT blocks, wherein the pre-quantization factor is dependent on whether the original quantized DCT blocks are intra blocks or non-intra blocks; </claim-text>
<claim-text>combining the adjusted original quantized DCT blocks with a product of a matrix ratio and a scale ratio to produce new quantized DCT blocks; and </claim-text>
<claim-text>adjusting the new quantized DCT blocks to account for non-linearity by applying a post-quantization factor, wherein the post quantization factor is dependent on whether the new quantized DCT blocks are intra blocks or non-intra blocks, wherein the adjusted new quantized DCT blocks correspond to re-quantized DCT blocks. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00024">
<claim-text><highlight><bold>24</bold></highlight>. A method as defined in <dependent-claim-reference depends_on="CLM-00011">claim 17</dependent-claim-reference> wherein the step for performing a coding on the re-quantized DCT blocks further comprises steps for: 
<claim-text>performing a run level coding; and </claim-text>
<claim-text>performing a variable length coding. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00025">
<claim-text><highlight><bold>25</bold></highlight>. A method as defined in <dependent-claim-reference depends_on="CLM-00011">claim 17</dependent-claim-reference> further comprising an act of refraining from performing compensation on the video stream for errors introduced in reference frames of the video stream. </claim-text>
</claim>
<claim id="CLM-00026">
<claim-text><highlight><bold>26</bold></highlight>. In a system including a set top box that receives a transport stream, the transport stream including at least one video stream, wherein the video stream has a bit rate that is too large for available bandwidth or wherein a storage of the set top box cannot store the video stream based on the bit rate, a method for controlling the bit rate of the video stream in order to accommodate the available bandwidth or the storage of the set top box, the method comprising acts of: 
<claim-text>selecting a new bit rate for the video stream, wherein the new bit rate corresponds to consuming a particular number of bits in a particular time interval; </claim-text>
<claim-text>determining a current bit rate of the video stream; </claim-text>
<claim-text>altering a quantization level of the video stream such that the current bit rate is reduced if the current bit rate will cause more than the particular number of bits to be consumed in the particular time interval; and </claim-text>
<claim-text>refraining from altering the quantization level of the video stream if the current bit rate will cause less than the particular number of bits to be consumed in the particular time interval. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00027">
<claim-text><highlight><bold>27</bold></highlight>. A method as defined in <dependent-claim-reference depends_on="CLM-00022">claim 26</dependent-claim-reference>, wherein the act of selecting a bit rate for the video stream is dependent on the bandwidth available to the video stream. </claim-text>
</claim>
<claim id="CLM-00028">
<claim-text><highlight><bold>28</bold></highlight>. A method as defined in <dependent-claim-reference depends_on="CLM-00022">claim 26</dependent-claim-reference>, wherein the act of selecting a bit rate for the video stream is dependent on the storage of the set top box that records the video stream. </claim-text>
</claim>
<claim id="CLM-00029">
<claim-text><highlight><bold>29</bold></highlight>. A method as defined in <dependent-claim-reference depends_on="CLM-00022">claim 26</dependent-claim-reference>, wherein the act of altering a quantization level of the video stream such that the current bit rate is reduced if the current bit rate will cause more than the particular number of bits to be consumed in the particular time interval further comprises an act of altering at least one of a quantization matrix and a quantization scale of the video stream. </claim-text>
</claim>
<claim id="CLM-00030">
<claim-text><highlight><bold>30</bold></highlight>. A method as defined in <dependent-claim-reference depends_on="CLM-00022">claim 26</dependent-claim-reference>, wherein the act of altering a quantization level of the video stream such that the current bit rate is reduced if the current bit rate will cause more than the particular number of bits to be consumed in the particular time interval further comprises acts of: 
<claim-text>performing an inverse variable length coding (VLC) on the video stream such that original quantized discrete cosine transform (DCT) blocks are known; </claim-text>
<claim-text>re-quantizing the original quantized DCT blocks using at least one of the altered quantization matrix and the altered quantization scale; and </claim-text>
<claim-text>performing a variable length coding on the re-quantized DCT blocks such that the bit rate of the video stream is reduced. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00031">
<claim-text><highlight><bold>31</bold></highlight>. A method as defined in <dependent-claim-reference depends_on="CLM-00033">claim 30</dependent-claim-reference>, wherein the act of re-quantizing the original quantized DCT blocks occurs without performing an inverse quantization on the original quantized DCT blocks. </claim-text>
</claim>
<claim id="CLM-00032">
<claim-text><highlight><bold>32</bold></highlight>. A method as defined in <dependent-claim-reference depends_on="CLM-00022">claim 26</dependent-claim-reference>, wherein the act of altering a quantization level of the video stream further comprises an act of performing an inverse quantization on the original quantized DCT blocks. </claim-text>
</claim>
<claim id="CLM-00033">
<claim-text><highlight><bold>33</bold></highlight>. A method as defined in <dependent-claim-reference depends_on="CLM-00022">claim 25</dependent-claim-reference>, wherein the act of altering a quantization level of the video stream such that the current bit rate is reduced if the current bit rate will cause more than the particular number of bits to be consumed in the particular time interval further comprises an act of transcoding the video stream such that the video stream has a lower bit rate. </claim-text>
</claim>
<claim id="CLM-00034">
<claim-text><highlight><bold>34</bold></highlight>. A method as defined in <dependent-claim-reference depends_on="CLM-00022">claim 26</dependent-claim-reference>, wherein the act of refraining from altering the quantization level of the video stream if the current bit rate will cause less than the particular number of bits to be consumed in the particular time interval further comprises an act of refraining from transcoding the video stream. </claim-text>
</claim>
<claim id="CLM-00035">
<claim-text><highlight><bold>35</bold></highlight>. In a system that receives a transport stream that includes one or more video streams whose bit rate is higher than a desired bit rate, a transcoder for transcoding a video streams such that a bit rate of the video stream is reduced, the transcoder comprising: 
<claim-text>a first multiplier for producing a ratio product between a matrix ratio and a scale ratio, wherein the matrix ratio is a new quantization matrix to an old quantization matrix and wherein the scale ratio is a new quantization scale to an old quantization scale; </claim-text>
<claim-text>a first rounder for rounding the ratio product; </claim-text>
<claim-text>a first adder for combining original discrete cosine transform (DCT) coefficients with a pre-compensation factor, wherein the pre-compensation factor is selected using a first multiplexer; </claim-text>
<claim-text>a second multiplier that multiplies an output of the first adder with the rounded ratio product to produce preliminary DCT coefficients; and </claim-text>
<claim-text>a second adder for combining a post compensation factor with the preliminary DCT coefficients to generate re-quantized DCT coefficients, wherein the re-quantized DCT coefficients are encoded with fewer bits such that the bit rate of the video stream is reduced. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00036">
<claim-text><highlight><bold>36</bold></highlight>. A transcoder as defined in <dependent-claim-reference depends_on="CLM-00033">claim 35</dependent-claim-reference>, wherein the pre-compensation factor selected by the first multiplexer is dependent on whether the block of the video stream being transcoded is an intra block or a non-intra block. </claim-text>
</claim>
<claim id="CLM-00037">
<claim-text><highlight><bold>37</bold></highlight>. A transcoder as defined in <dependent-claim-reference depends_on="CLM-00033">claim 36</dependent-claim-reference>, wherein the pre-compensation factor selected by the first multiplexer is dependent on a magnitude of the original DCT coefficients. </claim-text>
</claim>
<claim id="CLM-00038">
<claim-text><highlight><bold>38</bold></highlight>. A transcoder as defined in <dependent-claim-reference depends_on="CLM-00033">claim 35</dependent-claim-reference>, wherein the post-compensation factor selected by the second multiplexer is dependent on whether the block of the video stream being transcoded is an intra block or a non-intra block. </claim-text>
</claim>
<claim id="CLM-00039">
<claim-text><highlight><bold>39</bold></highlight>. A transcoder as defined in <dependent-claim-reference depends_on="CLM-00033">claim 38</dependent-claim-reference>, wherein the post-compensation factor selected by the second multiplexer is dependent on a magnitude of the preliminary DCT coefficients. </claim-text>
</claim>
<claim id="CLM-00040">
<claim-text><highlight><bold>40</bold></highlight>. A transcoder as defined in <dependent-claim-reference depends_on="CLM-00033">claim 38</dependent-claim-reference>, wherein the new quantization matrix and the new quantization scale are selected by a user. </claim-text>
</claim>
<claim id="CLM-00041">
<claim-text><highlight><bold>41</bold></highlight>. A transcoder as defined in <dependent-claim-reference depends_on="CLM-00033">claim 38</dependent-claim-reference>, wherein the new quantization matrix and the new quantization scale are selected to accommodate at least one of bandwidth available to the video stream and storage of the set top box. </claim-text>
</claim>
<claim id="CLM-00042">
<claim-text><highlight><bold>42</bold></highlight>. A transcoder as defined in <dependent-claim-reference depends_on="CLM-00033">claim 38</dependent-claim-reference>, wherein the reduced bit rate of the video stream optimally utilizes at least one of available bandwidth and storage of the set top box. </claim-text>
</claim>
<claim id="CLM-00043">
<claim-text><highlight><bold>43</bold></highlight>. In a system including a set top box that receives a transport stream that includes at least one video stream, wherein the video stream has a bit rate that higher than a desired bit rate, a computer program product for implementing a method for transcoding the video stream such that the bit rate is reduced, the computer program product comprising: 
<claim-text>a computer readable medium for carrying machine-executable instructions for implementing the method; and wherein the method comprises acts of: 
<claim-text>performing an inverse variable length coding (VLC) on the video stream such that original quantized discrete cosine transform (DCT) coefficients are known; </claim-text>
<claim-text>selecting at least one of a new quantization matrix and a new quantization scale for the original quantized DCT coefficients; </claim-text>
<claim-text>re-quantizing the original quantized DCT coefficients using at least one of the new quantization matrix and the new quantization scale; and </claim-text>
<claim-text>performing a variable length coding on the re-quantized DCT coefficients such that the bit rate of the video stream is reduced. </claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00044">
<claim-text><highlight><bold>44</bold></highlight>. A computer program product as defined in <dependent-claim-reference depends_on="CLM-00044">claim 43</dependent-claim-reference>, wherein the act of selecting at least one of a new quantization matrix and a new quantization scale further comprises: 
<claim-text>an act of determining a matrix ratio of the new quantization matrix to an original quantization matrix; </claim-text>
<claim-text>an act of determining a scale ratio of the new quantization scale to an original quantization scale; and </claim-text>
<claim-text>an act of multiplying the matrix ratio with the scale ratio. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00045">
<claim-text><highlight><bold>45</bold></highlight>. A computer program product as defined in <dependent-claim-reference depends_on="CLM-00044">claim 43</dependent-claim-reference>, the method further comprising an act of accounting for non linearity of the original quantized DCT coefficients. </claim-text>
</claim>
<claim id="CLM-00046">
<claim-text><highlight><bold>46</bold></highlight>. A computer program product as defined in <dependent-claim-reference depends_on="CLM-00044">claim 43</dependent-claim-reference>, wherein the act of re-quantizing the original quantized DCT coefficients using at least one of the new quantization matrix and the new quantization scale further comprises acts of: 
<claim-text>rounding the original quantized DCT coefficients, wherein the rounding is dependent on whether the original quantized DCT coefficients are intra blocks or non-intra blocks; </claim-text>
<claim-text>combining the rounded original quantized DCT coefficients with a product of a matrix ratio and a scale ratio to produce new quantized DCT coefficients; and </claim-text>
<claim-text>rounding the new quantized DCT coefficients to account for non-linearity, wherein the rounding is dependent on whether the new quantized DCT coefficients are intra blocks or non-intra blocks, wherein the rounded new quantized DCT coefficients correspond to re-quantized DCT coefficients. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00047">
<claim-text><highlight><bold>47</bold></highlight>. A computer program product as defined in <dependent-claim-reference depends_on="CLM-00044">claim 43</dependent-claim-reference>, wherein the act of performing a variable length coding on the re-quantized DCT coefficients further comprises an act of performing a run level coding on the re-quantized DCT coefficients. </claim-text>
</claim>
<claim id="CLM-00048">
<claim-text><highlight><bold>48</bold></highlight>. A computer program product as defined in <dependent-claim-reference depends_on="CLM-00044">claim 43</dependent-claim-reference>, the method further comprising an act of refraining from performing motion compensation on the video stream.</claim-text>
</claim>
</subdoc-claims>
<subdoc-drawings id="DRAWINGS">
<heading lvl="0" align="CENTER">Drawings</heading>
<representative-figure>1</representative-figure>
<figure id="figure-D00000">
<image id="EMI-D00000" file="US20030002581A1-20030102-D00000.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00001">
<image id="EMI-D00001" file="US20030002581A1-20030102-D00001.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00002">
<image id="EMI-D00002" file="US20030002581A1-20030102-D00002.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00003">
<image id="EMI-D00003" file="US20030002581A1-20030102-D00003.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00004">
<image id="EMI-D00004" file="US20030002581A1-20030102-D00004.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00005">
<image id="EMI-D00005" file="US20030002581A1-20030102-D00005.TIF" imf="TIFF" ti="DR"/>
</figure>
</subdoc-drawings>
</patent-application-publication>
