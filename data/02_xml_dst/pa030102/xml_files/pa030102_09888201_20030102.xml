<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE patent-application-publication SYSTEM "pap-v16-2002-01-01.dtd" [
<!ENTITY US20030001075A1-20030102-M00001.NB SYSTEM "US20030001075A1-20030102-M00001.NB" NDATA NB>
<!ENTITY US20030001075A1-20030102-M00001.TIF SYSTEM "US20030001075A1-20030102-M00001.TIF" NDATA TIF>
<!ENTITY US20030001075A1-20030102-D00000.TIF SYSTEM "US20030001075A1-20030102-D00000.TIF" NDATA TIF>
<!ENTITY US20030001075A1-20030102-D00001.TIF SYSTEM "US20030001075A1-20030102-D00001.TIF" NDATA TIF>
<!ENTITY US20030001075A1-20030102-D00002.TIF SYSTEM "US20030001075A1-20030102-D00002.TIF" NDATA TIF>
<!ENTITY US20030001075A1-20030102-D00003.TIF SYSTEM "US20030001075A1-20030102-D00003.TIF" NDATA TIF>
<!ENTITY US20030001075A1-20030102-D00004.TIF SYSTEM "US20030001075A1-20030102-D00004.TIF" NDATA TIF>
]>
<patent-application-publication>
<subdoc-bibliographic-information>
<document-id>
<doc-number>20030001075</doc-number>
<kind-code>A1</kind-code>
<document-date>20030102</document-date>
</document-id>
<publication-filing-type>new</publication-filing-type>
<domestic-filing-data>
<application-number>
<doc-number>09888201</doc-number>
</application-number>
<application-number-series-code>09</application-number-series-code>
<filing-date>20010622</filing-date>
</domestic-filing-data>
<technical-information>
<classification-ipc>
<classification-ipc-primary>
<ipc>H01L027/00</ipc>
</classification-ipc-primary>
<classification-ipc-edition>07</classification-ipc-edition>
</classification-ipc>
<classification-us>
<classification-us-primary>
<uspc>
<class>250</class>
<subclass>208100</subclass>
</uspc>
</classification-us-primary>
</classification-us>
<title-of-invention>Analog pre-processor</title-of-invention>
</technical-information>
<inventors>
<first-named-inventor>
<name>
<given-name>Subhashish</given-name>
<family-name>Mukherjee</family-name>
</name>
<residence>
<residence-non-us>
<city>Bangalore</city>
<country-code>IN</country-code>
</residence-non-us>
</residence>
<authority-applicant>INV</authority-applicant>
</first-named-inventor>
<inventor>
<name>
<given-name>Visvesvaraya</given-name>
<family-name>Pentakota</family-name>
</name>
<residence>
<residence-non-us>
<city>Bangalore</city>
<country-code>IN</country-code>
</residence-non-us>
</residence>
<authority-applicant>INV</authority-applicant>
</inventor>
</inventors>
<correspondence-address>
<name-1>TEXAS INSTRUMENTS INCORPORATED</name-1>
<name-2></name-2>
<address>
<address-1>P O BOX 655474, M/S 3999</address-1>
<city>DALLAS</city>
<state>TX</state>
<postalcode>75265</postalcode>
</address>
</correspondence-address>
</subdoc-bibliographic-information>
<subdoc-abstract>
<paragraph id="A-0001" lvl="0">An analog circuit <highlight><bold>20 </bold></highlight>includes an amplifier <highlight><bold>30 </bold></highlight>with a positive input node, a negative input node, a positive output node and a negative output node. A first capacitor <highlight><bold>32 </bold></highlight>is coupled between the negative input node and an analog signal node. A second capacitor <highlight><bold>34 </bold></highlight>is coupled between the positive input node and a reference voltage node. In addition, a third capacitor <highlight><bold>36 </bold></highlight>is coupled between the positive input node and the negative output node and a fourth capacitor <highlight><bold>38 </bold></highlight>is coupled between the negative input node and the positive output node. A first switch <highlight><bold>40 </bold></highlight>is coupled between the third capacitor <highlight><bold>36 </bold></highlight>and the negative output node and a second switch <highlight><bold>42 </bold></highlight>is coupled between the fourth capacitor <highlight><bold>38 </bold></highlight>and the positive output node. </paragraph>
</subdoc-abstract>
<subdoc-description>
<summary-of-invention>
<section>
<heading lvl="1">FIELD OF THE INVENTION </heading>
<paragraph id="P-0001" lvl="0"><number>&lsqb;0001&rsqb;</number> This invention relates generally to electronic circuits and specifically to an analog pre-processor that can be used with a digital imaging device. </paragraph>
</section>
<section>
<heading lvl="1">BACKGROUND OF THE INVENTION </heading>
<paragraph id="P-0002" lvl="0"><number>&lsqb;0002&rsqb;</number> Digital cameras are fast replacing film based cameras as a medium to capture and store images. In a digital camera, a light sensor converts the incident light into voltage. The analog front end (AFE) first processes the signal to improve dynamic range and subsequently digitizes this voltage. The digital output is then processed further and stored so it can be viewed in various forms. </paragraph>
<paragraph id="P-0003" lvl="0"><number>&lsqb;0003&rsqb;</number> The main thrust in digital camera research is to improve picture quality and reduce power. The analog front end is one of the key blocks which determines the overall accuracy and power of the camera system. The AFE can be conceptually divided into two parts, the analog signal processing section (referred to here as the analog pre-processor or APP) followed by a digitizer (e.g., an analog-to-digital converter or ADC). </paragraph>
<paragraph id="P-0004" lvl="0"><number>&lsqb;0004&rsqb;</number> For hand-held digital cameras and camcorders, a significant performance criteria is power, for a given accuracy. Camera vendors are looking for very low power twelve-bit analog front ends. For example, one goal is to produce sub-80 mW AFEs. This goal represents a power reduction of about one third compared to commercially available devices. </paragraph>
</section>
<section>
<heading lvl="1">SUMMARY OF THE INVENTION </heading>
<paragraph id="P-0005" lvl="0"><number>&lsqb;0005&rsqb;</number> In one aspect, the present invention provides an analog pre-processor that achieves both low power and high accuracy. For example, the preferred embodiment provides a single operational amplifier (op amp) based architecture that minimizes analog power as well as provides optimum noise and linearity. This device is followed by a very low power twelve-bit analog to digital converter to complete the front end. </paragraph>
<paragraph id="P-0006" lvl="0"><number>&lsqb;0006&rsqb;</number> The present invention is useful in a number of applications including in a digital imaging device such as a digital camera or camcorder. This application might include a light sensor such as a charge coupled device (CCD) or a CMOS integrated sensor (CIS). Electrical signals corresponding to received light is provided to an analog pre-processor. In the preferred embodiment, the analog pre-processor includes a single amplifier. After the pre-processing, the signal can be converted to a digital signal and further processed prior to being displayed and/or stored. </paragraph>
<paragraph id="P-0007" lvl="0"><number>&lsqb;0007&rsqb;</number> In a more specific embodiment, the analog pre-processor is an analog circuit that includes an amplifier with a positive input node, a negative input node, a positive output node and a negative output node. A first variable capacitor is coupled between the positive input node and an analog signal node. A second variable capacitor is coupled between the negative input node and a reference voltage node. In addition, a third variable capacitor is coupled between the positive input node and the negative output node and a fourth variable capacitor is coupled between the negative input node and the positive output node. A first switch is coupled between the third variable capacitor and the negative output node and a second switch is coupled between the fourth variable capacitor and the positive output node. </paragraph>
<paragraph id="P-0008" lvl="0"><number>&lsqb;0008&rsqb;</number> The preferred embodiment includes a number of advantages over alternative solutions. For example, the pre-processor utilizes very little power. This low power is accomplished while maintaining good PGA (programmable gain amplifier) linearity. In addition, the noise is comparable or better than other twelve-bit parts.</paragraph>
</section>
</summary-of-invention>
<brief-description-of-drawings>
<section>
<heading lvl="1">BRIEF DESCRIPTION OF THE DRAWINGS </heading>
<paragraph id="P-0009" lvl="0"><number>&lsqb;0009&rsqb;</number> The above features of the present invention will be more clearly understood from consideration of the following descriptions in connection with accompanying drawings in which: </paragraph>
<paragraph id="P-0010" lvl="0"><number>&lsqb;0010&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1</cross-reference> is a block diagram of an exemplary digital imaging device; </paragraph>
<paragraph id="P-0011" lvl="0"><number>&lsqb;0011&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 2</cross-reference> is a block diagram illustrating the gain distribution of a preferred analog front end; </paragraph>
<paragraph id="P-0012" lvl="0"><number>&lsqb;0012&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3</cross-reference> shows the timing of an exemplary CCD input; </paragraph>
<paragraph id="P-0013" lvl="0"><number>&lsqb;0013&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 4</cross-reference> shows a first embodiment analog pre-processor; </paragraph>
<paragraph id="P-0014" lvl="0"><number>&lsqb;0014&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 5</cross-reference> shows a second embodiment pre-processor; </paragraph>
<paragraph id="P-0015" lvl="0"><number>&lsqb;0015&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 6</cross-reference> shows a two-stage amplifier; </paragraph>
<paragraph id="P-0016" lvl="0"><number>&lsqb;0016&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 7</cross-reference> shows the amplifier characteristics of the two stages; </paragraph>
<paragraph id="P-0017" lvl="0"><number>&lsqb;0017&rsqb;</number> <cross-reference target="DRAWINGS">FIGS. 8</cross-reference><highlight><italic>a</italic></highlight>-<highlight><bold>8</bold></highlight><highlight><italic>c </italic></highlight>show a more detailed implementation of a preferred embodiment two-stage amplifier; and </paragraph>
<paragraph id="P-0018" lvl="0"><number>&lsqb;0018&rsqb;</number> <cross-reference target="DRAWINGS">FIGS. 9 and 10</cross-reference> illustrate the gain performance of the analog pre-processor. </paragraph>
</section>
</brief-description-of-drawings>
<detailed-description>
<section>
<heading lvl="1">DETAILED DESCRIPTION OF ILLUSTRATIVE EMBODIMENTS </heading>
<paragraph id="P-0019" lvl="0"><number>&lsqb;0019&rsqb;</number> The making and use of the various embodiments are discussed below in detail. However, it should be appreciated that the present invention provides many applicable inventive concepts which can be embodied in a wide variety of specific contexts. The specific embodiments discussed are merely illustrative of specific ways to make and use the invention, and do not limit the scope of the invention. </paragraph>
<paragraph id="P-0020" lvl="0"><number>&lsqb;0020&rsqb;</number> The present invention will be described in the context of a digital imaging device, such as a digital camera. Accordingly, a system will first be described followed by a very specific implementation of the system. It should be understood that the present invention is not limited to the specific implementation described here. </paragraph>
<paragraph id="P-0021" lvl="0"><number>&lsqb;0021&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1</cross-reference> illustrates a block diagram of a digital imaging device <highlight><bold>10</bold></highlight> such as a digital camera (moving or still). A light sensor <highlight><bold>12</bold></highlight> receives incoming light. In the preferred embodiment, the light sensor includes a matrix array (e.g., provided in rows and columns) of light sensing units. The light sensor can convert two-dimensional incident light into voltage signals. In the preferred embodiment, these voltage signals are output in a serial fashion so that each pixel received by the sensor is output. The preferred embodiment utilizes a charge coupled device (CCD). One such commercially available CCD is the ICX2882AQ manufactured by Sony. Other embodiments may use other light sensors, such as a CMOS integrated sensor, as an example. </paragraph>
<paragraph id="P-0022" lvl="0"><number>&lsqb;0022&rsqb;</number> The analog output of the light sensor is provided to an analog front end (AFE) <highlight><bold>14</bold></highlight>. The analog front end, which will be discussed in greater detail below, processes the analog signal and provides a digital output. The digital output can be provided to a digital processing circuit <highlight><bold>16</bold></highlight> such as a digital signal processor (DSP) or an application specific integrated circuit (ASIC), which can optionally perform further signal processing. As an example, a preferred embodiment implementation can include a DSP manufactured by Texas Instruments Incorporated. Representations of the light image can then be provided to a storage device (e.g., video tape, EEPROM, magnetic disk, optical disk), a display (e.g., liquid crystal display or LCD, cathode ray tube or CRT), or other destination such as a communication port for transmission. As examples, the output of the camera can be sent to a computer, a storage media, a printer, a display, a network, or a recorder. </paragraph>
<paragraph id="P-0023" lvl="0"><number>&lsqb;0023&rsqb;</number> The AFE <highlight><bold>14</bold></highlight> can be conceptually divided into two parts, the analog signal processing section (referred to here as the analog pre-processor or APP) followed by a digitizer (e.g., an analog-to-digital converter or ADC). In the preferred embodiment, the APP should be able to perform the following functions, among other things: </paragraph>
<paragraph id="P-0024" lvl="2"><number>&lsqb;0024&rsqb;</number> Correlated Double Sampling (CDS) </paragraph>
<paragraph id="P-0025" lvl="2"><number>&lsqb;0025&rsqb;</number> Programmable Gain Amplification (PGA) </paragraph>
<paragraph id="P-0026" lvl="2"><number>&lsqb;0026&rsqb;</number> Single ended to differential conversion </paragraph>
<paragraph id="P-0027" lvl="2"><number>&lsqb;0027&rsqb;</number> Level Shifting </paragraph>
<paragraph id="P-0028" lvl="2"><number>&lsqb;0028&rsqb;</number> Offset cancellation </paragraph>
<paragraph id="P-0029" lvl="7"><number>&lsqb;0029&rsqb;</number> It is understood, however, that an apparatus or method that provides fewer than all of these features (or even none of the features) can still include the inventive concepts as disclosed herein. </paragraph>
<paragraph id="P-0030" lvl="0"><number>&lsqb;0030&rsqb;</number> In many applications, the main performance criteria for the AFE are low noise and low power, which, in the case of a digital camera, lead to improved picture quality and longer battery life. It has been perceived that there is a big market for a twelve-bit, 21 MSPS (mega samples per second), sub 80 mW AFE for digital still cameras. In this respect, the present invention has been utilized in a digital still camera front-end chip (TAFE1221) that can achieve a power of 65 mW. The noise performance is also comparable or better than other twelve bit parts. The following paragraphs discuss the design challenges and problems solved to achieve the above. </paragraph>
<paragraph id="P-0031" lvl="0"><number>&lsqb;0031&rsqb;</number> Low power can be achieved by designing a low power ADC and a low power APP section. In the preferred implementation, one goal of the APP is to provide 36 dB of gain at a step size of 0.05 dB along with correlated double sampling and single ended to differential conversion. These goals have been conventionally implemented using several cascaded stages built around operation amplifiers (OPAMPs), which leads to high power and noise. In the preferred implementation design, on the other hand, the entire APP functionality has been implemented using a single OPAMP stage. This approach uses minimum power and also minimizes channel noise. </paragraph>
<paragraph id="P-0032" lvl="0"><number>&lsqb;0032&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 2</cross-reference> illustrates a block diagram of an AFE <highlight><bold>12</bold></highlight> than can achieve this goal. In this design, the APP <highlight><bold>20</bold></highlight> has been designed to provide 0 to 24dB of gain at 1 dB step. After the signal has been digitized by ADC <highlight><bold>22</bold></highlight>, a digital multiplier <highlight><bold>24</bold></highlight> provides the finer step of 0.05 dB with a range of 1 dB. Another crude digital gain block <highlight><bold>26</bold></highlight> provides the remaining 12 dB gain at a step of 6 dB. It can be shown that this configuration provides adequate noise performance for a twelve-bit system. </paragraph>
<paragraph id="P-0033" lvl="0"><number>&lsqb;0033&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3</cross-reference> shows the signal input from the light sensor <highlight><bold>12</bold></highlight> to the analog front end <highlight><bold>14</bold></highlight>. In this example, the light sensor is a CCD. The first line, labeled CCD output, shows a typical CCD output waveform. The CCD output is reset to a fixed voltage (most positive in the waveform). Then the reset switch (shown and described in more detail with respect to <cross-reference target="DRAWINGS">FIG. 4</cross-reference>) is opened (at the falling edge of signal SR) and subsequently the signal becomes available (at the falling edge of signal SV). The signals SR and SV are usually generated by a timing chip which controls both the CCD and AFE. The CCD voltage levels are of the order of 10 volts or more. Due to this, capacitive coupling (e.g., clamping) between the CCD chip and the AFE chip is preferably utilized. </paragraph>
<paragraph id="P-0034" lvl="0"><number>&lsqb;0034&rsqb;</number> In order to achieve correlated double sampling, the CCD output is sampled twice. The first sample is taken when the reset switch is turned off (e.g., at the falling edge of signal SR) and the second sample is taken after the pixel charge is dumped on to the CCD summing capacitor (e.g., at the falling edge of signal SV). These two sample points are labeled with the numbers (1) and (2) in <cross-reference target="DRAWINGS">FIG. 3</cross-reference>. The difference between these two voltages provides the true signal. This method of taking two samples and taking their difference to remove the reset noise is referred to as correlated double sampling (CDS). CDS is useful since it eliminates the kT/C noise sampled on the CCD output capacitor as well as low frequency noise. </paragraph>
<paragraph id="P-0035" lvl="0"><number>&lsqb;0035&rsqb;</number> In order to utilize the full range of the analog-to-digital converter <highlight><bold>22</bold></highlight>, the CCD signal range is preferably matched to the input range of the ADC. This goal requires that the CCD signal be gained (or attenuated) by the required amount. The signal range of the CCD is typically on the order of 1.5 V while, for the design example described here, the ADC range is on the order of 2.6V. Thus, a minimum gain of 2.6/1.5&equals;1.73 (4.78 dB) is desired in this design. In addition to this gain, the system should have between about 0 and 24 dB gain. Thus the APP <highlight><bold>12</bold></highlight> is specified to provide a gain of 4.78 dB to 28.78 dB at 1 dB step. Also, since the overall accuracy goal is to be accurate to about 0.05 dB, the gain steps should also be accurate to within &plus;/&minus;0.05 dB. </paragraph>
<paragraph id="P-0036" lvl="0"><number>&lsqb;0036&rsqb;</number> As shown in <cross-reference target="DRAWINGS">FIG. 3</cross-reference>, the CCD output is single ended, going to most positive during reset and then coming down an amount that depends on the strength of the optical signal received. In the preferred embodiment, this input is converted to fully differential by the APP circuitry. This conversion applies a gain of 2&times; to optimize dynamic range. Prior to applying the gain, a DC level shifting of half the ADC input range is done. This shift is applied since the input is single ended and single sided without having a fixed common mode voltage. </paragraph>
<paragraph id="P-0037" lvl="0"><number>&lsqb;0037&rsqb;</number> The APP <highlight><bold>12</bold></highlight> has additional circuitry to take an analog voltage (usually provided by a DAC) and subtract it from the output. In this manner, the circuitry can cancel offset. During offset cancellation, the level shifting is suppressed to provide range for negative offsets. </paragraph>
<paragraph id="P-0038" lvl="0"><number>&lsqb;0038&rsqb;</number> The foregoing system specifications pose several challenges for the design. The issues come mainly from three requirements, namely, large gain range, high speed, and the nature of the CCD waveform. Each will now be discussed. </paragraph>
<paragraph id="P-0039" lvl="0"><number>&lsqb;0039&rsqb;</number> The goal of programmable gain amplification (PGA) requires a gain range of 4.78 dB to 28.78 dB at step of 1 dB with an accuracy of 0.05 dB around each gain point. The gain also should be linear in dB scale. These goals have been addressed by careful choice of capacitor ratios for each gain step, to achieve required accuracy with minimum loading. This goal also creates problem for amplifier design, as the amplifier close loop feedback factor changes over a wide range, creating stability problems. This problem has been addressed by changing the amplifier open loop gain and bandwidth with PGA gain using digital control. </paragraph>
<paragraph id="P-0040" lvl="0"><number>&lsqb;0040&rsqb;</number> The goal of having high speed has been addressed by choosing a cascaded 2 stage amplifier topology. This amplifier is described in greater detail below (see e.g., FIGS. <highlight><bold>6</bold></highlight>-<highlight><bold>8</bold></highlight> and related text). </paragraph>
<paragraph id="P-0041" lvl="0"><number>&lsqb;0041&rsqb;</number> As discussed above, the CCD waveform is preferably sampled using correlated double sampling. Since the preferred embodiment implements this technique using a single amplifier stage, the architecture requires the amplifier to operate over a large input common mode range. To reduce the effect, an inverter has been used as a common mode amplifier to counter the input common mode swing. A pre-amplifier section that is capable of handling wide swing is preferably used. Also, capacitive coupling is used within stages to interface the pre-amplifier with the following main amplifier. </paragraph>
<paragraph id="P-0042" lvl="0"><number>&lsqb;0042&rsqb;</number> A first embodiment of the analog pre-processor <highlight><bold>20</bold></highlight> will now be described with respect to <cross-reference target="DRAWINGS">FIG. 4</cross-reference>. An amplifier <highlight><bold>30</bold></highlight> preferably comprises an operational amplifier, for example a single operational amplifier including two amplifier stages. A first sampling capacitor <highlight><bold>32</bold></highlight> is coupled between a negative input node of the amplifier <highlight><bold>30</bold></highlight> and an analog signal node, labeled in <cross-reference target="DRAWINGS">FIG. 4</cross-reference> as CCD IN since it is coupled to the output of the CCD <highlight><bold>12</bold></highlight> in the preferred embodiment. A second sampling capacitor <highlight><bold>34</bold></highlight> is coupled between the positive input node of amplifier <highlight><bold>30</bold></highlight> and a reference voltage node (e.g., ground). In the preferred embodiment, the sampling capacitors <highlight><bold>32</bold></highlight> and <highlight><bold>34</bold></highlight> are variable capacitors. In an alternate embodiment, the analog input (e.g., CCD IN) could be coupled to the positive input node while the reference node is coupled to the negative input node. </paragraph>
<paragraph id="P-0043" lvl="0"><number>&lsqb;0043&rsqb;</number> Feedback capacitors <highlight><bold>36</bold></highlight> and <highlight><bold>38</bold></highlight> are coupled between the input and output nodes of amplifier <highlight><bold>30</bold></highlight>. For example, feedback capacitor <highlight><bold>36</bold></highlight> is coupled between the negative input node and positive output node and feedback capacitor <highlight><bold>38</bold></highlight> is coupled between the positive input node and the negative output node. Hold switches <highlight><bold>40</bold></highlight> and <highlight><bold>42</bold></highlight> are coupled in the respective paths of feedback capacitors <highlight><bold>36</bold></highlight> and <highlight><bold>38</bold></highlight>. While illustrated between the feedback capacitor <highlight><bold>36</bold></highlight> (<highlight><bold>38</bold></highlight>) and the positive (negative) output node, it is understood that the switch <highlight><bold>40</bold></highlight> (<highlight><bold>42</bold></highlight>) could alternatively be disposed between the feedback capacitor <highlight><bold>36</bold></highlight> (<highlight><bold>38</bold></highlight>) and the negative (positive) input node. Switches <highlight><bold>40</bold></highlight> and <highlight><bold>42</bold></highlight> are preferably n-channel MOS transistors. </paragraph>
<paragraph id="P-0044" lvl="0"><number>&lsqb;0044&rsqb;</number> The APP can be reset by use of switches <highlight><bold>44</bold></highlight>, <highlight><bold>46</bold></highlight>, <highlight><bold>48</bold></highlight> and <highlight><bold>50</bold></highlight>. These switches are also preferably n-channel MOS transistors. Accordingly, switches <highlight><bold>44</bold></highlight> and <highlight><bold>48</bold></highlight> are arranged to selectively couple the two plates of feedback capacitor <highlight><bold>36</bold></highlight> to an input common mode node V<highlight><subscript>INCM</subscript></highlight>. Similarly, switches <highlight><bold>46</bold></highlight> and <highlight><bold>50</bold></highlight> are arranged to selectively couple the two plates of feedback capacitor <highlight><bold>38</bold></highlight> to the input common mode node V<highlight><subscript>INCM</subscript></highlight>. </paragraph>
<paragraph id="P-0045" lvl="0"><number>&lsqb;0045&rsqb;</number> The manner in which the CDS functions can be implemented will now be described with respect to <cross-reference target="DRAWINGS">FIG. 4</cross-reference>. During reset, the signals S and SP cause their corresponding switches (<highlight><bold>48</bold></highlight> and <highlight><bold>50</bold></highlight> for signal S and <highlight><bold>44</bold></highlight> and <highlight><bold>46</bold></highlight> for signal SP) to be ON (i.e., conductive). During this period, the CCD output is sampled on the sampling capacitors <highlight><bold>32</bold></highlight> and <highlight><bold>34</bold></highlight>. These switches <highlight><bold>44</bold></highlight>, <highlight><bold>46</bold></highlight>, <highlight><bold>48</bold></highlight> and <highlight><bold>50</bold></highlight> are then turned OFF (i.e., rendered non-conductive) at the falling edge of signal SP (for switches <highlight><bold>44</bold></highlight> and <highlight><bold>46</bold></highlight>) and signal S (for switches <highlight><bold>48</bold></highlight> and <highlight><bold>50</bold></highlight>). The falling edge of signal SP occurs just before the falling edge of signal S. At this time, the sampling capacitors <highlight><bold>32</bold></highlight> and <highlight><bold>34</bold></highlight> continue to be connected to the CCD output (CCD IN) and the amplifier <highlight><bold>30</bold></highlight> enters the HOLD mode since switches <highlight><bold>40</bold></highlight> and <highlight><bold>42</bold></highlight> are turned ON. The amplifier output OUTP, OUTM now follows the change in the CCD output. The output voltage, at the end of the HOLD period, will be the difference of that CCD output voltage sampled at that falling edge of signal SR and again at the falling edge of signal SV (see <cross-reference target="DRAWINGS">FIG. 3</cross-reference>). </paragraph>
<paragraph id="P-0046" lvl="0"><number>&lsqb;0046&rsqb;</number> Since the CCD output is single ended, the sampling capacitor <highlight><bold>34</bold></highlight> is always grounded. The negative input of the amplifier <highlight><bold>30</bold></highlight> is brought out at the pin and connected through capacitor <highlight><bold>34</bold></highlight> to the CCD ground pin (not shown). This way, the amplifier input is made pseudo differential and most of the noise picked up gets cancelled out. The amplifier <highlight><bold>30</bold></highlight> output is set to a fixed common mode by a separate output common mode loop. Thus, the output is differential around a fixed common mode, though the input is single ended. To take care of the increased dynamic range, an inherent gain of 2&times; is provided by the stage. A more specific implementation of a preferred embodiment APP circuit is shown in <cross-reference target="DRAWINGS">FIG. 5</cross-reference>. </paragraph>
<paragraph id="P-0047" lvl="0"><number>&lsqb;0047&rsqb;</number> To obtain programmable gain, a number of capacitors are connected in parallel to serves as sampling capacitors (Csapp) <highlight><bold>32</bold></highlight> and <highlight><bold>34</bold></highlight> and feedback capacitors (Cfapp) <highlight><bold>36</bold></highlight> and <highlight><bold>38</bold></highlight>. Using a number of capacitors allowed the effective capacitor to be variable. To simplify the drawings, only one such capacitor is shown in each instance but it is understood that any number of capacitors and corresponding switches can be included. Resolution can be increased by including a larger number of capacitors for each variable capacitor <highlight><bold>32</bold></highlight>, <highlight><bold>34</bold></highlight>, <highlight><bold>36</bold></highlight> and/or <highlight><bold>38</bold></highlight>. </paragraph>
<paragraph id="P-0048" lvl="0"><number>&lsqb;0048&rsqb;</number> The gain is given by Csapp/Cfapp. To select these capacitors <highlight><bold>32</bold></highlight> and <highlight><bold>34</bold></highlight>, switches <highlight><bold>82</bold></highlight> and <highlight><bold>84</bold></highlight>, respectively, are provided at the plate nearest the amplifier <highlight><bold>30</bold></highlight> input node. While this location is not required, it is preferred since this node sees a constant voltage, and hence has a constant switch resistance irrespective of the input voltage. On the other hand, if the switches <highlight><bold>82</bold></highlight> and <highlight><bold>84</bold></highlight> are placed on the input side, the resistance would be signal dependent and would cause some degree of distortion. If the capacitor <highlight><bold>32</bold></highlight> or <highlight><bold>34</bold></highlight> is not selected, it is connected to a fixed voltage source V<highlight><subscript>INCM </subscript></highlight>by switch <highlight><bold>86</bold></highlight> or <highlight><bold>88</bold></highlight>. As noted above, the dotted lines extending from each capacitor <highlight><bold>32</bold></highlight>, <highlight><bold>34</bold></highlight> is intended to signify that any number of capacitors can be used. For each of the capacitors, the respective switch <highlight><bold>82</bold></highlight>-<highlight><bold>88</bold></highlight> will independently controllable. Thus the CCD sees a fixed load irrespective of the gain. The amplifier also sees a fixed load. </paragraph>
<paragraph id="P-0049" lvl="0"><number>&lsqb;0049&rsqb;</number> Unique ratios of capacitors are used to generate gain linear in dB scale. The capacitors <highlight><bold>32</bold></highlight>, <highlight><bold>34</bold></highlight>, <highlight><bold>36</bold></highlight> and <highlight><bold>38</bold></highlight> are preferably implemented as a square matrix of unit cells to improve matching accuracy. The capacitor values can be chosen through a software program. The algorithm has the following features </paragraph>
<paragraph id="P-0050" lvl="2"><number>&lsqb;0050&rsqb;</number> For each k between 0 and 24, generate Cs(k)/Cf(k) within given accuracy </paragraph>
<paragraph id="P-0051" lvl="2"><number>&lsqb;0051&rsqb;</number> Minimize max(Cs(k)) and max(Cf(k)) </paragraph>
<paragraph id="P-0052" lvl="2"><number>&lsqb;0052&rsqb;</number> Keep the change of capacitance between adjacent step (Cs(k&plus;1)&minus;Cs(k)) as low as possible to improve matching. </paragraph>
<paragraph id="P-0053" lvl="0"><number>&lsqb;0053&rsqb;</number> A disadvantage of the APP configuration described thus far is that the amplifier <highlight><bold>30</bold></highlight> input common mode changes with the signal swing. Due to this variation, the amplifier should have a large input common mode range. The situation is worse for large input signal swing (low gain). To reduce this effect, an inverter <highlight><bold>52</bold></highlight> can be used for low gain settings as an inverting common mode amplifier. The inverter <highlight><bold>52</bold></highlight> drives common mode capacitors (Cint) <highlight><bold>54</bold></highlight> and <highlight><bold>56</bold></highlight>. Thus, when the input swing is large, the resultant common mode movement is countered by the inverter <highlight><bold>52</bold></highlight> output. Since this output need not be linear, an inverter <highlight><bold>52</bold></highlight> suffices as an amplifier. Since the amplifier <highlight><bold>30</bold></highlight> is designed to work at higher gain setting, the reduced bandwidth is still sufficient for settling. </paragraph>
<paragraph id="P-0054" lvl="0"><number>&lsqb;0054&rsqb;</number> To obtain the offset cancellation, additional capacitors (Coff) <highlight><bold>58</bold></highlight> and <highlight><bold>60</bold></highlight> are provided. In digital camera systems, for example, the DSP (or additional digital circuitry in the AFE chip) measures the offset of the channel by observing the ADC output. This digital value is then converted into an analog voltage using a DAC (not shown) and subtracted in the analog domain. Here, the DAC output CDAC is fed to the Coff capacitors, thus subtracting the offset at the APP output. </paragraph>
<paragraph id="P-0055" lvl="0"><number>&lsqb;0055&rsqb;</number> During the SR phase, these capacitors <highlight><bold>58</bold></highlight> and <highlight><bold>60</bold></highlight> are shorted (zero input differential). During the hold phase, the Coff capacitors <highlight><bold>58</bold></highlight> and <highlight><bold>60</bold></highlight> sample the offset DAC (not shown). The reason for this is that the hold phase is much longer, hence the coarse DAC has much more time to settle. Since the voltage subtracted should be independent of gain, a number of capacitors are provided such that Ccoff/Csapp is constant. </paragraph>
<paragraph id="P-0056" lvl="0"><number>&lsqb;0056&rsqb;</number> The ADC <highlight><bold>22</bold></highlight> converts analog signals to digital signals. The analog voltage range is defined by the two voltage references Vrefp and Vrefm (this is generated on-chip). Thus for input Vin&equals;(Vrefp&minus;Vrefin), ADC output is maximum (all 1&apos;s, in digital terms) and for input Vin&equals;&minus;(Vrefp&minus;Vrefm), ADC output is minimum (all 0&apos;s). Note that the ADC is fully differential, hence Vin&equals;(INP&minus;INM), which goes both positive and negative. </paragraph>
<paragraph id="P-0057" lvl="0"><number>&lsqb;0057&rsqb;</number> In the embodiment of <cross-reference target="DRAWINGS">FIG. 5</cross-reference>, the feedback capacitors <highlight><bold>36</bold></highlight> and <highlight><bold>38</bold></highlight> (Cfapp) are not connected to a common voltage V<highlight><subscript>incm </subscript></highlight>during sampling. Instead they are connected to voltage node V<highlight><subscript>REFP</subscript></highlight>, V<highlight><subscript>REFM</subscript></highlight>. This provides the required level shift. During offset cancellation loop, the level shift is turned OFF by connecting the feedback capacitors to common mode. </paragraph>
<paragraph id="P-0058" lvl="0"><number>&lsqb;0058&rsqb;</number> The overall transfer function for the APP is given by  
<math-cwu id="MATH-US-00001">
<number>1</number>
<math>
  <mrow>
    <msub>
      <mi>V</mi>
      <mi>CDS</mi>
    </msub>
    <mo>=</mo>
    <mrow>
      <mrow>
        <mrow>
          <mo>(</mo>
          <mrow>
            <msub>
              <mi>V</mi>
              <mi>VIDEO</mi>
            </msub>
            <mo>-</mo>
            <msub>
              <mi>V</mi>
              <mi>RESEl</mi>
            </msub>
          </mrow>
          <mo>)</mo>
        </mrow>
        <mo>&CenterDot;</mo>
        <mfrac>
          <mi>Csapp</mi>
          <mi>Cfapp</mi>
        </mfrac>
      </mrow>
      <mo>-</mo>
      <mrow>
        <mfrac>
          <msub>
            <mi>C</mi>
            <mi>OFF</mi>
          </msub>
          <mi>Cfapp</mi>
        </mfrac>
        <mo>&CenterDot;</mo>
        <msub>
          <mi>V</mi>
          <mi>CDAC</mi>
        </msub>
      </mrow>
      <mo>-</mo>
      <mrow>
        <mi>&Delta;</mi>
        <mo>&it;</mo>
        <mstyle>
          <mtext>&emsp;</mtext>
        </mstyle>
        <mo>&it;</mo>
        <msub>
          <mi>V</mi>
          <mi>REF</mi>
        </msub>
      </mrow>
    </mrow>
  </mrow>
</math>
<math>
  <mrow>
    <mrow>
      <mi>where</mi>
      <mo>&it;</mo>
      <mstyle>
        <mtext>&emsp;</mtext>
      </mstyle>
      <mo>&it;</mo>
      <mi>&Delta;</mi>
      <mo>&it;</mo>
      <mstyle>
        <mtext>&emsp;</mtext>
      </mstyle>
      <mo>&it;</mo>
      <msub>
        <mi>V</mi>
        <mi>REF</mi>
      </msub>
    </mrow>
    <mo>=</mo>
    <mrow>
      <msub>
        <mi>V</mi>
        <mi>REFP</mi>
      </msub>
      <mo>-</mo>
      <mrow>
        <msub>
          <mi>V</mi>
          <mi>REFM</mi>
        </msub>
        <mo>.</mo>
      </mrow>
    </mrow>
  </mrow>
</math>
<mathematica-file id="MATHEMATICA-00001" file="US20030001075A1-20030102-M00001.NB"/>
<image id="EMI-M00001" wi="216.027" he="29.9943" file="US20030001075A1-20030102-M00001.TIF" imf="TIFF" ti="MF"/>
</math-cwu>
</paragraph>
<paragraph id="P-0059" lvl="0"><number>&lsqb;0059&rsqb;</number> The load seen by the amplifier is a parallel combination of (1) the feedback capacitance Cfapp in series with parallel combination of the sampling capacitance Csapp, the DAC capacitance Cdac, and parasitic capacitance Cpar; (2) ADC sampling capacitor in parallel with input capacitance of comparators; and (3) amplifier&apos;s output parasitic capacitance. This is a varying load with gain. For lower gains, feedback capacitance Cfapp is comparable to sampling capacitance Csapp, resulting in higher capacitive load. Effective capacitive load falls with gain as Cf gets smaller. </paragraph>
<paragraph id="P-0060" lvl="0"><number>&lsqb;0060&rsqb;</number> For the preferred embodiment design, assuming 12 bit settling, the closed loop bandwidth requirement is about 53 MHz. The maximum analog gain is 28.78 dB. This corresponds to a closed loop feedback factor of 35.2 (along with parasitics of the present design), which corresponds to 31 dB. </paragraph>
<paragraph id="P-0061" lvl="0"><number>&lsqb;0061&rsqb;</number> The DC gain for a twelve-bit corresponds to about 72 dB. Since the feedback factor is 31 dB, a DC gain of about 72&plus;31&equals;103 dB is sufficient. A DC gain lower then this would mean the amplifier needs to be designed such that the gain with output swing needs to be linear to 12-bit. </paragraph>
<paragraph id="P-0062" lvl="0"><number>&lsqb;0062&rsqb;</number> Several amplifier architectures can be used to implement the circuitry of the present invention. Some of these possibilities will now be discussed. </paragraph>
<paragraph id="P-0063" lvl="0"><number>&lsqb;0063&rsqb;</number> In one embodiment, a single stage amplifier with the compensation capacitor being the load capacitor is used. This embodiment is not preferred, however, because the required DC gain of 103 dB is difficult to achieve. Also the unity gain-bandwidth is very high, on the order of 1.86 GHz. This leads to some difficult to realize design constraints. </paragraph>
<paragraph id="P-0064" lvl="0"><number>&lsqb;0064&rsqb;</number> Another embodiment utilizes a two-stage Miller compensated amplifier. This option is certainly a lower power solution compared to a single stage design, but still has some disadvantages. For example, the bandwidth is provided by only one stage. In addition, most of the power is consumed to get the phase margin. This solution is also less preferred since an increase in load capacitance can affect the settling performance and it is difficult to handle varying load and gain requirements. </paragraph>
<paragraph id="P-0065" lvl="0"><number>&lsqb;0065&rsqb;</number> The preferred embodiment utilizes a cascaded architecture. This architecture was found to be most suitable to handle the tight constraints. The architecture is discussed in detail below and is shown conceptually in <cross-reference target="DRAWINGS">FIG. 6</cross-reference>. The cascaded amplifier comprises a two stage amplifier including an input stage (pre-amplifier stage) <highlight><bold>60</bold></highlight> and an output stage (main amplifier stage or gain stage) <highlight><bold>62</bold></highlight>. Capacitors <highlight><bold>64</bold></highlight> and <highlight><bold>66</bold></highlight>, typically parasitic capacitances, are illustrated to symbolize the loading at these nodes. </paragraph>
<paragraph id="P-0066" lvl="0"><number>&lsqb;0066&rsqb;</number> The characteristics of the individual amplifier stages <highlight><bold>60</bold></highlight> and <highlight><bold>62</bold></highlight> and the overall amplifier <highlight><bold>30</bold></highlight> are shown in <cross-reference target="DRAWINGS">FIG. 7</cross-reference>. To obtain stability, the first non-dominant pole should be at least at 2*fcl (106 MHz in this example). The first stage <highlight><bold>60</bold></highlight> is essentially a pre-amplifier and the second stage <highlight><bold>62</bold></highlight> is the main gain providing amplifier. The pre-amplifier stage <highlight><bold>60</bold></highlight> is designed such that its dominant pole is at 2*fcl. The non-dominant pole of the main amplifier is placed at a much higher frequency. Since the PGA range is wide, the pre-amplifier gain is varied to ensure stability. Pre-amplifier gain is flat up to 106 Mhz across all gains. The gain at 53 Mhz is the product of the gain provided by each amp at that frequency. According to specification followed in developing the preferred embodiment, this gain is required to be 31 dB. </paragraph>
<paragraph id="P-0067" lvl="0"><number>&lsqb;0067&rsqb;</number> The complete amplifier is shown in <cross-reference target="DRAWINGS">FIGS. 8</cross-reference><highlight><italic>a</italic></highlight>-<highlight><bold>8</bold></highlight><highlight><italic>c, </italic></highlight>where <cross-reference target="DRAWINGS">FIG. 8</cross-reference><highlight><italic>a </italic></highlight>shows the pre-amplifier or input stage <highlight><bold>60</bold></highlight>, <cross-reference target="DRAWINGS">FIG. 8</cross-reference><highlight><italic>b </italic></highlight>shows the main amplifier or output stage <highlight><bold>62</bold></highlight>, and <cross-reference target="DRAWINGS">FIG. 8</cross-reference><highlight><italic>c </italic></highlight>shows the AC coupling between the two stages <highlight><bold>60</bold></highlight> and <highlight><bold>62</bold></highlight>. </paragraph>
<paragraph id="P-0068" lvl="0"><number>&lsqb;0068&rsqb;</number> Referring first to <cross-reference target="DRAWINGS">FIG. 8</cross-reference><highlight><italic>a, </italic></highlight>the pre-amplifier stage includes an NMOS input <highlight><bold>70</bold></highlight>, <highlight><bold>72</bold></highlight>. The NMOS diode load pre-amplifier architecture <highlight><bold>74</bold></highlight> is chosen as it satisfies a number of design goals. The stage has high bandwidth (only NMOS in signal path). The stage provides easily controllable variable gain for different PGA gain settings to ensure stability of structure. With an NMOS input and NMOS load, the gain remains controlled across process comers. The unity gain bandwidth (UGB) also tracks well. The gain is controlled digitally by bringing in extra diodes as shown in <cross-reference target="DRAWINGS">FIG. 8</cross-reference><highlight><italic>a. </italic></highlight>The stage also provides high input common mode range, which can be important since signal common mode varies over a wide range. </paragraph>
<paragraph id="P-0069" lvl="0"><number>&lsqb;0069&rsqb;</number> Referring to <cross-reference target="DRAWINGS">FIG. 8</cross-reference><highlight><italic>b, </italic></highlight>the main amplifier stage <highlight><bold>62</bold></highlight> provides for most of the amplifier&apos;s gain and some bandwidth. In the preferred embodiment, a regulated telescopic amplifier is used as it uses an all N-channel signal path for best speed and gain performance. </paragraph>
<paragraph id="P-0070" lvl="0"><number>&lsqb;0070&rsqb;</number> As shown in <cross-reference target="DRAWINGS">FIG. 8</cross-reference><highlight><italic>c, </italic></highlight>AC coupling is utilized to couple the first stage <highlight><bold>60</bold></highlight> and the second stage <highlight><bold>62</bold></highlight>. To maximize the output swing, an optimal input common-mode voltage (VICM2) is utilized for the main amplifier. Unfortunately, this voltage is not equal to the output common mode voltage of the previous stage, i.e., the pre-amplifier stage. To de-couple these, the first stage output is capacitively coupled to the main amplifier stage input. </paragraph>
<paragraph id="P-0071" lvl="0"><number>&lsqb;0071&rsqb;</number> Results of a test version of the analog pre-processor of the preferred embodiment are shown in <cross-reference target="DRAWINGS">FIGS. 9 and 10</cross-reference>. The PGA gain linearity has been found to be within &plus;/&minus;0.4 dB, less than the goal of &plus;/&minus;0.5 dB. <cross-reference target="DRAWINGS">FIG. 9</cross-reference> shows the measured gain as a function of digital code. The deviation of measured PGA gain from ideal gain is shown in <cross-reference target="DRAWINGS">FIG. 10</cross-reference>. </paragraph>
<paragraph id="P-0072" lvl="0"><number>&lsqb;0072&rsqb;</number> While this invention has been described with reference to illustrative embodiments, this description is not intended to be construed in a limiting sense. Various modifications and combinations of the illustrative embodiments, as well as other embodiments of the invention, will be apparent to persons skilled in the art upon reference to the description. It is therefore intended that the appended claims encompass any such modifications or embodiments. </paragraph>
</section>
</detailed-description>
</subdoc-description>
<subdoc-claims>
<heading lvl="1">What is claimed is: </heading>
<claim id="CLM-00001">
<claim-text><highlight><bold>1</bold></highlight>. A digital imaging device comprising: 
<claim-text>a light sensor including an optical input and an analog electrical output; </claim-text>
<claim-text>an analog pre-processor including an analog input and an analog output, the analog input coupled to the analog electrical output of the imaging device, the analog pre-processor including one and only one amplifier; </claim-text>
<claim-text>an analog-to-digital converter including an analog input and a digital output, the analog input of the analog-to-digital converter coupled to the analog output of the analog pre-processor; and </claim-text>
<claim-text>a digital processing circuit including a digital input coupled to the digital output of the analog-to-digital converter. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00002">
<claim-text><highlight><bold>2</bold></highlight>. The device of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference> wherein the imaging device includes a matrix array of optical inputs. </claim-text>
</claim>
<claim id="CLM-00003">
<claim-text><highlight><bold>3</bold></highlight>. The device of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference> wherein the imaging device comprises a charge coupled device (CCD). </claim-text>
</claim>
<claim id="CLM-00004">
<claim-text><highlight><bold>4</bold></highlight>. The device of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference> wherein the imaging device comprises CMOS integrated sensor (CIS). </claim-text>
</claim>
<claim id="CLM-00005">
<claim-text><highlight><bold>5</bold></highlight>. The device of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference> wherein the amplifier comprises a two stage amplifier that includes an input stage and an output stage. </claim-text>
</claim>
<claim id="CLM-00006">
<claim-text><highlight><bold>6</bold></highlight>. The device of <dependent-claim-reference depends_on="CLM-00005">claim 5</dependent-claim-reference> wherein the amplifier utilizes AC coupling between the input stage and the output stage. </claim-text>
</claim>
<claim id="CLM-00007">
<claim-text><highlight><bold>7</bold></highlight>. The device of <dependent-claim-reference depends_on="CLM-00005">claim 5</dependent-claim-reference> wherein the input stage is optimized for large common mode variation and the output stage has a dynamic range that is optimized for large output swing. </claim-text>
</claim>
<claim id="CLM-00008">
<claim-text><highlight><bold>8</bold></highlight>. The device of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference> wherein the amplifier includes a positive input node, a negative input node, a positive output node and a negative output node, the analog pre-processor further comprising: 
<claim-text>a first variable capacitor coupled between the negative input node and the analog electrical output of the imaging device; </claim-text>
<claim-text>a second variable capacitor coupled between the positive input node and a reference voltage node; </claim-text>
<claim-text>a third variable capacitor coupled between the positive input node and the negative output node; </claim-text>
<claim-text>a fourth variable capacitor coupled between the negative input node and the positive output node; </claim-text>
<claim-text>a first switch coupled in series with the third variable capacitor and between the negative input node and the positive output node; and </claim-text>
<claim-text>a second switch coupled in series with the fourth variable capacitor and between the negative input node and the positive output node. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00009">
<claim-text><highlight><bold>9</bold></highlight>. The device of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference> wherein the digital processing circuit comprises a digital signal processor. </claim-text>
</claim>
<claim id="CLM-00010">
<claim-text><highlight><bold>10</bold></highlight>. The device of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference> wherein the digital processing circuit comprises an application specific integrated circuit (ASIC). </claim-text>
</claim>
<claim id="CLM-00011">
<claim-text><highlight><bold>11</bold></highlight>. The device of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference> and further comprising a storage device with an input coupled to an output of the digital processing circuit. </claim-text>
</claim>
<claim id="CLM-00012">
<claim-text><highlight><bold>12</bold></highlight>. The device of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference> and further comprising a display device with an input coupled to an output of the digital processing circuit. </claim-text>
</claim>
<claim id="CLM-00013">
<claim-text><highlight><bold>13</bold></highlight>. An analog circuit comprising: 
<claim-text>an amplifier including a first input node, a second input node, a first output node and a second output node; </claim-text>
<claim-text>a first variable capacitor coupled between the first input node and an analog signal node; </claim-text>
<claim-text>a second variable capacitor coupled between the second input node and a reference voltage node; </claim-text>
<claim-text>a third variable capacitor coupled between the first input node and the second output node; </claim-text>
<claim-text>a fourth variable capacitor coupled between the second input node and the first output node; </claim-text>
<claim-text>a first switch coupled in series with the third variable capacitor and between the first input node and the second output node; and </claim-text>
<claim-text>a second switch coupled in series with the fourth variable capacitor and between the second input node and the first output node. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00014">
<claim-text><highlight><bold>14</bold></highlight>. The circuit of <dependent-claim-reference depends_on="CLM-00011">claim 13</dependent-claim-reference> wherein the amplifier comprises a two stage amplifier including an input stage and an output stage. </claim-text>
</claim>
<claim id="CLM-00015">
<claim-text><highlight><bold>15</bold></highlight>. The circuit of <dependent-claim-reference depends_on="CLM-00011">claim 14</dependent-claim-reference> wherein the amplifier utilizes AC coupling between the input stage and the output stage. </claim-text>
</claim>
<claim id="CLM-00016">
<claim-text><highlight><bold>16</bold></highlight>. The circuit of <dependent-claim-reference depends_on="CLM-00011">claim 15</dependent-claim-reference> wherein the input stage is optimized for large common mode variation. </claim-text>
</claim>
<claim id="CLM-00017">
<claim-text><highlight><bold>17</bold></highlight>. The circuit of <dependent-claim-reference depends_on="CLM-00011">claim 15</dependent-claim-reference> wherein the output stage has a dynamic range that is optimized for large output swing. </claim-text>
</claim>
<claim id="CLM-00018">
<claim-text><highlight><bold>18</bold></highlight>. The circuit of <dependent-claim-reference depends_on="CLM-00011">claim 13</dependent-claim-reference> and further comprising: 
<claim-text>a third switch coupled between the first input node and a input common node; </claim-text>
<claim-text>a fourth switch coupled between the second input node and the input common node; </claim-text>
<claim-text>a fifth switch coupled between the first output node and the input common node; and </claim-text>
<claim-text>a sixth switch coupled between the second output node and the input common node. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00019">
<claim-text><highlight><bold>19</bold></highlight>. The circuit of <dependent-claim-reference depends_on="CLM-00011">claim 18</dependent-claim-reference> wherein the third, fourth, fifth and sixth switches are each responsive to a reset signal. </claim-text>
</claim>
<claim id="CLM-00020">
<claim-text><highlight><bold>20</bold></highlight>. The circuit of <dependent-claim-reference depends_on="CLM-00011">claim 13</dependent-claim-reference> wherein the analog signal node comprises a CCD input node. </claim-text>
</claim>
<claim id="CLM-00021">
<claim-text><highlight><bold>21</bold></highlight>. The circuit of <dependent-claim-reference depends_on="CLM-00011">claim 13</dependent-claim-reference> wherein each of the first, second, third and fourth variable capacitors comprises a plurality of fixed capacitors. </claim-text>
</claim>
<claim id="CLM-00022">
<claim-text><highlight><bold>22</bold></highlight>. The circuit of <dependent-claim-reference depends_on="CLM-00011">claim 13</dependent-claim-reference> wherein the first input node comprises a positive input node, the second input node comprises a negative input node, the first output node comprises a positive output node and the second output node comprises a negative output node. </claim-text>
</claim>
<claim id="CLM-00023">
<claim-text><highlight><bold>23</bold></highlight>. A signal processing method comprising: 
<claim-text>receiving an analog electrical signal; </claim-text>
<claim-text>sampling the analog electrical signal at a first time and at a second time; </claim-text>
<claim-text>determining the difference between the analog electrical signal sampled at the first time and the analog electrical signal sampled at the second time; </claim-text>
<claim-text>amplifying the difference with a first gain; </claim-text>
<claim-text>capacitively providing the amplified difference to a second amplifier stage; and </claim-text>
<claim-text>amplifying the amplified difference with a second gain to obtain a digitizable analog signal. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00024">
<claim-text><highlight><bold>24</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00022">claim 23</dependent-claim-reference> and further comprising: 
<claim-text>receiving an optical signal; and </claim-text>
<claim-text>converting the optical signal into the analog electrical signal. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00025">
<claim-text><highlight><bold>25</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00022">claim 23</dependent-claim-reference> and further comprising digitizing the digitizable analog signal. </claim-text>
</claim>
<claim id="CLM-00026">
<claim-text><highlight><bold>26</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00022">claim 23</dependent-claim-reference> wherein the steps of amplifying the difference and amplifying the amplified difference are performed by a single amplifier, the single amplifier including a first amplifier stage with the first gain and the second amplifier stage with the second gain.</claim-text>
</claim>
</subdoc-claims>
<subdoc-drawings id="DRAWINGS">
<heading lvl="0" align="CENTER">Drawings</heading>
<representative-figure>4</representative-figure>
<figure id="figure-D00000">
<image id="EMI-D00000" file="US20030001075A1-20030102-D00000.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00001">
<image id="EMI-D00001" file="US20030001075A1-20030102-D00001.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00002">
<image id="EMI-D00002" file="US20030001075A1-20030102-D00002.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00003">
<image id="EMI-D00003" file="US20030001075A1-20030102-D00003.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00004">
<image id="EMI-D00004" file="US20030001075A1-20030102-D00004.TIF" imf="TIFF" ti="DR"/>
</figure>
</subdoc-drawings>
</patent-application-publication>
