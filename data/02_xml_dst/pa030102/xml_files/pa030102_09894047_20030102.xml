<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE patent-application-publication SYSTEM "pap-v16-2002-01-01.dtd" [
<!ENTITY US20030002647A1-20030102-D00000.TIF SYSTEM "US20030002647A1-20030102-D00000.TIF" NDATA TIF>
<!ENTITY US20030002647A1-20030102-D00001.TIF SYSTEM "US20030002647A1-20030102-D00001.TIF" NDATA TIF>
<!ENTITY US20030002647A1-20030102-D00002.TIF SYSTEM "US20030002647A1-20030102-D00002.TIF" NDATA TIF>
<!ENTITY US20030002647A1-20030102-D00003.TIF SYSTEM "US20030002647A1-20030102-D00003.TIF" NDATA TIF>
<!ENTITY US20030002647A1-20030102-D00004.TIF SYSTEM "US20030002647A1-20030102-D00004.TIF" NDATA TIF>
<!ENTITY US20030002647A1-20030102-D00005.TIF SYSTEM "US20030002647A1-20030102-D00005.TIF" NDATA TIF>
]>
<patent-application-publication>
<subdoc-bibliographic-information>
<document-id>
<doc-number>20030002647</doc-number>
<kind-code>A1</kind-code>
<document-date>20030102</document-date>
</document-id>
<publication-filing-type>new</publication-filing-type>
<domestic-filing-data>
<application-number>
<doc-number>09894047</doc-number>
</application-number>
<application-number-series-code>09</application-number-series-code>
<filing-date>20010628</filing-date>
</domestic-filing-data>
<technical-information>
<classification-ipc>
<classification-ipc-primary>
<ipc>H04M007/00</ipc>
</classification-ipc-primary>
<classification-ipc-edition>07</classification-ipc-edition>
</classification-ipc>
<classification-us>
<classification-us-primary>
<uspc>
<class>379</class>
<subclass>225000</subclass>
</uspc>
</classification-us-primary>
</classification-us>
<title-of-invention>Computer telephony (CT) network serving multiple telephone switches</title-of-invention>
</technical-information>
<inventors>
<first-named-inventor>
<name>
<given-name>Laura</given-name>
<middle-name>S.</middle-name>
<family-name>Schultz</family-name>
</name>
<residence>
<residence-us>
<city>Gilbert</city>
<state>AZ</state>
<country-code>US</country-code>
</residence-us>
</residence>
<authority-applicant>INV</authority-applicant>
</first-named-inventor>
<inventor>
<name>
<given-name>Mark</given-name>
<middle-name>J.</middle-name>
<family-name>Dancho</family-name>
</name>
<residence>
<residence-us>
<city>Chandler</city>
<state>AZ</state>
<country-code>US</country-code>
</residence-us>
</residence>
<authority-applicant>INV</authority-applicant>
</inventor>
<inventor>
<name>
<given-name>David</given-name>
<family-name>Mello</family-name>
</name>
<residence>
<residence-us>
<city>Chandler</city>
<state>AZ</state>
<country-code>US</country-code>
</residence-us>
</residence>
<authority-applicant>INV</authority-applicant>
</inventor>
</inventors>
<assignee>
<organization-name>Inter-Tel, Inc.</organization-name>
<assignee-type>02</assignee-type>
</assignee>
<correspondence-address>
<name-1>LaValle D. Ptak</name-1>
<name-2></name-2>
<address>
<address-1>Ste. B</address-1>
<address-2>28435 N. 42nd St.</address-2>
<city>Cave Creek</city>
<state>AZ</state>
<postalcode>85331</postalcode>
<country>
<country-code>US</country-code>
</country>
</address>
</correspondence-address>
</subdoc-bibliographic-information>
<subdoc-abstract>
<paragraph id="A-0001" lvl="0">An enhanced computer telephony (CT) network design for a private branch exchange (PBX) telephone system network improves the computer telephony interface (CTI) capabilities of the network. Bi-directional data from remote telephone switching nodes of different PBX systems, each using a common software application, is combined into a single data stream by the network to simplify control of the remote PBX systems. Commands to, and events received from, the different PBX switching nodes are combined by use of a gateway to automatically and transparently route digital information for control of the correct remote system node. </paragraph>
</subdoc-abstract>
<subdoc-description>
<summary-of-invention>
<section>
<heading lvl="1">BACKGROUND </heading>
<paragraph id="P-0001" lvl="0"><number>&lsqb;0001&rsqb;</number> Customer owned private branch exchange (PBX) systems are in widespread use. PBX systems adequately serve a large number of stations or telephone extensions in a single location. Frequently, however, customers have multiple locations, each having a PBX system or hybrid key system associated with it. These systems typically are controlled by computer-telephone integration (CTI) processors into various types of networks. </paragraph>
<paragraph id="P-0002" lvl="0"><number>&lsqb;0002&rsqb;</number> An early communications switching concept was disclosed in U.S. Pat. No. 4,527,012 to allow telephone call processing to be carried out by a host computer connected to a telephone system. The host computer viewed the telephone system as a peripheral device. The host computer then controlled the switching system with a series of high level commands exchanged between the switching system and the host computer. The commands were referenced to physical system ports to control the operation of those ports directly, based on the current call processing state. The connection of the host computer to the telephone system was accomplished by using a serial port (such as the RS-232 port). The system of this patent, however, and systems similar to it, are not inherently capable of connections or control using a computer network like TCP/IP because of the electrical network interface limitations of serial ports. In addition, computer programs of the type disclosed in the &apos;012 patent must be aware of each equipped physical system port, and maintain a separate cross reference to correlate ports functionally to the assigned extension numbers, trunk numbers and so forth. </paragraph>
<paragraph id="P-0003" lvl="0"><number>&lsqb;0003&rsqb;</number> A different approach is disclosed in U.S. Pat. No. 4,653,085. In the system of this patent, computer telephony is implemented by attaching an adjunct processor to an associated telephone system port and sending control information for calls requiring additional call processing using a data exchange with the adjunct computer to simulate the actions of a connected station. The system of this patent requires all telephone calls, which are to be handled according to the stored program in the adjunct processor, to be transmitted by the telephone system to the port associated with that adjunct processor. The adjunct processor then sends direct commands back to the telephone system indicating the disposition of the call by directly sending a command to the port being served. Consequently, the adjunct computer simulates the behavior of a human operator. This system is limited by the volume of traffic which can be processed by a single operator (adjunct computer), and therefore it is not suitable for system-wide call handling tasks without terminating multiple ports to simulate the activities of multiple human operators. </paragraph>
<paragraph id="P-0004" lvl="0"><number>&lsqb;0004&rsqb;</number> U.S. Pat. No. 5,414,762 is directed to a system for providing computer control to a variety of PBX systems. In the system of this patent, a controller is used to allow one or more computers from a group of computer clients to send commands to a PBX by way of a server computer, and also to receive status information from the connected PBX. A converter which is specific to a particular PBX manufacturer is provided to allow the brand of PBX to be changed without having to modify the communications protocol, and therefore, the application software, that the computer client contains. The primary focus of this system is to allow the same client software to control a variety of PBX platforms. The system of the patent, however, provides no functional support for an application software developer to address the needs of multiple PBX systems, or for expanded networks of PBX systems in multiple locations. In either of these cases, the application software must be enhanced to allow it to be aware of, and to properly control, multiple PBX nodes. Because the application software resides at the client level, it can only control one call per work station and cannot address the needs of the entire system. An approach to resolve problems associated with routing calls to geographically distributed PBX nodes is disclosed in U.S. Pat. Nos. 5,546,452 and 5,848,143. The systems of these patents use a central controller with global authority to allow resident software to route calls appropriately to agents who are connected at various locations within the PBX network. The systems disclosed in these patents require the central processor to be equipped with routing and management software specifically designed for the expected call processing activity. These systems do not facilitate the transposition of a generic computer telephony application from a single PBX to networked PBX environment, and must take full control of the PBX network by correlating the identities of logged-in agents with a physical node and port locations in the PBX. As a consequence, the approach used in the systems of these patents requires a facility which must undergo continuous parallel maintenance to keep up with PBX user changes. </paragraph>
<paragraph id="P-0005" lvl="0"><number>&lsqb;0005&rsqb;</number> U.S. Pat. No. 5,479,487 discloses a system for allowing a centrally located scripting language to control a call as it passes between functional partitions within a call center system. The system creates a scripted development environment for distributed call processing products; but it does not address cases where there is a distributed network of PBX systems which require computer telephony control from some centralized application. </paragraph>
<paragraph id="P-0006" lvl="0"><number>&lsqb;0006&rsqb;</number> U.S. Pat. No. 6,011,844 is directed to a system for saving long distance toll charges. The system uses interconnected computer gateways to coordinate the switching of calls between network call centers. Each of these call centers receives telephone traffic according to methods designed to provide the lowest cost handling of each call, and only &ldquo;bridges in&rdquo; calls over the long distance network when necessary. The system of this patent is narrowly focused on reducing call traffic over the long distance network which may be handled in a local call center. The system is not capable of centralized consolidation of events arriving from different connected PBX nodes. </paragraph>
<paragraph id="P-0007" lvl="0"><number>&lsqb;0007&rsqb;</number> With the advent of intelligent networks within the public telephone system, U.S. Pat. No. 6,094,479 is directed to a solution which allows for the public network service control element to link with a PBX located within a customer&apos;s private network by using a gateway between the private and public network segments. The gateway, however, is limited in its functionality because it simply provides a standard means to link between two networks, and does not address the problems created when a customer makes the transition from single to multiple PBX nodes within a private network. </paragraph>
<paragraph id="P-0008" lvl="0"><number>&lsqb;0008&rsqb;</number> U.S. Pat. No. 6,181,788 is directed to a system for achieving uniform control of mixed platforms in telephony. Not all PBX manufacturers use the same protocols to implement computer-telephone integration (CTI) interfaces to a control computer. This patent is directed to a solution to solve software interface problems for customers who have a network of mixed types of PBX systems. The solution proposed in the &apos;788 patent is to use the CTI processors to convert the protocols from each PBX and then network together the CTI processors by way of a peer-to-peer network. Each CTI processor contains its own software with some form of messaging used to loosely link the various systems at each site. This patent is directed to the problem of mixed or different PBX system types. The patent does not address the problem of system scaling (that is, adding additional PBX&apos;s to a customer&apos;s system), and control of networked systems using a common software application. </paragraph>
<paragraph id="P-0009" lvl="0"><number>&lsqb;0009&rsqb;</number> It is desirable to enhance the CTI functionality of a PBX network having multiple nodes by combining bi-directional data from remote telephone switching nodes (different PBX systems) into one data stream to simplify the control of the remote system. </paragraph>
</section>
<section>
<heading lvl="1">SUMMARY OF THE INVENTION </heading>
<paragraph id="P-0010" lvl="0"><number>&lsqb;0010&rsqb;</number> It is an object of this invention to provide an improved system and method for serving multiple telephone switches. </paragraph>
<paragraph id="P-0011" lvl="0"><number>&lsqb;0011&rsqb;</number> It is another object of this invention to provide an improved method and system for a private branch exchange (PBX) telephone system network. </paragraph>
<paragraph id="P-0012" lvl="0"><number>&lsqb;0012&rsqb;</number> It is an additional object of this invention to provide an improved interface network linking a plurality of PBX systems over a wide area network. </paragraph>
<paragraph id="P-0013" lvl="0"><number>&lsqb;0013&rsqb;</number> It is a further object of this invention to provide an improved system and method employing computer telephony interface (CT) for a private branch exchange (PBX) telephone system network using a common software application for linking each of the PBX exchanges together in a transparent manner to users at any of the exchanges. </paragraph>
<paragraph id="P-0014" lvl="0"><number>&lsqb;0014&rsqb;</number> In accordance with a preferred embodiment of the invention, a computer telephony interface CT) for a private branch exchange (PBX) telephone system network utilizes a gateway processing system located on an adjacent computer. Each of the PBX systems has a unique address; and they are linked together through a wide area network (WAN), local area network (LAN), or the Internet to the Gateway processing system. The processing system includes translation tables for the addresses, as well as individual station extensions; so that calls originating from any one of the PBX systems on the network and directed to a station on any of the other PBX systems on the network pass their event (call progress) notification through the gateway where it is translated and directly sent to all users (applications) that requested the information in a manner which is transparent to the users of the system. Thus, the users are not aware that more than one PBX system is involved in the call event. The system also allows for changing the data in the translation table to allow relocation of a device associated with a particular extension number to any one of the PBX systems in the network without requiring individual programming at that, or any other, network.</paragraph>
</section>
</summary-of-invention>
<brief-description-of-drawings>
<section>
<heading lvl="1">BRIEF DESCRIPTION OF THE DRAWINGS </heading>
<paragraph id="P-0015" lvl="0"><number>&lsqb;0015&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1</cross-reference> is a schematic diagram of a preferred embodiment of the invention; </paragraph>
<paragraph id="P-0016" lvl="0"><number>&lsqb;0016&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 2</cross-reference> is a flow chart useful in explaining the initialization of the system; </paragraph>
<paragraph id="P-0017" lvl="0"><number>&lsqb;0017&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3</cross-reference> is a flow chart illustrating software application processing; </paragraph>
<paragraph id="P-0018" lvl="0"><number>&lsqb;0018&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 4</cross-reference> is a flow chart illustrating an operation of the system shown in <cross-reference target="DRAWINGS">FIG. 1</cross-reference>; and </paragraph>
<paragraph id="P-0019" lvl="0"><number>&lsqb;0019&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 5</cross-reference> is a flow chart illustrating an operation of the system shown in <cross-reference target="DRAWINGS">FIG. 1</cross-reference>.</paragraph>
</section>
</brief-description-of-drawings>
<detailed-description>
<section>
<heading lvl="1">DETAILED DESCRIPTION </heading>
<paragraph id="P-0020" lvl="0"><number>&lsqb;0020&rsqb;</number> Reference now should be made to the drawings, which illustrate a preferred embodiment of the invention. <cross-reference target="DRAWINGS">FIG. 1</cross-reference> is a block diagram illustrating the inclusion of a CT gateway processor as part of the system. As shown in <cross-reference target="DRAWINGS">FIG. 1</cross-reference>, four separate PBX systems <highlight><bold>10</bold></highlight>, <highlight><bold>20</bold></highlight>, <highlight><bold>30</bold></highlight> and <highlight><bold>40</bold></highlight>, all using a common software application, are employed as part of a PBX network for a single user, such as a business with offices in four different locations. Each of the PBX systems is connected with the public switched telephone network (PSTN), shown as <highlight><bold>12</bold></highlight> for the PBX <highlight><bold>10</bold></highlight>, and includes a plurality of telephone devices or locations, shown as <highlight><bold>14</bold></highlight> for the PBX <highlight><bold>10</bold></highlight>, each of which are reached by a particular extension number. For the PBX systems <highlight><bold>20</bold></highlight>, <highlight><bold>30</bold></highlight> and <highlight><bold>40</bold></highlight>, the PSTN links are shown as <highlight><bold>22</bold></highlight>, <highlight><bold>32</bold></highlight> and <highlight><bold>42</bold></highlight>, respectively; and the telephones associated with the individual PBX&apos;s <highlight><bold>20</bold></highlight>, <highlight><bold>30</bold></highlight> and <highlight><bold>40</bold></highlight> are indicated as <highlight><bold>24</bold></highlight>, <highlight><bold>34</bold></highlight> and <highlight><bold>44</bold></highlight>, respectively. </paragraph>
<paragraph id="P-0021" lvl="0"><number>&lsqb;0021&rsqb;</number> In the system shown in <cross-reference target="DRAWINGS">FIG. 1</cross-reference>, all of the different PBX locations are linked through a wide area network (WAN) <highlight><bold>50</bold></highlight>, through a site router <highlight><bold>52</bold></highlight>, for communication with one another. For the PBX <highlight><bold>10</bold></highlight>, the local interconnections to a local area network (LAN) <highlight><bold>60</bold></highlight> are indicated; and the LAN <highlight><bold>60</bold></highlight> is shown as utilizing a computer-telephony integration (CTI) applications processor <highlight><bold>62</bold></highlight> associated with it for executing applications for communicating between the different PBX systems on the network over the WAN <highlight><bold>50</bold></highlight>. </paragraph>
<paragraph id="P-0022" lvl="0"><number>&lsqb;0022&rsqb;</number> Also illustrated in <cross-reference target="DRAWINGS">FIG. 1</cross-reference> is a CTI application desktop and telephone <highlight><bold>64</bold></highlight> connected to the LAN <highlight><bold>60</bold></highlight>, which can be linked to and through the PBX <highlight><bold>10</bold></highlight> in a conventional manner. Other system devices with which the computer telephony interface (CT) gateway processor <highlight><bold>66</bold></highlight> communicates also may be included; and stub-outs showing potential connections to such other devices on the LAN bus <highlight><bold>60</bold></highlight> are indicated in <cross-reference target="DRAWINGS">FIG. 1</cross-reference>. It should be noted that communications through the CT gateway <highlight><bold>66</bold></highlight> to different PBX nodes, such as the remote nodes <highlight><bold>20</bold></highlight>, <highlight><bold>30</bold></highlight> and <highlight><bold>40</bold></highlight> are effected by using a standard site router device <highlight><bold>52</bold></highlight> to send and receive TCP/IP packets in data transfers in a conventional manner. </paragraph>
<paragraph id="P-0023" lvl="0"><number>&lsqb;0023&rsqb;</number> The operating software of the system control arrangement which is effected by the CT Gateway <highlight><bold>66</bold></highlight> constantly accesses and updates information from a common translation database as data arrives by way of the WAN <highlight><bold>50</bold></highlight> or LAN <highlight><bold>60</bold></highlight> on behalf of each of the switching system notes <highlight><bold>10</bold></highlight>, <highlight><bold>20</bold></highlight>, <highlight><bold>30</bold></highlight> and <highlight><bold>40</bold></highlight>. Each switch node has a respective socket <highlight><bold>74</bold></highlight> which it uses for communications to the CT Gateway <highlight><bold>66</bold></highlight>. The Gateway stream process <highlight><bold>70</bold></highlight> continuously polls these sockets <highlight><bold>74</bold></highlight> in the event that the switching node has sent data to it. All of this is placed into a resulting consolidated event data stream made available to one or more CT software applications automatically. This is illustrated generally in the circuit of <cross-reference target="DRAWINGS">FIG. 1</cross-reference> by the interconnections from the listening or incoming IP sockets <highlight><bold>68</bold></highlight> to the CT stream gateway processor <highlight><bold>70</bold></highlight>. </paragraph>
<paragraph id="P-0024" lvl="0"><number>&lsqb;0024&rsqb;</number> Although the system described immediately above refers to specific &ldquo;sockets&rdquo;, rather than relying on actual physical connections employed by previous product designs, the CT Gateway <highlight><bold>66</bold></highlight> only requires that a standard TCP/IP network connection be available between the connected devices. This allows a network installer to quickly verify that all required devices are properly interconnected into the network logic without having to interconnect complicated panels of physical RS-232 ports. The end result is an interconnection topology based on standard TCP/IP networks recognized by the computer industry. The application-level information present within the TCP/IP packets acts as a transport for the majority of the communication network infrastructure of the preferred embodiment of the invention illustrated in <cross-reference target="DRAWINGS">FIG. 1</cross-reference>. </paragraph>
<paragraph id="P-0025" lvl="0"><number>&lsqb;0025&rsqb;</number> In order to transparently program and/or control each of the various telephony devices, such as <highlight><bold>14</bold></highlight>, <highlight><bold>24</bold></highlight>, <highlight><bold>34</bold></highlight>, <highlight><bold>44</bold></highlight>, or &ldquo;extensions&rdquo; used with any one of the PBX systems <highlight><bold>10</bold></highlight>, <highlight><bold>20</bold></highlight>, <highlight><bold>30</bold></highlight> or <highlight><bold>40</bold></highlight>, an extension number and node translation data base memory <highlight><bold>72</bold></highlight> is provided for mapping all of the extensions in all of the PBX systems <highlight><bold>10</bold></highlight>, <highlight><bold>20</bold></highlight>, <highlight><bold>30</bold></highlight> and <highlight><bold>40</bold></highlight> into a single random access memory <highlight><bold>72</bold></highlight>. Once this is done, the specific extension number, as well as the IP address for the PBX <highlight><bold>20</bold></highlight>, <highlight><bold>30</bold></highlight>, <highlight><bold>40</bold></highlight> or <highlight><bold>10</bold></highlight> with which it is associated, is stored in the memory <highlight><bold>72</bold></highlight>; and a link from a calling party at any of the PBX system nodes is made by the CT Gateway processor <highlight><bold>70</bold></highlight> through corresponding output node &ldquo;sockets&rdquo; <highlight><bold>74</bold></highlight>, equal in number of the number of PBX systems <highlight><bold>10</bold></highlight>, <highlight><bold>20</bold></highlight>, <highlight><bold>30</bold></highlight>, <highlight><bold>40</bold></highlight> (or whatever number) used in the completed network. Once again, while specific reference is made to &ldquo;sockets&rdquo; on the output side of the processor <highlight><bold>70</bold></highlight>, it should be noted that standard TCP/IP network connections are utilized to effect the transfer of data from the CT Gateway <highlight><bold>66</bold></highlight> back onto the LAN <highlight><bold>60</bold></highlight>, and then on through the site router <highlight><bold>52</bold></highlight> and the WAN <highlight><bold>50</bold></highlight>, if necessary, to the desired location. </paragraph>
<paragraph id="P-0026" lvl="0"><number>&lsqb;0026&rsqb;</number> In order for the Gateway to provide data to applications, the CT Gateway <highlight><bold>66</bold></highlight> must be integrated into the user&apos;s network to provide services to this network. The CT Gateway must then be started, either manually or automatically, as determined by the user. The processing which occurs during startup is illustrated in <cross-reference target="DRAWINGS">FIG. 2</cross-reference>. Prior to this initialization, the user is required to configure valid IP address and ports for each of the PBX systems to be used, as well as configuring the master or listening socket <highlight><bold>68</bold></highlight> for the gateway. This master socket is used by the Gateway to listen for clients requesting connections to the server. Upon commencing initialization, the gateway connects to each switch node using the respective socket <highlight><bold>74</bold></highlight>. The processing begins as shown on <cross-reference target="DRAWINGS">FIG. 2</cross-reference> &ldquo;Start Gateway Processing&rdquo; <highlight><bold>80</bold></highlight>. The gateway first obtains the operating status and software version of the switching node at <highlight><bold>84</bold></highlight>. It will then query the individual device identifiers for the node <highlight><bold>86</bold></highlight> at <highlight><bold>86</bold></highlight> placing each device entity obtained into the Gateway database <highlight><bold>88</bold></highlight> and <highlight><bold>90</bold></highlight>. Once all the database has been obtained, the gateway will inform the PBX system node of the gateway presence at <highlight><bold>92</bold></highlight> and begin monitoring the node for any system event data at <highlight><bold>94</bold></highlight>. It will also configure the PBX system node so that the data it sends is in the format required by the gateway. </paragraph>
<paragraph id="P-0027" lvl="0"><number>&lsqb;0027&rsqb;</number> Once all of the PBX systems have completed this initialization, the Gateway will begin to listen for applications request for service through the master socket <highlight><bold>68</bold></highlight>. The client application on the CTI application desktop <highlight><bold>64</bold></highlight> will attempt to establish communication with the Gateway by sending a logon message to the gateway by way of the master socket <highlight><bold>68</bold></highlight>. Once the Gateway has recognized this application, it will send a &ldquo;power up&rdquo; response indicating it is ready to begin servicing the client&apos;s application on the CTI application <highlight><bold>64</bold></highlight>. The logon message sent by the client must take the form of:</paragraph>
<paragraph lvl="0"><in-line-formula>&lt;ByteCount&gt;&lt;Type of Socket&gt;&lt;Password&gt;0&times;00&lsqb;&lt;AppName&gt;0&times;00&rsqb;</in-line-formula></paragraph>
<paragraph id="P-0028" lvl="7"><number>&lsqb;0028&rsqb;</number> where: </paragraph>
<paragraph id="P-0029" lvl="2"><number>&lsqb;0029&rsqb;</number> ByteCount&mdash;(the byte count for the data being passed) </paragraph>
<paragraph id="P-0030" lvl="2"><number>&lsqb;0030&rsqb;</number> Type of socket&mdash;passed as hex 87 (0&times;87) </paragraph>
<paragraph id="P-0031" lvl="2"><number>&lsqb;0031&rsqb;</number> Password&mdash;up to 15 ASCII characters </paragraph>
<paragraph id="P-0032" lvl="2"><number>&lsqb;0032&rsqb;</number> Appname&mdash;up to 32 ASCII characters. This is optional, but it is useful in knowing which socket connection is connected to which application when running multiple applications. </paragraph>
<paragraph id="P-0033" lvl="0"><number>&lsqb;0033&rsqb;</number> Upon receiving the Power Up response from the CT Gateway <highlight><bold>66</bold></highlight>, the application on the desktop <highlight><bold>64</bold></highlight> is free to send any commands to allow it to perform its task. In most cases this will require the application to begin monitoring a device or set of devices. This results in monitor start request arriving at the CT Gateway <highlight><bold>66</bold></highlight> from the application desktop <highlight><bold>64</bold></highlight>. These commands are processed and are routed to the proper PBX node socket <highlight><bold>74</bold></highlight> by determining which device is affected in the command and mapping it to the corresponding PBX node using the gateway database <highlight><bold>72</bold></highlight>. In the event that the gateway determines that a monitor already exists for a particular device, it will not need to forward the command to a PBX node, but simply creates a suitable response for the application on desktop <highlight><bold>64</bold></highlight> immediately. In the event the device is not yet monitored, a command is sent to a PBX node which will shortly thereafter send a command response back to the socket <highlight><bold>74</bold></highlight>. The Gateway receives this command response and determines which application the response is destined for and routes it to the application on the desktop <highlight><bold>64</bold></highlight> only. </paragraph>
<paragraph id="P-0034" lvl="0"><number>&lsqb;0034&rsqb;</number> In the event the monitored device generates an event, the event is routed to the socket <highlight><bold>74</bold></highlight>, which is polled shortly thereafter by the gateway processor <highlight><bold>70</bold></highlight>. At this point the Gateway <highlight><bold>66</bold></highlight> determines the device and type of event and then determines if any application will require this event. The event then is forwarded onto any interested applications, such as those on the desktop <highlight><bold>64</bold></highlight>. </paragraph>
<paragraph id="P-0035" lvl="0"><number>&lsqb;0035&rsqb;</number> The system also routinely polls the application sockets <highlight><bold>68</bold></highlight> looking for commands to send to the phone system. The commands are processed and the affected extension information is used along with the database <highlight><bold>72</bold></highlight> to determine to which switch socket(s) <highlight><bold>74</bold></highlight> connection the command is to be routed. After the command(s) is sent and acknowledged by the switch node which posts a response at socket <highlight><bold>74</bold></highlight>, the Gateway then subsequently routes the response to the associated application which originated the command. </paragraph>
<paragraph id="P-0036" lvl="0"><number>&lsqb;0036&rsqb;</number> In the course of normal processing, as data arrives at a socket <highlight><bold>74</bold></highlight> for each PBX node, the system uses the sequence number of the message to determine if there has been any data lost between messages. In the event that there has been lost data, the Gateway <highlight><bold>66</bold></highlight> generates an error event to each application which uses the specified node and once again performs initialization processing on that node. Once the node completes re-initialization the application processing can recommence. While the node is not responding, the application is unable to route commands to the switching system (unless they are node aware, as described subsequently). </paragraph>
<paragraph id="P-0037" lvl="0"><number>&lsqb;0037&rsqb;</number> In special cases, an application can command the Gateway <highlight><bold>66</bold></highlight> to let it be more intelligent about the topography of the switching environment. It allows the application to know what nodes are present, as well as to be less affected by the failure of any one node. This mode of operation is referred to as node awareness and allows a single node failure not to adversely affect the behavior of the external application. In the event of loss of communication at any single node, the Gateway <highlight><bold>66</bold></highlight> sends the application a link status failure and attempts to recommence communication with the failing phone system node. The application is still able to send commands to all of the other operating nodes. This is in stark contrast to a non-node aware application, which cannot communicate with any node until communication is restored to the failing node. </paragraph>
<paragraph id="P-0038" lvl="0"><number>&lsqb;0038&rsqb;</number> In the course of normal processing, extensions can be added or deleted from a switching node. These changes result in extension change events sent to the socket <highlight><bold>74</bold></highlight> for the associated PBX node. Upon polling the socket, the gateway <highlight><bold>66</bold></highlight> adjusts the database <highlight><bold>72</bold></highlight> with respect to the extension change event. </paragraph>
<paragraph id="P-0039" lvl="0"><number>&lsqb;0039&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3</cross-reference> is an example of one manner of programming which illustrates an operation of the system to complete initialization. The system, at <highlight><bold>104</bold></highlight>, allows each software application to internally initiate and begin sending device monitor sequences to open communications links with associated devices. If some devices already are being monitored, confirmation is made at <highlight><bold>106</bold></highlight>; and then the device numbers (telephone extensions) and the node numbers mapping is done at <highlight><bold>108</bold></highlight>. After the device and nodes mapping, the system issues translated device &ldquo;extension numbers&rdquo; for initialization commands at <highlight><bold>1</bold></highlight> <highlight><bold>10</bold></highlight>; and these are provided with application numbers and command ID mapping at <highlight><bold>112</bold></highlight>. Software applications then are confirmed to the PBX nodes at <highlight><bold>114</bold></highlight>; and command sequence numbers are initialized and associated with the software applications at <highlight><bold>116</bold></highlight>. The operation of the sequence number verifier, that is the Gateway and the PBX node, are accomplished at <highlight><bold>11</bold></highlight> <highlight><bold>8</bold></highlight>; and the software application initialization is completed at <highlight><bold>120</bold></highlight>. The system is now prepared to operate as a communications link which is transparent to the users at each of the different PBX nodes <highlight><bold>10</bold></highlight>, <highlight><bold>20</bold></highlight>, <highlight><bold>30</bold></highlight> and <highlight><bold>40</bold></highlight>. </paragraph>
<paragraph id="P-0040" lvl="0"><number>&lsqb;0040&rsqb;</number> As processing continues in an example of a typical gateway process, as shown in <cross-reference target="DRAWINGS">FIG. 4</cross-reference>, the Gateway monitors the polled data arriving from each CTI application. If the Gateway receives a command from an application (system event) at <highlight><bold>130</bold></highlight>, the Gateway <highlight><bold>66</bold></highlight> invokes acceptable call handling routines at <highlight><bold>132</bold></highlight>, and issues appropriate call control commands at <highlight><bold>134</bold></highlight> in accordance with the standard PBX operating procedures. These commands are supplied to the device number and node number mapping for translation at <highlight><bold>136</bold></highlight>, and from there, the command is sent to the appropriate PBX system node and device, as shown at <highlight><bold>138</bold></highlight>. This means that the system node IP socket <highlight><bold>74</bold></highlight> (<cross-reference target="DRAWINGS">FIG. 1</cross-reference>) which is specific to the device (extension number) is selected; and the information is transmitted back out through the LAN and through the site server <highlight><bold>52</bold></highlight> through the WAN <highlight><bold>50</bold></highlight> to the appropriate selected one of the PBX&apos;s <highlight><bold>10</bold></highlight>, <highlight><bold>20</bold></highlight>, <highlight><bold>30</bold></highlight> or <highlight><bold>40</bold></highlight> which has that particular extension <highlight><bold>14</bold></highlight>, <highlight><bold>24</bold></highlight>, <highlight><bold>34</bold></highlight> or <highlight><bold>44</bold></highlight> associated with it. In the example shown in <cross-reference target="DRAWINGS">FIG. 4</cross-reference>, the command is processed and acknowledged by the PBX node at <highlight><bold>140</bold></highlight> in a conventional manner, and a confirmation at <highlight><bold>141</bold></highlight> is sent back through the Gateway <highlight><bold>66</bold></highlight> which determines through a lookup table at <highlight><bold>142</bold></highlight> which CTI application is waiting for this command confirmation message. The Gateway <highlight><bold>66</bold></highlight> sends the command confirmation message at <highlight><bold>142</bold></highlight> to the appropriate CTI application at <highlight><bold>144</bold></highlight>. At <highlight><bold>146</bold></highlight>, the basic all control sequence is complete; and a call is effected between the calling and called parties without either of the parties knowing whether they are operating within a single one of the PBX systems <highlight><bold>10</bold></highlight>, <highlight><bold>20</bold></highlight>, <highlight><bold>30</bold></highlight> or <highlight><bold>40</bold></highlight>, or whether the call has been handled from one system, through the Gateway, to another. As far as the individual parties are concerned, the call appears to be handled entirely within the same PBX. </paragraph>
<paragraph id="P-0041" lvl="0"><number>&lsqb;0041&rsqb;</number> As processing continues in conjunction with the sequence described in <cross-reference target="DRAWINGS">FIG. 4</cross-reference>, the CT Gateway also monitors the polled data arriving from each of the PBX nodes at <highlight><bold>160</bold></highlight> (<cross-reference target="DRAWINGS">FIG. 5</cross-reference>). If the event received indicates a system change at <highlight><bold>161</bold></highlight>, the Gateway <highlight><bold>66</bold></highlight> reads the nature of the update at <highlight><bold>160</bold></highlight> and makes changes to the mapping provided by the specific device number (extension number) and PBX node device translation database at <highlight><bold>162</bold></highlight>, and supplies this information to the device number and node number mapping memory. These changes are made automatically. </paragraph>
<paragraph id="P-0042" lvl="0"><number>&lsqb;0042&rsqb;</number> The changes also occur on an ongoing basis; and once a change has been committed to the database at <highlight><bold>162</bold></highlight>, the translation of packets from that point on is done according to the revised translation mapping information stored in the database (<highlight><bold>72</bold></highlight> of <cross-reference target="DRAWINGS">FIG. 1</cross-reference>). These changes occur continuously and transparently to the software applications that are utilizing the gateway in the manner described above in conjunction with <cross-reference target="DRAWINGS">FIG. 4</cross-reference>. The overall process is designed for the applications software to be able to complete the processing of the appropriate call event and continue to provide real time control of the selected devices connected to each PBX node. If the event does not reflect a system change, or once the system change update has been completed by the Gateway, the Gateway then determines which, if any, CTI applications want to receive the event at <highlight><bold>164</bold></highlight>. The Gateway determines this by looking at which monitor sessions each CTI application has initiated. The Gateway send the event to all appropriate CTI applications through the LAN at <highlight><bold>166</bold></highlight>. The event handling sequence is complete at <highlight><bold>168</bold></highlight>. </paragraph>
<paragraph id="P-0043" lvl="0"><number>&lsqb;0043&rsqb;</number> The system can be programmed differently to employ the Gateway <highlight><bold>66</bold></highlight> in operations other than the ones shown by way of example in <cross-reference target="DRAWINGS">FIGS. 3, 4</cross-reference> and <highlight><bold>5</bold></highlight>. Other versions of the system may incorporate telephone switches that purely exist within the computer servers. The network topologies for such systems are capable of combining the functions of the CT Gateway process into one (presumably a &ldquo;main&rdquo; system) PBX node to eliminate the need for a separate server to house the CT Gateway process. Then, any CT application will be able to login to the main phone system server to obtain a consolidated data stream from the entire network of PBX nodes. Such a version further simplifies the network topology and makes processing more efficient. </paragraph>
<paragraph id="P-0044" lvl="0"><number>&lsqb;0044&rsqb;</number> The foregoing description of the preferred embodiment of the invention is to be considered as illustrative and not as limiting. Various changes and modifications will occur to those skilled in the art for performing substantially the same function, in substantially the same way, to achieve substantially the same result, without departing from the true scope of the invention as defined in the appended claims. </paragraph>
</section>
</detailed-description>
</subdoc-description>
<subdoc-claims>
<heading lvl="1">What is claimed is </heading>
<claim id="CLM-00001">
<claim-text><highlight><bold>1</bold></highlight>. A computer telephony (CT) network for a private branch exchange (PBX) telephone system network including in combination: 
<claim-text>a plurality of private branch exchange (PBX) systems using a common software application and linked together through a network, each of the PBX systems having a unique address; </claim-text>
<claim-text>a gateway processing system located on a network with one of the plurality of PBX systems, the gateway processing system having a plurality of sockets with each socket corresponding to a different one of the addresses of the plurality of PBX systems; </claim-text>
<claim-text>a memory in the gateway processing system for storing a translation table identifying extension numbers on each of the PBX systems and combining these extension numbers with the unique addresses for each PBX system to provide mapping information for sending a command from any of the applications on a socket to a socket (node) for the PBX system corresponding to the actual physical location for an affected party extension number. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00002">
<claim-text><highlight><bold>2</bold></highlight>. The CT network according to <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference> wherein the gateway processing system receives a system event from one of the plurality of PBX systems through the corresponding socket for that one of the PBX systems, with the system event processed by the CT network applied to the translation table in the memory whereupon the event is processed and provided to the socket for each of the applications requesting the information on the device corresponding to the event, whereupon the translation by the CT network is transparent to the application requesting the system event. </claim-text>
</claim>
<claim id="CLM-00003">
<claim-text><highlight><bold>3</bold></highlight>. The CT network according to <dependent-claim-reference depends_on="CLM-00002">claim 2</dependent-claim-reference> further including means coupled with the gateway processing system to change the mapping of an extension number and address in the memory whenever changes in the physical location of an extension number occurs. </claim-text>
</claim>
<claim id="CLM-00004">
<claim-text><highlight><bold>4</bold></highlight>. The CT network according to <dependent-claim-reference depends_on="CLM-00003">claim 3</dependent-claim-reference> wherein the changes supplied to the memory are received from any one of the plurality of PBX systems where the change is to be effected. </claim-text>
</claim>
<claim id="CLM-00005">
<claim-text><highlight><bold>5</bold></highlight>. The CT network according to <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference> further including means coupled with the gateway processing system to change the mapping of an extension number and address in the memory whenever changes in the physical location of an extension number occurs. </claim-text>
</claim>
<claim id="CLM-00006">
<claim-text><highlight><bold>6</bold></highlight>. The CT network according to <dependent-claim-reference depends_on="CLM-00005">claim 5</dependent-claim-reference> wherein the changes supplied to the memory are received from any one of the plurality of PBX systems where the change is to be effected. </claim-text>
</claim>
<claim id="CLM-00007">
<claim-text><highlight><bold>7</bold></highlight>. The CT network according to <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference> wherein the gateway processing system receives a system command from an application through the corresponding socket for that application, with the system command applied to the translation table in the memory, whereupon the command is processed and provided to the socket for a PBX system having an extension number for a device corresponding to the requested command, whereupon the translation by the gateway processing system is transparent to the application sending the system command. </claim-text>
</claim>
<claim id="CLM-00008">
<claim-text><highlight><bold>8</bold></highlight>. A method for expanding PBX systems from a single PBX system to multiple interconnected PBX systems including the steps of: 
<claim-text>providing a gateway at a PBX system for translating bi-directional commands over a packet network to a community of PBX nodes, each utilizing a common software application; and </claim-text>
<claim-text>providing a translation table in the gateway to allow PBX network changes and rearrangements by translating addresses for the PBX systems and individual extension numbers for individual devices to transparently route the system events through the gateway from and to the different PBX nodes. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00009">
<claim-text><highlight><bold>9</bold></highlight>. The method according to <dependent-claim-reference depends_on="CLM-00007">claim 7</dependent-claim-reference> further including the step of receiving changes from the PBX nodes for updating the information in the translation table of devices on a continuous basis.</claim-text>
</claim>
</subdoc-claims>
<subdoc-drawings id="DRAWINGS">
<heading lvl="0" align="CENTER">Drawings</heading>
<representative-figure>1</representative-figure>
<figure id="figure-D00000">
<image id="EMI-D00000" file="US20030002647A1-20030102-D00000.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00001">
<image id="EMI-D00001" file="US20030002647A1-20030102-D00001.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00002">
<image id="EMI-D00002" file="US20030002647A1-20030102-D00002.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00003">
<image id="EMI-D00003" file="US20030002647A1-20030102-D00003.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00004">
<image id="EMI-D00004" file="US20030002647A1-20030102-D00004.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00005">
<image id="EMI-D00005" file="US20030002647A1-20030102-D00005.TIF" imf="TIFF" ti="DR"/>
</figure>
</subdoc-drawings>
</patent-application-publication>
