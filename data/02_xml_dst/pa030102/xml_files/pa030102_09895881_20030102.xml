<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE patent-application-publication SYSTEM "pap-v16-2002-01-01.dtd" [
<!ENTITY US20030001445A1-20030102-D00000.TIF SYSTEM "US20030001445A1-20030102-D00000.TIF" NDATA TIF>
<!ENTITY US20030001445A1-20030102-D00001.TIF SYSTEM "US20030001445A1-20030102-D00001.TIF" NDATA TIF>
<!ENTITY US20030001445A1-20030102-D00002.TIF SYSTEM "US20030001445A1-20030102-D00002.TIF" NDATA TIF>
<!ENTITY US20030001445A1-20030102-D00003.TIF SYSTEM "US20030001445A1-20030102-D00003.TIF" NDATA TIF>
<!ENTITY US20030001445A1-20030102-D00004.TIF SYSTEM "US20030001445A1-20030102-D00004.TIF" NDATA TIF>
<!ENTITY US20030001445A1-20030102-D00005.TIF SYSTEM "US20030001445A1-20030102-D00005.TIF" NDATA TIF>
]>
<patent-application-publication>
<subdoc-bibliographic-information>
<document-id>
<doc-number>20030001445</doc-number>
<kind-code>A1</kind-code>
<document-date>20030102</document-date>
</document-id>
<publication-filing-type>new</publication-filing-type>
<domestic-filing-data>
<application-number>
<doc-number>09895881</doc-number>
</application-number>
<application-number-series-code>09</application-number-series-code>
<filing-date>20010629</filing-date>
</domestic-filing-data>
<technical-information>
<classification-ipc>
<classification-ipc-primary>
<ipc>H02K007/09</ipc>
</classification-ipc-primary>
<classification-ipc-edition>07</classification-ipc-edition>
</classification-ipc>
<classification-us>
<classification-us-primary>
<uspc>
<class>310</class>
<subclass>090500</subclass>
</uspc>
</classification-us-primary>
</classification-us>
<title-of-invention>Method and system for positioning a movable body in a magnetic bearing system</title-of-invention>
</technical-information>
<inventors>
<first-named-inventor>
<name>
<given-name>Brad</given-name>
<middle-name>E.</middle-name>
<family-name>Paden</family-name>
</name>
<residence>
<residence-us>
<city>Goleta</city>
<state>CA</state>
<country-code>US</country-code>
</residence-us>
</residence>
<authority-applicant>INV</authority-applicant>
</first-named-inventor>
<inventor>
<name>
<given-name>Jed</given-name>
<middle-name>C.</middle-name>
<family-name>Ludlow</family-name>
</name>
<residence>
<residence-us>
<city>North Salt Lake</city>
<state>UT</state>
<country-code>US</country-code>
</residence-us>
</residence>
<authority-applicant>INV</authority-applicant>
</inventor>
<inventor>
<name>
<given-name>Gill</given-name>
<middle-name>B.</middle-name>
<family-name>Bearnson</family-name>
</name>
<residence>
<residence-us>
<city>Salt Lake City</city>
<state>UT</state>
<country-code>US</country-code>
</residence-us>
</residence>
<authority-applicant>INV</authority-applicant>
</inventor>
</inventors>
<correspondence-address>
<name-1>MADSON &amp; METCALF</name-1>
<name-2>GATEWAY TOWER WEST</name-2>
<address>
<address-1>SUITE 900</address-1>
<address-2>15 WEST SOUTH TEMPLE</address-2>
<city>SALT LAKE CITY</city>
<state>UT</state>
<postalcode>84101</postalcode>
</address>
</correspondence-address>
</subdoc-bibliographic-information>
<subdoc-abstract>
<paragraph id="A-0001" lvl="0">A magnetic bearing system allows a movable body to be positioned to a point of substantial equilibrium in an axial direction after a system shutdown. A sensor measures the axial position of the movable body to produce an displacement output. That output is then adjusted to account for a sensor offset. The adjustment is stored and can be used to position the movable body during regular operation of the system or when the system reboots or restarts. The adjusted displacement output is converted into a force for positioning the movable body. The movable body may be a rotor in a heart pump apparatus. </paragraph>
</subdoc-abstract>
<subdoc-description>
<summary-of-invention>
<section>
<heading lvl="1">BACKGROUND OF THE INVENTION </heading>
<paragraph id="P-0001" lvl="0"><number>&lsqb;0001&rsqb;</number> 1. The Field of the Invention </paragraph>
<paragraph id="P-0002" lvl="0"><number>&lsqb;0002&rsqb;</number> The present invention relates to a method and system of positioning a movable body in a magnetic bearing system. More specifically, the present invention relates to a method and system of adjusting a sensor output signal, used to measure the position of the body, to account for sensor offset error due to aging, and using the adjusted signal to position the body during regular operation of the system, or to provide a starting position for the body when the system reboots or restarts. </paragraph>
<paragraph id="P-0003" lvl="0"><number>&lsqb;0003&rsqb;</number> 2. The Relevant Technology </paragraph>
<paragraph id="P-0004" lvl="0"><number>&lsqb;0004&rsqb;</number> Unstable systems such as magnetic bearing systems which support a movable body without a mechanical coupling or bearing are ideally configured for fluid pumps that handle sensitive or corrosive fluids such as blood. Blood for example, can damage mechanical couplings, seals, and other pump parts with which it comes into contact. The mechanical couplings and interacting pump parts, conversely, can damage blood cells. Other fluids need to be free from contamination, mechanical shear, and other problems stemming from fluid interaction with the pump. Many food industry items require special handling to maintain their purity. Still other fluids do not respond well to increases in heat which often accompany many mechanical couplings. Thus, pumps with magnetically suspended rotors have been developed. The rotor may be made of non corrosive material for specific contact with the particular fluid being pumped. The rotor is magnetically suspended in the fluid and coupled to an isolated motor. Because the rotor is levitated actively or passively by a series of permanent or electromagnets, there is no direct mechanical interaction of pump parts to each other. The only moving part that the fluid interacts with is the rotor itself. This configuration minimizes many of the problems associated with fluid interaction with the mechanical parts of the pump. </paragraph>
<paragraph id="P-0005" lvl="0"><number>&lsqb;0005&rsqb;</number> Magnetic bearing systems, are often unstable however. Forces due to gravitation, fluid flow, vacuums, and the magnets themselves affect the position of the rotor during pumping operation. In a magnetic bearing pump, for example, if a rotor is too far out of position, not only could it adversely affect the operation of the pump, but the rotor could be overcome by one or more of the magnetic fields supporting it, causing the rotor to clamp down against a magnet preventing the pump from operating at all. </paragraph>
<paragraph id="P-0006" lvl="0"><number>&lsqb;0006&rsqb;</number> Accordingly, some magnetic bearing systems have means to detect the position of the movable body being magnetically suspended and provide a self adjusting mechanism for repositioning the movable body. One such system is the subject of U.S. Pat. No. 3,860,300, which discloses a permanent and electromagnet system. The electromagnets are used for control purposes. A persisting net force produces electrical energization of the electromagnet system resulting from displacement of the movable body. The net force is augmented until the movable body is repositioned to an oppositely displaced position of substantial equilibrium. Another self-adjusting system is disclosed in U.S. Pat. No. 5,783,885 which discloses a self-adjusting magnetic bearing system which automatically adjusts the parameters of an axially unstable magnetic bearing such that its force balance is maintained near the point of unstable equilibrium. </paragraph>
<paragraph id="P-0007" lvl="0"><number>&lsqb;0007&rsqb;</number> The problem with many known self-adjusting magnetic bearing systems, however, is that they are sensor-based and do not account for aging or damaged sensors that may drift over time. Electrical sensors, for example, may not take the same reading for the same position of a suspended movable body as they may have when they were newer. Thus, the system may respond and react to adjust a movable position that the system determines is at a certain point, relative to a point of equilibrium, when in fact, the rotor is slightly offset from that particular portion. This phenomenon is often referred to as &ldquo;sensor drift.&rdquo; Sensor drift may be caused by aging, temperature variations, jarring, misalignment or other factors. </paragraph>
<paragraph id="P-0008" lvl="0"><number>&lsqb;0008&rsqb;</number> Known self-adjusting systems use output from sensors to reposition the suspended movable body. If the output is incorrect by some amount of sensor offset, a position controller may have to work too hard to reposition the movable body. This may result in damaging excess heat created by the over-worked positioner or controller. Further, it may require excess energy to reposition the movable body because of the sensor offset error caused by sensor drift. In mechanical bearing systems such as heart pumps, which are quite small and house very small batteries, excessive energy drains can significantly reduce the life of the pump. </paragraph>
<paragraph id="P-0009" lvl="0"><number>&lsqb;0009&rsqb;</number> Perhaps the most severe disadvantage of known self-adjusting magnetic bearing systems is that they do not account for sensor offsets or errors, due to sensor drift or other factors, in the event that they have to reboot or restart. Reboots or restarts may be necessary when the battery loses its power or a computer malfunction occurs. Some magnetic bearing systems come with factory sensor output settings, but sensors drift over time and the factory sensors may not be adequate for reboots or restarts after a period of time. Some positioners or controllers include certain limits to improve or account for transient response. If the sensor offset is not accounted for in the sensor reading output, it is possible that the controller cannot compensate for the offset upon reboot or restart. The result would be a large power dissipation or even failure of the movable body or rotor to levitate. This problem could be fatal in magnetic bearing systems such as heart pumps, residing in people with weak hearts. </paragraph>
<paragraph id="P-0010" lvl="0"><number>&lsqb;0010&rsqb;</number> Thus, it would be an advancement in the art to provide a magnetic bearing system and method for positioning a movable body that accounts for sensor offset or error, due to sensor drift or other factors. It would be an additional advancement in the art to provide such a system and method that could adjust a sensor output to account for sensor offset to ease the burden on magnetic bearing system positioner or position controller. It would be an additional advancement in the art to provide such a system and method that could store an estimated sensor offset adjustment and use the stored estimate or adjustment to position the movable body in the event of a restart or reboot. Such a system and method in accordance with the present invention is disclosed and claimed herein. </paragraph>
</section>
<section>
<heading lvl="1">SUMMARY OF THE INVENTION </heading>
<paragraph id="P-0011" lvl="0"><number>&lsqb;0011&rsqb;</number> The apparatus of the present invention has been developed in response to the present state of the art, and in particular, in response to the problems and needs in the art that have not yet been fully solved by currently available magnetic bearing systems. The present invention solves many or all of the foregoing problems by introducing a system and method by which a magnetic bearing system can adjust for sensor offset when positioning a magnetically suspended movable body and use the adjustment during regular operation and in a reboot or restart situation. </paragraph>
<paragraph id="P-0012" lvl="0"><number>&lsqb;0012&rsqb;</number> In accordance with the invention as embodied and broadly described herein a magnetic bearing system is provided. The magnetic bearing system may include a sensor for measuring the displacement of the movable body and providing a displacement output. In one embodiment, the sensor is configured to convert the displacement output to a displacement voltage, thus making it easier to adjust. </paragraph>
<paragraph id="P-0013" lvl="0"><number>&lsqb;0013&rsqb;</number> The displacement output or voltage may be used by a sensor offset compensation module to adjust the displacement output to account for a sensor offset. This may be done by estimating the amount of sensor offset and adjusting the displacement output or voltage by the estimate. The sensor offset may be estimated by taking and storing a number of displacement outputs over a period of time and averaging the displacement outputs to approximate the amount of sensor offset in the displacement output. In one embodiment, stored displacement outputs are selectively used depending upon a comparison of the displacement output against a threshold. In other embodiments, a weighted average or moving average may be used to estimate the amount of sensor offset for adjustment purposes. </paragraph>
<paragraph id="P-0014" lvl="0"><number>&lsqb;0014&rsqb;</number> Nonvolatile memory may be used to store displacement outputs repeatedly taken by the sensor. Executable programs may be stored in nonvolatile memory or other memory storage devices to perform the estimation algorithms and to control the functioning of the system. Memory by also be used to store updated sensor offset estimates or adjusted displacement outputs. </paragraph>
<paragraph id="P-0015" lvl="0"><number>&lsqb;0015&rsqb;</number> A position control module may be configured to receive and use the adjusted displacement output of the sensor offset compensation module to approximate the point of substantial axial equilibrium of the movable body. In one embodiment, the position control module is a virtual zero power controller. The position control module may be equipped to receive stored estimates of the sensor offset or stored adjusted displacement output for use during a restart, reset or reboot of the system. </paragraph>
<paragraph id="P-0016" lvl="0"><number>&lsqb;0016&rsqb;</number> An actuator module or actuator uses the output of the position control module to create mechanical or electrical force for positioning the movable body to the point of substantial axial equilibrium determined by the position control module. </paragraph>
<paragraph id="P-0017" lvl="0"><number>&lsqb;0017&rsqb;</number> In one embodiment, the magnetic bearing system is a heart pump apparatus which has a housing for receiving and discharging blood fluid. The rotor is positioned within the housing between an inlet port and outlet port. Permanent magnets are positioned to control the radial position of the rotor, and the pitch and yaw of the rotor. An electromagnet actively controls the position of the rotor in the axial direction. The heart pump may include an electromagnetic motor for rotating the rotor about a central axis. </paragraph>
<paragraph id="P-0018" lvl="0"><number>&lsqb;0018&rsqb;</number> Accordingly, the present invention provides a magnetic bearing system and method for positioning a movable body that accounts for sensor offset or sensor error. The present invention also provides a system and method for storing an estimated sensor offset or adjusted displacement output and using the stored estimate to position the movable body during regular use, or in the event of a restart, reboot or other type of reset. These and other objects, features, and advantages of the present invention will become more fully apparent from the following description and appended claims, or may be learned by the practice of the invention as set forth hereinafter.</paragraph>
</section>
</summary-of-invention>
<brief-description-of-drawings>
<section>
<heading lvl="1">BRIEF DESCRIPTION OF THE DRAWINGS </heading>
<paragraph id="P-0019" lvl="0"><number>&lsqb;0019&rsqb;</number> In order that the manner in which the above-recited and other advantages of the invention are obtained will be readily understood, a more particular description of the invention briefly described above will be rendered by reference to specific embodiments thereof which are illustrated in the appended drawings. Understanding that these drawings depict only typical embodiments of the invention and are not therefore to be considered to be limiting of its scope, the invention will be described and explained with additional specificity and detail through the use of the accompanying drawings in which: </paragraph>
<paragraph id="P-0020" lvl="0"><number>&lsqb;0020&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1</cross-reference> is a block diagram view of a movable body suspended in a magnetic bearing system according to the present invention; </paragraph>
<paragraph id="P-0021" lvl="0"><number>&lsqb;0021&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 2</cross-reference> is a flow chart of a method of positioning a suspended movable body according to the present invention; </paragraph>
<paragraph id="P-0022" lvl="0"><number>&lsqb;0022&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3</cross-reference> is a block diagram of a magnetically suspended pump apparatus; </paragraph>
<paragraph id="P-0023" lvl="0"><number>&lsqb;0023&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 4</cross-reference> is a block diagram of the magnetically suspended pump apparatus of <cross-reference target="DRAWINGS">FIG. 3</cross-reference>; and </paragraph>
<paragraph id="P-0024" lvl="0"><number>&lsqb;0024&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 5</cross-reference> is a block diagram of the sensor offset compensation algorithm of <cross-reference target="DRAWINGS">FIG. 4</cross-reference>. </paragraph>
</section>
</brief-description-of-drawings>
<detailed-description>
<section>
<heading lvl="1">DETAILED DESCRIPTION OF EMBODIMENTS </heading>
<paragraph id="P-0025" lvl="0"><number>&lsqb;0025&rsqb;</number> Certain embodiments of a system in accordance with the invention are now described with reference to the FIGS. <highlight><bold>1</bold></highlight>-<highlight><bold>5</bold></highlight>, where like reference numbers indicate identical or functionally similar elements. The components of the present invention, as generally described and illustrated in the Figures, may be implemented in a wide variety of configurations. Thus, the following more detailed description of the embodiments of the system and method of the present invention, as represented in the FIGS. <highlight><bold>1</bold></highlight>-<highlight><bold>5</bold></highlight>, is not intended to limit the scope of the invention, as claimed, but is merely representative of present embodiments of the invention. </paragraph>
<paragraph id="P-0026" lvl="0"><number>&lsqb;0026&rsqb;</number> Various components of the invention are described herein as &ldquo;modules.&rdquo; In various embodiments, the modules maybe implemented as software, hardware, firmware, electronic circuits, or any combination thereof. For example, as used herein, a module may include any type of computer instruction or computer executable code located within a memory device and/or transmitted as electronic signals over a system bus or network. An identified module may, for instance, comprise one or more physical or logical blocks of computer instructions, which may be organized as an object, procedure, function, or the like. </paragraph>
<paragraph id="P-0027" lvl="0"><number>&lsqb;0027&rsqb;</number> Nevertheless, the identified modules need not be located together, but may comprise disparate instructions stored in different locations, which together implement the described functionality of the module. Indeed, a module may comprise a single instruction, or many instructions, and may even be distributed over several different code segments, among different programs, and across several memory devices. </paragraph>
<paragraph id="P-0028" lvl="0"><number>&lsqb;0028&rsqb;</number> As used herein, the term executable code, or merely &ldquo;executable,&rdquo; is intended to include any type of computer instruction and computer executable code that may be located within a memory device and/or transmitted as electronic signals over a system bus, electronic circuit, or network. An identified module of executable code may, for instance, comprise one or more physical or logical blocks of computer instructions which may, for instance, be organized as an object, procedure, or function. Nevertheless, the executables of an identified module need not be located together, but may comprise disparate instructions stored in different locations which together comprise the module and achieve the purpose stated for the module. Indeed, an executable may be a single instruction, or many instructions, and may even be distributed over several different code segments, among different programs, and across several memory devices. </paragraph>
<paragraph id="P-0029" lvl="0"><number>&lsqb;0029&rsqb;</number> Similarly, operational data may be identified and illustrated herein within modules, and may be embodied in any suitable form and organized within any suitable type of data structure to be used, produced, or operated on during execution of an executable. The operational data may be collected as a single data set, or may be distributed over different locations including over different storage devices, and may at least partially exist merely as electronic signals on a system bus, electronic circuit, or network. </paragraph>
<paragraph id="P-0030" lvl="0"><number>&lsqb;0030&rsqb;</number> With particular reference to <cross-reference target="DRAWINGS">FIG. 1, a</cross-reference> magnetic bearing system is generally designated at <highlight><bold>10</bold></highlight>. The system <highlight><bold>10</bold></highlight> includes a movable body <highlight><bold>12</bold></highlight> suspended by a magnetic bearing system <highlight><bold>14</bold></highlight>. The magnetic bearing system <highlight><bold>14</bold></highlight> may include actively controlled magnets or passively controlled magnets. In one embodiment, permanent magnets <highlight><bold>15</bold></highlight> and <highlight><bold>16</bold></highlight> cooperate with each other and with an electromagnet <highlight><bold>18</bold></highlight> to suspend the movable body <highlight><bold>12</bold></highlight>. The moveable body <highlight><bold>12</bold></highlight> may contain an annular permanent magnet <highlight><bold>16</bold></highlight> acting as an inner race which interacts with the permanent magnet <highlight><bold>15</bold></highlight>, acting as an outer race, to suspend the moveable body <highlight><bold>12</bold></highlight>. The permanent magnets are employed to carry all static loads including those due to gravity. An electromagnet <highlight><bold>18</bold></highlight> also known as a coil, serves to stabilize the moveable body <highlight><bold>12</bold></highlight>. The magnetic bearing system and the moveable body are axis symmetric about an axial direction axis <highlight><bold>20</bold></highlight>. The permanent magnets are employed to carry all static loads. The electromagnets are used for controlling the position of the body in the axial direction <highlight><bold>20</bold></highlight>. </paragraph>
<paragraph id="P-0031" lvl="0"><number>&lsqb;0031&rsqb;</number> The system <highlight><bold>10</bold></highlight> includes a sensor <highlight><bold>22</bold></highlight> for measuring the displacement of the movable body <highlight><bold>12</bold></highlight> and providing a displacement output <highlight><bold>24</bold></highlight>. The sensor <highlight><bold>22</bold></highlight> may be configured to convert the displacement output <highlight><bold>24</bold></highlight>, which in one embodiment is measured in millimeters, into a voltage. It will be appreciated that in electromagnetic systems, voltages may be easier to adjust and use to position the movable body <highlight><bold>12</bold></highlight>. The sensor <highlight><bold>22</bold></highlight> may operate according to optical, induction or capacitance principles to determine the position of the movable body <highlight><bold>12</bold></highlight>. </paragraph>
<paragraph id="P-0032" lvl="0"><number>&lsqb;0032&rsqb;</number> The system <highlight><bold>10</bold></highlight> also includes a sensor offset compensation module <highlight><bold>26</bold></highlight> which is configured to receive the displacement output <highlight><bold>24</bold></highlight> from the sensor <highlight><bold>22</bold></highlight>. It will be appreciated by those of skill in the art that over time, the sensor may develop a sensor offset, which becomes a property of the displacement output <highlight><bold>24</bold></highlight>. The sensor offset compensation module <highlight><bold>26</bold></highlight> is configured to adjust the displacement output <highlight><bold>24</bold></highlight> to account for the sensor offset. The sensor offset compensation module <highlight><bold>26</bold></highlight> provides an estimated sensor offset and adjusts the displacement output <highlight><bold>24</bold></highlight> by the estimated sensor offset to create an adjusted displacement output <highlight><bold>28</bold></highlight>. The sensor offset compensation module <highlight><bold>26</bold></highlight> maybe configured to store a plurality of displacement outputs <highlight><bold>24</bold></highlight> repeatedly measured over a period of time. The repeated measurements may be taken of the movable body <highlight><bold>12</bold></highlight> as part of an ongoing offset estimation process. </paragraph>
<paragraph id="P-0033" lvl="0"><number>&lsqb;0033&rsqb;</number> In one embodiment, the sensor offset compensation module <highlight><bold>26</bold></highlight> selectively stores a displacement output <highlight><bold>24</bold></highlight> by comparing a variance of the displacement outputs against a predetermined threshold to determine a start time and an end time for storing the displacement offsets. If there is a lot of variance in the displacement outputs, the offset compensation module <highlight><bold>26</bold></highlight> may wait until there is less variance to store displacement outputs <highlight><bold>24</bold></highlight>. In this way, only displacement outputs <highlight><bold>24</bold></highlight> that reflect steady state conditions are stored. In another embodiment, all displacement outputs <highlight><bold>24</bold></highlight> may be stored, but only a selective plurality of displacement outputs <highlight><bold>24</bold></highlight> are used to estimate the sensor offset. The displacement outputs <highlight><bold>24</bold></highlight> are selected for use by comparing a magnitude of each displacement output <highlight><bold>24</bold></highlight> against a predetermined threshold. Displacement outputs <highlight><bold>24</bold></highlight> that are unusually high or low may not be used, thus increasing the accuracy of the sensor offset estimate. </paragraph>
<paragraph id="P-0034" lvl="0"><number>&lsqb;0034&rsqb;</number> The sensor offset compensation module <highlight><bold>26</bold></highlight> estimates the sensor offset by taking an average value of the stored displacement outputs <highlight><bold>24</bold></highlight>. In one embodiment, the sensor offset compensation module <highlight><bold>26</bold></highlight> takes a weighted average by weighting certain displacement outputs <highlight><bold>24</bold></highlight> depending on the variance of the outputs in a similar segment of time. The sensor <highlight><bold>22</bold></highlight> may take continual measurements and provide multiple displacement outputs <highlight><bold>24</bold></highlight>. The offset compensation module <highlight><bold>26</bold></highlight> may take a moving average of a predetermined number of displacement outputs <highlight><bold>24</bold></highlight> by continually averaging the last predetermined number of stored displacement outputs <highlight><bold>24</bold></highlight>. For example, if the predetermined number of stored displacement outputs <highlight><bold>24</bold></highlight> is twenty, when the twenty-first displacement output <highlight><bold>24</bold></highlight> is input into the offset compensation module <highlight><bold>26</bold></highlight>, the first displacement output <highlight><bold>24</bold></highlight> maybe dropped and displacement outputs two through twenty-one may be used to take the average. In another embodiment, the sensor offset compensation module <highlight><bold>26</bold></highlight> estimates the sensor offset by determining a median value of the stored displacement outputs <highlight><bold>24</bold></highlight>. In yet another embodiment, the sensor offset compensation module <highlight><bold>26</bold></highlight> estimates the sensor offset by determining the mode value of the stored displacement outputs <highlight><bold>24</bold></highlight>. As will be discussed in greater detail below, because the movable body <highlight><bold>12</bold></highlight> is suspended near equilibrium, the magnitude of the displacement output is close to the amount of sensor offset. Accordingly, averaging the displacement outputs <highlight><bold>24</bold></highlight> provides a good estimate of the sensor offset. It will be appreciated by those of skill in the art that other algorithms may be used to approximate the sensor offset. </paragraph>
<paragraph id="P-0035" lvl="0"><number>&lsqb;0035&rsqb;</number> Displacement outputs <highlight><bold>24</bold></highlight> maybe stored in nonvolatile memory <highlight><bold>30</bold></highlight>. The memory <highlight><bold>30</bold></highlight> may also be part of a CPU or computer and may store executable files for driving the system and running various modules or algorithms. In this configuration, various bus lines or other communication paths (not shown) may be used to communicate between the memory <highlight><bold>30</bold></highlight> and each of the various modules in the system <highlight><bold>10</bold></highlight>. Input and output into the memory <highlight><bold>30</bold></highlight> may be facilitated by a digital-to-analog or analog-to-digital converters. In another embodiment, each module, may store its own executable files. In the embodiment of <cross-reference target="DRAWINGS">FIG. 1</cross-reference>, the system <highlight><bold>10</bold></highlight> may include analog to digital and digital to analog converters to facilitate interaction between various digital and analog components of the modules. The memory <highlight><bold>30</bold></highlight> may also store adjusted displacement outputs <highlight><bold>28</bold></highlight> or estimated sensor outputs. The adjusted displacement outputs <highlight><bold>28</bold></highlight> or estimated sensor outputs may be recalled from the memory <highlight><bold>30</bold></highlight> and used to position the movable body <highlight><bold>12</bold></highlight> to a point of substantial axial equilibrium during a reset, reboot, restart, or similar power up of the system <highlight><bold>10</bold></highlight>. In one embodiment, an initial estimated sensor offset may be stored in the memory <highlight><bold>30</bold></highlight> during assembly of the system <highlight><bold>10</bold></highlight>. </paragraph>
<paragraph id="P-0036" lvl="0"><number>&lsqb;0036&rsqb;</number> The system <highlight><bold>10</bold></highlight> may also include a position control module <highlight><bold>36</bold></highlight> which receives and uses the adjusted displacement output <highlight><bold>28</bold></highlight> of the sensor offset compensation module <highlight><bold>26</bold></highlight> to approximate a point of substantial axial equilibrium of the movable body <highlight><bold>12</bold></highlight>. In one embodiment, the position controller module <highlight><bold>36</bold></highlight> is a virtual zero power controller, or &ldquo;VZP.&rdquo; Any of a known variety of VZP controllers may be used. All VZP controllers are characterized by a small output in response to low frequency sinusoidal inputs. Linear VZP controllers typically have a transfer function of zero at zero. </paragraph>
<paragraph id="P-0037" lvl="0"><number>&lsqb;0037&rsqb;</number> An actuator module or actuator <highlight><bold>38</bold></highlight>, may covert an output <highlight><bold>40</bold></highlight> of the position control module <highlight><bold>36</bold></highlight> into a force for positioning the movable body <highlight><bold>12</bold></highlight> to the point of substantial axial equilibrium in the magnetic bearing system. In one embodiment, the actuator module <highlight><bold>38</bold></highlight> is the electromagnet <highlight><bold>18</bold></highlight> which provides an electromagnetic force to position the movable body <highlight><bold>12</bold></highlight> to the point of substantial axial equilibrium. The actuator module <highlight><bold>38</bold></highlight> may include an amplifier. It will be appreciated by those of skill in the art that in alternative embodiments, the force created by the actuator may be an electrostatic force, a fluid force, a contact force, a mechanical force or other force to position the movable body <highlight><bold>12</bold></highlight>. The position controller may include an amplifier when the output <highlight><bold>40</bold></highlight> is a high power signal. </paragraph>
<paragraph id="P-0038" lvl="0"><number>&lsqb;0038&rsqb;</number> Referring now to <cross-reference target="DRAWINGS">FIG. 2, a</cross-reference> flowchart <highlight><bold>50</bold></highlight> for a method of positioning a movable body <highlight><bold>12</bold></highlight> suspended in a magnetic bearing system having a displacement sensor <highlight><bold>22</bold></highlight> is shown. The method may include measuring <highlight><bold>52</bold></highlight> the axial position of the movable body <highlight><bold>12</bold></highlight> with the sensor <highlight><bold>22</bold></highlight> to produce a displacement output <highlight><bold>24</bold></highlight>. In one embodiment, the measurement is taken of the movable body <highlight><bold>12</bold></highlight> when it is suspended, or in a levitating position. A sensor offset in the displacement output <highlight><bold>24</bold></highlight> is estimated <highlight><bold>54</bold></highlight>. The estimated sensor offset is stored in nonvolatile memory. The displacement output <highlight><bold>24</bold></highlight> is adjusted <highlight><bold>56</bold></highlight> for a sensor offset using the estimated displacement output. The adjusted displacement output may then be input <highlight><bold>60</bold></highlight> into a position controller and converted <highlight><bold>62</bold></highlight> to a force for positioning the movable body <highlight><bold>12</bold></highlight>. The movable body <highlight><bold>12</bold></highlight> may then be positioned <highlight><bold>64</bold></highlight> with the force and the process is repeated <highlight><bold>66</bold></highlight>. </paragraph>
<paragraph id="P-0039" lvl="0"><number>&lsqb;0039&rsqb;</number> Estimating <highlight><bold>54</bold></highlight> the sensor offset includes storing a plurality of displacement outputs <highlight><bold>24</bold></highlight> over a period of time. The period of time may be determined by comparing a variance of the plurality of displacement outputs <highlight><bold>24</bold></highlight> against a predetermined threshold to determine a start time and an end time. The threshold may be set such that if the displacement outputs <highlight><bold>24</bold></highlight> are varying more than is desired, the storing of displacement outputs may not yet start, or if already started, may temporarily end until displacement outputs within the predetermined variance range are measured. Alternatively, all displacement outputs <highlight><bold>24</bold></highlight> may be stored and selective displacement outputs <highlight><bold>24</bold></highlight> may be used for the estimating <highlight><bold>54</bold></highlight> the sensor offset, according to how the measured displacement output <highlight><bold>24</bold></highlight> compare to a predetermined threshold. In one embodiment, estimating <highlight><bold>54</bold></highlight> the sensor offset includes taking an average value of stored displacement outputs <highlight><bold>24</bold></highlight>. The sensor offset may also be estimated <highlight><bold>54</bold></highlight> by taking a moving or continual average of a predetermined number of stored displacement outputs <highlight><bold>24</bold></highlight>. This may be done by averaging a preselected number or set of displacement outputs <highlight><bold>24</bold></highlight> each time a new displacement output <highlight><bold>24</bold></highlight> is added to the set and the oldest measured displacement output <highlight><bold>24</bold></highlight> is dropped from the set. The sensor offset may be estimated <highlight><bold>54</bold></highlight> by a weighted average where displacement output <highlight><bold>24</bold></highlight> values are scaled according to a predetermined formula. For example, displacement output <highlight><bold>24</bold></highlight> that barely fall within the acceptable range of outputs may be given less weight than those displacement output <highlight><bold>24</bold></highlight> which are solidly within the predetermined range of acceptable displacement outputs. It will be appreciated by those of skill in the art that a variety of ways may be employed to estimate the sensor offset in the displacement output <highlight><bold>24</bold></highlight> value. These may include using a median value of the stored displacement outputs <highlight><bold>24</bold></highlight> or a mode value of the stored displacement outputs <highlight><bold>24</bold></highlight>. </paragraph>
<paragraph id="P-0040" lvl="0"><number>&lsqb;0040&rsqb;</number> In an alternative embodiment, a latest displacement output may be adjusted <highlight><bold>56</bold></highlight> by the estimated sensor offset and stored in nonvolatile memory <highlight><bold>30</bold></highlight>. It will be appreciated that in practice, forces are continually acting on the movable body <highlight><bold>12</bold></highlight> and the measured position or displacement of the movable body <highlight><bold>12</bold></highlight> may be different with each measurement <highlight><bold>52</bold></highlight>. Additionally, the sensor offset may ebb and flow as the sensor drift phenomenon slowly affects the sensor reading. Storing <highlight><bold>55</bold></highlight> the latest estimate used to adjust the displacement output <highlight><bold>24</bold></highlight>, or the latest adjusted displacement output <highlight><bold>28</bold></highlight> in nonvolatile memory <highlight><bold>30</bold></highlight> allows the latest, and presumably the best correction or adjustment to be used to account for a sensor offset in the sensor reading to be used in a restart, reboot, or reset situation. </paragraph>
<paragraph id="P-0041" lvl="0"><number>&lsqb;0041&rsqb;</number> Inputting <highlight><bold>60</bold></highlight> the adjusted displacement output <highlight><bold>28</bold></highlight> into a body position controller module <highlight><bold>36</bold></highlight> for determining how best to position the movable body <highlight><bold>12</bold></highlight> to a point of substantial axial equilibrium may include recalling the stored adjusted displacement output <highlight><bold>28</bold></highlight> and/or estimated sensor offset. </paragraph>
<paragraph id="P-0042" lvl="0"><number>&lsqb;0042&rsqb;</number> Converting <highlight><bold>62</bold></highlight> the adjusted displacement output to a force for positioning the movable body may include mechanically creating a force to substantially position the movable body at the point of substantial axial equilibrium. In one embodiment, as discussed in more detail below, converting <highlight><bold>62</bold></highlight> the adjusted displacement output to a force for positioning <highlight><bold>64</bold></highlight> the movable body <highlight><bold>12</bold></highlight> comprises electronically creating a force to position the movable body at the point of substantial axial equilibrium. </paragraph>
<paragraph id="P-0043" lvl="0"><number>&lsqb;0043&rsqb;</number> Referring now to <cross-reference target="DRAWINGS">FIG. 3</cross-reference>, the magnetic bearing system in one embodiment of the present invention, is a pump <highlight><bold>110</bold></highlight>. This magnetically suspended pump or pump apparatus includes a housing <highlight><bold>112</bold></highlight> having an inlet port <highlight><bold>114</bold></highlight> for receiving fluid and an outlet port <highlight><bold>116</bold></highlight> for discharging fluid. A rotor <highlight><bold>118</bold></highlight> is positioned within the housing <highlight><bold>112</bold></highlight> for pumping blood or fluid between the inlet port <highlight><bold>114</bold></highlight> and the outlet port <highlight><bold>116</bold></highlight>. The system <highlight><bold>110</bold></highlight> also includes a plurality of permanent magnets <highlight><bold>120</bold></highlight> for passively controlling the position of the rotor radially, and the pitch and yaw of the rotor. An electromagnet <highlight><bold>122</bold></highlight> actively controls the position of the rotor in the axial direction. The permanent magnets <highlight><bold>120</bold></highlight> are employed to carry all static loads. The electromagnets <highlight><bold>122</bold></highlight> are used for controlling the position of the rotor <highlight><bold>118</bold></highlight> in a particular direction. It will be appreciated that support of the rotor <highlight><bold>118</bold></highlight> requires control of six degrees of freedom: three translations long the x-axis <highlight><bold>124</bold></highlight>, y-axis <highlight><bold>126</bold></highlight>, and z-axis <highlight><bold>128</bold></highlight>, and three rotational displacements about those axis M<highlight><subscript>x</subscript></highlight>, <highlight><bold>130</bold></highlight>, M<highlight><subscript>y</subscript></highlight>, <highlight><bold>132</bold></highlight>, and M<highlight><subscript>z </subscript></highlight><highlight><bold>134</bold></highlight>. In the illustrated embodiment, the electromagnet <highlight><bold>122</bold></highlight> controls the axial direction of the rotor <highlight><bold>118</bold></highlight>, or movement along the x-axis <highlight><bold>124</bold></highlight>. </paragraph>
<paragraph id="P-0044" lvl="0"><number>&lsqb;0044&rsqb;</number> The rotational displacement M<highlight><subscript>x </subscript></highlight><highlight><bold>130</bold></highlight> of the rotor <highlight><bold>118</bold></highlight> about a central axis <highlight><bold>124</bold></highlight> is driven by a motor <highlight><bold>136</bold></highlight> magnetically coupled to the rotor <highlight><bold>118</bold></highlight> through a partition <highlight><bold>140</bold></highlight>. The motor <highlight><bold>136</bold></highlight> may be an electromagnetic motor or servo motor connected to a power source which may include a battery (not shown). Motor-driven, magnetically suspended rotors in a housing with inlet ports and outlet ports are known in the art and the axial and other suspension dynamics of the rotor may be configured in a number of ways to practice the teachings of this invention with different translational or rotational being actively or passively controlled. One such suitable configuration of magnetic bearings in a pump configuration to which the teachings of this invention can be applied is the HeartQuest&trade; heart pump manufactured by MedQuest Products, Inc. </paragraph>
<paragraph id="P-0045" lvl="0"><number>&lsqb;0045&rsqb;</number> The pump <highlight><bold>110</bold></highlight> may also include a sensor <highlight><bold>145</bold></highlight> for measuring the axial displacement of the rotor <highlight><bold>18</bold></highlight> and producing a displacement output <highlight><bold>147</bold></highlight>. In one embodiment the rotor <highlight><bold>118</bold></highlight> is measured in a suspended or levitating position. The sensor <highlight><bold>145</bold></highlight> may be configured to convert the displacement output <highlight><bold>147</bold></highlight> from a measure of distance into a voltage. It will be appreciated that minor corrections to the position of the rotor <highlight><bold>118</bold></highlight> are done by the electromagnet <highlight><bold>122</bold></highlight> which can alter the position of the rotor <highlight><bold>118</bold></highlight> by changing the voltage or current in coils of the electromagnet <highlight><bold>122</bold></highlight>. The rotor <highlight><bold>118</bold></highlight> position may be measured while it is levitating. In one alternative embodiment, measurements may be taken of the displacement of the rotor in a plurality of levitating or non-levitating positions to produce a plurality of displacement outputs. These outputs may then be used to estimate a sensor offset. </paragraph>
<paragraph id="P-0046" lvl="0"><number>&lsqb;0046&rsqb;</number> An offset compensation module <highlight><bold>146</bold></highlight> adjusts the output <highlight><bold>147</bold></highlight> of the sensor <highlight><bold>145</bold></highlight> to account for sensor offset. The offset compensation module <highlight><bold>146</bold></highlight> estimates a sensor offset and adjusts the displacement output <highlight><bold>147</bold></highlight> by the estimated sensor offset to create an adjusted displacement output <highlight><bold>148</bold></highlight>. As discussed in greater detail below, the estimation of the sensor offset may be made by a compensation algorithm <highlight><bold>157</bold></highlight> which averages a plurality of stored displacement outputs <highlight><bold>147</bold></highlight> contained in the system <highlight><bold>110</bold></highlight> from the factory or stored with each measurement of the rotor <highlight><bold>118</bold></highlight> position. The system <highlight><bold>110</bold></highlight> is configured to repeatedly take rotor <highlight><bold>118</bold></highlight> position measurements and make modifications or adjustments to the rotor <highlight><bold>118</bold></highlight> position. </paragraph>
<paragraph id="P-0047" lvl="0"><number>&lsqb;0047&rsqb;</number> In one embodiment, the offset compensation module <highlight><bold>146</bold></highlight> compares a variance of the plurality of displacement outputs <highlight><bold>147</bold></highlight> against a predetermined threshold to determine a start time and an end time for taking measurements. As discussed above, if there is a lot of variance in the displacement outputs, the offset compensation module <highlight><bold>146</bold></highlight> may wait until there is less variance to store displacement outputs <highlight><bold>147</bold></highlight>. In this way, only displacement outputs <highlight><bold>147</bold></highlight> that are within a certain range are stored. In another embodiment, all displacement outputs <highlight><bold>147</bold></highlight> may be stored, but only a selective plurality of displacement outputs <highlight><bold>147</bold></highlight> are used to estimate the sensor offset. The sensor offset compensation module <highlight><bold>146</bold></highlight> may estimate the sensor offset in a number of ways, including taking an average of one or more different displacement outputs <highlight><bold>147</bold></highlight>, taking a weighted or a moving average of one or more displacement outputs <highlight><bold>147</bold></highlight>, or determining the median or mode value of one or more displacement outputs <highlight><bold>147</bold></highlight>. </paragraph>
<paragraph id="P-0048" lvl="0"><number>&lsqb;0048&rsqb;</number> A most recent adjusted displacement output <highlight><bold>148</bold></highlight> or estimated sensor offset maybe stored in memory <highlight><bold>150</bold></highlight>. The memory <highlight><bold>150</bold></highlight> may include nonvolatile memory <highlight><bold>152</bold></highlight>, random access memory <highlight><bold>154</bold></highlight>, or other types of memory or storage devices, including, but not limited to, read only memory. Individual offset estimates may also be stored in memory <highlight><bold>150</bold></highlight>, as well as displacement outputs <highlight><bold>147</bold></highlight> or other data used to derive an estimate of the sensor offset. It will also be appreciated that each module may include its own memory where executable files are stored for controlling the operation of a particular module. </paragraph>
<paragraph id="P-0049" lvl="0"><number>&lsqb;0049&rsqb;</number> In practice, forces are continually acting on the rotor <highlight><bold>118</bold></highlight> and the measured position or displacement of the rotor <highlight><bold>118</bold></highlight> may be different with each measurement by the sensor <highlight><bold>145</bold></highlight>. Additionally, the sensor offset may ebb and flow as the sensor drift phenomenon slowly affects the sensor reading. Storing a latest adjusted displacement output <highlight><bold>147</bold></highlight> in nonvolatile memory <highlight><bold>150</bold></highlight> allows the latest, and presumably the best correction or adjustment to be used or recalled to account for a sensor offset in the displacement output <highlight><bold>147</bold></highlight> when restarting, reboot, resetting, or otherwise powering up the system. </paragraph>
<paragraph id="P-0050" lvl="0"><number>&lsqb;0050&rsqb;</number> The memory <highlight><bold>150</bold></highlight> maybe part of a computer <highlight><bold>156</bold></highlight> which may include a processor <highlight><bold>158</bold></highlight> for controlling the function of the system <highlight><bold>110</bold></highlight> and/or one or more modules or executable files in the system <highlight><bold>110</bold></highlight>. It will be appreciated by those of skill in the art that output <highlight><bold>147</bold></highlight> from the sensor module or other modules to the computer and from the computer to one or more modules may require an analog-to-digital or digital-to-analog interface <highlight><bold>160</bold></highlight>. It will also be appreciated by those of skill in the art that the computer <highlight><bold>156</bold></highlight> and modules may be contained within the housing <highlight><bold>112</bold></highlight>. </paragraph>
<paragraph id="P-0051" lvl="0"><number>&lsqb;0051&rsqb;</number> The offset compensation module <highlight><bold>146</bold></highlight> may input the adjusted displacement output <highlight><bold>148</bold></highlight> into a rotor position controller <highlight><bold>162</bold></highlight> configured to determine the point of substantial axial equilibrium of the rotor <highlight><bold>118</bold></highlight>. In one embodiment, the rotor position controller <highlight><bold>162</bold></highlight> is a virtual zero power controller or VZP controller <highlight><bold>162</bold></highlight>. The VZP Controller <highlight><bold>162</bold></highlight> receives the adjusted displacement output <highlight><bold>148</bold></highlight> and stabilizes the rotor <highlight><bold>118</bold></highlight> within the housing <highlight><bold>112</bold></highlight>. The VZP Controller and has low or zero gain at direct current. By adjusting the displacement output <highlight><bold>147</bold></highlight>, the measure of rotor <highlight><bold>118</bold></highlight> position is close to equilibrium in the axial direction. Accordingly, the VZP Controller <highlight><bold>162</bold></highlight> does not have to work as hard to determine where the equilibrium position is. </paragraph>
<paragraph id="P-0052" lvl="0"><number>&lsqb;0052&rsqb;</number> An actuator module or actuator <highlight><bold>164</bold></highlight> uses the output <highlight><bold>166</bold></highlight> from the VZP Controller <highlight><bold>162</bold></highlight> to create a force for positioning the rotor <highlight><bold>118</bold></highlight>. In one embodiment, the actuator <highlight><bold>164</bold></highlight> is the electromagnet <highlight><bold>122</bold></highlight> and the force is a electronically created or is an electromagnetic force. The rotor <highlight><bold>118</bold></highlight> maybe positioned by adjusting the voltage to the electromagnet <highlight><bold>122</bold></highlight> to create a stronger or weaker electronic field. The actuator <highlight><bold>164</bold></highlight> or position controller <highlight><bold>162</bold></highlight> may also include a current amplifier. It will be appreciated by those of skill in the art that in alternative embodiments, the force created by the actuator may be an electrostatic force, a fluid force, a contact force, a mechanical force or other force to position the movable body <highlight><bold>12</bold></highlight>. For example the actuator <highlight><bold>164</bold></highlight> may create a force by moving a plunger (not shown) near the rotor <highlight><bold>118</bold></highlight>. </paragraph>
<paragraph id="P-0053" lvl="0"><number>&lsqb;0053&rsqb;</number> There are several forces which act upon the rotor <highlight><bold>118</bold></highlight>. These may include fluid forces, gravitational forces, and dynamic forces. The fluid forces are due to fluid pressures acting on the rotor and fluid passes from the inlet port <highlight><bold>114</bold></highlight> to the outlet port <highlight><bold>116</bold></highlight> and the changes in momentum as the flow direction is changed. The gravitational forces are due to the difference between the weight of the rotor <highlight><bold>118</bold></highlight> and the buoyant force, in the fluid, acting on the rotor <highlight><bold>118</bold></highlight> in different orientations. Dynamic forces may act upon the rotor <highlight><bold>118</bold></highlight> in a situation where the pump <highlight><bold>110</bold></highlight> is in human body and can experience sudden motions, impact after a fall, periods of intense exercise causing changes in blood pressure, and the like. </paragraph>
<paragraph id="P-0054" lvl="0"><number>&lsqb;0054&rsqb;</number> Referring now to <cross-reference target="DRAWINGS">FIG. 4, a</cross-reference> block diagram of a circuit <highlight><bold>180</bold></highlight> of the pump <highlight><bold>110</bold></highlight> (<cross-reference target="DRAWINGS">FIG. 3</cross-reference>) of present invention is shown. The circuit <highlight><bold>180</bold></highlight> illustrates the rotor axial dynamics <highlight><bold>170</bold></highlight> of the pump <highlight><bold>110</bold></highlight>. The sensor <highlight><bold>145</bold></highlight>, virtual zero power (VZP) controller <highlight><bold>162</bold></highlight>, and the actuator <highlight><bold>164</bold></highlight> are also illustrated. The circuit may also interact with the computer <highlight><bold>156</bold></highlight>, which in one embodiment, includes a compensation algorithm <highlight><bold>184</bold></highlight>. </paragraph>
<paragraph id="P-0055" lvl="0"><number>&lsqb;0055&rsqb;</number> The VZP controller helps balance the forces acting on the rotor <highlight><bold>118</bold></highlight> (<cross-reference target="DRAWINGS">FIG. 3</cross-reference>). These forces may include a fluid force F<highlight><subscript>fluid </subscript></highlight><highlight><bold>188</bold></highlight>, an actuator force F<highlight><subscript>actuator </subscript></highlight><highlight><bold>190</bold></highlight> generated by the actuator <highlight><bold>164</bold></highlight>, and a force due to the magnetic bearings in the axial direction F<highlight><subscript>bearing,axial </subscript></highlight><highlight><bold>192</bold></highlight>. These forces combine to produce a net force <highlight><bold>194</bold></highlight> on the rotor <highlight><bold>118</bold></highlight> in the axial direction. The 1/ms block <highlight><bold>196</bold></highlight> combined with the 1/s block <highlight><bold>198</bold></highlight> illustrate the rotor mass dynamics under Newton&apos;s law, where (m&equals;the mass of the rotor <highlight><bold>118</bold></highlight>) and (s&equals;the laplace transform variable). The blocks <highlight><bold>196</bold></highlight> and <highlight><bold>198</bold></highlight> combine to output the position <highlight><bold>200</bold></highlight> of the rotor in the axial direction relative to the axial equilibrium point of the magnetic bearings, or X<highlight><subscript>rotor </subscript></highlight><highlight><bold>200</bold></highlight>. A feedback loop <highlight><bold>202</bold></highlight> inputs into the K<highlight><subscript>bearing </subscript></highlight>box <highlight><bold>204</bold></highlight>, where K<highlight><subscript>bearing </subscript></highlight>is the axial stiffness of the permanent magnet bearings acting on the position X<highlight><subscript>rotor </subscript></highlight><highlight><bold>200</bold></highlight> of the rotor <highlight><bold>118</bold></highlight> in the axial direction. </paragraph>
<paragraph id="P-0056" lvl="0"><number>&lsqb;0056&rsqb;</number> The sensor <highlight><bold>145</bold></highlight> is illustrated at the circuit level in <cross-reference target="DRAWINGS">FIG. 4</cross-reference> as a summation block <highlight><bold>210</bold></highlight> in combination with a K<highlight><subscript>sensor </subscript></highlight>block <highlight><bold>212</bold></highlight>, where K<highlight><subscript>sensor </subscript></highlight>or is the sensor <highlight><bold>145</bold></highlight> gain. The summation block <highlight><bold>210</bold></highlight> combines the axial position of the rotor, X<highlight><subscript>rotor </subscript></highlight><highlight><bold>200</bold></highlight>, with the sensor zero position <highlight><bold>214</bold></highlight>, or X<highlight><subscript>0</subscript></highlight>, the position of the rotor <highlight><bold>118</bold></highlight> where the sensor reading is zero. By way of illustrative example, if X<highlight><subscript>rotor </subscript></highlight><highlight><bold>200</bold></highlight> were equal to X<highlight><subscript>0 </subscript></highlight><highlight><bold>214</bold></highlight>, the output <highlight><bold>216</bold></highlight> of the summation block <highlight><bold>210</bold></highlight> would be zero. X<highlight><subscript>0 </subscript></highlight><highlight><bold>214</bold></highlight> is the offset of the sensor&apos;s &ldquo;zero position,&rdquo; which is a virtual place in space relative to the zero mechanical position of the rotor <highlight><bold>118</bold></highlight> where the rotor <highlight><bold>118</bold></highlight> is in unstable equilibrium. Accordingly, X<highlight><subscript>0 </subscript></highlight><highlight><bold>214</bold></highlight> is a property of the sensor <highlight><bold>145</bold></highlight>, not a reading from the sensor <highlight><bold>145</bold></highlight>. </paragraph>
<paragraph id="P-0057" lvl="0"><number>&lsqb;0057&rsqb;</number> The K<highlight><subscript>sensor </subscript></highlight>block <highlight><bold>212</bold></highlight>, compares the rotor position X<highlight><subscript>rotor </subscript></highlight><highlight><bold>200</bold></highlight> to the sensor zero position X<highlight><subscript>0 </subscript></highlight><highlight><bold>214</bold></highlight>, and multiplies that by a conversion factor that outputs a voltage. The K<highlight><subscript>sensor </subscript></highlight>block <highlight><bold>212</bold></highlight> converts the output <highlight><bold>216</bold></highlight> of the summation block <highlight><bold>210</bold></highlight> into the units, volts per meter. Thus, in one embodiment, the displacement output <highlight><bold>147</bold></highlight> of the sensor <highlight><bold>145</bold></highlight> may be viewed as linear according to the formula </paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>y&equals;kx&plus;b, </italic></highlight></in-line-formula></paragraph>
<paragraph id="P-0058" lvl="7"><number>&lsqb;0058&rsqb;</number> where &ldquo;x&rdquo; in the formula is the input to the sensor <highlight><bold>145</bold></highlight>, which is the position X<highlight><subscript>rotor </subscript></highlight><highlight><bold>200</bold></highlight> of the rotor <highlight><bold>118</bold></highlight>. &ldquo;Y&rdquo; in the formula represents the displacement output <highlight><bold>147</bold></highlight> of the sensor <highlight><bold>145</bold></highlight>. &ldquo;b&rdquo; may represent X<highlight><subscript>rotor </subscript></highlight><highlight><bold>200</bold></highlight> combined with the sensor offset represented by X<highlight><subscript>0 </subscript></highlight><highlight><bold>214</bold></highlight>. The scale factor &ldquo;k&rdquo; in the formula is represented by the K<highlight><subscript>sensor </subscript></highlight>block <highlight><bold>212</bold></highlight>. </paragraph>
<paragraph id="P-0059" lvl="0"><number>&lsqb;0059&rsqb;</number> The compensation algorithm <highlight><bold>184</bold></highlight> compensates or adjusts for the sensor offset X<highlight><subscript>0 </subscript></highlight><highlight><bold>214</bold></highlight> in the rotor position X<highlight><subscript>rotor </subscript></highlight><highlight><bold>200</bold></highlight>. The compensation algorithm <highlight><bold>184</bold></highlight> receives the displacement output <highlight><bold>147</bold></highlight> from the sensor <highlight><bold>145</bold></highlight> and as discussed in more detail below, uses it to estimate an adjustment to compensate for the sensor offset X<highlight><subscript>0 </subscript></highlight><highlight><bold>214</bold></highlight> in the rotor position X<highlight><subscript>rotor </subscript></highlight><highlight><bold>200</bold></highlight>. The estimate <highlight><bold>220</bold></highlight> output from the compensation algorithm <highlight><bold>184</bold></highlight> is combined with the sensor reading or displacement output <highlight><bold>147</bold></highlight> at the summing junction <highlight><bold>222</bold></highlight>. </paragraph>
<paragraph id="P-0060" lvl="0"><number>&lsqb;0060&rsqb;</number> Measurements of the rotor position X<highlight><subscript>rotor </subscript></highlight><highlight><bold>200</bold></highlight> are repeatedly taken over a period of time and used to continuously compensate for the sensor offset X<highlight><subscript>0 </subscript></highlight><highlight><bold>214</bold></highlight> in the rotor position X<highlight><subscript>rotor </subscript></highlight><highlight><bold>200</bold></highlight>. The measurements may be taken with the rotor <highlight><bold>118</bold></highlight> in a levitated state. These compensations or adjusted displacement outputs <highlight><bold>148</bold></highlight> are used by the VZP controller <highlight><bold>162</bold></highlight> during regular operation to adjust the position X<highlight><subscript>rotor </subscript></highlight><highlight><bold>200</bold></highlight> of the rotor <highlight><bold>118</bold></highlight>. They may also be stored, along with sensor offset estimates <highlight><bold>220</bold></highlight>, or displacement outputs <highlight><bold>147</bold></highlight>. In the event that the power source fails or the system freezes up and needs to reboot, reset, or otherwise restart, a most recent adjusted displacement output <highlight><bold>148</bold></highlight>, sensor offset estimate <highlight><bold>220</bold></highlight>, or displacement output <highlight><bold>147</bold></highlight>, which incorporates the most recent sensor offset X<highlight><subscript>0 </subscript></highlight><highlight><bold>214</bold></highlight>, is available for input into the VZP Controller <highlight><bold>162</bold></highlight>. </paragraph>
<paragraph id="P-0061" lvl="0"><number>&lsqb;0061&rsqb;</number> It will be appreciated by those of skill in the art that the VZP controller gains are selected such that the pump rotor <highlight><bold>118</bold></highlight> is actively levitated in the axial direction. The VZP Controller <highlight><bold>162</bold></highlight> can be designed by experiment, pole-placement design, or other methods known to those skilled in the art of controller design. Other control objectives such as transient performance and vibration suppression may also be used in the design. One feature of the VZP controller <highlight><bold>162</bold></highlight> is its low amplification of low-frequency sensor signals and its stabilization of the rotor <highlight><bold>118</bold></highlight> in the levitated position. In the embodiment of <cross-reference target="DRAWINGS">FIG. 4</cross-reference>, the controller <highlight><bold>162</bold></highlight> is configured such that the response to a constant input is zero after transients decay away. </paragraph>
<paragraph id="P-0062" lvl="0"><number>&lsqb;0062&rsqb;</number> The K<highlight><subscript>p </subscript></highlight>block <highlight><bold>224</bold></highlight> of the VZP Controller takes into account the destabilizing force caused by the K<highlight><subscript>bearing </subscript></highlight>box <highlight><bold>204</bold></highlight>. The K<highlight><subscript>p </subscript></highlight>block <highlight><bold>224</bold></highlight> acts like spring to reign in the forward or other displacement of the rotor <highlight><bold>118</bold></highlight> which will adjust the current into a K<highlight><subscript>actuator </subscript></highlight>block <highlight><bold>226</bold></highlight> to produce a force that pulls the rotor <highlight><bold>118</bold></highlight> back into equilibrium. </paragraph>
<paragraph id="P-0063" lvl="0"><number>&lsqb;0063&rsqb;</number> The K<highlight><subscript>d</subscript></highlight>S block <highlight><bold>228</bold></highlight> takes into account the velocity of the rotor <highlight><bold>118</bold></highlight> as is reacts to forces acting on it in the axial direction. The K<highlight><subscript>d</subscript></highlight>S block <highlight><bold>228</bold></highlight> acts as a shock absorber or a damper. If there is a velocity in the forward or other direction, then the K<highlight><subscript>d</subscript></highlight>S block <highlight><bold>228</bold></highlight> communicates with the K<highlight><subscript>actuator </subscript></highlight>block <highlight><bold>226</bold></highlight> to provide a suitable correcting force. </paragraph>
<paragraph id="P-0064" lvl="0"><number>&lsqb;0064&rsqb;</number> The K<highlight><subscript>I</subscript></highlight>/S block <highlight><bold>230</bold></highlight> is an integrator that looks at the output <highlight><bold>232</bold></highlight> of the K<highlight><subscript>p </subscript></highlight>block <highlight><bold>224</bold></highlight> to determine if a relatively constant current is being applied. An output <highlight><bold>238</bold></highlight> of the K<highlight><subscript>I</subscript></highlight>/S block <highlight><bold>230</bold></highlight> is added to the input of <highlight><bold>148</bold></highlight> of the VZP Controller <highlight><bold>162</bold></highlight>. If the output <highlight><bold>232</bold></highlight> of the K<highlight><subscript>p </subscript></highlight>block <highlight><bold>224</bold></highlight> creates a continual demand for current change, the actuator <highlight><bold>164</bold></highlight> is going to get hot and it can be assumed that there is an error in what the VZP Controller <highlight><bold>162</bold></highlight> has determined is the equilibrium point of the rotor position X<highlight><subscript>rotor </subscript></highlight><highlight><bold>200</bold></highlight> to be. Accordingly, the K<highlight><subscript>I</subscript></highlight>/S block <highlight><bold>230</bold></highlight> performs a function like an auto load leveler. The K<highlight><subscript>I</subscript></highlight>/S block <highlight><bold>230</bold></highlight> affects a change in the equilibrium point of the rotor <highlight><bold>118</bold></highlight>. Once the K<highlight><subscript>I</subscript></highlight>/S block <highlight><bold>230</bold></highlight> determines that the output <highlight><bold>232</bold></highlight> of the K<highlight><subscript>p </subscript></highlight>block <highlight><bold>224</bold></highlight> is a substantially constant current, the K<highlight><subscript>p </subscript></highlight>block <highlight><bold>224</bold></highlight> output <highlight><bold>232</bold></highlight> and an output <highlight><bold>234</bold></highlight> from the K<highlight><subscript>d</subscript></highlight>S block <highlight><bold>228</bold></highlight> are combined at the summing junction <highlight><bold>236</bold></highlight> to provide an input <highlight><bold>166</bold></highlight> to the K<highlight><subscript>actuator </subscript></highlight>block <highlight><bold>226</bold></highlight>. </paragraph>
<paragraph id="P-0065" lvl="0"><number>&lsqb;0065&rsqb;</number> For purposes of illustration, assume that the rotor <highlight><bold>118</bold></highlight> is in equilibrium and F<highlight><subscript>fluid </subscript></highlight><highlight><bold>188</bold></highlight> is zero. It follows that the axial bearing force, F<highlight><subscript>bearing,axial </subscript></highlight><highlight><bold>192</bold></highlight> is also zero. If this were not true, the rotor <highlight><bold>118</bold></highlight> would not be in substantial static equilibrium, since force <highlight><bold>194</bold></highlight> would be nonzero. Accordingly, with the F<highlight><subscript>fluid </subscript></highlight><highlight><bold>188</bold></highlight> at zero, the rotor position X<highlight><subscript>rotor </subscript></highlight><highlight><bold>200</bold></highlight> is also at zero, or in other words, the rotor position, X<highlight><subscript>rotor </subscript></highlight><highlight><bold>200</bold></highlight>, is in the &ldquo;neutral position&rdquo; with respect to the permanent magnets (<cross-reference target="DRAWINGS">FIG. 3</cross-reference>). </paragraph>
<paragraph id="P-0066" lvl="0"><number>&lsqb;0066&rsqb;</number> Since in the present example, we have set steady-state operation of the rotor position X<highlight><subscript>rotor </subscript></highlight><highlight><bold>200</bold></highlight> equal to zero, for purposes of illustration, the input <highlight><bold>216</bold></highlight> to the K<highlight><subscript>sensor </subscript></highlight>block <highlight><bold>212</bold></highlight> is minus the sensor offset, &minus;X<highlight><subscript>0</subscript></highlight>, and the output of the K<highlight><subscript>sensor </subscript></highlight>block <highlight><bold>212</bold></highlight> is (&minus;K<highlight><subscript>sensor</subscript></highlight>&times;X<highlight><subscript>0</subscript></highlight>), where K<highlight><subscript>sensor </subscript></highlight>is the amount of sensor <highlight><bold>145</bold></highlight> gain. Thus, the steady state output of the sensor <highlight><bold>145</bold></highlight> provides a &ldquo;sensor neutral&rdquo; or zero position relative to the stable neutral position of the rotor <highlight><bold>118</bold></highlight>. </paragraph>
<paragraph id="P-0067" lvl="0"><number>&lsqb;0067&rsqb;</number> In actual practice, however, the rotor position X<highlight><subscript>rotor </subscript></highlight><highlight><bold>200</bold></highlight> is subject to non-zero fluid forces <highlight><bold>188</bold></highlight> and electronic noise, and the rotor position X<highlight><subscript>rotor </subscript></highlight><highlight><bold>200</bold></highlight> only approximates the zero position, or the bearing equilibrium position in operation. Thus, the sensor displacement output <highlight><bold>147</bold></highlight> can only be used to derive an estimate of the &ldquo;sensor neutral&rdquo; position. Using &ldquo;X&ocirc;&rdquo; to designate an estimate of X<highlight><subscript>0</subscript></highlight>, the &ldquo;sensor neutral&rdquo; or zero position, this estimate can be used to adjust the output <highlight><bold>147</bold></highlight> of the sensor to compensate for the sensor offset error. As will be discussed in greater detail below, this is accomplished by the X<highlight><subscript>0 </subscript></highlight>compensation algorithm <highlight><bold>184</bold></highlight>, by adding &minus;(Ksensor&times;X&ocirc;) to the sensor output <highlight><bold>147</bold></highlight> at the summing junction <highlight><bold>222</bold></highlight>. Thus, with this compensation, the input to the VZP controller <highlight><bold>148</bold></highlight> is very close to zero. This is important during a power up, restart, reboot, or other type of reset, so that the VZP controller <highlight><bold>162</bold></highlight> need not correct for cumulative drift and offset in the sensor <highlight><bold>145</bold></highlight>. Moreover, the VZP integrator will typically include anti-windup features or other limits to improve transient response. If the sensor <highlight><bold>145</bold></highlight> offset is not corrected, it is possible that the VZP controller <highlight><bold>162</bold></highlight> cannot compensate for the offset. The result would be large power dissipation in the actuator <highlight><bold>164</bold></highlight> (<cross-reference target="DRAWINGS">FIG. 3</cross-reference>) or even failure of the system to levitate the rotor <highlight><bold>118</bold></highlight> (<cross-reference target="DRAWINGS">FIG. 3</cross-reference>). </paragraph>
<paragraph id="P-0068" lvl="0"><number>&lsqb;0068&rsqb;</number> In a heart pump application, for example, the typical behavior of the rotor <highlight><bold>118</bold></highlight> during operation in the heart pump will be: a) a transient motion during power-up of the device, where the VZP integrator output <highlight><bold>238</bold></highlight> is set to zero; b) relatively constant position where the X<highlight><subscript>rotor </subscript></highlight><highlight><bold>200</bold></highlight> is substantially at zero during rest periods of the person in whom the pump <highlight><bold>110</bold></highlight> is located, with some superimposed periodic motion due to the beating heart&mdash;the VZP integrator <highlight><bold>230</bold></highlight> is functioning during this period; or c) periods of larger rotor <highlight><bold>118</bold></highlight> motion in the axial direction during exercise due to body accelerations and larger variations in blood pressure&mdash;the VZP integrator is functioning during this period also. </paragraph>
<paragraph id="P-0069" lvl="0"><number>&lsqb;0069&rsqb;</number> Periods of rest may provide the best sensor or displacement output <highlight><bold>147</bold></highlight> data with which to estimate the sensor offset. Rest periods can be detected by measuring the variance of the rotor position X<highlight><subscript>rotor </subscript></highlight><highlight><bold>200</bold></highlight> and/or the peak-to-peak motion of the rotor position X<highlight><subscript>rotor </subscript></highlight><highlight><bold>200</bold></highlight>. During rest, the average value of X<highlight><subscript>rotor </subscript></highlight><highlight><bold>200</bold></highlight> approximates zero. Setting &lsqb;0,T&rsqb; to be an interval of rest where &ldquo;T&rdquo; equals a length of rest period, then one way to compute X&ocirc; is to average the displacement outputs <highlight><bold>147</bold></highlight> over &lsqb;0,T&rsqb; and use this to adjust the displacement output <highlight><bold>147</bold></highlight>. A minimum T may chosen so that noise is sufficiently averaged to zero and T can be any larger time provided that the person remains in rest. T should not be so long as to prevent updating X&ocirc; in response to sensor drift. </paragraph>
<paragraph id="P-0070" lvl="0"><number>&lsqb;0070&rsqb;</number> It may be the case that the mean value of F<highlight><subscript>fluid </subscript></highlight><highlight><bold>188</bold></highlight> adds a bias to the sensor offset estimate X&ocirc;. This bias can be made small by using permanent magnet bearings with a large value of K<highlight><subscript>bearing</subscript></highlight>. In addition, if the resting blood pressure of the patient in whom the pump is implanted is known, this effect can be compensated by offsetting the estimate X&ocirc; by the expected value of F<highlight><subscript>fluid</subscript></highlight>/K<highlight><subscript>bearing</subscript></highlight>. </paragraph>
<paragraph id="P-0071" lvl="0"><number>&lsqb;0071&rsqb;</number> As discussed above, there are alternative ways to estimate a sensor offset, or compensate for the sensor offset. In one alternative embodiment of the present invention, the estimate X&ocirc; is computed by a weighted moving average of the displacement output <highlight><bold>147</bold></highlight>, where the weight is inversely related to the displacement output <highlight><bold>147</bold></highlight> variance or other measure of variability. In another alternative embodiment, a low value for the VZP integrator <highlight><bold>130</bold></highlight> gain is set so that the integrator <highlight><bold>230</bold></highlight> itself forms an estimate of the sensor offset. If the integrator output <highlight><bold>238</bold></highlight> is saved following a failure or other restart sequence, it may serve the same function of adjusting the displacement output <highlight><bold>147</bold></highlight> by the value of X&ocirc;. </paragraph>
<paragraph id="P-0072" lvl="0"><number>&lsqb;0072&rsqb;</number> Referring now to <cross-reference target="DRAWINGS">FIG. 5</cross-reference>, one embodiment of the compensation algorithm <highlight><bold>184</bold></highlight> is shown. A displacement output <highlight><bold>147</bold></highlight> is input into a low pass filter <highlight><bold>250</bold></highlight>. The low pass filter <highlight><bold>250</bold></highlight> may store and average successive displacement outputs <highlight><bold>147</bold></highlight> input into the low pass filter <highlight><bold>250</bold></highlight>. The may be alternative ways to build a low-pass filter <highlight><bold>250</bold></highlight>. One way is to use a moving average where a predetermined number of successive displacement outputs <highlight><bold>147</bold></highlight> are input into the low-pass filter and stored. An average is then taken of the last predetermined number of displacement outputs <highlight><bold>147</bold></highlight>. The low-pass filter <highlight><bold>250</bold></highlight> may store and take a weighted average of displacement outputs <highlight><bold>147</bold></highlight>. The low-pass filter <highlight><bold>250</bold></highlight> may also store a predetermined number of displacement outputs <highlight><bold>147</bold></highlight> and determine a mode value or median value. The output <highlight><bold>252</bold></highlight> may then be sampled by a switch <highlight><bold>254</bold></highlight> provided that the person in whom the pump is located is at rest as determined by a rest detector <highlight><bold>256</bold></highlight>. The low-pass filter <highlight><bold>250</bold></highlight> output <highlight><bold>252</bold></highlight> is stored in a hold <highlight><bold>258</bold></highlight>, inverted at an inverter <highlight><bold>260</bold></highlight> and output <highlight><bold>220</bold></highlight> for inputting into the summing junction <highlight><bold>222</bold></highlight> (<cross-reference target="DRAWINGS">FIG. 4</cross-reference>). </paragraph>
<paragraph id="P-0073" lvl="0"><number>&lsqb;0073&rsqb;</number> The rest detector <highlight><bold>256</bold></highlight> determines periods of time over which the displacement output <highlight><bold>147</bold></highlight> is relatively stable. Direct current components of the sensor may be filtered out by a high-pass filter <highlight><bold>260</bold></highlight> and rectified by a squaring device <highlight><bold>262</bold></highlight>. The output <highlight><bold>264</bold></highlight> of the squaring device is then smoothed by a second low-pass filter <highlight><bold>264</bold></highlight>. If the resulting signal <highlight><bold>266</bold></highlight> is less than a predetermined threshold <highlight><bold>268</bold></highlight> a comparator <highlight><bold>270</bold></highlight> closes the sample switch <highlight><bold>254</bold></highlight> and the most recent low-pass filter output <highlight><bold>252</bold></highlight> is stored in the hold <highlight><bold>258</bold></highlight>. If the displacement output <highlight><bold>147</bold></highlight> is persistently and highly variable, considerable signal energy will pass through the high-pass filter <highlight><bold>260</bold></highlight> and be rectified in the squaring function <highlight><bold>262</bold></highlight>. Due to the persistence the output of the second low-pass filter <highlight><bold>264</bold></highlight> will rise above the threshold an inhibit the storage of the low-pass filter output <highlight><bold>252</bold></highlight> in the hold <highlight><bold>258</bold></highlight> by opening the switch <highlight><bold>254</bold></highlight>. One feature of the compensation algorithm <highlight><bold>184</bold></highlight> is that it responds to a nearly constant outputting of displacement outputs <highlight><bold>147</bold></highlight> by outputting to itself the negative of the constant displacement output. This can be called the &ldquo;slow inversion property.&rdquo; There are numerous ways to implement algorithms with the slow inversion property and each may be used to practice the teachings of this invention. The switch <highlight><bold>254</bold></highlight> will also be held open during power interruptions and other event where the approximate mean is not reliable. </paragraph>
<paragraph id="P-0074" lvl="0"><number>&lsqb;0074&rsqb;</number> The present invention may be embodied in other specific forms without departing from its structures, methods, or other essential characteristics as broadly described herein and claimed hereinafter. The described embodiments are to be considered in all respects only as illustrative, and not restrictive. The scope of the invention is, therefore, indicated by the appended claims, rather than by the foregoing description. All changes that come within the meaning and range of equivalency of the claims are to be embraced within their scope.</paragraph>
</section>
</detailed-description>
</subdoc-description>
<subdoc-claims>
<heading lvl="1">What is claimed and desired to be secured by United States Letters Patent is: </heading>
<claim id="CLM-00001">
<claim-text><highlight><bold>1</bold></highlight>. A method of positioning a movable body suspended in a magnetic bearing system comprising a displacement sensor, comprising: 
<claim-text>measuring the axial position of the movable body with the sensor to produce a displacement output; </claim-text>
<claim-text>adjusting the displacement output to account for a sensor offset; </claim-text>
<claim-text>converting the adjusted displacement output to a force for positioning the movable body; and </claim-text>
<claim-text>and positioning the movable body with said force. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00002">
<claim-text><highlight><bold>2</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein converting the adjusted displacement output to a force comprises inputting the adjusted displacement output into a position controller configured to determine the point of substantial axial equilibrium of the movable body. </claim-text>
</claim>
<claim id="CLM-00003">
<claim-text><highlight><bold>3</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00002">claim 2</dependent-claim-reference>, wherein converting the adjusted displacement output to a force for positioning the movable body comprises creating a mechanical force to position the movable body at the point of substantial axial equilibrium. </claim-text>
</claim>
<claim id="CLM-00004">
<claim-text><highlight><bold>4</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00002">claim 2</dependent-claim-reference>, wherein converting the adjusted displacement output to a force for positioning the movable body comprises creating an electromagnetic force to position the movable body at the point of substantial axial equilibrium. </claim-text>
</claim>
<claim id="CLM-00005">
<claim-text><highlight><bold>5</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein adjusting the displacement output to account for the sensor offset comprises estimating the sensor offset and adjusting the displacement output by the estimated sensor offset. </claim-text>
</claim>
<claim id="CLM-00006">
<claim-text><highlight><bold>6</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00005">claim 5</dependent-claim-reference>, wherein estimating the sensor offset further comprises storing a plurality of displacement outputs over a period of time. </claim-text>
</claim>
<claim id="CLM-00007">
<claim-text><highlight><bold>7</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00006">claim 6</dependent-claim-reference>, wherein the period of time is determined by comparing a variance of the plurality of displacement output against a predetermined threshold to determine a start time and an end time. </claim-text>
</claim>
<claim id="CLM-00008">
<claim-text><highlight><bold>8</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00006">claim 6</dependent-claim-reference>, wherein a selective plurality of displacement outputs are used to estimate the sensor offset, the displacement offsets being selected by comparing a magnitude of the displacement offset against a predetermined threshold. </claim-text>
</claim>
<claim id="CLM-00009">
<claim-text><highlight><bold>9</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00006">claim 6</dependent-claim-reference>, wherein estimating the sensor offset further comprises taking an average value of the stored displacement outputs. </claim-text>
</claim>
<claim id="CLM-00010">
<claim-text><highlight><bold>10</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00006">claim 6</dependent-claim-reference>, wherein estimating the sensor offset further comprises taking an weighted average value of the stored displacement outputs. </claim-text>
</claim>
<claim id="CLM-00011">
<claim-text><highlight><bold>11</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00006">claim 6</dependent-claim-reference>, wherein estimating the sensor offset further comprises determining a median value of the stored displacement outputs. </claim-text>
</claim>
<claim id="CLM-00012">
<claim-text><highlight><bold>12</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00006">claim 6</dependent-claim-reference>, wherein estimating the sensor offset further comprises determining the mode value of the stored displacement outputs. </claim-text>
</claim>
<claim id="CLM-00013">
<claim-text><highlight><bold>13</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00005">claim 5</dependent-claim-reference>, wherein the magnetic bearing system further comprises memory for storing displacement outputs. </claim-text>
</claim>
<claim id="CLM-00014">
<claim-text><highlight><bold>14</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00011">claim 13</dependent-claim-reference>, further comprising storing the estimated sensor offset in memory. </claim-text>
</claim>
<claim id="CLM-00015">
<claim-text><highlight><bold>15</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00011">claim 13</dependent-claim-reference>, further comprising storing adjusted displacement outputs in memory. </claim-text>
</claim>
<claim id="CLM-00016">
<claim-text><highlight><bold>16</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00011">claim 14</dependent-claim-reference>, further comprising recalling the estimated sensor offset and utilizing the estimated sensor offset to position the movable body to a point of substantial axial equilibrium. </claim-text>
</claim>
<claim id="CLM-00017">
<claim-text><highlight><bold>17</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00011">claim 15</dependent-claim-reference>, further comprising recalling the adjusted displacement output and utilizing the adjusted displacement output to position the movable body to a point of substantial axial equilibrium. </claim-text>
</claim>
<claim id="CLM-00018">
<claim-text><highlight><bold>18</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein measuring comprises measuring the axial position of the movable body when it is levitating. </claim-text>
</claim>
<claim id="CLM-00019">
<claim-text><highlight><bold>19</bold></highlight>. A method of positioning a movable body suspended in a magnetic bearing system comprising a displacement sensor, comprising: 
<claim-text>measuring the displacement of the movable body with the sensor to produce an displacement output; </claim-text>
<claim-text>estimating a sensor offset using the displacement output; </claim-text>
<claim-text>adjusting the displacement output by the estimated sensor offset to create an adjusted displacement output; </claim-text>
<claim-text>inputting the adjusted displacement output into a body position controller configured to determine the point of substantial axial equilibrium of the movable body; </claim-text>
<claim-text>converting the adjusted displacement output to an electromagnetic force for positioning the movable body; </claim-text>
<claim-text>positioning the movable body to a point of substantial axial equilibrium; and </claim-text>
<claim-text>repeating the previous steps. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00020">
<claim-text><highlight><bold>20</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00011">claim 19</dependent-claim-reference>, wherein estimating the sensor offset further comprises storing a plurality of displacement outputs over a period of time, the plurality of displacement outputs being derived from axial position measurements of the movable body. </claim-text>
</claim>
<claim id="CLM-00021">
<claim-text><highlight><bold>21</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00022">claim 20</dependent-claim-reference>, wherein the period of time is determined by comparing a variance of the plurality of displacement output against a predetermined threshold to determine a start time and an end time. </claim-text>
</claim>
<claim id="CLM-00022">
<claim-text><highlight><bold>22</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00022">claim 20</dependent-claim-reference>, wherein a selective plurality of displacement outputs are used to estimate the sensor offset, the displacement offsets being selected by comparing a magnitude of the displacement offset against a predetermined threshold. </claim-text>
</claim>
<claim id="CLM-00023">
<claim-text><highlight><bold>23</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00022">claim 20</dependent-claim-reference>, wherein estimating the sensor offset further comprises taking an average value of the stored displacement outputs. </claim-text>
</claim>
<claim id="CLM-00024">
<claim-text><highlight><bold>24</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00022">claim 20</dependent-claim-reference>, wherein estimating the sensor offset further comprises taking an weighted average value of the stored displacement outputs. </claim-text>
</claim>
<claim id="CLM-00025">
<claim-text><highlight><bold>25</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00022">claim 20</dependent-claim-reference>, wherein estimating the sensor offset further comprises determining a median value of the stored displacement outputs. </claim-text>
</claim>
<claim id="CLM-00026">
<claim-text><highlight><bold>26</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00022">claim 20</dependent-claim-reference>, wherein estimating the sensor offset further comprises determining the mode value of the stored displacement outputs. </claim-text>
</claim>
<claim id="CLM-00027">
<claim-text><highlight><bold>27</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00011">claim 19</dependent-claim-reference>, wherein the magnetic bearing system further comprises memory for storing data. </claim-text>
</claim>
<claim id="CLM-00028">
<claim-text><highlight><bold>28</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00022">claim 27</dependent-claim-reference>, further comprising storing the estimated sensor offset in memory. </claim-text>
</claim>
<claim id="CLM-00029">
<claim-text><highlight><bold>29</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00022">claim 28</dependent-claim-reference>, further comprising recalling the estimated sensor offset and utilizing said offset to position the movable body to a point of substantial axial equilibrium during a reset of the system. </claim-text>
</claim>
<claim id="CLM-00030">
<claim-text><highlight><bold>30</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00022">claim 20</dependent-claim-reference>, further comprising storing the adjusted displacement outputs in memory. </claim-text>
</claim>
<claim id="CLM-00031">
<claim-text><highlight><bold>31</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00033">claim 30</dependent-claim-reference>, further comprising recalling the adjusted displacement output and utilizing the adjusted displacement output to position the movable body to a point of substantial axial equilibrium. </claim-text>
</claim>
<claim id="CLM-00032">
<claim-text><highlight><bold>32</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00011">claim 19</dependent-claim-reference>, wherein measuring comprises measuring the movable body when it is levitating. </claim-text>
</claim>
<claim id="CLM-00033">
<claim-text><highlight><bold>33</bold></highlight>. A system for positioning a movable body suspended in a magnetic bearing apparatus, the system comprising: 
<claim-text>a sensor for measuring the displacement of the movable body and providing a displacement output; </claim-text>
<claim-text>a sensor offset compensation module, configured to receive said displacement output from the sensor and adjust said displacement output to account for a sensor offset; </claim-text>
<claim-text>a position control module configured to receive and use the adjusted displacement output of the sensor offset compensation module to approximate the point of substantial axial equilibrium of the movable body; and </claim-text>
<claim-text>an actuator module for converting an output of the position control module into a force for positioning the movable body to the point of substantial axial equilibrium. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00034">
<claim-text><highlight><bold>34</bold></highlight>. The system of <dependent-claim-reference depends_on="CLM-00033">claim 33</dependent-claim-reference>, wherein the sensor is configured to convert the displacement output to a displacement voltage. </claim-text>
</claim>
<claim id="CLM-00035">
<claim-text><highlight><bold>35</bold></highlight>. The system of <dependent-claim-reference depends_on="CLM-00033">claim 33</dependent-claim-reference>, wherein the sensor offset compensation module is configured to provide an estimated sensor offset and adjust the displacement output by the estimated sensor offset to create an adjusted displacement output. </claim-text>
</claim>
<claim id="CLM-00036">
<claim-text><highlight><bold>36</bold></highlight>. The system of <dependent-claim-reference depends_on="CLM-00033">claim 35</dependent-claim-reference>, wherein the sensor offset compensation module is configured to store a plurality of displacement outputs over a period of time, the plurality of displacement outputs being derived from axial position measurements of the positioned movable body. </claim-text>
</claim>
<claim id="CLM-00037">
<claim-text><highlight><bold>37</bold></highlight>. The system of <dependent-claim-reference depends_on="CLM-00033">claim 36</dependent-claim-reference>, wherein the sensor offset compensation module compares a variance of the plurality of displacement outputs against a predetermined threshold to determine a start time and an end time. </claim-text>
</claim>
<claim id="CLM-00038">
<claim-text><highlight><bold>38</bold></highlight>. The system of <dependent-claim-reference depends_on="CLM-00033">claim 36</dependent-claim-reference>, wherein a selective plurality of displacement outputs are used to estimate the sensor offset, the displacement offsets being selected by comparing a magnitude of the displacement offset against a predetermined threshold. </claim-text>
</claim>
<claim id="CLM-00039">
<claim-text><highlight><bold>39</bold></highlight>. The system of <dependent-claim-reference depends_on="CLM-00033">claim 36</dependent-claim-reference>, wherein the sensor offset compensation module estimates the sensor offset by taking an average value of the stored displacement outputs. </claim-text>
</claim>
<claim id="CLM-00040">
<claim-text><highlight><bold>40</bold></highlight>. The system of <dependent-claim-reference depends_on="CLM-00033">claim 36</dependent-claim-reference>, wherein the sensor offset compensation module estimates the sensor offset by taking an weighted average value of the stored displacement outputs. </claim-text>
</claim>
<claim id="CLM-00041">
<claim-text><highlight><bold>41</bold></highlight>. The system of <dependent-claim-reference depends_on="CLM-00033">claim 36</dependent-claim-reference>, wherein the sensor offset compensation module estimates the sensor offset by determining a median value of the stored displacement outputs. </claim-text>
</claim>
<claim id="CLM-00042">
<claim-text><highlight><bold>42</bold></highlight>. The system of <dependent-claim-reference depends_on="CLM-00033">claim 36</dependent-claim-reference>, wherein the sensor offset compensation module estimates the sensor offset by determining the mode value of the stored displacement outputs. </claim-text>
</claim>
<claim id="CLM-00043">
<claim-text><highlight><bold>43</bold></highlight>. The system of <dependent-claim-reference depends_on="CLM-00033">claim 33</dependent-claim-reference>, wherein the actuator module is configured to convert the output from the position control module to create a mechanical force to position the movable body to the point of substantial axial equilibrium. </claim-text>
</claim>
<claim id="CLM-00044">
<claim-text><highlight><bold>44</bold></highlight>. The system of <dependent-claim-reference depends_on="CLM-00033">claim 33</dependent-claim-reference>, wherein the actuator module is configured to convert the output from the position control module to create an electromagnetic force to position the movable body to the point of substantial axial equilibrium. </claim-text>
</claim>
<claim id="CLM-00045">
<claim-text><highlight><bold>45</bold></highlight>. The system of method of <dependent-claim-reference depends_on="CLM-00033">claim 33</dependent-claim-reference>, wherein the magnetic bearing system further comprises memory for storing data. </claim-text>
</claim>
<claim id="CLM-00046">
<claim-text><highlight><bold>46</bold></highlight>. The system of <dependent-claim-reference depends_on="CLM-00044">claim 45</dependent-claim-reference>, wherein the memory stores an estimated sensor offset in memory. </claim-text>
</claim>
<claim id="CLM-00047">
<claim-text><highlight><bold>47</bold></highlight>. The system of <dependent-claim-reference depends_on="CLM-00044">claim 46</dependent-claim-reference>, wherein the position control module uses the estimated sensor offset stored in memory to position the movable body to a point of substantial axial equilibrium during a reset of the system. </claim-text>
</claim>
<claim id="CLM-00048">
<claim-text><highlight><bold>48</bold></highlight>. The system of <dependent-claim-reference depends_on="CLM-00044">claim 45</dependent-claim-reference>, wherein the memory stores an adjusted displacement output in memory. </claim-text>
</claim>
<claim id="CLM-00049">
<claim-text><highlight><bold>49</bold></highlight>. The system of <dependent-claim-reference depends_on="CLM-00044">claim 46</dependent-claim-reference>, wherein the position control module uses the adjusted displacement output stored in memory to position the movable body to a point of substantial axial equilibrium during a reset of the system. </claim-text>
</claim>
<claim id="CLM-00050">
<claim-text><highlight><bold>50</bold></highlight>. A method of positioning a magnetically suspended rotor in a pump apparatus, the pump apparatus comprising at least one permanent magnet, at least one electro magnet, a rotor position sensor, and a rotor position controller, comprising: 
<claim-text>measuring the displacement of the rotor in the axial direction with the sensor to produce a displacement output; </claim-text>
<claim-text>converting the displacement output into a displacement voltage; </claim-text>
<claim-text>estimating a sensor offset using the displacement output; </claim-text>
<claim-text>adjusting the displacement output by the estimated sensor offset to create an adjusted displacement output; </claim-text>
<claim-text>inputting the adjusted displacement output into the rotor position controller configured to determine the point of substantial axial equilibrium of the rotor; </claim-text>
<claim-text>converting the output of the rotor position controller into an electromagnetic force; </claim-text>
<claim-text>positioning the rotor to a point of substantial axial equilibrium by adjusting the voltage to the electromagnet; and </claim-text>
<claim-text>repeating the previous steps. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00051">
<claim-text><highlight><bold>51</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00055">claim 50</dependent-claim-reference>, further comprising storing the estimated sensor offset in memory. </claim-text>
</claim>
<claim id="CLM-00052">
<claim-text><highlight><bold>52</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00055">claim 51</dependent-claim-reference>, further comprising recalling the estimated sensor offset and utilizing said offset to position the movable body to a point of substantial axial equilibrium during a reset of the system. </claim-text>
</claim>
<claim id="CLM-00053">
<claim-text><highlight><bold>53</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00055">claim 50</dependent-claim-reference>, further comprising storing the adjusted displacement output in memory. </claim-text>
</claim>
<claim id="CLM-00054">
<claim-text><highlight><bold>54</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00055">claim 53</dependent-claim-reference>, further comprising recalling the adjusted displacement output and utilizing said offset to position the movable body to a point of substantial axial equilibrium during a reset of the system. </claim-text>
</claim>
<claim id="CLM-00055">
<claim-text><highlight><bold>55</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00055">claim 50</dependent-claim-reference>, wherein estimating the sensor offset further comprises averaging a plurality of stored displacement outputs, said plurality of displacement outputs being derived by measuring the displacement of the positioned rotor over a period of time. </claim-text>
</claim>
<claim id="CLM-00056">
<claim-text><highlight><bold>56</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00055">claim 55</dependent-claim-reference>, wherein the sensor offset compensation module compares a variance of the plurality of displacement outputs against a predetermined threshold to determine a start time and an end time. </claim-text>
</claim>
<claim id="CLM-00057">
<claim-text><highlight><bold>57</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00055">claim 56</dependent-claim-reference>, wherein the sensor offset compensation module estimates the sensor offset by taking an average value of the displacement outputs stored between the start time and the end time. </claim-text>
</claim>
<claim id="CLM-00058">
<claim-text><highlight><bold>58</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00055">claim 50</dependent-claim-reference>, wherein a selective plurality of displacement outputs are used to estimate the sensor offset, the displacement offsets being selected by comparing a magnitude of the displacement offset against a predetermined threshold. </claim-text>
</claim>
<claim id="CLM-00059">
<claim-text><highlight><bold>59</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00055">claim 58</dependent-claim-reference>, wherein estimating the sensor offset further comprises taking an average value of the stored displacement outputs. </claim-text>
</claim>
<claim id="CLM-00060">
<claim-text><highlight><bold>60</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein measuring comprises measuring the axial position of the movable body when it is levitating. </claim-text>
</claim>
<claim id="CLM-00061">
<claim-text><highlight><bold>61</bold></highlight>. A magnetically suspended pump apparatus, comprising: 
<claim-text>a housing comprising an inlet port and an outlet port for receiving and discharging fluid respectively; </claim-text>
<claim-text>a rotor positioned within the housing for pumping blood between the housing&apos;s inlet port and outlet port; </claim-text>
<claim-text>a plurality of permanent magnets for passively controlling the radial position of the rotor radially, and the pitch and yaw of the rotor; </claim-text>
<claim-text>an electromagnet for actively controlling the position of the rotor in the axial direction; </claim-text>
<claim-text>an electromagnetic motor for rotating the rotor about a central axis; </claim-text>
<claim-text>a sensor for measuring the axial displacement of the rotor; </claim-text>
<claim-text>an offset compensation module for adjusting an output of the sensor to account for sensor offset; </claim-text>
<claim-text>a rotor position controller for positioning the rotor at the point of substantial axial equilibrium; and </claim-text>
<claim-text>an actuator for creating an electromagnetic force to position the rotor. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00062">
<claim-text><highlight><bold>62</bold></highlight>. The pump apparatus of <dependent-claim-reference depends_on="CLM-00066">claim 61</dependent-claim-reference>, further comprising a computer comprising memory for storing and recalling sensor data. </claim-text>
</claim>
<claim id="CLM-00063">
<claim-text><highlight><bold>63</bold></highlight>. The pump apparatus of <dependent-claim-reference depends_on="CLM-00066">claim 62</dependent-claim-reference>, wherein the computer controls the operation of the pump apparatus. </claim-text>
</claim>
<claim id="CLM-00064">
<claim-text><highlight><bold>64</bold></highlight>. The pump apparatus of <dependent-claim-reference depends_on="CLM-00066">claim 62</dependent-claim-reference>, wherein the computer in configured to recall saved sensor data upon reboot or reset of the computer. </claim-text>
</claim>
<claim id="CLM-00065">
<claim-text><highlight><bold>65</bold></highlight>. The pump apparatus of <dependent-claim-reference depends_on="CLM-00066">claim 61</dependent-claim-reference>, wherein the position controller is configured to balance the passively controlled forces acting on the rotor. </claim-text>
</claim>
<claim id="CLM-00066">
<claim-text><highlight><bold>66</bold></highlight>. The pump apparatus of <dependent-claim-reference depends_on="CLM-00066">claim 61</dependent-claim-reference>, wherein the rotor position controller is a virtual zero power controller. </claim-text>
</claim>
<claim id="CLM-00067">
<claim-text><highlight><bold>67</bold></highlight>. A method of positioning a magnetically suspended rotor in a pump apparatus, the pump apparatus comprising at least one permanent magnet, at least one electro magnet, a rotor position sensor, and a rotor position controller, comprising: 
<claim-text>measuring the displacement of the rotor in a plurality of positions to produce a plurality of displacement output; </claim-text>
<claim-text>estimating a sensor offset using the displacement outputs; </claim-text>
<claim-text>adjusting the displacement output by the estimated sensor offset to create an adjusted displacement output; </claim-text>
<claim-text>inputting the adjusted displacement output into the rotor position controller configured to determine the point of substantial axial equilibrium of the rotor; and </claim-text>
<claim-text>converting the output of the rotor position controller into a force for positioning the rotor.</claim-text>
</claim-text>
</claim>
</subdoc-claims>
<subdoc-drawings id="DRAWINGS">
<heading lvl="0" align="CENTER">Drawings</heading>
<representative-figure>1</representative-figure>
<figure id="figure-D00000">
<image id="EMI-D00000" file="US20030001445A1-20030102-D00000.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00001">
<image id="EMI-D00001" file="US20030001445A1-20030102-D00001.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00002">
<image id="EMI-D00002" file="US20030001445A1-20030102-D00002.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00003">
<image id="EMI-D00003" file="US20030001445A1-20030102-D00003.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00004">
<image id="EMI-D00004" file="US20030001445A1-20030102-D00004.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00005">
<image id="EMI-D00005" file="US20030001445A1-20030102-D00005.TIF" imf="TIFF" ti="DR"/>
</figure>
</subdoc-drawings>
</patent-application-publication>
