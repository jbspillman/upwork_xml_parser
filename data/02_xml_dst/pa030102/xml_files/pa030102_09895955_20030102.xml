<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE patent-application-publication SYSTEM "pap-v16-2002-01-01.dtd" [
<!ENTITY US20030001640A1-20030102-D00000.TIF SYSTEM "US20030001640A1-20030102-D00000.TIF" NDATA TIF>
<!ENTITY US20030001640A1-20030102-D00001.TIF SYSTEM "US20030001640A1-20030102-D00001.TIF" NDATA TIF>
<!ENTITY US20030001640A1-20030102-D00002.TIF SYSTEM "US20030001640A1-20030102-D00002.TIF" NDATA TIF>
<!ENTITY US20030001640A1-20030102-D00003.TIF SYSTEM "US20030001640A1-20030102-D00003.TIF" NDATA TIF>
<!ENTITY US20030001640A1-20030102-D00004.TIF SYSTEM "US20030001640A1-20030102-D00004.TIF" NDATA TIF>
<!ENTITY US20030001640A1-20030102-D00005.TIF SYSTEM "US20030001640A1-20030102-D00005.TIF" NDATA TIF>
<!ENTITY US20030001640A1-20030102-D00006.TIF SYSTEM "US20030001640A1-20030102-D00006.TIF" NDATA TIF>
]>
<patent-application-publication>
<subdoc-bibliographic-information>
<document-id>
<doc-number>20030001640</doc-number>
<kind-code>A1</kind-code>
<document-date>20030102</document-date>
</document-id>
<publication-filing-type>new</publication-filing-type>
<domestic-filing-data>
<application-number>
<doc-number>09895955</doc-number>
</application-number>
<application-number-series-code>09</application-number-series-code>
<filing-date>20010629</filing-date>
</domestic-filing-data>
<technical-information>
<classification-ipc>
<classification-ipc-primary>
<ipc>H03L007/00</ipc>
</classification-ipc-primary>
<classification-ipc-edition>07</classification-ipc-edition>
</classification-ipc>
<classification-us>
<classification-us-primary>
<uspc>
<class>327</class>
<subclass>165000</subclass>
</uspc>
</classification-us-primary>
</classification-us>
<title-of-invention>MULTI-GIGABIT-PER-SEC CLOCK RECOVERY APPARATUS AND METHOD FOR OPTICAL COMMUNICATIONS</title-of-invention>
</technical-information>
<inventors>
<first-named-inventor>
<name>
<given-name>Binneg</given-name>
<middle-name>Y.</middle-name>
<family-name>Lao</family-name>
</name>
<residence>
<residence-us>
<city>Rancho Palos Verdes</city>
<state>CA</state>
<country-code>US</country-code>
</residence-us>
</residence>
<authority-applicant>INV</authority-applicant>
</first-named-inventor>
<inventor>
<name>
<given-name>David</given-name>
<middle-name>A.</middle-name>
<family-name>Rowe</family-name>
</name>
<residence>
<residence-us>
<city>Torrance</city>
<state>CA</state>
<country-code>US</country-code>
</residence-us>
</residence>
<authority-applicant>INV</authority-applicant>
</inventor>
<inventor>
<name>
<given-name>James</given-name>
<middle-name>R.</middle-name>
<family-name>Pulver</family-name>
</name>
<residence>
<residence-us>
<city>Torrance</city>
<state>CA</state>
<country-code>US</country-code>
</residence-us>
</residence>
<authority-applicant>INV</authority-applicant>
</inventor>
</inventors>
<correspondence-address>
<name-1>Soyeon (Karen) P. Laub</name-1>
<name-2>Sierra Monolithics, Inc.</name-2>
<address>
<address-1>Suite 102</address-1>
<address-2>103 W. Torrance Blvd.</address-2>
<city>Redondo Beach</city>
<state>CA</state>
<postalcode>90277</postalcode>
<country>
<country-code>US</country-code>
</country>
</address>
</correspondence-address>
</subdoc-bibliographic-information>
<subdoc-abstract>
<paragraph id="A-0001" lvl="0">Methods and apparatus for generating clock signals accurately locked to multi-gigabits-per-second data signals received over fiber optic channels are disclosed. The invention includes a phase detector for comparing a data signal and a clock signal, a one shot unit for detecting a data transition, an XOR, a filter, a main charge pump, a compensating charge pump for producing additive or compensating current, and a VCO for generating the clock signal. The phase detector includes multiple D-flip flops. The one shot unit includes a delay unit and an AND gate. The filter includes a resistor, a capacitor and a negative resistance amplifier. The main charge pump includes differential inputs, double outputs, cross-quading resistors, differential NPN input transistors, and a current source. The compensating charge pump includes differential NPN input transistors and a current source. In operation, when there is a data transition and if the clock signal and data signal are out of phase synchronization, then the compensating charge pump will enhance the operation of the main charge pump, and the VCO will speed up or slow down the clock signal depending on whether the clock signal is advanced or retarded in phase compared to the data signal. When there is no data transition, the compensating charge pump will in effect counterbalance the operation of the main charge pump, and the frequency of the clock signal will be maintained at the same level it was at the onset of the no data transition period. </paragraph>
</subdoc-abstract>
<subdoc-description>
<summary-of-invention>
<section>
<heading lvl="1">FIELD OF THE INVENTION </heading>
<paragraph id="P-0001" lvl="0"><number>&lsqb;0001&rsqb;</number> The invention relates to clock recovery apparatus and methods, and more specifically to apparatus and methods for generating clock signals accurately locked to multi-gigabits-per-second data signals received over fiber optic channels. </paragraph>
</section>
<section>
<heading lvl="1">BACKGROUND OF THE INVENTION </heading>
<paragraph id="P-0002" lvl="0"><number>&lsqb;0002&rsqb;</number> Recently, the world has witnessed a phenomenal growth in the number of Internet users, applications and devices and in the amount of data traffic especially that of medium-rich content-all demanding higher speed communications and connectivity over the Internet. To accommodate this demand, the Internet utilizes fiber optic channels for ultra high speed communications. The optical signals sent along the fiber optic channels are received by receivers that include both optical components and electrical components. The receivers convert the optical signals to electrical signals and send the converted electrical signals to electronic computer networks operating at lower speeds for processing data. </paragraph>
<paragraph id="P-0003" lvl="0"><number>&lsqb;0003&rsqb;</number> After an optical signal is converted to an electrical signal, a receiver recovers a clock signal and data within a clock and data recovery unit. A clock and data recovery unit typically includes a phase locked loop such as the phase locked loop <highlight><bold>10</bold></highlight> in <cross-reference target="DRAWINGS">FIG. 1</cross-reference>. A phase locked loop is essential in synchronizing a clock signal with data received from the fiber optic channels. The phase locked loop <highlight><bold>10</bold></highlight> includes a phase detector <highlight><bold>11</bold></highlight>, a charge pump <highlight><bold>12</bold></highlight>, a filter <highlight><bold>13</bold></highlight>, and a voltage controlled oscillator (VCO) <highlight><bold>14</bold></highlight>. The purpose of a phase detector is to compare the phase of data (such as data <highlight><bold>15</bold></highlight>) with that of a clock signal received from a VCO and determine whether the clock signal is ahead or retarded in comparison with the data. The charge pump <highlight><bold>12</bold></highlight> either provides current to the filter <highlight><bold>13</bold></highlight> or sinks current depending on the result of the comparison done by the phase detector. The filter <highlight><bold>13</bold></highlight> provides a voltage to the VCO <highlight><bold>14</bold></highlight> to either speed up or slow down the clock signal generated by the VCO <highlight><bold>14</bold></highlight>. One of the major problems with the traditional non-tristate phase locked loops, however, is that when data includes a long stream of one&apos;s or zero&apos;s, the filter may continue to charge up causing the VCO frequency to drift. This could degrade the jitter performance or even result in bit errors in reading the data. </paragraph>
<paragraph id="P-0004" lvl="0"><number>&lsqb;0004&rsqb;</number> Accordingly, there is a need for a phase locked loop that is capable of maintaining a constant clock frequency during periods when the data includes a long stream of one&apos;s or zero&apos;s. The phase locked loop should be simple in its implementation to reduce the complexity, power consumption, and cost and should provide good jitter performance even at multi-gigabits-per-second data rates. </paragraph>
</section>
<section>
<heading lvl="1">SUMMARY OF THE INVENTION </heading>
<paragraph id="P-0005" lvl="0"><number>&lsqb;0005&rsqb;</number> The present invention provides clock recovery methods and apparatus for maintaining a constant clock frequency during periods when multi-gigabits-per-second data signals received over fiber optic channels include a long stream of one&apos;s or zero&apos;s. In accordance with one embodiment, the present invention includes a phase detector for receiving and comparing a data signal and a clock signal, a one-shot unit for detecting a data transition, an XOR (exclusive OR) gate for generating an appropriate control signal in response to the output signals of the phase detector and the one-shot unit, a double-ended filter, a main differential charge pump for producing current, a compensating differential charge pump for producing additive or canceling current either to charge or discharge the filter or not to affect the filter, and a voltage controlled oscillator for generating the clock signal in response to the voltage level produced across the filter. </paragraph>
<paragraph id="P-0006" lvl="0"><number>&lsqb;0006&rsqb;</number> In accordance with one embodiment, the phase detector may be implemented with multiple D-flip flops. The one-shot unit may include a delay unit and an AND gate. The filter may include a resistor and a capacitor and further include a negative resistance amplifier. The main differential charge pump may receive input signals from the phase detector and produce double outputs. It may include cross-quading resistors, differential NPN input transistors, and a current source. The compensating differential charge pump may have its outputs coupled to the outputs of the main differential charge pump and receive input signals from the XOR. The compensating differential charge pump may also include differential NPN input transistors and a current source. </paragraph>
<paragraph id="P-0007" lvl="0"><number>&lsqb;0007&rsqb;</number> In an exemplary operation, when there is a data transition and if the clock signal and data signal are out of phase synchronization, then the compensating differential charge pump will add to or subtract from the filter charges that are equal in sign and quantity to those produced by the main differential charge pump. This is accomplished by adding the current produced by the compensating differential charge pump to the current produced by the main differential charge pump. The filter is then either charged or discharged and in turn the voltage controlled oscillator will speed up or slow down the clock signal it produces depending on whether the clock signal is advanced or retarded in phase compared to the data signal. </paragraph>
<paragraph id="P-0008" lvl="0"><number>&lsqb;0008&rsqb;</number> In another exemplary operation, when there is no data transition, the operation of the compensating differential charge pump will in effect cancel the operation of the main differential charge pump by producing a current that is equal in quantity but opposite in sign to the current produced by the main differential charge pump. In this case, the filter is neither charged nor discharged and in turn the speed of the clock signal or its frequency is maintained at the same level it was at the onset of the no data transition period. </paragraph>
<paragraph id="P-0009" lvl="0"><number>&lsqb;0009&rsqb;</number> According to the present invention, a method for recovering a clock signal from data may include receiving data and producing a clock signal, detecting a transition in the data, comparing the phase of the data to the phase of the clock signal, producing a charging or discharging current to the first end and second end of a filter when there is a data transition and if the clock signal and the data are out of phase synchronization, producing no charging or discharging current at the first and second ends of a filter when there is no data transition, speeding up the clock signal when there is a transition in the data and if the clock signal is retarded in phase compared to the data, slowing down the clock signal when there is a transition in the data and if the clock signal is advanced in phase compared to the data, and maintaining the speed or frequency of the clock signal at the level it was at the commencement of the no data transition period when there is no transition in the data. </paragraph>
</section>
</summary-of-invention>
<brief-description-of-drawings>
<section>
<heading lvl="1">BRIEF DESCRIPTION OF THE DRAWINGS </heading>
<paragraph id="P-0010" lvl="0"><number>&lsqb;0010&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1</cross-reference> is a block diagram representing a typical phase locked loop. </paragraph>
<paragraph id="P-0011" lvl="0"><number>&lsqb;0011&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 2</cross-reference> is a block diagram representing an exemplary phase locked loop in accordance with one embodiment of the present invention. </paragraph>
<paragraph id="P-0012" lvl="0"><number>&lsqb;0012&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3</cross-reference> is an exemplary block diagram of a phase detector. </paragraph>
<paragraph id="P-0013" lvl="0"><number>&lsqb;0013&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 4</cross-reference> illustrates exemplary waveforms of signals received or produced by the phase detector in <cross-reference target="DRAWINGS">FIG. 3</cross-reference>. </paragraph>
<paragraph id="P-0014" lvl="0"><number>&lsqb;0014&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 5</cross-reference> illustrates another set of exemplary waveforms of signals received or produced by the phase detector in <cross-reference target="DRAWINGS">FIG. 3</cross-reference>. </paragraph>
<paragraph id="P-0015" lvl="0"><number>&lsqb;0015&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 6</cross-reference> is an exemplary block diagram of a one-shot unit and an XOR unit in accordance with the present invention. </paragraph>
<paragraph id="P-0016" lvl="0"><number>&lsqb;0016&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 7</cross-reference> illustrates exemplary waveforms of signals received or produced by a one-shot unit. </paragraph>
<paragraph id="P-0017" lvl="0"><number>&lsqb;0017&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 8</cross-reference> is an exemplary circuit schematic of a main charge pump and a compensating charge pump according to one embodiment of the present invention. </paragraph>
<paragraph id="P-0018" lvl="0"><number>&lsqb;0018&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 9</cross-reference> illustrates exemplary cross-quading of the resistors in a main charge pump according to one embodiment of the present invention. </paragraph>
<paragraph id="P-0019" lvl="0"><number>&lsqb;0019&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 10</cross-reference> is an exemplary chart illustrating the operation of a main charge pump and a compensating charge pump according to one embodiment of the present invention. </paragraph>
<paragraph id="P-0020" lvl="0"><number>&lsqb;0020&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 11</cross-reference> illustrates one embodiment of a loop filter with a negative impedance amplifier in accordance with the present invention. </paragraph>
<paragraph id="P-0021" lvl="0"><number>&lsqb;0021&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 12</cross-reference> shows one representation of a single-ended filter. </paragraph>
<paragraph id="P-0022" lvl="0"><number>&lsqb;0022&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 13</cross-reference> shows one representation of a double-ended filter. </paragraph>
<paragraph id="P-0023" lvl="0"><number>&lsqb;0023&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 14</cross-reference> shows another embodiment of a double-ended filter. </paragraph>
<paragraph id="P-0024" lvl="0"><number>&lsqb;0024&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 15</cross-reference> represents one exemplary AC equivalent circuit for a double-ended filter in conjunction with a negative impedance amplifier in accordance with one embodiment of the present invention. </paragraph>
</section>
</brief-description-of-drawings>
<detailed-description>
<section>
<heading lvl="1">DETAILED DESCRIPTION OF THE INVENTION </heading>
<paragraph id="P-0025" lvl="0"><number>&lsqb;0025&rsqb;</number> The present invention provides clock recovery methods and apparatus for generating clock signals accurately locked to multi-gigabits-per-second data signals received over fiber optic channels. In the following detailed description, numerous specific details are set forth to provide a full understanding of the present invention. It will be obvious, however, to one skilled in the art that the present invention may be practiced without some of these specific details. In other instances, well-known structures and techniques have not been shown in detail so as to avoid unnecessarily obscuring the present invention. </paragraph>
<paragraph id="P-0026" lvl="0"><number>&lsqb;0026&rsqb;</number> Now referring to <cross-reference target="DRAWINGS">FIG. 2, a</cross-reference> block diagram of the present invention according to one embodiment is presented. One embodiment of the present invention includes a tri-state phase locked loop. A phase locked loop <highlight><bold>20</bold></highlight> in <cross-reference target="DRAWINGS">FIG. 2</cross-reference> includes a phase detector <highlight><bold>21</bold></highlight>, a main charge pump <highlight><bold>22</bold></highlight>, a compensating charge pump <highlight><bold>23</bold></highlight>, a loop filter <highlight><bold>24</bold></highlight>, an XOR <highlight><bold>25</bold></highlight>, a one-shot unit <highlight><bold>26</bold></highlight>, and a VCO <highlight><bold>27</bold></highlight>. While it is not shown in <cross-reference target="DRAWINGS">FIG. 2</cross-reference>, an amplifier (or buffer) can be placed between the loop filter <highlight><bold>24</bold></highlight> and the VCO <highlight><bold>27</bold></highlight>. In <cross-reference target="DRAWINGS">FIG. 2</cross-reference>, differential lines are shown (e.g., between phase detector <highlight><bold>21</bold></highlight> and main charge pump <highlight><bold>22</bold></highlight>, between phase detector <highlight><bold>21</bold></highlight> and one-shot unit <highlight><bold>26</bold></highlight>, between loop filter <highlight><bold>24</bold></highlight> and VCO, between VCO <highlight><bold>27</bold></highlight> and phase detector <highlight><bold>21</bold></highlight>, etc.). Some or all of these may be single ended connections in alternative embodiments. The phase locked loop <highlight><bold>20</bold></highlight> can be used in many telecommunications applications and in particular in clock data recovery units of receivers that receive optical signals from fiber optic channels and that meet the optical standards that have emerged. </paragraph>
<paragraph id="P-0027" lvl="0"><number>&lsqb;0027&rsqb;</number> One such standard is the Synchronous Optical Networks (SONET) which is a standard formulated by the Exchange Carriers Standards Association (ECSA) for the American National Standards Institute (ANSI). The SONET is used for telecommunications and other industries mainly in North America and Japan. Another standard is the Synchronous Digital Hierarchy (SDH) standard which was published by the International Telecommunication Union (ITU) and used in other parts of the world. The phased locked loop <highlight><bold>20</bold></highlight> can be implemented to receive and process data operating at rates greater than one gigabit-per-second including without limitation the data rates imposed by the OC-192 SONET standard or STM64 SDH Standard (which can be approximately between 9-13 Gbps depending on error correction coding) or by the OC-768 SONET standard or STM 256 SDH Standard (which can be approximately between 36 to 48 Gbps). In alternative embodiments, a phased locked loop may receive and process data operating at rates equal to or less than one gigabit-per-second or rates greater than the OC-768 or STM 256 rates. </paragraph>
<paragraph id="P-0028" lvl="0"><number>&lsqb;0028&rsqb;</number> Still referring to <cross-reference target="DRAWINGS">FIG. 2</cross-reference>, in this example, the phase detector <highlight><bold>21</bold></highlight> receives differential data&prime; <highlight><bold>28</bold></highlight> including data and data/ that have been converted from optical signals and compares the data against the differential clock signal CLK&prime; <highlight><bold>29</bold></highlight> generated by the VCO <highlight><bold>27</bold></highlight>. The clock signal frequency will be the same as the data rate (i.e., full rate). For example, if the data rate is 13 Gbps, then the clock signal frequency will be 13 GHz. The operating frequency of the other components shown in <cross-reference target="DRAWINGS">FIG. 2</cross-reference> will be the same as the frequency of the clock signal <highlight><bold>29</bold></highlight>. In alternative embodiments, the clock frequency may or may not be different from the data rate, and some or all of the operating frequencies of the various components in a phase locked loop may or may not be different from the clock frequency. </paragraph>
<paragraph id="P-0029" lvl="0"><number>&lsqb;0029&rsqb;</number> It should be noted that a differential signal includes a non-inverted signal and an inverted signal (or a complementary signal), and the notation &ldquo;/&rdquo; is used to indicate a complementary signal. For example, data/ is complement of data, and thus when data is high (1), data/ is low (0). Data and data/ form a complementary pair signal, data&prime;, where the symbol &ldquo;&prime;&rdquo; denotes the pair nature of the signal. </paragraph>
<paragraph id="P-0030" lvl="0"><number>&lsqb;0030&rsqb;</number> One embodiment of the phase detector <highlight><bold>21</bold></highlight> is presented in <cross-reference target="DRAWINGS">FIG. 3</cross-reference>. While the phase detector <highlight><bold>21</bold></highlight> may employ one of many different types of phase detectors, in this example, the phase detector <highlight><bold>21</bold></highlight> uses a bang-bang phase detector that includes a first D-flip flop <highlight><bold>31</bold></highlight>, a second D-flip flop <highlight><bold>32</bold></highlight> and a third D-flip flop <highlight><bold>33</bold></highlight>. A D-flip flop may function in the following manner: According to one embodiment, at a rising edge of a clock signal CLK&prime; <highlight><bold>35</bold></highlight>, the D-flip flop <highlight><bold>31</bold></highlight> samples data&prime; <highlight><bold>34</bold></highlight> and outputs the value of the sampled data as a differential signal QA&prime;. In another embodiment, a flip-flop may sample a signal at a falling edge of a clock signal or sample a signal both at a rising edge and at a falling edge of a clock signal. The D-flip flop <highlight><bold>31</bold></highlight> receives the differential data&prime; <highlight><bold>34</bold></highlight> (which includes data and data/) and a differential clock signal CLK&prime; <highlight><bold>35</bold></highlight> (which includes CLK and CLK/) and outputs a differential signal QA&prime; (which includes QA and QA/). The D-flip flop <highlight><bold>32</bold></highlight> receives the differential data&prime; <highlight><bold>34</bold></highlight> and an inverted signal of the differential clock signal CLK&prime; <highlight><bold>35</bold></highlight> and outputs a differential signal QB&prime; (which includes QB and QB<highlight><bold>1</bold></highlight>). The D-flip flop <highlight><bold>33</bold></highlight> receives the differential signal QA&prime; and the differential signal QB&prime; and outputs a differential signal QC&prime; (which includes QC and QC/). An alternative embodiment of the phase detector can be built where all inputs and outputs are single-ended rather than differential. </paragraph>
<paragraph id="P-0031" lvl="0"><number>&lsqb;0031&rsqb;</number> <cross-reference target="DRAWINGS">FIGS. 4 and 5</cross-reference> show exemplary waveforms of the output signals QA, QB and QC in accordance with one embodiment of the present invention. In this example, each D-flip flop samples its data at a rising edge of a clock signal. In <cross-reference target="DRAWINGS">FIG. 4</cross-reference>, the data <highlight><bold>34</bold></highlight> is ahead of the CLK <highlight><bold>35</bold></highlight>, and as a result the output signal QC is low (0). So long as the data <highlight><bold>34</bold></highlight> is ahead of the CLK <highlight><bold>35</bold></highlight>, even by a small amount, the phase detector <highlight><bold>21</bold></highlight>&apos;s output will be low, indicating that the data&prime; <highlight><bold>34</bold></highlight> is ahead of the clock signal <highlight><bold>35</bold></highlight>. In <cross-reference target="DRAWINGS">FIG. 5</cross-reference>, the data <highlight><bold>34</bold></highlight> is behind the CLK <highlight><bold>35</bold></highlight>, and as a result, the output signal QC is high (1). So long as the data <highlight><bold>34</bold></highlight> is behind the CLK <highlight><bold>35</bold></highlight>, even by a small amount, the phase detector <highlight><bold>21</bold></highlight>&apos;s output will be high, indicating that the data&prime; <highlight><bold>34</bold></highlight> is behind the clock signal CLK&prime; <highlight><bold>35</bold></highlight> in phase. </paragraph>
<paragraph id="P-0032" lvl="0"><number>&lsqb;0032&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 6</cross-reference> is an exemplary block diagram of a control circuit including the one-shot unit <highlight><bold>26</bold></highlight> and the XOR unit <highlight><bold>25</bold></highlight> in accordance with one embodiment of the present invention. The one-shot unit <highlight><bold>26</bold></highlight> includes a delay block <highlight><bold>41</bold></highlight> and an AND gate <highlight><bold>42</bold></highlight>. In this example, the one-shot unit <highlight><bold>26</bold></highlight> produces pulses each having duration approximately equal to one data bit (e.g., approximately 80 psec for 12 Gbit/sec data rate) triggered by a rising edge of its input signal (0-to-1 data transition). It should be noted that a one-shot unit may produce pulses (1&apos;s or 0&apos;s) of different duration and that the pulses may be triggered by a falling edge or by both the rising edge and falling edge of a signal. In the latter case, both data transitions, 0-to-1 and 1-to-0, can be used by a phase locked loop to adjust the loop filter voltage and in turn the phase or the frequency of the VCO. In the current embodiment, without the loss of generality, only the 0-to-1 transitions are utilized to trigger the one-shot, and in turn to adjust the VCO. In another embodiment, the control circuit may be included in a phase detector. Yet in another embodiment, signals of the control circuit may be single-ended rather than differential. </paragraph>
<paragraph id="P-0033" lvl="0"><number>&lsqb;0033&rsqb;</number> In <cross-reference target="DRAWINGS">FIG. 6</cross-reference>, the differential signal QA&prime; from the phase detector <highlight><bold>21</bold></highlight> is used as an input to the delay block <highlight><bold>41</bold></highlight> and the AND gate <highlight><bold>42</bold></highlight>. One implementation of the delay block <highlight><bold>41</bold></highlight> includes multiple differential buffers. The delay block <highlight><bold>41</bold></highlight> delays the differential signal QA&prime; by a predetermined amount that can be adjusted depending on the application. The AND gate <highlight><bold>42</bold></highlight> receives the differential signal QA&prime; and an inverted signal of the differential signal QD&prime; (which includes QD and QD<highlight><bold>1</bold></highlight>) from the delay block <highlight><bold>41</bold></highlight> and produces a differential signal QF&prime; (which includes QF and QF/). The XOR unit <highlight><bold>25</bold></highlight> receives the differential signals QC&prime; and QF&prime; and generates a differential signal QG&prime; (which includes QG and QG&prime;). </paragraph>
<paragraph id="P-0034" lvl="0"><number>&lsqb;0034&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 7</cross-reference> illustrates exemplary waveforms received or generated by a one-shot unit in accordance with one embodiment of the present invention. In this example, the delay block <highlight><bold>41</bold></highlight> of <cross-reference target="DRAWINGS">FIG. 6</cross-reference> generates the QD signal which is the QA signal delayed by one data bit period (P<highlight><bold>1</bold></highlight>). The AND gate <highlight><bold>42</bold></highlight> of <cross-reference target="DRAWINGS">FIG. 6</cross-reference> generates the QF signal which includes 1&apos;s each having one data bit period whenever there is a 0-to-1 data transition in the QA signal. </paragraph>
<paragraph id="P-0035" lvl="0"><number>&lsqb;0035&rsqb;</number> Now referring to the first four rows in <cross-reference target="DRAWINGS">FIG. 10</cross-reference>, it illustrates the relationship between the QC, QF and QG signals according to one embodiment of the invention. When the QF logic signal is 1 indicating that there is a 0-to-1 data transition, the QG logic signals are opposite of the QC logic signals. When the QF logic signal is 0 indicating that there is no data transition, the QG logic signals are the same as the QC logic signals. A QC signal is used as an input signal of the main charge pump <highlight><bold>22</bold></highlight> in <cross-reference target="DRAWINGS">FIG. 2</cross-reference>, and a QG signal is used as an input signal of the compensating charge pump <highlight><bold>23</bold></highlight>. </paragraph>
<paragraph id="P-0036" lvl="0"><number>&lsqb;0036&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 8</cross-reference> is an exemplary circuit schematic of a main charge pump and a compensating charge pump according to one embodiment of the present invention. A main charge pump includes a current mirror <highlight><bold>51</bold></highlight> and a main differential amplifier <highlight><bold>52</bold></highlight>. The main differential amplifier <highlight><bold>52</bold></highlight> receives differential input signals QC and QC/ from the phase detector <highlight><bold>21</bold></highlight> in <cross-reference target="DRAWINGS">FIG. 2</cross-reference> and includes differential output nodes N<highlight><bold>2</bold></highlight> and N<highlight><bold>3</bold></highlight> and two current paths <highlight><bold>54</bold></highlight> and <highlight><bold>55</bold></highlight>. The main differential amplifier <highlight><bold>52</bold></highlight> further includes resistors R<highlight><bold>1</bold></highlight> and R<highlight><bold>2</bold></highlight> connected in series between Vcc and the node N<highlight><bold>2</bold></highlight> and resistors R<highlight><bold>3</bold></highlight> and R<highlight><bold>4</bold></highlight> connected in series between Vcc and the node N<highlight><bold>3</bold></highlight>. The main differential amplifier <highlight><bold>52</bold></highlight> further includes a first input transistor T<highlight><bold>1</bold></highlight> and a second input transistor T<highlight><bold>2</bold></highlight>. In this example, T<highlight><bold>1</bold></highlight> and T<highlight><bold>2</bold></highlight> are NPN transistors. As to the transistor T<highlight><bold>1</bold></highlight>, its collector is connected to the node N<highlight><bold>2</bold></highlight> and its base receives the QC/ signal. As to the transistor T<highlight><bold>2</bold></highlight>, its collector is connected to the node N<highlight><bold>3</bold></highlight> and it base receives the QC signal. The emitters of T<highlight><bold>1</bold></highlight> and T<highlight><bold>2</bold></highlight> are coupled to each other. The differential amplifier <highlight><bold>52</bold></highlight> further includes current source transistors and resistors T<highlight><bold>5</bold></highlight>, T<highlight><bold>6</bold></highlight>, R<highlight><bold>5</bold></highlight> and R<highlight><bold>6</bold></highlight>. The current source transistors and resistors are connected to the emitters of T<highlight><bold>1</bold></highlight> and T<highlight><bold>2</bold></highlight> and the current mirror <highlight><bold>51</bold></highlight>. In this example, the transistors T<highlight><bold>5</bold></highlight> and T<highlight><bold>6</bold></highlight> are NPN transistors. </paragraph>
<paragraph id="P-0037" lvl="0"><number>&lsqb;0037&rsqb;</number> Still referring to <cross-reference target="DRAWINGS">FIG. 8, a</cross-reference> compensating charge pump includes a compensating differential amplifier <highlight><bold>53</bold></highlight>. The compensating differential amplifier <highlight><bold>53</bold></highlight> receives differential input signals QG and QG/ from the XOR <highlight><bold>25</bold></highlight> in <cross-reference target="DRAWINGS">FIG. 2</cross-reference> and includes the nodes N<highlight><bold>2</bold></highlight> and N<highlight><bold>3</bold></highlight> and two current paths <highlight><bold>56</bold></highlight> and <highlight><bold>57</bold></highlight>. The compensating differential amplifier <highlight><bold>53</bold></highlight> further comprises a third input transistor T<highlight><bold>3</bold></highlight> and a fourth input transistor T<highlight><bold>4</bold></highlight>. In this example, T<highlight><bold>3</bold></highlight> and T<highlight><bold>4</bold></highlight> are NPN transistors. As to the transistor T<highlight><bold>3</bold></highlight>, its collector is connected to the node N<highlight><bold>2</bold></highlight> and its base receives the QG signal. As to the transistor T<highlight><bold>4</bold></highlight>, its collector is connected to the node N<highlight><bold>3</bold></highlight> and it base receives the QG/ signal. The emitters of T<highlight><bold>3</bold></highlight> and T<highlight><bold>4</bold></highlight> are coupled to each other. The differential amplifier <highlight><bold>53</bold></highlight> further includes current source transistors and resistors T<highlight><bold>7</bold></highlight>, T<highlight><bold>8</bold></highlight>, R<highlight><bold>7</bold></highlight> and R<highlight><bold>8</bold></highlight>. The current source transistors and resistors are connected to the emitters of T<highlight><bold>3</bold></highlight> and T<highlight><bold>4</bold></highlight> and the current mirror <highlight><bold>51</bold></highlight>. In this example, the transistors T<highlight><bold>7</bold></highlight> and T<highlight><bold>8</bold></highlight> are NPN transistors. In another embodiment, the compensating charge pump may be included in the main charge pump. </paragraph>
<paragraph id="P-0038" lvl="0"><number>&lsqb;0038&rsqb;</number> To optimize performance and exact compensation, the sizes and characteristics of the devices should be made the same (e.g., R<highlight><bold>1</bold></highlight>-R<highlight><bold>4</bold></highlight> should be the same; T<highlight><bold>1</bold></highlight>-T<highlight><bold>4</bold></highlight> should be the same; T<highlight><bold>5</bold></highlight>-T<highlight><bold>8</bold></highlight> should be the same; and R<highlight><bold>5</bold></highlight>-R<highlight><bold>8</bold></highlight> should be the same). Furthermore, for integrated circuit implementation, the placement of the devices should be symmetrical to minimize thermal gradient and process gradient. For example, the resistors R<highlight><bold>1</bold></highlight>-R<highlight><bold>4</bold></highlight> are placed as shown in <cross-reference target="DRAWINGS">FIG. 9</cross-reference> (cross-quading). </paragraph>
<paragraph id="P-0039" lvl="0"><number>&lsqb;0039&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 11</cross-reference> illustrates one embodiment of a loop filter in accordance with the present invention. The loop filter comprises a negative impedance amplifier <highlight><bold>63</bold></highlight> and a RC unit <highlight><bold>64</bold></highlight> across the nodes N<highlight><bold>2</bold></highlight> and N<highlight><bold>3</bold></highlight>. The charge pumps shown in <cross-reference target="DRAWINGS">FIG. 8</cross-reference> produce charging currents, and the capacitor C<highlight><bold>1</bold></highlight> in the loop filter in <cross-reference target="DRAWINGS">FIG. 11</cross-reference> converts the currents to a voltage. The negative impedance amplifier compensates the leakage current of capacitor C<highlight><bold>1</bold></highlight> through resistors R<highlight><bold>1</bold></highlight>-R<highlight><bold>4</bold></highlight> and helps to maintain the charge in the capacitor C<highlight><bold>1</bold></highlight>. In this example, the RC unit <highlight><bold>64</bold></highlight> is a double-ended filter (see <cross-reference target="DRAWINGS">FIG. 13</cross-reference>) rather than a single-ended filter (see <cross-reference target="DRAWINGS">FIG. 12</cross-reference>). As shown in <cross-reference target="DRAWINGS">FIG. 12, a</cross-reference> single-ended filter <highlight><bold>72</bold></highlight> includes a resistor RA and a capacitor CA, and one end of the filter is connected to the ground. Establishing a voltage across the filter is relatively simple. A current comes into the filter <highlight><bold>72</bold></highlight> and charges the capacitor CA, and the voltage is established across the filter <highlight><bold>72</bold></highlight> between the node <highlight><bold>73</bold></highlight> and the ground. While a double-ended filter is more preferable over a single-ended filter, a single-ended filter may be employed in another embodiment. In an alternative embodiment, the negative impedance amplifier may be included in the main charge pump or the compensating charge pump instead of being included in the loop filter. </paragraph>
<paragraph id="P-0040" lvl="0"><number>&lsqb;0040&rsqb;</number> Now referring to <cross-reference target="DRAWINGS">FIG. 13, a</cross-reference> double-ended filter <highlight><bold>82</bold></highlight> includes a resistor RB and a capacitor CB, and neither end of the filter is connected to the ground. Establishing a voltage across the filter <highlight><bold>82</bold></highlight> is not as simple as that of a single-ended filter because the filter <highlight><bold>82</bold></highlight> is not directly connected to a ground or power. A current can come into the filter <highlight><bold>82</bold></highlight> through either end of the filter (the node <highlight><bold>83</bold></highlight> or the node <highlight><bold>84</bold></highlight>). <cross-reference target="DRAWINGS">FIG. 14</cross-reference> illustrates another embodiment of a double-ended filter. It should be noted that there are many other ways of implementing a double-ended filter and a single-ended filter. </paragraph>
<paragraph id="P-0041" lvl="0"><number>&lsqb;0041&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 15</cross-reference> illustrates the operation of the negative impedance amplifier in conjunction with the RC unit <highlight><bold>64</bold></highlight>. <cross-reference target="DRAWINGS">FIG. 15</cross-reference> displays the AC equivalent circuit around nodes N<highlight><bold>2</bold></highlight> and N<highlight><bold>3</bold></highlight>. The resistors R<highlight><bold>1</bold></highlight> and R<highlight><bold>2</bold></highlight> in <cross-reference target="DRAWINGS">FIG. 8</cross-reference> can be represented as RIO in <cross-reference target="DRAWINGS">FIG. 15</cross-reference>. The resistors R<highlight><bold>3</bold></highlight> and R<highlight><bold>4</bold></highlight> in <cross-reference target="DRAWINGS">FIG. 8</cross-reference> can be represented as R<highlight><bold>11</bold></highlight> in <cross-reference target="DRAWINGS">FIG. 15</cross-reference>. The negative impedance amplifier <highlight><bold>63</bold></highlight> in <cross-reference target="DRAWINGS">FIG. 11</cross-reference> can be represented as R<highlight><bold>12</bold></highlight> and R<highlight><bold>13</bold></highlight> in <cross-reference target="DRAWINGS">FIG. 15</cross-reference>. The negative impedance of R<highlight><bold>12</bold></highlight> and R<highlight><bold>13</bold></highlight> in effect cancels the positive impedance of R<highlight><bold>10</bold></highlight> and R<highlight><bold>11</bold></highlight> as follows. Note in <cross-reference target="DRAWINGS">FIG. 15</cross-reference> that all resistors are connected to signal ground. The negative impedance R<highlight><bold>12</bold></highlight> is therefore electrically in parallel with R<highlight><bold>10</bold></highlight> and similarly R<highlight><bold>11</bold></highlight> is in parallel with R<highlight><bold>13</bold></highlight>. The impedance between N<highlight><bold>2</bold></highlight> and ground, 1/(1/R-1/R), is therefore very large. It is as if R<highlight><bold>12</bold></highlight> had canceled the existence of R<highlight><bold>10</bold></highlight> leaving N<highlight><bold>2</bold></highlight> essentially isolated from signal ground. A similar analysis applies to N<highlight><bold>3</bold></highlight> and ground. This allows C<highlight><bold>1</bold></highlight> to minimize its leakage current to signal ground and to hold its charge and the voltage across itself when the main charge pump and the compensating charge pump cancel each other during a period when there is no data transition. When the voltage across C<highlight><bold>1</bold></highlight> is constant, the VCO output frequency remains constant as desired. Not shown in <cross-reference target="DRAWINGS">FIG. 15</cross-reference> but still connected to N<highlight><bold>2</bold></highlight> and N<highlight><bold>3</bold></highlight> are the collector resistances of T<highlight><bold>1</bold></highlight>-T<highlight><bold>4</bold></highlight> in <cross-reference target="DRAWINGS">FIG. 8</cross-reference>. They are very large and therefore omitted without affecting the functionality of the RC filter <highlight><bold>64</bold></highlight>. </paragraph>
<paragraph id="P-0042" lvl="0"><number>&lsqb;0042&rsqb;</number> The operation of the charge pumps in <cross-reference target="DRAWINGS">FIG. 8</cross-reference> and the loop filter in <cross-reference target="DRAWINGS">FIG. 11</cross-reference> is illustrated below according to one embodiment of the present invention. When there is a data transition, the compensating charge pump will enhance the operation of the main charge pump (e.g., the current produced by the compensating charge pump will add to the current produced by the main charge pump). When there is a data transition, and the clock signal is ahead or behind the data, the net current produced by the main charge pump and the compensating charge pump will not be zero. The non-zero current will charge or discharge the filter unit <highlight><bold>64</bold></highlight> causing the voltage across nodes N<highlight><bold>2</bold></highlight> and N<highlight><bold>3</bold></highlight> to change. Such change will then cause the clock signal from the VCO to slow down in case it is ahead of the data or speed up in case it is behind the data thus accomplishing the phase locking function. When there is no data transition, there is no way to compare the phases of the clock signal and the data. In this case the compensating charge pump will produce a current that will in effect compensate (e.g., counterbalance or cancel) the current produced by the main charge pump so that the filter unit <highlight><bold>64</bold></highlight> is neither charged nor discharged (e.g., the voltage across nodes N<highlight><bold>2</bold></highlight> and N<highlight><bold>3</bold></highlight> will remain the same or constant). </paragraph>
<paragraph id="P-0043" lvl="0"><number>&lsqb;0043&rsqb;</number> Now referring to <cross-reference target="DRAWINGS">FIGS. 2, 8</cross-reference>, <highlight><bold>10</bold></highlight> (second and third columns) and <highlight><bold>11</bold></highlight>, the operation of the charge pumps and loop filter is described in detail when there is a data transition in accordance with one embodiment of the present invention. The QF signal from the one-shot unit <highlight><bold>26</bold></highlight> will be high (1), and the QC and QC/ signals which are the input signals to the main differential amplifier <highlight><bold>52</bold></highlight> will be the opposite of the QG and QG/ signals which are the input signals to the compensating differential amplifier <highlight><bold>53</bold></highlight>. When QC is high (1) and QC/ is low (0), indicating that the clock signal CLK&prime; <highlight><bold>29</bold></highlight> is ahead of the data&prime; <highlight><bold>28</bold></highlight>, QG is low (0) and QG/ is high (1). Accordingly, T<highlight><bold>1</bold></highlight> and T<highlight><bold>3</bold></highlight> will be off, and T<highlight><bold>2</bold></highlight> and T<highlight><bold>4</bold></highlight> will be on. So the current will flow through the current paths <highlight><bold>55</bold></highlight> and <highlight><bold>57</bold></highlight>. No current will flow through the current paths <highlight><bold>54</bold></highlight> and <highlight><bold>56</bold></highlight>. Hence, node N<highlight><bold>2</bold></highlight> will be pulled toward Vcc (at N<highlight><bold>1</bold></highlight>), and the voltage at the node N<highlight><bold>3</bold></highlight> will be pulled toward ground (at N<highlight><bold>5</bold></highlight>) due to current paths <highlight><bold>55</bold></highlight> and <highlight><bold>57</bold></highlight>. The compensating differential amplifier <highlight><bold>53</bold></highlight> enhances the operation of the main differential amplifier <highlight><bold>52</bold></highlight> by (i) shutting off its current path <highlight><bold>56</bold></highlight> coupled to the current path <highlight><bold>54</bold></highlight> of the main differential amplifier <highlight><bold>52</bold></highlight> (which is also off) and (ii) adding current through its current path <highlight><bold>57</bold></highlight> coupled to the current path <highlight><bold>55</bold></highlight> of the main differential amplifier <highlight><bold>52</bold></highlight>. Pulling N<highlight><bold>2</bold></highlight> toward Vcc (at N<highlight><bold>1</bold></highlight>) and N<highlight><bold>3</bold></highlight> toward ground (at N<highlight><bold>5</bold></highlight>) serves to discharge C<highlight><bold>1</bold></highlight> in the filter <highlight><bold>64</bold></highlight>. </paragraph>
<paragraph id="P-0044" lvl="0"><number>&lsqb;0044&rsqb;</number> When QC is low (0) and QC/ is high (1), indicating that the clock signal CLK&prime; <highlight><bold>29</bold></highlight> is behind the data&prime; <highlight><bold>28</bold></highlight>, QG is high (1) and QG/ is low (0). Accordingly, T<highlight><bold>1</bold></highlight> and T<highlight><bold>3</bold></highlight> will be on, and T<highlight><bold>2</bold></highlight> and T<highlight><bold>4</bold></highlight> will be off. The current will flow through the current paths <highlight><bold>54</bold></highlight> and <highlight><bold>56</bold></highlight>, and no current will flow through the current paths <highlight><bold>55</bold></highlight> and <highlight><bold>57</bold></highlight>. The voltage at the node N<highlight><bold>2</bold></highlight> will be pulled toward ground (at N<highlight><bold>5</bold></highlight>) due to the current flowing through the paths <highlight><bold>54</bold></highlight> and <highlight><bold>56</bold></highlight>, and the voltage at the node N<highlight><bold>3</bold></highlight> will be pulled toward Vcc (at Ni) due to lack of current in paths <highlight><bold>55</bold></highlight> and <highlight><bold>57</bold></highlight>. The compensating differential amplifier <highlight><bold>53</bold></highlight> again enhances the operation of the main differential amplifier <highlight><bold>52</bold></highlight> by (i) shutting off its current path <highlight><bold>57</bold></highlight> coupled to the current path <highlight><bold>55</bold></highlight> of the main differential amplifier <highlight><bold>52</bold></highlight> (which is also off) and (ii) adding current through its current path <highlight><bold>56</bold></highlight> coupled to the current path <highlight><bold>54</bold></highlight> of the main differential amplifier <highlight><bold>52</bold></highlight>. Pulling N<highlight><bold>2</bold></highlight> toward ground and N<highlight><bold>3</bold></highlight> toward Vcc serve to charge C<highlight><bold>1</bold></highlight> in Filter <highlight><bold>64</bold></highlight>. </paragraph>
<paragraph id="P-0045" lvl="0"><number>&lsqb;0045&rsqb;</number> Therefore, when there is a data transition, and the clock signal is either ahead or behind the data, the compensating differential amplifier will enhance the operation of the main differential amplifier. A current will flow into the capacitor C<highlight><bold>1</bold></highlight> through N<highlight><bold>3</bold></highlight> or N<highlight><bold>2</bold></highlight> depending on whether the clock signal is ahead or behind. The capacitor C<highlight><bold>1</bold></highlight> in filter unit <highlight><bold>64</bold></highlight> will be either discharged or charged and the voltage across the nodes N<highlight><bold>2</bold></highlight> and N<highlight><bold>3</bold></highlight> will be decreased or increased, respectively, as a result. In response to the decrease or increase in the voltage across capacitor C<highlight><bold>1</bold></highlight> of the filter unit <highlight><bold>64</bold></highlight>, the VCO <highlight><bold>27</bold></highlight> in <cross-reference target="DRAWINGS">FIG. 2</cross-reference> will slow down the clock signal <highlight><bold>29</bold></highlight> if the clock signal is ahead in phase compared to the data, or speed up the clock signal <highlight><bold>29</bold></highlight> if the clock signal is behind in phase compared to the data. </paragraph>
<paragraph id="P-0046" lvl="0"><number>&lsqb;0046&rsqb;</number> Now referring to <cross-reference target="DRAWINGS">FIGS. 2, 8</cross-reference>, <highlight><bold>10</bold></highlight> (fourth and fifth columns) and <highlight><bold>11</bold></highlight>, the operation of the charge pumps and loop filter is described in detail when there is no data transition (e.g., data <highlight><bold>34</bold></highlight> stays at 1&apos;s or 0&apos;s) in accordance with one embodiment of the present invention. In this instance, the QF signal from the one-shot unit <highlight><bold>26</bold></highlight> will be low (0), and the QC and QC/ signals which are the input signals to the main differential amplifier <highlight><bold>52</bold></highlight> will be the same as the QG and QG/ signals which are the input signals to the compensating differential amplifier <highlight><bold>53</bold></highlight>. When QC is high (1) and QC/ is low (0), QG is high (1) and QG/ is low (0). T<highlight><bold>2</bold></highlight> and T<highlight><bold>3</bold></highlight> will be on, and T<highlight><bold>1</bold></highlight> and T<highlight><bold>4</bold></highlight> will be off. The current will flow through the current paths <highlight><bold>55</bold></highlight> and <highlight><bold>56</bold></highlight> and the resistors R<highlight><bold>1</bold></highlight>, R<highlight><bold>2</bold></highlight>, R<highlight><bold>3</bold></highlight> and R<highlight><bold>4</bold></highlight>. No current will flow through the current paths <highlight><bold>54</bold></highlight> and <highlight><bold>57</bold></highlight>. The currents through path <highlight><bold>55</bold></highlight>, R<highlight><bold>3</bold></highlight>, R<highlight><bold>4</bold></highlight> and through path <highlight><bold>56</bold></highlight>, R<highlight><bold>1</bold></highlight>, R<highlight><bold>2</bold></highlight> are quiescent currents. No net currents will flow into or out of filter <highlight><bold>64</bold></highlight> connected to node N<highlight><bold>2</bold></highlight> and node N<highlight><bold>3</bold></highlight>. The capacitor C<highlight><bold>1</bold></highlight> in filter <highlight><bold>64</bold></highlight> is neither being charged nor discharged by the currents. Hence, the voltage across nodes N<highlight><bold>2</bold></highlight> and N<highlight><bold>3</bold></highlight> will remain constant and equal to whatever it was at the beginning of the no data transition period. The operation of the compensating differential amplifier <highlight><bold>53</bold></highlight> thus in effect compensates the operation of the main differential amplifier <highlight><bold>52</bold></highlight> by (i) shutting off its current path <highlight><bold>57</bold></highlight> coupled to the current path <highlight><bold>55</bold></highlight> of the main differential amplifier <highlight><bold>52</bold></highlight> (which is on) and (ii) turning on its current path <highlight><bold>56</bold></highlight> coupled to the current path <highlight><bold>54</bold></highlight> of the main differential amplifier <highlight><bold>52</bold></highlight> (which is off). </paragraph>
<paragraph id="P-0047" lvl="0"><number>&lsqb;0047&rsqb;</number> When QC is low (0) and QC/ is high (1), QG is low (0) and QG/ is high (1). T<highlight><bold>1</bold></highlight> and T<highlight><bold>4</bold></highlight> will be on, and T<highlight><bold>2</bold></highlight> and T<highlight><bold>3</bold></highlight> will be off. The current will flow through the current paths <highlight><bold>54</bold></highlight> and <highlight><bold>57</bold></highlight> and the resistors R<highlight><bold>1</bold></highlight>, R<highlight><bold>2</bold></highlight>, R<highlight><bold>3</bold></highlight> and R<highlight><bold>4</bold></highlight>. No current will flow through the current paths <highlight><bold>55</bold></highlight> and <highlight><bold>56</bold></highlight>. Hence, the voltage across the node N<highlight><bold>2</bold></highlight> and node N<highlight><bold>3</bold></highlight> will remain constant and equal to whatever it was at the beginning of the no data transition period. The compensating differential amplifier <highlight><bold>53</bold></highlight> thus in effect compensates the operation of the main differential amplifier <highlight><bold>52</bold></highlight> by (i) shutting off its current path <highlight><bold>56</bold></highlight> coupled to the current path <highlight><bold>54</bold></highlight> of the main differential amplifier <highlight><bold>52</bold></highlight> (which is on) and (ii) turning on its current path <highlight><bold>57</bold></highlight> coupled to the current path <highlight><bold>55</bold></highlight> of the main differential amplifier <highlight><bold>52</bold></highlight> (which is off). </paragraph>
<paragraph id="P-0048" lvl="0"><number>&lsqb;0048&rsqb;</number> Therefore, when there is no data transition, the compensating differential amplifier will in effect compensate or cancel the operation of the main differential amplifier, the filter unit <highlight><bold>64</bold></highlight> will not be charged or discharged, and the voltages across the nodes N<highlight><bold>2</bold></highlight> and N<highlight><bold>3</bold></highlight> will remain constant. The VCO <highlight><bold>27</bold></highlight> in <cross-reference target="DRAWINGS">FIG. 2</cross-reference> in turn will not change, and the speed or the frequency of the clock signal <highlight><bold>29</bold></highlight> will maintain at the level it was prior to entering into the no data transition period (or at the onset of the no data transition period depending on how the no data transition period is defined). </paragraph>
<paragraph id="P-0049" lvl="0"><number>&lsqb;0049&rsqb;</number> According to one embodiment, the present invention is implemented as a monolithic integrated circuit. While the invention currently uses the SiGe BiCMOS technology, it may be implemented using other technologies such as the III-V technologies (e.g., InP, GaAs, InGaAs). In the current implementation, bipolar transistors (in particular, NPN transistors) are preferred over MOSFETs to achieve the high clock and data rates. </paragraph>
<paragraph id="P-0050" lvl="0"><number>&lsqb;0050&rsqb;</number> While the present invention has been particularly described with reference to the various figures and embodiments, it should be understood that these are for illustration only and should not be taken as limiting the scope of the invention. There may be many other ways to implement the invention. Many changes and modifications may be made to the invention, by one having ordinary skill in the art, without departing from the spirit and scope of the invention. </paragraph>
</section>
</detailed-description>
</subdoc-description>
<subdoc-claims>
<heading lvl="1">What is claimed is: </heading>
<claim id="CLM-00001">
<claim-text><highlight><bold>1</bold></highlight>. A clock recovery apparatus comprising: 
<claim-text>a phase detector for receiving a data signal and a clock signal; </claim-text>
<claim-text>a one-shot coupled to said phase detector; </claim-text>
<claim-text>an XOR coupled to said phase detector and said one shot circuit; </claim-text>
<claim-text>a first charge pump coupled to said phase detector and said XOR; </claim-text>
<claim-text>a second charge pump coupled to said first charge pump and said XOR; </claim-text>
<claim-text>a filter coupled to said first charge pump and said second charge pump; and </claim-text>
<claim-text>a voltage controlled oscillator coupled to said filter and said phase detector, said voltage controlled oscillator for generating said clock signal. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00002">
<claim-text><highlight><bold>2</bold></highlight>. A clock recovery apparatus according to <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, 
<claim-text>wherein said first charge pump includes a first differential amplifier, </claim-text>
<claim-text>wherein said first differential amplifier includes: 
<claim-text>a first output node and a second output node; </claim-text>
<claim-text>a first resistor coupled to said first output node; </claim-text>
<claim-text>a first transistor for receiving an input from said phase detector, said first transistor coupled to said first output node; </claim-text>
<claim-text>a second resistor coupled to said second output node; </claim-text>
<claim-text>a second transistor for receiving an input from said phase detector, said second transistor coupled to said second output node and said first transistor; and </claim-text>
<claim-text>a first current source coupled to said first and second transistors, </claim-text>
</claim-text>
<claim-text>wherein said second charge pump includes a second differential amplifier, </claim-text>
<claim-text>wherein said second differential amplifier includes: 
<claim-text>a third transistor for receiving an input from said XOR, said third transistor coupled to said first output node; </claim-text>
<claim-text>a fourth transistor for receiving an input from said XOR, said fourth transistor coupled to said second output node and said third transistor; and </claim-text>
<claim-text>a second current source coupled to said third and fourth transistors, </claim-text>
</claim-text>
<claim-text>wherein said filter is coupled between said first output node and said second output node. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00003">
<claim-text><highlight><bold>3</bold></highlight>. A clock recovery apparatus according to <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein said first charge pump and said second charge pump include NPN transistors. </claim-text>
</claim>
<claim id="CLM-00004">
<claim-text><highlight><bold>4</bold></highlight>. A clock recovery apparatus according to <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein said first charge pump includes cross-quading resistors. </claim-text>
</claim>
<claim id="CLM-00005">
<claim-text><highlight><bold>5</bold></highlight>. A clock recovery apparatus according to <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein said first charge pump and said second charge pump include Si and Ge. </claim-text>
</claim>
<claim id="CLM-00006">
<claim-text><highlight><bold>6</bold></highlight>. A clock recovery apparatus according to <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein a frequency of said clock signal generated by said voltage controlled oscillator is greater than one GHz. </claim-text>
</claim>
<claim id="CLM-00007">
<claim-text><highlight><bold>7</bold></highlight>. A clock recovery apparatus according to <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein a frequency of said clock signal generated by said voltage controlled oscillator is greater than eight GHz. </claim-text>
</claim>
<claim id="CLM-00008">
<claim-text><highlight><bold>8</bold></highlight>. A clock recovery apparatus according to <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, 
<claim-text>wherein said filter includes negative impedance, </claim-text>
<claim-text>wherein said filter is not directly connected to a ground. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00009">
<claim-text><highlight><bold>9</bold></highlight>. A clock recovery apparatus according to <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, 
<claim-text>wherein said second charge pump produces a current that is added to a current produced by said first charge pump when there is a transition in said data signal and if said data signal and said clock signal are out of phase synchronization, </claim-text>
<claim-text>wherein said second charge pump produces a current that in effect counterbalances a current produced by said first charge pump when there is no transition in said data signal. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00010">
<claim-text><highlight><bold>10</bold></highlight>. A differential circuit used for recovering a clock signal from data comprising: 
<claim-text>a first differential charge pump having first differential inputs and first double outputs; </claim-text>
<claim-text>a second differential charge pump coupled to said first differential charge pump, said second differential charge pump having second differential inputs and second double outputs; </claim-text>
<claim-text>said first double outputs having a first node and a second node; </claim-text>
<claim-text>said second double outputs having a third node and a fourth node, wherein said first node is coupled to said third node, and said second node is coupled to said fourth node; and </claim-text>
<claim-text>a filter coupled between said first node and said second node, </claim-text>
<claim-text>wherein said filter is not directly connected to a ground, </claim-text>
<claim-text>wherein when there is no data transition, the voltage across said first node and said second node remains substantially unchanged, </claim-text>
<claim-text>wherein when there is a data transition and if said clock signal and said data are out of phase synchronization, then the voltage across said first node and said second node changes. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00011">
<claim-text><highlight><bold>11</bold></highlight>. A clock recovery apparatus according to <dependent-claim-reference depends_on="CLM-00011">claim 10</dependent-claim-reference>, 
<claim-text>wherein said first differential charge pump includes: 
<claim-text>a first resistor coupled to said first node; </claim-text>
<claim-text>a first NPN transistor coupled to said first node; </claim-text>
<claim-text>a second resistor coupled to said second node; </claim-text>
<claim-text>a second NPN transistor coupled to said second node and said first NPN transistor; and </claim-text>
<claim-text>a first current source coupled to said first and second NPN transistors, </claim-text>
</claim-text>
<claim-text>wherein said second differential charge pump includes: 
<claim-text>a third NPN transistor coupled to said first node; </claim-text>
<claim-text>a fourth NPN transistor coupled to said second node and said third NPN transistor; and </claim-text>
<claim-text>a second current source coupled to said third and fourth NPN transistors. </claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00012">
<claim-text><highlight><bold>12</bold></highlight>. A clock recovery apparatus according to <dependent-claim-reference depends_on="CLM-00011">claim 10</dependent-claim-reference>, wherein said first differential charge pump and second differential charge pump include Si and Ge. </claim-text>
</claim>
<claim id="CLM-00013">
<claim-text><highlight><bold>13</bold></highlight>. A clock recovery apparatus according to <dependent-claim-reference depends_on="CLM-00011">claim 10</dependent-claim-reference>, wherein said first differential charge pump and said second differential charge pump operate at a frequency greater than one GHz. </claim-text>
</claim>
<claim id="CLM-00014">
<claim-text><highlight><bold>14</bold></highlight>. A clock recovery apparatus comprising: 
<claim-text>(a) means for comparing a phase of data and a phase of a clock signal; </claim-text>
<claim-text>(b) means for detecting a transition in said data; </claim-text>
<claim-text>(c) means for producing a current through a first path including a first node and a current through a second path including a second node; </claim-text>
<claim-text>(d) means for changing the voltage across said first node and said second node when there is a data transition and if said clock signal and said data are out of phase synchronization; </claim-text>
<claim-text>(e) means for maintaining a voltage across said first node and said second node when there is no data transition; </claim-text>
<claim-text>(f) means for speeding up said clock signal when there is a transition in said data and if said clock signal is retarded in phase compared to said data; </claim-text>
<claim-text>(g) means for slowing down said clock signal when there is a transition in said data and if said clock signal is advanced in phase compared to said data; and </claim-text>
<claim-text>(h) means for maintaining a frequency of said clock signal when there is no transition in said data. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00015">
<claim-text><highlight><bold>15</bold></highlight>. A clock recovery apparatus according to <dependent-claim-reference depends_on="CLM-00011">claim 14</dependent-claim-reference>, 
<claim-text>wherein said (c) means includes a main differential charge pump and a compensating differential charge pump, </claim-text>
<claim-text>wherein said main differential charge pump includes said first node and said second node as its output nodes, </claim-text>
<claim-text>wherein said compensating differential charge pump includes said first node and said second node as its output nodes. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00016">
<claim-text><highlight><bold>16</bold></highlight>. A clock recovery apparatus according to <dependent-claim-reference depends_on="CLM-00011">claim 14</dependent-claim-reference>, wherein a frequency of said clock signal is greater than two GHz. </claim-text>
</claim>
<claim id="CLM-00017">
<claim-text><highlight><bold>17</bold></highlight>. A clock recovery apparatus comprising: 
<claim-text>(a) means for comparing a phase of data and a phase of a clock signal; </claim-text>
<claim-text>(b) means for detecting a transition in said data; </claim-text>
<claim-text>(c) means for producing a voltage across a double-ended filter; </claim-text>
<claim-text>(d) means for providing positive impedance coupled to said double-ended filter; </claim-text>
<claim-text>(e) means for providing negative impedance coupled to said double-ended filter; and </claim-text>
<claim-text>(f) means for providing said clock signal in response to said voltage. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00018">
<claim-text><highlight><bold>18</bold></highlight>. A clock recovery apparatus according to <dependent-claim-reference depends_on="CLM-00011">claim 17</dependent-claim-reference>, wherein a frequency of said clock signal is greater than two GHz. </claim-text>
</claim>
<claim id="CLM-00019">
<claim-text><highlight><bold>19</bold></highlight>. A clock recovery apparatus comprising: 
<claim-text>(a) means for comparing a phase of data and a phase of a clock signal; </claim-text>
<claim-text>(b) means for detecting a transition in said data; </claim-text>
<claim-text>(c) means for producing a first current; </claim-text>
<claim-text>(d) means for producing a second current; </claim-text>
<claim-text>(e) means for adding said second current to said first current when there is a transition in said data and if said data and said clock signal are out of phase synchronization; </claim-text>
<claim-text>(f) means for counterbalancing said second current with said first current when there is no transition in said data; and </claim-text>
<claim-text>(g) means for generating said clock signal in response to said first and second currents. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00020">
<claim-text><highlight><bold>20</bold></highlight>. A clock recovery apparatus according to <dependent-claim-reference depends_on="CLM-00011">claim 19</dependent-claim-reference> further comprising means for producing a voltage across a filter in response to said first and second currents, 
<claim-text>wherein said filter includes a first end and a second end, </claim-text>
<claim-text>wherein when there is no transition in said data, the differential voltage level at said first end and said second end remains substantially unchanged, </claim-text>
<claim-text>wherein when there is a transition in said data and if said data and said clock signal are out of phase synchronization, the differential voltage level at said first end and said second end changes, </claim-text>
<claim-text>wherein a frequency of said clock signal is greater than one GHz. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00021">
<claim-text><highlight><bold>21</bold></highlight>. A clock recovery apparatus comprising: 
<claim-text>a phase detector for comparing data and a clock signal; </claim-text>
<claim-text>a control circuit for detecting a transition in said data, said control circuit coupled to said phase detector; </claim-text>
<claim-text>a first charge pump for producing a first current, said first charge pump coupled to said phase detector; and </claim-text>
<claim-text>a second charge pump for producing a second current, said second charge pump coupled to said control circuit and said first charge pump, </claim-text>
<claim-text>wherein a frequency of said clock signal is increased when there is a transition in said data and if said clock signal is retarded in phase compared to said data, </claim-text>
<claim-text>wherein the frequency of said clock signal is decreased when there is a transition in said data and if said clock signal is advanced in phase compared to said data, </claim-text>
<claim-text>wherein the frequency of said clock signal is substantially unchanged when there is no transition in said data. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00022">
<claim-text><highlight><bold>22</bold></highlight>. A clock recovery apparatus according to <dependent-claim-reference depends_on="CLM-00022">claim 21</dependent-claim-reference>, wherein the frequency of said clock signal is greater than one GHz. </claim-text>
</claim>
<claim id="CLM-00023">
<claim-text><highlight><bold>23</bold></highlight>. A clock recovery apparatus according to <dependent-claim-reference depends_on="CLM-00022">claim 21</dependent-claim-reference> further comprising: 
<claim-text>a filter coupled to said first charge pump; </claim-text>
<claim-text>a voltage controlled oscillator for generating said clock signal, said voltage controlled oscillator coupled to said filter. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00024">
<claim-text><highlight><bold>24</bold></highlight>. A method for recovering a clock signal, said method comprising: 
<claim-text>(a) receiving data and a clock signal; </claim-text>
<claim-text>(b) detecting a transition in said data; </claim-text>
<claim-text>(c) comparing a phase of said data and a phase of said clock signal; </claim-text>
<claim-text>(d) producing a first current through a first current path, </claim-text>
<claim-text>(e) producing a second current through a second current path, </claim-text>
<claim-text>(f) speeding up said clock signal when there is a transition in said data and if said clock signal is retarded in phase compared to said data; </claim-text>
<claim-text>(g) slowing down said clock signal when there is a transition in said data and if said clock signal is advanced in phase compared to said data; and </claim-text>
<claim-text>(h) maintaining a frequency of said clock signal when there is no transition in said data. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00025">
<claim-text><highlight><bold>25</bold></highlight>. A method according to <dependent-claim-reference depends_on="CLM-00022">claim 24</dependent-claim-reference>, 
<claim-text>wherein said steps of (d) and (e) further comprising: 
<claim-text>adding said first current to said second current when there is a transition in said data and if said clock signal and data are out of phase synchronization; </claim-text>
<claim-text>compensating said first current with said second current when there no transition in said data. </claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00026">
<claim-text><highlight><bold>26</bold></highlight>. A method according to <dependent-claim-reference depends_on="CLM-00022">claim 24</dependent-claim-reference>, 
<claim-text>wherein said steps of (d) and (e) further comprising: 
<claim-text>producing a charging current to a first node of a filter connected between said first current path and said second current path when there is a data transition and if said clock signal is behind in phase compared to said data; </claim-text>
<claim-text>producing a discharging current to a second node of said filter when there is a data transition and if said clock signal is ahead in phase compared to said data; </claim-text>
<claim-text>producing a change in the differential voltage across said filter when there is a data transition and if said clock signal and said data are out of phase synchronization; </claim-text>
<claim-text>producing no charging or discharging current to said filter when there is no data transition; and </claim-text>
<claim-text>maintaining the differential voltage across said filter during a no data transition period. </claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00027">
<claim-text><highlight><bold>27</bold></highlight>. A method according to <dependent-claim-reference depends_on="CLM-00022">claim 24</dependent-claim-reference> further comprising: 
<claim-text>producing negative impedance. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00028">
<claim-text><highlight><bold>28</bold></highlight>. A method according to <dependent-claim-reference depends_on="CLM-00022">claim 24</dependent-claim-reference>, wherein a frequency of said clock signal is greater than two GHz.</claim-text>
</claim>
</subdoc-claims>
<subdoc-drawings id="DRAWINGS">
<heading lvl="0" align="CENTER">Drawings</heading>
<representative-figure>2</representative-figure>
<figure id="figure-D00000">
<image id="EMI-D00000" file="US20030001640A1-20030102-D00000.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00001">
<image id="EMI-D00001" file="US20030001640A1-20030102-D00001.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00002">
<image id="EMI-D00002" file="US20030001640A1-20030102-D00002.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00003">
<image id="EMI-D00003" file="US20030001640A1-20030102-D00003.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00004">
<image id="EMI-D00004" file="US20030001640A1-20030102-D00004.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00005">
<image id="EMI-D00005" file="US20030001640A1-20030102-D00005.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00006">
<image id="EMI-D00006" file="US20030001640A1-20030102-D00006.TIF" imf="TIFF" ti="DR"/>
</figure>
</subdoc-drawings>
</patent-application-publication>
