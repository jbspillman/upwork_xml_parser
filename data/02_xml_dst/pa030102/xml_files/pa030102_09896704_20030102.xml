<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE patent-application-publication SYSTEM "pap-v16-2002-01-01.dtd" [
<!ENTITY US20030001533A1-20030102-D00000.TIF SYSTEM "US20030001533A1-20030102-D00000.TIF" NDATA TIF>
<!ENTITY US20030001533A1-20030102-D00001.TIF SYSTEM "US20030001533A1-20030102-D00001.TIF" NDATA TIF>
<!ENTITY US20030001533A1-20030102-D00002.TIF SYSTEM "US20030001533A1-20030102-D00002.TIF" NDATA TIF>
<!ENTITY US20030001533A1-20030102-D00003.TIF SYSTEM "US20030001533A1-20030102-D00003.TIF" NDATA TIF>
<!ENTITY US20030001533A1-20030102-D00004.TIF SYSTEM "US20030001533A1-20030102-D00004.TIF" NDATA TIF>
<!ENTITY US20030001533A1-20030102-D00005.TIF SYSTEM "US20030001533A1-20030102-D00005.TIF" NDATA TIF>
]>
<patent-application-publication>
<subdoc-bibliographic-information>
<document-id>
<doc-number>20030001533</doc-number>
<kind-code>A1</kind-code>
<document-date>20030102</document-date>
</document-id>
<publication-filing-type>new</publication-filing-type>
<domestic-filing-data>
<application-number>
<doc-number>09896704</doc-number>
</application-number>
<application-number-series-code>09</application-number-series-code>
<filing-date>20010629</filing-date>
</domestic-filing-data>
<technical-information>
<classification-ipc>
<classification-ipc-primary>
<ipc>H02P007/00</ipc>
</classification-ipc-primary>
<classification-ipc-secondary>
<ipc>H02K017/32</ipc>
</classification-ipc-secondary>
<classification-ipc-secondary>
<ipc>H02K023/68</ipc>
</classification-ipc-secondary>
<classification-ipc-secondary>
<ipc>H02K027/30</ipc>
</classification-ipc-secondary>
<classification-ipc-edition>07</classification-ipc-edition>
</classification-ipc>
<classification-us>
<classification-us-primary>
<uspc>
<class>318</class>
<subclass>434000</subclass>
</uspc>
</classification-us-primary>
</classification-us>
<title-of-invention>Stall detection and thermal protection of vehicular systems having an electric motor</title-of-invention>
</technical-information>
<inventors>
<first-named-inventor>
<name>
<given-name>Julie</given-name>
<middle-name>Ann</middle-name>
<family-name>Kleinau</family-name>
</name>
<residence>
<residence-us>
<city>Bay City</city>
<state>MI</state>
<country-code>US</country-code>
</residence-us>
</residence>
<authority-applicant>INV</authority-applicant>
</first-named-inventor>
<inventor>
<name>
<given-name>Ashok</given-name>
<family-name>Chandy</family-name>
</name>
<residence>
<residence-us>
<city>Fenton</city>
<state>MI</state>
<country-code>US</country-code>
</residence-us>
</residence>
<authority-applicant>INV</authority-applicant>
</inventor>
</inventors>
<correspondence-address>
<name-1>EDMUND P. ANDERSON</name-1>
<name-2>DELPHI TECHNOLOGIES, INC.</name-2>
<address>
<address-1>Mail Code: 480-414-420</address-1>
<address-2>P.O. Box 5052</address-2>
<city>Troy</city>
<state>MI</state>
<postalcode>48007-5052</postalcode>
<country>
<country-code>US</country-code>
</country>
</address>
</correspondence-address>
</subdoc-bibliographic-information>
<subdoc-abstract>
<paragraph id="A-0001" lvl="0">A vehicular system includes a controller and an electric motor in signal communication with the controller for receiving current and rotating at speed; while the controller includes a first function responsive to a signal indicative of the speed of the electric motor, a filter responsive to a signal indicative of the heat generation rate of the vehicular system, a second function in signal communication with the first function and the filter, and a limit calculation function in signal communication with the second function for providing a motor current limit responsive to the second function; wherein a method for controlling the vehicular system includes receiving a signal indicative of the heat generation rate of the vehicular system, receiving a signal indicative of a speed of the electric motor, providing a scale factor or an overload value in response to the received signal indicative of speed, filtering the received signal indicative of heat generation rate in correspondence with a time constant, processing the filtered signal by executing a multiplication by the scale factor or a comparison with the overload value to produce a signal indicative of compliance with a duty cycle requirement, and calculating a motor current limit in correspondence with the processed signal to thereby protect the system from thermal overload while maximizing its performance. </paragraph>
</subdoc-abstract>
<subdoc-description>
<summary-of-invention>
<section>
<heading lvl="1">BACKGROUND </heading>
<paragraph id="P-0001" lvl="0"><number>&lsqb;0001&rsqb;</number> In a vehicle equipped with an electric power steering (&ldquo;EPS&rdquo;) system, for example, the steering assist torque is provided by an electric motor that is typically coupled to a steering column or shaft. Electric motors and their control circuits and devices generate heat at a rate that increases with operating current, and are thus designed to operate within design limits chosen to prevent damage due to thermal overload. Electric motors used in vehicular systems are subject to a wide range of loads for highly varying periods of time. For example, the electric motor in a vehicular electric power steering system may require only 15 Amperes (&ldquo;A&rdquo;) of electrical current for long periods of time such as for continuous operation, but may require 75 A of current for shorter periods such as up to about 5 seconds. </paragraph>
<paragraph id="P-0002" lvl="0"><number>&lsqb;0002&rsqb;</number> One type of approach is exemplified by U.S. Pat. No. 6,166,502 to Pattok et al., which shows a protection method for such a motor that limits a motor control parameter such as the motor operating current to the highest expected value (e.g., 75 A). Unfortunately, this type of approach does not provide different levels of protection for different motor speeds and generally requires that the motor and control circuit be designed to accommodate such loads for a worst-case motor speed. Such a motor and control circuit are greatly over-designed for normal use and thus unacceptably large, heavy, and inefficient for competitive market applications. </paragraph>
<paragraph id="P-0003" lvl="0"><number>&lsqb;0003&rsqb;</number> It is also known to use thermal sensors such as thermistors to directly measure temperature in a current limiting system. However, such sensors have drawbacks including generally slow response, calibration overhead and difficult placement. </paragraph>
</section>
<section>
<heading lvl="1">SUMMARY </heading>
<paragraph id="P-0004" lvl="0"><number>&lsqb;0004&rsqb;</number> The above described and other features are exemplified by the following Figures and Description in which a vehicular system is disclosed that includes a controller and an electric motor in signal communication with the controller for receiving current and rotating at speed; while the controller includes a first function responsive to a signal indicative of the speed of the electric motor, a filter responsive to a signal indicative of the heat generation rate of the vehicular system, a second function in signal communication with the first function and the filter, and a limit calculation function in signal communication with the second function for providing a motor current limit responsive to the second function; wherein a method for controlling the vehicular system includes receiving a signal indicative of the heat generation rate of the vehicular system, receiving a signal indicative of a speed of the electric motor, providing a scale factor or an overload value in response to the received signal indicative of speed, filtering the received signal indicative of heat generation rate in correspondence with a time constant, processing the filtered signal by executing a multiplication by the scale factor or a comparison with the overload value to produce a signal indicative of compliance with a duty cycle requirement, and calculating a motor current limit in correspondence with the processed signal to thereby protect the system from thermal overload while maximizing its performance.</paragraph>
</section>
</summary-of-invention>
<brief-description-of-drawings>
<section>
<heading lvl="1">BRIEF DESCRIPTION OF THE DRAWINGS </heading>
<paragraph id="P-0005" lvl="0"><number>&lsqb;0005&rsqb;</number> Referring now to the Figures wherein like elements are numbered alike: </paragraph>
<paragraph id="P-0006" lvl="0"><number>&lsqb;0006&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1</cross-reference> is a schematic diagram of an electric power steering system having a thermal protection controller; </paragraph>
<paragraph id="P-0007" lvl="0"><number>&lsqb;0007&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 2</cross-reference> is a schematic diagram for a portion of the controller of <cross-reference target="DRAWINGS">FIG. 1</cross-reference>; </paragraph>
<paragraph id="P-0008" lvl="0"><number>&lsqb;0008&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3</cross-reference> is a schematic diagram for an alternate embodiment portion of the controller of <cross-reference target="DRAWINGS">FIG. 1</cross-reference>; </paragraph>
<paragraph id="P-0009" lvl="0"><number>&lsqb;0009&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 4</cross-reference> is a schematic diagram for an alternate embodiment portion of the controller of <cross-reference target="DRAWINGS">FIG. 1</cross-reference>; </paragraph>
<paragraph id="P-0010" lvl="0"><number>&lsqb;0010&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 5</cross-reference> is a schematic diagram for an alternate embodiment portion of the controller of <cross-reference target="DRAWINGS">FIG. 1</cross-reference>; and </paragraph>
<paragraph id="P-0011" lvl="0"><number>&lsqb;0011&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 6</cross-reference> is a schematic diagram for an alternate embodiment portion of the controller of <cross-reference target="DRAWINGS">FIG. 1</cross-reference> </paragraph>
</section>
</brief-description-of-drawings>
<detailed-description>
<section>
<heading lvl="1">DESCRIPTION OF PREFERRED EMBODIMENTS </heading>
<paragraph id="P-0012" lvl="0"><number>&lsqb;0012&rsqb;</number> Referring to <cross-reference target="DRAWINGS">FIG. 1</cross-reference>, reference numeral <highlight><bold>70</bold></highlight> generally designates an electric power steering (&ldquo;EPS&rdquo;) system for a motor vehicle. A steering mechanism <highlight><bold>72</bold></highlight> is a rack-and-pinion type mechanism that includes a toothed rack (not shown) and a pinion gear (also not shown) located under a gear housing <highlight><bold>74</bold></highlight>. A steering wheel <highlight><bold>76</bold></highlight> is coupled to an upper steering shaft <highlight><bold>78</bold></highlight>. As the steering wheel <highlight><bold>76</bold></highlight> is turned, the upper steering shaft <highlight><bold>78</bold></highlight>, which is connected to a lower steering shaft <highlight><bold>80</bold></highlight> through a universal joint <highlight><bold>82</bold></highlight>, turns the pinion gear. Rotation of the pinion gear moves the toothed rack, which moves tie-rods <highlight><bold>84</bold></highlight> (only one shown) that, in turn, move steering knuckles <highlight><bold>86</bold></highlight> (only one shown), which turn wheels <highlight><bold>88</bold></highlight> (only one shown). </paragraph>
<paragraph id="P-0013" lvl="0"><number>&lsqb;0013&rsqb;</number> EPS assist torque is provided through an assist unit generally designated by reference numeral <highlight><bold>90</bold></highlight>, which includes a controller <highlight><bold>92</bold></highlight> and an electric motor <highlight><bold>94</bold></highlight>. A motor position commutation sensor <highlight><bold>95</bold></highlight> measures the position of the motor <highlight><bold>94</bold></highlight>. The controller <highlight><bold>92</bold></highlight> is powered by a vehicular power supply <highlight><bold>96</bold></highlight> through a supply line <highlight><bold>98</bold></highlight>. The controller <highlight><bold>92</bold></highlight> receives a signal indicative of the vehicle velocity on signal line <highlight><bold>100</bold></highlight>. Initial hand-wheel position is measured by position sensor <highlight><bold>102</bold></highlight> and fed to the controller <highlight><bold>92</bold></highlight> through line <highlight><bold>104</bold></highlight>. Position sensor <highlight><bold>102</bold></highlight> may be an optical-encoding type of sensor, a variable resistance type of sensor, or any other suitable type of position sensor for performing the functions of position sensor <highlight><bold>102</bold></highlight>. </paragraph>
<paragraph id="P-0014" lvl="0"><number>&lsqb;0014&rsqb;</number> As the steering wheel <highlight><bold>76</bold></highlight> is turned, the torque sensor <highlight><bold>103</bold></highlight> senses the torque applied to the steering wheel <highlight><bold>76</bold></highlight> by a vehicle operator. The torque sensor <highlight><bold>103</bold></highlight> may include a torsion bar (not shown) and a variable-resistance type of sensor (also not shown) that outputs a signal to controller <highlight><bold>92</bold></highlight> through line <highlight><bold>106</bold></highlight> in relation to the amount of twist on the torsion bar. Other suitable torque-sensing devices used with known signal processing techniques will suffice in alternate embodiments. </paragraph>
<paragraph id="P-0015" lvl="0"><number>&lsqb;0015&rsqb;</number> In response to the inputs on lines <highlight><bold>100</bold></highlight>, <highlight><bold>104</bold></highlight> and <highlight><bold>106</bold></highlight>, the controller <highlight><bold>92</bold></highlight> sends a command signal through line <highlight><bold>108</bold></highlight> to the electric motor <highlight><bold>94</bold></highlight>. The motor <highlight><bold>94</bold></highlight>, in turn, supplies torque-assist to the steering system through a worm <highlight><bold>107</bold></highlight> and a worm gear <highlight><bold>109</bold></highlight>, in order to provide a steering torque assist to the vehicular steering system in addition to a steering force exerted by the vehicle operator. </paragraph>
<paragraph id="P-0016" lvl="0"><number>&lsqb;0016&rsqb;</number> As shown in <cross-reference target="DRAWINGS">FIG. 2, a</cross-reference> motor current limiter is indicated generally by the reference numeral <highlight><bold>10</bold></highlight>. A portion of the controller <highlight><bold>92</bold></highlight> of <cross-reference target="DRAWINGS">FIG. 1</cross-reference> includes the motor current limiter <highlight><bold>10</bold></highlight>. An input signal indicative of the measured or estimated electrical current consumption of the motor <highlight><bold>94</bold></highlight> of <cross-reference target="DRAWINGS">FIG. 1</cross-reference> is received and squared by a squarer <highlight><bold>12</bold></highlight>. The resulting signal is then directed to a plurality of first-order low-pass filters (&ldquo;LPF&rdquo;) <highlight><bold>14</bold></highlight>, each of which has a different time constant &tgr;<highlight><subscript>1</subscript></highlight>. The squared and filtered signals are input, in turn, to a plurality of comparators <highlight><bold>16</bold></highlight>. </paragraph>
<paragraph id="P-0017" lvl="0"><number>&lsqb;0017&rsqb;</number> As may be recognized by those of ordinary skill in the pertinent art, although thermal systems are generally first order and are thus preferably treated to first-order filters, higher order filters may be substituted in alternate embodiments where they may exhibit performance advantages for applications having unmodeled characteristics. </paragraph>
<paragraph id="P-0018" lvl="0"><number>&lsqb;0018&rsqb;</number> An input signal indicative of motor speed (i.e., the absolute value of the motor angular velocity) is received by a comparator <highlight><bold>18</bold></highlight> and compared to a stall speed. If the motor speed is greater than the stall speed, an array of overload values corresponding to the plurality of LPFs <highlight><bold>14</bold></highlight> is set equal at assigner <highlight><bold>20</bold></highlight> to an array of maximum values allowable for a motor that is rotating. If on the other hand the motor speed is less than or equal to the stall speed, the array of overload values corresponding to the plurality of LPFs <highlight><bold>14</bold></highlight> is set equal at assigner <highlight><bold>22</bold></highlight> to an array of maximum values allowable for a motor that is substantially stalled. The comparator <highlight><bold>18</bold></highlight> and the assigners <highlight><bold>20</bold></highlight> and <highlight><bold>22</bold></highlight> together embody a binary-valued stall-detect vector function. The array of overload values is received, in turn, by the plurality of comparators <highlight><bold>16</bold></highlight> in a one-to-one correspondence with the plurality of associated LPFs <highlight><bold>14</bold></highlight>. </paragraph>
<paragraph id="P-0019" lvl="0"><number>&lsqb;0019&rsqb;</number> The array of comparators <highlight><bold>16</bold></highlight> determine whether any one of the squared and filtered signals received from LPFs <highlight><bold>14</bold></highlight> exceeds its corresponding overload value. A logical OR <highlight><bold>24</bold></highlight> enables a limit calculation function <highlight><bold>26</bold></highlight> if one or more of the array of overload values is exceeded. The limit calculation function <highlight><bold>26</bold></highlight>, in turn, calculates a motor current limit corresponding to the squared and filtered signal that exceeded its overload value by an amount greater than that of each of the other squared and filtered signals. The motor current limit may then be used to limit the current supplied to the motor. </paragraph>
<paragraph id="P-0020" lvl="0"><number>&lsqb;0020&rsqb;</number> In operation, an implementation of the motor current limiter <highlight><bold>10</bold></highlight> uses a signal indicative of motor current, which is squared and processed through the plurality of first-order low-pass filters. In this embodiment, the filter rates differ by a factor of ten from filter to filter, with the longest time constant approaching 2000 seconds. The outputs of the filters are then compared to the square of the active duty-cycle requirement. Comparison to the square of the actual requirement obviates the need to take the square root of the filter outputs, and improves throughput. The active duty cycle requirement (&ldquo;I<highlight><subscript>maxi</subscript></highlight>&rdquo;) is either the stall requirement (&ldquo;I<highlight><subscript>max</subscript></highlight><highlight><subscript><highlight><subscript>&mdash;</subscript></highlight></subscript></highlight><highlight><subscript>stall</subscript></highlight>&rdquo;) or the non-stall requirement (&ldquo;I<highlight><subscript>max</subscript></highlight><highlight><subscript><highlight><subscript>&mdash;</subscript></highlight></subscript></highlight><highlight><subscript>rotate</subscript></highlight>&rdquo;). The decision on which requirement is set active depends upon the estimate or measurement of motor speed. The absolute value of this motor speed representation is compared to a calibratable value (&ldquo;W<highlight><subscript>stall</subscript></highlight>&rdquo;). </paragraph>
<paragraph id="P-0021" lvl="0"><number>&lsqb;0021&rsqb;</number> The calibratable value represents a motor speed value which may be considered the &ldquo;stall&rdquo; condition, which is typically slightly greater than zero. Thus, any minor offsets in the measurement do not prevent the stall condition from being detected. When any of the filter outputs exceed the active duty cycle requirement, a limit function is applied to the motor output command to reduce the motor current. When all of the filter outputs fall below the active requirement, the limit function is removed. The limit function is applied in a smooth and gradual manner to prevent abrupt hand-wheel effort changes. Preferably, the amount of limiting is a linear function of the amount by which a filter output exceeds its active requirement. </paragraph>
<paragraph id="P-0022" lvl="0"><number>&lsqb;0022&rsqb;</number> Turning now to <cross-reference target="DRAWINGS">FIG. 3</cross-reference>, an alternate embodiment motor current limiter is indicated generally by the reference numeral <highlight><bold>110</bold></highlight>. An input signal indicative of actual or estimated motor current is received and squared by a squarer <highlight><bold>112</bold></highlight>. The resulting signal is then fed to a plurality of first-order low-pass filters (&ldquo;LPF&rdquo;) <highlight><bold>114</bold></highlight>, each of which has a different time constant &tgr;<highlight><subscript>1</subscript></highlight>. The squared and filtered signals are received, in turn, by a plurality of scaling functions <highlight><bold>115</bold></highlight>. </paragraph>
<paragraph id="P-0023" lvl="0"><number>&lsqb;0023&rsqb;</number> An input signal indicative of motor speed (i.e., the absolute value of the motor angular velocity) is received by a comparator <highlight><bold>118</bold></highlight> and compared to a stall speed. If the motor speed is greater than the stall speed, an array of scale factors corresponding to the plurality of LPFs <highlight><bold>114</bold></highlight> is set equal at assigner <highlight><bold>120</bold></highlight> to an array of values corresponding to a motor that is rotating. If on the other hand the motor speed is less than or equal to the stall speed, the array of scale factors corresponding to the plurality of LPFs <highlight><bold>114</bold></highlight> is set equal at assigner <highlight><bold>122</bold></highlight> to an array of values corresponding to a motor that is substantially stalled. The comparator <highlight><bold>118</bold></highlight> and the assigners <highlight><bold>120</bold></highlight> and <highlight><bold>122</bold></highlight> operate together as a binary-valued stall-detect vector function to produce the scale factors in this embodiment. The array of scale factors is received, in turn, by the plurality of scaling functions <highlight><bold>115</bold></highlight> in a one-to-one correspondence with the plurality of associated LPFs <highlight><bold>114</bold></highlight>. </paragraph>
<paragraph id="P-0024" lvl="0"><number>&lsqb;0024&rsqb;</number> The array of scaling functions <highlight><bold>115</bold></highlight> each multiply a scale factor with a corresponding one of the squared and filtered signals received from the LPFs <highlight><bold>114</bold></highlight>. A maximum function <highlight><bold>123</bold></highlight> produces a signal indicative of the squared, filtered and scaled signal that is the maximum of all of the outputs of the scaling functions <highlight><bold>115</bold></highlight>. A limit calculation function <highlight><bold>126</bold></highlight> receives the signal from the maximum function <highlight><bold>123</bold></highlight> in correspondence with the signal nearest to its limit or exceeding its limit by the greatest value. The limit calculation function <highlight><bold>126</bold></highlight>, in turn, calculates a motor current limit corresponding to the received squared, filtered and scaled signal. The motor current limit may then be used to limit the current supplied to the motor. </paragraph>
<paragraph id="P-0025" lvl="0"><number>&lsqb;0025&rsqb;</number> In operation, the motor current limit calculation function <highlight><bold>110</bold></highlight> uses scale factors K<highlight><subscript>1 </subscript></highlight>through K<highlight><subscript>n </subscript></highlight>to scale the outputs of the low pass filters to a percentage value representing the square of the requirement value for each filter. Thus, all scale factor outputs range from 0-100% squared, and a single maximum function is used to choose the filter representing a particular system thermal time-constant that is showing the worst case usage (i.e., the time-constant that is closest to or exceeds its active requirement). That maximum scaled filter output value is used, in turn, to determine the amount of limiting required from the limit calculation function. </paragraph>
<paragraph id="P-0026" lvl="0"><number>&lsqb;0026&rsqb;</number> The scale factors represent specific duty cycle requirements where different requirements will generate a different set of scale factors. To adapt from the non-stall requirement to the stall requirement, the scale factors are binary-valued outputs of the stall-detect function. </paragraph>
<paragraph id="P-0027" lvl="0"><number>&lsqb;0027&rsqb;</number> As shown in <cross-reference target="DRAWINGS">FIG. 4</cross-reference>, the motor current limiter <highlight><bold>210</bold></highlight> is similar to the motor current limiter <highlight><bold>110</bold></highlight>, except that the scaling functions <highlight><bold>215</bold></highlight> here precede the LPFs <highlight><bold>214</bold></highlight>. The motor current limiter <highlight><bold>210</bold></highlight> reverses the order of the scaling functions and the filters of the current limiter <highlight><bold>110</bold></highlight> in order to meet design criteria for smoother hand-wheel feel. </paragraph>
<paragraph id="P-0028" lvl="0"><number>&lsqb;0028&rsqb;</number> With the limiter <highlight><bold>110</bold></highlight> of <cross-reference target="DRAWINGS">FIG. 3</cross-reference>, the scale factors K<highlight><subscript>1 </subscript></highlight>through K<highlight><subscript>n </subscript></highlight>were used in the limiter <highlight><bold>110</bold></highlight> to scale the outputs of the low pass filters to a percentage value representing the square of the requirement value for each filter. Thus, with the limiter <highlight><bold>110</bold></highlight>, abrupt changes in the scale factors as the motor goes in and out of the stall condition may cause large changes in the limit value. The large changes in the limit value may, in turn, affect the driver effort level when the motor speed moves in and out of the stall condition by causing an abrupt and potentially noticeable change in hand-wheel effort. </paragraph>
<paragraph id="P-0029" lvl="0"><number>&lsqb;0029&rsqb;</number> To alleviate this behavior, the order of the filters and scaling functions can be reversed to maintain equivalence, since they are both linear functions. The resulting motor current limiter <highlight><bold>210</bold></highlight> of <cross-reference target="DRAWINGS">FIG. 4</cross-reference> smoothes these sudden changes in the scale factor values by running them through the filters, which here follow the scale factors. Smoothing out the scale factor changes means that the motor current limit will change smoothly as well. Compared with the limiter <highlight><bold>110</bold></highlight> of <cross-reference target="DRAWINGS">FIG. 3</cross-reference>, this embodiment merely requires a reversal in the order of the filters and their corresponding scale factors, with no additional calculations. </paragraph>
<paragraph id="P-0030" lvl="0"><number>&lsqb;0030&rsqb;</number> Referring now to <cross-reference target="DRAWINGS">FIG. 5</cross-reference>, the maximum function <highlight><bold>123</bold></highlight> and limit calculation function <highlight><bold>126</bold></highlight> of <cross-reference target="DRAWINGS">FIG. 3</cross-reference> are shown with an optional slew rate limiter <highlight><bold>128</bold></highlight>. The slew rate limiter <highlight><bold>128</bold></highlight> limits the time-rate-of-change of the motor current limit produced by the limit calculation function <highlight><bold>126</bold></highlight>. </paragraph>
<paragraph id="P-0031" lvl="0"><number>&lsqb;0031&rsqb;</number> In operation, the slew rate limiter <highlight><bold>128</bold></highlight> resolves the behavior caused by abrupt changes in the scale factors that might otherwise lead to abrupt changes in the motor current limit output. The slew rate limiter may be placed on the output of the limit function <highlight><bold>126</bold></highlight>. The slew rate limiter may also depend on whether the output of the limit function is increasing or decreasing. This prevents sudden changes in the active requirement from causing sudden changes in driver effort levels without smoothing the scale factor transitions at a different rate for each filter. </paragraph>
<paragraph id="P-0032" lvl="0"><number>&lsqb;0032&rsqb;</number> A slew rate limit on the output of the limit calculation function allows for a different requirement at all filter time constants, and a uniform transition rate in limit values when transitioning in and out of stall conditions no matter which filter output is the highest. The slew rate approach may be used in embodiments where the scaling functions follow the filters. </paragraph>
<paragraph id="P-0033" lvl="0"><number>&lsqb;0033&rsqb;</number> Turning now to <cross-reference target="DRAWINGS">FIG. 6</cross-reference>, the motor current limiter <highlight><bold>310</bold></highlight> is similar to the motor current limiter <highlight><bold>110</bold></highlight> of <cross-reference target="DRAWINGS">FIG. 3</cross-reference>. Accordingly, like features are numbered alike with the substitution of the numeral <highlight><bold>3</bold></highlight> for that of the numeral <highlight><bold>1</bold></highlight> in the hundreds position. The motor current limiter <highlight><bold>310</bold></highlight> differs from that of the motor current limiter <highlight><bold>110</bold></highlight> in that the comparator <highlight><bold>118</bold></highlight> and the assignment blocks <highlight><bold>120</bold></highlight> and <highlight><bold>122</bold></highlight> have been replaced with an absolute value block <highlight><bold>319</bold></highlight> and a plurality of speed-sensitive functions <highlight><bold>321</bold></highlight> that are each substantially smooth functions of motor speed. Thus, the absolute value block <highlight><bold>319</bold></highlight> and the plurality of speed-sensitive functions <highlight><bold>321</bold></highlight> together embody a piecewise-continuous speed-sensitive vector function. </paragraph>
<paragraph id="P-0034" lvl="0"><number>&lsqb;0034&rsqb;</number> An input signal indicative of signed motor speed is received by the absolute value block <highlight><bold>319</bold></highlight>, which, in turn, provides a non-negative signal to the plurality of speed-sensitive functions <highlight><bold>321</bold></highlight>. Each of these speed-sensitive functions corresponds to one of the plurality of associated LPFs <highlight><bold>314</bold></highlight>. A corresponding array of multipliers <highlight><bold>317</bold></highlight> receives the squared and filtered signals and multiplies each by the value of its corresponding speed-sensitive function. In operation, an advantage of the motor current limiter <highlight><bold>310</bold></highlight> is that each speed-sensitive function output or scale factor changes smoothly with motor speed between stall speed and a sufficient rotating motor speed. </paragraph>
<paragraph id="P-0035" lvl="0"><number>&lsqb;0035&rsqb;</number> Thus, the motor current limiter <highlight><bold>310</bold></highlight> smooths the motor current limit output by using speed-sensitive functions K<highlight><subscript>1</subscript></highlight>(&ohgr;) through K<highlight><subscript>n</subscript></highlight>(&ohgr;) to produce scale factors that are substantially smooth functions of motor speed. The difference from the motor current limiter <highlight><bold>110</bold></highlight> shown in <cross-reference target="DRAWINGS">FIG. 3</cross-reference> is that each scale factor changes smoothly with motor speed between nearly zero motor speed or stall and a predefined rotating motor speed, rather than abruptly changing between two scale factor values. </paragraph>
<paragraph id="P-0036" lvl="0"><number>&lsqb;0036&rsqb;</number> As may be recognized by those of ordinary skill in the pertinent art based on the teachings herein, the order of the filters and the multipliers for alternate embodiments similar to the motor current limiter <highlight><bold>310</bold></highlight> may be reversed in the manner employed for the motor current limiter <highlight><bold>210</bold></highlight> in order to meet design criteria for even smoother hand-wheel feel. </paragraph>
<paragraph id="P-0037" lvl="0"><number>&lsqb;0037&rsqb;</number> In an embodiment similar to that shown in <cross-reference target="DRAWINGS">FIG. 6, a</cross-reference> thermistor or other suitable temperature device may be provided to a plurality of substantially smooth scaling functions that are dependent on temperature in addition to motor speed. In addition, the thermistor reading may also be used to provide a rough filter initialization based on temperature when the controller is reset, such as, for example, when the vehicle ignition is cycled on-off-on. Thus, the low-pass filters may be initialized in response to a thermistor reading when the vehicle ignition is turned on. </paragraph>
<paragraph id="P-0038" lvl="0"><number>&lsqb;0038&rsqb;</number> In operation, these and other embodiments provide a thermal protection scheme that is based upon using a software variable representing motor current, either measured or estimated, squaring that variable or performing other suitable mathematical manipulations in order to provide a signal proportional to the heat generation rate of the system, and passing the signal through a plurality of low-pass filters representing the thermal time-constants in the system. The outputs of these filters are then either compared directly to values representing thermal duty-cycle requirements for the system, or scaled to a percentage of the duty-cycle requirement and compared to that requirement. If the requirement would be exceeded by any of the filter outputs, then the output of a limit calculation function is applied to the motor. When the filter outputs all fall below the requirement, the limit function is removed. </paragraph>
<paragraph id="P-0039" lvl="0"><number>&lsqb;0039&rsqb;</number> The squaring of the variable representing measured or estimated motor current is performed in order to provide a signal proportional to the heat generation rate of the electric portion of the system. Thus, other mathematical processes may be used or substituted to provide a signal indicative of heat generated, such as, for example, multiplying a voltage drop by the current or dividing the squared voltage by the impedance. </paragraph>
<paragraph id="P-0040" lvl="0"><number>&lsqb;0040&rsqb;</number> Thus, the motor current is limited based on usage, or duty cycle, without the need to install direct thermal measurement devices in the system to provide thermal protection. Thermal measurement devices add cost and complexity to the system in addition to requiring calibration. The system is tested or validated to the equivalent motor current usage, and the algorithm protects the system from exceeding the specified usage. The motor current limiter provides additional protection to the system by detecting stall conditions and further limiting the current applied to the motor in accordance with the speed of the motor. </paragraph>
<paragraph id="P-0041" lvl="0"><number>&lsqb;0041&rsqb;</number> When the motor speed is at or near stall conditions, high outputs are not necessary to hold the steering system in place. Therefore, reducing the output level for these conditions may be transparent to the driver. As soon as the motor begins to move, the limit is rapidly removed to allow full motor output for steering assist. This prevents unnecessary heat from being generated in the system, allowing for more steering assist sooner after a stall condition has ended. In the case where components in the design are significantly less capable of sustaining not only high currents in the stall condition, but moderate current levels in the stall condition as well, the above-described and similar embodiments discriminate between stall conditions and non-stall conditions and provide protection against excess heat generation at all current levels. </paragraph>
<paragraph id="P-0042" lvl="0"><number>&lsqb;0042&rsqb;</number> The detected stall versus non-stall conditions are used to compare the low-pass filter outputs to different duty cycle requirements for the stall and non-stall conditions. The stall duty cycle requirement preferably enforces a lower usage than the non-stall requirement. By utilizing the outputs of the first-order filters in the algorithm, excess amounts of time at stall at even moderate current levels are detected and a corresponding limit function is applied to the motor output. Additional features of certain embodiments prevent sudden changes in the applied motor current when the system transitions in and out of stall conditions. </paragraph>
<paragraph id="P-0043" lvl="0"><number>&lsqb;0043&rsqb;</number> An advantage of the above-described and other embodiments is the protection provided against having elevated current levels for a substantially stalled motor condition, thus preventing unnecessary heating of the system components, while permitting elevated current levels for limited periods of time for normal rotating motor conditions in order to enhance responsiveness and performance of the EPS system. </paragraph>
<paragraph id="P-0044" lvl="0"><number>&lsqb;0044&rsqb;</number> Another advantage of embodiments of the present disclosure is the substantial transparency of the assist torque level transitions that provide smooth changes in assist level for transitions in and out of limit conditions when moving in and out of the stall condition. </paragraph>
<paragraph id="P-0045" lvl="0"><number>&lsqb;0045&rsqb;</number> A further advantage of these and other embodiments is that improved performance and thermal protection is provided by recognizing a stall condition and limiting assist in accordance with both the motor current and the motor speed levels. </paragraph>
<paragraph id="P-0046" lvl="0"><number>&lsqb;0046&rsqb;</number> While the invention has been described with reference to exemplary embodiments, it will be understood by those of ordinary skill in the pertinent art that various changes may be made and equivalents may be substituted for the elements thereof without departing from the scope of the present disclosure. In addition, numerous modifications may be made to adapt the teachings of the disclosure to a particular object or situation without departing from the essential scope thereof. Therefore, it is intended that the Claims not be limited to the particular embodiments disclosed as the currently preferred best modes contemplated for carrying out the teachings herein, but that the Claims shall cover all embodiments falling within the true scope and spirit of the disclosure. </paragraph>
</section>
</detailed-description>
</subdoc-description>
<subdoc-claims>
<heading lvl="1">What is claimed is: </heading>
<claim id="CLM-00001">
<claim-text><highlight><bold>1</bold></highlight>. A controller for a vehicular system having an electric motor, the controller comprising: 
<claim-text>a first function responsive to a signal indicative of the speed of the electric motor; a filter responsive to a signal indicative of the heat generation rate in the vehicular system; </claim-text>
<claim-text>a second function in signal communication with said first function and said filter; and </claim-text>
<claim-text>a limit calculation function in signal communication with said second function for providing a motor current limit responsive to said second function. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00002">
<claim-text><highlight><bold>2</bold></highlight>. A controller as defined in <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference> wherein the signal indicative of the heat generation rate comprises a signal indicative of the current of the electric motor. </claim-text>
</claim>
<claim id="CLM-00003">
<claim-text><highlight><bold>3</bold></highlight>. A controller as defined in <dependent-claim-reference depends_on="CLM-00002">claim 2</dependent-claim-reference> wherein the signal indicative of the current of the electric motor comprises a squared current signal further indicative of the rate of heat generation by the electric motor. </claim-text>
</claim>
<claim id="CLM-00004">
<claim-text><highlight><bold>4</bold></highlight>. A controller as defined in <dependent-claim-reference depends_on="CLM-00002">claim 2</dependent-claim-reference>, further comprising a plurality of filters that are each individually responsive to the signal indicative of the current of the electric motor wherein said filters are low-pass filters having a plurality of different time constants for spanning a range of system thermal time constants. </claim-text>
</claim>
<claim id="CLM-00005">
<claim-text><highlight><bold>5</bold></highlight>. A controller as defined in <dependent-claim-reference depends_on="CLM-00004">claim 4</dependent-claim-reference>, further comprising a maximum function in receivable signal communication with at least two of said plurality of filters and in transmittable signal communication with said limit calculation function. </claim-text>
</claim>
<claim id="CLM-00006">
<claim-text><highlight><bold>6</bold></highlight>. A controller as defined in <dependent-claim-reference depends_on="CLM-00004">claim 4</dependent-claim-reference>, further comprising a plurality of second functions responsive to the signal indicative of the speed of the electric motor wherein each of said plurality of second functions corresponds to one of the plurality of different time constants. </claim-text>
</claim>
<claim id="CLM-00007">
<claim-text><highlight><bold>7</bold></highlight>. A controller as defined in <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference> wherein said second function comprises a multiplier in signal communication with said first function and said filter. </claim-text>
</claim>
<claim id="CLM-00008">
<claim-text><highlight><bold>8</bold></highlight>. A controller as defined in <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference> wherein said first function has at least two possible values corresponding to the signal indicative of the speed of the electric motor when said speed is considered relative to a stall speed. </claim-text>
</claim>
<claim id="CLM-00009">
<claim-text><highlight><bold>9</bold></highlight>. A controller as defined in <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference> wherein said second function and said filter each comprise a linear function. </claim-text>
</claim>
<claim id="CLM-00010">
<claim-text><highlight><bold>10</bold></highlight>. A controller as defined in <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference> wherein said filter comprises a first-order filter. </claim-text>
</claim>
<claim id="CLM-00011">
<claim-text><highlight><bold>11</bold></highlight>. A controller as defined in <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference> wherein said first function is a substantially smooth function of motor speed. </claim-text>
</claim>
<claim id="CLM-00012">
<claim-text><highlight><bold>12</bold></highlight>. A controller as defined in <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference> wherein said first function comprises a binary-valued function. </claim-text>
</claim>
<claim id="CLM-00013">
<claim-text><highlight><bold>13</bold></highlight>. A controller as defined in <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference> wherein said first function comprises a piecewise-continuous function. </claim-text>
</claim>
<claim id="CLM-00014">
<claim-text><highlight><bold>14</bold></highlight>. A controller as defined in <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference> wherein said second function comprises a multiplier. </claim-text>
</claim>
<claim id="CLM-00015">
<claim-text><highlight><bold>15</bold></highlight>. A controller as defined in <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference> wherein said second function comprises a comparator. </claim-text>
</claim>
<claim id="CLM-00016">
<claim-text><highlight><bold>16</bold></highlight>. A method for controlling a vehicular system having an electric motor, the method comprising: 
<claim-text>receiving a signal indicative of the heat generation rate in the vehicular system; </claim-text>
<claim-text>receiving a signal indicative of a speed of the electric motor; </claim-text>
<claim-text>providing at least one of a scale factor and an overload value in response to the received signal indicative of speed; </claim-text>
<claim-text>filtering the received signal indicative of heat generation rate in correspondence with a time constant; </claim-text>
<claim-text>processing the filtered signal by executing at least one of a multiplication by the scale factor and a comparison with the overload value to produce a signal indicative of compliance with a duty cycle requirement; and </claim-text>
<claim-text>calculating a motor current limit in correspondence with the processed signal. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00017">
<claim-text><highlight><bold>17</bold></highlight>. A method as defined in <dependent-claim-reference depends_on="CLM-00011">claim 16</dependent-claim-reference>, further comprising choosing the maximum of a plurality of processed signals to obtain the signal representing the present maximum thermal loading of the system. </claim-text>
</claim>
<claim id="CLM-00018">
<claim-text><highlight><bold>18</bold></highlight>. A method as defined in <dependent-claim-reference depends_on="CLM-00011">claim 16</dependent-claim-reference>, further comprising adjusting a scale factor corresponding to a time constant in response to said received speed signal. </claim-text>
</claim>
<claim id="CLM-00019">
<claim-text><highlight><bold>19</bold></highlight>. A method as defined in <dependent-claim-reference depends_on="CLM-00011">claim 16</dependent-claim-reference>, further comprising filtering a signal corresponding to a motor current limit to smooth the motor current limit slew rate. </claim-text>
</claim>
<claim id="CLM-00020">
<claim-text><highlight><bold>20</bold></highlight>. A method as defined in <dependent-claim-reference depends_on="CLM-00011">claim 16</dependent-claim-reference>, further comprising limiting the current applied to the motor in correspondence with the calculated limit. </claim-text>
</claim>
<claim id="CLM-00021">
<claim-text><highlight><bold>21</bold></highlight>. Means for controlling a vehicular system having an electric motor, said means comprising: 
<claim-text>means for receiving a signal indicative of the heat generation rate in the vehicular system; </claim-text>
<claim-text>means for receiving a signal indicative of a speed of the electric motor; </claim-text>
<claim-text>means for providing at least one of a scale factor and an overload value in response to the received signal indicative of speed; </claim-text>
<claim-text>means for filtering the received signal indicative of heat generation rate in correspondence with a time constant; </claim-text>
<claim-text>means for processing the filtered signal by executing at least one of a multiplication by the scale factor and a comparison with the overload value to produce a signal indicative of compliance with a duty cycle requirement; and </claim-text>
<claim-text>means for calculating a motor current limit in correspondence with the processed signal.</claim-text>
</claim-text>
</claim>
</subdoc-claims>
<subdoc-drawings id="DRAWINGS">
<heading lvl="0" align="CENTER">Drawings</heading>
<representative-figure>1</representative-figure>
<figure id="figure-D00000">
<image id="EMI-D00000" file="US20030001533A1-20030102-D00000.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00001">
<image id="EMI-D00001" file="US20030001533A1-20030102-D00001.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00002">
<image id="EMI-D00002" file="US20030001533A1-20030102-D00002.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00003">
<image id="EMI-D00003" file="US20030001533A1-20030102-D00003.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00004">
<image id="EMI-D00004" file="US20030001533A1-20030102-D00004.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00005">
<image id="EMI-D00005" file="US20030001533A1-20030102-D00005.TIF" imf="TIFF" ti="DR"/>
</figure>
</subdoc-drawings>
</patent-application-publication>
