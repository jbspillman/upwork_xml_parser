<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE patent-application-publication SYSTEM "pap-v16-2002-01-01.dtd" [
<!ENTITY US20030001776A1-20030102-D00000.TIF SYSTEM "US20030001776A1-20030102-D00000.TIF" NDATA TIF>
<!ENTITY US20030001776A1-20030102-D00001.TIF SYSTEM "US20030001776A1-20030102-D00001.TIF" NDATA TIF>
<!ENTITY US20030001776A1-20030102-D00002.TIF SYSTEM "US20030001776A1-20030102-D00002.TIF" NDATA TIF>
<!ENTITY US20030001776A1-20030102-D00003.TIF SYSTEM "US20030001776A1-20030102-D00003.TIF" NDATA TIF>
<!ENTITY US20030001776A1-20030102-D00004.TIF SYSTEM "US20030001776A1-20030102-D00004.TIF" NDATA TIF>
<!ENTITY US20030001776A1-20030102-D00005.TIF SYSTEM "US20030001776A1-20030102-D00005.TIF" NDATA TIF>
<!ENTITY US20030001776A1-20030102-D00006.TIF SYSTEM "US20030001776A1-20030102-D00006.TIF" NDATA TIF>
]>
<patent-application-publication>
<subdoc-bibliographic-information>
<document-id>
<doc-number>20030001776</doc-number>
<kind-code>A1</kind-code>
<document-date>20030102</document-date>
</document-id>
<publication-filing-type>new</publication-filing-type>
<domestic-filing-data>
<application-number>
<doc-number>09896772</doc-number>
</application-number>
<application-number-series-code>09</application-number-series-code>
<filing-date>20010629</filing-date>
</domestic-filing-data>
<technical-information>
<classification-ipc>
<classification-ipc-primary>
<ipc>G01S001/24</ipc>
</classification-ipc-primary>
<classification-ipc-edition>07</classification-ipc-edition>
</classification-ipc>
<classification-us>
<classification-us-primary>
<uspc>
<class>342</class>
<subclass>387000</subclass>
</uspc>
</classification-us-primary>
</classification-us>
<title-of-invention>Determining wireless device locations</title-of-invention>
</technical-information>
<inventors>
<first-named-inventor>
<name>
<given-name>Eric</given-name>
<middle-name>C.</middle-name>
<family-name>Hannah</family-name>
</name>
<residence>
<residence-us>
<city>Pebble Beach</city>
<state>CA</state>
<country-code>US</country-code>
</residence-us>
</residence>
<authority-applicant>INV</authority-applicant>
</first-named-inventor>
<inventor>
<name>
<given-name>David</given-name>
<middle-name>L.</middle-name>
<family-name>Tennenhouse</family-name>
</name>
<residence>
<residence-us>
<city>Hillsborough</city>
<state>CA</state>
<country-code>US</country-code>
</residence-us>
</residence>
<authority-applicant>INV</authority-applicant>
</inventor>
</inventors>
<correspondence-address>
<name-1>BLAKELY SOKOLOFF TAYLOR &amp; ZAFMAN</name-1>
<name-2></name-2>
<address>
<address-1>12400 WILSHIRE BOULEVARD, SEVENTH FLOOR</address-1>
<city>LOS ANGELES</city>
<state>CA</state>
<postalcode>90025</postalcode>
<country>
<country-code>US</country-code>
</country>
</address>
</correspondence-address>
</subdoc-bibliographic-information>
<subdoc-abstract>
<paragraph id="A-0001" lvl="0">Wireless network devices can obtain their geographical location by triangulating with access points that have precise time information. In response to a location prompt, a wireless device can send a transmission to multiple access points that are within its range. The different times at which the transmission is received at different access points can be collected and forwarded to a server, which can compute the location of the wireless device using triangulation techniques. The access points can calibrate their own time bases from time services received from global position satellites. </paragraph>
</subdoc-abstract>
<subdoc-description>
<summary-of-invention>
<section>
<heading lvl="1">BACKGROUND OF THE INVENTION </heading>
<paragraph id="P-0001" lvl="0"><number>&lsqb;0001&rsqb;</number> 1. Field of the Invention </paragraph>
<paragraph id="P-0002" lvl="0"><number>&lsqb;0002&rsqb;</number> The invention pertains generally to communications. In particular, it pertains to wireless network communications with position-location capabilities. </paragraph>
<paragraph id="P-0003" lvl="0"><number>&lsqb;0003&rsqb;</number> 2. Description of the Related Art </paragraph>
<paragraph id="P-0004" lvl="0"><number>&lsqb;0004&rsqb;</number> Wireless communications devices have become much more prevalent in the last few years. Cell phones are commonplace, and Internet access through cell phones is increasing in popularity. Wireless laptop computers and related mobile devices are being connected to the Internet through wireless access points in places like airport terminals. These wireless access points have many of the same features as cell phone base stations, such as automated selection of one of the access point within range to handle data communications for a given mobile device, and seamless transfer of this control to a different access point as the mobile device is moved. </paragraph>
<paragraph id="P-0005" lvl="0"><number>&lsqb;0005&rsqb;</number> Although the Internet provides a great deal of locally interesting information to users, the users must generally know which sites to access to obtain the desired relevant information. Further, &lsquo;local&rsquo; in this context generally means within an entire city, or at least an area of many square miles. When the user is moving around using a wireless mobile device, knowledge of what is available in the immediate vicinity is generally not available, or at least not easily obtainable. This lack of information on what is available to the user in the immediate vicinity can be frustrating to the user of the mobile device. By the same token, businesses may want to inform the user of their commercial facilities that are within the user&apos;s vicinity (i.e., a restaurant, vending machine, ATM, etc.), but cannot do so because they don&apos;t know where the user is located.</paragraph>
</section>
</summary-of-invention>
<brief-description-of-drawings>
<section>
<heading lvl="1">BRIEF DESCRIPTION OF THE DRAWINGS </heading>
<paragraph id="P-0006" lvl="0"><number>&lsqb;0006&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1</cross-reference> shows a diagram of a system. </paragraph>
<paragraph id="P-0007" lvl="0"><number>&lsqb;0007&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 2</cross-reference> shows an access point. </paragraph>
<paragraph id="P-0008" lvl="0"><number>&lsqb;0008&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3</cross-reference> shows a flow chart of a method embodiment at a system level. </paragraph>
<paragraph id="P-0009" lvl="0"><number>&lsqb;0009&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 4</cross-reference> shows a flow chart of a method embodiment at a server level. </paragraph>
<paragraph id="P-0010" lvl="0"><number>&lsqb;0010&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 5</cross-reference> shows a flow chart of a method embodiment at an access point level. </paragraph>
<paragraph id="P-0011" lvl="0"><number>&lsqb;0011&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 6</cross-reference> shows a flow chart of a method embodiment of a pseudo-GPS implementation. </paragraph>
</section>
</brief-description-of-drawings>
<detailed-description>
<section>
<heading lvl="1">DETAILED DESCRIPTION OF THE INVENTION </heading>
<paragraph id="P-0012" lvl="0"><number>&lsqb;0012&rsqb;</number> Various embodiments of the invention combine mobile wireless devices and their wireless access points with accurate determination of the mobile device&apos;s location. This in turn can enable the mobile device&apos;s user to locate specific resources that may be in the user&apos;s immediate vicinity. It can also enable commercial entities that are in contact with the mobile device through a server to determine where the user is located and notify the user of their services that are available in the user&apos;s vicinity. Directions on how to reach that service can also be provided. </paragraph>
<paragraph id="P-0013" lvl="0"><number>&lsqb;0013&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1</cross-reference> shows a system diagram. Access points <highlight><bold>12</bold></highlight>, <highlight><bold>13</bold></highlight> and <highlight><bold>14</bold></highlight> may be devices that communicate with one or more mobile devices <highlight><bold>10</bold></highlight> within their range using wireless media such as radio waves, and also communicate with other devices such as server <highlight><bold>15</bold></highlight> over network <highlight><bold>11</bold></highlight>, which may be made up of one or more communications links. In one embodiment, network <highlight><bold>11</bold></highlight> is the Internet, and wireless mobile device <highlight><bold>10</bold></highlight> includes an Internet-compatible device with an Internet browser and a display to present relevant information to a user. Various wireless access points may be scattered throughout the user&apos;s area, with several of them being close enough to the user&apos;s wireless mobile device <highlight><bold>10</bold></highlight> to communicate with device <highlight><bold>10</bold></highlight>. <cross-reference target="DRAWINGS">FIG. 1</cross-reference> shows three access points <highlight><bold>12</bold></highlight>-<highlight><bold>14</bold></highlight> that meet this requirement, but other quantities of access points may also be used. In one embodiment, electromagnetic signals in the 2.48 gigahertz (GHz) range are used for communications between mobile device <highlight><bold>10</bold></highlight> and access points <highlight><bold>12</bold></highlight>-<highlight><bold>14</bold></highlight>. This structure may be used to facilitate data communications between mobile device <highlight><bold>10</bold></highlight> and server <highlight><bold>15</bold></highlight>, while allowing mobile device <highlight><bold>10</bold></highlight> to be physically moved around to various locations. As long as mobile device <highlight><bold>10</bold></highlight> remains within communication range of at least one access point, the data link between mobile device <highlight><bold>10</bold></highlight> and server <highlight><bold>15</bold></highlight> maybe maintained, with primary control of communications with mobile device <highlight><bold>10</bold></highlight> being passed from one access point to another as mobile device <highlight><bold>10</bold></highlight> moves from place to place. The access point that has primary control of communications with mobile device <highlight><bold>10</bold></highlight> at any given time may be referred to as the controlling access point for that particular mobile device. </paragraph>
<paragraph id="P-0014" lvl="0"><number>&lsqb;0014&rsqb;</number> To determine the location of mobile device <highlight><bold>10</bold></highlight>, its relative distance from each of three or more access points <highlight><bold>12</bold></highlight>-<highlight><bold>14</bold></highlight> may be determined. Common triangulation techniques may then be used to determine the location of the mobile device with respect to those access points. Since wireless access points are generally fixed in place, their location may be determined in advance, and that location may be made easily available. In one embodiment, each access point <highlight><bold>12</bold></highlight>-<highlight><bold>14</bold></highlight> stores is own location and provides that location information to other devices as needed, such as to server <highlight><bold>15</bold></highlight> over network <highlight><bold>11</bold></highlight>. In another embodiment, the location of each access point may be contained in a database that is stored in a more central location, such as at server <highlight><bold>15</bold></highlight>. The location information may be stored in any useful format. In one embodiment, this format may take the universal global form of latitude/longitude/elevation. Other embodiments may use regional or local coordinate formats. A device may convert between different formats as needed. </paragraph>
<paragraph id="P-0015" lvl="0"><number>&lsqb;0015&rsqb;</number> To provide a common reference point to determine the location of mobile device <highlight><bold>10</bold></highlight>, the facilities of the satellite-based Global Positioning System (GPS) maybe used. <cross-reference target="DRAWINGS">FIG. 1</cross-reference> shows four GPS satellites <highlight><bold>16</bold></highlight>-<highlight><bold>19</bold></highlight> communicating to each of access points <highlight><bold>12</bold></highlight>-<highlight><bold>14</bold></highlight>. In one embodiment, wireless access points <highlight><bold>12</bold></highlight>-<highlight><bold>14</bold></highlight> may use the GPS system to determine their own locations. Three GPS satellites may be sufficient to determine location, although four are shown. </paragraph>
<paragraph id="P-0016" lvl="0"><number>&lsqb;0016&rsqb;</number> To determine the location of mobile device <highlight><bold>10</bold></highlight>, a common timing reference may be used. In one embodiment, the access points may make use of the time services of the GPS system. The access points may have high-precision clocks that are synchronized to each other so that all their clocks show the same time within a specified accuracy, such as within a few nanoseconds. Any circuit delays between the reception of a GPS time signal and the internal clock may be measured and compensated for in the design of the access point. </paragraph>
<paragraph id="P-0017" lvl="0"><number>&lsqb;0017&rsqb;</number> To provide information for triangulating the location of mobile device <highlight><bold>10</bold></highlight>, mobile device <highlight><bold>10</bold></highlight> may broadcast a &lsquo;ping&rsquo; signal to the wireless access points <highlight><bold>12</bold></highlight>-<highlight><bold>14</bold></highlight>, with each access point receiving the same ping signal. A ping signal may be a transmission with a sharp reference point that can be accurately detected by each access point. In one embodiment, the ping signal is an analog waveform with a precise initiation point, and the initiation point may serve as the reference point. In one embodiment, the ping signal is transmitted to wireless access points <highlight><bold>12</bold></highlight>-<highlight><bold>14</bold></highlight> in response to a request for a ping signal that has been transmitted to mobile device <highlight><bold>10</bold></highlight> from the controlling access point. When an access point receives the ping signal, it may note at what time the reference point was received. The difference in distance between each access point <highlight><bold>12</bold></highlight>-<highlight><bold>14</bold></highlight> and mobile device <highlight><bold>10</bold></highlight> may cause each access point <highlight><bold>12</bold></highlight>-<highlight><bold>14</bold></highlight> to detect the reference point at a different time. Since each access point has its clock accurately synchronized with the clocks of the other access points, the difference between the times the reference point was received by the various access points <highlight><bold>12</bold></highlight>-<highlight><bold>14</bold></highlight> may be determined by comparing the ping reception times from the different access points. Since the speed of electromagnetic waves through the air is known, triangulation techniques may then be used to calculate the distance and direction of the mobile device from each of the participating access points. Three access points may provide sufficient information to calculate the location of the mobile device. However, more than three access points may also be used. Accuracy may improve if more than three access points are used in the calculation, since slight inaccuracies in time synchronization may be averaged out. In one embodiment, the ping signal emanates from the mobile device in all directions in 3-dimensional space, and the 3-dimensional location of each access point is known, so the location of mobile device <highlight><bold>10</bold></highlight> maybe determined in three dimensions. This relative location may be converted into an absolute positional location within a larger reference grid. This relative location may also be converted into local coordinates that are meaningful to the user, such as floor numbers, corridor numbers, and room numbers in a multi-story building. </paragraph>
<paragraph id="P-0018" lvl="0"><number>&lsqb;0018&rsqb;</number> The calculation of the location of mobile device <highlight><bold>10</bold></highlight> may be performed in various places. In one embodiment, server <highlight><bold>15</bold></highlight> receives the ping-reception time from each access point, along with an identification of the associated mobile device <highlight><bold>10</bold></highlight> that broadcast the ping signal, and server <highlight><bold>15</bold></highlight> may then calculate the location of mobile device <highlight><bold>10</bold></highlight> based on the location of each of the access points <highlight><bold>12</bold></highlight>-<highlight><bold>14</bold></highlight> and the time each ping was received by each access point. In one embodiment, data indicating the location of each access point is transmitted, along with the ping reception time, from that access point to the server after the ping signal is received. In another embodiment, the location of each access point is contained in a database that is accessible to the server. In another embodiment, the calculation function takes place in at least one of the access points, and the calculated location of mobile device <highlight><bold>10</bold></highlight> may then be transmitted to server <highlight><bold>15</bold></highlight> over network <highlight><bold>11</bold></highlight>. In one embodiment, after the location of the mobile device is determined, the location of the mobile device may be transmitted to the mobile device. This location may be used in other processing performed in the user device. In one embodiment, this information may be presented to the user in a user-friendly format, such as by describing to the user his or her location with respect to easily identifiable landmarks or reference points. </paragraph>
<paragraph id="P-0019" lvl="0"><number>&lsqb;0019&rsqb;</number> In one embodiment, access points <highlight><bold>12</bold></highlight>-<highlight><bold>14</bold></highlight> may be used both for digital data communication between mobile device <highlight><bold>10</bold></highlight> and server <highlight><bold>15</bold></highlight>, and for ping reception to determine the location of mobile device <highlight><bold>10</bold></highlight>. In another embodiment, the access point may be used to receive the ping signal and note the time the ping signal is received, while a separate device may be used to handle data communications between mobile device <highlight><bold>10</bold></highlight> and server <highlight><bold>15</bold></highlight>. </paragraph>
<paragraph id="P-0020" lvl="0"><number>&lsqb;0020&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 2</cross-reference> shows a functional block diagram of components of an embodiment of access point <highlight><bold>12</bold></highlight>, which may be representative of other access points. An access point may be a device that provides an interface between one or more wireless mobile devices and one or more servers, and may also provide the time-base capabilities needed to determine a wireless mobile device&apos;s location. </paragraph>
<paragraph id="P-0021" lvl="0"><number>&lsqb;0021&rsqb;</number> GPS satellite interface <highlight><bold>21</bold></highlight> may receive signals from multiple GPS satellites. If the access point is to determine its own location, then access point identification logic <highlight><bold>22</bold></highlight> may derive calculation values based on the difference in time of the different signals received from different satellites. These values may be used to calculate the access point&apos;s location using triangulation techniques. In one embodiment, the calculations are performed in control logic <highlight><bold>24</bold></highlight>, which includes a processor and memory. Clock synchronization logic <highlight><bold>23</bold></highlight> may provide a clock signal that is synchronized to the time services clock received through GPS interface <highlight><bold>21</bold></highlight>. Each of multiple access points may have their clock synchronized to each other by synchronizing on the GPS clock signals. The synchronized clock in each access point may include a phase shift adjustment to compensate for the fact that the access points receive their GPS clock signals at slightly different times due the different location at which each access point resides. </paragraph>
<paragraph id="P-0022" lvl="0"><number>&lsqb;0022&rsqb;</number> Mobile device interface <highlight><bold>25</bold></highlight> may provide the wireless interface to one or more mobile devices that are communicating with access point <highlight><bold>12</bold></highlight>. In one embodiment, this includes an antenna for transmitting and receiving signals in the 2.48 GHz band. Interface <highlight><bold>25</bold></highlight> may communicate with multiple mobile device using well-known techniques. Interface <highlight><bold>25</bold></highlight> may handle data communications with the mobile devices. In one embodiment, interface <highlight><bold>25</bold></highlight> may also receive the ping signal and provide that ping signal to control logic <highlight><bold>24</bold></highlight>, which may include logic to compare the reference point of the ping signal with the synchronized clock from clock synchronization logic <highlight><bold>23</bold></highlight>. </paragraph>
<paragraph id="P-0023" lvl="0"><number>&lsqb;0023&rsqb;</number> Network interface <highlight><bold>26</bold></highlight> may provide communications with other devices, such as a server, over a network. This network may include any combination of local, regional, national, and international networks. In one embodiment, the network includes the Internet and may be used to provide communications between the mobile devices and one or more servers. </paragraph>
<paragraph id="P-0024" lvl="0"><number>&lsqb;0024&rsqb;</number> Control logic <highlight><bold>24</bold></highlight> may be used to connect, monitor, and control the other functional areas of access point <highlight><bold>12</bold></highlight>. Control logic <highlight><bold>24</bold></highlight> may include a processor, memory, a bus, and other computer resources. Control logic <highlight><bold>24</bold></highlight> may also include specialized logic to operate with access point identification logic <highlight><bold>22</bold></highlight>, clock synchronization logic <highlight><bold>23</bold></highlight>, mobile device interface <highlight><bold>25</bold></highlight>, and network interface <highlight><bold>26</bold></highlight>. </paragraph>
<paragraph id="P-0025" lvl="0"><number>&lsqb;0025&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3</cross-reference> shows a flow chart <highlight><bold>3</bold></highlight> of a method embodiment at the system level. At block <highlight><bold>31</bold></highlight>, the controlling access point, i.e., the access point that is currently handling data communications with the wireless mobile device, may send a ping request to the mobile device. A ping request is a request for the mobile device to broadcast a ping signal. In one embodiment, this request is first received by the wireless access point from a server, and the request is then passed on to the mobile device. In another embodiment, a ping request originates in the access point and is transmitted to the mobile device at regular intervals. </paragraph>
<paragraph id="P-0026" lvl="0"><number>&lsqb;0026&rsqb;</number> At block <highlight><bold>32</bold></highlight>, in response to the ping request, the mobile device may broadcast a ping signal. At block <highlight><bold>33</bold></highlight>, each relevant access point may receive the ping signal and note the reception time, i.e., a value representing the time at which the signal was received as indicated by the access point&apos;s internal synchronized clock. Relevant access points may be defined as those access points that are able to receive the ping signal and that are designated to receive it. In one embodiment, all access points that are able to receive the ping signal are considered relevant. In another embodiment, only particular access points (such as three specific access points designated to be used in the triangulation calculations) are considered relevant. </paragraph>
<paragraph id="P-0027" lvl="0"><number>&lsqb;0027&rsqb;</number> At block <highlight><bold>34</bold></highlight>, multiple access points may transmit data to a server. The data may include not only the previously noted time value, but may also include an identification of the mobile device and an identification and/or location of the access point making the transmission. The access points may transmit their information over a network using the technology and protocols appropriate for that network. </paragraph>
<paragraph id="P-0028" lvl="0"><number>&lsqb;0028&rsqb;</number> At block <highlight><bold>35</bold></highlight>, the server may receive the various time values and calculate the location of the mobile device, based on the ping reception times and the location of each access point. With known triangulation techniques, the location of the mobile device may be accurately determined with information from only three access points. </paragraph>
<paragraph id="P-0029" lvl="0"><number>&lsqb;0029&rsqb;</number> Once the location of the mobile device is known to the server, various uses may be made of that information. In the illustrated embodiment of <cross-reference target="DRAWINGS">FIG. 3</cross-reference>, the server may transmit the location information back to the controlling access point at block <highlight><bold>36</bold></highlight>, and the controlling access point may transmit that information to the mobile device at block <highlight><bold>37</bold></highlight> for presentation to the user or for other use by the mobile device. If the access point and mobile device do not have any direct use for this information, block <highlight><bold>36</bold></highlight> may be skipped. </paragraph>
<paragraph id="P-0030" lvl="0"><number>&lsqb;0030&rsqb;</number> The server may have other uses, not shown in <cross-reference target="DRAWINGS">FIG. 3</cross-reference>, for the location information. For example, the server may store the location and access it when the user of the mobile device makes a request to the server for location-specific information such as where the nearest vending machine is located. The server may also initiate unrequested information to the mobile device to proactively inform the user of services available in the user&apos;s vicinity. </paragraph>
<paragraph id="P-0031" lvl="0"><number>&lsqb;0031&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 4</cross-reference> shows a flow chart <highlight><bold>4</bold></highlight> of a method embodiment that may be implemented in a server. At block <highlight><bold>41</bold></highlight>, the server may send a ping request to a controlling access point, along with identification of which mobile device the access point should forward the ping request to. Outside of the server (not shown), the controlling access point may forward that request to the designated mobile device, which may respond by broadcasting a ping signal to the multiple access points within its broadcast range. Those access points may note their reception times of that ping signal, format those reception times into time values, and send those time values to the server. </paragraph>
<paragraph id="P-0032" lvl="0"><number>&lsqb;0032&rsqb;</number> At block <highlight><bold>42</bold></highlight>, the server may receive the time values representing the reception times from the access points. In one embodiment, the time information from each access point may be included in one or more packets that also include an identification of the mobile device and an identification of the access point initiating the transmission. The server may determine the locations of the associated access points at block <highlight><bold>43</bold></highlight>. In one embodiment, this determination includes receiving that information in the packet. In another embodiment, that information may be in a database accessible to the server. At block <highlight><bold>44</bold></highlight>, the server may calculate the location of the designated mobile device with triangulation algorithms that consider the difference in receptions times for each access point and the physical location of each access point. These calculations may determine the location of the mobile device in three-dimensional space, provided the three-dimensional locations of the access points are known. The location of the mobile device may be translated into any useful coordinate system. </paragraph>
<paragraph id="P-0033" lvl="0"><number>&lsqb;0033&rsqb;</number> In block <highlight><bold>45</bold></highlight>, the calculated location may be sent to the controlling access point. This may or may not be the same access point that was controlling when the ping request was sent, since the designation of &lsquo;controlling&rsquo; access point may be dynamically changed for various operational reasons. Block <highlight><bold>45</bold></highlight> may be eliminated in some embodiments, if the mobile device and/or access points do not have use for the coordinates of the mobile device&apos;s location. </paragraph>
<paragraph id="P-0034" lvl="0"><number>&lsqb;0034&rsqb;</number> At block <highlight><bold>46</bold></highlight>, the server may receive a communication from the mobile device, through the controlling access point, requesting information that is specific to the mobile device&apos;s location. At block <highlight><bold>47</bold></highlight>, the requested information may be transmitted from the server to the mobile device through the controlling access point. As an example, the user of the mobile device may request the location of the nearest vending machine. The server may use the previously calculated location of the mobile device and a stored database of the location of vending machines to determine which vending machine is closest to the user. This information may then be transmitted to the mobile device, where it may be displayed to the user. Directions on how to reach the vending machine may also be included. In this example, it is not necessary for the mobile device to know its own location, since all the relevant information resides in the server and only the final answer need be sent to the mobile device. </paragraph>
<paragraph id="P-0035" lvl="0"><number>&lsqb;0035&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 5</cross-reference> shows a flow chart <highlight><bold>5</bold></highlight> of a method embodiment that may be implemented in an access point. At block <highlight><bold>51</bold></highlight>, a ping request may be received from a server. The ping request may be addressed to a specific mobile device, and at block <highlight><bold>52</bold></highlight> the ping request may be forwarded to the addressed mobile device. In one embodiment, blocks <highlight><bold>51</bold></highlight> and <highlight><bold>52</bold></highlight> may be performed only in the controlling access point for the addressed mobile device. Outside the access point (not shown), the addressed mobile device may respond to the request by broadcasting ping signal, which may be received by all access points within range. At block <highlight><bold>53</bold></highlight>, the ping signal may be received by the access point, which may note the reception time of the ping signal. In one embodiment, the reception time is determined with respect to an internal clock that is synchronized with the internal clocks of the other access points in the vicinity. At block <highlight><bold>55</bold></highlight>, the reception time may be transmitted to a server in the form of a time value. This time value may be in any convenient form or format. In one embodiment, the reception time may be transmitted in response to a request from the server to provide the access time. This transmission may include an identification of the mobile device associated with the ping signal. In one embodiment, the transmission may also include coordinates of the location of the access point. </paragraph>
<paragraph id="P-0036" lvl="0"><number>&lsqb;0036&rsqb;</number> Blocks <highlight><bold>53</bold></highlight>-<highlight><bold>55</bold></highlight> may also be performed by other access points that received the ping signal, so that the server will have at least three time values from three access points with which to perform triangulation calculations. </paragraph>
<paragraph id="P-0037" lvl="0"><number>&lsqb;0037&rsqb;</number> Another embodiment of system <highlight><bold>1</bold></highlight> as shown in <cross-reference target="DRAWINGS">FIG. 1</cross-reference> may use pseudo-GPS signals for triangulation. In the pseudo-GPS operation, each access point <highlight><bold>12</bold></highlight>-<highlight><bold>14</bold></highlight> may convert the received GPS satellite signals to a different radio band for transmission to mobile device <highlight><bold>10</bold></highlight>. Mobile device <highlight><bold>10</bold></highlight> may then calculate its own location by triangulating on the access points, using the difference in timing of the pseudo-GPS signals received from each access point. The calculated location may then be transmitted to the controlling access point, which may forward that data to a server. Pseudo-GPS signals may be modulated to minimize multi-path problems. In the pseudo-GPS operation, there may be no need for a ping request or a ping signal, as the pseudo-GPS signals may be transmitted repeatedly. The various access point that are transmitting pseudo-GPS signals to the mobile device may use time division multiplexing, different frequencies, or other schemes to avoid interference with the multiple signals received at the mobile device. </paragraph>
<paragraph id="P-0038" lvl="0"><number>&lsqb;0038&rsqb;</number> In one embodiment, the pseudo-GPS signals are transmitted from the same access points that can provide data communication with the mobile device. In another embodiment, the pseudo-GPS transmitters are separate from the access points that communicate data to/from the mobile device, and may have different locations that are used in the triangulation calculations. These pseudo-GPS transmitters may obtain their own location information by triangulating on the standard GPS signals received from GPS satellites. </paragraph>
<paragraph id="P-0039" lvl="0"><number>&lsqb;0039&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 6</cross-reference> shows a flow chart <highlight><bold>6</bold></highlight> of a method embodiment that may be implemented in a system. At block <highlight><bold>61</bold></highlight>, the pseudo-GPS transmitters receive GPS satellite signals. In one embodiment, each pseudo-GPS transmitter calculates its own location from these received GPS satellite signals. At block <highlight><bold>62</bold></highlight>, each pseudo-GPS transmitter transmits pseudo-GPS signals, which may be received by any mobile device within range. As previously stated, the various transmitters may use time-division multiplexing, different frequencies, or other schemes to avoid interfering with each other. In one embodiment, the pseudo-GPS transmitters are integrated into the access points. In another embodiment, they are separate devices. Each pseudo-GPS transmitter may also transmit its own location so that the mobile device will have the necessary information to perform triangulation calculations. </paragraph>
<paragraph id="P-0040" lvl="0"><number>&lsqb;0040&rsqb;</number> At block <highlight><bold>63</bold></highlight>, the mobile device may receive the pseudo-GPS signals from multiple pseudo-GPS transmitters, and at block <highlight><bold>64</bold></highlight>, may calculate its own position based on the relative reception times of these signals and on the location of each pseudo-GPS transmitter. At block <highlight><bold>64</bold></highlight>, the mobile device may send its location information to the controlling access point, which may forward that information to a server at block <highlight><bold>66</bold></highlight>. </paragraph>
<paragraph id="P-0041" lvl="0"><number>&lsqb;0041&rsqb;</number> In the pseudo-GPS embodiment, multiple mobile devices may receive the same transmitted pseudo-GPS signals from multiple pseudo-GPS transmitters, and each mobile device may make its own calculation of its own location. Each mobile device may then transmit its location to its respective controlling access point using the normal communications protocols established for the system. </paragraph>
<paragraph id="P-0042" lvl="0"><number>&lsqb;0042&rsqb;</number> The invention can be implemented in circuitry or as a method. The invention can also be implemented as instructions stored on a machine-readable medium, which can be read and executed by at least one processor to perform the functions described herein. A machine-readable medium includes any mechanism for storing or transmitting information in a form readable by a machine (e.g., a computer). For example, a machine-readable medium can include read only memory (ROM); random access memory (RAM); magnetic disk storage media; optical storage media; flash memory devices; electrical, optical, acoustical or other form of propagated signals (e.g., carrier waves, infrared signals, digital signals, etc.), and others. </paragraph>
<paragraph id="P-0043" lvl="0"><number>&lsqb;0043&rsqb;</number> The foregoing description is intended to be illustrative and not limiting. Variations will occur to those of skill in the art. Those variations are intended to be included in the invention, which is limited only by the spirit and scope of the appended claims. </paragraph>
</section>
</detailed-description>
</subdoc-description>
<subdoc-claims>
<heading lvl="1">We claim: </heading>
<claim id="CLM-00001">
<claim-text><highlight><bold>1</bold></highlight>. A system, comprising: 
<claim-text>first, second and third wireless access points, each having synchronized time information derived from a common time base; </claim-text>
<claim-text>a wireless mobile device to broadcast a time signal to each of the first, second and third access points; and </claim-text>
<claim-text>a server coupled to the first, second and third access points through communications links to receive data on when the time signal was received at each of the first, second and third access points and to derive positional information on the wireless mobile device from the data. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00002">
<claim-text><highlight><bold>2</bold></highlight>. The system of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein: 
<claim-text>the common time base is derived from a satellite-based global position system. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00003">
<claim-text><highlight><bold>3</bold></highlight>. The system of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein: 
<claim-text>the time signal is a ping signal transmitted simultaneously to each of the first, second, and third access points. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00004">
<claim-text><highlight><bold>4</bold></highlight>. The system of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein: 
<claim-text>the server is to derive positional information by using triangulation techniques based on the data from the first, second and third access points. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00005">
<claim-text><highlight><bold>5</bold></highlight>. The system of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein: 
<claim-text>the wireless mobile device includes an Internet browser. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00006">
<claim-text><highlight><bold>6</bold></highlight>. An apparatus, comprising: 
<claim-text>a wireless communication interface to communicate with first, second and third wireless access points; and </claim-text>
<claim-text>logic coupled to the wireless communication interface to broadcast a ping signal to the first, second and third access points. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00007">
<claim-text><highlight><bold>7</bold></highlight>. The apparatus of <dependent-claim-reference depends_on="CLM-00006">claim 6</dependent-claim-reference>, further comprising an Internet browser. </claim-text>
</claim>
<claim id="CLM-00008">
<claim-text><highlight><bold>8</bold></highlight>. The apparatus of <dependent-claim-reference depends_on="CLM-00006">claim 6</dependent-claim-reference>, wherein: 
<claim-text>the apparatus is a mobile apparatus. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00009">
<claim-text><highlight><bold>9</bold></highlight>. A method, comprising: 
<claim-text>broadcasting a ping signal from a mobile device to first, second, and third wireless access points; </claim-text>
<claim-text>determining a first time value, representing when the ping signal is received at the first access point and based on a first clock synchronized with a common time base; </claim-text>
<claim-text>determining a second time value, representing when the ping signal is received at the second access point and based on a second clock synchronized with the common time base; </claim-text>
<claim-text>determining a third time value, representing when the ping signal is received at the third access point and based on a third clock synchronized with the common time base; and </claim-text>
<claim-text>determining a location of the mobile device based on the first, second and third time values and on locations of the first, second, and third access points. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00010">
<claim-text><highlight><bold>10</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00009">claim 9</dependent-claim-reference>, wherein: 
<claim-text>determining the location of the mobile device includes: 
<claim-text>transmitting the first, second, and third time values from the first, second, and third access points to a server; and </claim-text>
<claim-text>calculating, in the server, the location of the mobile device. </claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00011">
<claim-text><highlight><bold>11</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00009">claim 9</dependent-claim-reference>, further comprising: 
<claim-text>transmitting the location of the wireless mobile device to the wireless mobile device. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00012">
<claim-text><highlight><bold>12</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00009">claim 9</dependent-claim-reference>, wherein: 
<claim-text>the common time base is derived from a satellite global position system. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00013">
<claim-text><highlight><bold>13</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00009">claim 9</dependent-claim-reference>, wherein: 
<claim-text>broadcasting the ping signal is in response to receiving a request for a ping signal. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00014">
<claim-text><highlight><bold>14</bold></highlight>. A method, comprising: 
<claim-text>receiving a first time value from a first wireless access point; </claim-text>
<claim-text>receiving a second time value from a second wireless access point; </claim-text>
<claim-text>receiving a third time value from a third wireless access point; </claim-text>
<claim-text>determining a first location of the first wireless access point; </claim-text>
<claim-text>determining a second location of the second wireless access point; </claim-text>
<claim-text>determining a third location of the third wireless access point; and </claim-text>
<claim-text>determining a location of a mobile device based on the first, second and third time values and the first, second and third locations. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00015">
<claim-text><highlight><bold>15</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00011">claim 14</dependent-claim-reference>, further comprising: 
<claim-text>transmitting the location of the mobile device. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00016">
<claim-text><highlight><bold>16</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00011">claim 14</dependent-claim-reference>, further comprising: 
<claim-text>transmitting the location of the mobile device to the mobile device. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00017">
<claim-text><highlight><bold>17</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00011">claim 14</dependent-claim-reference>, wherein: 
<claim-text>the first, second and third time values are derived from a common time base. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00018">
<claim-text><highlight><bold>18</bold></highlight>. A method, comprising: 
<claim-text>receiving a ping signal from a wireless mobile device; </claim-text>
<claim-text>determining a time value representing when the ping signal was received based on a clock synchronized with clocks in other apparatuses; and </claim-text>
<claim-text>transmitting the time value to a computer system that receives other time values from the other apparatuses and calculates a physical location of the wireless mobile device. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00019">
<claim-text><highlight><bold>19</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00011">claim 18</dependent-claim-reference>, further comprising: 
<claim-text>transmitting a ping request to the wireless mobile device. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00020">
<claim-text><highlight><bold>20</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00011">claim 18</dependent-claim-reference>, further comprising: 
<claim-text>receiving the location of the wireless mobile device from the computer system. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00021">
<claim-text><highlight><bold>21</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00022">claim 20</dependent-claim-reference>, further comprising: 
<claim-text>transmitting the location of the wireless mobile device to the wireless mobile device. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00022">
<claim-text><highlight><bold>22</bold></highlight>. A method, comprising: 
<claim-text>transmitting pseudo-GPS signals from multiple pseudo-GPS transmitters to a mobile device; </claim-text>
<claim-text>receiving the pseudo-GPS signals at the mobile device; and </claim-text>
<claim-text>calculating a location of the mobile device from timing values derived from the pseudo-GPS signals. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00023">
<claim-text><highlight><bold>23</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00022">claim 22</dependent-claim-reference>, further comprising: 
<claim-text>receiving GPS signals at the pseudo-GPS transmitters from GPS satellites; and </claim-text>
<claim-text>calculating locations of the pseudo-GPS transmitters. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00024">
<claim-text><highlight><bold>24</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00022">claim 22</dependent-claim-reference>, further comprising: 
<claim-text>transmitting the location of the mobile device to a controlling access point. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00025">
<claim-text><highlight><bold>25</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00022">claim 24</dependent-claim-reference>, further comprising: 
<claim-text>transmitting the location of the mobile device from the controlling access point to a server. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00026">
<claim-text><highlight><bold>26</bold></highlight>. A machine-readable medium, having instructions stored thereon for execution by at least one processor, said instructions capable of directing the at least one processor to perform operations comprising: 
<claim-text>receiving a ping signal from a wireless mobile device; </claim-text>
<claim-text>determining a time value representing when the ping signal was received based on a clock synchronized with clocks in other apparatuses; and </claim-text>
<claim-text>transmitting the time value to a computer system that receives other time values from the other apparatuses and calculates a physical location of the wireless mobile device. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00027">
<claim-text><highlight><bold>27</bold></highlight>. The medium of <dependent-claim-reference depends_on="CLM-00022">claim 26</dependent-claim-reference>, further comprising: 
<claim-text>transmitting a ping request to the wireless mobile device. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00028">
<claim-text><highlight><bold>28</bold></highlight>. The medium of <dependent-claim-reference depends_on="CLM-00022">claim 26</dependent-claim-reference>, further comprising: 
<claim-text>receiving the location of the wireless mobile device from the computer system. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00029">
<claim-text><highlight><bold>29</bold></highlight>. The medium of <dependent-claim-reference depends_on="CLM-00022">claim 28</dependent-claim-reference>, further comprising: 
<claim-text>transmitting the location of the wireless mobile device to the wireless mobile device.</claim-text>
</claim-text>
</claim>
</subdoc-claims>
<subdoc-drawings id="DRAWINGS">
<heading lvl="0" align="CENTER">Drawings</heading>
<representative-figure>3</representative-figure>
<figure id="figure-D00000">
<image id="EMI-D00000" file="US20030001776A1-20030102-D00000.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00001">
<image id="EMI-D00001" file="US20030001776A1-20030102-D00001.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00002">
<image id="EMI-D00002" file="US20030001776A1-20030102-D00002.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00003">
<image id="EMI-D00003" file="US20030001776A1-20030102-D00003.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00004">
<image id="EMI-D00004" file="US20030001776A1-20030102-D00004.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00005">
<image id="EMI-D00005" file="US20030001776A1-20030102-D00005.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00006">
<image id="EMI-D00006" file="US20030001776A1-20030102-D00006.TIF" imf="TIFF" ti="DR"/>
</figure>
</subdoc-drawings>
</patent-application-publication>
