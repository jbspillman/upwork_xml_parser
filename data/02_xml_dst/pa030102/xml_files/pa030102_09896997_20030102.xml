<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE patent-application-publication SYSTEM "pap-v16-2002-01-01.dtd" [
<!ENTITY US20030002449A1-20030102-D00000.TIF SYSTEM "US20030002449A1-20030102-D00000.TIF" NDATA TIF>
<!ENTITY US20030002449A1-20030102-D00001.TIF SYSTEM "US20030002449A1-20030102-D00001.TIF" NDATA TIF>
<!ENTITY US20030002449A1-20030102-D00002.TIF SYSTEM "US20030002449A1-20030102-D00002.TIF" NDATA TIF>
<!ENTITY US20030002449A1-20030102-D00003.TIF SYSTEM "US20030002449A1-20030102-D00003.TIF" NDATA TIF>
<!ENTITY US20030002449A1-20030102-D00004.TIF SYSTEM "US20030002449A1-20030102-D00004.TIF" NDATA TIF>
<!ENTITY US20030002449A1-20030102-D00005.TIF SYSTEM "US20030002449A1-20030102-D00005.TIF" NDATA TIF>
<!ENTITY US20030002449A1-20030102-D00006.TIF SYSTEM "US20030002449A1-20030102-D00006.TIF" NDATA TIF>
<!ENTITY US20030002449A1-20030102-D00007.TIF SYSTEM "US20030002449A1-20030102-D00007.TIF" NDATA TIF>
<!ENTITY US20030002449A1-20030102-D00008.TIF SYSTEM "US20030002449A1-20030102-D00008.TIF" NDATA TIF>
<!ENTITY US20030002449A1-20030102-D00009.TIF SYSTEM "US20030002449A1-20030102-D00009.TIF" NDATA TIF>
]>
<patent-application-publication>
<subdoc-bibliographic-information>
<document-id>
<doc-number>20030002449</doc-number>
<kind-code>A1</kind-code>
<document-date>20030102</document-date>
</document-id>
<publication-filing-type>new</publication-filing-type>
<domestic-filing-data>
<application-number>
<doc-number>09896997</doc-number>
</application-number>
<application-number-series-code>09</application-number-series-code>
<filing-date>20010702</filing-date>
</domestic-filing-data>
<technical-information>
<classification-ipc>
<classification-ipc-primary>
<ipc>H04B007/00</ipc>
</classification-ipc-primary>
<classification-ipc-secondary>
<ipc>H04Q007/00</ipc>
</classification-ipc-secondary>
<classification-ipc-secondary>
<ipc>H04L012/413</ipc>
</classification-ipc-secondary>
<classification-ipc-edition>07</classification-ipc-edition>
</classification-ipc>
<classification-us>
<classification-us-primary>
<uspc>
<class>370</class>
<subclass>277000</subclass>
</uspc>
</classification-us-primary>
<classification-us-secondary>
<uspc>
<class>370</class>
<subclass>296000</subclass>
</uspc>
</classification-us-secondary>
<classification-us-secondary>
<uspc>
<class>370</class>
<subclass>329000</subclass>
</uspc>
</classification-us-secondary>
<classification-us-secondary>
<uspc>
<class>370</class>
<subclass>349000</subclass>
</uspc>
</classification-us-secondary>
<classification-us-secondary>
<uspc>
<class>370</class>
<subclass>445000</subclass>
</uspc>
</classification-us-secondary>
</classification-us>
<title-of-invention>Method and system for data packet collision avoidance in a wireless communication system</title-of-invention>
</technical-information>
<inventors>
<first-named-inventor>
<name>
<given-name>Loren</given-name>
<middle-name>J</middle-name>
<family-name>Rittle</family-name>
</name>
<residence>
<residence-us>
<city>Naperville</city>
<state>IL</state>
<country-code>US</country-code>
</residence-us>
</residence>
<authority-applicant>INV</authority-applicant>
</first-named-inventor>
<inventor>
<name>
<given-name>Timothy</given-name>
<middle-name>J.</middle-name>
<family-name>Spets</family-name>
</name>
<residence>
<residence-us>
<city>Algonquin</city>
<state>IL</state>
<country-code>US</country-code>
</residence-us>
</residence>
<authority-applicant>INV</authority-applicant>
</inventor>
<inventor>
<name>
<given-name>Guy</given-name>
<middle-name>G.</middle-name>
<family-name>Romano</family-name>
</name>
<residence>
<residence-us>
<city>Elmhurst</city>
<state>IL</state>
<country-code>US</country-code>
</residence-us>
</residence>
<authority-applicant>INV</authority-applicant>
</inventor>
<inventor>
<name>
<given-name>Kenneth</given-name>
<middle-name>T.</middle-name>
<family-name>Crisler</family-name>
</name>
<residence>
<residence-us>
<city>Lake Zurich</city>
<state>IL</state>
<country-code>US</country-code>
</residence-us>
</residence>
<authority-applicant>INV</authority-applicant>
</inventor>
</inventors>
<assignee>
<organization-name>MOTOROLA, INC</organization-name>
<assignee-type>02</assignee-type>
</assignee>
<correspondence-address>
<name-1>MOTOROLA, INC.</name-1>
<name-2></name-2>
<address>
<address-1>1303 EAST ALGONQUIN ROAD</address-1>
<address-2>IL01/3RD</address-2>
<city>SCHAUMBURG</city>
<state>IL</state>
<postalcode>60196</postalcode>
</address>
</correspondence-address>
</subdoc-bibliographic-information>
<subdoc-abstract>
<paragraph id="A-0001" lvl="0">Frame collisions on communication channels connecting half-duplex units and a full-duplex unit are avoided using MAC and LLC layer protocols adapted to arbitrate channel usage. One or more flags can be included in MAC and LLC packet headers and/or acknowledgements to indicate whether subsequent packet transmissions will be attempted by sending units. Units receiving set flags can hold off transmission until receiving cleared flags from the sending units. In this manner, packet collisions can be avoided. </paragraph>
</subdoc-abstract>
<subdoc-description>
<summary-of-invention>
<section>
<heading lvl="1">TECHNICAL FIELD OF THE INVENTION </heading>
<paragraph id="P-0001" lvl="0"><number>&lsqb;0001&rsqb;</number> The present invention relates generally to wireless communication systems, and in particular, to a wireless communication system that supports both full-duplex and half-duplex operation. </paragraph>
</section>
<section>
<heading lvl="1">BACKGROUND OF THE INVENTION </heading>
<paragraph id="P-0002" lvl="0"><number>&lsqb;0002&rsqb;</number> Multi-user, wireless packet data communication systems are known. These systems typically include full-duplex base radio sites operating in conjunction with a support infrastructure for providing interconnect, dispatch and/or Internet protocol (IP) services. The base radio sites are linked to a population of half-duplex and full-duplex mobile subscriber units by way of radio frequency (RF) communication channels. </paragraph>
<paragraph id="P-0003" lvl="0"><number>&lsqb;0003&rsqb;</number> Each base radio site controls one or more pairs of RF communication channels, where each channel pair supports mobile subscriber units (SUs). One channel of each pair is designated as an uplink channel for carrying information from the mobile subscriber unit to the base site, while the other channel is designated a downlink channel carrying information from the base site to the mobile subscriber unit. Full-duplexed base stations are capable of simultaneously transmitting on the downlink channel and receiving on the uplink channel. However, half-duplex subscriber units can only transmit or receive at any given time. Employing a combination of full-duplex base stations and half-duplex subscriber units in a system can lead to &ldquo;collisions&rdquo; on the RF link. </paragraph>
<paragraph id="P-0004" lvl="0"><number>&lsqb;0004&rsqb;</number> A &ldquo;collision&rdquo; occurs when a particular subscriber unit is transmitting a packet of data and a base station is simultaneously transmitting another packet to the same subscriber unit. When a collision occurs, at least one of the two transmitted packets will be lost. Thus, retransmission of the lost packet is sometimes required, reducing overall system throughput. </paragraph>
<paragraph id="P-0005" lvl="0"><number>&lsqb;0005&rsqb;</number> Accordingly, there is a need for a method and system that prevents the collision of transmitted packets in wireless communication systems that support both full-duplex and half-duplex units.</paragraph>
</section>
</summary-of-invention>
<brief-description-of-drawings>
<section>
<heading lvl="1">BRIEF DESCRIPTION OF THE DRAWINGS </heading>
<paragraph id="P-0006" lvl="0"><number>&lsqb;0006&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1</cross-reference> is a block diagram of a wireless communication system in accordance with an embodiment of the present invention. </paragraph>
<paragraph id="P-0007" lvl="0"><number>&lsqb;0007&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 2</cross-reference> is a conceptual diagram illustrating the communication protocol layers of the system shown in <cross-reference target="DRAWINGS">FIG. 1</cross-reference>. </paragraph>
<paragraph id="P-0008" lvl="0"><number>&lsqb;0008&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3</cross-reference> illustrates an exemplary data packet used by the system of <cross-reference target="DRAWINGS">FIG. 1</cross-reference>. </paragraph>
<paragraph id="P-0009" lvl="0"><number>&lsqb;0009&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 4</cross-reference> illustrates a sequence of packets including hold flags in accordance with the present invention. </paragraph>
<paragraph id="P-0010" lvl="0"><number>&lsqb;0010&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 5</cross-reference> is a diagram illustrating the details of one of the packets shown in <cross-reference target="DRAWINGS">FIG. 4</cross-reference>. </paragraph>
<paragraph id="P-0011" lvl="0"><number>&lsqb;0011&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 6</cross-reference> is a block diagram illustrating details of a full-duplex unit and a half-duplex unit in accordance with another embodiment of the present invention. </paragraph>
<paragraph id="P-0012" lvl="0"><number>&lsqb;0012&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 7</cross-reference> is a flow chart illustrating a receive operation of the full-duplex unit shown in <cross-reference target="DRAWINGS">FIG. 6</cross-reference>. </paragraph>
<paragraph id="P-0013" lvl="0"><number>&lsqb;0013&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 8</cross-reference> is a flow chart illustrating a transmit operation of the full-duplex unit shown in <cross-reference target="DRAWINGS">FIG. 6</cross-reference>. </paragraph>
<paragraph id="P-0014" lvl="0"><number>&lsqb;0014&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 9</cross-reference> is a Message Sequence Chart illustrating an LLC protocol in accordance with a further embodiment of the present invention. </paragraph>
<paragraph id="P-0015" lvl="0"><number>&lsqb;0015&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 10</cross-reference> is a flow chart illustrating receive and transmit operation performed by a unit that implements the LLC protocol of <cross-reference target="DRAWINGS">FIG. 9</cross-reference>. </paragraph>
<paragraph id="P-0016" lvl="0"><number>&lsqb;0016&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 11</cross-reference> is a flow chart illustrating an alternate transmit operation performed by a full-duplex unit that implements the LLC protocol illustrated in <cross-reference target="DRAWINGS">FIG. 9</cross-reference>. </paragraph>
<paragraph id="P-0017" lvl="0"><number>&lsqb;0017&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 12</cross-reference> is a block diagram illustrating details of a full-duplex unit and a half-duplex unit in accordance with another embodiment of the present invention. </paragraph>
<paragraph id="P-0018" lvl="0"><number>&lsqb;0018&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 13</cross-reference> is a state transition diagram illustrating a second state machine includable in the full-duplex unit shown in <cross-reference target="DRAWINGS">FIG. 12</cross-reference>. </paragraph>
<paragraph id="P-0019" lvl="0"><number>&lsqb;0019&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 14</cross-reference> is a system design chart showing system operation details while the state machine of <cross-reference target="DRAWINGS">FIG. 13</cross-reference> is in state zero. </paragraph>
<paragraph id="P-0020" lvl="0"><number>&lsqb;0020&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 15</cross-reference> is a system design chart illustrating system operation details while the state machine of <cross-reference target="DRAWINGS">FIG. 13</cross-reference> is in state one. </paragraph>
<paragraph id="P-0021" lvl="0"><number>&lsqb;0021&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 16</cross-reference> is a system design chart illustrating system operation details while the state machine of <cross-reference target="DRAWINGS">FIG. 13</cross-reference> is in state two. </paragraph>
<paragraph id="P-0022" lvl="0"><number>&lsqb;0022&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 17</cross-reference> is a Message Sequence Chart illustrating steady-state operation of the system shown in <cross-reference target="DRAWINGS">FIG. 12</cross-reference>, which includes the state machine illustrated in <cross-reference target="DRAWINGS">FIG. 13</cross-reference>. </paragraph>
<paragraph id="P-0023" lvl="0"><number>&lsqb;0023&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 18</cross-reference> is a Message Sequence Chart illustrating bi-directional operation of the system shown in <cross-reference target="DRAWINGS">FIG. 12</cross-reference>, which includes the state machine at <cross-reference target="DRAWINGS">FIG. 13</cross-reference>. </paragraph>
<paragraph id="P-0024" lvl="0"><number>&lsqb;0024&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 19</cross-reference> illustrates an error recovery operation of the system of <cross-reference target="DRAWINGS">FIG. 12</cross-reference>, which includes the state machine shown in <cross-reference target="DRAWINGS">FIG. 13</cross-reference>. </paragraph>
<paragraph id="P-0025" lvl="0"><number>&lsqb;0025&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 20</cross-reference> is a Message Sequence Chart illustrating the operation of the system in <cross-reference target="DRAWINGS">FIG. 12</cross-reference> during a start-up collision.</paragraph>
</section>
</brief-description-of-drawings>
<detailed-description>
<section>
<heading lvl="1">DETAILED DESCRIPTION OF THE PRESENTLY PREFERRED EMBODIMENTS </heading>
<paragraph id="P-0026" lvl="0"><number>&lsqb;0026&rsqb;</number> It is an advantage of the present invention to provide a method and system that avoids collisions between packets transmitted over wireless channels between full-duplex and half-duplex units. </paragraph>
<paragraph id="P-0027" lvl="0"><number>&lsqb;0027&rsqb;</number> Turning now to the drawings, and in particular to <cross-reference target="DRAWINGS">FIG. 1</cross-reference>, there is illustrated a radio frequency (RF) communication system <highlight><bold>100</bold></highlight> in accordance with an embodiment of the present invention. The system <highlight><bold>100</bold></highlight> includes a plurality of base sites <highlight><bold>102</bold></highlight> communicating with a plurality of mobile subscriber units (SUs) <highlight><bold>106</bold></highlight> over RF channels. A support infrastructure <highlight><bold>104</bold></highlight> provides various communication services to the base sites <highlight><bold>102</bold></highlight>, such as interconnect, dispatch, and Internet protocol (IP) data packet services. The support infrastructure <highlight><bold>104</bold></highlight> can include commercially-available components, such as one or more base site controllers, mobile switching centers, home location registers, and dispatch application processors, such as the &ldquo;iDEN&rdquo; dispatch application processor commercially-available from Motorola, Inc. </paragraph>
<paragraph id="P-0028" lvl="0"><number>&lsqb;0028&rsqb;</number> The base sites <highlight><bold>102</bold></highlight> can support one or more communication modes, such as frequency division multiple access (FDMA), time division multiple access (TDMA) or code division multiple access (CDMA). The base sites <highlight><bold>102</bold></highlight> can include &ldquo;iDEN&rdquo; enhanced base transceiver sites, which are available from Motorola, Inc., configured to perform in accordance with the present invention. The SUs <highlight><bold>106</bold></highlight> can include any devices for wireless communication with the system <highlight><bold>100</bold></highlight>, including mobile two-way radios, wireless data modems, pagers, cellular telephones, and the like. </paragraph>
<paragraph id="P-0029" lvl="0"><number>&lsqb;0029&rsqb;</number> Generally, the base sites <highlight><bold>102</bold></highlight> are capable of full-duplex communication over the wireless channels. In contrast, the SUs <highlight><bold>106</bold></highlight> are, in general, capable of only half-duplex operation. To prevent packet collisions on the wireless channels, the system <highlight><bold>100</bold></highlight> can employ link layer control (LLC) and/or media access control (MAC) layer protocols that avoid transmission conflicts on the channels connecting the base sites <highlight><bold>102</bold></highlight> and SUs <highlight><bold>106</bold></highlight>. In this situation, a packet collision occurs when a particular half-duplex SU, out of the entire population of SUs <highlight><bold>106</bold></highlight>, transmits a packet to a base site <highlight><bold>102</bold></highlight> concurrently when a base site transmits a packet to that same SU on the paired channel. </paragraph>
<paragraph id="P-0030" lvl="0"><number>&lsqb;0030&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 2</cross-reference> is a conceptual diagram illustrating communication protocol layers usable within the system <highlight><bold>100</bold></highlight>. The layers are identified in accordance with the Open System Interconnection (OSI) nomenclature, and only the lower two layers are illustrated. In accordance with the OSI nomenclature, the lowest protocol layer is a physical (PHY) protocol, such as T<highlight><bold>1</bold></highlight> channel framing. The second protocol layer, the Data Link layer, may be further subdivided into the MAC and LLC layers. The MAC layer, typically adds packet headers and trailers containing error correction or detection information, allowing the system <highlight><bold>100</bold></highlight> to correct or detect errors incurred during transmission of packets to and from the base sites <highlight><bold>102</bold></highlight>. Other higher-level protocol layers may be implemented by the system <highlight><bold>100</bold></highlight>. </paragraph>
<paragraph id="P-0031" lvl="0"><number>&lsqb;0031&rsqb;</number> In the preferred embodiment, LAP-D as modified to support a block-wise selective reject operation is the LLC layer. In this context, a block is a portion of an entire frame to be transmitted as a MAC layer packet. Block-wise selective reject is a well-known protocol extension which helps mitigate performance problems due to errors commonly seen in a wireless packet data system. In alternate embodiments, any link or network protocol that uses a positive acknowledgement scheme might serve as the basis for the improvements provided by the present invention. </paragraph>
<paragraph id="P-0032" lvl="0"><number>&lsqb;0032&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3</cross-reference> illustrates an exemplary packet format usable by the system <highlight><bold>100</bold></highlight> at the MAC and LLC layers. The packet <highlight><bold>120</bold></highlight> includes a payload <highlight><bold>126</bold></highlight> containing voice, data or any other information transported by the system <highlight><bold>100</bold></highlight>. A MAC header <highlight><bold>124</bold></highlight> and a LLC header <highlight><bold>122</bold></highlight> are pre-pended to the payload <highlight><bold>126</bold></highlight>. The MAC header <highlight><bold>124</bold></highlight> contains control information, such as flags, addresses, error codes, or the like that are used by the MAC layer protocol. The LLC header <highlight><bold>122</bold></highlight> contains appropriate control information used by the LLC protocol. Before payload information is passed between the base sites <highlight><bold>102</bold></highlight> and the SUs <highlight><bold>106</bold></highlight> over the channel, it is encapsulated and de-encapsulated with LLC and MAC header information by the respective protocol layers operating in the base sites <highlight><bold>102</bold></highlight> and SUs <highlight><bold>106</bold></highlight>. </paragraph>
<paragraph id="P-0033" lvl="0"><number>&lsqb;0033&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 4</cross-reference> illustrates an exemplary sequence of packets <highlight><bold>130</bold></highlight> in accordance with an embodiment of the present invention. Packets are generally transferred between the SUs <highlight><bold>106</bold></highlight> and the base sites <highlight><bold>102</bold></highlight> as streams containing one or more data packets. As shown in <cross-reference target="DRAWINGS">FIG. 4</cross-reference>, each data packet includes a hold flag, represented by a single bit referred to as the H-bit. When a unit (either a base site or SU) transmits a stream of packets, it sets the hold flag to indicate whether the packet is the last packet of the stream. If a particular packet is not the last packet, the transmitting unit sets the hold flag to one. This indicates to the receiving unit that additional packets will immediately follow the packet with the flag set. The transmitting unit clears the hold flag in the last data packet of the stream by setting it to zero. By monitoring the setting of the hold flag, a unit receiving the stream of packets can avoid collision by deferring transmission of downlink packets until after it receives an uplink data packet having the hold flag cleared. </paragraph>
<paragraph id="P-0034" lvl="0"><number>&lsqb;0034&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 5</cross-reference> illustrates an exemplary MAC layer packet <highlight><bold>140</bold></highlight> that includes the hold flag (H-bit) in the MAC header. In this embodiment of the invention, the MAC layer protocol of the base sites <highlight><bold>102</bold></highlight> and SUs <highlight><bold>106</bold></highlight> is responsible for avoiding collision on communication channels linking half-duplex and full-duplex units. </paragraph>
<paragraph id="P-0035" lvl="0"><number>&lsqb;0035&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 6</cross-reference> is a block diagram illustrating exemplary components of a full-duplex unit <highlight><bold>150</bold></highlight> and a half-duplex unit <highlight><bold>152</bold></highlight> for utilizing the MAC layer hold flag to avoid packet collisions over an RF channel <highlight><bold>154</bold></highlight>. The components <highlight><bold>156</bold></highlight>-<highlight><bold>162</bold></highlight> are resources available to a MAC layer protocol. In the full-duplex unit <highlight><bold>150</bold></highlight>, a transmit queue <highlight><bold>156</bold></highlight> is provided for temporarily storing downlink packets due to be transmitted to the half-duplex unit <highlight><bold>152</bold></highlight> over the channel <highlight><bold>154</bold></highlight>. A hold address table <highlight><bold>158</bold></highlight> stores identifiers corresponding to half-duplex units. Unit identifiers are placed in the table <highlight><bold>158</bold></highlight> in response to receiving a packet having a set H-bit. A timeout timer <highlight><bold>160</bold></highlight> sets timeout periods for receiving packets and acknowledgements from the half-duplex unit <highlight><bold>152</bold></highlight>. </paragraph>
<paragraph id="P-0036" lvl="0"><number>&lsqb;0036&rsqb;</number> The half-duplex unit <highlight><bold>152</bold></highlight> includes a transmit queue <highlight><bold>162</bold></highlight> for temporarily storing uplink packets that are to be transmitted to the full-duplex unit <highlight><bold>150</bold></highlight>. </paragraph>
<paragraph id="P-0037" lvl="0"><number>&lsqb;0037&rsqb;</number> The full-duplex unit <highlight><bold>150</bold></highlight> can be one of the base sites <highlight><bold>102</bold></highlight>, and the half-duplex unit <highlight><bold>152</bold></highlight> can be one of the SUs <highlight><bold>106</bold></highlight>. </paragraph>
<paragraph id="P-0038" lvl="0"><number>&lsqb;0038&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 7</cross-reference> is a flow chart <highlight><bold>180</bold></highlight> of a receive operation of the full-duplex unit <highlight><bold>152</bold></highlight>. In step <highlight><bold>182</bold></highlight>, an uplink packet is received from the half-duplex unit <highlight><bold>152</bold></highlight>. In step <highlight><bold>184</bold></highlight>, a check is made to determine whether the hold flag (H-bit) is set. If the hold flag is set, this indicates that one or more subsequent packets will immediately follow the received uplink packet. In this case, the full-duplex unit <highlight><bold>150</bold></highlight> stores the SU identification value (SU ID) embedded in the uplink packet in the hold address table <highlight><bold>158</bold></highlight> (step <highlight><bold>186</bold></highlight>). In step <highlight><bold>188</bold></highlight>, the hold timeout timer <highlight><bold>160</bold></highlight> is started. The full-duplex unit <highlight><bold>150</bold></highlight> then waits for the next packet (step <highlight><bold>189</bold></highlight>). If the timeout period expires without receiving the next packet, the SU ID is removed from the hold address table <highlight><bold>158</bold></highlight>. If the next uplink packet is received prior to the expiration of the timeout period, the procedure returns to step <highlight><bold>182</bold></highlight>. </paragraph>
<paragraph id="P-0039" lvl="0"><number>&lsqb;0039&rsqb;</number> If the H-bit of the uplink packet is cleared, the SU ID is removed from the hold address table <highlight><bold>158</bold></highlight> (step <highlight><bold>192</bold></highlight>). The timeout timer associated with the SU ID is terminated (step <highlight><bold>194</bold></highlight>). </paragraph>
<paragraph id="P-0040" lvl="0"><number>&lsqb;0040&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 8</cross-reference> is a flow chart <highlight><bold>170</bold></highlight> illustrating the transmit operation of the full-duplex unit <highlight><bold>152</bold></highlight>. In step <highlight><bold>172</bold></highlight>, a downlink packet due to be transmitted to the half-duplex unit <highlight><bold>152</bold></highlight> is stored in the transmission queue <highlight><bold>156</bold></highlight>. The downlink packet includes an SU identification value (SU ID). In step <highlight><bold>174</bold></highlight>, a comparison is made between the packet SU ID and the SU IDs stored in the hold address table <highlight><bold>158</bold></highlight>. If the SU ID is found in the hold address table <highlight><bold>158</bold></highlight>, the full-duplex unit <highlight><bold>150</bold></highlight> holds off transmission of the downlink packet in the transmission queue <highlight><bold>156</bold></highlight> until the SU ID is cleared from the table <highlight><bold>158</bold></highlight> (step <highlight><bold>176</bold></highlight>). If, on the other hand, the SU ID is not present in the table <highlight><bold>158</bold></highlight>, the full-duplex unit <highlight><bold>150</bold></highlight> transmits the downlink packet to the half-duplex unit <highlight><bold>152</bold></highlight> over the channel <highlight><bold>154</bold></highlight> (step <highlight><bold>178</bold></highlight>). </paragraph>
<paragraph id="P-0041" lvl="0"><number>&lsqb;0041&rsqb;</number> The hold address table <highlight><bold>158</bold></highlight> can store multiple SU IDs. In addition, a timeout timer can be instantiated for each SU ID appearing in the table <highlight><bold>158</bold></highlight>. The procedures illustrated in FIGS. <highlight><bold>7</bold></highlight>-<highlight><bold>8</bold></highlight> can be executed as multi-tasked procedures on a per SU ID basis. </paragraph>
<paragraph id="P-0042" lvl="0"><number>&lsqb;0042&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 9</cross-reference> is a Message Sequence Chart illustrating an LLC protocol in accordance with an alternate embodiment of the present invention. In this LLC protocol, link layer acknowledgments (ACKs) include a flag that indicates to the receiving unit that one or more subsequent packets will be generated by the acknowledging unit. The receiving unit will then hold off new traffic to the sending unit until that unit has finished its transmission and has requested an ACK from the receiving unit. </paragraph>
<paragraph id="P-0043" lvl="0"><number>&lsqb;0043&rsqb;</number> The Message Sequence Chart <highlight><bold>200</bold></highlight> illustrates an exemplary succession of data streams transmitting between a first unit (unit <highlight><bold>1</bold></highlight>) and a second unit (unit <highlight><bold>2</bold></highlight>). In the exemplary scenario shown, unit <highlight><bold>1</bold></highlight> transmits a first data stream <highlight><bold>202</bold></highlight> comprising one or more packets or information frames. Each frame includes a flag, referred to as a P-bit, indicating whether the frame is the last frame of the stream. If the P-bit is set to zero, the frame is not the last in the stream. However, if the P-bit is set to one, it represents the last frame. </paragraph>
<paragraph id="P-0044" lvl="0"><number>&lsqb;0044&rsqb;</number> When a half-duplex unit LLC transmits a stream of frames, it can set the P-bit of the last frame in the stream. This indicates to the receiving peer LLC layer that the sender is now ready to receive an acknowledgment. Frames which contain a cleared P-bit indicate that the sender is not currently requesting an acknowledgment. </paragraph>
<paragraph id="P-0045" lvl="0"><number>&lsqb;0045&rsqb;</number> With only a P-bit flag, an opportunity for frame collision occurs after the receiving peer LLC layer sends an acknowledgment. At this particular time, either peer LLC layer can send frames. </paragraph>
<paragraph id="P-0046" lvl="0"><number>&lsqb;0046&rsqb;</number> To reduce or eliminate the possibility of collisions following transmission of an acknowledgement, a hold flag is included in the acknowledgment. This is illustrated in the second data stream <highlight><bold>204</bold></highlight> transmitted by unit <highlight><bold>2</bold></highlight>. </paragraph>
<paragraph id="P-0047" lvl="0"><number>&lsqb;0047&rsqb;</number> The second stream <highlight><bold>204</bold></highlight> begins with an ACK <highlight><bold>206</bold></highlight> having a hold flag set to one. The set flag indicates to the LLC layer of unit <highlight><bold>1</bold></highlight> to hold off sending further frames because additional frame traffic is following the ACK <highlight><bold>206</bold></highlight>. Unit <highlight><bold>1</bold></highlight> can then hold off transmitting further frames to unit <highlight><bold>2</bold></highlight> until it receives a frame with P&equals;1, an ACK with the hold flag cleared, or the expiration of an internal timeout timer. </paragraph>
<paragraph id="P-0048" lvl="0"><number>&lsqb;0048&rsqb;</number> In the example shown, after unit <highlight><bold>1</bold></highlight> receives the last frame of the second stream <highlight><bold>204</bold></highlight> with P&equals;1, it sends a third stream <highlight><bold>208</bold></highlight>. The third stream <highlight><bold>208</bold></highlight> begins with an ACK <highlight><bold>210</bold></highlight> having the hold flag set to one, indicating that additional frames are to be transmitted by unit <highlight><bold>1</bold></highlight> following the ACK <highlight><bold>210</bold></highlight>. Upon receiving the ACK <highlight><bold>210</bold></highlight>, unit <highlight><bold>2</bold></highlight> determines that the hold flag is set and waits for the additional traffic before sending any further frames to unit <highlight><bold>1</bold></highlight>. Upon receiving the last frame of the stream <highlight><bold>208</bold></highlight> (with P&equals;1), unit <highlight><bold>2</bold></highlight> transmits an ACK <highlight><bold>212</bold></highlight> with the hold flag cleared (H&equals;0). This indicates to unit <highlight><bold>1</bold></highlight> that the LLC layer in unit <highlight><bold>1</bold></highlight> is free to transmit more frames or an acknowledgment to unit <highlight><bold>2</bold></highlight> without waiting. </paragraph>
<paragraph id="P-0049" lvl="0"><number>&lsqb;0049&rsqb;</number> Unit <highlight><bold>1</bold></highlight> then transmits a fourth stream of frames <highlight><bold>214</bold></highlight> to unit <highlight><bold>2</bold></highlight>, setting the P-bit of the last frame. </paragraph>
<paragraph id="P-0050" lvl="0"><number>&lsqb;0050&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 10</cross-reference> is a flow chart <highlight><bold>220</bold></highlight> illustrating receiver operation of the LLC layer protocol illustrated in <cross-reference target="DRAWINGS">FIG. 9</cross-reference>. When an LLC layer on a half-duplex SU receives an acknowledgment with the hold flag set (step <highlight><bold>222</bold></highlight>), it determines that more frames are to immediately follow the acknowledgement and sets the hold transmission flag (HOLD_TX) to true (step <highlight><bold>223</bold></highlight>). After receiving the ACK with the hold flag set, the LLC layer starts a time-out timer (step <highlight><bold>224</bold></highlight>). The timer will be modified normally with the reception of another subsequent frame from the acknowledging unit. Accordingly, if a subsequent frame is received prior to the timeout expiration, a check is made to determine whether the P-bit of the frame is set (step <highlight><bold>233</bold></highlight>). If the P-bit is set, indicating the last frame in a stream, the HOLD_TX flag is set to false (step <highlight><bold>226</bold></highlight>) and the timer is stopped (step <highlight><bold>227</bold></highlight>). The LLC layer then checks for any queued ACKs for transmission to the sending unit (step <highlight><bold>228</bold></highlight>). Then a check is made to determine if there are any pending I-frames (steps <highlight><bold>229</bold></highlight>, <highlight><bold>232</bold></highlight>). </paragraph>
<paragraph id="P-0051" lvl="0"><number>&lsqb;0051&rsqb;</number> If there is a pending ACK and I-frame, an ACK with H&equals;1 is transmitted (step <highlight><bold>230</bold></highlight>), followed by transmission of the pending I-frame(s) (step <highlight><bold>231</bold></highlight>), with the last I-frame having P&equals;1. If there is no pending ACK, but a pending I-frame (step <highlight><bold>232</bold></highlight>), then the pending I-frame(s) are transmitted, with the last I-frame having P&equals;1 (step <highlight><bold>231</bold></highlight>). If there is a pending ACK with no pending I-frame(s), then the ACK is sent with H&equals;0 (step <highlight><bold>241</bold></highlight>). </paragraph>
<paragraph id="P-0052" lvl="0"><number>&lsqb;0052&rsqb;</number> If an ACK with H&equals;0 is received (step <highlight><bold>225</bold></highlight>) or the timer expires (step <highlight><bold>234</bold></highlight>), steps <highlight><bold>226</bold></highlight>-<highlight><bold>231</bold></highlight>, <highlight><bold>241</bold></highlight> are performed, as described above. </paragraph>
<paragraph id="P-0053" lvl="0"><number>&lsqb;0053&rsqb;</number> If new I-frame(s) are ready to be transmitted (step <highlight><bold>235</bold></highlight>), the frames are marked as pending (step <highlight><bold>236</bold></highlight>), and a check is performed to determine whether the hold flag is set (step <highlight><bold>237</bold></highlight>). If not, steps <highlight><bold>228</bold></highlight>-<highlight><bold>231</bold></highlight>, <highlight><bold>241</bold></highlight> are performed. </paragraph>
<paragraph id="P-0054" lvl="0"><number>&lsqb;0054&rsqb;</number> If an I-frame is received with the P-bit set to zero (step <highlight><bold>238</bold></highlight>), the hold flag is set to true (step <highlight><bold>239</bold></highlight>). The timeout timer is then restarted (step <highlight><bold>240</bold></highlight>). </paragraph>
<paragraph id="P-0055" lvl="0"><number>&lsqb;0055&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 11</cross-reference> shows a flow chart <highlight><bold>250</bold></highlight> of an alternate transmit operation performed by the LLC layer protocol shown in <cross-reference target="DRAWINGS">FIG. 9</cross-reference>. This alternate transmit operation will be performed after step <highlight><bold>231</bold></highlight> in <cross-reference target="DRAWINGS">FIG. 10</cross-reference>. The transmit operation illustrates collision recovery performed by a full-duplex unit in the event of a start-up collision. In step <highlight><bold>252</bold></highlight>, a downlink frame is transmitted by the LLC layer. At a full-duplex unit, a check is made to determine whether the transmission of the downlink frame resulted in a collision on the communication channel (step <highlight><bold>254</bold></highlight>). At a full-duplex unit, a collision is detected when frames are received during the same time period when downlink frames are being transmitted. If a collision is detected, the transmission (if not completed) of the downlink frame is halted (step <highlight><bold>255</bold></highlight>). The unit continues to receive the uplink frames until receiving a frame having the P-bit set (step <highlight><bold>256</bold></highlight>). After receiving the last frame, the full-duplex unit transmits an acknowledgement with the hold flag set to indicate a subsequent transmission of further frames (step <highlight><bold>258</bold></highlight>). Following the ACK, the downlink frames are retransmitted to the half-duplex unit (step <highlight><bold>260</bold></highlight>). </paragraph>
<paragraph id="P-0056" lvl="0"><number>&lsqb;0056&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 12</cross-reference> is a block diagram illustrating a system <highlight><bold>271</bold></highlight> in accordance with the preferred embodiment of the present invention. This preferred embodiment along with alternatives is described as follows. In the system <highlight><bold>271</bold></highlight>, an LLC layer protocol is employed to prevent packet collision between a full-duplex unit <highlight><bold>270</bold></highlight> and a half-duplex <highlight><bold>272</bold></highlight>. The full-duplex unit <highlight><bold>270</bold></highlight> and half-duplex unit <highlight><bold>272</bold></highlight> communicate over a channel <highlight><bold>274</bold></highlight>, which can be a wireless link. Although only one half-duplex unit is shown in <cross-reference target="DRAWINGS">FIG. 12</cross-reference>, multiple half-duplex units can operate with the full-duplex unit <highlight><bold>270</bold></highlight>. </paragraph>
<paragraph id="P-0057" lvl="0"><number>&lsqb;0057&rsqb;</number> The full-duplex unit <highlight><bold>270</bold></highlight> includes a transmit queue <highlight><bold>276</bold></highlight>, a state machine <highlight><bold>278</bold></highlight>, and one or more time-out timers <highlight><bold>280</bold></highlight>, <highlight><bold>282</bold></highlight>. </paragraph>
<paragraph id="P-0058" lvl="0"><number>&lsqb;0058&rsqb;</number> The half-duplex unit <highlight><bold>272</bold></highlight> includes a transmit queue <highlight><bold>273</bold></highlight>, a state machine <highlight><bold>278</bold></highlight><highlight><italic>a, </italic></highlight>and one or more time-out timers <highlight><bold>280</bold></highlight><highlight><italic>a, </italic></highlight><highlight><bold>282</bold></highlight><highlight><italic>a. </italic></highlight></paragraph>
<paragraph id="P-0059" lvl="0"><number>&lsqb;0059&rsqb;</number> The full-duplex unit <highlight><bold>270</bold></highlight> can be any component in a radio communication system capable of full-duplex operation, and is preferably a base site. The half-duplex unit <highlight><bold>272</bold></highlight> can be a component of a radio communication system capable of only half-duplex operation, such as a mobile subscriber unit. </paragraph>
<paragraph id="P-0060" lvl="0"><number>&lsqb;0060&rsqb;</number> In the preferred embodiment, the LLC protocol itself conveys all information on the duplex status of the unit. In one embodiment, all SUs in the system <highlight><bold>271</bold></highlight> are known to be capable of half-duplex operation only. In an alternative embodiment, a parameter is negotiated during registration of the half-duplex unit <highlight><bold>272</bold></highlight>, such that the LLC protocol of the full-duplex unit <highlight><bold>270</bold></highlight> can be made aware that the half-duplex unit <highlight><bold>272</bold></highlight> is capable of only half-duplex operation. This allows the LLC protocol to inhibit sending packets to the half-duplex unit <highlight><bold>272</bold></highlight> during certain scenarios. This reduces the likelihood that the half-duplex unit <highlight><bold>272</bold></highlight> will miss packets or frames transmitted from the full-duplex unit <highlight><bold>270</bold></highlight>, causing retransmission of the lost packets. </paragraph>
<paragraph id="P-0061" lvl="0"><number>&lsqb;0061&rsqb;</number> In the preferred embodiment, the state machines <highlight><bold>278</bold></highlight> and <highlight><bold>278</bold></highlight><highlight><italic>a </italic></highlight>use a set of rules to decide when a unit can transmit a packet and when it is held from making transmissions. To accomplish this, the LLC layer state machine relies on a hold bit included in packets transmitted between the two units <highlight><bold>270</bold></highlight>, <highlight><bold>272</bold></highlight>. Generally, a hold bit that is set notifies the receiving unit that the other unit has additional packets in its transmit queue waiting to be transmitted. Upon receiving a set hold bit, the unit waits until a cleared hold bit is received before attempting packet transmission to the other unit. In an alternative embodiment, <highlight><bold>278</bold></highlight><highlight><italic>a, </italic></highlight><highlight><bold>280</bold></highlight><highlight><italic>a </italic></highlight>and <highlight><bold>282</bold></highlight><highlight><italic>a </italic></highlight>do not exist, and all transmission decisions are made in the state machine <highlight><bold>278</bold></highlight> of unit <highlight><bold>270</bold></highlight>. </paragraph>
<paragraph id="P-0062" lvl="0"><number>&lsqb;0062&rsqb;</number> The full-duplex unit <highlight><bold>270</bold></highlight> can also be configured to track when it is waiting for an acknowledgment from the half-duplex unit <highlight><bold>272</bold></highlight>. If the full-duplex unit <highlight><bold>270</bold></highlight> is expecting an ACK and instead receives a packet, it will assume that its previously-transmitted packet was lost and will retransmit the original packet. </paragraph>
<paragraph id="P-0063" lvl="0"><number>&lsqb;0063&rsqb;</number> In the preferred embodiment, timers <highlight><bold>280</bold></highlight>, <highlight><bold>280</bold></highlight><highlight><italic>a, </italic></highlight><highlight><bold>282</bold></highlight> and <highlight><bold>282</bold></highlight><highlight><italic>a </italic></highlight>all mirror standard LAP-D timers used to recover from channel errors. Alternatively, different timers could be used. </paragraph>
<paragraph id="P-0064" lvl="0"><number>&lsqb;0064&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 13</cross-reference> is a state transition diagram illustrating the preferred embodiment of a state machine <highlight><bold>320</bold></highlight> includable in both the half-duplex unit <highlight><bold>272</bold></highlight> and the full-duplex unit <highlight><bold>270</bold></highlight> shown in <cross-reference target="DRAWINGS">FIG. 12</cross-reference>. The state machine <highlight><bold>320</bold></highlight> implements a procedure in the LLC protocol layer which supports collision-free communication with the peer LLC protocol layer. The state machine <highlight><bold>320</bold></highlight> includes three states: state <highlight><bold>0</bold></highlight>, state <highlight><bold>1</bold></highlight>, and state <highlight><bold>2</bold></highlight>. The transitions between states are illustrated in a standard Event/Action format. </paragraph>
<paragraph id="P-0065" lvl="0"><number>&lsqb;0065&rsqb;</number> The state machine <highlight><bold>320</bold></highlight> relies on a hold flag (H-bit) included in packets transmitted between the full-duplex and half-duplex units <highlight><bold>270</bold></highlight>, <highlight><bold>272</bold></highlight>. The H-bit is set in a packet to indicate that additional packets are immediately following. The last packet in a stream has the H-bit cleared to indicate to the receiving unit that no further packets should be expected in the incoming stream. </paragraph>
<paragraph id="P-0066" lvl="0"><number>&lsqb;0066&rsqb;</number> The state machine <highlight><bold>320</bold></highlight> is instantiated on the full-duplex unit <highlight><bold>270</bold></highlight> on a per address basis, meaning that for each half-duplex unit communicating with the full-duplex unit <highlight><bold>270</bold></highlight>, a separate, independent state machine, as well as corresponding transmit queues and timeout timers are provided. In the preferred embodiment, the state machine <highlight><bold>320</bold></highlight> is also instantiated once on each SU <highlight><bold>272</bold></highlight>. In an alternative embodiment, SU <highlight><bold>272</bold></highlight> contains no instantiated state machine to handle received H-bits. If the full-duplex unit is capable of detecting or computing collisions, then the state machine <highlight><bold>320</bold></highlight> can be extended to consider the collision status to determine when to retransmit I-Frames that were potentially lost during the collision period. </paragraph>
<paragraph id="P-0067" lvl="0"><number>&lsqb;0067&rsqb;</number> Upon power up, the state machine <highlight><bold>320</bold></highlight> enters state <highlight><bold>0</bold></highlight>. In state <highlight><bold>0</bold></highlight>, the unit assumes that it may transmit packets over the channel to the other unit. </paragraph>
<paragraph id="P-0068" lvl="0"><number>&lsqb;0068&rsqb;</number> In the preferred embodiment, this procedure only controls when an LLC layer may or may not deliver packets to the local MAC layer for transmission. In an alternate embodiment, the state machine <highlight><bold>320</bold></highlight> may also control the ordering of LLC layer packets to the peer. For example, the state machine <highlight><bold>320</bold></highlight> can reorder pending acknowledgements before pending I-Frames in the transmission queue <highlight><bold>276</bold></highlight>, <highlight><bold>276</bold></highlight><highlight><italic>a. </italic></highlight></paragraph>
<paragraph id="P-0069" lvl="0"><number>&lsqb;0069&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 14</cross-reference> shows a system design chart <highlight><bold>330</bold></highlight> showing system operation of the full-duplex unit <highlight><bold>270</bold></highlight> while in state <highlight><bold>0</bold></highlight>. If packets are available for transmission to the half-duplex unit <highlight><bold>272</bold></highlight>, the packets are formed and delivered to the MAC layer protocol for transmission to the half-duplex unit <highlight><bold>272</bold></highlight> (step <highlight><bold>332</bold></highlight>-<highlight><bold>334</bold></highlight>). The state machine <highlight><bold>320</bold></highlight> then transitions to state <highlight><bold>1</bold></highlight>. </paragraph>
<paragraph id="P-0070" lvl="0"><number>&lsqb;0070&rsqb;</number> While in state <highlight><bold>0</bold></highlight>, if a packet is received from the half-duplex unit <highlight><bold>272</bold></highlight> with the H-bit set to one (step <highlight><bold>336</bold></highlight>), the full-duplex unit <highlight><bold>270</bold></highlight> starts timeout timer T<highlight><bold>2</bold></highlight> <highlight><bold>282</bold></highlight> for a predetermined timeout period H_T<highlight><bold>2</bold></highlight> (step <highlight><bold>338</bold></highlight>). The period H_T<highlight><bold>2</bold></highlight> defines the maximum amount of time that the full-duplex unit <highlight><bold>270</bold></highlight> should wait to receive further packets from the half-duplex unit <highlight><bold>272</bold></highlight> before declaring a timeout. After starting the timeout timer T<highlight><bold>2</bold></highlight>, a state machine transitions from state <highlight><bold>0</bold></highlight> to state <highlight><bold>2</bold></highlight>. </paragraph>
<paragraph id="P-0071" lvl="0"><number>&lsqb;0071&rsqb;</number> While in state <highlight><bold>0</bold></highlight>, if an uplink packet is received from the half-duplex unit <highlight><bold>272</bold></highlight> with the H-bit&equals;0 (step <highlight><bold>340</bold></highlight>), the state machine <highlight><bold>320</bold></highlight> remains in state <highlight><bold>0</bold></highlight>. </paragraph>
<paragraph id="P-0072" lvl="0"><number>&lsqb;0072&rsqb;</number> In the preferred embodiment, details of the operation of the half-duplex unit <highlight><bold>272</bold></highlight> in state <highlight><bold>0</bold></highlight> are similar to that of the full-duplex unit <highlight><bold>270</bold></highlight>. </paragraph>
<paragraph id="P-0073" lvl="0"><number>&lsqb;0073&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 15</cross-reference> is a system design chart illustrating operation of the full-duplex unit <highlight><bold>270</bold></highlight> while the state machine <highlight><bold>320</bold></highlight> is in state <highlight><bold>1</bold></highlight>. In state <highlight><bold>1</bold></highlight>, the full-duplex unit <highlight><bold>270</bold></highlight> assumes that the half-duplex unit <highlight><bold>272</bold></highlight> will shortly have permission to transmit packets over the channel. While in state <highlight><bold>1</bold></highlight>, if the full-duplex unit <highlight><bold>270</bold></highlight> sends a packet to the half-duplex unit <highlight><bold>272</bold></highlight> with the H-bit&equals;0 (step <highlight><bold>352</bold></highlight>), the timeout timer T<highlight><bold>1</bold></highlight> <highlight><bold>280</bold></highlight> is started, defining a timeout period H_T<highlight><bold>1</bold></highlight>. The timeout period H_T<highlight><bold>1</bold></highlight> defines the maximum amount of time that the full-duplex unit <highlight><bold>270</bold></highlight> will wait to receive an ACK from the half-duplex unit <highlight><bold>272</bold></highlight> in response to the transmitted packet. After starting the timer T<highlight><bold>1</bold></highlight>, the state machine <highlight><bold>320</bold></highlight> transitions to state <highlight><bold>2</bold></highlight>. </paragraph>
<paragraph id="P-0074" lvl="0"><number>&lsqb;0074&rsqb;</number> If an uplink packet is received from the half-duplex unit <highlight><bold>272</bold></highlight> with the H-bit cleared (step <highlight><bold>356</bold></highlight>), the full-duplex unit <highlight><bold>270</bold></highlight> stops the timeout timer T<highlight><bold>2</bold></highlight> <highlight><bold>282</bold></highlight> (step <highlight><bold>358</bold></highlight>). After halting the timeout timer T<highlight><bold>2</bold></highlight>, the state machine <highlight><bold>320</bold></highlight> remains in state <highlight><bold>1</bold></highlight>. </paragraph>
<paragraph id="P-0075" lvl="0"><number>&lsqb;0075&rsqb;</number> If an uplink packet is received from the half-duplex unit <highlight><bold>272</bold></highlight> with the H-bit set (step <highlight><bold>360</bold></highlight>), the timeout timer T<highlight><bold>2</bold></highlight> <highlight><bold>282</bold></highlight> is stopped (step <highlight><bold>362</bold></highlight>) and then restarted (step <highlight><bold>364</bold></highlight>) to define a new timeout period H_T<highlight><bold>2</bold></highlight>. In this event, the state machine <highlight><bold>320</bold></highlight> remains in state <highlight><bold>1</bold></highlight>. </paragraph>
<paragraph id="P-0076" lvl="0"><number>&lsqb;0076&rsqb;</number> If while in state <highlight><bold>1</bold></highlight> a timeout occurs with timer T<highlight><bold>2</bold></highlight> <highlight><bold>282</bold></highlight> (step <highlight><bold>366</bold></highlight>), no action is taken and the state machine <highlight><bold>320</bold></highlight> remains in state <highlight><bold>1</bold></highlight>. If while in state <highlight><bold>1</bold></highlight> a downlink packet becomes available at the full-duplex unit <highlight><bold>270</bold></highlight> for transmission to the half-duplex unit <highlight><bold>272</bold></highlight>, it is queued in the transmit queue <highlight><bold>276</bold></highlight> and the Packet(s) Available signal is asserted by the LLC layer and saved for future use in state <highlight><bold>0</bold></highlight>. </paragraph>
<paragraph id="P-0077" lvl="0"><number>&lsqb;0077&rsqb;</number> In the preferred embodiment, details of the operation of the half-duplex unit <highlight><bold>272</bold></highlight> in state <highlight><bold>1</bold></highlight> are similar to that of the full-duplex unit <highlight><bold>270</bold></highlight>. </paragraph>
<paragraph id="P-0078" lvl="0"><number>&lsqb;0078&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 16</cross-reference> is a system design chart <highlight><bold>380</bold></highlight> illustrating operation of the full-duplex unit <highlight><bold>270</bold></highlight> while the state machine <highlight><bold>320</bold></highlight> is in state <highlight><bold>2</bold></highlight>. In state <highlight><bold>2</bold></highlight>, the full-duplex unit <highlight><bold>270</bold></highlight> assumes that the half-duplex unit <highlight><bold>272</bold></highlight> is allowed to transmit over the channel. In state <highlight><bold>2</bold></highlight>, if the timeout period H_T<highlight><bold>1</bold></highlight> expires (step <highlight><bold>382</bold></highlight>), the timeout timer T<highlight><bold>2</bold></highlight> <highlight><bold>282</bold></highlight> is stopped (step <highlight><bold>384</bold></highlight>). The state machine <highlight><bold>320</bold></highlight> then transitions to state <highlight><bold>0</bold></highlight>. </paragraph>
<paragraph id="P-0079" lvl="0"><number>&lsqb;0079&rsqb;</number> While in state <highlight><bold>2</bold></highlight>, if the timeout period H_T<highlight><bold>2</bold></highlight> expires (step <highlight><bold>386</bold></highlight>), the timeout timer T<highlight><bold>1</bold></highlight> <highlight><bold>280</bold></highlight> is stopped (step <highlight><bold>388</bold></highlight>), and the state machine <highlight><bold>320</bold></highlight> transitions to state <highlight><bold>0</bold></highlight>. </paragraph>
<paragraph id="P-0080" lvl="0"><number>&lsqb;0080&rsqb;</number> If an uplink packet is received with the H-bit cleared (step <highlight><bold>390</bold></highlight>), the full-duplex unit <highlight><bold>270</bold></highlight> stops timeout timers <highlight><bold>280</bold></highlight>, <highlight><bold>282</bold></highlight> (step <highlight><bold>392</bold></highlight>), and the state machine <highlight><bold>320</bold></highlight> transitions to state <highlight><bold>0</bold></highlight>. </paragraph>
<paragraph id="P-0081" lvl="0"><number>&lsqb;0081&rsqb;</number> If an uplink packet is received with the H-bit set (step <highlight><bold>394</bold></highlight>), the timeout timers <highlight><bold>280</bold></highlight>, <highlight><bold>282</bold></highlight> are stopped (step <highlight><bold>396</bold></highlight>), and the timeout timer T<highlight><bold>2</bold></highlight> is restarted (step <highlight><bold>398</bold></highlight>) to define a new timeout period H_T<highlight><bold>2</bold></highlight>. The state machine <highlight><bold>320</bold></highlight> remains in state <highlight><bold>2</bold></highlight>. </paragraph>
<paragraph id="P-0082" lvl="0"><number>&lsqb;0082&rsqb;</number> If while in state <highlight><bold>2</bold></highlight> a downlink packet becomes available at the full-duplex unit <highlight><bold>270</bold></highlight> for transmission to the half-duplex unit <highlight><bold>272</bold></highlight>, it is queued in the transmit queue <highlight><bold>276</bold></highlight> and the Packet(s) Available signal is asserted by the LLC layer and saved for future use in state <highlight><bold>0</bold></highlight>. </paragraph>
<paragraph id="P-0083" lvl="0"><number>&lsqb;0083&rsqb;</number> In the preferred embodiment, details of the operation of the half-duplex unit <highlight><bold>272</bold></highlight> in state <highlight><bold>2</bold></highlight> are similar to that of the full-duplex unit <highlight><bold>270</bold></highlight>. </paragraph>
<paragraph id="P-0084" lvl="0"><number>&lsqb;0084&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 17</cross-reference> is a Message Sequence Chart <highlight><bold>410</bold></highlight> illustrating steady state operation of the system <highlight><bold>271</bold></highlight>, which includes the state machine <highlight><bold>320</bold></highlight>. The vertical line on the left represents the full-duplex unit <highlight><bold>270</bold></highlight> (e.g., a base station BS). The vertical line on the right represents the half-duplex unit <highlight><bold>272</bold></highlight> (e.g., a subscriber unit SU). The Message Sequence Chart <highlight><bold>410</bold></highlight> illustrates an example of error free, mainly downlink traffic on an unloaded channel between the full-duplex and half-duplex units <highlight><bold>270</bold></highlight>, <highlight><bold>272</bold></highlight>. The scenario begins with the full-duplex unit <highlight><bold>270</bold></highlight> transmitting a stream of packets to the half-duplex unit <highlight><bold>272</bold></highlight>. The first three headers include H-bits that are set indicating that additional packets are following, and that the half-duplex unit <highlight><bold>272</bold></highlight> should refrain from any transmissions during this period. </paragraph>
<paragraph id="P-0085" lvl="0"><number>&lsqb;0085&rsqb;</number> The fourth header packet transmitted by the full-duplex unit <highlight><bold>270</bold></highlight> includes a header bit that is cleared, indicating that there are no further packets in the stream. </paragraph>
<paragraph id="P-0086" lvl="0"><number>&lsqb;0086&rsqb;</number> The half-duplex unit <highlight><bold>272</bold></highlight> responds to the cleared H-bit with an acknowledgment (ACK) having the header bit cleared, indicating that the half-duplex unit <highlight><bold>272</bold></highlight> is not transmitting packets immediately following the acknowledgement. </paragraph>
<paragraph id="P-0087" lvl="0"><number>&lsqb;0087&rsqb;</number> The full-duplex unit <highlight><bold>270</bold></highlight> then resumes transmission of a second stream of downlink packets, having two header packets with the H-bit set, followed by a third header having the H-bit cleared. After receiving the downlink packets corresponding to the cleared H-bit, the half-duplex unit <highlight><bold>272</bold></highlight> transmits a reservation request followed by an acknowledgement having the H-bit cleared. </paragraph>
<paragraph id="P-0088" lvl="0"><number>&lsqb;0088&rsqb;</number> The full-duplex unit <highlight><bold>270</bold></highlight> then resumes transmission of downlink traffic. </paragraph>
<paragraph id="P-0089" lvl="0"><number>&lsqb;0089&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 18</cross-reference> is a Message Sequence Chart <highlight><bold>420</bold></highlight> illustrating bi-directional traffic between the full-duplex and half-duplex units <highlight><bold>270</bold></highlight>-<highlight><bold>272</bold></highlight>, according to the state machine <highlight><bold>320</bold></highlight>. In this scenario, the full-duplex unit <highlight><bold>270</bold></highlight> first transmits an acknowledgment having the H-bit set, indicating that additional downlink data packets will immediately follow the acknowledgment. The full-duplex unit <highlight><bold>270</bold></highlight> then transmits a packet stream having three header packets with their H-bit set. The fourth header packet is transmitted with the H-bit cleared, indicating that the packet stream has ended. Upon receiving a downlink packet with the H-bit clear, the half-duplex unit <highlight><bold>272</bold></highlight> transmits an acknowledgment having the H-bit set. The acknowledgment with the H-bit set indicates that further uplink packets are to be transmitted by the half-duplex unit <highlight><bold>272</bold></highlight> immediately following the acknowledgment. This causes the full-duplex unit <highlight><bold>270</bold></highlight> to hold off transmission of downlink packets until the half-duplex unit has completed. The half-duplex unit <highlight><bold>272</bold></highlight> transmits a packet header having the H-bit set, followed by a packet header having the H-bit cleared, indicating the end of the packet stream. Upon receiving the packet header having the H-bit cleared, the full-duplex unit <highlight><bold>270</bold></highlight> generates an acknowledge having the H-bit set followed by a packet header having the H-bit set and then a packet header having the H-bit cleared. </paragraph>
<paragraph id="P-0090" lvl="0"><number>&lsqb;0090&rsqb;</number> The half-duplex unit <highlight><bold>272</bold></highlight> then transmits an acknowledge and packet header, both having their H-bits set. </paragraph>
<paragraph id="P-0091" lvl="0"><number>&lsqb;0091&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 19</cross-reference> is a Message Sequence Chart <highlight><bold>430</bold></highlight> illustrating an error recovery operation of the system <highlight><bold>271</bold></highlight>, which includes the state machine <highlight><bold>320</bold></highlight>. In this scenario, downlink traffic is first transmitted by the full-duplex unit <highlight><bold>270</bold></highlight> to the half-duplex unit <highlight><bold>272</bold></highlight>. The downlink packet header in the first data stream having the H-bit cleared is lost, and not received by the half-duplex unit <highlight><bold>272</bold></highlight>. In the half-duplex unit <highlight><bold>272</bold></highlight>, a timeout timer has started, defining the timeout period H_T<highlight><bold>2</bold></highlight>, upon receiving the packet immediately prior to the lost packet. </paragraph>
<paragraph id="P-0092" lvl="0"><number>&lsqb;0092&rsqb;</number> Upon expiration of the timeout period H_T<highlight><bold>2</bold></highlight>, the half-duplex unit <highlight><bold>272</bold></highlight> assumes control of the channel by transmitting an acknowledgment followed by a stream of uplink packets. </paragraph>
<paragraph id="P-0093" lvl="0"><number>&lsqb;0093&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 20</cross-reference> is a Message Sequence Chart <highlight><bold>450</bold></highlight> illustrating operation of the system <highlight><bold>270</bold></highlight> during a start-up collision, where the system <highlight><bold>271</bold></highlight> includes the state machine <highlight><bold>320</bold></highlight>. In this scenario, the half-duplex unit <highlight><bold>272</bold></highlight> transmits a single packet having the header bit cleared. Concurrently, the full-duplex unit <highlight><bold>270</bold></highlight> transmits a data packet having its header bit cleared. The overlapping arrows between the full-duplex and half-duplex units indicate the collision. </paragraph>
<paragraph id="P-0094" lvl="0"><number>&lsqb;0094&rsqb;</number> In response to this situation, the full-duplex unit <highlight><bold>270</bold></highlight> detects the collision, and generates an acknowledgement having the H-bit cleared after receiving the uplink packet. The half-duplex unit <highlight><bold>272</bold></highlight> then generates a packet having the header bit set, and steady state operation is resumed. In this scenario, the full-duplex unit <highlight><bold>270</bold></highlight> does not attempt to retransmit the lost data packet. </paragraph>
<paragraph id="P-0095" lvl="0"><number>&lsqb;0095&rsqb;</number> In an alternate embodiment, the H-bit is only explicitly included in LLC layer packet formats which do not include a poll bit as is standard in LAP-D I-Frame formats. In these cases, the untransmitted H-bit is the logical inverse of the transmitted poll bit. </paragraph>
<paragraph id="P-0096" lvl="0"><number>&lsqb;0096&rsqb;</number> An alternate embodiment is to allow an acknowledgement with the H-bit cleared to indicate that either LLC peer is allowed to initiate a new transmission. An acknowledgement with the H-bit cleared does not start timer H_T<highlight><bold>1</bold></highlight>. An acknowledgement with the H-bit cleared does not delay transmission of any new I-Frames from either peer. </paragraph>
<paragraph id="P-0097" lvl="0"><number>&lsqb;0097&rsqb;</number> While specific embodiments of the present invention have been shown and described, it will apparent to those skilled in the art that the disclosed invention may be modified in numerous ways and may assume many embodiments other than those specifically set out and described above. Accordingly, the scope of the invention is indicated in the appended claims, and all changes that come within the meaning and range of equivalents are intended to be embraced therein. </paragraph>
</section>
</detailed-description>
</subdoc-description>
<subdoc-claims>
<claim id="CLM-00001">
<claim-text><highlight><bold>1</bold></highlight>. In a radio communication system, a method for preventing frame collisions on a channel linking a half-duplex unit and a full-duplex unit, the method comprising: 
<claim-text>transmitting a first sequence of frames between the half-duplex unit and the full-duplex unit, each of the frames including a flag indicating whether the frame is the last frame of the sequence; </claim-text>
<claim-text>receiving at a receiving unit selected from the half-duplex and full-duplex units one of the frames having the flag set to indicate the last frame; </claim-text>
<claim-text>outputting from the receiving unit an acknowledgement in response to the set flag, the acknowledgement having a hold flag indicating whether the receiving unit is to subsequently transmit a second sequence of frames; and </claim-text>
<claim-text>holding off further transmission of frames at a transmission unit selected from the half-duplex and full-duplex units in response to receiving the acknowledgement having the hold flag set to indicate the subsequent transmission of the second sequence of frames. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00002">
<claim-text><highlight><bold>2</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, further comprising: 
<claim-text>setting a timer upon the receipt of the acknowledgement at the transmission unit. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00003">
<claim-text><highlight><bold>3</bold></highlight>. A radio communication system, comprising: 
<claim-text>a half-duplex unit; and </claim-text>
<claim-text>a full-duplex unit in communication with the half-duplex unit; </claim-text>
<claim-text>wherein sequences of frames are transferred between the half-duplex unit and the full-duplex unit, each of the frames including a flag indicating whether the frame is the last frame of one of the sequences; </claim-text>
<claim-text>wherein upon receiving one of the frames having the flag set to indicate the last frame, a receiving unit selected from the half-duplex and full-duplex units generates an acknowledge frame having a hold flag indicating whether the receiving unit is to subsequently transmit a sequence of frames. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00004">
<claim-text><highlight><bold>4</bold></highlight>. The radio communication system of <dependent-claim-reference depends_on="CLM-00003">claim 3</dependent-claim-reference>, wherein the half-duplex unit is a mobile subscriber unit. </claim-text>
</claim>
<claim id="CLM-00005">
<claim-text><highlight><bold>5</bold></highlight>. The radio communication system of <dependent-claim-reference depends_on="CLM-00003">claim 3</dependent-claim-reference>, wherein the full-duplex unit is a base station. </claim-text>
</claim>
<claim id="CLM-00006">
<claim-text><highlight><bold>6</bold></highlight>. The radio communication system of <dependent-claim-reference depends_on="CLM-00003">claim 3</dependent-claim-reference>, further comprising: 
<claim-text>a transmitting unit, selected from the half-duplex and full-duplex units, configured to hold off transmission of at least one of the sequence of frames in response to receiving the acknowledge frame having the hold flag set to indicate the subsequent transmission of a sequence of frames. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00007">
<claim-text><highlight><bold>7</bold></highlight>. The radio communication system of <dependent-claim-reference depends_on="CLM-00006">claim 6</dependent-claim-reference>, wherein the transmitting unit includes a timer that is settable upon the receipt of the hold flag. </claim-text>
</claim>
<claim id="CLM-00008">
<claim-text><highlight><bold>8</bold></highlight>. In a communication system, a method of transferring packets over a communication channel linking a half-duplex unit and a full-duplex unit, the method comprising: 
<claim-text>at the half-duplex unit, setting a flag included in a packet to indicate that one or more packets are to be transferred following the packet; </claim-text>
<claim-text>transferring the packet from the from half-duplex unit to the full-duplex unit; </claim-text>
<claim-text>storing in a hold address table at the full-duplex unit an identifier corresponding to the half-duplex unit in response to receiving the packet; and </claim-text>
<claim-text>refraining from transmitting packets from the full-duplex unit to the half-duplex unit while the identifier is stored in the hold address table. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00009">
<claim-text><highlight><bold>9</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00008">claim 8</dependent-claim-reference>, further comprising: 
<claim-text>queuing one or more packets at the half-duplex unit; and </claim-text>
<claim-text>setting the flag based on whether there is a queued packet. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00010">
<claim-text><highlight><bold>10</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00008">claim 8</dependent-claim-reference>, further comprising: 
<claim-text>starting a timeout timer included in the full-duplex unit in response to receiving the packet. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00011">
<claim-text><highlight><bold>11</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00011">claim 10</dependent-claim-reference>, further comprising: 
<claim-text>removing the identifier from the hold address table in response to expiration of a timeout period indicated by the timeout timer. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00012">
<claim-text><highlight><bold>12</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00008">claim 8</dependent-claim-reference>, further comprising: 
<claim-text>removing the identifier from the hold address table in response to the full-duplex unit receiving a packet having the flag not set. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00013">
<claim-text><highlight><bold>13</bold></highlight>. A communication system, comprising: 
<claim-text>a half-duplex unit configured to set a flag included in a packet to indicate that one or more packets are to be transferred following the packet, the half-duplex unit transferring the packet over a communication channel; and </claim-text>
<claim-text>a full-duplex unit for receiving the packet on the communication channel, the full-duplex unit storing in a hold address table an identifier corresponding to the half-duplex unit in response to receiving the packet, the full-duplex unit not transmitting packets to the half-duplex unit while the identifier is present in the hold address table. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00014">
<claim-text><highlight><bold>14</bold></highlight>. The communication system of <dependent-claim-reference depends_on="CLM-00011">claim 13</dependent-claim-reference>, wherein the half-duplex unit includes: 
<claim-text>a queue for storing one or more packets; and </claim-text>
<claim-text>means for setting the flag based on whether there is a packet in the queue. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00015">
<claim-text><highlight><bold>15</bold></highlight>. The communication system of <dependent-claim-reference depends_on="CLM-00011">claim 13</dependent-claim-reference>, wherein the full-duplex unit includes a timeout timer responsive to received packets. </claim-text>
</claim>
<claim id="CLM-00016">
<claim-text><highlight><bold>16</bold></highlight>. The communication system of <dependent-claim-reference depends_on="CLM-00011">claim 15</dependent-claim-reference>, wherein the full-duplex unit includes: 
<claim-text>means for removing the identifier from the hold address table in response to expiration of a timeout period indicated by the timeout timer. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00017">
<claim-text><highlight><bold>17</bold></highlight>. The communication system of <dependent-claim-reference depends_on="CLM-00011">claim 13</dependent-claim-reference>, wherein the full-duplex unit includes means for removing the identifier from the hold address table in response to the full-duplex unit receiving a packet having the flag not set. </claim-text>
</claim>
<claim id="CLM-00018">
<claim-text><highlight><bold>18</bold></highlight>. The communication system of <dependent-claim-reference depends_on="CLM-00011">claim 13</dependent-claim-reference>, wherein the communication channel is a radio frequency (RF) channel. </claim-text>
</claim>
<claim id="CLM-00019">
<claim-text><highlight><bold>19</bold></highlight>. The communication system of <dependent-claim-reference depends_on="CLM-00011">claim 13</dependent-claim-reference>, wherein the full-duplex unit includes means for detecting a collision on the communication channel. </claim-text>
</claim>
<claim id="CLM-00020">
<claim-text><highlight><bold>20</bold></highlight>. In a radio communication system, a method for preventing frame collisions on a channel linking a half-duplex unit and a full-duplex unit, the method comprising: 
<claim-text>transmitting a first sequence of frames between the half-duplex unit and the full-duplex unit, each of the frames including a flag indicating whether the frame is the last frame of the sequence; </claim-text>
<claim-text>receiving at a receiving unit selected from the half-duplex and full-duplex units the first sequence of frames; and </claim-text>
<claim-text>holding off transmission of a second sequence of frames from the receiving unit until receiving one of the frames in the first sequence having the flag set.</claim-text>
</claim-text>
</claim>
</subdoc-claims>
<subdoc-drawings id="DRAWINGS">
<heading lvl="0" align="CENTER">Drawings</heading>
<representative-figure>1</representative-figure>
<figure id="figure-D00000">
<image id="EMI-D00000" file="US20030002449A1-20030102-D00000.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00001">
<image id="EMI-D00001" file="US20030002449A1-20030102-D00001.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00002">
<image id="EMI-D00002" file="US20030002449A1-20030102-D00002.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00003">
<image id="EMI-D00003" file="US20030002449A1-20030102-D00003.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00004">
<image id="EMI-D00004" file="US20030002449A1-20030102-D00004.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00005">
<image id="EMI-D00005" file="US20030002449A1-20030102-D00005.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00006">
<image id="EMI-D00006" file="US20030002449A1-20030102-D00006.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00007">
<image id="EMI-D00007" file="US20030002449A1-20030102-D00007.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00008">
<image id="EMI-D00008" file="US20030002449A1-20030102-D00008.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00009">
<image id="EMI-D00009" file="US20030002449A1-20030102-D00009.TIF" imf="TIFF" ti="DR"/>
</figure>
</subdoc-drawings>
</patent-application-publication>
