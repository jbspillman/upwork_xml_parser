<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE patent-application-publication SYSTEM "pap-v16-2002-01-01.dtd" [
<!ENTITY US20030002437A1-20030102-D00000.TIF SYSTEM "US20030002437A1-20030102-D00000.TIF" NDATA TIF>
<!ENTITY US20030002437A1-20030102-D00001.TIF SYSTEM "US20030002437A1-20030102-D00001.TIF" NDATA TIF>
<!ENTITY US20030002437A1-20030102-D00002.TIF SYSTEM "US20030002437A1-20030102-D00002.TIF" NDATA TIF>
<!ENTITY US20030002437A1-20030102-D00003.TIF SYSTEM "US20030002437A1-20030102-D00003.TIF" NDATA TIF>
<!ENTITY US20030002437A1-20030102-D00004.TIF SYSTEM "US20030002437A1-20030102-D00004.TIF" NDATA TIF>
<!ENTITY US20030002437A1-20030102-D00005.TIF SYSTEM "US20030002437A1-20030102-D00005.TIF" NDATA TIF>
<!ENTITY US20030002437A1-20030102-D00006.TIF SYSTEM "US20030002437A1-20030102-D00006.TIF" NDATA TIF>
<!ENTITY US20030002437A1-20030102-D00007.TIF SYSTEM "US20030002437A1-20030102-D00007.TIF" NDATA TIF>
<!ENTITY US20030002437A1-20030102-D00008.TIF SYSTEM "US20030002437A1-20030102-D00008.TIF" NDATA TIF>
<!ENTITY US20030002437A1-20030102-D00009.TIF SYSTEM "US20030002437A1-20030102-D00009.TIF" NDATA TIF>
<!ENTITY US20030002437A1-20030102-D00010.TIF SYSTEM "US20030002437A1-20030102-D00010.TIF" NDATA TIF>
<!ENTITY US20030002437A1-20030102-D00011.TIF SYSTEM "US20030002437A1-20030102-D00011.TIF" NDATA TIF>
<!ENTITY US20030002437A1-20030102-D00012.TIF SYSTEM "US20030002437A1-20030102-D00012.TIF" NDATA TIF>
<!ENTITY US20030002437A1-20030102-D00013.TIF SYSTEM "US20030002437A1-20030102-D00013.TIF" NDATA TIF>
<!ENTITY US20030002437A1-20030102-D00014.TIF SYSTEM "US20030002437A1-20030102-D00014.TIF" NDATA TIF>
<!ENTITY US20030002437A1-20030102-D00015.TIF SYSTEM "US20030002437A1-20030102-D00015.TIF" NDATA TIF>
<!ENTITY US20030002437A1-20030102-D00016.TIF SYSTEM "US20030002437A1-20030102-D00016.TIF" NDATA TIF>
<!ENTITY US20030002437A1-20030102-D00017.TIF SYSTEM "US20030002437A1-20030102-D00017.TIF" NDATA TIF>
<!ENTITY US20030002437A1-20030102-D00018.TIF SYSTEM "US20030002437A1-20030102-D00018.TIF" NDATA TIF>
<!ENTITY US20030002437A1-20030102-D00019.TIF SYSTEM "US20030002437A1-20030102-D00019.TIF" NDATA TIF>
]>
<patent-application-publication>
<subdoc-bibliographic-information>
<document-id>
<doc-number>20030002437</doc-number>
<kind-code>A1</kind-code>
<document-date>20030102</document-date>
</document-id>
<publication-filing-type>new</publication-filing-type>
<domestic-filing-data>
<application-number>
<doc-number>09897263</doc-number>
</application-number>
<application-number-series-code>09</application-number-series-code>
<filing-date>20010702</filing-date>
</domestic-filing-data>
<technical-information>
<classification-ipc>
<classification-ipc-primary>
<ipc>H04J001/16</ipc>
</classification-ipc-primary>
<classification-ipc-edition>07</classification-ipc-edition>
</classification-ipc>
<classification-us>
<classification-us-primary>
<uspc>
<class>370</class>
<subclass>228000</subclass>
</uspc>
</classification-us-primary>
<classification-us-secondary>
<uspc>
<class>370</class>
<subclass>254000</subclass>
</uspc>
</classification-us-secondary>
</classification-us>
<title-of-invention>Row upgrade for a scalable switching network</title-of-invention>
</technical-information>
<inventors>
<first-named-inventor>
<name>
<given-name>Haw-Minn</given-name>
<family-name>Lu</family-name>
</name>
<residence>
<residence-us>
<city>San Diego</city>
<state>CA</state>
<country-code>US</country-code>
</residence-us>
</residence>
<authority-applicant>INV</authority-applicant>
</first-named-inventor>
</inventors>
<correspondence-address>
<name-1>Haw-Minn Lu</name-1>
<name-2></name-2>
<address>
<address-1>10733 Calston Way</address-1>
<city>San Diego</city>
<state>CA</state>
<postalcode>92126</postalcode>
<country>
<country-code>US</country-code>
</country>
</address>
</correspondence-address>
</subdoc-bibliographic-information>
<subdoc-abstract>
<paragraph id="A-0001" lvl="0">A redundant multi-stage network can be upgraded in a non-stop manner via a bypass and a rewiring phase. The bypass phase involves selecting two adjacent rows as close to the middle of the network as possible thus maximizing the path redundancy and maximizing the number of paths around an upgrade induced fault; creating a bypass and original section by stretching the connections between these two rows, breaking a connection in the bypass section; inserting new nodes into the bypass section by connecting the top and bottom ports of each node in an alternating manner to minimize the nodes input and output traffic imbalance; and repeating for all the connections in the bypass section. The rewiring phase involves creating a hole by disconnecting one end of a bypass connections; locating the connection that should be connected to the hole, filling the hole by connecting the other end of this connection to the hole thus minimizing the number of open holes and minimizing the throughput disruption; repeating this for any hole generated in the process; and repeating the rewiring phase for all the remaining connections in the bypass section. </paragraph>
</subdoc-abstract>
<subdoc-description>
<summary-of-invention>
<section>
<heading lvl="1">BACKGROUND </heading>
<paragraph id="P-0001" lvl="0"><number>&lsqb;0001&rsqb;</number> 1. Field of Invention </paragraph>
<paragraph id="P-0002" lvl="0"><number>&lsqb;0002&rsqb;</number> This invention relates to redundant multi-stage switching networks, specifically to the non-stop addition of a new row to such a network. </paragraph>
<paragraph id="P-0003" lvl="0"><number>&lsqb;0003&rsqb;</number> 2. Discussion of Prior Art </paragraph>
<paragraph id="P-0004" lvl="0"><number>&lsqb;0004&rsqb;</number> When a multi-stage switching network such as a Banyan or Butterfly network is expanded a new row must be added. Adding a new row requires that half of the external connections have to be disconnected in the process. This leads to an interruption in service. </paragraph>
<paragraph id="P-0005" lvl="0"><number>&lsqb;0005&rsqb;</number> A Butterfly network, <highlight><bold>10</bold></highlight>, is shown in <cross-reference target="DRAWINGS">FIG. 1</cross-reference> with top ports, <highlight><bold>11</bold></highlight>, connected to external connections, <highlight><bold>12</bold></highlight>, and bottom ports, <highlight><bold>13</bold></highlight>, connected to external connections, <highlight><bold>14</bold></highlight>. A duplicate of this network, <highlight><bold>15</bold></highlight>, with top ports, <highlight><bold>16</bold></highlight>, and bottom ports, <highlight><bold>17</bold></highlight>. A new row, <highlight><bold>18</bold></highlight>, with top ports, <highlight><bold>19</bold></highlight>, and bottom ports, <highlight><bold>20</bold></highlight>, are also shown. </paragraph>
<paragraph id="P-0006" lvl="0"><number>&lsqb;0006&rsqb;</number> In order to double number of external connections of the Banyan network, <highlight><bold>10</bold></highlight>, the connections between the top ports, <highlight><bold>12</bold></highlight>, and external connections, <highlight><bold>14</bold></highlight>, have to be broken and connected to the left half of new row bottom ports, <highlight><bold>20</bold></highlight>, and the external connections, <highlight><bold>14</bold></highlight>, connected to the left half of new row top ports, <highlight><bold>19</bold></highlight>. To complete the upgrade, the duplicate network top ports, <highlight><bold>16</bold></highlight>, are connected to the right half of new row bottom ports <highlight><bold>20</bold></highlight>. At this point, duplicate network bottom ports, <highlight><bold>20</bold></highlight>, and right half of new row top ports <highlight><bold>19</bold></highlight> would be available for new external connections. </paragraph>
<paragraph id="P-0007" lvl="0"><number>&lsqb;0007&rsqb;</number> The problem is that the connections between the original network top ports, <highlight><bold>11</bold></highlight>, and external connections, <highlight><bold>14</bold></highlight>, have to be disconnected in the process. This leads to an interruption in service. </paragraph>
<paragraph id="P-0008" lvl="0"><number>&lsqb;0008&rsqb;</number> Currently, special &ldquo;hot slide&rdquo; multiplexers are designed into switching centers to allow a new switching network to be installed in parallel and then switched in between clock cycles. Unfortunately, this physical electrical switch-over is only part of the problem. The new switch has to have exactly the same &ldquo;control state&rdquo; information as the old switch. This requires a considerable amount of hardware and software to accomplish correctly. </paragraph>
</section>
<section>
<heading lvl="1">OBJECTS AND ADVANTAGES </heading>
<paragraph id="P-0009" lvl="0"><number>&lsqb;0009&rsqb;</number> Accordingly, the several objects and advantages of my invention are: </paragraph>
<paragraph id="P-0010" lvl="1"><number>&lsqb;0010&rsqb;</number> (a) to provide a procedure by which a redundant multi-stage switching network can be upgraded without having to break an external connection; and </paragraph>
<paragraph id="P-0011" lvl="1"><number>&lsqb;0011&rsqb;</number> (b) to provide a procedure by which a redundant multi-stage switching network can be upgraded with a minimum loss in throughput bandwidth. </paragraph>
<paragraph id="P-0012" lvl="0"><number>&lsqb;0012&rsqb;</number> Further objects and advantages of our invention will become apparent from a consideration of the drawings and ensuing description. </paragraph>
</section>
</summary-of-invention>
<brief-description-of-drawings>
<section>
<heading lvl="1">DESCRIPTION OF DRAWINGS </heading>
<paragraph id="P-0013" lvl="0"><number>&lsqb;0013&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1</cross-reference> shows a 16 port Butterfly multi-stage switching network being upgraded. (prior art) </paragraph>
<paragraph id="P-0014" lvl="0"><number>&lsqb;0014&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 2</cross-reference> shows a 24 port redundant blocking compensated cyclic group (RBCCG) multi-stage switching network (prior art) </paragraph>
<paragraph id="P-0015" lvl="0"><number>&lsqb;0015&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3A</cross-reference> shows a stretched version of a 24 port blocking compensated cyclic group multi-stage switching network and a row of four routers to be inserted. </paragraph>
<paragraph id="P-0016" lvl="0"><number>&lsqb;0016&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3B</cross-reference> shows the portion of a 24 port RBCCG multi-stage switching network into which router R(N,0) is to be inserted. </paragraph>
<paragraph id="P-0017" lvl="0"><number>&lsqb;0017&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3</cross-reference>C, <cross-reference target="DRAWINGS">FIG. 3</cross-reference>D, <cross-reference target="DRAWINGS">FIG. 3</cross-reference>E, and <cross-reference target="DRAWINGS">FIG. 3F</cross-reference> show router R(N,0) being inserted by moving the connection from bottom port 0 of R(1,0) to bottom port 0 of R(N,0); adding a connection between bottom port 0 of R(R(1,0) and top port 0 of R(N,0); moving the connection from bottom port 1 of R(1,0) to bottom port 1 of R(N,0) and adding a connection between bottom port 1 of R(1,0) to top port 1 of R(N,0); and moving the connection from the bottom port 2 of R(1,0) to bottom port 2 of R(N,0) and adding a connection between bottom port 2 of R(1,0) to top port 2 of R(N,0) respectively. </paragraph>
<paragraph id="P-0018" lvl="0"><number>&lsqb;0018&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3G</cross-reference> shows router R(N,0) inserted into a 24 port RBCCG multi-stage switching network. </paragraph>
<paragraph id="P-0019" lvl="0"><number>&lsqb;0019&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3</cross-reference>H, <cross-reference target="DRAWINGS">FIG. 3</cross-reference>I, and <cross-reference target="DRAWINGS">FIG. 3J</cross-reference> show router R(N,1) being inserted by moving the connection from bottom port 0 of R(1,1) to bottom port 0 of R(N,1) and adding a connection between bottom port 0 of R(1,1) to top port 0 of R(N,1); moving the connection from bottom port 1 of R(1,1) to bottom port 1 of R(N,1) and adding a connection between bottom port 1 of R(1,1) to top port 1 of R(N,1); and moving the connection from bottom port 2 of R(1,1) to bottom port 2 of R(N,1) and adding a connection between bottom port 2 of R(1,1) to top port 2 of R(N,1) respectively. </paragraph>
<paragraph id="P-0020" lvl="0"><number>&lsqb;0020&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3K</cross-reference> shows router R(N,1) inserted into a 24 port RBCCG multi-stage switching network. </paragraph>
<paragraph id="P-0021" lvl="0"><number>&lsqb;0021&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3</cross-reference>L, <cross-reference target="DRAWINGS">FIG. 3</cross-reference>M, and <cross-reference target="DRAWINGS">FIG. 3N</cross-reference> show router R(N,2) being inserted by moving the connection from bottom port 0 of R(1,2) to bottom port 0 of R(N,2) and adding a connection between bottom port 0 of R(1,2) to top port 0 of R(N,2); moving the connection from bottom port 1 of R(1,2) to bottom port 1 of R(N,2) and adding a connection between bottom port 1 of R(1,2) to top port 1 of R(N,2); and moving the connection from bottom port 2 of R(1,2) to bottom port 2 of R(N,2) and adding a connection between bottom port 2 of R(1,2) to top port 2 of R(N,2) respectively. </paragraph>
<paragraph id="P-0022" lvl="0"><number>&lsqb;0022&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3O</cross-reference> shows router R(N,2) inserted into a 24 port RBCCG multi-stage switching network. </paragraph>
<paragraph id="P-0023" lvl="0"><number>&lsqb;0023&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3</cross-reference>P, <cross-reference target="DRAWINGS">FIG. 3</cross-reference>Q, and <cross-reference target="DRAWINGS">FIG. 3R</cross-reference> show router R(N,3) being inserted by moving the connection from bottom port 0 of R(1,3) to bottom port 0 of R(N,3) and adding a connection between bottom port 0 of R(1,3) to top port 0 of R(N,3); moving the connection from bottom port 1 of R(1,3) to bottom port 1 of R(N,3) and adding a connection between bottom port 1 of R(1,3) to top port 1 of R(N,3); and moving the connection from bottom port 2 of R(1,3) to bottom port 2 of R(N,3) and adding a connection between bottom port 2 of R(1,3) to top port 2 of R(N,3) respectively. </paragraph>
<paragraph id="P-0024" lvl="0"><number>&lsqb;0024&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3S</cross-reference> shows router R(N,3) inserted into a stretched 24 port RBCCG multi-stage switching network. </paragraph>
<paragraph id="P-0025" lvl="0"><number>&lsqb;0025&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 4</cross-reference>A, <cross-reference target="DRAWINGS">FIG. 4</cross-reference>B, <cross-reference target="DRAWINGS">FIG. 4</cross-reference>C, <cross-reference target="DRAWINGS">FIG. 4</cross-reference>D, <cross-reference target="DRAWINGS">FIG. 4</cross-reference>E, <cross-reference target="DRAWINGS">FIG. 4</cross-reference>F, <cross-reference target="DRAWINGS">FIG. 4</cross-reference>G, <cross-reference target="DRAWINGS">FIG. 4</cross-reference>H, <cross-reference target="DRAWINGS">FIG. 4</cross-reference>I, <cross-reference target="DRAWINGS">FIG. 4</cross-reference>J, and <cross-reference target="DRAWINGS">FIG. 4K</cross-reference> show the connections between router rows R(1,*) and R(N,*) being rewired by disconnecting top port 1 of R(N,0); disconnecting top port 0 of R(N,1) and moving the connection from bottom port 1 of R(1,0) to top port 0 of R(N,1); disconnecting top port 0 of R(N,3) and moving the connection from bottom port 0 of R(R1,1) to top port 0 of R(N,3); disconnecting top port 2 of R(N,1) and moving the connection from bottom port 0 of R(1,3) to top port 2 of R(N,1); disconnecting top port 1 of R(N,1) and moving the connection from bottom port 2 of R(1,1) to top port 1 of R(N,1); connecting previously disconnected connection from bottom port 1 of R(1,1) to top port 1 of R(N,0); disconnecting top port 2 of R(N,0); disconnecting top port 0 of R(N,2) and moving the connection from bottom port 2 of R(1,0) to top port 0 of R(N,2); disconnecting top port 1 of R(N,2) and moving the connection from bottom port 0 of R(1,2) to top port 1 of R(N,2); disconnecting top port 1 of R(N,3) and moving the connection from bottom port 1 of R(1,2) to top port 1 of R(N,3); and disconnecting top port 2 of R(N,2) and moving the connection from bottom port 1 of R(1,3) to top port 2 of R(N,2) respectively. </paragraph>
<paragraph id="P-0026" lvl="0"><number>&lsqb;0026&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 4L</cross-reference> shows a rewired 5 row 24 port RBCCG multi-stage switching network after moving the connection from bottom port 2 of R(1,2) to top port 2 of R(N,0). </paragraph>
<paragraph id="P-0027" lvl="0"><number>&lsqb;0027&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 5</cross-reference> shows the algorithm for inserting a row of new routers into a stretched blocking compensated cyclic group multi-stage switching network </paragraph>
<paragraph id="P-0028" lvl="0"><number>&lsqb;0028&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 6</cross-reference> shows the algorithm for rewiring the stretched portion of the multi-stage network into a blocking compensated cyclic group multi-stage switching network. </paragraph>
<paragraph id="P-0029" lvl="0"><number>&lsqb;0029&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 7</cross-reference> show the flowchart for the insertion algorithm shown in <cross-reference target="DRAWINGS">FIG. 5</cross-reference>. </paragraph>
<paragraph id="P-0030" lvl="0"><number>&lsqb;0030&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 8</cross-reference> shows the flowchart for the rewiring algorithm shown in <cross-reference target="DRAWINGS">FIG. 6</cross-reference>. </paragraph>
</section>
</brief-description-of-drawings>
<detailed-description>
<section>
<heading lvl="1">SUMMARY </heading>
<paragraph id="P-0031" lvl="0"><number>&lsqb;0031&rsqb;</number> A redundant multi-stage switching network can be upgraded without breaking any external connections by inserting a new row of nodes inside the network rather than at the edges of the network. It is best to insert the new row nodes as close to the center of the network as possible since this is the region with the highest path redundancy and this maximizes opportunities for traffic to route around an upgrade induced fault. </paragraph>
<paragraph id="P-0032" lvl="0"><number>&lsqb;0032&rsqb;</number> The row insertion process can be broken into two steps. One is a bypass phase and the other is a rewiring phase. In the bypass phase, the connections between two rows of nodes is stretched to form a bypass and a original section. Each connection in the bypass section is then broken and connected to a new node. This process is repeated for all the bypass connections. It is important that only one bypass connection be broken at a time since this minimizes the imbalance in the new node&apos;s input and output traffic. </paragraph>
<paragraph id="P-0033" lvl="0"><number>&lsqb;0033&rsqb;</number> In the rewiring phase, the bypass connection is rewired into the desired topology. This is accomplished by creating a &ldquo;hole&rdquo; by disconnecting one of the bypass connections; locating the connection that should be connected to this &ldquo;hole,&rdquo; disconnecting the mis-connected end of this connection, filling the &ldquo;hole&rdquo; by connecting mis-connected end of this connection to the &ldquo;hole.&rdquo; Repeating this process for any &ldquo;hole&rdquo; generated in the process. Generating a new &ldquo;hole&rdquo; by disconnecting one of the remaining bypass connections. Repeating the process until all the bypass connections have been selected. It is important to fill a &ldquo;hole&rdquo; as soon as possible since it represents a reduction in network throughput. </paragraph>
</section>
<section>
<heading lvl="1">DESCRIPTION OF INVENTION </heading>
<paragraph id="P-0034" lvl="0"><number>&lsqb;0034&rsqb;</number> A redundant blocking compensated cyclic group (RBCCG) multi-stage network, <highlight><bold>30</bold></highlight>, is shown in <cross-reference target="DRAWINGS">FIG. 2</cross-reference> and discussed further in U.S. Pat. No. 5,841,775, &ldquo;Scalable Switching Networks&rdquo; by Alan Huang, Nov. 24, 1998. It consists of a rows, <highlight><bold>31</bold></highlight>, <highlight><bold>33</bold></highlight>, <highlight><bold>35</bold></highlight>, and <highlight><bold>37</bold></highlight> of routers. These rows of routers are connected together via interconnection networks <highlight><bold>32</bold></highlight>, <highlight><bold>34</bold></highlight>, and <highlight><bold>36</bold></highlight>. The routers are designed R(row, column) where the top left most router is denoted R(0,0). The top ports of each router are numbered from left to right starting with 0. The bottom ports of each router are numbered from left to right starting with 0. The top ports of each interconnection network are numbered from left to right starting with 0. The bottom ports of each interconnection network are numbered from left to right starting with 0. </paragraph>
<paragraph id="P-0035" lvl="0"><number>&lsqb;0035&rsqb;</number> A new interconnection network <highlight><bold>38</bold></highlight> and a new row of routers <highlight><bold>39</bold></highlight> can be inserted between router row <highlight><bold>33</bold></highlight> and interconnection network <highlight><bold>34</bold></highlight>. This can be accomplished by disconnecting the bottom ports of router row <highlight><bold>33</bold></highlight> from the top ports of interconnection network <highlight><bold>34</bold></highlight>; connecting the bottom ports of router row <highlight><bold>33</bold></highlight> to the top ports of new interconnection network <highlight><bold>38</bold></highlight>; connecting the bottom ports of new interconnection network <highlight><bold>38</bold></highlight> to the top ports of new router row <highlight><bold>39</bold></highlight>; and connecting the bottom ports of new router row <highlight><bold>39</bold></highlight> to the top ports of interconnection network <highlight><bold>34</bold></highlight>. This can be accomplished without breaking the connections between the top ports of router row <highlight><bold>31</bold></highlight> and external connections <highlight><bold>40</bold></highlight> or breaking the connections between the bottom ports of router row <highlight><bold>37</bold></highlight> and external connections <highlight><bold>41</bold></highlight>. </paragraph>
<paragraph id="P-0036" lvl="0"><number>&lsqb;0036&rsqb;</number> The new row of routers and new interconnection network can also be inserted between router row <highlight><bold>31</bold></highlight> and interconnection network <highlight><bold>32</bold></highlight> and between router row <highlight><bold>35</bold></highlight> and interconnection network <highlight><bold>36</bold></highlight>; however it is best to insert the new row of routers and new interconnection network as close to the middle of the network as possible. This is because the middle of a RBCCG network has the greatest number of redundant paths. This minimizes any effects on throughput bandwidth during an upgrade by maximizing the number of paths to which traffic can be diverted. </paragraph>
<paragraph id="P-0037" lvl="0"><number>&lsqb;0037&rsqb;</number> The inserting of a new row of routers and a new interconnection network must be done in a certain manner in order to minimize disruption of throughput bandwidth. The procedure consists of a stretch and a rewire phase. </paragraph>
<paragraph id="P-0038" lvl="0"><number>&lsqb;0038&rsqb;</number> The &ldquo;stretch&rdquo; procedure consists of inserting an new row of routers between an upper row and an adjacent lower row of routers. The algorithm is shown in <cross-reference target="DRAWINGS">FIG. 5</cross-reference> and the flowchart is shown in <cross-reference target="DRAWINGS">FIG. 7</cross-reference>. </paragraph>
<paragraph id="P-0039" lvl="0"><number>&lsqb;0039&rsqb;</number> The &ldquo;stretch&rdquo; algorithm consists of: Selecting an upper row and calling it upper&mdash;row. Assembling a row of nodes to be inserted and calling it inserted_row. Repeating for all upper_row bottom ports: disconnecting the connection to the upper_row bottom port; connecting the connection to this port to the corresponding inserted_row bottom port; and creating a &ldquo;bypass&rdquo; connection pattern between the upper_row and the insert_row by connecting this upper_row bottom port to the corresponding inserted_row top port. </paragraph>
<paragraph id="P-0040" lvl="0"><number>&lsqb;0040&rsqb;</number> In the &ldquo;stretch&rdquo; phase the ports of the inserted_row of routers were inserted in a left to right order. This could also have been done in a right to left manner. This could also be done in any port order and router order so long as the inserted_row bottom port and the inserted_row top port are on the same inserted_row router This is done to equalize the input and output traffic on any router in the inserted_row. </paragraph>
<paragraph id="P-0041" lvl="0"><number>&lsqb;0041&rsqb;</number> Any upper row of routers can be selected so long as there is an adjacent lower row of routers; however, the closer to the middle of the router array the better. This is because the maximum path redundancy occurs between the rows closest to the middle of the router array. The greater the path redundancy the greater the number of path onto which the traffic can be diverted and the smaller the effect of any connection disconnected in the course of the upgrade. </paragraph>
<paragraph id="P-0042" lvl="0"><number>&lsqb;0042&rsqb;</number> The &ldquo;rewire&rdquo; procedure consists of rewiring the &ldquo;bypass&rdquo; connection pattern between the upper row bottom ports and the inserted row top ports such that it is the same as the connections between the inserted row bottom ports and the adjacent lower row top ports. The algorithm is shown in <cross-reference target="DRAWINGS">FIG. 6</cross-reference> and the flowchart is shown in <cross-reference target="DRAWINGS">FIG. 8</cross-reference>. </paragraph>
<paragraph id="P-0043" lvl="0"><number>&lsqb;0043&rsqb;</number> The &ldquo;rewire&rdquo; algorithm consists of: Repeating for all upper_row bottom ports not connected to the proper inserted_row top port: disconnecting the connection from the upper_row bottom port; repeating for all the disconnected upper_row bottom ports: locating the inserted_row top ports that should be connected to this disconnected upper_row bottom port; disconnecting the other end of the connection currently connected to the located inserted_row port; and connecting the disconnected other end of the connection to this disconnected upper_row bottom port. </paragraph>
<paragraph id="P-0044" lvl="0"><number>&lsqb;0044&rsqb;</number> The upper_row bottom ports not connected to the proper inserted_row top ports can be disconnected in any order. A disconnected upper_row bottom port should be connected before another improperly connected upper_row bottom port is disconnected. This minimizes the disruption in the traffic between the upper_row and inserted_row. </paragraph>
<paragraph id="P-0045" lvl="0"><number>&lsqb;0045&rsqb;</number> The stretch phase is shown in more detail in <cross-reference target="DRAWINGS">FIG. 3a</cross-reference>. The RBCCG multi-stage network consists of routers R(0,0) to R(3,3) arranged in four rows, <highlight><bold>40</bold></highlight>, <highlight><bold>41</bold></highlight>, <highlight><bold>42</bold></highlight>, and <highlight><bold>43</bold></highlight>; connected with blocking compensated cyclic networks. R(N,0), R1(N,1), R(N,2), and R(N,3) are the routers to be inserted to form a new row. The blocking compensated cyclic network between rows <highlight><bold>41</bold></highlight> and <highlight><bold>42</bold></highlight> is shown as stretched for purposes of illustration. </paragraph>
<paragraph id="P-0046" lvl="0"><number>&lsqb;0046&rsqb;</number> Router R(N,0) as shown in <cross-reference target="DRAWINGS">FIG. 3B</cross-reference> can be inserted by: diverting traffic away from top port 0 of R(2,0) and bottom port 0 of R(1,0); shutting down top port 0 of R(2,0) and bottom port 0 of R(1,0); moving the connection at bottom port 0 of R(1,0) to bottom port 0 of R(N,0) as shown in <cross-reference target="DRAWINGS">FIG. 3C</cross-reference>; starting bottom port 0 of R(N,0) and top port 0 of R(2,0); connecting bottom port 0 of R(1,0) to top port 0 of R(N,0) as shown in <cross-reference target="DRAWINGS">FIG. 3D</cross-reference>; starting bottom port 0 of R(1,0) and top port 0 of R(N,0); and stop diverting traffic away from top port 0 of R(2,0) and bottom port 0 of R(1,0). </paragraph>
<paragraph id="P-0047" lvl="0"><number>&lsqb;0047&rsqb;</number> This process continues by: diverting traffic away from top port 0 of R(2,1) and bottom port 1 of R(1,0); shutting down top port 0 of R(2,1) and bottom port 1 of R(1,0); moving the connection at bottom port 1 of R(1,0) to bottom port 1 of R(N,0) as shown in <cross-reference target="DRAWINGS">FIG. 3E</cross-reference>; starting bottom port 1 of R(N,0) and top port 0 of R(2,1); connecting bottom port 1 of R(1,0) to top port 1 of R(N,0) as shown in <cross-reference target="DRAWINGS">FIG. 3E</cross-reference>; starting bottom port 1 of R(1,0) and top port 1 of R(N,0); and stop diverting traffic away from top port 0 of R(2,1) and bottom port 1 of R(1,0). </paragraph>
<paragraph id="P-0048" lvl="0"><number>&lsqb;0048&rsqb;</number> This process continues by: diverting traffic away from top port 0 of R(2,2) and bottom port 2 of R(1,0); shutting down top port 0 of R(2,2) and bottom port 2 of R(1,0); moving the connection at bottom port 2 of R(1,0) to bottom port 2 of R(N,0) as shown in <cross-reference target="DRAWINGS">FIG. 3F</cross-reference>; starting bottom port 2 of R(N,0) and top port 0 of R(2,2); connecting bottom port 2 of R(1,0) to top port 2 of R(N,0) as shown in <cross-reference target="DRAWINGS">FIG. 3F</cross-reference>; starting bottom port 2 of R(1,0) and top port 2 of R(N,0); and stop diverting traffic away from top port 0 of R(2,2) and bottom port 2 of R(1,0). </paragraph>
<paragraph id="P-0049" lvl="0"><number>&lsqb;0049&rsqb;</number> Router R(N,1) as shown in <cross-reference target="DRAWINGS">FIG. 3G</cross-reference> can be inserted by: diverting traffic away from top port 0 of R(2,3) and bottom port 0 of R(1,1); shutting down top port 0 of R(2,3) and bottom port 0 of R(1,1); moving the connection at bottom port 0 of R(1,1) to bottom port 0 of R(N,1); starting bottom port 0 of R(N,1) and top port 0 of R(2,3); connecting bottom port 0 of R(1,1) to top port 0 of R(N,1) as shown in <cross-reference target="DRAWINGS">FIG. 31</cross-reference>; starting bottom port 0 of R(1,1) and top port 0 of R(N,1); and stop diverting traffic away from top port 0 of R(2,3) and bottom port 0 of R(1,1). </paragraph>
<paragraph id="P-0050" lvl="0"><number>&lsqb;0050&rsqb;</number> This process continues by: diverting traffic away from top port 1 of R(2,0) and bottom port 1 of R(1,1); shutting down top port 1 of R(2,0) and bottom port 1 of R(1,1); moving the connection at bottom port 1 of R(1,1) to bottom port 1 of R(N,1); starting bottom port 1 of R(N,1) and top port 1 of R(2,0); connecting bottom port 1 of R(1,1) to top port 1 of R(N,1) as shown in <cross-reference target="DRAWINGS">FIG. 3J</cross-reference>; starting bottom port 1 of R(1,1) and top port 1 of R(N,1); and stop diverting traffic away from top port 1 of R(2,0) and bottom port 1 of R(1,1). </paragraph>
<paragraph id="P-0051" lvl="0"><number>&lsqb;0051&rsqb;</number> This process continues by: diverting traffic away from top port 1 of R(2,1) and bottom port 2 of R(1,1); shutting down top port 1 of R(2,1) and bottom port 2 of R(1,1); moving the connection at bottom port 2 of R(1,1) to bottom port 2 of R(N,1); starting bottom port 2 of R(N,1) and top port 1 of R(2,1); connecting bottom port 2 of R(1,1) to top port 2 of R(N,1) as shown in <cross-reference target="DRAWINGS">FIG. 3K</cross-reference>; starting bottom port 2 of R(1,1) and top port 2 of R(N,1); and stop diverting traffic away from top port 1 of R(2,1) and bottom port 2 of R(1,1). </paragraph>
<paragraph id="P-0052" lvl="0"><number>&lsqb;0052&rsqb;</number> Router R(N,2) as shown in <cross-reference target="DRAWINGS">FIG. 3L</cross-reference> can be inserted by: diverting traffic away from top port 1 of R(2,2) and bottom port 0 of R(1,2); shutting down top port 1 of R(2,2) and bottom port 0 of R(1,2); moving the connection at bottom port 0 of R(1,2) to bottom port 0 of R(N,2); starting bottom port 0 of R(N,2) and top port 1 of R(2,2); connecting bottom port 0 of R(1,2) to top port 0 of R(N,2) as shown in <cross-reference target="DRAWINGS">FIG. 3M</cross-reference>; starting bottom port 0 of R(1,2) and top port 0 of R(N,2); and stop diverting traffic away from top port 1 of R(2,2) and bottom port 0 of R(1,2). </paragraph>
<paragraph id="P-0053" lvl="0"><number>&lsqb;0053&rsqb;</number> This process continues by: diverting traffic away from top port 1 of R(2,3) and bottom port 1 of R(1,2); shutting down top port 1 of R(2,3) and bottom port 1 of R(1,2); moving the connection at bottom port 1 of R(1,2) to bottom port 1 of R(N,2); starting bottom port 1 of R(N,2) and top port 1 of R(2,3); connecting bottom port 1 of R(1,2) to top port 1 of R(N,2) as shown in <cross-reference target="DRAWINGS">FIG. 3N</cross-reference>; starting bottom port 1 of R(1,2) and top port 1 of R(N,2); and stop diverting traffic away from top port 1 of R(2,3) and bottom port 1 of R(1,2). </paragraph>
<paragraph id="P-0054" lvl="0"><number>&lsqb;0054&rsqb;</number> This process continues by: diverting traffic away from top port 2 of R(2,0) and bottom port 2 of R(1,2); shutting down top port 2 of R(2,0) and bottom port 2 of R(1,2); moving the connection at bottom port 2 of R(1,2) to bottom port 2 of R(N,2); starting bottom port 2 of R(N,2) and top port 2 of R(2,0); connecting bottom port 2 of R(1,2) to top port 2 of R(N,2) as shown in <cross-reference target="DRAWINGS">FIG. 3O</cross-reference>; starting bottom port 2 of R(1,2) and top port 2 of R(N,2); and stop diverting traffic away from top port 2 of R(2,0) and bottom port 2 of R(1,2). </paragraph>
<paragraph id="P-0055" lvl="0"><number>&lsqb;0055&rsqb;</number> Router R(N,3) as shown in <cross-reference target="DRAWINGS">FIG. 3P</cross-reference> can be inserted by: diverting traffic away from top port 2 of R(2,1) and bottom port 0 of R(1,3); shutting down top port 2 of R(2,1) and bottom port 0 of R(1,3); moving the connection at bottom port 0 of R(1,3) to bottom port 0 of R(N,3); starting bottom port 0 of R(N,3) and top port 2 of R(2,1); connecting bottom port 0 of R(1,3) to top port 0 of R(N,3) as shown in <cross-reference target="DRAWINGS">FIG. 3Q</cross-reference>; starting bottom port 0 of R(1,3) and top port 0 of R(N,3); and stop diverting traffic away from top port 2 of R(2,1) and bottom port 0 of R(1,3). </paragraph>
<paragraph id="P-0056" lvl="0"><number>&lsqb;0056&rsqb;</number> This process continues by: diverting traffic away from top port 2 of R(2,2) and bottom port 1 of R(1,3); shutting down top port 2 of R(2,2) and bottom port 1 of R(1,3); moving the connection at bottom port 1 of R(1,3) to bottom port 1 of R(N,3); starting bottom port 1 of R(N,3) and top port 2 of R(2,2); connecting bottom port 1 of R(1,3) to top port 1 of R(N,3) as shown in <cross-reference target="DRAWINGS">FIG. 3R</cross-reference>; starting bottom port 1 of R(1,3) and top port 1 of R(N,3); and stop diverting traffic away from top port 2 of R(2,2) and bottom port 1 of R(1,3). </paragraph>
<paragraph id="P-0057" lvl="0"><number>&lsqb;0057&rsqb;</number> This process continues by: diverting traffic away from top port 2 of R(2,3) and bottom port 2 of R(1,3); shutting down top port 2 of R(2,3) and bottom port 2 of R(1,3); moving the connection at bottom port 2 of R(1,3) to bottom port 2 of R(N,3); starting bottom port 2 of R(N,3) and top port 2 of R(2,3); connecting bottom port 2 of R(1,3) to top port 2 of R(N,3) as shown in <cross-reference target="DRAWINGS">FIG. 3S</cross-reference>; starting bottom port 2 of R(1,3) and top port 2 of R(N,3); and stop diverting traffic away from top port 2 of R(2,3) and bottom port 2 of R(1,3). </paragraph>
<paragraph id="P-0058" lvl="0"><number>&lsqb;0058&rsqb;</number> The end result of inserting routers R(N,0), R(N,1), R(N,2), and R(N,3) inserted into a stretched version of RBCCG multi-stage network <highlight><bold>30</bold></highlight> is shown in <cross-reference target="DRAWINGS">FIG. 3T</cross-reference>. </paragraph>
<paragraph id="P-0059" lvl="0"><number>&lsqb;0059&rsqb;</number> In the rewiring phase the interconnection network between routers R(1,0), R(1,1), R(1,2), R(1,3) and routers R(N,0), R(N,1), R(N,2), R(N,3) as shown in <cross-reference target="DRAWINGS">FIG. 3T</cross-reference> has to rewired to be the same as the interconnection between routers R(N,0), R(N,1), R(N,2), R(N,3) and routers (R(2,0), R(2,1), R(2,2), R(2,3). </paragraph>
<paragraph id="P-0060" lvl="0"><number>&lsqb;0060&rsqb;</number> Starting at bottom port R(1,0) and working across the row one port at a time towards bottom port 2 of R(1,3). Bottom port 0 of R(1,0) should be connected to top port 0 of R(N,0) because corresponding bottom port 0 of R(0,0) is connected to top port 0 of R(1,0). Bottom port 0 of R(1,0) is already connected to top port 0 of R(N,0) so it does not have to be moved. </paragraph>
<paragraph id="P-0061" lvl="0"><number>&lsqb;0061&rsqb;</number> Bottom port 1 of R(1,0) should be connected to top port 0 of R(N,1) because corresponding bottom port 2 of R(0,1) is connected to top port 1 of R(1,1). Top port 0 of R(N,1) is currently connected to bottom port 0 of R(1,1). Divert traffic from top port 0 of R(N,1) and bottom port 0 of R(1,1). Stop top port 0 of R(N,1) and bottom port 0 of R(1,1). Disconnect bottom port 0 of R(1,1) and move the disconnected connection to bottom port 1 of R(1,0) as shown in <cross-reference target="DRAWINGS">FIG. 4B</cross-reference>. Start bottom port 1 of R(1,0) and top port 0 of R(N,1). Stop diverting the traffic from bottom port 1 of R(1,0) and top port 0 of R(N,1). </paragraph>
<paragraph id="P-0062" lvl="0"><number>&lsqb;0062&rsqb;</number> Bottom port 0 of R(1,1) should be connected to top port 0 of R(N,3) because corresponding bottom port 0 of R(0,1) is connected to top port 0 of R(1,3). Top port 0 of R(N,3) is currently connected to bottom port 0 of R(1,3). Divert traffic from top port 0 of R(N,3) and bottom port 0 of R(1,3). Stop top port 0 of R(N,3) and bottom port 0 of R(1,3). Disconnect bottom port 0 of R(1,3) and move the disconnected connection to bottom port 0 of R(1,1) as shown in <cross-reference target="DRAWINGS">FIG. 4C</cross-reference>. Start bottom port 0 of R(1,1) and top port 0 of R(N,3). Stop diverting the traffic from bottom port 0 of R(1,1) and top port 0 of R(N,3). </paragraph>
<paragraph id="P-0063" lvl="0"><number>&lsqb;0063&rsqb;</number> Bottom port 0 of R(1,3) should be connected to top port 2 of R(N,1) because corresponding bottom port 0 of R(0,3) is connected to top port 2 of R(1,1). Top port 2 of R(N,1) is currently connected to bottom port 2 of R(1,1). Divert traffic from top port <highlight><bold>2</bold></highlight> of R(N,<highlight><bold>1</bold></highlight>) and bottom port 2 of R(1,1). Stop top port 2 of R(N,1) and bottom port 2 of R(1,1). Disconnect bottom port 2 of R(1,1) and move the disconnected connection to bottom port 0 of R(1,3) as shown in <cross-reference target="DRAWINGS">FIG. 4D</cross-reference>. Start bottom port 0 of R(1,3) and top port 2 of R(N,1). Stop diverting the traffic from bottom port 0 of R(1,3) and top port 2 of R(N,1). </paragraph>
<paragraph id="P-0064" lvl="0"><number>&lsqb;0064&rsqb;</number> Bottom port 2 of R(1,1) should be connected to top port 1 of R(N,1) because corresponding bottom port 2 of R(0,1) is connected to top port 1 of R(1,1). Top port 1 of R(N,1) is currently connected to bottom port 1 of R(1,1). Divert traffic from top port I of R(N,<highlight><bold>1</bold></highlight>) and bottom port 1 of R(1,1). Stop top port 1 of R(N,1) and bottom port 1 of R(1,1). Disconnect bottom port 1 of R(1,1) and move the disconnected connection to bottom port 2 of R(1,1) as shown in <cross-reference target="DRAWINGS">FIG. 4E</cross-reference>. Start bottom port 2 of R(1,1) and top port 1 of R(N,1). Stop diverting the traffic from bottom port 2 of R(1,1) and top port 1 of R(N,1). </paragraph>
<paragraph id="P-0065" lvl="0"><number>&lsqb;0065&rsqb;</number> Bottom port 1 of R(1,1) should be connected to top port 1 of R(N,<highlight><bold>0</bold></highlight>) because corresponding bottom port 2 of R(0,1) is connected to top port 1 of R(1,1). Top port 1 of R(N,0) is currently disconnected. Move the disconnected connection to bottom port 1 of R(1,1) as shown in <cross-reference target="DRAWINGS">FIG. 4F</cross-reference>. Start bottom port 1 of R(1,1) and top port 1 of R(N,0). Stop diverting the traffic from bottom port 1 of R(1,1) and top port 1 of R(N,0). </paragraph>
<paragraph id="P-0066" lvl="0"><number>&lsqb;0066&rsqb;</number> It can be seen in <cross-reference target="DRAWINGS">FIG. 4F</cross-reference> that there are no &ldquo;holes,&rdquo; unconnected ports. A link will have to be disconnected to create two new unconnected ports. The link to be disconnected can be determined by scanning across the links between rows R(1,*) and R(N,*) to which links are not connected in the same manner as the corresponding link between rows R(0,*) and R(1,*). </paragraph>
<paragraph id="P-0067" lvl="0"><number>&lsqb;0067&rsqb;</number> If we scan from left to right we see that the link between bottom port 0 of R(1,0) is connected to top port 0 of R(N,0) just like the corresponding link between bottom port 0 of R(0,0) and top port of R(1,0). The link between port bottom port 1 of R(1,0) is connected to top port 0 of R(N,1) just like the corresponding link between bottom port 1 of R(0,0) and top port 0 of R(1,1). However, the link between bottom port 2 of R(1,0) is connected to top port 2 of R(N,0) while the corresponding link between bottom port 2 of R(0,0) is connected to top port 0 of R(1,2). This means that link between bottom port 2 of R(1,0) and top port 2 of R(N,0) should be disconnected. This can be accomplished by diverting traffic from bottom port 2 of R(1,0) and top port 2 of R(N,0) Stopping bottom port 2 of R(1,0) and top port 2 of R(N,0). This is shown in <cross-reference target="DRAWINGS">FIG. 4G</cross-reference>. This creates two new &ldquo;holes&rdquo; to fill. </paragraph>
<paragraph id="P-0068" lvl="0"><number>&lsqb;0068&rsqb;</number> Bottom port 2 of R(1,0) should be connected to top port 0 of R(N,2) because corresponding bottom port 2 of R(0,0) is connected to top port 0 of R(1,2). Top port 0 of R(N,2) is currently connected to bottom port 0 of R(1,2). Divert traffic from top port 0 of R(N,2) and bottom port 0 of R(1,2). Stop top port 0 of R(N,2) and bottom port 0 of R(1,2). </paragraph>
<paragraph id="P-0069" lvl="0"><number>&lsqb;0069&rsqb;</number> Disconnect bottom port 0 of R(1,2) and move the disconnected connection to bottom port 2 of R(1,0) as shown in <cross-reference target="DRAWINGS">FIG. 4H</cross-reference> Start bottom port 2 of R(1,0) and top port 0 of R(N,2) Stop diverting the traffic from bottom port 2 of R(1,0) and top port 0 of R(N,2) </paragraph>
<paragraph id="P-0070" lvl="0"><number>&lsqb;0070&rsqb;</number> Bottom port 0 of R(1,2) should be connected to top port 1 of R(N,2) because corresponding bottom port 0 of R(0,2) is connected to top port 1 of R(1,2). Top port 1 of R(N,2) is currently connected to bottom port 1 of R(1,2). Divert traffic from top port 1 of R(N,2) and bottom port 1 of R(1,2). Stop top port 1 of R(N,2) and CCC and bottom port 1 of R(1,2). Disconnect bottom port 1 of R(1,2) and move the disconnected connection to bottom port 0 of R(1,2) as shown in <cross-reference target="DRAWINGS">FIG. 4I</cross-reference>. Start bottom port 0 of R(1,2) and top port 1 of R(N,2). Stop diverting the traffic from bottom port 0 of R(1,2) and top port 1 of R(N,2). </paragraph>
<paragraph id="P-0071" lvl="0"><number>&lsqb;0071&rsqb;</number> Bottom port 1 of R(1,2) should be connected to top port 1 of R(N,3) because corresponding bottom port 1 of R(0,2) is connected to top port 1 of R(1,3). Top port 1 of R(N,3) is currently connected to bottom port 1 of R(1,3). Divert traffic from top port 1 of R(N,3) and bottom port 1 of R(1,3). Stop top port 1 of R(N,3) and bottom port 1 of R(1,3). Disconnect bottom port 2 of R(1,3) and move the disconnected connection to bottom port 1 of R(1,2) as shown in <cross-reference target="DRAWINGS">FIG. 4J</cross-reference>. Start bottom port 1 of R(1,2) and top port 1 of R(N,3). Stop diverting the traffic from bottom port 1 of R(1,2) and top port 1 of R(N,3). </paragraph>
<paragraph id="P-0072" lvl="0"><number>&lsqb;0072&rsqb;</number> Bottom port 1 of R(1,3) should be connected to top port 2 of R(N,2) because corresponding bottom port 1 of R(0,3) is connected to top port 2 of R(1,2). Top port 2 of R(N,2) is currently connected to bottom port 2 of R(1,2). Divert traffic from top port 2 of R(N,2) and bottom port 2 of R(1,2). Stop top port 2 of R(N,2) and bottom port 2 of R(1,2). Disconnect bottom port 2 of R(1,2) and move the disconnected connection to Bottom port 1 of R(1,3) as shown in <cross-reference target="DRAWINGS">FIG. 4H</cross-reference>. Start Bottom port 1 of R(1,3) and top port 2 of R(N,2). Stop diverting the traffic from Bottom port 1 of R(1,3) and top port 2 of R(N,2). </paragraph>
<paragraph id="P-0073" lvl="0"><number>&lsqb;0073&rsqb;</number> Disconnect bottom port 2 of R(1,2) and move the disconnected connection to bottom port 1 of R(1,3) as shown in <cross-reference target="DRAWINGS">FIG. 4K</cross-reference> Start bottom port 1 of R(1,3) and top port 2 of R(N,2). Stop diverting the traffic from bottom port 1 of R(1,3) and top port 2 of R(N,2). </paragraph>
<paragraph id="P-0074" lvl="0"><number>&lsqb;0074&rsqb;</number> Bottom port 2 of R(1,2) should be connected to top port 2 of R(N,0) because corresponding bottom port 2 of R(0,2) is connected to top port 2 of R(1,0). Bottom port 2 of R(1,2) is currently disconnected, the port is stopped, and the traffic diverted Top port 2 of R(N,0) is currently disconnected, the port is stopped, and the traffic diverted. Connect Bottom port 2 of R(1,2) to top port 2 of R(N,0) as shown in <cross-reference target="DRAWINGS">FIG. 4L</cross-reference>. Start Bottom port 2 of R(1,2) and top port 2 of R(N,0). Stop diverting the traffic from Bottom port 2 of R(1,2) and top port 2 of R(N,0). </paragraph>
<paragraph id="P-0075" lvl="0"><number>&lsqb;0075&rsqb;</number> All the links between rows R(1,*) and R(N,*) are connected in the same manner as the corresponding links between rows R(0,*) and R(1,*). This is shown in <cross-reference target="DRAWINGS">FIG. 4L</cross-reference>. A new row has thus been inserted between row R(1,*) and row R(2,*). </paragraph>
<paragraph id="P-0076" lvl="0"><number>&lsqb;0076&rsqb;</number> The &ldquo;stretch&rdquo; and &ldquo;rewire&rdquo; algorithms and their topological equivalents are discussed in relation to IP (Internet Protocol) routers and switches. These non-stop, minimum traffic disruption, upgrade algoriths can also be applied to arrays of ATM switches, arrays of Ethernet switches or some array of future switches or routers. </paragraph>
<paragraph id="P-0077" lvl="0"><number>&lsqb;0077&rsqb;</number> The &ldquo;stretch&rdquo; and &ldquo;rewire&rdquo; algorithms and their topological equivalents are discussed in relation to any interconnection network in which the connections between the various rows are identical and redundant. It is noted that a Banyan or a Butterfly network can be converted into a perfect shuffle based Omega network in which the interconnection networks between all the rows are identical; that a perfect shuffle network can be shown to just be a case of a n-ary shuffle network; and that a blocking compensated cyclic group network can be shown to be a super set of n-ary shuffle networks. It is also noted that a n-ary shuffle network can be made redundant by adding an additional row. Therefore, this non-stop upgrade procedure can also any network that can be converted into a redundant n-ary shuffle network. </paragraph>
<paragraph id="P-0078" lvl="0"><number>&lsqb;0078&rsqb;</number> Although the present invention has been described above in terms of specific embodiments, it is anticipated that alteration and modifications thereof will no doubt become apparent to those skilled in the art. It is therefore intended that the following claims be interpreted as covering all such alterations and modifications as falling within the true spirit and scope of the invention. </paragraph>
</section>
</detailed-description>
</subdoc-description>
<subdoc-claims>
<heading lvl="1">We claim: </heading>
<claim id="CLM-00001">
<claim-text><highlight><bold>1</bold></highlight>) A method of inserting a new row of nodes into a redundant multi-stage network, comprising the steps of: 
<claim-text>a) selecting an insertion point between the rows of the redundant multi-stage network; </claim-text>
<claim-text>b) stretching the set of connections between the rows of nodes above the insertion point to create a set of bypass connections; </claim-text>
<claim-text>c) inserting a row of new routers into the set of bypass connections; and </claim-text>
<claim-text>d) rewiring the set of bypass connections into a desired topology. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00002">
<claim-text><highlight><bold>2</bold></highlight>) The insertion point as selected in <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein 
<claim-text>if the number of rows in the redundant multi-stage network is even then the inserting point is between row r/2&minus;1 and row r/2 or </claim-text>
<claim-text>if the number of rows in the redundant multi-stage network is odd then the insertion point is either between row (r&minus;1)/2&minus;1 and row (r&minus;1)/2 or between row (r&minus;1)/2 and row (r&minus;1)2&plus;1, </claim-text>
<claim-text>where the redundant multi-stage network consists of r rows and the rows are referred to as row 0 to row r&minus;1 respectively. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00003">
<claim-text><highlight><bold>3</bold></highlight>) A method of inserting a new row of nodes into a redundant multi-stage network with a minimum amount of disruption, comprising the steps of: 
<claim-text>selecting an insertion point between two adjacent rows 
<claim-text>where the row above the insertion point is referred to as upper_row, </claim-text>
<claim-text>where the row below the insertion point is referred to as lower_row, and </claim-text>
<claim-text>where the new row is referred to as the inserted_row; </claim-text>
<claim-text>where the nodes in upper_row are referred to as node 0 through node N&minus;1 respectively, </claim-text>
<claim-text>where the nodes in lower_row are referred to as node 0 through node N&minus;1 respectively, </claim-text>
<claim-text>where the nodes in inserted_row are referred to as node 0 through node N&minus;1 respectively, </claim-text>
<claim-text>where each node consists of P top ports referred to as top port 0 through top port P&minus;1 respectively, and </claim-text>
<claim-text>where each node consists of P bottom ports referred to as bottom port 0 through bottom port P&minus;1 respectively; and </claim-text>
</claim-text>
<claim-text>repeating steps a) to d) until all bottom ports from all the nodes in the upper_row have been selected 
<claim-text>a) selecting a bottom port p from ports 0 to P&minus;1 of a node n from nodes 0 to N&minus;1 in the upper_row, </claim-text>
<claim-text>b) disconnecting the connection to port p, </claim-text>
<claim-text>c) connecting the disconnected end of this connection to bottom port p of node n in the inserted_row and </claim-text>
<claim-text>d) connecting bottom port p of node n of upper_row to upper port p of node n of inserted_row; </claim-text>
<claim-text>whereby the number of disconnected upper_row bottom ports and lower_row top ports at any given time is minimized. </claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00004">
<claim-text><highlight><bold>4</bold></highlight>) The insertion point as selected in <dependent-claim-reference depends_on="CLM-00003">claim 3</dependent-claim-reference>, wherein 
<claim-text>if the number of rows in the redundant multi-stage network is even then the inserting point is between row r/2&minus;1 and row r/2 or </claim-text>
<claim-text>if the number of rows in the redundant multi-stage network is odd then the insertion point is either between row (r&minus;1)/2&minus;1 and row (r&minus;1)/2 or between row (r&minus;1)/2 and row (r&minus;1)/2&plus;1, </claim-text>
<claim-text>where the redundant multi-stage network consists of r rows and the rows are referred to as row 0 to row r&minus;1 respectively. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00005">
<claim-text><highlight><bold>5</bold></highlight>) A method of rewiring the connections in a redundant multi-stage network with a minimum of disruption, comprising the steps of: 
<claim-text>selecting a set of connections between two adjacent rows of nodes 
<claim-text>where the upper adjacent row of nodes is referred to as upper_row, </claim-text>
<claim-text>where the lower adjacent row of nodes is referred to as lower_row, </claim-text>
<claim-text>where the nodes in upper_row are referred to as node 0 through node N&minus;1 respectively, </claim-text>
<claim-text>where the nodes in lower_row are referred to as node 0 through node N&minus;1 respectively, </claim-text>
<claim-text>where each node consists of P top ports referred to as top port 0 through top port P&minus;1 respectively, and </claim-text>
<claim-text>where each node consists of P bottom ports referred to as bottom port 0 through bottom port P&minus;1 respectively; </claim-text>
</claim-text>
<claim-text>selecting a set of desired connections between two adjacent rows of nodes 
<claim-text>where the upper adjacent row of nodes is referred to as desired upper_row, </claim-text>
<claim-text>where the lower adjacent row of nodes is referred to as desired_lower row, </claim-text>
<claim-text>where the nodes in desired upper_row are referred to as node 0 through node N&minus;1 respectively, </claim-text>
<claim-text>where the nodes in desired_lower_row are referred to as node <highlight><bold>0</bold></highlight> through node N&minus;1 respectively, </claim-text>
<claim-text>where each node consists of P top ports referred to as top port 0 through top port P&minus;1 respectively, and </claim-text>
<claim-text>where each node consists of P bottom ports referred to as bottom port 0 through bottom port P&minus;1 respectively; and </claim-text>
</claim-text>
<claim-text>repeating steps a) through b) for all upper_row bottom ports p where upper_row bottom port p of node n is connected to lower_row top port q of node n while corresponding desired_upper row bottom port p of node n is not connected to desired_lower_row top port q of node n 
<claim-text>a) disconnecting the connection from upper_row bottom port p of node n, </claim-text>
<claim-text>b) repeating steps 1) through 3) for disconnected upper&mdash;row bottom port p1 of node n1 
<claim-text>1) determining that upper row bottom port p1 of node n1 should be connected to lower_row top port q of node n2 by observing that desired_upper row bottom port p1 of node n1 is connected to desired_lower_row top port q of node n2, </claim-text>
<claim-text>2) disconnecting the other end of the connection to lower_row top port q of node n2, and </claim-text>
<claim-text><highlight><bold>3</bold></highlight>) connecting the disconnected end of the connection to upper&mdash;row bottom port p1 of node n1; </claim-text>
<claim-text>whereby the number of disconnected upper&mdash;row bottom ports and lower_row top ports at any given time is minimized. </claim-text>
</claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00006">
<claim-text><highlight><bold>6</bold></highlight>) A method of inserting a new row of nodes into a redundant multi-stage network with a minimum amount of disruption, comprising the steps of 
<claim-text>selecting an insertion point between two adjacent rows 
<claim-text>where the row above the insertion point is referred to as upper_row, </claim-text>
<claim-text>where the row below the insertion point is referred to as lower_row, and </claim-text>
<claim-text>where the new row is referred to as the inserted_row; </claim-text>
<claim-text>where the nodes in upper_row are referred to as node 0 through node N&minus;1 respectively, </claim-text>
<claim-text>where the nodes in lower_row are referred to as node 0 through node N&minus;1 respectively, </claim-text>
<claim-text>where the nodes in inserted_row are referred to as node 0 through node N&minus;1 respectively, </claim-text>
<claim-text>where each node consists of P top ports referred to as top port 0 through top port P&minus;1 respectively, and </claim-text>
<claim-text>where each node consists of P bottom ports referred to as bottom port 0 through bottom port P&minus;1 respectively; </claim-text>
</claim-text>
<claim-text>repeating steps a) to d) until all bottom ports from all the nodes in the upper_row have been selected 
<claim-text>a) selecting a bottom port p from ports 0 to P&minus;1 of a node n from nodes 0 to N&minus;1 in the upper_row, </claim-text>
<claim-text>b) disconnecting the connection to port p, </claim-text>
<claim-text>c) connecting the disconnected end of this connection to bottom port p of node n in the inserted_row and </claim-text>
<claim-text>d) connecting bottom port p of node n of upper&mdash;row to upper port p of node n of inserted_row; </claim-text>
</claim-text>
<claim-text>selecting a set of desired connections between two adjacent rows of nodes 
<claim-text>where the upper adjacent row of nodes is referred to as desired upper row, </claim-text>
<claim-text>where the lower adjacent row of nodes is referred to as desired_lower&mdash;row, </claim-text>
<claim-text>where the nodes in desired_upper&mdash;row are referred to as node 0 through node N&minus;1 respectively, </claim-text>
<claim-text>where the nodes in desired_lower&mdash;row are referred to as node 0 through node N&minus;1 respectively, </claim-text>
<claim-text>where each node consists of P top ports referred to as top port 0 through top port P&minus;1 respectively, and </claim-text>
<claim-text>where each node consists of P bottom ports referred to as bottom port 0 through bottom port P&minus;1 respectively; and </claim-text>
</claim-text>
<claim-text>repeating steps a) through b) for all upper&mdash;row bottom ports p where upper&mdash;row bottom port p of node n is connected to inserted_row top port q of node n while corresponding desired_upper_row bottom port p of node n is not connected to desired_lower_row top port q of node n 
<claim-text>a) disconnecting the connection from upper_row bottom port p of node n, </claim-text>
<claim-text>b) repeating steps 1) through 3) for disconnected upper&mdash;row bottom port p1 of node n1 
<claim-text>1) determining that upper_row bottom port p1 of node n1 should be connected to inserted_row top port q of node n2 by observing that desired_upper_row bottom port p1 of node n1 is connected to desired_lower_row top port q of node n2, </claim-text>
<claim-text>2) disconnecting the other end of the connection to inserted_row top port q of node n2, and </claim-text>
<claim-text>3) connecting the disconnected end of the connection to upper row bottom port p1 of node n1; </claim-text>
<claim-text>whereby the number of disconnected upper row bottom ports and inserted row top ports at any given time is minimized. </claim-text>
</claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00007">
<claim-text><highlight><bold>7</bold></highlight>) The insertion point as selected in <dependent-claim-reference depends_on="CLM-00006">claim 6</dependent-claim-reference>, wherein 
<claim-text>if the number of rows in the redundant multi-stage network is even then the inserting point is between row r/2&minus;1 and row r/2 or </claim-text>
<claim-text>if the number of rows in the redundant multi-stage network is odd then the insertion point is either between row (r&minus;1)/2&minus;1 and row (r&minus;1)/2 or between row (r&minus;1)/2 and row (r&minus;1)/2&plus;1, </claim-text>
<claim-text>where the redundant multi-stage network consists of r rows and the rows are referred to as row 0 to row r&minus;1 respectively.</claim-text>
</claim-text>
</claim>
</subdoc-claims>
<subdoc-drawings id="DRAWINGS">
<heading lvl="0" align="CENTER">Drawings</heading>
<representative-figure>1</representative-figure>
<figure id="figure-D00000">
<image id="EMI-D00000" file="US20030002437A1-20030102-D00000.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00001">
<image id="EMI-D00001" file="US20030002437A1-20030102-D00001.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00002">
<image id="EMI-D00002" file="US20030002437A1-20030102-D00002.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00003">
<image id="EMI-D00003" file="US20030002437A1-20030102-D00003.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00004">
<image id="EMI-D00004" file="US20030002437A1-20030102-D00004.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00005">
<image id="EMI-D00005" file="US20030002437A1-20030102-D00005.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00006">
<image id="EMI-D00006" file="US20030002437A1-20030102-D00006.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00007">
<image id="EMI-D00007" file="US20030002437A1-20030102-D00007.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00008">
<image id="EMI-D00008" file="US20030002437A1-20030102-D00008.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00009">
<image id="EMI-D00009" file="US20030002437A1-20030102-D00009.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00010">
<image id="EMI-D00010" file="US20030002437A1-20030102-D00010.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00011">
<image id="EMI-D00011" file="US20030002437A1-20030102-D00011.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00012">
<image id="EMI-D00012" file="US20030002437A1-20030102-D00012.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00013">
<image id="EMI-D00013" file="US20030002437A1-20030102-D00013.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00014">
<image id="EMI-D00014" file="US20030002437A1-20030102-D00014.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00015">
<image id="EMI-D00015" file="US20030002437A1-20030102-D00015.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00016">
<image id="EMI-D00016" file="US20030002437A1-20030102-D00016.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00017">
<image id="EMI-D00017" file="US20030002437A1-20030102-D00017.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00018">
<image id="EMI-D00018" file="US20030002437A1-20030102-D00018.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00019">
<image id="EMI-D00019" file="US20030002437A1-20030102-D00019.TIF" imf="TIFF" ti="DR"/>
</figure>
</subdoc-drawings>
</patent-application-publication>
