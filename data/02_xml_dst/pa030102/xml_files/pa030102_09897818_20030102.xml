<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE patent-application-publication SYSTEM "pap-v16-2002-01-01.dtd" [
<!ENTITY US20030000375A1-20030102-D00000.TIF SYSTEM "US20030000375A1-20030102-D00000.TIF" NDATA TIF>
<!ENTITY US20030000375A1-20030102-D00001.TIF SYSTEM "US20030000375A1-20030102-D00001.TIF" NDATA TIF>
<!ENTITY US20030000375A1-20030102-D00002.TIF SYSTEM "US20030000375A1-20030102-D00002.TIF" NDATA TIF>
<!ENTITY US20030000375A1-20030102-D00003.TIF SYSTEM "US20030000375A1-20030102-D00003.TIF" NDATA TIF>
<!ENTITY US20030000375A1-20030102-D00004.TIF SYSTEM "US20030000375A1-20030102-D00004.TIF" NDATA TIF>
<!ENTITY US20030000375A1-20030102-D00005.TIF SYSTEM "US20030000375A1-20030102-D00005.TIF" NDATA TIF>
<!ENTITY US20030000375A1-20030102-D00006.TIF SYSTEM "US20030000375A1-20030102-D00006.TIF" NDATA TIF>
]>
<patent-application-publication>
<subdoc-bibliographic-information>
<document-id>
<doc-number>20030000375</doc-number>
<kind-code>A1</kind-code>
<document-date>20030102</document-date>
</document-id>
<publication-filing-type>new</publication-filing-type>
<domestic-filing-data>
<application-number>
<doc-number>09897818</doc-number>
</application-number>
<application-number-series-code>09</application-number-series-code>
<filing-date>20010629</filing-date>
</domestic-filing-data>
<technical-information>
<classification-ipc>
<classification-ipc-primary>
<ipc>F01B025/26</ipc>
</classification-ipc-primary>
<classification-ipc-edition>07</classification-ipc-edition>
</classification-ipc>
<classification-us>
<classification-us-primary>
<uspc>
<class>092</class>
<subclass>00500R</subclass>
</uspc>
</classification-us-primary>
</classification-us>
<title-of-invention>Dual hall effect sensor for determining travel</title-of-invention>
</technical-information>
<inventors>
<first-named-inventor>
<name>
<given-name>Jon</given-name>
<middle-name>T.</middle-name>
<family-name>Zumberge</family-name>
</name>
<residence>
<residence-us>
<city>Dayton</city>
<state>OH</state>
<country-code>US</country-code>
</residence-us>
</residence>
<authority-applicant>INV</authority-applicant>
</first-named-inventor>
<inventor>
<name>
<given-name>Alan</given-name>
<middle-name>H.</middle-name>
<family-name>Green</family-name>
</name>
<residence>
<residence-us>
<city>Germantown</city>
<state>OH</state>
<country-code>US</country-code>
</residence-us>
</residence>
<authority-applicant>INV</authority-applicant>
</inventor>
</inventors>
<assignee>
<organization-name>Delphi Technologies, Inc.</organization-name>
<assignee-type>02</assignee-type>
</assignee>
<correspondence-address>
<name-1>Scott A. McBain, Esq.</name-1>
<name-2>Delphi Tehnologies Inc.</name-2>
<address>
<address-1>Legal Staff, Mail Code 480-414-420</address-1>
<address-2>P.O. Box 5052</address-2>
<city>Troy</city>
<state>MI</state>
<postalcode>48007-5052</postalcode>
<country>
<country-code>US</country-code>
</country>
</address>
</correspondence-address>
</subdoc-bibliographic-information>
<subdoc-abstract>
<paragraph id="A-0001" lvl="0">A non-contact Hall Effect position sensor integral to a master cylinder for an automotive hydraulic braking system provides reliable brake pedal position information without regard to the geometry and placement of the brake pedal input, decreasing the complexity of integration into each type of automobile. Moreover, reliable performance of brake position sensing is provided by avoiding use of contact sensors that are subject to wear and performance variation. </paragraph>
</subdoc-abstract>
<subdoc-description>
<summary-of-invention>
<section>
<heading lvl="1">FIELD OF THE INVENTION </heading>
<paragraph id="P-0001" lvl="0"><number>&lsqb;0001&rsqb;</number> The present invention relates to a noncontact sensor for longitudinal travel, and more particularly, to brake pedal position sensing integral to a master cylinder for an automotive hydraulic braking system. </paragraph>
</section>
<section>
<heading lvl="1">BACKGROUND OF THE INVENTION </heading>
<paragraph id="P-0002" lvl="0"><number>&lsqb;0002&rsqb;</number> Automobiles have long incorporated hydraulic wheel braking systems that rely upon a master cylinder to supply hydraulic pressure to disk brake calipers or drum brake actuators in response to brake pedal pressure. The driver adjusts the amount of pedal pressure to accommodate variations in stopping performance and driving conditions. </paragraph>
<paragraph id="P-0003" lvl="0"><number>&lsqb;0003&rsqb;</number> More recently, improvements to hydraulic braking systems have enhanced performance and safety. For instance, Electro-Hydraulic Braking (EHB) systems automatically adjust a commanded degree of braking to accommodate variations in the braking system and driving conditions. The brake pedal becomes an input rather than a direct control to the EHB system. Consequently, determining the amount of braking intended by the driver becomes important to correct operation of the braking system and for providing feedback to the driver. Some EHB systems use a number of devices for determining the amount of braking intended by the driver. These devices include a pressure sensor or transducer exposed to the hydraulic fluid that goes to the wheel brakes. However, the sensed pressure may not directly correspond to the amount of pressure applied to the brake pedal for small travel events due to friction in the braking system or other variations. </paragraph>
<paragraph id="P-0004" lvl="0"><number>&lsqb;0004&rsqb;</number> It is known to use a Hall Effect sensor to sense a pressure imbalance between two braking circuits. A magnet within the hydraulic portion of the master cylinder is physically separated from the Hall Effect transducer that senses the position of the magnet. However, the Hall Effect transducer has a limited range of less than an inch for sensing the position of the magnet, and thus was used as a switch rather than for sensing a range of pressures. </paragraph>
<paragraph id="P-0005" lvl="0"><number>&lsqb;0005&rsqb;</number> It is known to sense brake pedal position directly, rather than hydraulic pressure for short travel events. In particular, contact transducers, such as resistive strip potentiometers, are mechanically connected to the brake pedal linkages. However, these contact transducers suffer from variations in signal output due to physical wear. Moreover, integration of noncontact sensors is complicated, first by the geometry of brake pedal linkages for different vehicles; second, the adjustment of a brake pedal to accord different users of the same vehicle type; and third by nonstandard brake pedals for the disabled (e.g., hand brake). Moreover, these portions of the braking system are often designed by different vendors, thereby further complicating the design effort. </paragraph>
<paragraph id="P-0006" lvl="0"><number>&lsqb;0006&rsqb;</number> Consequently, a significant need exists for brake pedal position sensing that can be readily integrated into a wide variety of vehicle types and that is less subject to performance variation. </paragraph>
</section>
<section>
<heading lvl="1">SUMMARY OF THE INVENTION </heading>
<paragraph id="P-0007" lvl="0"><number>&lsqb;0007&rsqb;</number> The present invention addresses these and other problems in the prior art by providing a noncontact position sensor integral to a master cylinder for an automotive hydraulic braking system. Thus, reliable brake pedal position information is readily provided without regard to the geometry and placement of the brake pedal input, thereby decreasing the complexity of integration into each type of automobile. An advantage of the present invention is that reliable performance of brake position sensing is provided by the use of noncontact sensors that are less subject to wear and performance variations, thereby providing a more reliable performance over a longer time than known sensors. </paragraph>
<paragraph id="P-0008" lvl="0"><number>&lsqb;0008&rsqb;</number> In one aspect of the invention, a hydraulic braking master cylinder includes a sensor for determining travel. In particular, the sensor includes a dual Hall Effect transducer arrangement to sense a magnet coupled to a piston. The dual transducers increase the length of travel that may be sensed. </paragraph>
<paragraph id="P-0009" lvl="0"><number>&lsqb;0009&rsqb;</number> In another aspect of the invention, the sensor further includes circuitry for determining the travel position based on the outputs from the dual transducers. In particular, based on the voltage levels from each transducer, the circuitry determines a region of operation and uses a linear approximation based on one of the two transducers appropriate for that region. Thereby, a complicated computation or lookup of the position based on a nonlinear representation of the transducer signals is avoided. </paragraph>
<paragraph id="P-0010" lvl="0"><number>&lsqb;0010&rsqb;</number> In yet another aspect of the invention, a sensor for determining travel senses a magnetic field of a magnet coupled to a member by spacing a first and second Hall Effect transducer spaced along a direction of travel of the member. A linear approximation is defined for each linear portion of output signals from each respective Hall Effect transducer. The linear approximation is a function of travel, sensor gain, and an offset. Determining travel based on the output signals is achieved by determining a region of operation by solving each linear approximation function with the related output signal and selecting a linear approximation with a lower magnitude. A signal representing travel is produced by solving the selected linear approximation for travel. </paragraph>
<paragraph id="P-0011" lvl="0"><number>&lsqb;0011&rsqb;</number> The above and other objects and advantages of the present invention shall be made apparent from the accompanying drawings and the description thereof.</paragraph>
</section>
</summary-of-invention>
<brief-description-of-drawings>
<section>
<heading lvl="1">BRIEF DESCRIPTION OF THE DRAWING </heading>
<paragraph id="P-0012" lvl="0"><number>&lsqb;0012&rsqb;</number> The accompanying drawings, which are incorporated in and constitute a part of this specification, illustrate embodiments of the invention together with a general description of the invention given above, as well as a detailed description of the embodiments given below, serve to explain the principles of the invention. </paragraph>
<paragraph id="P-0013" lvl="0"><number>&lsqb;0013&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1</cross-reference> is a front view of an illustrative two-port master cylinder with integral travel determination circuitry; </paragraph>
<paragraph id="P-0014" lvl="0"><number>&lsqb;0014&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 2</cross-reference> is a cross-sectional side view along line <highlight><bold>2</bold></highlight>-<highlight><bold>2</bold></highlight> of the master cylinder of <cross-reference target="DRAWINGS">FIG. 1</cross-reference>; </paragraph>
<paragraph id="P-0015" lvl="0"><number>&lsqb;0015&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3</cross-reference> is a cross-sectional side view along line <highlight><bold>3</bold></highlight>-<highlight><bold>3</bold></highlight> of the master cylinder of Fig, <highlight><bold>1</bold></highlight>; </paragraph>
<paragraph id="P-0016" lvl="0"><number>&lsqb;0016&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 4</cross-reference> is a diagram of the travel determination circuitry of the master cylinder of FIGS. <highlight><bold>1</bold></highlight>-<highlight><bold>3</bold></highlight>; </paragraph>
<paragraph id="P-0017" lvl="0"><number>&lsqb;0017&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 5</cross-reference> is a plot of the analog outputs from the dual Hall Effect transducers of the travel determination circuitry of <cross-reference target="DRAWINGS">FIG. 4</cross-reference>, annotated with control thresholds of a first signal conditioning circuit; </paragraph>
<paragraph id="P-0018" lvl="0"><number>&lsqb;0018&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 6</cross-reference> is a sequence of operations performed by the first signal conditioning circuit of the travel determination circuitry of <cross-reference target="DRAWINGS">FIG. 4</cross-reference> in generating a travel position signal based on the analog outputs from the dual Hall Effect transducers; </paragraph>
<paragraph id="P-0019" lvl="0"><number>&lsqb;0019&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 7</cross-reference> is a plot of the analog outputs from the dual Hall Effect transducers of the travel determination circuitry of <cross-reference target="DRAWINGS">FIG. 4</cross-reference>, annotated with alternative control thresholds of a second signal conditioning circuit; and </paragraph>
<paragraph id="P-0020" lvl="0"><number>&lsqb;0020&rsqb;</number> FIGS. <highlight><bold>8</bold></highlight>A-<highlight><bold>8</bold></highlight>B are a sequence of operations performed by the second signal conditioning circuit of the travel determination circuitry of <cross-reference target="DRAWINGS">FIG. 4</cross-reference> in generating a travel position signal based on the analog outputs from the dual Hall Effect transducers.</paragraph>
</section>
</brief-description-of-drawings>
<detailed-description>
<section>
<heading lvl="1">DETAILED DESCRIPTION OF SPECIFIC EMBODIMENTS </heading>
<paragraph id="P-0021" lvl="0"><number>&lsqb;0021&rsqb;</number> Turning to the Drawings, wherein like numbers refer to like parts throughout the several views, FIGS. <highlight><bold>1</bold></highlight>-<highlight><bold>3</bold></highlight> depict a braking master cylinder <highlight><bold>30</bold></highlight> for an automobile hydraulic wheel braking system (not shown) that includes both two-port master cylinder operation and pedal-feel emulation for use in an EHB system. Advantageously, the master cylinder <highlight><bold>30</bold></highlight> includes integral travel determination sensing that indirectly measures brake pedal travel used to interpret drive intent and command the appropriate level of wheel brake pressure. </paragraph>
<paragraph id="P-0022" lvl="0"><number>&lsqb;0022&rsqb;</number> With particular reference to <cross-reference target="DRAWINGS">FIG. 2</cross-reference>, as an input force is applied to a push rod <highlight><bold>31</bold></highlight> originating from a brake pedal (not shown), a primary piston and magnet assembly <highlight><bold>32</bold></highlight> and secondary piston assembly <highlight><bold>34</bold></highlight> move to the left, as depicted by arrow <highlight><bold>35</bold></highlight>. After bypass holes <highlight><bold>36</bold></highlight>, <highlight><bold>38</bold></highlight> are covered by respective primary seals <highlight><bold>40</bold></highlight>, <highlight><bold>42</bold></highlight>, pressure begins to build in a primary chamber <highlight><bold>44</bold></highlight> and a secondary chamber <highlight><bold>46</bold></highlight>. Because the braking master cylinder <highlight><bold>30</bold></highlight> is hydraulically isolated during normal powered operation, fluid begins to move from the secondary chamber <highlight><bold>46</bold></highlight> into a secondary emulator assembly <highlight><bold>48</bold></highlight> (shown in <cross-reference target="DRAWINGS">FIG. 3</cross-reference>) via a fluid path &ldquo;S&rdquo;. At a higher level of force from the push rod <highlight><bold>31</bold></highlight>, sufficient pressure is generated in the primary chamber <highlight><bold>44</bold></highlight> for fluid to begin to move into a primary emulator assembly <highlight><bold>50</bold></highlight> (shown in <cross-reference target="DRAWINGS">FIG. 3</cross-reference>) via a fluid path &ldquo;P&rdquo;. </paragraph>
<paragraph id="P-0023" lvl="0"><number>&lsqb;0023&rsqb;</number> With particular reference to <cross-reference target="DRAWINGS">FIG. 3</cross-reference>, the onset of travel and rate of travel of a secondary emulator spring <highlight><bold>52</bold></highlight> as well as a primary emulator spring <highlight><bold>54</bold></highlight> are based on vehicle specific pedal-feel requirements. Both emulator piston assemblies <highlight><bold>56</bold></highlight> and <highlight><bold>58</bold></highlight> include a lip seal <highlight><bold>60</bold></highlight> and an O-ring seal <highlight><bold>62</bold></highlight> to assure that brake fluid is sealed in the master cylinder <highlight><bold>30</bold></highlight> and that air does not enter the master cylinder <highlight><bold>30</bold></highlight> during vacuum evacuation. The displacement amounts of travel <highlight><bold>64</bold></highlight>, <highlight><bold>66</bold></highlight> of both respective emulator assemblies <highlight><bold>56</bold></highlight> and <highlight><bold>58</bold></highlight> are also based on vehicle specific pedal-feel requirements. Each of the emulator assemblies <highlight><bold>48</bold></highlight> and <highlight><bold>50</bold></highlight> is attached to a master cylinder body or housing <highlight><bold>68</bold></highlight> by means of a threaded connection <highlight><bold>70</bold></highlight> and sealed with an O-ring seal <highlight><bold>72</bold></highlight>. </paragraph>
<paragraph id="P-0024" lvl="0"><number>&lsqb;0024&rsqb;</number> Referring again to <cross-reference target="DRAWINGS">FIG. 2, a</cross-reference> travel sensor assembly <highlight><bold>74</bold></highlight> is attached to a flat surface <highlight><bold>75</bold></highlight> on the bottom of the master cylinder body <highlight><bold>68</bold></highlight> by threaded fasteners (not shown). The travel sensor assembly <highlight><bold>74</bold></highlight> is non-contacting in nature and interacts with a magnetic field of a magnetic portion, depicted as a hollow cylindrical magnet <highlight><bold>76</bold></highlight>, of the primary piston and magnet assembly <highlight><bold>32</bold></highlight>. The intervening structure between the magnet assembly <highlight><bold>32</bold></highlight> and the travel sensor assembly <highlight><bold>74</bold></highlight>, such as adjacent portions of the body <highlight><bold>68</bold></highlight>, is advantageously nonferrous (e.g., aluminum and alloys thereof) and magnetically permeable so as to not significantly impede the magnetic field. A primary piston <highlight><bold>77</bold></highlight> of the primary piston and magnet assembly <highlight><bold>32</bold></highlight> consists of a front piston <highlight><bold>78</bold></highlight> and a rear piston <highlight><bold>80</bold></highlight> that are press fit together after the magnet <highlight><bold>76</bold></highlight> and an O-ring seal <highlight><bold>82</bold></highlight> are installed onto the front piston <highlight><bold>78</bold></highlight>. The O-ring seal <highlight><bold>82</bold></highlight> is squeezed during assembly and maintains contact between the magnet <highlight><bold>76</bold></highlight> and a shoulder <highlight><bold>84</bold></highlight> of the front piston <highlight><bold>78</bold></highlight>. </paragraph>
<paragraph id="P-0025" lvl="0"><number>&lsqb;0025&rsqb;</number> During non-power operation, the master cylinder <highlight><bold>30</bold></highlight> is not hydraulically isolated. Thus, fluid from primary chamber <highlight><bold>44</bold></highlight> and secondary chamber <highlight><bold>46</bold></highlight> is directed into the wheel brakes (not shown), as well as into the primary and secondary emulator assemblies <highlight><bold>48</bold></highlight> and <highlight><bold>50</bold></highlight>. The additional travel of the secondary piston assembly <highlight><bold>34</bold></highlight> allows a lockout O-ring seal <highlight><bold>86</bold></highlight> to enter a main bore <highlight><bold>88</bold></highlight> of the master cylinder body <highlight><bold>68</bold></highlight> and reduce the travel associated with the primary emulator assembly <highlight><bold>50</bold></highlight>. This results in less total pedal travel during non-power operation. </paragraph>
<paragraph id="P-0026" lvl="0"><number>&lsqb;0026&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 4</cross-reference> depicts travel determination circuitry <highlight><bold>90</bold></highlight> of the master cylinder <highlight><bold>30</bold></highlight> of FIGS. <highlight><bold>1</bold></highlight>-<highlight><bold>3</bold></highlight>. The travel determination circuitry <highlight><bold>90</bold></highlight> includes at least two noncontact Hall Effect transducers <highlight><bold>92</bold></highlight>, <highlight><bold>94</bold></highlight> in the travel sensor assembly <highlight><bold>74</bold></highlight>, and each transducer <highlight><bold>92</bold></highlight>, <highlight><bold>94</bold></highlight> is aligned along the direction of travel <highlight><bold>35</bold></highlight> of the magnet <highlight><bold>76</bold></highlight>. The Hall Effect is the electromotive force generated in a strip of metal longitudinally conducting an electric current and subjected to a magnetic field normal to its major surface. Using movement of a magnet, and thus the change in magnetic field of the magnet, allows for noncontact sensing of motion of the piston <highlight><bold>78</bold></highlight>. </paragraph>
<paragraph id="P-0027" lvl="0"><number>&lsqb;0027&rsqb;</number> The primary transducer <highlight><bold>92</bold></highlight> provides an output signal &ldquo;HS<highlight><bold>1</bold></highlight>&rdquo; and a secondary transducer <highlight><bold>94</bold></highlight> provides an output signal &ldquo;HS<highlight><bold>2</bold></highlight>&rdquo;. Both signals HS<highlight><bold>1</bold></highlight> and HS<highlight><bold>2</bold></highlight> are processed by a signal conditioning circuit <highlight><bold>94</bold></highlight> to produce a travel position signal &ldquo;X&rdquo;. By including a plurality of Hall Effect transducers <highlight><bold>92</bold></highlight>, <highlight><bold>94</bold></highlight> as part of the travel determination circuitry <highlight><bold>90</bold></highlight>, several advantages are realized. First, a larger range of travel may be detected than with a single transducer. In an illustrative embodiment, longitudinal spacing of 11 to 15 mm measures 22 to 30 mm of master cylinder piston travel than on a 4-to-1 pedal which corresponds to 88-120 mm of pedal travel. Second, using noncontact transducers eliminates a source of failure common to contact sensors that suffer from friction and contaminants. Third, integration of brake pedal travel determination into a vehicle is simplified by detecting the travel integral to the master cylinder, avoiding design variations in brake pedal mechanization. </paragraph>
<paragraph id="P-0028" lvl="0"><number>&lsqb;0028&rsqb;</number> As depicted in FIGS. <highlight><bold>5</bold></highlight>-<highlight><bold>6</bold></highlight>, advantageous longitudinal spacing of the transducers <highlight><bold>92</bold></highlight>, <highlight><bold>94</bold></highlight> of <cross-reference target="DRAWINGS">FIG. 4</cross-reference> allows for cost-effective implementation of the signal conditioning circuit <highlight><bold>96</bold></highlight> by having a linear portion of one of the output signals available in each region A-F for direct conversion to the travel position X. Thus, comparisons of voltage levels of output signals HS<highlight><bold>1</bold></highlight> and HS<highlight><bold>2</bold></highlight> to predetermined calibration points (voltage thresholds) provide a cost-effective and robust approach to obtaining brake pedal position. With particular reference to <cross-reference target="DRAWINGS">FIG. 5</cross-reference>, the output signals HS<highlight><bold>1</bold></highlight> and HS<highlight><bold>2</bold></highlight> are shown to have substantial portions represented by one of three linear slopes defined by a sensor gain, either positive or negative for a given region, as well as by a voltage offset to define each linear slope in terms of the travel position X. </paragraph>
<paragraph id="P-0029" lvl="0"><number>&lsqb;0029&rsqb;</number> In the first illustrative embodiment, the negatively sloped portion of the HS<highlight><bold>2</bold></highlight> output signal is not used. A second illustrative embodiment, discussed below, will make use of this region for extended travel determination. In addition, the approach may be extended to any desired length with additional transducers to obtain additional overlapping output signals. Alternatively or in addition, the magnetic field may be varied to lengthen the Hall Effect (i.e., longitudinally lengthen the magnet <highlight><bold>76</bold></highlight>), and thereby allow greater spacing of the transducers, as will be discussed below for a second version of the signal conditioning circuit <highlight><bold>94</bold></highlight>. &ldquo;Flattening&rdquo; of each output signal HS<highlight><bold>1</bold></highlight> and HS<highlight><bold>2</bold></highlight> in some applications may require processing with greater sensitivity to obtain adequate travel determination resolution. Alternatively, greater resolution may be obtained by shortening the magnet to create output signals HS<highlight><bold>1</bold></highlight>, HS<highlight><bold>2</bold></highlight> having a sensor gain of a greater slope. </paragraph>
<paragraph id="P-0030" lvl="0"><number>&lsqb;0030&rsqb;</number> With particular reference to <cross-reference target="DRAWINGS">FIG. 6, a</cross-reference> sequence of operations for determining the travel position X compares the output voltages (SENSOR VOLTAGES) to four calibration points (CAL_PT<highlight><bold>1</bold></highlight>, CAL_PT<highlight><bold>2</bold></highlight>, CAL_PT<highlight><bold>3</bold></highlight>, CAL_PT<highlight><bold>4</bold></highlight>) to determine the region of operation. With the region known, a determination can be made as to which output signal to use in calculating travel X, whether a positive or negative sensor gain should be used, the corresponding offset value, and whether the offset value may be updated. </paragraph>
<paragraph id="P-0031" lvl="0"><number>&lsqb;0031&rsqb;</number> It will be appreciated by those skilled in the art having the benefit of the present disclosure that the sequence of operations may be performed by a microcontroller or similar device integral to the master cylinder or remotely located in another portion of the vehicle. In addition, the sequence of operations may be performed by a microprocessor that performs other processing functions such as control of the overall braking system. </paragraph>
<paragraph id="P-0032" lvl="0"><number>&lsqb;0032&rsqb;</number> In particular, a routine <highlight><bold>100</bold></highlight> for master cylinder travel determination begins by reading the Hall Effect sensors (HS<highlight><bold>1</bold></highlight>, HS<highlight><bold>2</bold></highlight>) (block <highlight><bold>102</bold></highlight>). The sensor signals are bound to the calibration limits of the transducers (block <highlight><bold>104</bold></highlight>). Then, a determination is made as to whether any braking is occurring by sensing braking signals made available by the braking system (block <highlight><bold>106</bold></highlight>). Typically, signals are available from a brake switch and a master cylinder pressure transducer that allow verification of proper sensor operation. In addition, the braking system may command braking when the driver has not depressed the brake pedal, such as for vehicle traction control. </paragraph>
<paragraph id="P-0033" lvl="0"><number>&lsqb;0033&rsqb;</number> If no braking signals are sensed in block <highlight><bold>106</bold></highlight>, then an opportunity exists to update the offset values HS<highlight><bold>1</bold></highlight>_POS and HS<highlight><bold>2</bold></highlight>_NEG for the linear approximations for the positive slope portion of the HS<highlight><bold>1</bold></highlight> output signal and the negative slope portion of the HS<highlight><bold>2</bold></highlight> output signal, respectively (block <highlight><bold>108</bold></highlight>). Before updating the offsets, a check is first made that the current value has changed more than a predetermined noise calibration value. Then, routine <highlight><bold>100</bold></highlight> returns to await the next update interval. </paragraph>
<paragraph id="P-0034" lvl="0"><number>&lsqb;0034&rsqb;</number> If braking is sensed in block <highlight><bold>106</bold></highlight>, then a further determination is made as to whether the driver is requesting braking (block <highlight><bold>110</bold></highlight>), as may be available from the braking system as a switched signal or may be based on a sensor signal above a threshold. If not, routine <highlight><bold>100</bold></highlight> returns. However, if braking is requested by the driver (i.e., the brake pedal is depressed), then the travel position X is determined. </paragraph>
<paragraph id="P-0035" lvl="0"><number>&lsqb;0035&rsqb;</number> First, a determination is made as to whether the first output signal HS<highlight><bold>1</bold></highlight> is less than the first calibration point (CAL_PT<highlight><bold>1</bold></highlight>) (block <highlight><bold>112</bold></highlight>). If so, the travel position X is in the first region (REGION A). Therefore, the determination of travel position X is based on the positive sloped linear approximation to the HS<highlight><bold>1</bold></highlight> output signal (&ldquo;X&equals;&plus;GAIN&times;(HS<highlight><bold>1</bold></highlight>&plus;HS<highlight><bold>1</bold></highlight>_POS)&rdquo;) (block <highlight><bold>114</bold></highlight>). Then routine <highlight><bold>100</bold></highlight> returns. </paragraph>
<paragraph id="P-0036" lvl="0"><number>&lsqb;0036&rsqb;</number> If, at block <highlight><bold>112</bold></highlight>, the HS<highlight><bold>1</bold></highlight> output signal is greater than CAL_PT<highlight><bold>1</bold></highlight>, then X is not in REGION A; and a further test is made to determine whether the HS<highlight><bold>2</bold></highlight> output signal is greater than calibration point <highlight><bold>2</bold></highlight> (CAL_PT<highlight><bold>2</bold></highlight>) (block <highlight><bold>116</bold></highlight>). If so, then the controller determines whether the HS<highlight><bold>1</bold></highlight> output signal is greater than calibration point <highlight><bold>3</bold></highlight> (CAL_PT<highlight><bold>3</bold></highlight>) (block <highlight><bold>118</bold></highlight>). If so, then the travel position is in REGION E and can be calculated from the positive sloped linear approximation to the HS<highlight><bold>2</bold></highlight> output signal (&ldquo;X&equals;&plus;GAIN&times;(HS<highlight><bold>2</bold></highlight>&plus;HS<highlight><bold>2</bold></highlight>_POS)&rdquo;) (block <highlight><bold>120</bold></highlight>). If not, the travel position X is deemed to be in REGION F which results in X being set to the maximum value (block <highlight><bold>122</bold></highlight>). After either blocks <highlight><bold>120</bold></highlight> or <highlight><bold>122</bold></highlight>, routine <highlight><bold>100</bold></highlight> returns. </paragraph>
<paragraph id="P-0037" lvl="0"><number>&lsqb;0037&rsqb;</number> If back at block <highlight><bold>116</bold></highlight>, the HS<highlight><bold>2</bold></highlight> output signal was less than calibration point <highlight><bold>2</bold></highlight>, then the travel position is in one of three regions B-D wherein opportunities exist to select between the two output signals HS<highlight><bold>1</bold></highlight>, HS<highlight><bold>2</bold></highlight>, as well as to update the offset values. In block <highlight><bold>124</bold></highlight>, the temporary sensed distances are calculated using each of four linear approximations that characterize the two output signals HS<highlight><bold>1</bold></highlight>, HS<highlight><bold>2</bold></highlight>: </paragraph>
<paragraph id="P-0038" lvl="1"><number>&lsqb;0038&rsqb;</number> T<highlight><bold>1</bold></highlight>P&equals;Temp_Sensed_HS<highlight><bold>1</bold></highlight>_Pos&equals;&plus;Gain&times;(HS<highlight><bold>1</bold></highlight>&plus;HS<highlight><bold>1</bold></highlight>_Pos); </paragraph>
<paragraph id="P-0039" lvl="1"><number>&lsqb;0039&rsqb;</number> T<highlight><bold>1</bold></highlight>N&equals;Temp_Sensed_HS<highlight><bold>1</bold></highlight>_Neg&equals;&minus;Gain&times;(HS<highlight><bold>1</bold></highlight>&plus;HS<highlight><bold>1</bold></highlight>_Neg); </paragraph>
<paragraph id="P-0040" lvl="1"><number>&lsqb;0040&rsqb;</number> T<highlight><bold>2</bold></highlight>P&equals;Temp_Sensed_HS<highlight><bold>2</bold></highlight>_Pos&equals;&plus;Gain&times;(HS<highlight><bold>2</bold></highlight>&plus;HS<highlight><bold>2</bold></highlight>_Pos); and </paragraph>
<paragraph id="P-0041" lvl="1"><number>&lsqb;0041&rsqb;</number> T<highlight><bold>2</bold></highlight>N&equals;Temp_Sensed_HS<highlight><bold>2</bold></highlight>_Neg&equals;&minus;Gain&times;(HS<highlight><bold>2</bold></highlight>&plus;HS<highlight><bold>2</bold></highlight>_Neg). </paragraph>
<paragraph id="P-0042" lvl="0"><number>&lsqb;0042&rsqb;</number> In order to compare which of the temporary sensed distances is closer to the actual travel position, in block <highlight><bold>126</bold></highlight> the following calibrations of the region of operation variables are made: </paragraph>
<paragraph id="P-0043" lvl="1"><number>&lsqb;0043&rsqb;</number> Reg_B&equals;ABSOLUTE(T<highlight><bold>1</bold></highlight>P&minus;T<highlight><bold>2</bold></highlight>N); </paragraph>
<paragraph id="P-0044" lvl="1"><number>&lsqb;0044&rsqb;</number> Reg_C&equals;ABSOLUTE(T<highlight><bold>1</bold></highlight>P&minus;T<highlight><bold>2</bold></highlight>P); </paragraph>
<paragraph id="P-0045" lvl="1"><number>&lsqb;0045&rsqb;</number> Reg_D&equals;ABSOLUTE(T<highlight><bold>1</bold></highlight>N&minus;T<highlight><bold>2</bold></highlight>P). </paragraph>
<paragraph id="P-0046" lvl="0"><number>&lsqb;0046&rsqb;</number> Based on these calibrations of blocks <highlight><bold>124</bold></highlight>, <highlight><bold>126</bold></highlight>, a determination is made as to whether the Region A variable (REG_B) is less than the other variables (REG_C, REG_D) (block <highlight><bold>128</bold></highlight>). If so, the travel position X is in REGION B and the travel position X is based on the positively sloped linear approximation to the HS<highlight><bold>1</bold></highlight> output signal (&ldquo;X&equals;&plus;GAIN&times;(HS<highlight><bold>1</bold></highlight>&plus;HS<highlight><bold>1</bold></highlight>_POS)&rdquo;) (block <highlight><bold>130</bold></highlight>). Then routine <highlight><bold>100</bold></highlight> returns. </paragraph>
<paragraph id="P-0047" lvl="0"><number>&lsqb;0047&rsqb;</number> If REG_B was not the least in block <highlight><bold>128</bold></highlight>, then a further determination is made as to whether region C variable (REG_C) is less than region variables D (REG_D) (block <highlight><bold>132</bold></highlight>). If so, the travel position X is in REGION C and an opportunity exists to update offset value HS<highlight><bold>2</bold></highlight>_POS. Thus, if both output signals HS<highlight><bold>1</bold></highlight> and HS<highlight><bold>2</bold></highlight> are in their linear regions, then HS<highlight><bold>2</bold></highlight>_POS&equals;&minus;(HS<highlight><bold>1</bold></highlight>&plus;HS<highlight><bold>1</bold></highlight>_POS) (block <highlight><bold>134</bold></highlight>). Then a further determination is made as to which output signal HS<highlight><bold>1</bold></highlight>, HS<highlight><bold>2</bold></highlight> should be used for travel determination. In particular, a determination is made as to whether the output signal HS<highlight><bold>2</bold></highlight> is less than a calibration point <highlight><bold>4</bold></highlight> (CAL_PT<highlight><bold>4</bold></highlight>) (block <highlight><bold>136</bold></highlight>). If so, travel position X is based on the positive sloped linear approximation to the output signal HS<highlight><bold>1</bold></highlight> (&ldquo;X&equals;GAIN&times;(HS<highlight><bold>1</bold></highlight>&plus;HS<highlight><bold>1</bold></highlight>_POS)&rdquo;) of block <highlight><bold>130</bold></highlight>. Routine <highlight><bold>100</bold></highlight> then returns. </paragraph>
<paragraph id="P-0048" lvl="0"><number>&lsqb;0048&rsqb;</number> If back at block <highlight><bold>136</bold></highlight> output signal HS<highlight><bold>2</bold></highlight> was not less than CAL_PT<highlight><bold>4</bold></highlight>, then the positive slope linear approximation to output signal HS<highlight><bold>2</bold></highlight> is used (&ldquo;X&equals;&plus;GAIN&times;(HS<highlight><bold>2</bold></highlight>&plus;HS<highlight><bold>2</bold></highlight>_POS)&rdquo;) (block <highlight><bold>138</bold></highlight>). Routine <highlight><bold>100</bold></highlight> then returns. </paragraph>
<paragraph id="P-0049" lvl="0"><number>&lsqb;0049&rsqb;</number> If back at block <highlight><bold>132</bold></highlight>, region C variable was not less than region variables D, then travel position X is in region D which provides an opportunity to possibly update offset value HS<highlight><bold>1</bold></highlight>_NEG (block <highlight><bold>142</bold></highlight>). The update is made if the value of output signal HS<highlight><bold>2</bold></highlight> is within a range indicative of linear operation. Then HS<highlight><bold>1</bold></highlight>_NEG&equals;&minus;(HS<highlight><bold>2</bold></highlight>&plus;HS<highlight><bold>2</bold></highlight>_POS). Thereafter, travel X position is based on the positive slope linear approximation to the output signal HS<highlight><bold>2</bold></highlight> of block <highlight><bold>138</bold></highlight>. Routine <highlight><bold>100</bold></highlight> then returns. </paragraph>
<paragraph id="P-0050" lvl="0"><number>&lsqb;0050&rsqb;</number> With reference to <cross-reference target="DRAWINGS">FIGS. 7, 8A</cross-reference> and <highlight><bold>8</bold></highlight>B, an alternative sequence of operations, depicted as routine <highlight><bold>200</bold></highlight> in <cross-reference target="DRAWINGS">FIG. 8</cross-reference>A, advantageously determines master cylinder travel with a four region approach depicted in <cross-reference target="DRAWINGS">FIG. 7</cross-reference>. The approach of selecting the appropriate linear approximation from the two output signals HS<highlight><bold>1</bold></highlight>, HS<highlight><bold>2</bold></highlight> includes both negatively sloped portions of the second output signal HS<highlight><bold>2</bold></highlight> to extend the range of sensed travel. </paragraph>
<paragraph id="P-0051" lvl="0"><number>&lsqb;0051&rsqb;</number> With particular reference to FIGS. <highlight><bold>8</bold></highlight>A-<highlight><bold>8</bold></highlight>B, the routine <highlight><bold>200</bold></highlight> begins by reading the Hall Effect sensors (HS<highlight><bold>1</bold></highlight>, HS<highlight><bold>2</bold></highlight>), that are spaced approximately 11-15 mm apart (block <highlight><bold>202</bold></highlight>). The sensor signals are bound to the calibration limits of the transducers (block <highlight><bold>204</bold></highlight>). Then, a determination is made as to whether any braking is occurring by sensing braking signals made available by the braking system (block <highlight><bold>206</bold></highlight>). Typically, signals are available from a brake switch and a master cylinder pressure transducer that allow verification of proper sensor operation. In addition, the braking system may command braking when the driver has not depressed the brake pedal, such as for vehicle traction control. </paragraph>
<paragraph id="P-0052" lvl="0"><number>&lsqb;0052&rsqb;</number> If no braking signals are sensed in block <highlight><bold>206</bold></highlight>, then an opportunity exists to update the offset values HS<highlight><bold>2</bold></highlight>_NEG for the linear approximations for negative slope portion of the HS<highlight><bold>2</bold></highlight> output signal (block <highlight><bold>210</bold></highlight>). Before updating the offsets, a check is first made that the current value has changed more than a predetermined noise calibration value (block <highlight><bold>208</bold></highlight>). Then, routine <highlight><bold>200</bold></highlight> returns to await the next update interval. </paragraph>
<paragraph id="P-0053" lvl="0"><number>&lsqb;0053&rsqb;</number> If braking is sensed in block <highlight><bold>206</bold></highlight>, then a further determination is made as to whether the driver is requesting braking (block <highlight><bold>210</bold></highlight>), as may be available from the braking system as a switched signal or may be based on a sensor signal above a threshold; if not, routine <highlight><bold>200</bold></highlight> returns. However, if braking is requested by the driver (i.e., the brake pedal is depressed), then the travel position X is determined. </paragraph>
<paragraph id="P-0054" lvl="0"><number>&lsqb;0054&rsqb;</number> In block <highlight><bold>212</bold></highlight>, the temporary sensed distances are calculated using each of five linear approximations that characterize the two output signals HS<highlight><bold>1</bold></highlight>, HS<highlight><bold>2</bold></highlight>: </paragraph>
<paragraph id="P-0055" lvl="1"><number>&lsqb;0055&rsqb;</number> T<highlight><bold>1</bold></highlight>P&equals;Temp_Sensed_HS<highlight><bold>1</bold></highlight>_Pos&equals;&plus;Gain_<highlight><bold>1</bold></highlight>&times;(HS<highlight><bold>1</bold></highlight>&plus;HS<highlight><bold>1</bold></highlight>_Pos); </paragraph>
<paragraph id="P-0056" lvl="1"><number>&lsqb;0056&rsqb;</number> T<highlight><bold>1</bold></highlight>N&equals;Temp_Sensed_HS<highlight><bold>1</bold></highlight>_Neg&equals;&minus;Gain_<highlight><bold>2</bold></highlight>&times;(HS<highlight><bold>1</bold></highlight>&plus;HS<highlight><bold>1</bold></highlight>_Neg); </paragraph>
<paragraph id="P-0057" lvl="1"><number>&lsqb;0057&rsqb;</number> T<highlight><bold>2</bold></highlight>P&equals;Temp_Sensed_HS<highlight><bold>2</bold></highlight>_Pos&equals;&plus;Gain_<highlight><bold>1</bold></highlight>&times;(HS<highlight><bold>2</bold></highlight>&plus;HS<highlight><bold>2</bold></highlight>_Pos); </paragraph>
<paragraph id="P-0058" lvl="1"><number>&lsqb;0058&rsqb;</number> T<highlight><bold>2</bold></highlight>N&equals;Temp_Sensed_HS<highlight><bold>2</bold></highlight>_Neg&equals;&minus;Gain_<highlight><bold>2</bold></highlight>&times;(HS<highlight><bold>2</bold></highlight>&plus;HS<highlight><bold>2</bold></highlight>_Neg); and </paragraph>
<paragraph id="P-0059" lvl="1"><number>&lsqb;0059&rsqb;</number> T<highlight><bold>2</bold></highlight>N<highlight><bold>2</bold></highlight>&equals;Temp_Sensed_HS<highlight><bold>2</bold></highlight>_Neg_<highlight><bold>2</bold></highlight>&equals;&minus;Gain_<highlight><bold>2</bold></highlight>&times;(HS<highlight><bold>2</bold></highlight>&plus;HS<highlight><bold>2</bold></highlight>_Neg_<highlight><bold>2</bold></highlight>); </paragraph>
<paragraph id="P-0060" lvl="7"><number>&lsqb;0060&rsqb;</number> wherein Gain_<highlight><bold>1</bold></highlight> corresponds to the magnitude of the positively sloped portions of the output signals (e.g., 3.5 mm/V) and Gain_<highlight><bold>2</bold></highlight> corresponds to the magnitude of the negatively-sloped portions of the output signals (e.g., 6.1 mm/V). The difference in gain magnitudes for the positively and negatively sloped portions is due to the use of a more accurate slope for the negatively sloped portion. Thereby, the &ldquo;&minus;Gain_<highlight><bold>2</bold></highlight>&rdquo; of negatively-sloped portions may be additionally used for travel determination, whereas the previously described approach in FIGS. <highlight><bold>5</bold></highlight>-<highlight><bold>6</bold></highlight> used the negatively-sloped portions only for area determination. </paragraph>
<paragraph id="P-0061" lvl="0"><number>&lsqb;0061&rsqb;</number> In order to compare which of the temporary sensed distances is closer to the actual travel position, in block <highlight><bold>214</bold></highlight> the following calibrations of the region of operation variables are made: </paragraph>
<paragraph id="P-0062" lvl="1"><number>&lsqb;0062&rsqb;</number> Reg_A&equals;ABSOLUTE(T<highlight><bold>1</bold></highlight>P&minus;T<highlight><bold>2</bold></highlight>N); </paragraph>
<paragraph id="P-0063" lvl="1"><number>&lsqb;0063&rsqb;</number> Reg_B&equals;ABSOLUTE(T<highlight><bold>1</bold></highlight>P&minus;T<highlight><bold>2</bold></highlight>P); </paragraph>
<paragraph id="P-0064" lvl="1"><number>&lsqb;0064&rsqb;</number> Reg_C&equals;ABSOLUTE(T<highlight><bold>1</bold></highlight>N&minus;T<highlight><bold>2</bold></highlight>P); and </paragraph>
<paragraph id="P-0065" lvl="1"><number>&lsqb;0065&rsqb;</number> Reg_D&equals;ABSOLUTE(T<highlight><bold>1</bold></highlight>N&minus;T<highlight><bold>2</bold></highlight>N<highlight><bold>2</bold></highlight>). </paragraph>
<paragraph id="P-0066" lvl="7"><number>&lsqb;0066&rsqb;</number> Then, the output signals HS<highlight><bold>1</bold></highlight>, HS<highlight><bold>2</bold></highlight> are compared to lower threshold CAL_PT<highlight><bold>1</bold></highlight> and upper threshold CAL_PT<highlight><bold>2</bold></highlight>, with a usable output signal designated if between these thresholds (block <highlight><bold>216</bold></highlight>). </paragraph>
<paragraph id="P-0067" lvl="0"><number>&lsqb;0067&rsqb;</number> With particular reference to <cross-reference target="DRAWINGS">FIG. 8</cross-reference>B, thereafter, a series of determinations are made based on the region of operation variables (REG_A&minus;REG_D) to determine which of the four regions A-D are appropriate for determining travel. In particular, if REG_A is less than the other three variables (block <highlight><bold>218</bold></highlight>), then the Region A is determined. Thus, if HS<highlight><bold>2</bold></highlight> is usable (block <highlight><bold>220</bold></highlight>) and HS<highlight><bold>1</bold></highlight> is usable (block <highlight><bold>222</bold></highlight>), then an opportunity exists to update the offsets HS<highlight><bold>1</bold></highlight>_POS and HS<highlight><bold>2</bold></highlight>_POS for the respective linear approximations for the respective positively sloped portions of each output signal HS<highlight><bold>1</bold></highlight>, HS<highlight><bold>2</bold></highlight> (block <highlight><bold>224</bold></highlight>): </paragraph>
<paragraph id="P-0068" lvl="1"><number>&lsqb;0068&rsqb;</number> HS<highlight><bold>1</bold></highlight>_POS&equals;(T<highlight><bold>2</bold></highlight>N)/(&minus;Gain_<highlight><bold>2</bold></highlight>)&minus;HS<highlight><bold>1</bold></highlight>; </paragraph>
<paragraph id="P-0069" lvl="1"><number>&lsqb;0069&rsqb;</number> HS<highlight><bold>2</bold></highlight>_POS&equals;(T<highlight><bold>2</bold></highlight>N&plus;Spacing)/(Gain_<highlight><bold>1</bold></highlight>)&minus;HS<highlight><bold>1</bold></highlight>; </paragraph>
<paragraph id="P-0070" lvl="7"><number>&lsqb;0070&rsqb;</number> wherein &ldquo;Spacing&rdquo; is the spacing between the transducers. Thereafter, or if HS<highlight><bold>1</bold></highlight> was not usable in block <highlight><bold>222</bold></highlight>, then the travel determination X is based on left-most negatively-sloped portion of output signal HS<highlight><bold>2</bold></highlight> (block <highlight><bold>226</bold></highlight>): </paragraph>
<paragraph id="P-0071" lvl="1"><number>&lsqb;0071&rsqb;</number> X&equals;&minus;GAIN_<highlight><bold>2</bold></highlight>&times;(HS<highlight><bold>2</bold></highlight>&plus;HS<highlight><bold>2</bold></highlight>_NEG). </paragraph>
<paragraph id="P-0072" lvl="7"><number>&lsqb;0072&rsqb;</number> Returning back to block <highlight><bold>220</bold></highlight>, if in Region A but output signal HS<highlight><bold>2</bold></highlight> is not usable, then the travel determination X is based on the positively sloped portion of output signal HS<highlight><bold>1</bold></highlight> (block <highlight><bold>228</bold></highlight>): </paragraph>
<paragraph id="P-0073" lvl="1"><number>&lsqb;0073&rsqb;</number> X&equals;GAIN_<highlight><bold>1</bold></highlight>&times;(HS<highlight><bold>1</bold></highlight>&plus;HS<highlight><bold>1</bold></highlight>_POS). </paragraph>
<paragraph id="P-0074" lvl="7"><number>&lsqb;0074&rsqb;</number> After X is set in either block <highlight><bold>226</bold></highlight> or <highlight><bold>228</bold></highlight>, routine <highlight><bold>200</bold></highlight> returns to await the next update period. </paragraph>
<paragraph id="P-0075" lvl="0"><number>&lsqb;0075&rsqb;</number> If not deemed to be in Region A in block <highlight><bold>218</bold></highlight>, then variable REG_B is compared to variables REG_C, REG_D. If REG_B is less, then travel determination is based on being in Region B (block <highlight><bold>230</bold></highlight>). Thus, if output signal HS<highlight><bold>1</bold></highlight> is usable (block <highlight><bold>232</bold></highlight>), then the travel determination X is based on the positively-sloped portion of output signal HS<highlight><bold>2</bold></highlight> (block <highlight><bold>234</bold></highlight>): </paragraph>
<paragraph id="P-0076" lvl="1"><number>&lsqb;0076&rsqb;</number> X&equals;Gain_<highlight><bold>1</bold></highlight>&times;(HS<highlight><bold>2</bold></highlight>&plus;HS<highlight><bold>2</bold></highlight>_POS). </paragraph>
<paragraph id="P-0077" lvl="7"><number>&lsqb;0077&rsqb;</number> Else, the travel determination X is based on the positively-sloped portion of output signal HS<highlight><bold>1</bold></highlight> (block <highlight><bold>236</bold></highlight>): </paragraph>
<paragraph id="P-0078" lvl="1"><number>&lsqb;0078&rsqb;</number> X&equals;Gain_<highlight><bold>1</bold></highlight>&times;(HS<highlight><bold>1</bold></highlight>&plus;HS<highlight><bold>1</bold></highlight>_POS). </paragraph>
<paragraph id="P-0079" lvl="7"><number>&lsqb;0079&rsqb;</number> After X is set in either block <highlight><bold>234</bold></highlight> or <highlight><bold>236</bold></highlight>, routine <highlight><bold>200</bold></highlight> returns to await the next update period. </paragraph>
<paragraph id="P-0080" lvl="0"><number>&lsqb;0080&rsqb;</number> If not deemed to be in Region B in block <highlight><bold>230</bold></highlight>, then variable REG_C is compared to variable REG_D. If REG_C is less, then travel determination is based on being in Region C (block <highlight><bold>236</bold></highlight>). Thus, if output signal HS<highlight><bold>2</bold></highlight> is usable (block <highlight><bold>238</bold></highlight>), then the travel determination X is based on the positively-sloped portion of output signal HS<highlight><bold>2</bold></highlight> (block <highlight><bold>240</bold></highlight>): </paragraph>
<paragraph id="P-0081" lvl="1"><number>&lsqb;0081&rsqb;</number> X&equals;Gain_<highlight><bold>1</bold></highlight>&times;(HS<highlight><bold>2</bold></highlight>&plus;HS<highlight><bold>2</bold></highlight>_POS). </paragraph>
<paragraph id="P-0082" lvl="7"><number>&lsqb;0082&rsqb;</number> Else, the travel determination X is based on the right-most negatively-sloped portion of output signal HS<highlight><bold>1</bold></highlight> (block <highlight><bold>242</bold></highlight>): </paragraph>
<paragraph id="P-0083" lvl="1"><number>&lsqb;0083&rsqb;</number> X&equals;&minus;Gain_<highlight><bold>2</bold></highlight>&times;(HS<highlight><bold>1</bold></highlight>&plus;HS<highlight><bold>1</bold></highlight>_NEG). </paragraph>
<paragraph id="P-0084" lvl="7"><number>&lsqb;0084&rsqb;</number> Returning to block <highlight><bold>240</bold></highlight>, an opportunity exists for updating the offsets HS<highlight><bold>1</bold></highlight>_NEG, HS<highlight><bold>2</bold></highlight>_NEG_<highlight><bold>2</bold></highlight> for the right-most negatively-sloped portions of output signals HS<highlight><bold>1</bold></highlight> and HS<highlight><bold>2</bold></highlight>. In particular, if HS<highlight><bold>1</bold></highlight> is usable (block <highlight><bold>244</bold></highlight>) and greater than a threshold CAL_PT<highlight><bold>3</bold></highlight> (block <highlight><bold>246</bold></highlight>), then output signal HS<highlight><bold>2</bold></highlight> is approximately linear and positively sloped (block <highlight><bold>248</bold></highlight>): </paragraph>
<paragraph id="P-0085" lvl="1"><number>&lsqb;0085&rsqb;</number> HS<highlight><bold>1</bold></highlight>_NEG&equals;(T<highlight><bold>2</bold></highlight>P)/(&minus;Gain_<highlight><bold>2</bold></highlight>)&minus;(HS<highlight><bold>1</bold></highlight>); </paragraph>
<paragraph id="P-0086" lvl="1"><number>&lsqb;0086&rsqb;</number> HS<highlight><bold>2</bold></highlight>_NEG_<highlight><bold>2</bold></highlight>&equals;(T<highlight><bold>2</bold></highlight>P&plus;Spacing)/(&minus;Gain_<highlight><bold>2</bold></highlight>)&minus;(HS<highlight><bold>1</bold></highlight>). </paragraph>
<paragraph id="P-0087" lvl="7"><number>&lsqb;0087&rsqb;</number> Routine <highlight><bold>200</bold></highlight> returns to await the next update period after either X is set in block <highlight><bold>242</bold></highlight>, output signal HS<highlight><bold>1</bold></highlight> is not usable in block <highlight><bold>244</bold></highlight>, output signal HS<highlight><bold>1</bold></highlight> is not above CAL_PT<highlight><bold>3</bold></highlight> in block <highlight><bold>246</bold></highlight>, or after updating the offsets in block <highlight><bold>248</bold></highlight>. </paragraph>
<paragraph id="P-0088" lvl="0"><number>&lsqb;0088&rsqb;</number> If not deemed to be in Region C in block <highlight><bold>236</bold></highlight>, then travel determination is based on being in Region D. Thus, if output signal HS<highlight><bold>2</bold></highlight> is usable (block <highlight><bold>250</bold></highlight>), then the travel determination X is based on the right-most negatively-sloped portion of output signal HS<highlight><bold>2</bold></highlight> (block <highlight><bold>252</bold></highlight>): </paragraph>
<paragraph id="P-0089" lvl="1"><number>&lsqb;0089&rsqb;</number> X&equals;&minus;Gain_<highlight><bold>2</bold></highlight>&times;(HS<highlight><bold>2</bold></highlight>&plus;HS<highlight><bold>2</bold></highlight>_NEG_<highlight><bold>2</bold></highlight>). </paragraph>
<paragraph id="P-0090" lvl="7"><number>&lsqb;0090&rsqb;</number> Else, the travel determination X is based on the right-most negatively-sloped portion of output signal HS<highlight><bold>1</bold></highlight> (block <highlight><bold>254</bold></highlight>): </paragraph>
<paragraph id="P-0091" lvl="1"><number>&lsqb;0091&rsqb;</number> X&equals;&minus;Gain_<highlight><bold>2</bold></highlight>&times;(HS<highlight><bold>1</bold></highlight>&plus;HS<highlight><bold>1</bold></highlight>_NEG). </paragraph>
<paragraph id="P-0092" lvl="7"><number>&lsqb;0092&rsqb;</number> Routine <highlight><bold>200</bold></highlight> returns to await the next update period after either X is set in block <highlight><bold>252</bold></highlight>, <highlight><bold>254</bold></highlight>. </paragraph>
<paragraph id="P-0093" lvl="0"><number>&lsqb;0093&rsqb;</number> In use, a driver depresses the brake pedal of the vehicle, causing a push rod <highlight><bold>31</bold></highlight> to the braking master cylinder <highlight><bold>30</bold></highlight> to move a front piston <highlight><bold>78</bold></highlight> and its attached magnet <highlight><bold>76</bold></highlight> inwardly. Outside of the magnetically permeable master cylinder body <highlight><bold>68</bold></highlight>, a plurality of Hall Effect transducers <highlight><bold>92</bold></highlight>, <highlight><bold>94</bold></highlight> aligned with the direction of travel <highlight><bold>35</bold></highlight> sense the magnetic field of the magnet <highlight><bold>76</bold></highlight>. Signal conditioning circuit <highlight><bold>96</bold></highlight> compares output signals HS<highlight><bold>1</bold></highlight>, HS<highlight><bold>2</bold></highlight> from the transducers <highlight><bold>92</bold></highlight>, <highlight><bold>94</bold></highlight> to several calibration points (voltage thresholds) to determine which output signal is within a linear operating region and outputs a travel position X for use in the braking system based on a linear approximation to the output signal for the determined operating region. </paragraph>
<paragraph id="P-0094" lvl="0"><number>&lsqb;0094&rsqb;</number> By virtue of the foregoing, a master cylinder <highlight><bold>30</bold></highlight> integrally measures a brake pedal input with an integral, noncontact sensor, in particular, dual Hall Effect transducers <highlight><bold>92</bold></highlight>, <highlight><bold>94</bold></highlight>, increasing reliability and simplifying integration of an automotive braking system. Furthermore, longitudinal spacing of the transducers <highlight><bold>92</bold></highlight>, <highlight><bold>94</bold></highlight> advantageously enables an efficient calibration of travel position based on linear approximations to the output signals of the transducers. </paragraph>
<paragraph id="P-0095" lvl="0"><number>&lsqb;0095&rsqb;</number> While the present invention has been illustrated by a description of various embodiments and while these embodiments have been described in considerable detail, it is not the intention of the applicants to restrict or in any way limit the scope of the appended claims to such detail. Additional advantages and modifications will readily appear to those skilled in the art. The invention in its broader aspects is, therefore, not limited to the specific details, representative apparatus and method, and illustrative examples shown and described. Accordingly, departures may be made from such details without departing from the spirit or scope of applicant&apos;s general inventive concept.</paragraph>
</section>
</detailed-description>
</subdoc-description>
<subdoc-claims>
<heading lvl="1">What is claimed is: </heading>
<claim id="CLM-00001">
<claim-text><highlight><bold>1</bold></highlight>. A braking master cylinder for an automotive electrohydraulic braking system that responds to operation of a brake pedal, the braking master cylinder comprising: 
<claim-text>a cylinder housing having a main bore; </claim-text>
<claim-text>a piston slidingly received for movement in the main bore and longitudinally positioned by the brake pedal; </claim-text>
<claim-text>a magnet coupled to the piston; and </claim-text>
<claim-text>a noncontact sensor coupled to the cylinder housing for generating a position signal corresponding to proximity of the noncontact sensor to the magnet. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00002">
<claim-text><highlight><bold>2</bold></highlight>. The braking master cylinder of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein the noncontact sensor comprises at least two Hall Effect transducers longitudinally spaced and proximate to the main bore. </claim-text>
</claim>
<claim id="CLM-00003">
<claim-text><highlight><bold>3</bold></highlight>. The braking master cylinder of <dependent-claim-reference depends_on="CLM-00002">claim 2</dependent-claim-reference>, wherein at least two Hall Effect transducers are longitudinally spaced about 11 to 15 mm for detecting a piston travel of about 22-30 mm. </claim-text>
</claim>
<claim id="CLM-00004">
<claim-text><highlight><bold>4</bold></highlight>. The braking master cylinder of <dependent-claim-reference depends_on="CLM-00002">claim 2</dependent-claim-reference>, wherein each Hall Effect transducer produces an output signal having a positively sloped linear region and a negatively sloped linear region, the longitudinal spacing of adjacent transducers selected to have at least one linear region available from at least one transducer for each position of the magnet. </claim-text>
</claim>
<claim id="CLM-00005">
<claim-text><highlight><bold>5</bold></highlight>. The braking master cylinder of <dependent-claim-reference depends_on="CLM-00004">claim 4</dependent-claim-reference>, further comprising signal conditioning circuitry responsive to output signals from the at least two Hall Effect transducers to select a more linear output from the at least two transducer signals and to output a position signal corresponding to the more linear output. </claim-text>
</claim>
<claim id="CLM-00006">
<claim-text><highlight><bold>6</bold></highlight>. A braking master cylinder for an automotive electrohydraulic braking system that responds to operation of a brake pedal, the braking master cylinder comprising: 
<claim-text>a cylinder housing having a main bore and including a nonferrous portion. </claim-text>
<claim-text>a piston slidingly received for movement in the main bore and longitudinally positioned by the brake pedal, the piston having a magnetic portion positioned to produce a magnetic field through the nonferrous portion of the cylinder housing; </claim-text>
<claim-text>at least two Hall Effect transducers attached to the cylinder housing and longitudinally spaced to sense the magnetic field, each transducer producing an output signal having a positively sloped linear region and a negatively sloped linear region, the longitudinal spacing of adjacent transducers selected to have at least one linear region available from at least one transducer for each position of the magnetic portion of the piston; and </claim-text>
<claim-text>signal conditioning circuitry responsive to output signals from at least two Hall Effect transducers to select a more linear output from the at least two transducer signals and to output a position signal corresponding to the more linear output. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00007">
<claim-text><highlight><bold>7</bold></highlight>. A method of determining pedal travel of a brake pedal in a vehicle having a braking master cylinder of an electrohydraulic braking system, the braking master cylinder having a piston slidingly received within a main bore of a cylinder housing and positioned by the brake pedal, the method comprising: 
<claim-text>sensing a magnetic field from a magnetic portion of the piston with a first and second Hall Effect transducer spaced along a direction of travel of the piston, each transducer producing an output signal with at least one linear portion, the spacing selected such that a selected linear portion of an output signal is available from at least one of the first and second Hall Effect transducers for each position of the piston; </claim-text>
<claim-text>selecting a linear output from one of the at least two output signals by comparing at least one of the two output signals to a threshold; and </claim-text>
<claim-text>generating a position signal for the piston based on a selected linear approximation for the selected linear portion of the output signal. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00008">
<claim-text><highlight><bold>8</bold></highlight>. A method of determining travel of a member coupled to a magnet comprising: 
<claim-text>sensing a magnetic field from the magnet with a first and second Hall Effect transducer spaced along a direction of travel of the member, each transducer producing a respective output signal with at least one linear portion, the spacing between transducers selected such that a selected linear portion of the output signal is available from at least one of the first and second Hall Effect transducers for each position of the piston; </claim-text>
<claim-text>determining a linear approximation as a function of travel for each linear portion of each output signal that is a function of a sensor gain and an offset; </claim-text>
<claim-text>determining a region of operation by solving each linear approximation function with the related output signal and selecting a linear approximation function with a lower magnitude; and </claim-text>
<claim-text>generating a signal representing the travel of the member by solving the selected linear approximation for travel.</claim-text>
</claim-text>
</claim>
</subdoc-claims>
<subdoc-drawings id="DRAWINGS">
<heading lvl="0" align="CENTER">Drawings</heading>
<representative-figure>4</representative-figure>
<figure id="figure-D00000">
<image id="EMI-D00000" file="US20030000375A1-20030102-D00000.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00001">
<image id="EMI-D00001" file="US20030000375A1-20030102-D00001.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00002">
<image id="EMI-D00002" file="US20030000375A1-20030102-D00002.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00003">
<image id="EMI-D00003" file="US20030000375A1-20030102-D00003.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00004">
<image id="EMI-D00004" file="US20030000375A1-20030102-D00004.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00005">
<image id="EMI-D00005" file="US20030000375A1-20030102-D00005.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00006">
<image id="EMI-D00006" file="US20030000375A1-20030102-D00006.TIF" imf="TIFF" ti="DR"/>
</figure>
</subdoc-drawings>
</patent-application-publication>
