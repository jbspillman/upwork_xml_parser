<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE patent-application-publication SYSTEM "pap-v16-2002-01-01.dtd" [
<!ENTITY US20030002200A1-20030102-D00000.TIF SYSTEM "US20030002200A1-20030102-D00000.TIF" NDATA TIF>
<!ENTITY US20030002200A1-20030102-D00001.TIF SYSTEM "US20030002200A1-20030102-D00001.TIF" NDATA TIF>
<!ENTITY US20030002200A1-20030102-D00002.TIF SYSTEM "US20030002200A1-20030102-D00002.TIF" NDATA TIF>
<!ENTITY US20030002200A1-20030102-D00003.TIF SYSTEM "US20030002200A1-20030102-D00003.TIF" NDATA TIF>
<!ENTITY US20030002200A1-20030102-D00004.TIF SYSTEM "US20030002200A1-20030102-D00004.TIF" NDATA TIF>
<!ENTITY US20030002200A1-20030102-D00005.TIF SYSTEM "US20030002200A1-20030102-D00005.TIF" NDATA TIF>
<!ENTITY US20030002200A1-20030102-D00006.TIF SYSTEM "US20030002200A1-20030102-D00006.TIF" NDATA TIF>
<!ENTITY US20030002200A1-20030102-D00007.TIF SYSTEM "US20030002200A1-20030102-D00007.TIF" NDATA TIF>
]>
<patent-application-publication>
<subdoc-bibliographic-information>
<document-id>
<doc-number>20030002200</doc-number>
<kind-code>A1</kind-code>
<document-date>20030102</document-date>
</document-id>
<publication-filing-type>new</publication-filing-type>
<domestic-filing-data>
<application-number>
<doc-number>09928415</doc-number>
</application-number>
<application-number-series-code>09</application-number-series-code>
<filing-date>20010814</filing-date>
</domestic-filing-data>
<foreign-priority-data>
<priority-application-number>
<doc-number>2001-195693</doc-number>
</priority-application-number>
<filing-date>20010628</filing-date>
<country-code>JP</country-code>
</foreign-priority-data>
<technical-information>
<classification-ipc>
<classification-ipc-primary>
<ipc>G11B005/596</ipc>
</classification-ipc-primary>
<classification-ipc-secondary>
<ipc>G11B015/04</ipc>
</classification-ipc-secondary>
<classification-ipc-edition>07</classification-ipc-edition>
</classification-ipc>
<classification-us>
<classification-us-primary>
<uspc>
<class>360</class>
<subclass>077040</subclass>
</uspc>
</classification-us-primary>
<classification-us-secondary>
<uspc>
<class>360</class>
<subclass>060000</subclass>
</uspc>
</classification-us-secondary>
</classification-us>
<title-of-invention>Magnetic disk drive</title-of-invention>
</technical-information>
<inventors>
<first-named-inventor>
<name>
<given-name>Kazuhisa</given-name>
<family-name>Shishida</family-name>
</name>
<residence>
<residence-non-us>
<city>Odawara</city>
<country-code>JP</country-code>
</residence-non-us>
</residence>
<authority-applicant>INV</authority-applicant>
</first-named-inventor>
<inventor>
<name>
<given-name>Yosuke</given-name>
<family-name>Seo</family-name>
</name>
<residence>
<residence-non-us>
<city>Sagamihara</city>
<country-code>JP</country-code>
</residence-non-us>
</residence>
<authority-applicant>INV</authority-applicant>
</inventor>
<inventor>
<name>
<given-name>Takahiro</given-name>
<family-name>Inoue</family-name>
</name>
<residence>
<residence-non-us>
<city>Odawara</city>
<country-code>JP</country-code>
</residence-non-us>
</residence>
<authority-applicant>INV</authority-applicant>
</inventor>
<inventor>
<name>
<given-name>Makoto</given-name>
<family-name>Horisaki</family-name>
</name>
<residence>
<residence-non-us>
<city>Odawara</city>
<country-code>JP</country-code>
</residence-non-us>
</residence>
<authority-applicant>INV</authority-applicant>
</inventor>
<inventor>
<name>
<given-name>Youichi</given-name>
<family-name>Kusagaya</family-name>
</name>
<residence>
<residence-non-us>
<city>Mishima</city>
<country-code>JP</country-code>
</residence-non-us>
</residence>
<authority-applicant>INV</authority-applicant>
</inventor>
</inventors>
<correspondence-address>
<name-1>MATTINGLY, STANGER &amp; MALUR, P.C.</name-1>
<name-2></name-2>
<address>
<address-1>1800 DIAGONAL ROAD, SUITE 370</address-1>
<city>ALEXADRIA</city>
<state>VA</state>
<postalcode>22314</postalcode>
<country>
<country-code>US</country-code>
</country>
</address>
</correspondence-address>
</subdoc-bibliographic-information>
<subdoc-abstract>
<paragraph id="A-0001" lvl="0">In order to achieve narrow track pitch by measuring, storing and compensating common average values for repeatable runout components between adjacent tracks in a head positioning control system for a magnetic disk drive, there are provided: means for calculating a compensated signal for the average value of the repeatable runout of each servo sector of at least two tracks of servo information reproduced from a magnetic disk, on the basis of an inverse function of the sensitivity characteristics of the tracking control system; means for storing the calculated signal; and means for compensating the servo signal on the basis of this signal. </paragraph>
</subdoc-abstract>
<subdoc-description>
<summary-of-invention>
<section>
<heading lvl="1">BACKGROUND OF THE INVENTION </heading>
<paragraph id="P-0001" lvl="0"><number>&lsqb;0001&rsqb;</number> 1. Field of the Invention </paragraph>
<paragraph id="P-0002" lvl="0"><number>&lsqb;0002&rsqb;</number> The present invention relates to magnetic head positioning means for a magnetic disk drive, and more particularly, to magnetic head positioning means for a sector servo system magnetic disk drive wherein servo information is recorded on a magnetic disk before being incorporated into a magnetic disk drive. </paragraph>
<paragraph id="P-0003" lvl="0"><number>&lsqb;0003&rsqb;</number> 2. Description of the Related Art </paragraph>
<paragraph id="P-0004" lvl="0"><number>&lsqb;0004&rsqb;</number> Conventionally, servo information is stored onto a magnetic disk after the magnetic disk has been installed in a magnetic disk drive. Accordingly, there has been a requirement for magnetic disk drives to have a function for performing high-precision servo information recording, in order to meet demands for narrowing of servo tracks. As a result, it is necessary to provide a high-precision positioning mechanism and hence the magnetic disk drive becomes expensive. </paragraph>
<paragraph id="P-0005" lvl="0"><number>&lsqb;0005&rsqb;</number> On the other hand, one technique for improving positioning characteristics in order to achieve narrowing of servo tracks is a system as disclosed in Japanese Patent Laid-open No.(Hei)9-282820 which compensates for the repeatable runout components in the servo signal which are generated when servo information is written to a magnetic disk. In this conventional compensating system, the repeatable runout components are measured and compensated for. </paragraph>
<paragraph id="P-0006" lvl="0"><number>&lsqb;0006&rsqb;</number> However, in order to counteract repeatable runout components caused by the excitation of the spindle motor which rotates the magnetic disk, or by deformation of the magnetic disk, these components being particularly notable when servo information is recorded onto the magnetic disk by means of this system before installing the disk in a magnetic disk drive, a large memory space is required because of the need to store compensation values for a large number of tracks. </paragraph>
</section>
<section>
<heading lvl="1">SUMMARY OF THE INVENTION </heading>
<paragraph id="P-0007" lvl="0"><number>&lsqb;0007&rsqb;</number> The system which measures and stores repeatable runout components for each servo sector as disclosed in the prior art is not desirable with regard to achieving an inexpensive magnetic disk drive, since it requires a large memory volume to store the information used in compensating the repeatable runout components across all servo tracks. </paragraph>
<paragraph id="P-0008" lvl="0"><number>&lsqb;0008&rsqb;</number> It is also possible to conceive of a system wherein specific track data is stored in order to restrict the memory volume used to store the repeatable runout compensation values, but this is not desirable from the viewpoint of improving location accuracy, as the repeatable runout components generally vary between different tracks. </paragraph>
<paragraph id="P-0009" lvl="0"><number>&lsqb;0009&rsqb;</number> Therefore, the present invention provides a magnetic disk drive having means for positioning a magnetic head in a highly accurate manner, by compensating for the average value of repeatable runout components which are particularly notable when servo information is recorded to a magnetic disk before the disk is installed in a magnetic disk drive. </paragraph>
<paragraph id="P-0010" lvl="0"><number>&lsqb;0010&rsqb;</number> In order to resolve the aforementioned problem, the present invention is a magnetic disk drive comprising means for measuring the average value of the repeatable runout components for each servo sector across at least two or more tracks, and means for removing repeatable runout components from the servo information on the basis of this measurement value, or means for adjusting the slice level used to judge when to halt data recording, if there is a large error in positioning during data recording.</paragraph>
</section>
</summary-of-invention>
<brief-description-of-drawings>
<section>
<heading lvl="1">BRIEF DESCRIPTION OF THE DRAWINGS </heading>
<paragraph id="P-0011" lvl="0"><number>&lsqb;0011&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1</cross-reference> is a diagram showing one embodiment of the present invention; </paragraph>
<paragraph id="P-0012" lvl="0"><number>&lsqb;0012&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 2</cross-reference> is an algorithm for measuring a compensation value for the average value of repeatable runout according to the present invention; </paragraph>
<paragraph id="P-0013" lvl="0"><number>&lsqb;0013&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3</cross-reference> is an explanatory diagram of a measurement zone for the compensation value for the average value of repeatable runout according to the present invention ; </paragraph>
<paragraph id="P-0014" lvl="0"><number>&lsqb;0014&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 4</cross-reference> is a block diagram of tracking control system for recording or reproducing data according to the present invention; </paragraph>
<paragraph id="P-0015" lvl="0"><number>&lsqb;0015&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 5</cross-reference> is a diagram showing example results of repeatable runout measurement in a case where the present invention is not applied; </paragraph>
<paragraph id="P-0016" lvl="0"><number>&lsqb;0016&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 6</cross-reference> is a diagram showing calculation results for the compensation value for the average value of repeatable runout; </paragraph>
<paragraph id="P-0017" lvl="0"><number>&lsqb;0017&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 7</cross-reference> is a diagram showing servo signal measurement example results in a case where the present invention is not applied; </paragraph>
<paragraph id="P-0018" lvl="0"><number>&lsqb;0018&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 8</cross-reference> is a diagram showing a further embodiment; and </paragraph>
<paragraph id="P-0019" lvl="0"><number>&lsqb;0019&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 9</cross-reference> is a diagram showing yet a further embodiment.</paragraph>
</section>
</brief-description-of-drawings>
<detailed-description>
<section>
<heading lvl="1">DESCRIPTION OF THE PREFERRED EMBODIMENTS </heading>
<paragraph id="P-0020" lvl="0"><number>&lsqb;0020&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1</cross-reference> shows one embodiment of the present invention. An overview of the present invention is described on the basis of <cross-reference target="DRAWINGS">FIG. 1</cross-reference>. A magnetic disk <highlight><bold>101</bold></highlight> storing servo information and data is attached to a spindle motor <highlight><bold>102</bold></highlight> and incorporated into a magnetic disk drive. A servo pattern (not illustrated) is recorded onto the magnetic disk <highlight><bold>101</bold></highlight> by means of servo pattern recording apparatus (not illustrated) prior to attaching the magnetic disk <highlight><bold>101</bold></highlight> onto the spindle motor <highlight><bold>102</bold></highlight>. </paragraph>
<paragraph id="P-0021" lvl="0"><number>&lsqb;0021&rsqb;</number> A servo signal <highlight><bold>108</bold></highlight> is obtained as a result of the servo pattern recorded on the magnetic disk <highlight><bold>101</bold></highlight> being read out by means of a magnetic head <highlight><bold>103</bold></highlight>. Here, the servo signal <highlight><bold>108</bold></highlight> comprises positional information indicating the position of the magnetic head <highlight><bold>103</bold></highlight> over the magnetic disk <highlight><bold>101</bold></highlight>. In other words, it is constituted by a grey code indicating the number of a &ldquo;track&rdquo;, tracks being concentrically shaped regions on the magnetic disk <highlight><bold>101</bold></highlight> having an approximately uniform width in the radial direction (integers being assigned consecutively from the outer circumference to the inner circumference of the magnetic disk <highlight><bold>101</bold></highlight> as a track number for a radially consecutive plurality of tracks), and a position error signal indicating deviation from the centre of the track. </paragraph>
<paragraph id="P-0022" lvl="0"><number>&lsqb;0022&rsqb;</number> A positional error signal <highlight><bold>116</bold></highlight> obtained by means of an adder <highlight><bold>118</bold></highlight> differentiating the position information obtained from the servo signal <highlight><bold>108</bold></highlight>, from the target position information indicated by a master controller <highlight><bold>111</bold></highlight>, is added by an adder <highlight><bold>106</bold></highlight> to a repeatable runout average value compensation signal <highlight><bold>109</bold></highlight> previously measured and recorded by a repeatable runout average value compensator <highlight><bold>107</bold></highlight>. The servo information <highlight><bold>110</bold></highlight> thus obtained is input to the compensator <highlight><bold>105</bold></highlight>. The compensator <highlight><bold>105</bold></highlight> derives a servo control signal <highlight><bold>117</bold></highlight> and locates the magnetic head <highlight><bold>103</bold></highlight> in the target position instructed by the master controller <highlight><bold>111</bold></highlight> of the magnetic disk <highlight><bold>101</bold></highlight>, by driving a magnetic head support system <highlight><bold>104</bold></highlight> via a drive system <highlight><bold>115</bold></highlight>. Positioning means is constituted jointly by the compensator <highlight><bold>105</bold></highlight>, drive system <highlight><bold>115</bold></highlight> and magnetic head support system <highlight><bold>104</bold></highlight>. </paragraph>
<paragraph id="P-0023" lvl="0"><number>&lsqb;0023&rsqb;</number> The present embodiment discloses a system for adding a repeatable runout average value compensation signal <highlight><bold>109</bold></highlight> to a position error signal <highlight><bold>116</bold></highlight>, but in a digital control system where the servo signal forming the main signal of the magnetic disk servo system is handled as digital information in the processor, the present invention can be implemented readily by means of composition wherein a repeatable runout average value compensation value <highlight><bold>109</bold></highlight> is added to the servo signal. </paragraph>
<paragraph id="P-0024" lvl="0"><number>&lsqb;0024&rsqb;</number> Next, the operation of the repeatable runout average value compensator <highlight><bold>107</bold></highlight> is described. This repeatable runout average value compensator <highlight><bold>107</bold></highlight> is constituted by a compensation value measuring function <highlight><bold>112</bold></highlight>, a compensation value recording function <highlight><bold>113</bold></highlight> and a compensation value output function <highlight><bold>114</bold></highlight>. The compensation value measuring function <highlight><bold>112</bold></highlight> operates according to the flowchart shown in <cross-reference target="DRAWINGS">FIG. 2</cross-reference>, on the basis of a repeatable runout average value compensation value measurement operation instruction from the master controller. Here, in the processing for deducing a repeatable runout average value compensation value according to the flowchart in <cross-reference target="DRAWINGS">FIG. 2</cross-reference>, the repeatable runout average value compensation signal <highlight><bold>109</bold></highlight> in <cross-reference target="DRAWINGS">FIG. 1</cross-reference> is set to zero. </paragraph>
<paragraph id="P-0025" lvl="0"><number>&lsqb;0025&rsqb;</number> Firstly, head &num;0 is selected (s<highlight><bold>101</bold></highlight>). The sequence then moves to a process for determining whether the selected head is lower than the maximum head number (s<highlight><bold>102</bold></highlight>). If the selected head number is greater than the maximum head number at this head number judgement process (s<highlight><bold>102</bold></highlight>), in other words, if compensation value measurement has been completed for all the heads, then the compensation value measuring function <highlight><bold>112</bold></highlight> terminates. If, on the other hand, the selected head number is equal to or less than the maximum head number, in other words, if measurement has not been completed for all the heads, then the sequence transfers to a process for determining whether the compensation value measurement zone is smaller than the maximum measurement zone (s<highlight><bold>103</bold></highlight>). </paragraph>
<paragraph id="P-0026" lvl="0"><number>&lsqb;0026&rsqb;</number> Here, a &ldquo;compensation value measurement zone&rdquo;, as illustrated in <cross-reference target="DRAWINGS">FIG. 3</cross-reference>, corresponds to a repeatable runout compensation area (<highlight><bold>303</bold></highlight>, <highlight><bold>304</bold></highlight>) obtained by dividing the data storage area <highlight><bold>302</bold></highlight> of the magnetic disk <highlight><bold>101</bold></highlight> in the radial direction thereof. If the measurement zone is judged to be greater than the maximum zone as a result of the judgement process at s<highlight><bold>103</bold></highlight>, then the sequence shifts to a process for incrementing the measurement head number (s<highlight><bold>104</bold></highlight>), and then branches to the head number judgement process at s<highlight><bold>102</bold></highlight>. If, on the other hand, the measurement zone number is equal to or less than the maximum zone number, then the sequence shifts to a process (S<highlight><bold>105</bold></highlight>) for determining whether the measurement track number (number of tracks) is less than the maximum track number (number of tracks) in that measurement zone. </paragraph>
<paragraph id="P-0027" lvl="0"><number>&lsqb;0027&rsqb;</number> Here, when the repeatable runout average value compensation value measurement operation instruction is given by the master controller, the measurement zone number where measurement is to be started is determined as an initial setting, similarly to the head at S<highlight><bold>101</bold></highlight>, and the head is moved to the determined measurement zone. It is then possible to measure a prescribed number of zones by setting the measurement zone number at which measurement will terminate to the maximum zone number. </paragraph>
<paragraph id="P-0028" lvl="0"><number>&lsqb;0028&rsqb;</number> If the measurement track number is greater than the maximum track number (number of tracks) in that measurement zone (where number of measurement tracks in the zone is taken as n), then the average value of the measured repeatable runout for the n tracks is calculated (s<highlight><bold>108</bold></highlight>). A compensation value for this repeatable runout average value is then calculated by means of a method described hereinafter (s<highlight><bold>109</bold></highlight>). Subsequently, this calculation result is stored in a non-volatile storage area by means of the compensation value storing function <highlight><bold>113</bold></highlight> (s<highlight><bold>110</bold></highlight>). Here, this non-volatile storage area is taken to be a memory such as an EPROM mounted on a circuit board (not illustrated), or a storage area of the magnetic disk <highlight><bold>101</bold></highlight>. When the process of storing the compensation value in the non-volatile memory (s<highlight><bold>110</bold></highlight>) has been completed, the measurement zone number is incremented (s<highlight><bold>111</bold></highlight>), and the sequence branches to the process for determining whether the measurement zone number is equal to or less than the maximum zone number (s<highlight><bold>103</bold></highlight>). </paragraph>
<paragraph id="P-0029" lvl="0"><number>&lsqb;0029&rsqb;</number> If, on the other hand, the measurement track number (number of tracks) is equal to or less than the maximum track number (number of tracks &equals;n), then the sequence branches to a process (s<highlight><bold>106</bold></highlight>) for measuring the repeatable runout component for each servo sector (servo pattern storage regions distributed in approximately equilateral fashion within tracks) from the position error signal <highlight><bold>116</bold></highlight> obtained by differentiating the position information derived from the servo signal <highlight><bold>108</bold></highlight>, from the target position information instructed by the master controller <highlight><bold>111</bold></highlight>. </paragraph>
<paragraph id="P-0030" lvl="0"><number>&lsqb;0030&rsqb;</number> The repeatable runout components are derived by storing the aforementioned position error signal <highlight><bold>116</bold></highlight> in the memory for each m cycles, and averaging same for each servo sector. The aforementioned position error signal <highlight><bold>116</bold></highlight> is defined as PES&lsqb;i&rsqb;&lsqb;r&rsqb; (where i: servo sector number 1-sect; r: measurement frequency 1&tilde;m). In this case, the repeatable runout component RRO&lsqb;i&rsqb; (repeatable runout component for servo sector number i) is given by </paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>RRO&lsqb;i</italic></highlight>&rsqb;&equals;(1<highlight><italic>/m</italic></highlight>)(<highlight><italic>PES&lsqb;i&rsqb;&lsqb;</italic></highlight>1<highlight><italic>&rsqb;&plus;PES&lsqb;i&rsqb;&lsqb;</italic></highlight>2<highlight><italic>&rsqb;&plus; . . . &plus;PES&lsqb;i&rsqb;&lsqb;m</italic></highlight>&rsqb;)&emsp;&emsp;(equation 1) </in-line-formula></paragraph>
<paragraph id="P-0031" lvl="0"><number>&lsqb;0031&rsqb;</number> When the process for measuring the repeatable runout components (s<highlight><bold>106</bold></highlight>) in the track in question has been completed, the measurement track number (number of tracks) is incremented (s<highlight><bold>107</bold></highlight>), and the sequence transfers to the process for determining whether the measurement track number (number of tracks) is equal to or less than the maximum track number (number of tracks) (s<highlight><bold>105</bold></highlight>). </paragraph>
<paragraph id="P-0032" lvl="0"><number>&lsqb;0032&rsqb;</number> Here, similarly to the measurement zone number described above, a track number for starting measurement is previously stipulated, and the head is moved to the corresponding track. It is possible to measure compensation values for a prescribed number of tracks by stipulating the track number where measurement is to terminate as the maximum track number. </paragraph>
<paragraph id="P-0033" lvl="0"><number>&lsqb;0033&rsqb;</number> Whilst it is necessary to perform measurement for all of the heads, it is not required to measure compensation values for all zones or, in particular, all tracks. It is possible to achieve the effects of the present invention provided that compensation values are measured for at least a plurality of tracks in one zone. </paragraph>
<paragraph id="P-0034" lvl="0"><number>&lsqb;0034&rsqb;</number> Next, the method for calculating repeatable runout compensation values will be described. </paragraph>
<paragraph id="P-0035" lvl="0"><number>&lsqb;0035&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 4</cross-reference> illustrates the system in <cross-reference target="DRAWINGS">FIG. 1</cross-reference> by converting same to a generally known format, called a block diagram. Firstly, the target position information instructed by the master controller <highlight><bold>111</bold></highlight> and the servo information <highlight><bold>108</bold></highlight> are added together by the adder <highlight><bold>118</bold></highlight>. Thereupon, the adder <highlight><bold>106</bold></highlight> adds the repeatable runout average value compensation signal <highlight><bold>109</bold></highlight> read out from the repeatable runout average value compensator <highlight><bold>107</bold></highlight> to the position error signal <highlight><bold>116</bold></highlight> output by the adder <highlight><bold>118</bold></highlight>. On the basis of the output from this adder <highlight><bold>106</bold></highlight>, namely, the servo information <highlight><bold>110</bold></highlight>, the compensator <highlight><bold>105</bold></highlight> (having transmission characteristics of Gc(z)) calculates a servo control signal <highlight><bold>117</bold></highlight> and implements positional control of the magnetic head support system by means of the drive system <highlight><bold>115</bold></highlight> (the transmission characteristics of the drive system and the head support system being taken as Gp(z) and being represented by a single block <highlight><bold>401</bold></highlight>). Here, z indicates a well-known z transform operator. </paragraph>
<paragraph id="P-0036" lvl="0"><number>&lsqb;0036&rsqb;</number> Here, the servo sector number is taken as sect, the number of heads is taken as hd, the number of measurement zones is taken as zone, and the number of measurement tracks in each measurement zone is taken as track. The repeatable runout component for the (i)th servo sector (i&equals;1&tilde;sect) of the (j)th track (j&equals;1&tilde;track) of the nth zone (n&equals;1&tilde;zone) of the (m)th head (m&equals;0&tilde;hd&tilde;1) is determined as RRO&lsqb;m&rsqb;&lsqb;n&rsqb;&lsqb;i&rsqb;&lsqb;j&rsqb; by the processing at s<highlight><bold>106</bold></highlight>. Here, the repeatable runout average value compensation signal RRO_COMP &lsqb;m&rsqb;&lsqb;n&rsqb;&lsqb;i&rsqb; is not added to the position error signal <highlight><bold>116</bold></highlight> used when calculating the repeatable runout components. When measurement of the repeatable runout for the number of measurement tracks has been completed for a particular measurement zone, the average thereof RRO_AVG is calculated (equation 2). </paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>RRO</italic></highlight><highlight><subscript>&mdash;</subscript></highlight><highlight><italic>AVG&lsqb;m&rsqb;&lsqb;n&rsqb;&lsqb;i</italic></highlight>&rsqb;&equals;(1/track)&times;&lt;&lcub;<highlight><italic>RRO&lsqb;m&rsqb;&lsqb;n&rsqb;&lsqb;i&rsqb;&lsqb;</italic></highlight>1<highlight><italic>&rsqb;&plus; . . . &plus;RRO&lsqb;m&rsqb;&lsqb;n&rsqb;&lsqb;i</italic></highlight>&rsqb;&lsqb;track&rsqb;&rcub;&emsp;&emsp;(equation 2) </in-line-formula></paragraph>
<paragraph id="P-0037" lvl="0"><number>&lsqb;0037&rsqb;</number> The repeatable runout average value compensation value RRO_COMP&lsqb;m&rsqb;&lsqb;n&rsqb;&lsqb;i&rsqb; is derived as follows from the repeatable runout average value RRO_AVG&lsqb;m&rsqb;&lsqb;n&rsqb;&lsqb;i&rsqb;, the compensator transmission characteristics (<highlight><bold>105</bold></highlight>) Gc(z), and the drive system and magnetic head support system transmission characteristics (<highlight><bold>401</bold></highlight>) Gp(z): </paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>RRO</italic></highlight><highlight><subscript>&mdash;</subscript></highlight><highlight><italic>COMP&lsqb;m&rsqb;&lsqb;n&rsqb;&lsqb;i&rsqb;&equals;&lcub;</italic></highlight>1<highlight><italic>&plus;Gc</italic></highlight>(<highlight><italic>z</italic></highlight>)&rcub;&times;<highlight><italic>Gp</italic></highlight>(<highlight><italic>z</italic></highlight>))&times;<highlight><italic>RRO</italic></highlight><highlight><subscript>&mdash;</subscript></highlight><highlight><italic>AVG&lsqb;m&rsqb;&lsqb;n&rsqb;&lsqb;i&rsqb;</italic></highlight>&emsp;&emsp;(equation 3) </in-line-formula></paragraph>
<paragraph id="P-0038" lvl="0"><number>&lsqb;0038&rsqb;</number> Adding the compensation value from equation 3 to the position error signal <highlight><bold>116</bold></highlight> cancels out the average value of the repeatable runout component (for the relevant measurement zone) contained in the servo signal <highlight><bold>108</bold></highlight> read from the magnetic disk <highlight><bold>101</bold></highlight>. Furthermore, the repeatable runout average value compensation value determined by the calculation in equation 3 is recorded by the compensation value storing function <highlight><bold>113</bold></highlight>. When data is recorded or reproduced by means of the magnetic head <highlight><bold>101</bold></highlight> following an indicated track, processing is implemented whereby the compensation value output function <highlight><bold>114</bold></highlight> reads out the compensation value from the compensation value storing function <highlight><bold>113</bold></highlight>, on the basis of the measurement zone, head and sector information, and adds same to the position error signal <highlight><bold>116</bold></highlight>. </paragraph>
<paragraph id="P-0039" lvl="0"><number>&lsqb;0039&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 5</cross-reference> illustrates the results of measuring servo information PES_COMP(Z) at the inner, central and outer positions of the measurement zone (<highlight><bold>1</bold></highlight>), in the tracking control system in <cross-reference target="DRAWINGS">FIG. 4</cross-reference>, where the repeatable runout average value compensation signal RRO_COMP&lsqb;m&rsqb;&lsqb;n&rsqb;&lsqb;i&rsqb; is taken as 0 (in other words, where no compensation is implemented). Moreover, <cross-reference target="DRAWINGS">FIG. 6</cross-reference> illustrates a repeatable runout average value compensation signal derived from equation 3. Furthermore, <cross-reference target="DRAWINGS">FIG. 7</cross-reference> shows the results of compensating the signal in <cross-reference target="DRAWINGS">FIG. 5</cross-reference> by means of the compensation signal in <cross-reference target="DRAWINGS">FIG. 6</cross-reference>. Positioning accuracy is improved greatly by compensating the average value of the repeatable runout. </paragraph>
<paragraph id="P-0040" lvl="0"><number>&lsqb;0040&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 8</cross-reference> shows a further embodiment. This involves functions performing different operations to those in the embodiment shown in <cross-reference target="DRAWINGS">FIG. 1</cross-reference>. The compensation value measuring function <highlight><bold>112</bold></highlight> constituting the repeatable runout average value compensator <highlight><bold>107</bold></highlight> terminates its operation at the calculation of the repeatable runout average value RRO_AVG&lsqb;m&rsqb;&lsqb;n&rsqb;&lsqb;i&rsqb; in equation (<highlight><bold>2</bold></highlight>). This repeatable runout average value RRO_AVG&lsqb;m&rsqb;&lsqb;n&rsqb;&lsqb;i&rsqb; is then stored in the compensation value storing function <highlight><bold>113</bold></highlight>. Similarly to the embodiment shown in <cross-reference target="DRAWINGS">FIG. 1</cross-reference>, the compensation signal read out by the compensation value output function <highlight><bold>114</bold></highlight> is input to a data write prohibit judgement section <highlight><bold>801</bold></highlight>. </paragraph>
<paragraph id="P-0041" lvl="0"><number>&lsqb;0041&rsqb;</number> In the data write prohibit judgement section <highlight><bold>801</bold></highlight>, a data write prohibit operation is judged, according to the compensation signal read out from the compensation value output function <highlight><bold>114</bold></highlight> (repeatable runout average value), the position error signal <highlight><bold>116</bold></highlight>, and the data write position error tolerance, and a data write prohibit instruction is sent to the HDC (hard disk controller) <highlight><bold>802</bold></highlight>. Generally, data write prohibit is implemented when the position error signal <highlight><bold>116</bold></highlight> is greater than a prescribed value, in order to restrict the distance between the central data positions of adjacent tracks to a prescribed distance range. In other words, the data write prohibit judgement section <highlight><bold>801</bold></highlight> comprises a positioning error slice level used to judge when to suspend data recording if the positioning error is large during data recording, or a function for adjusting the position error information used when performing such judgement. This positioning error slice level is stored previously in a non-volatile memory or on the magnetic disk <highlight><bold>101</bold></highlight>. Furthermore, the positioning error slice level and positioning error information are adjusted for each servo sector. </paragraph>
<paragraph id="P-0042" lvl="0"><number>&lsqb;0042&rsqb;</number> Here, the repeatable runout average value is the same value between continuous tracks. In other words, the path of the magnetic head <highlight><bold>103</bold></highlight> with respect to the repeatable runout average value according to the tracking servo system is the same between consecutive tracks. Therefore, in order to maintain the distance between central data positions of adjacent tracks recorded along this path within a prescribed distance range, the data write prohibit off-track amount should be adjusted to following this path. In other words, the data write prohibit off-track amount WF&lsqb;i&rsqb; according to the present invention (where i : servo sector number <highlight><bold>1</bold></highlight>-sect) should be set as follows, according to the repeatable runout average value RRO_AVG&lsqb;m&rsqb;&lsqb;n&rsqb;&lsqb;i&rsqb; (equation 1) and the data write position error tolerance WF_SLICE (a uniform value indicating the tolerated off-track amount when the average repeatable runout value is zero). </paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>WF&lsqb;i&rsqb;&equals;WF</italic></highlight><highlight><subscript>&mdash;</subscript></highlight><highlight><italic>SLICE&plus;RRO</italic></highlight><highlight><subscript>&mdash;</subscript></highlight><highlight><italic>AVG&lsqb;m&rsqb;&lsqb;n&rsqb;&lsqb;i&rsqb;</italic></highlight>&emsp;&emsp;(equation 4) </in-line-formula></paragraph>
<paragraph id="P-0043" lvl="0"><number>&lsqb;0043&rsqb;</number> The data write prohibit off-track amount WF&lsqb;i&rsqb; adjusted in this manner is compared with the position error signal <highlight><bold>116</bold></highlight> (denoted as PES&lsqb;i&rsqb;), and by prohibiting data writing if </paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>PES&lsqb;i&rsqb;&gt;WF&lsqb;i&rsqb;</italic></highlight>&emsp;&emsp;(equation 5) </in-line-formula></paragraph>
<paragraph id="P-0044" lvl="0"><number>&lsqb;0044&rsqb;</number> it is possible to restrict the distance between the central positions of data recorded onto adjacent tracks, within a uniform range. </paragraph>
<paragraph id="P-0045" lvl="0"><number>&lsqb;0045&rsqb;</number> Furthermore, rather than adjusting the data write prohibit off-track amount according to the repeatable runout RRO_AVG&lsqb;m&rsqb;&lsqb;n&rsqb;&lsqb;i&rsqb; as described above, it is also possible to adjust the position error information to which the data write prohibit off-track amount is compared. In other words, the position error information is adjusted to </paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>PES</italic></highlight>_COMP&lsqb;i&rsqb;&equals;PES&lsqb;i&rsqb;&minus;RRO<highlight><subscript>&mdash;</subscript></highlight><highlight><italic>AVG&lsqb;m&rsqb;&lsqb;n&rsqb;&lsqb;i&rsqb;</italic></highlight>&emsp;&emsp;(equation 6) </in-line-formula></paragraph>
<paragraph id="P-0046" lvl="7"><number>&lsqb;0046&rsqb;</number> and the data write prohibit judgement condition is set to </paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>PES</italic></highlight><highlight><subscript>&mdash;</subscript></highlight><highlight><italic>COMP &lsqb;i&rsqb;&gt;WF</italic></highlight><highlight><subscript>&mdash;</subscript></highlight><highlight><italic>SLICE</italic></highlight>&emsp;&emsp;(equation 7) </in-line-formula></paragraph>
<paragraph id="P-0047" lvl="0"><number>&lsqb;0047&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 9</cross-reference> shows a block diagram of a further embodiment of the present invention. In this embodiment, rather than compensating the servo signal, the average value of the control signal sent to the positioning means is compensated. </paragraph>
<paragraph id="P-0048" lvl="0"><number>&lsqb;0048&rsqb;</number> The compensator <highlight><bold>105</bold></highlight> (having transmission characteristics of Gc(z)) derives a servo control signal <highlight><bold>117</bold></highlight> on the basis of the sum of the servo signal <highlight><bold>108</bold></highlight> and the target position information instructed by the upper controller <highlight><bold>111</bold></highlight>, as output by the adder <highlight><bold>118</bold></highlight>. Adder <highlight><bold>106</bold></highlight> then adds a repeatable runout average value compensation signal <highlight><bold>901</bold></highlight>, as read out from the repeatable runout average value compensator <highlight><bold>107</bold></highlight>, to signal <highlight><bold>117</bold></highlight>, to yield a control signal <highlight><bold>902</bold></highlight>, which is used as a basis to control the positioning of the magnetic head support system (the transmission characteristics of the drive system and the head support system being taken as Gp(z) and being represented by a single block <highlight><bold>401</bold></highlight>). Here, z indicates a well-known z transform operator. </paragraph>
<paragraph id="P-0049" lvl="0"><number>&lsqb;0049&rsqb;</number> The repeatable runout average value compensation signal <highlight><bold>901</bold></highlight> RRO_COMP2&lsqb;m&rsqb;&lsqb;n&rsqb;&lsqb;i&rsqb; is determined by (equation 8). </paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>RRO</italic></highlight><highlight><subscript>&mdash;</subscript></highlight><highlight><italic>COMP</italic></highlight>2<highlight><italic>&lsqb;m&rsqb;&lsqb;n&rsqb;&lsqb;i&rsqb;&equals;&lcub;</italic></highlight>1<highlight><italic>/Gp</italic></highlight>(<highlight><italic>z</italic></highlight>)&rcub;&times;<highlight><italic>RRO</italic></highlight><highlight><subscript>&mdash;</subscript></highlight><highlight><italic>AVG&lsqb;m&rsqb;&lsqb;n&rsqb;&lsqb;i&rsqb;&plus;ACC</italic></highlight><highlight><subscript>&mdash;</subscript></highlight><highlight><italic>AVG&lsqb;m&rsqb;&lsqb;n&rsqb;&lsqb;i&rsqb;</italic></highlight>&emsp;&emsp;(equation 8) </in-line-formula></paragraph>
<paragraph id="P-0050" lvl="0"><number>&lsqb;0050&rsqb;</number> ACC_AVG&lsqb;m&rsqb;&lsqb;n&rsqb;&lsqb;i&rsqb; is the average value of the control signal for each servo sector of a plurality of tracks, and here </paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>ACC</italic></highlight><highlight><subscript>&mdash;</subscript></highlight><highlight><italic>AVG&lsqb;m&rsqb;&lsqb;n&rsqb;&lsqb;i&rsqb;&equals;(</italic></highlight>1/track)&times;&lcub;<highlight><italic>ACC&lsqb;m&rsqb;&lsqb;n&rsqb;&lsqb;i&rsqb;&lsqb;</italic></highlight>1<highlight><italic>&rsqb;&plus; . . . &plus;ACC&lsqb;m&rsqb;&lsqb;n&rsqb;&lsqb;i&rsqb;&lsqb;track&rsqb;&rcub;</italic></highlight>&emsp;&emsp;(equation 9) </in-line-formula></paragraph>
<paragraph id="P-0051" lvl="0"><number>&lsqb;0051&rsqb;</number> ACC&lsqb;m&rsqb;&lsqb;n&rsqb;&lsqb;i&rsqb;&lsqb;j&rsqb; indicates the input to the drive system <highlight><bold>401</bold></highlight>, in other words, the output from the compensator <highlight><bold>105</bold></highlight>, for the (m)th head (m&equals;0&tilde;hd&minus;1), nth zone (n&equals;1&tilde;zone), (j)th track (j&equals;1&tilde;track) and (i)th servo sector (i&equals;1&tilde;sect), when no repeatable runout average value compensation is performed. In this embodiment, the magnetic head <highlight><bold>103</bold></highlight> operates so as to follow the repeatable runout average value. Therefore, the effect of the repeatable runout average value is removed from the servo signal <highlight><bold>108</bold></highlight> and hence positioning accuracy is improved. </paragraph>
<paragraph id="P-0052" lvl="0"><number>&lsqb;0052&rsqb;</number> The average value of the drive signal <highlight><bold>902</bold></highlight> when no repeatable runout average value compensation signal <highlight><bold>901</bold></highlight> is input is defined as the average control signal. </paragraph>
<paragraph id="P-0053" lvl="0"><number>&lsqb;0053&rsqb;</number> In each of the foregoing embodiments, the repeatable runout was determined, the average value thereof was derived and a compensation value was calculated, with respect to all sectors, all tracks and all heads, but this is not a mandatory condition. With regard to the heads, the repeatable runout should be determined for at least one of the heads. With regard to tracks, the repeatable runout should be determined and a compensation value calculated, for at least a plurality of tracks in the same sector. With regard to the sectors, similarly, there is no need to determine the repeatable runout for all sectors, and it is possible to calculate a compensation value by, for example, determining the repeatable runout for half the sectors by selecting alternate sectors, or determining the repeatable runout in only three or four positions of one cycle of a track. </paragraph>
<paragraph id="P-0054" lvl="0"><number>&lsqb;0054&rsqb;</number> According to the present invention, the accuracy of positioning a magnetic head is improved by compensating the average value of the repeatable runout. Therefore, it is possible to improve the positioning accuracy of a magnetic disk drive which utilizes a system where servo information is recorded onto the magnetic disk before installing the magnetic disk on the spindle motor, this system tending to produce particularly notable worsening of positioning accuracy due to the average value of repeatable runout. </paragraph>
</section>
</detailed-description>
</subdoc-description>
<subdoc-claims>
<heading lvl="1">What is claimed is: </heading>
<claim id="CLM-00001">
<claim-text><highlight><bold>1</bold></highlight>. A magnetic disk drive comprising: 
<claim-text>a magnetic disk on which servo information is stored; </claim-text>
<claim-text>a magnetic head for recording/reproducing information to/from said magnetic disk; </claim-text>
<claim-text>a driver for positioning said magnetic head over said magnetic disk; and </claim-text>
<claim-text>a controller for compensating the servo signal on the basis of the average value of the repeatable runout for each servo sector in a plurality of tracks of said servo information. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00002">
<claim-text><highlight><bold>2</bold></highlight>. The magnetic disk drive according to <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein said average value of the repeatable runout is stored in a non-volatile memory or on said magnetic disk. </claim-text>
</claim>
<claim id="CLM-00003">
<claim-text><highlight><bold>3</bold></highlight>. The magnetic disk drive according to <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein a servo signal compensation value based on said average value of the repeatable runout is stored in a non-volatile memory or on said magnetic disk. </claim-text>
</claim>
<claim id="CLM-00004">
<claim-text><highlight><bold>4</bold></highlight>. A magnetic disk drive comprising: 
<claim-text>a magnetic disk on which servo information is stored; </claim-text>
<claim-text>a magnetic head for recording/reproducing information to/from said magnetic disk; </claim-text>
<claim-text>a driver for positioning said magnetic head over said magnetic disk; and </claim-text>
<claim-text>a controller for adjusting a positioning error slice level for said magnetic head, for each servo sector, whereby data recording is halted, on the basis of the average value of the repeatable runout for each servo sector in a plurality of tracks of said servo information. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00005">
<claim-text><highlight><bold>5</bold></highlight>. The magnetic disk drive according to <dependent-claim-reference depends_on="CLM-00004">claim 4</dependent-claim-reference>, wherein said average value of the repeatable runout is stored in a non-volatile memory or on said magnetic disk. </claim-text>
</claim>
<claim id="CLM-00006">
<claim-text><highlight><bold>6</bold></highlight>. The magnetic disk drive according to <dependent-claim-reference depends_on="CLM-00004">claim 4</dependent-claim-reference>, wherein said positioning error slice level is stored in a non-volatile memory or on said magnetic disk. </claim-text>
</claim>
<claim id="CLM-00007">
<claim-text><highlight><bold>7</bold></highlight>. A magnetic disk drive comprising: 
<claim-text>a magnetic disk on which servo information is stored; </claim-text>
<claim-text>a magnetic head for recording/reproducing information to/from said magnetic disk; </claim-text>
<claim-text>a driver for positioning said magnetic head over said magnetic disk; and </claim-text>
<claim-text>a controller for compensating the control signal to said driver, on the basis of the average control signal to said driver for each servo sector of a plurality of tracks, and the average value of the repeatable runout for each servo sector in a plurality of tracks of said servo information. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00008">
<claim-text><highlight><bold>8</bold></highlight>. The magnetic disk drive according to <dependent-claim-reference depends_on="CLM-00007">claim 7</dependent-claim-reference>, wherein said average control signal is stored in a non-volatile memory or on said magnetic disk. </claim-text>
</claim>
<claim id="CLM-00009">
<claim-text><highlight><bold>9</bold></highlight>. The magnetic disk drive according to <dependent-claim-reference depends_on="CLM-00007">claim 7</dependent-claim-reference>, wherein a compensation value based on said average control signal is stored in a non-volatile memory or on said magnetic disk. </claim-text>
</claim>
<claim id="CLM-00010">
<claim-text><highlight><bold>10</bold></highlight>. The magnetic disk drive according to <dependent-claim-reference depends_on="CLM-00007">claim 7</dependent-claim-reference>, wherein said average value of the repeatable runout is stored in a non-volatile memory or on said magnetic disk. </claim-text>
</claim>
<claim id="CLM-00011">
<claim-text><highlight><bold>11</bold></highlight>. The magnetic disk drive according to <dependent-claim-reference depends_on="CLM-00007">claim 7</dependent-claim-reference>, wherein a servo signal compensation value based on said average value of the repeatable runout is stored in a non-volatile memory or on said magnetic disk.</claim-text>
</claim>
</subdoc-claims>
<subdoc-drawings id="DRAWINGS">
<heading lvl="0" align="CENTER">Drawings</heading>
<representative-figure>1</representative-figure>
<figure id="figure-D00000">
<image id="EMI-D00000" file="US20030002200A1-20030102-D00000.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00001">
<image id="EMI-D00001" file="US20030002200A1-20030102-D00001.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00002">
<image id="EMI-D00002" file="US20030002200A1-20030102-D00002.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00003">
<image id="EMI-D00003" file="US20030002200A1-20030102-D00003.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00004">
<image id="EMI-D00004" file="US20030002200A1-20030102-D00004.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00005">
<image id="EMI-D00005" file="US20030002200A1-20030102-D00005.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00006">
<image id="EMI-D00006" file="US20030002200A1-20030102-D00006.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00007">
<image id="EMI-D00007" file="US20030002200A1-20030102-D00007.TIF" imf="TIFF" ti="DR"/>
</figure>
</subdoc-drawings>
</patent-application-publication>
