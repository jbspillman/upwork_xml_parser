<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE patent-application-publication SYSTEM "pap-v16-2002-01-01.dtd" [
<!ENTITY US20030001650A1-20030102-D00000.TIF SYSTEM "US20030001650A1-20030102-D00000.TIF" NDATA TIF>
<!ENTITY US20030001650A1-20030102-D00001.TIF SYSTEM "US20030001650A1-20030102-D00001.TIF" NDATA TIF>
<!ENTITY US20030001650A1-20030102-D00002.TIF SYSTEM "US20030001650A1-20030102-D00002.TIF" NDATA TIF>
<!ENTITY US20030001650A1-20030102-D00003.TIF SYSTEM "US20030001650A1-20030102-D00003.TIF" NDATA TIF>
<!ENTITY US20030001650A1-20030102-D00004.TIF SYSTEM "US20030001650A1-20030102-D00004.TIF" NDATA TIF>
<!ENTITY US20030001650A1-20030102-D00005.TIF SYSTEM "US20030001650A1-20030102-D00005.TIF" NDATA TIF>
<!ENTITY US20030001650A1-20030102-D00006.TIF SYSTEM "US20030001650A1-20030102-D00006.TIF" NDATA TIF>
<!ENTITY US20030001650A1-20030102-D00007.TIF SYSTEM "US20030001650A1-20030102-D00007.TIF" NDATA TIF>
<!ENTITY US20030001650A1-20030102-D00008.TIF SYSTEM "US20030001650A1-20030102-D00008.TIF" NDATA TIF>
<!ENTITY US20030001650A1-20030102-D00009.TIF SYSTEM "US20030001650A1-20030102-D00009.TIF" NDATA TIF>
<!ENTITY US20030001650A1-20030102-D00010.TIF SYSTEM "US20030001650A1-20030102-D00010.TIF" NDATA TIF>
]>
<patent-application-publication>
<subdoc-bibliographic-information>
<document-id>
<doc-number>20030001650</doc-number>
<kind-code>A1</kind-code>
<document-date>20030102</document-date>
</document-id>
<publication-filing-type>new</publication-filing-type>
<domestic-filing-data>
<application-number>
<doc-number>09991330</doc-number>
</application-number>
<application-number-series-code>09</application-number-series-code>
<filing-date>20011115</filing-date>
</domestic-filing-data>
<foreign-priority-data>
<priority-application-number>
<doc-number>01132531.3</doc-number>
</priority-application-number>
<filing-date>20010702</filing-date>
<country-code>CN</country-code>
</foreign-priority-data>
<technical-information>
<classification-ipc>
<classification-ipc-primary>
<ipc>G06F007/38</ipc>
</classification-ipc-primary>
<classification-ipc-edition>07</classification-ipc-edition>
</classification-ipc>
<classification-us>
<classification-us-primary>
<uspc>
<class>327</class>
<subclass>277000</subclass>
</uspc>
</classification-us-primary>
</classification-us>
<title-of-invention>Delay compensation circuit including a feedback loop</title-of-invention>
</technical-information>
<inventors>
<first-named-inventor>
<name>
<given-name>Xianguo</given-name>
<family-name>Cao</family-name>
</name>
<residence>
<residence-non-us>
<city>Pudong Shanghai</city>
<country-code>CN</country-code>
</residence-non-us>
</residence>
<authority-applicant>INV</authority-applicant>
</first-named-inventor>
<inventor>
<name>
<given-name>Obed</given-name>
<family-name>Duardo</family-name>
</name>
<residence>
<residence-us>
<city>Coral Springs</city>
<state>FL</state>
<country-code>US</country-code>
</residence-us>
</residence>
<authority-applicant>INV</authority-applicant>
</inventor>
<inventor>
<name>
<given-name>Bo</given-name>
<family-name>Ye</family-name>
</name>
<residence>
<residence-non-us>
<city>Pudong Shanghai</city>
<country-code>CN</country-code>
</residence-non-us>
</residence>
<authority-applicant>INV</authority-applicant>
</inventor>
</inventors>
<correspondence-address>
<name-1>HARNESS, DICKEY &amp; PIERCE, P.L.C.</name-1>
<name-2></name-2>
<address>
<address-1>P.O. BOX 8910</address-1>
<city>RESTON</city>
<state>VA</state>
<postalcode>20195</postalcode>
<country>
<country-code>US</country-code>
</country>
</address>
</correspondence-address>
</subdoc-bibliographic-information>
<subdoc-abstract>
<paragraph id="A-0001" lvl="0">A delay compensation circuit that determines the effects of process, voltage, and temperature (PVT) conditions of a chip by amplifying the maximum delay time of a delay element within the chip. The delay compensation circuit determines into which one of several predefined time intervals the amplified delay time falls, where each predefined time interval is associated with different PVT conditions. The delay compensation circuit of the present invention can be used to generate control signals for a variable delay element. Also, the PVT information provided by the delay compensation circuit can be used to design components within a chip to compensate for variances in PVT conditions. The feedback loop structure of the delay compensation device reduces the required chip area and power consumption of the delay compensation circuit. </paragraph>
</subdoc-abstract>
<subdoc-description>
<summary-of-invention>
<section>
<heading lvl="1">BACKGROUND OF THE INVENTION </heading>
<paragraph id="P-0001" lvl="0"><number>&lsqb;0001&rsqb;</number> The present invention relates generally to synchronous circuit design, and more particularly, to a variable delay control circuit for providing a variable delay time to a clock signal to compensate for variations in the process, voltage and temperature (PVT) conditions of an integrated circuit. </paragraph>
</section>
<section>
<heading lvl="1">DESCRIPTION OF THE RELATED ART </heading>
<paragraph id="P-0002" lvl="0"><number>&lsqb;0002&rsqb;</number> In digital circuits, synchronous logic elements operate by accepting and locking into a data signal during a transition of a clock signal. Such logic elements include D flip-flops, latch circuits, linear feedback shift registers (LFSRs), and counters. In order for a synchronous logic element to lock into a data signal, the signal must remain stable for some time prior to the clock edge, i.e., during a setup time. Also, the data signal usually must remain stable for some time after the clock edge, i.e., during a hold time, to be locked in by the synchronous logic element. If the data signal is not stable for both the setup time and the hold time of a synchronous logic element, the data signal may or may not be captured by the logic element. </paragraph>
<paragraph id="P-0003" lvl="0"><number>&lsqb;0003&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1A</cross-reference> illustrates the operation of a synchronous logic element, specifically a D flip-flop DFF. In this example, the input data signal A is also used as the clock signal. Typically, the data signal and the clock signal are not shared, but instead are distinct signals. They are shown as sharing the same signal in <cross-reference target="DRAWINGS">FIG. 1</cross-reference> to simplify the description of the related art. All descriptions herein apply also to the case where the clock and data signals are distinct. </paragraph>
<paragraph id="P-0004" lvl="0"><number>&lsqb;0004&rsqb;</number> As shown in the timing diagrams of <cross-reference target="DRAWINGS">FIG. 1</cross-reference>A, signal A is applied at the D input and clock input CK of the D flip-flop DFF. Therefore, the required setup time T<highlight><subscript>su </subscript></highlight>of the D flip-flop DFF cannot be satisfied, and the Q output is indeterminate. This is shown in the timing diagram of <cross-reference target="DRAWINGS">FIG. 1A</cross-reference>. However, such violations of setup time are not limited to instances where the input data signal is used to clock itself in a synchronous logic element. </paragraph>
<paragraph id="P-0005" lvl="0"><number>&lsqb;0005&rsqb;</number> For instance, clock skew (i.e., minor variations in the time at which clock signals arrive at their destinations in a chip) may cause the clock signal to arrive earlier than expected. Therefore, clock skew may cause a data signal to violate the setup time. Clock skew can be caused by, among other things, the process, voltage, and temperature (PVT) conditions of the synchronous logic element. </paragraph>
<paragraph id="P-0006" lvl="0"><number>&lsqb;0006&rsqb;</number> One way to prevent setup time violations is to add a delay element to the path of the clock signal. <cross-reference target="DRAWINGS">FIG. 1B</cross-reference> shows a delay element added to the clock path of the D flip-flop DFF in <cross-reference target="DRAWINGS">FIG. 1A</cross-reference>. As shown in the timing diagram of <cross-reference target="DRAWINGS">FIG. 1</cross-reference>B, the delay element delays the signal A applied to the CK input by a time T<highlight><subscript>d</subscript></highlight>, thereby shifting the clock edge such that the data signal is stable during the setup time T<highlight><subscript>su</subscript></highlight>. </paragraph>
<paragraph id="P-0007" lvl="0"><number>&lsqb;0007&rsqb;</number> However, the delay time T<highlight><subscript>d </subscript></highlight>may vary according to the PVT conditions of the delay element. For example, if the temperature varies between from about &minus;40&deg; C. to 125&deg; C., the supply voltage varies by &plus;/&minus;15%, and/or the process conditions of the delay element varies between worst case fast and worst case slow, the delay time T<highlight><subscript>d </subscript></highlight>may vary from below 50% to over 100% of the designated delay time T<highlight><subscript>d</subscript></highlight>. Such changes in delay time T<highlight><subscript>d </subscript></highlight>may result in a violation of the setup time or the hold time of the D flip-flop DFF, or other types of synchronous logic elements. </paragraph>
<paragraph id="P-0008" lvl="0"><number>&lsqb;0008&rsqb;</number> One solution to this problem has been to use a type of delay element that includes a certain number of small delay cells, each having a relatively small delay time. The delay time T<highlight><subscript>d </subscript></highlight>of such a delay element can be adapted to compensate for PVT conditions by changing the number of smaller delay cells. In order to increase the resolution of the delay element further, the smaller delay cells may comprise a tapped delay circuit, which includes a coarse delay component and a fine delay component. </paragraph>
<paragraph id="P-0009" lvl="0"><number>&lsqb;0009&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 2</cross-reference> illustrates such a tapped delay circuit <highlight><bold>10</bold></highlight>. The coarse delay component is comprised of a group of tapped coarse delay elements CD<highlight><bold>1</bold></highlight>, . . . , CD<highlight><bold>8</bold></highlight> connected in series. The fine delay component is comprised of a plurality of tapped fine delay elements FDa, . . . , FDd connected in parallel. While <cross-reference target="DRAWINGS">FIG. 2</cross-reference> shows a delay component having eight coarse delay elements CD<highlight><bold>1</bold></highlight>, . . . , CD<highlight><bold>8</bold></highlight> and four fine delay elements FDa, . . . , FDd, the number of delay elements included in the tapped delay circuit <highlight><bold>10</bold></highlight> can be increased or decreased based on the desired resolution of the delay time. </paragraph>
<paragraph id="P-0010" lvl="0"><number>&lsqb;0010&rsqb;</number> Each of the coarse delay elements CD<highlight><bold>1</bold></highlight>, . . . , CD<highlight><bold>8</bold></highlight> has a relatively short time delay T<highlight><subscript>c</subscript></highlight>. An input signal IN is input to the first coarse delay element, and the delayed signal propagates from coarse delay element CD<highlight><bold>1</bold></highlight> to the next coarse delay element CD<highlight><bold>2</bold></highlight> to the next coarse delay element CD<highlight><bold>3</bold></highlight>, etc., until it propagates to the last coarse delay element CD<highlight><bold>8</bold></highlight>. Therefore, the signal at tap <highlight><bold>1</bold></highlight> will be delayed by T<highlight><subscript>c</subscript></highlight>, the signal at tap <highlight><bold>2</bold></highlight> will be delayed by 2*T<highlight><subscript>c</subscript></highlight>, and so forth. The coarse delay multiplexor MUX A is controlled by a shift register array <highlight><bold>30</bold></highlight> to select the tap signal corresponding to a specific series number, which is transmitted to MUX A from the shift register array <highlight><bold>30</bold></highlight> via control signals. </paragraph>
<paragraph id="P-0011" lvl="0"><number>&lsqb;0011&rsqb;</number> The delayed signal selected by multiplexor MUX A is then transmitted to the fine delay elements FDa, . . . , FDd in the fine delay component. The fine delay component is used to fine-tune the delay time of the variable delay circuit. The time delay T<highlight><subscript>f </subscript></highlight>of the fine delay component is much smaller than the time delay T<highlight><subscript>c </subscript></highlight>of the coarse delay elements. Each fine delay element FDa, . . . , FDd has a time delay T<highlight><subscript>f </subscript></highlight>that corresponds to the element&apos;s capacitance load. This time delay T<highlight><subscript>f </subscript></highlight>includes an intrinsic time delay that is independent of the capacitance load and an extrinsic time delay that typically varies linearly with the capacitance load. For example, since the capacitance load of FDd is four times greater than the capacitance load of FDa, the extrinsic time delay applied to the signal by delay element FDd will be four times longer than the extrinsic time delay applied by delay element FDa. The intrinsic time delay applied to the signal by any fine delay element Fda, . . . , FDd is the same. The shift register array <highlight><bold>30</bold></highlight> determines a parallel number (either a, b, c, or d), and controls the fine delay multiplexor MUX B to select and output the signal at the tap corresponding to the determined parallel number. </paragraph>
<paragraph id="P-0012" lvl="0"><number>&lsqb;0012&rsqb;</number> The series number determined by the shift register array <highlight><bold>30</bold></highlight> includes a number of bits that corresponds to the number of coarse delay elements CD<highlight><bold>1</bold></highlight>, . . . , CD<highlight><bold>8</bold></highlight>. Therefore, in the tapped delay circuit <highlight><bold>10</bold></highlight> illustrated in <cross-reference target="DRAWINGS">FIG. 2</cross-reference>, the shift register array contains a series number having eight digits. Each digit corresponds to the tap of a specific coarse delay element. One of the digits contains a &ldquo;1&rdquo; bit while all of the other digits contain &ldquo;0&rdquo; bits. The digit containing the &ldquo;1&rdquo; bit corresponds to the tap whose delayed signal is selected by coarse delay multiplexor MUX A. Similarly, the parallel number includes a number of bits corresponding to the number of fine delay elements FDa, . . . , FDd, wherein one digit contains a &ldquo;1&rdquo; bit while the other digits contain &ldquo;0&rdquo; bits. The &ldquo;1&rdquo; bit corresponds to the tap from which fine delay multiplexor MUX B selects the delayed signal. </paragraph>
<paragraph id="P-0013" lvl="0"><number>&lsqb;0013&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3</cross-reference> illustrates a variable delay control circuit <highlight><bold>100</bold></highlight> that utilizes a variable delay element <highlight><bold>20</bold></highlight>, which is comprised of a number of tapped delay circuits <highlight><bold>10</bold></highlight>. The number of tapped delay circuits <highlight><bold>10</bold></highlight> in variable delay element <highlight><bold>20</bold></highlight> is based on the desired resolution of the variable delay control circuit <highlight><bold>100</bold></highlight>. The time delay T<highlight><subscript>d </subscript></highlight>of the variable delay element <highlight><bold>20</bold></highlight> is the sum of the coarse delay times T<highlight><subscript>c </subscript></highlight>and the fine delay times T<highlight><subscript>f </subscript></highlight>of each tapped delay circuit <highlight><bold>10</bold></highlight>. Therefore, in order to compensate for PVT conditions, the time delay T<highlight><subscript>d </subscript></highlight>is adjusted by changing the series number and parallel number of the shift register array <highlight><bold>30</bold></highlight>. The operation of the variable delay control circuit <highlight><bold>100</bold></highlight> is described below. </paragraph>
<paragraph id="P-0014" lvl="0"><number>&lsqb;0014&rsqb;</number> First, an input clock signal CLK is input to the first tapped delay circuit <highlight><bold>10</bold></highlight> of the variable delay element <highlight><bold>20</bold></highlight>. The variable delay element <highlight><bold>20</bold></highlight> outputs a clock signal P_CK delayed according to delay time T<highlight><subscript>d</subscript></highlight>, which is determined by the series number and the parallel number in the shift register array <highlight><bold>30</bold></highlight>. Both the delayed clock signal P_CK and the input clock signal CLK are sent to coarse phase detector <highlight><bold>40</bold></highlight>, which detects a phase difference between the input clock CLK and the delayed clock signal P_CK. The signals P_CK and CLK are also sent to the fine phase detector <highlight><bold>50</bold></highlight>, which similarly detects a phase difference between the signals. </paragraph>
<paragraph id="P-0015" lvl="0"><number>&lsqb;0015&rsqb;</number> Based on a detected phase difference, the coarse phase detector <highlight><bold>40</bold></highlight> will generate either right shift signal CSR or a left shift signal CSL, if necessary, which shifts the &ldquo;1&rdquo; bit of the series number in the shift register array <highlight><bold>30</bold></highlight> to either the left or right. As a result of the modified series number, the coarse delay multiplexor MUX A of each tapped delay element <highlight><bold>10</bold></highlight> will select and output a different tap signal. Similarly, the fine phase detector <highlight><bold>50</bold></highlight> will generate a right shift signal FSR or a left shift signal FSL to shift the &ldquo;1&rdquo; bit of the parallel number of the shift register array <highlight><bold>30</bold></highlight> to either the left or right, if such a shift is necessary according to the detected phase difference. Such shifts will cause the fine delay multiplexor MUX B of each tapped delay element <highlight><bold>10</bold></highlight> to select a different tap signal. </paragraph>
<paragraph id="P-0016" lvl="0"><number>&lsqb;0016&rsqb;</number> The variable delay control circuit <highlight><bold>100</bold></highlight> of <cross-reference target="DRAWINGS">FIG. 2</cross-reference> can be considered a type of delay-locked loop (DLL), because it synchronizes or aligns the delayed clock signal P_CK with the input clock signal CLK. </paragraph>
<paragraph id="P-0017" lvl="0"><number>&lsqb;0017&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 4</cross-reference> illustrates a timing diagram with internal signals P_d<highlight><bold>0</bold></highlight>, P_d<highlight><bold>1</bold></highlight>, P_d<highlight><bold>2</bold></highlight>, and P_d<highlight><bold>3</bold></highlight>, which are determined with respect to the phase of clock signal CLK. The coarse phase detector <highlight><bold>40</bold></highlight> compares the P_CK signal to P_d<highlight><bold>0</bold></highlight> and P_d<highlight><bold>1</bold></highlight>, while the fine phase detector <highlight><bold>50</bold></highlight> compares P_CK to P_d<highlight><bold>2</bold></highlight> and P_d<highlight><bold>3</bold></highlight>, to determine whether adjustments to the series number and parallel number are necessary. Signals P_d<highlight><bold>0</bold></highlight> and P_d<highlight><bold>1</bold></highlight> define the boundaries of a coarse delay window T<highlight><subscript>cd</subscript></highlight>. Signals P_d<highlight><bold>2</bold></highlight> and P_d<highlight><bold>3</bold></highlight> define the boundaries of a fine delay window T<highlight><subscript>fd</subscript></highlight>. </paragraph>
<paragraph id="P-0018" lvl="0"><number>&lsqb;0018&rsqb;</number> Specifically, the coarse phase detector <highlight><bold>40</bold></highlight> checks whether the rising edge of signal P_CK falls between the rising edges of signals P_d<highlight><bold>0</bold></highlight> and P_d<highlight><bold>1</bold></highlight>, i.e., falls within coarse delay window T<highlight><subscript>cd</subscript></highlight>. If the edge of P_CK does not fall within window T<highlight><subscript>cd</subscript></highlight>, then the coarse phase detector will generate CSR or CSL signals to modify the series number, thereby causing P_CK to shift. For instance, if the rising edge of P_CK falls within time interval R<highlight><bold>1</bold></highlight> of <cross-reference target="DRAWINGS">FIG. 4</cross-reference>, where both P_d<highlight><bold>0</bold></highlight> and P_d<highlight><bold>1</bold></highlight> are high, the coarse phase detector <highlight><bold>40</bold></highlight> will generate a right shift signal CSR that causes the series number to decrease (i.e., cause the &ldquo;1&rdquo; bit to shift to the right) and P_CK to coarsely shift toward the left. Alternatively, if the rising edge of P_CK falls within time interval L<highlight><bold>1</bold></highlight>, where both P_d<highlight><bold>0</bold></highlight> and P_d<highlight><bold>1</bold></highlight> are low, the coarse phase detector <highlight><bold>40</bold></highlight> will generate a left shift signal CSL that causes the series number to increase (i.e., cause the &ldquo;1&rdquo; bit to shift to the left) and P_CK to move coarsely toward the right. </paragraph>
<paragraph id="P-0019" lvl="0"><number>&lsqb;0019&rsqb;</number> Once the edge signal P_CK falls within coarse delay window T<highlight><subscript>cd</subscript></highlight>, fine coarse detector <highlight><bold>50</bold></highlight> will determine whether the edge of P_CK falls between the rising edges of signal P_d<highlight><bold>2</bold></highlight> and P_d<highlight><bold>3</bold></highlight>, i.e., falls within fine delay window T<highlight><subscript>fd</subscript></highlight>. If the edge of P_CK does not fall within window T<highlight><subscript>fd</subscript></highlight>, the fine phase detector <highlight><bold>50</bold></highlight> will similarly generate right shift signal FSR and left shift signal FSL to alter the parallel number, and finely shift signal P_CK. For example, if the rising edge of P_CK falls to the right of window T<highlight><subscript>fd</subscript></highlight>, a right shift signal FSR will decrease the parallel number (i.e., cause the &ldquo;1&rdquo; bit to shift to the right), thereby shifting P_CK to the left. If the edge of P_CK falls to the left of window T<highlight><subscript>fd</subscript></highlight>, a left shift signal FSL will increase the parallel number (i.e., cause the &ldquo;1&rdquo; bit to shift to the left), thereby shifting P_CK to the right. </paragraph>
<paragraph id="P-0020" lvl="0"><number>&lsqb;0020&rsqb;</number> However, a problem may arise when using the variable control system <highlight><bold>100</bold></highlight>. Specifically, when the system is powered on, the series number may be preset to a number that causes P_CK to be ahead of input clock signal CLK by a half cycle, or preset to a number that causes P_CK to be delayed by a full cycle with respect to CLK. Such a problem can be attributed to variations in PVT conditions, and may cause the delay times of the coarse delay and fine delay elements of the tapped delay circuits <highlight><bold>10</bold></highlight> to vary from below &minus;50% to above 100% of the normal delay time. </paragraph>
<paragraph id="P-0021" lvl="0"><number>&lsqb;0021&rsqb;</number> As a result of this problem, the edge of signal P_CK may fall within one of the time intervals L<highlight><bold>3</bold></highlight>, S<highlight><bold>3</bold></highlight>, and R<highlight><bold>3</bold></highlight> of the timing diagram in <cross-reference target="DRAWINGS">FIG. 4</cross-reference>. Consequently, the coarse phase detector <highlight><bold>40</bold></highlight> and fine phase detector <highlight><bold>50</bold></highlight> will generate right shift (CSR, FSR) or left shift (CSL, FSL) signals causing the rising edge of P_CK to fall within the coarse delay window T<highlight><subscript>cd </subscript></highlight>and fine delay window T<highlight><subscript>fd </subscript></highlight>in time interval S<highlight><bold>3</bold></highlight>. </paragraph>
<paragraph id="P-0022" lvl="0"><number>&lsqb;0022&rsqb;</number> Alternatively, the above problem may cause the edge of signal P_CK to fall within time interval S<highlight><bold>2</bold></highlight>. In this situation, the coarse phase detector <highlight><bold>40</bold></highlight> will not generate any right shift CSR or left shift signals CSL. </paragraph>
<paragraph id="P-0023" lvl="0"><number>&lsqb;0023&rsqb;</number> In both of the conditions described above, the delay time T<highlight><subscript>d </subscript></highlight>of variable delay circuit <highlight><bold>20</bold></highlight> will not be correctly set. Therefore, it would be advantageous to determine variations in PVT conditions, so that the series number of the shift register array can be correctly preset and the delay time of a variable delay circuit will meet the delay requirements (e.g., setup time and hold time of a synchronous logic unit). </paragraph>
<paragraph id="P-0024" lvl="0"><number>&lsqb;0024&rsqb;</number> Further, it would generally be advantageous in the related art to determine the effects of various PVT conditions on a chip for the purposes of programming the delay components of the chip or for designing circuits to compensate for the PVT conditions. </paragraph>
</section>
<section>
<heading lvl="1">SUMMARY OF THE INVENTION </heading>
<paragraph id="P-0025" lvl="0"><number>&lsqb;0025&rsqb;</number> The present invention provides a delay compensation circuit, which measures the effects of PVT variations and digitizes the results of such measurements. The delay compensation circuit therefore provides information relating to the PVT conditions of a chip, which can be used to control variable delay elements in the chip or to design circuits that compensate for PVT conditions. </paragraph>
<paragraph id="P-0026" lvl="0"><number>&lsqb;0026&rsqb;</number> In one exemplary embodiment of the present invention, the delay compensation circuit amplifies the maximum delay time of a variable delay element, which includes a plurality of delay components connected in series. The amplified delay time falls within one of several predefined time intervals. The delay compensation determines which time interval the amplified delay time falls within and accordingly generates signals, which provide information regarding the PVT conditions. </paragraph>
<paragraph id="P-0027" lvl="0"><number>&lsqb;0027&rsqb;</number> In another exemplary embodiment, the delay compensation circuit includes a loop and two digital counters. The variable delay element is included in the loop. A single pulse signal is repeatedly transmitted through the loop a specific number of times. Every time the single pulse is transmitted through the variable delay element, the first digital counter is incremented by one. The second digital counter counts the number of cycles of an input clock signal that elapses while the single pulse travels through the loop for the specific number of times. Therefore, according to the second counted signal, the delay compensation circuit determines the predefined time interval in which the total delay time of the variable delay element falls. </paragraph>
<paragraph id="P-0028" lvl="0"><number>&lsqb;0028&rsqb;</number> Another exemplary embodiment of the present invention provides an improved variable delay control circuit that includes a delay compensation circuit, which ensures that the delay time of a variable delay element meets the setup and hold time requirements of a synchronous logic element despite variations in PVT conditions. </paragraph>
<paragraph id="P-0029" lvl="0"><number>&lsqb;0029&rsqb;</number> In another exemplary embodiment, each of the delay components of the variable delay element is a tapped delay circuit. The delay compensation circuit correctly presets the series number in a shift register array immediately after the variable delay control circuit is powered on. After the delay compensation circuit determines the time interval in which the amplified delay time falls, a specific series number associated with the determined time interval is loaded into the shift register array in order to preset the series number for the coarse delay multiplexor of each tapped delay circuit. After the preset series number is loaded, the variable delay control circuit adjusts this series number, and well as the parallel number for the fine delay elements, until the delay of the variable delay element meets the necessary requirements. </paragraph>
<paragraph id="P-0030" lvl="0"><number>&lsqb;0030&rsqb;</number> In another exemplary embodiment, the variable delay control circuit of the present invention can be used with a plurality of digital chips having setup and hold time requirements. Such chips may include input and output buffers, field programmable gate arrays (FPGAs), delay-locked loops (DLLs), digital phase-locked loops (PLLs), D flip-flops, and other types of synchronous logic elements. In addition, the PVT information provided by the delay compensation device of the present invention can be used to design such chips for use in timing critical applications. </paragraph>
<paragraph id="P-0031" lvl="0"><number>&lsqb;0031&rsqb;</number> Advantages of the present invention will become more apparent from the detailed description given hereafter. However, it should be understood that the detailed description and specific examples, while indicating preferred embodiments of the invention, are given by way of illustration only, since various changes and modification within the spirit and scope of the invention will become apparent to those skilled in the art from this detailed description.</paragraph>
</section>
</summary-of-invention>
<brief-description-of-drawings>
<section>
<heading lvl="1">BRIEF DESCRIPTION OF THE DRAWINGS </heading>
<paragraph id="P-0032" lvl="0"><number>&lsqb;0032&rsqb;</number> The present invention will become more fully understood from the detailed description given below and the accompanying drawings, which are given for purposes of illustration only, and thus do not limit the present invention. </paragraph>
<paragraph id="P-0033" lvl="0"><number>&lsqb;0033&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1A</cross-reference> illustrates the operation of a D flip-flop in which the data signal is also used as the clock signal. </paragraph>
<paragraph id="P-0034" lvl="0"><number>&lsqb;0034&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1B</cross-reference> illustrates the operation of a D flip-flop in which a delay element is inserted in the clock path. </paragraph>
<paragraph id="P-0035" lvl="0"><number>&lsqb;0035&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 2</cross-reference> illustrates a tapped delay circuit in the related art, which includes a coarse delay component and a fine delay component. </paragraph>
<paragraph id="P-0036" lvl="0"><number>&lsqb;0036&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3</cross-reference> illustrates a variable delay control circuit in the related art. </paragraph>
<paragraph id="P-0037" lvl="0"><number>&lsqb;0037&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 4</cross-reference> illustrates a timing diagram including the internal signals of a coarse phase detector and fine phase detector used in the variable delay control circuit of the related art. </paragraph>
<paragraph id="P-0038" lvl="0"><number>&lsqb;0038&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 5</cross-reference> illustrates a delay compensation circuit according to an exemplary embodiment of the present invention. </paragraph>
<paragraph id="P-0039" lvl="0"><number>&lsqb;0039&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 6</cross-reference> illustrates a variable delay control circuit according to an exemplary embodiment of the present invention. </paragraph>
<paragraph id="P-0040" lvl="0"><number>&lsqb;0040&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 7</cross-reference> illustrates a delay compensation circuit designed for use with the variable delay control circuit of <cross-reference target="DRAWINGS">FIG. 6</cross-reference>. </paragraph>
<paragraph id="P-0041" lvl="0"><number>&lsqb;0041&rsqb;</number> FIGS. <highlight><bold>8</bold></highlight>A-<highlight><bold>8</bold></highlight>F illustrate results of a circuit-level simulation of the operation of a variable control circuit according to the present invention, under worst case slow conditions. </paragraph>
<paragraph id="P-0042" lvl="0"><number>&lsqb;0042&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 9</cross-reference>A-C illustrate a circuit including an output buffer whose time critical design can be improved using the variable delay control circuit of the present invention.</paragraph>
</section>
</brief-description-of-drawings>
<detailed-description>
<section>
<heading lvl="1">DETAILED DESCRIPTION OF EXEMPLARY EMBODIMENTS </heading>
<paragraph id="P-0043" lvl="0"><number>&lsqb;0043&rsqb;</number> As described above, the present invention is directed to a delay compensation device, which measures the effects of PVT variations on a chip by measuring variations in the delay time of a delay component in the chip. The delay compensation circuit of the present invention can be utilized to program the delay time of the delay component and for providing information to be used in chip design to compensate for PVT conditions. Many of the figures referred to in connection with this detailed description contain similar components. The same reference labels will be used throughout the figures to denote similar components. </paragraph>
<paragraph id="P-0044" lvl="0"><number>&lsqb;0044&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 5</cross-reference> illustrates a delay compensation circuit <highlight><bold>60</bold></highlight> according to an exemplary embodiment of the present invention. An input clock signal WCLK and reset signal RSTN are input to a single pulse generator <highlight><bold>62</bold></highlight>. The input clock signal WCLK and the output of single pulse generator <highlight><bold>62</bold></highlight> are input to a two-input AND gate A<highlight><bold>1</bold></highlight>. The output signal D of AND gate A<highlight><bold>1</bold></highlight> is fed to OR gate A<highlight><bold>3</bold></highlight> and to single pulse generator <highlight><bold>62</bold></highlight>. The output terminal of OR gate A<highlight><bold>3</bold></highlight> is connected to variable delay element <highlight><bold>20</bold></highlight>. The output of variable delay element <highlight><bold>20</bold></highlight> is connected to a three-input AND gate A<highlight><bold>5</bold></highlight>, as well as a two-input AND gate A<highlight><bold>6</bold></highlight>. The output of gate A<highlight><bold>5</bold></highlight> is fed back to the second input of AND gate A<highlight><bold>3</bold></highlight>. The output K<highlight><bold>1</bold></highlight> of AND gate A<highlight><bold>6</bold></highlight> is connected to an m-bit digital counter <highlight><bold>64</bold></highlight>, hereafter referred to as a pulse signal counter. The output of pulse signal counter <highlight><bold>64</bold></highlight> is sent to a two-input AND gate A<highlight><bold>4</bold></highlight>, which outputs the delayed clock signal WCLK&prime;. The output of pulse signal counter <highlight><bold>64</bold></highlight> is also sent to an inverter. The output F of this inverter is connected to AND gates A<highlight><bold>5</bold></highlight> and A<highlight><bold>6</bold></highlight> and to signal pulse generator <highlight><bold>62</bold></highlight>. The output F of the inverter is also connected to a two-input AND gate A<highlight><bold>2</bold></highlight>. This AND gate A<highlight><bold>2</bold></highlight> also receives the input clock signal WCLK. The output of AND gate A<highlight><bold>2</bold></highlight> is connected to an n-bit digital counter <highlight><bold>66</bold></highlight>, hereafter referred to as an input signal counter. The outputs Q<highlight><bold>0</bold></highlight>, . . . , Qn of input signal counter <highlight><bold>66</bold></highlight> are connected to encoder <highlight><bold>68</bold></highlight>, which outputs the encoded signal consisting of bits i<highlight><subscript>1</subscript></highlight>, . . . i<highlight><subscript>n</subscript></highlight>. </paragraph>
<paragraph id="P-0045" lvl="0"><number>&lsqb;0045&rsqb;</number> The operation of the delay compensation circuit <highlight><bold>60</bold></highlight> will now be described. When the circuit is first powered on, signal RSTN resets the single pulse generator <highlight><bold>62</bold></highlight> and AND gate A<highlight><bold>5</bold></highlight> to a logic value of zero. The rest of the nodes in circuit <highlight><bold>60</bold></highlight> are similarly reset as the circuit <highlight><bold>60</bold></highlight> is first powered on. When the input clock signal WCLK first goes to a high logic level after resetting, the single pulse generator generates a single pulse (high logic level) of a short period. The single pulse is transmitted through gate A<highlight><bold>1</bold></highlight> to gate A<highlight><bold>3</bold></highlight>. In an exemplary embodiment, the single pulse generator <highlight><bold>62</bold></highlight> may comprise a pulse generator that generates pulses at a predefined interval. In such an embodiment, output D of gate A<highlight><bold>1</bold></highlight> can be fed back to the single pulse generator <highlight><bold>62</bold></highlight>, so that as signal D goes high after the first pulse, it prevents additional pulses from being generated by single pulse generator <highlight><bold>62</bold></highlight>. </paragraph>
<paragraph id="P-0046" lvl="0"><number>&lsqb;0046&rsqb;</number> The single pulse travels from gate A<highlight><bold>3</bold></highlight> to the &ldquo;delay_in&rdquo; input terminal of variable delay component <highlight><bold>20</bold></highlight> (whose delay time is set to maximum). Once the single pulse reaches the &ldquo;delay_out&rdquo; output of the variable delay component <highlight><bold>20</bold></highlight>, it is transmitted via gate A<highlight><bold>6</bold></highlight> to pulse signal counter <highlight><bold>64</bold></highlight>. Pulse signal counter <highlight><bold>64</bold></highlight> is then incremented by one. </paragraph>
<paragraph id="P-0047" lvl="0"><number>&lsqb;0047&rsqb;</number> The pulse is looped back to the &ldquo;delay_in&rdquo; input of variable delay component <highlight><bold>20</bold></highlight>, via gate A<highlight><bold>5</bold></highlight>, and propagates once again through the variable delay components. The single pulse repeatedly propagates this path until pulse signal counter <highlight><bold>64</bold></highlight> reaches a predetermined number K. While the single pulse is repeatedly propagating through the variable delay component <highlight><bold>20</bold></highlight>, and before pulse signal counter reaches K, input signal counter <highlight><bold>66</bold></highlight> counts each rising edge of clock signal WCLK that occurs. Once pulse signal counter reaches K, it outputs a high level signal M that causes inverter output signal F to become low. Accordingly, the output K<highlight><bold>1</bold></highlight> of AND gate A<highlight><bold>6</bold></highlight> becomes low, thereby stopping the count of pulse signal counter <highlight><bold>64</bold></highlight>. Similarly, the low signal F causes input signal counter <highlight><bold>66</bold></highlight> to stop counting, and further indicates to single pulse generator <highlight><bold>62</bold></highlight> that pulse signal counter <highlight><bold>64</bold></highlight> has completed its operation (i.e., counted up to K), allowing a new pulse to be generated. </paragraph>
<paragraph id="P-0048" lvl="0"><number>&lsqb;0048&rsqb;</number> At this point, the value W stored in input signal counter <highlight><bold>66</bold></highlight> represents the number of cycles of clock WCLK that occurs while a single pulse propagates K times through the variable delay component <highlight><bold>20</bold></highlight>. If T<highlight><subscript>d </subscript></highlight>represents the maximum delay time of the variable delay component <highlight><bold>20</bold></highlight>, and T<highlight><subscript>ck </subscript></highlight>represents the period of signal WCLK, then the following equation can be derived: </paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>W*T</italic></highlight><highlight><subscript>ck</subscript></highlight><highlight><italic>&equals;K*T</italic></highlight><highlight><subscript>d</subscript></highlight>&emsp;&emsp;Eq. (1) </in-line-formula></paragraph>
<paragraph id="P-0049" lvl="7"><number>&lsqb;0049&rsqb;</number> Therefore, the following relationship between T<highlight><subscript>d </subscript></highlight>and W must be true: </paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>T</italic></highlight><highlight><subscript>d</subscript></highlight>&equals;(<highlight><italic>T</italic></highlight><highlight><subscript>ck</subscript></highlight><highlight><italic>/K</italic></highlight>)*<highlight><italic>W</italic></highlight>&emsp;&emsp;Eq. (2) </in-line-formula></paragraph>
<paragraph id="P-0050" lvl="0"><number>&lsqb;0050&rsqb;</number> Since the values T<highlight><subscript>ck </subscript></highlight>and K are fixed, it is clear from equation (2) that the maximum delay time T<highlight><subscript>d </subscript></highlight>of the variable delay component <highlight><bold>20</bold></highlight> is directly proportional to the value W. Therefore, the value W is directly related to the PVT conditions, that effects the delay time T<highlight><subscript>d </subscript></highlight>of the variable delay component <highlight><bold>20</bold></highlight>. Accordingly, the delay compensation circuit <highlight><bold>60</bold></highlight> can provide a measurement of PVT conditions by determining the count value W. </paragraph>
<paragraph id="P-0051" lvl="0"><number>&lsqb;0051&rsqb;</number> It should be noted that <cross-reference target="DRAWINGS">FIG. 5</cross-reference> illustrates an exemplary embodiment of the delay compensation circuit <highlight><bold>60</bold></highlight> of the present invention and should not be construed as limiting the present invention. Various modifications and changes may be made to this circuit <highlight><bold>60</bold></highlight> without departing from the spirit and scope of the invention. For example, instead of counting the number of rising edges, the input signal counter <highlight><bold>66</bold></highlight> may count the number of descending edges of clock signal WCLK. Further, the variable delay element <highlight><bold>20</bold></highlight> may comprise one unit whose delay time is varied according to control signals. In an alternative embodiment where the delay compensation circuit is used to measure PVT conditions without controlling delay time, the variable delay element <highlight><bold>20</bold></highlight> may be replaced with a delay component whose delay time is not controllable. Other such modifications that are covered by the present invention will be apparent to those of ordinary skill in the art. </paragraph>
<paragraph id="P-0052" lvl="0"><number>&lsqb;0052&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 6</cross-reference> illustrates a variable delay control circuit <highlight><bold>200</bold></highlight> according to an exemplary embodiment of the present invention. The circuits illustrated in <cross-reference target="DRAWINGS">FIG. 6</cross-reference> and in <cross-reference target="DRAWINGS">FIG. 3</cross-reference> are similar, the only difference being that the variable delay control circuit <highlight><bold>200</bold></highlight> of <cross-reference target="DRAWINGS">FIG. 6</cross-reference> contains delay compensation device <highlight><bold>60</bold></highlight> in circuit <highlight><bold>200</bold></highlight>. The delay compensation device <highlight><bold>60</bold></highlight> is operable to preset the series number of the shift register array <highlight><bold>30</bold></highlight> after the variable delay control circuit <highlight><bold>200</bold></highlight> is first powered on. </paragraph>
<paragraph id="P-0053" lvl="0"><number>&lsqb;0053&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 7</cross-reference> illustrates a delay compensation circuit <highlight><bold>60</bold></highlight> specifically designed for use with the variable delay control circuit of <cross-reference target="DRAWINGS">FIG. 6</cross-reference>. It should be noted that in one exemplary embodiment, the delay compensation circuit <highlight><bold>60</bold></highlight> may utilize the same variable delay component <highlight><bold>20</bold></highlight>, which is found in variable delay control circuit <highlight><bold>200</bold></highlight> (i.e., the variable delay component <highlight><bold>20</bold></highlight> of <cross-reference target="DRAWINGS">FIG. 7</cross-reference> may be the same as the one in <cross-reference target="DRAWINGS">FIG. 6</cross-reference>). In an alternative embodiment, the variable delay component <highlight><bold>20</bold></highlight> used by the circuit <highlight><bold>60</bold></highlight> of <cross-reference target="DRAWINGS">FIG. 7</cross-reference> may comprise identical components to the variable delay component <highlight><bold>20</bold></highlight> of <cross-reference target="DRAWINGS">FIG. 6</cross-reference>. </paragraph>
<paragraph id="P-0054" lvl="0"><number>&lsqb;0054&rsqb;</number> In the delay compensation device <highlight><bold>60</bold></highlight> of <cross-reference target="DRAWINGS">FIG. 7</cross-reference>, the outputs SD<highlight><bold>5</bold></highlight>, SD<highlight><bold>10</bold></highlight>, and SD<highlight><bold>20</bold></highlight> of encoder <highlight><bold>68</bold></highlight> are connected to the shift register array <highlight><bold>30</bold></highlight> of the variable delay control circuit <highlight><bold>200</bold></highlight>. Encoder <highlight><bold>68</bold></highlight> encodes the counted number W of input signal counter <highlight><bold>66</bold></highlight>. After the single pulse has propagated through the delay component <highlight><bold>20</bold></highlight> a predetermined number of times, K, the signals SD<highlight><bold>5</bold></highlight>, SD<highlight><bold>10</bold></highlight>, and SD<highlight><bold>20</bold></highlight> are output and used to control the delay time of the variable delay component <highlight><bold>20</bold></highlight>. </paragraph>
<paragraph id="P-0055" lvl="0"><number>&lsqb;0055&rsqb;</number> Similar to the operation of circuit <highlight><bold>60</bold></highlight> in <cross-reference target="DRAWINGS">FIG. 5</cross-reference>, when the count value of pulse signal counter <highlight><bold>64</bold></highlight> reaches the predetermined number K, signal M becomes high and signal F becomes low. The single pulse propagating through the variable delay component <highlight><bold>20</bold></highlight> is therefore diminished at AND gate A<highlight><bold>5</bold></highlight>. Further, signal F causes the single pulse generator to generate a constant high output signal. Therefore, the clock signal WCLK can pass through gates A<highlight><bold>3</bold></highlight> and A<highlight><bold>4</bold></highlight> to generate the &ldquo;shift_clk&rdquo; signal. </paragraph>
<paragraph id="P-0056" lvl="0"><number>&lsqb;0056&rsqb;</number> Signals M, &ldquo;shift_clk,&rdquo; and DUPDENB are input to the SRLD signal generator <highlight><bold>65</bold></highlight>. DUPDENB is a &ldquo;Delay Update Enable&rdquo; control signal, which determines whether the delay compensation device <highlight><bold>60</bold></highlight> is operative to set a series number into the shift register array <highlight><bold>30</bold></highlight> by loading signals SD<highlight><bold>5</bold></highlight>, SD<highlight><bold>10</bold></highlight>, and SD<highlight><bold>20</bold></highlight>. For instance, should delay compensation device <highlight><bold>60</bold></highlight> be used only to preset the series number once, immediately after the variable delay control circuit <highlight><bold>200</bold></highlight> is powered on, then DUPDENB will have a high value only during the initial presetting. However, if DUPDENB is set high periodically, then the delay compensation circuit <highlight><bold>60</bold></highlight> can be used to periodically set the series number in the shift register array <highlight><bold>30</bold></highlight>. </paragraph>
<paragraph id="P-0057" lvl="0"><number>&lsqb;0057&rsqb;</number> As a result of high M, DUPDENB, and &ldquo;shift_clk&rdquo; signals, SRLD signal generator <highlight><bold>65</bold></highlight> generates a high SRLD signal, which causes the encoder to load outputs SD<highlight><bold>5</bold></highlight>, SD<highlight><bold>10</bold></highlight>, and SD<highlight><bold>20</bold></highlight>. </paragraph>
<paragraph id="P-0058" lvl="0"><number>&lsqb;0058&rsqb;</number> As shown in <cross-reference target="DRAWINGS">FIG. 7</cross-reference>, the variable delay component <highlight><bold>20</bold></highlight> comprises a plurality of tapped delay circuits <highlight><bold>10</bold></highlight> connected in series. <cross-reference target="DRAWINGS">FIG. 7</cross-reference> merely illustrates an exemplary embodiment. The variable delay component <highlight><bold>20</bold></highlight> can be any other delay component whose delay time can be adjusted by control signals. </paragraph>
<paragraph id="P-0059" lvl="0"><number>&lsqb;0059&rsqb;</number> In the exemplary embodiment of <cross-reference target="DRAWINGS">FIG. 7</cross-reference>, the encoder <highlight><bold>68</bold></highlight> generates the serial number to be preset in the shift register array <highlight><bold>30</bold></highlight> based on the value of W, which is counted by input signal counter <highlight><bold>66</bold></highlight> (as described above with respect to <cross-reference target="DRAWINGS">FIG. 5</cross-reference>). Should the value of W be very high, then the delay time of each tapped delay circuit <highlight><bold>10</bold></highlight> will also be very high according to equation (2). Therefore, a rather small series number should be preset in the shift register array <highlight><bold>30</bold></highlight>. </paragraph>
<paragraph id="P-0060" lvl="0"><number>&lsqb;0060&rsqb;</number> For instance, if a tapped delay circuit <highlight><bold>10</bold></highlight> contains <highlight><bold>25</bold></highlight> coarse delay components, then encoder outputs SD<highlight><bold>5</bold></highlight>, SD<highlight><bold>10</bold></highlight>, and SD<highlight><bold>20</bold></highlight> may correspond to series numbers 5, 10, and 20, respectively. As mentioned above, when input signal counter <highlight><bold>66</bold></highlight> counts a high value W, the series number will be preset to a low number. In response to a high value of W, the encoder <highlight><bold>68</bold></highlight> may generate a &ldquo;1&rdquo; bit at output SD<highlight><bold>5</bold></highlight> and &ldquo;0&rdquo; bits at outputs SD<highlight><bold>10</bold></highlight> and SD<highlight><bold>20</bold></highlight> to preset the series number to a value of five. </paragraph>
<paragraph id="P-0061" lvl="0"><number>&lsqb;0061&rsqb;</number> A circuit-level software simulation (using SPICE) of the variable delay control circuit <highlight><bold>200</bold></highlight> of <cross-reference target="DRAWINGS">FIG. 6</cross-reference> and the delay compensation device <highlight><bold>60</bold></highlight> of <cross-reference target="DRAWINGS">FIG. 7</cross-reference> will be described below with respect to FIGS. <highlight><bold>8</bold></highlight>A-<highlight><bold>8</bold></highlight>F. According to this simulation, the variable delay control circuit <highlight><bold>200</bold></highlight> and the delay compensation device <highlight><bold>60</bold></highlight> are implemented in a DDR (double data rate) SDRAM controller for data read capture. The data clock is set at 133 megahertz (MHz). According to the chip design of the SDRAM controller, the optimal delay time of each tapped delay circuit <highlight><bold>10</bold></highlight> is 1.5 nanoseconds (ns). Since the data clock cycle is about 7.5 ns, the variable delay component <highlight><bold>20</bold></highlight> is designed to contain five tapped delay circuits. </paragraph>
<paragraph id="P-0062" lvl="0"><number>&lsqb;0062&rsqb;</number> It should be noted that one way to determine the number of coarse delay elements to be included in each tapped delay circuit <highlight><bold>10</bold></highlight> is to divide the optimal delay time of tapped delay circuit <highlight><bold>10</bold></highlight> by the minimum delay time T<highlight><subscript>c </subscript></highlight>of one coarse delay element. For example, an optimal delay time of 1.5 ns and a minimum coarse delay element delay time T<highlight><subscript>c </subscript></highlight>of 0.1 ns require at least fifteen coarse delay elements. Also, the number of fine delay elements can be determined by dividing the minimum delay time T<highlight><subscript>c </subscript></highlight>of one of the coarse delay elements by the minimum delay time T<highlight><subscript>f </subscript></highlight>of one fine delay element. For example, a minimum delay time T<highlight><subscript>c </subscript></highlight>of 0.1 ns for each coarse delay element and a minimum delay time T<highlight><subscript>f </subscript></highlight>of 0.01 ns for each fine delay element require ten fine delay elements. </paragraph>
<paragraph id="P-0063" lvl="0"><number>&lsqb;0063&rsqb;</number> In the simulation presently described with respect to FIGS. <highlight><bold>8</bold></highlight>A-<highlight><bold>8</bold></highlight>F, the variable delay control circuit <highlight><bold>200</bold></highlight> is configured such that each tapped delay circuit <highlight><bold>10</bold></highlight> contains forty coarse delay elements and ten fine delay elements. </paragraph>
<paragraph id="P-0064" lvl="0"><number>&lsqb;0064&rsqb;</number> The delay compensation device <highlight><bold>60</bold></highlight> will amplify the maximum delay time T<highlight><subscript>d </subscript></highlight>of the variable delay component <highlight><bold>20</bold></highlight>, and determine one of three predefined time intervals in which T<highlight><subscript>d </subscript></highlight>falls by determining the value of W after the single pulse has propagated K times through the delay component <highlight><bold>20</bold></highlight>. The parameter K has been set at ten for the simulated delay compensation device <highlight><bold>60</bold></highlight>. </paragraph>
<paragraph id="P-0065" lvl="0"><number>&lsqb;0065&rsqb;</number> The predefined time intervals of the maximum delay time T<highlight><subscript>d </subscript></highlight>for this simulation are 0-4.25 ns, 4.25-11 ns, and 11 ns and above, correspond to the actual maximum delay time of each tapped delay circuit <highlight><bold>10</bold></highlight>. Accordingly, if W is determined to be low, i.e., if the maximum delay time T<highlight><subscript>d </subscript></highlight>of variable delay component <highlight><bold>20</bold></highlight> is determined to fall between 0 and 4.25 ns, then the encoder <highlight><bold>68</bold></highlight> will preset the series number to a high number by transmitting a &ldquo;1&rdquo; bit in SD<highlight><bold>20</bold></highlight>. Conversely, if W is determined to be high, i.e., the maximum delay time T<highlight><subscript>d </subscript></highlight>is above 11 ns, then the encoder <highlight><bold>68</bold></highlight> will preset a low series number by transmitting a &ldquo;1&rdquo; bit in SD<highlight><bold>5</bold></highlight>. </paragraph>
<paragraph id="P-0066" lvl="0"><number>&lsqb;0066&rsqb;</number> In this particular simulation, the PVT parameters have been set according to the worst case slow conditions. FIGS. <highlight><bold>8</bold></highlight>A-<highlight><bold>8</bold></highlight>F show signal waveforms at particular nodes of the simulated variable delay control circuit <highlight><bold>200</bold></highlight> and the delay compensation circuit <highlight><bold>60</bold></highlight>. </paragraph>
<paragraph id="P-0067" lvl="0"><number>&lsqb;0067&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 8A</cross-reference> shows the simulated waveforms of the SRLD signal and the &ldquo;delay_out&rdquo; signal of delay compensation circuit <highlight><bold>60</bold></highlight>. The tenth &ldquo;delay_out&rdquo; pulse occurs at 165 ns, indicating that the single pulse has propagated ten times through the variable delay component <highlight><bold>20</bold></highlight>. In response, SRLD signal becomes high (at 166 ns), and encoder <highlight><bold>68</bold></highlight> loads the preset series number into the shift register array <highlight><bold>30</bold></highlight>. <cross-reference target="DRAWINGS">FIG. 8B</cross-reference> shows that for the worst case slow conditions, the SD<highlight><bold>5</bold></highlight> signal (series number&equals;5) becomes high (&ldquo;1&rdquo; bit), while the SD<highlight><bold>10</bold></highlight> and SD<highlight><bold>20</bold></highlight> signals become low (&ldquo;0&rdquo; bits), at 145 ns. Therefore, the outputs SD<highlight><bold>5</bold></highlight>&equals;1, SD<highlight><bold>10</bold></highlight>&equals;0, and SD20&equals;0 are loaded into the shift register array at 166 ns. </paragraph>
<paragraph id="P-0068" lvl="0"><number>&lsqb;0068&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 8C</cross-reference> illustrates the control signals transmitted from the shift register array <highlight><bold>30</bold></highlight> to the coarse delay multiplexors MUXA in variable delay control circuit <highlight><bold>200</bold></highlight>. In particular, <cross-reference target="DRAWINGS">FIG. 8C</cross-reference> shows the shifting of the series number from its preset value to its final value. At about 175 ns, the series number is preset at five. This is indicated by signal c<highlight><bold>5</bold></highlight> becoming high, where c<highlight><bold>5</bold></highlight> is the control signal that communicates to the coarse delay multiplexors MUX A that the series number is five. After three shifts of the series number, in response to CSL signals generated by coarse phase detector <highlight><bold>40</bold></highlight>, the series number is set to its final value of two, at about 240 ns. At this point, signal c<highlight><bold>2</bold></highlight> becomes high. The control signal C<highlight><bold>2</bold></highlight> communicates to the coarse delay multiplexors MUX A that the series number is two. </paragraph>
<paragraph id="P-0069" lvl="0"><number>&lsqb;0069&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 8D</cross-reference> illustrates the shifting of the parallel number according to signals generated by the fine phase detector <highlight><bold>50</bold></highlight> of variable delay control circuit <highlight><bold>200</bold></highlight>. The parallel number is preset to S<highlight><bold>6</bold></highlight> in the simulated circuit. Since the delay time of the fine delay component of each tapped delay circuit <highlight><bold>10</bold></highlight> is so small (about {fraction (1/10)}<highlight><bold>0</bold></highlight> of the delay time of the coarse delay component), the preset value of the parallel number will not affect the region where the delayed clock signal P_CK of variable delay control circuit <highlight><bold>200</bold></highlight> falls. Therefore the preset value of the parallel number will not cause any problems as described above with respect to <cross-reference target="DRAWINGS">FIG. 4</cross-reference>. </paragraph>
<paragraph id="P-0070" lvl="0"><number>&lsqb;0070&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 8D</cross-reference> illustrates that the parallel number is shifted twice, from the preset value of six (where control signal s<highlight><bold>6</bold></highlight> is high) to the final value of eight (where control signal s<highlight><bold>8</bold></highlight> is high). The final setting of the parallel number to eight occurs at about 308 ns. </paragraph>
<paragraph id="P-0071" lvl="0"><number>&lsqb;0071&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 8E</cross-reference> illustrates that after the final setting of the parallel number, the signal P_CK becomes stable. This occurs at about 315.5 ns, at which point P_CK signal falls within time windows T<highlight><subscript>cd </subscript></highlight>(between signals P_d<highlight><bold>0</bold></highlight> and P_dl of <cross-reference target="DRAWINGS">FIG. 4</cross-reference>) and T<highlight><subscript>fd </subscript></highlight>(between signals P_d<highlight><bold>2</bold></highlight> and P_d<highlight><bold>3</bold></highlight> of <cross-reference target="DRAWINGS">FIG. 4</cross-reference>). </paragraph>
<paragraph id="P-0072" lvl="0"><number>&lsqb;0072&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 8F</cross-reference> shows the signal waveforms at nodes PL<highlight><bold>2</bold></highlight> and PL<highlight><bold>3</bold></highlight> of the variable delay control circuit <highlight><bold>200</bold></highlight> in <cross-reference target="DRAWINGS">FIG. 6</cross-reference>. The time difference between the signals PL<highlight><bold>2</bold></highlight> and PL<highlight><bold>3</bold></highlight> represents the delay time of one tapped delay circuit <highlight><bold>10</bold></highlight>, whose series and parallel numbers are finally set. As shown in <cross-reference target="DRAWINGS">FIG. 8</cross-reference>F, the rising edge of PL<highlight><bold>2</bold></highlight> occurs at 318.6709 ns, while the rising edge of PL<highlight><bold>3</bold></highlight> occurs at 320.1887 ns. Therefore, the delay time of the tapped delay element is 1.5178 ns (320.1887&minus;318.6709&equals;1.5178). This results in a 0.0178 ns error with respect to the designed delay time of 1.5 ns for each tapped delay element. Therefore variable delay control circuit <highlight><bold>200</bold></highlight> of the present invention meets the design requirement. </paragraph>
<paragraph id="P-0073" lvl="0"><number>&lsqb;0073&rsqb;</number> Similar simulations have been performed for the variable delay control circuit <highlight><bold>100</bold></highlight> of the related art. In the simulation, the variable delay control circuit <highlight><bold>100</bold></highlight> is automatically preset to 13 (i.e., about half of the maximum series number of 25). After the series number and parallel numbers are shifted to their final values, the delay time of each tapped delay circuit is determined to be 3.450 ns. This corresponds to an error of 1.950 with respect to the optimal delay time of 1.5 ns. Therefore, under worst case slow conditions, the variable delay control circuit <highlight><bold>100</bold></highlight> does not meet the design requirements of the SDRAM controller. Accordingly, the simulations show that the delay compensation device <highlight><bold>60</bold></highlight> provides the variable delay control circuit <highlight><bold>200</bold></highlight> of the present invention a marked improvement over the variable delay control circuit <highlight><bold>100</bold></highlight> of the related art. </paragraph>
<paragraph id="P-0074" lvl="0"><number>&lsqb;0074&rsqb;</number> According to another exemplary embodiment of the invention, the variable delay control circuit <highlight><bold>200</bold></highlight> can be used with timing critical applications, in which circuits are designed to operate the same way regardless of the PVT conditions. <cross-reference target="DRAWINGS">FIG. 9A</cross-reference> illustrates a particular timing critical application, in which the circuit includes an output buffer BUF. In particular, buffer BUF must have an operating time window that will perform the required data operations, regardless of whether the circuit is operating according to worst case slow conditions or worst case fast conditions (i.e., regardless of PVT conditions). </paragraph>
<paragraph id="P-0075" lvl="0"><number>&lsqb;0075&rsqb;</number> In circuits such as the one shown in <cross-reference target="DRAWINGS">FIG. 9</cross-reference>A, the worst case slow conditions can have a derating factor between 2.0 and 4.0 with respect to the worst case fast conditions. For the circuit in <cross-reference target="DRAWINGS">FIG. 9A, a</cross-reference> derating factor of 3 will be assumed. Accordingly, if the clock signal has a 5 ns delay from the clock input to the buffer BUF output under worst slow conditions, then the delay under worst fast conditions will be about 1.67 ns (5/3&equals;1.67). Therefore, the clock delay window is 5&minus;1.67 &equals;3.33 ns (as shown in the timing diagram of <cross-reference target="DRAWINGS">FIG. 9B</cross-reference>). </paragraph>
<paragraph id="P-0076" lvl="0"><number>&lsqb;0076&rsqb;</number> If the device connected to the output of buffer BUF has a setup requirement of 1.0 ns and a hold requirement of 0.5 ns, then the data valid window must be at least 1.5 ns. However, another 0.5 to 1.0 ns should be included in the data valid window to account for circuit board effects. Therefore, a data valid window can be as high as 2.5 ns, as shown in <cross-reference target="DRAWINGS">FIG. 9B</cross-reference>. The operating window of buffer BUF, which is defined by the clock delay and the data valid portions, is about 6 ns (3.33&plus;2.5&equals;5.83 ns). Therefore, a data clock having a period of about 6 ns is required for the circuit of <cross-reference target="DRAWINGS">FIG. 9A</cross-reference>. </paragraph>
<paragraph id="P-0077" lvl="0"><number>&lsqb;0077&rsqb;</number> However, the variable delay control circuit <highlight><bold>200</bold></highlight> of the present invention can be inserted in the clock path before buffer BUF to delay the clock signal. The variable delay control circuit <highlight><bold>200</bold></highlight> will control the delay to be nearly 0 ns for worst case slow conditions and 3.33 ns for worst case fast conditions. Therefore, the clock signal will be delayed for 5 ns by the variable delay control circuit <highlight><bold>200</bold></highlight> under all operating conditions, as shown in the timing diagram of <cross-reference target="DRAWINGS">FIG. 9C</cross-reference>. Therefore, the 3.33 ns clock delay window caused by PVT variations can be eliminated from the operating window of buffer BUF, and the period of the clock signal can be reduced to about 3 ns. Accordingly, the variable delay control circuit <highlight><bold>200</bold></highlight> allows the clock signal frequency to be doubled. </paragraph>
<paragraph id="P-0078" lvl="0"><number>&lsqb;0078&rsqb;</number> Further, if a variable delay control circuit <highlight><bold>200</bold></highlight> and input buffer are used in conjunction with the device that receives the output of buffer BUF, the setup and hold times of this device can be significantly reduced (even reduced to nearly zero). Accordingly, the operating window of the circuit could be reduced to 1.5 ns, resulting in another doubling of the clock frequency. </paragraph>
<paragraph id="P-0079" lvl="0"><number>&lsqb;0079&rsqb;</number> The improvement of clock rate is one of the most important and challenging fields in chip design. The present invention can be used to improve the clock rates of chips used in many different applications. These applications may include input/output buffers, memories, FPGAs, digital PLLs, DLLs, synchronous logic elements, etc. </paragraph>
<paragraph id="P-0080" lvl="0"><number>&lsqb;0080&rsqb;</number> Another advantage of the present invention is that it consumes very little hardware because of the delay feedback loop structure of the delay compensation circuit <highlight><bold>60</bold></highlight>. Therefore, the low number of gates needed for the delay compensation circuit allows for chip area and power consumption to be conserved. </paragraph>
<paragraph id="P-0081" lvl="0"><number>&lsqb;0081&rsqb;</number> The delay compensation circuit <highlight><bold>60</bold></highlight> of the present invention may be used in order to control the delay time of different types of variable delay elements used in a circuit. Further, the delay compensation circuit <highlight><bold>60</bold></highlight> may be used to measure the effects of PVT conditions and provide such information to circuit designers. Such measurements can be used to design chips that compensate for varying PVT conditions. </paragraph>
<paragraph id="P-0082" lvl="0"><number>&lsqb;0082&rsqb;</number> However, the present invention is not limited to compensating for PVT conditions. For example, clock skew may be caused by clock loading differences, lengths of interconnections, clock buffers, etc. in a chip. Therefore the variable delay control circuit <highlight><bold>200</bold></highlight> and the delay compensation device <highlight><bold>60</bold></highlight> may be used to compensate for, or to improve the design of, these elements within the chip. </paragraph>
<paragraph id="P-0083" lvl="0"><number>&lsqb;0083&rsqb;</number> The invention being thus described, it will be obvious that the same may be varied in many ways. Such variations are not to be regarded as a departure from the spirit and scope of the invention, and all such modifications as would be obvious to one skilled in the art are intended to be included with the scope of the following claims. </paragraph>
</section>
</detailed-description>
</subdoc-description>
<subdoc-claims>
<heading lvl="1">What is claimed is: </heading>
<claim id="CLM-00001">
<claim-text><highlight><bold>1</bold></highlight>. An apparatus comprising: 
<claim-text>an input for inputting a signal; </claim-text>
<claim-text>a variable delay component through which a generated pulse signal is repeatedly propagated a number of times; and </claim-text>
<claim-text>an input signal counter for counting a number of cycles of said input signal that elapse during the propagation of said pulse signal for said number of times. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00002">
<claim-text><highlight><bold>2</bold></highlight>. The apparatus of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein the delay time of said variable delay component is set according to the number of cycles counted by said input signal counter. </claim-text>
</claim>
<claim id="CLM-00003">
<claim-text><highlight><bold>3</bold></highlight>. The apparatus of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, further comprising a pulse signal counter for counting the number of times said pulse signal has propagated through said one or more delay components. </claim-text>
</claim>
<claim id="CLM-00004">
<claim-text><highlight><bold>4</bold></highlight>. The apparatus of <dependent-claim-reference depends_on="CLM-00003">claim 3</dependent-claim-reference>, wherein said input signal counter outputs a count after the count of said pulse signal counter reaches said number of times. </claim-text>
</claim>
<claim id="CLM-00005">
<claim-text><highlight><bold>5</bold></highlight>. The apparatus of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein said variable delay component comprises one or more tapped delay circuit connected in series. </claim-text>
</claim>
<claim id="CLM-00006">
<claim-text><highlight><bold>6</bold></highlight>. The apparatus of <dependent-claim-reference depends_on="CLM-00005">claim 5</dependent-claim-reference>, wherein each of said one or more tapped delay circuits includes 
<claim-text>a plurality of tapped coarse delay cells in series; and </claim-text>
<claim-text>a coarse delay multiplexor for outputting the signal from one of said plurality of tapped coarse delay cells according to a transmitted series number, </claim-text>
<claim-text>wherein the delay time of said variable delay component is set at least in part by said transmitted series number. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00007">
<claim-text><highlight><bold>7</bold></highlight>. The apparatus of <dependent-claim-reference depends_on="CLM-00006">claim 6</dependent-claim-reference>, wherein said each of said one or more tapped delay circuits further includes 
<claim-text>a plurality of fine tapped delay cells connected in parallel, each of said plurality of fine tapped delay cells receiving the signal output from said coarse delay multiplexor; and </claim-text>
<claim-text>a fine delay multiplexor for outputting the signal of one of said plurality of fine tapped delay cells according to a transmitted parallel number, </claim-text>
<claim-text>wherein the delay time of said variable delay component is set based on said transmitted series number and said transmitted parallel number. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00008">
<claim-text><highlight><bold>8</bold></highlight>. The apparatus of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, further comprising an output for outputting a signal representative of PVT information of a microchip, said output signal being generated based on the count of said input signal counter. </claim-text>
</claim>
<claim id="CLM-00009">
<claim-text><highlight><bold>9</bold></highlight>. A variable delay circuit comprising: 
<claim-text>a variable delay component for delaying an input signal, said variable delay component including one or more tapped delay circuits connected in series, each of said one or more tapped delay circuits including 
<claim-text>a plurality of tapped coarse delay cells connected in series, and </claim-text>
<claim-text>a coarse delay multiplexor for outputting the signal from one of said plurality of tapped coarse delay cells based on a determined series number; </claim-text>
</claim-text>
<claim-text>a coarse phase detector for comparing the phase of said input signal and the delayed signal output by said delay component, said series number being increased or decreased based the comparison of said coarse phase detector; and </claim-text>
<claim-text>a setting device for setting said series number according to a variation in the delay component based on PVT. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00010">
<claim-text><highlight><bold>10</bold></highlight>. The variable delay circuit of <dependent-claim-reference depends_on="CLM-00009">claim 9</dependent-claim-reference>, wherein each of said one or more tapped delay circuits further including 
<claim-text>a plurality of fine delay cells in parallel for receiving the selected signal from said coarse delay multiplexor, each fine delay component having a different associated delay time, and </claim-text>
<claim-text>a fine delay multiplexor for selecting a signal from said plurality of fine delay cells based on a determined parallel number. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00011">
<claim-text><highlight><bold>11</bold></highlight>. The variable delay circuit of <dependent-claim-reference depends_on="CLM-00011">claim 10</dependent-claim-reference>, further comprising: 
<claim-text>a fine phase detector for comparing the phase of said input signal and the delayed signal output by said delay component, said parallel number being increased or decreased based on the comparison of said fine phase detector. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00012">
<claim-text><highlight><bold>12</bold></highlight>. The variable delay circuit of <dependent-claim-reference depends_on="CLM-00009">claim 9</dependent-claim-reference>, wherein said setting device sets said series number based on a counted number of cycles of said input signal that elapse during an amplified delay time of said variable delay component. </claim-text>
</claim>
<claim id="CLM-00013">
<claim-text><highlight><bold>13</bold></highlight>. The variable delay circuit of <dependent-claim-reference depends_on="CLM-00011">claim 12</dependent-claim-reference>, wherein said amplified delay time includes the time in which a single pulse signal repeatedly propagates a number of times through said one or more tapped delay circuits.</claim-text>
</claim>
</subdoc-claims>
<subdoc-drawings id="DRAWINGS">
<heading lvl="0" align="CENTER">Drawings</heading>
<representative-figure>2</representative-figure>
<figure id="figure-D00000">
<image id="EMI-D00000" file="US20030001650A1-20030102-D00000.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00001">
<image id="EMI-D00001" file="US20030001650A1-20030102-D00001.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00002">
<image id="EMI-D00002" file="US20030001650A1-20030102-D00002.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00003">
<image id="EMI-D00003" file="US20030001650A1-20030102-D00003.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00004">
<image id="EMI-D00004" file="US20030001650A1-20030102-D00004.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00005">
<image id="EMI-D00005" file="US20030001650A1-20030102-D00005.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00006">
<image id="EMI-D00006" file="US20030001650A1-20030102-D00006.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00007">
<image id="EMI-D00007" file="US20030001650A1-20030102-D00007.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00008">
<image id="EMI-D00008" file="US20030001650A1-20030102-D00008.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00009">
<image id="EMI-D00009" file="US20030001650A1-20030102-D00009.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00010">
<image id="EMI-D00010" file="US20030001650A1-20030102-D00010.TIF" imf="TIFF" ti="DR"/>
</figure>
</subdoc-drawings>
</patent-application-publication>
