<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE patent-application-publication SYSTEM "pap-v16-2002-01-01.dtd" [
<!ENTITY US20030005140A1-20030102-M00001.NB SYSTEM "US20030005140A1-20030102-M00001.NB" NDATA NB>
<!ENTITY US20030005140A1-20030102-M00001.TIF SYSTEM "US20030005140A1-20030102-M00001.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-M00002.NB SYSTEM "US20030005140A1-20030102-M00002.NB" NDATA NB>
<!ENTITY US20030005140A1-20030102-M00002.TIF SYSTEM "US20030005140A1-20030102-M00002.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-M00003.NB SYSTEM "US20030005140A1-20030102-M00003.NB" NDATA NB>
<!ENTITY US20030005140A1-20030102-M00003.TIF SYSTEM "US20030005140A1-20030102-M00003.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-M00004.NB SYSTEM "US20030005140A1-20030102-M00004.NB" NDATA NB>
<!ENTITY US20030005140A1-20030102-M00004.TIF SYSTEM "US20030005140A1-20030102-M00004.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-M00005.NB SYSTEM "US20030005140A1-20030102-M00005.NB" NDATA NB>
<!ENTITY US20030005140A1-20030102-M00005.TIF SYSTEM "US20030005140A1-20030102-M00005.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-M00006.NB SYSTEM "US20030005140A1-20030102-M00006.NB" NDATA NB>
<!ENTITY US20030005140A1-20030102-M00006.TIF SYSTEM "US20030005140A1-20030102-M00006.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-M00007.NB SYSTEM "US20030005140A1-20030102-M00007.NB" NDATA NB>
<!ENTITY US20030005140A1-20030102-M00007.TIF SYSTEM "US20030005140A1-20030102-M00007.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-M00008.NB SYSTEM "US20030005140A1-20030102-M00008.NB" NDATA NB>
<!ENTITY US20030005140A1-20030102-M00008.TIF SYSTEM "US20030005140A1-20030102-M00008.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-M00009.NB SYSTEM "US20030005140A1-20030102-M00009.NB" NDATA NB>
<!ENTITY US20030005140A1-20030102-M00009.TIF SYSTEM "US20030005140A1-20030102-M00009.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-M00010.NB SYSTEM "US20030005140A1-20030102-M00010.NB" NDATA NB>
<!ENTITY US20030005140A1-20030102-M00010.TIF SYSTEM "US20030005140A1-20030102-M00010.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-M00011.NB SYSTEM "US20030005140A1-20030102-M00011.NB" NDATA NB>
<!ENTITY US20030005140A1-20030102-M00011.TIF SYSTEM "US20030005140A1-20030102-M00011.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-M00012.NB SYSTEM "US20030005140A1-20030102-M00012.NB" NDATA NB>
<!ENTITY US20030005140A1-20030102-M00012.TIF SYSTEM "US20030005140A1-20030102-M00012.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-M00013.NB SYSTEM "US20030005140A1-20030102-M00013.NB" NDATA NB>
<!ENTITY US20030005140A1-20030102-M00013.TIF SYSTEM "US20030005140A1-20030102-M00013.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-M00014.NB SYSTEM "US20030005140A1-20030102-M00014.NB" NDATA NB>
<!ENTITY US20030005140A1-20030102-M00014.TIF SYSTEM "US20030005140A1-20030102-M00014.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-M00015.NB SYSTEM "US20030005140A1-20030102-M00015.NB" NDATA NB>
<!ENTITY US20030005140A1-20030102-M00015.TIF SYSTEM "US20030005140A1-20030102-M00015.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-M00016.NB SYSTEM "US20030005140A1-20030102-M00016.NB" NDATA NB>
<!ENTITY US20030005140A1-20030102-M00016.TIF SYSTEM "US20030005140A1-20030102-M00016.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-M00017.NB SYSTEM "US20030005140A1-20030102-M00017.NB" NDATA NB>
<!ENTITY US20030005140A1-20030102-M00017.TIF SYSTEM "US20030005140A1-20030102-M00017.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-M00018.NB SYSTEM "US20030005140A1-20030102-M00018.NB" NDATA NB>
<!ENTITY US20030005140A1-20030102-M00018.TIF SYSTEM "US20030005140A1-20030102-M00018.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-M00019.NB SYSTEM "US20030005140A1-20030102-M00019.NB" NDATA NB>
<!ENTITY US20030005140A1-20030102-M00019.TIF SYSTEM "US20030005140A1-20030102-M00019.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-M00020.NB SYSTEM "US20030005140A1-20030102-M00020.NB" NDATA NB>
<!ENTITY US20030005140A1-20030102-M00020.TIF SYSTEM "US20030005140A1-20030102-M00020.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-M00021.NB SYSTEM "US20030005140A1-20030102-M00021.NB" NDATA NB>
<!ENTITY US20030005140A1-20030102-M00021.TIF SYSTEM "US20030005140A1-20030102-M00021.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-M00022.NB SYSTEM "US20030005140A1-20030102-M00022.NB" NDATA NB>
<!ENTITY US20030005140A1-20030102-M00022.TIF SYSTEM "US20030005140A1-20030102-M00022.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-M00023.NB SYSTEM "US20030005140A1-20030102-M00023.NB" NDATA NB>
<!ENTITY US20030005140A1-20030102-M00023.TIF SYSTEM "US20030005140A1-20030102-M00023.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-M00024.NB SYSTEM "US20030005140A1-20030102-M00024.NB" NDATA NB>
<!ENTITY US20030005140A1-20030102-M00024.TIF SYSTEM "US20030005140A1-20030102-M00024.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-M00025.NB SYSTEM "US20030005140A1-20030102-M00025.NB" NDATA NB>
<!ENTITY US20030005140A1-20030102-M00025.TIF SYSTEM "US20030005140A1-20030102-M00025.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-M00026.NB SYSTEM "US20030005140A1-20030102-M00026.NB" NDATA NB>
<!ENTITY US20030005140A1-20030102-M00026.TIF SYSTEM "US20030005140A1-20030102-M00026.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-M00027.NB SYSTEM "US20030005140A1-20030102-M00027.NB" NDATA NB>
<!ENTITY US20030005140A1-20030102-M00027.TIF SYSTEM "US20030005140A1-20030102-M00027.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-M00028.NB SYSTEM "US20030005140A1-20030102-M00028.NB" NDATA NB>
<!ENTITY US20030005140A1-20030102-M00028.TIF SYSTEM "US20030005140A1-20030102-M00028.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-M00029.NB SYSTEM "US20030005140A1-20030102-M00029.NB" NDATA NB>
<!ENTITY US20030005140A1-20030102-M00029.TIF SYSTEM "US20030005140A1-20030102-M00029.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-M00030.NB SYSTEM "US20030005140A1-20030102-M00030.NB" NDATA NB>
<!ENTITY US20030005140A1-20030102-M00030.TIF SYSTEM "US20030005140A1-20030102-M00030.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-M00031.NB SYSTEM "US20030005140A1-20030102-M00031.NB" NDATA NB>
<!ENTITY US20030005140A1-20030102-M00031.TIF SYSTEM "US20030005140A1-20030102-M00031.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-M00032.NB SYSTEM "US20030005140A1-20030102-M00032.NB" NDATA NB>
<!ENTITY US20030005140A1-20030102-M00032.TIF SYSTEM "US20030005140A1-20030102-M00032.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-M00033.NB SYSTEM "US20030005140A1-20030102-M00033.NB" NDATA NB>
<!ENTITY US20030005140A1-20030102-M00033.TIF SYSTEM "US20030005140A1-20030102-M00033.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-D00000.TIF SYSTEM "US20030005140A1-20030102-D00000.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-D00001.TIF SYSTEM "US20030005140A1-20030102-D00001.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-D00002.TIF SYSTEM "US20030005140A1-20030102-D00002.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-D00003.TIF SYSTEM "US20030005140A1-20030102-D00003.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-D00004.TIF SYSTEM "US20030005140A1-20030102-D00004.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-D00005.TIF SYSTEM "US20030005140A1-20030102-D00005.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-D00006.TIF SYSTEM "US20030005140A1-20030102-D00006.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-D00007.TIF SYSTEM "US20030005140A1-20030102-D00007.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-D00008.TIF SYSTEM "US20030005140A1-20030102-D00008.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-D00009.TIF SYSTEM "US20030005140A1-20030102-D00009.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-D00010.TIF SYSTEM "US20030005140A1-20030102-D00010.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-D00011.TIF SYSTEM "US20030005140A1-20030102-D00011.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-D00012.TIF SYSTEM "US20030005140A1-20030102-D00012.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-D00013.TIF SYSTEM "US20030005140A1-20030102-D00013.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-D00014.TIF SYSTEM "US20030005140A1-20030102-D00014.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-D00015.TIF SYSTEM "US20030005140A1-20030102-D00015.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-D00016.TIF SYSTEM "US20030005140A1-20030102-D00016.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-D00017.TIF SYSTEM "US20030005140A1-20030102-D00017.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-D00018.TIF SYSTEM "US20030005140A1-20030102-D00018.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-D00019.TIF SYSTEM "US20030005140A1-20030102-D00019.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-D00020.TIF SYSTEM "US20030005140A1-20030102-D00020.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-D00021.TIF SYSTEM "US20030005140A1-20030102-D00021.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-D00022.TIF SYSTEM "US20030005140A1-20030102-D00022.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-D00023.TIF SYSTEM "US20030005140A1-20030102-D00023.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-D00024.TIF SYSTEM "US20030005140A1-20030102-D00024.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-D00025.TIF SYSTEM "US20030005140A1-20030102-D00025.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-D00026.TIF SYSTEM "US20030005140A1-20030102-D00026.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-D00027.TIF SYSTEM "US20030005140A1-20030102-D00027.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-D00028.TIF SYSTEM "US20030005140A1-20030102-D00028.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-D00029.TIF SYSTEM "US20030005140A1-20030102-D00029.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-D00030.TIF SYSTEM "US20030005140A1-20030102-D00030.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-D00031.TIF SYSTEM "US20030005140A1-20030102-D00031.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-D00032.TIF SYSTEM "US20030005140A1-20030102-D00032.TIF" NDATA TIF>
<!ENTITY US20030005140A1-20030102-D00033.TIF SYSTEM "US20030005140A1-20030102-D00033.TIF" NDATA TIF>
]>
<patent-application-publication>
<subdoc-bibliographic-information>
<document-id>
<doc-number>20030005140</doc-number>
<kind-code>A1</kind-code>
<document-date>20030102</document-date>
</document-id>
<publication-filing-type>new</publication-filing-type>
<domestic-filing-data>
<application-number>
<doc-number>10022122</doc-number>
</application-number>
<application-number-series-code>10</application-number-series-code>
<filing-date>20011214</filing-date>
</domestic-filing-data>
<technical-information>
<classification-ipc>
<classification-ipc-primary>
<ipc>G06F015/16</ipc>
</classification-ipc-primary>
<classification-ipc-secondary>
<ipc>G06F017/60</ipc>
</classification-ipc-secondary>
<classification-ipc-edition>07</classification-ipc-edition>
</classification-ipc>
<classification-us>
<classification-us-primary>
<uspc>
<class>709</class>
<subclass>231000</subclass>
</uspc>
</classification-us-primary>
<classification-us-secondary>
<uspc>
<class>705</class>
<subclass>002000</subclass>
</uspc>
</classification-us-secondary>
</classification-us>
<title-of-invention>Three-dimensional image streaming system and method for medical images</title-of-invention>
</technical-information>
<continuity-data>
<non-provisional-of-provisional>
<document-id>
<doc-number>60256318</doc-number>
<document-date>20001214</document-date>
<country-code>US</country-code>
</document-id>
</non-provisional-of-provisional>
</continuity-data>
<inventors>
<first-named-inventor>
<name>
<given-name>Shai</given-name>
<family-name>Dekel</family-name>
</name>
<residence>
<residence-non-us>
<city>Or-Yehuda</city>
<country-code>IL</country-code>
</residence-non-us>
</residence>
<authority-applicant>INV</authority-applicant>
</first-named-inventor>
<inventor>
<name>
<given-name>Nitzan</given-name>
<family-name>Goldberg</family-name>
</name>
<residence>
<residence-non-us>
<city>Jerusalem</city>
<country-code>IL</country-code>
</residence-non-us>
</residence>
<authority-applicant>INV</authority-applicant>
</inventor>
<inventor>
<name>
<given-name>Alexander</given-name>
<family-name>Sherman</family-name>
</name>
<residence>
<residence-non-us>
<city>Biet-Shemesh</city>
<country-code>IL</country-code>
</residence-non-us>
</residence>
<authority-applicant>INV</authority-applicant>
</inventor>
</inventors>
<correspondence-address>
<name-1>NEEDLE &amp; ROSENBERG, P.C.</name-1>
<name-2>The Candler Building, Suite 1200</name-2>
<address>
<address-1>127 Peachtree Street, N.E.</address-1>
<city>Atlanta</city>
<state>GA</state>
<postalcode>30303-1811</postalcode>
<country>
<country-code>US</country-code>
</country>
</address>
</correspondence-address>
</subdoc-bibliographic-information>
<subdoc-abstract>
<paragraph id="A-0001" lvl="0">In a system for transmitting a three-dimensional (3-D) digital image over a communication network, in response to a client computer generating a request for interaction with a 3-D image stored on an image storage device, a server computer performs two-dimensional sub-band transform decompositions in x-axis and y-axis directions upon the 3-D image, performs a one-dimensional sub-band transform decomposition in a z-axis direction upon a portion of the two-dimensionally transform-decomposed digital image, and progressively transmits to the client computer data representing a region of interest specified in the client request. </paragraph>
</subdoc-abstract>
<subdoc-description>
<cross-reference-to-related-applications>
<heading lvl="1">CROSS-REFERENCED TO RELATED APPLICATION </heading>
<paragraph id="P-0001" lvl="0"><number>&lsqb;0001&rsqb;</number> The benefit of U.S. provisional patent application Ser. No. 60/256,318, filed Dec. 14, 2000, entitled &ldquo;Three-Dimensional Image Streaming System and Method,&rdquo; is hereby claimed under 35 U.S.C. &sect; 119, and the specification thereof is incorporated herein in its entirety by this reference.</paragraph>
</cross-reference-to-related-applications>
<summary-of-invention>
<section>
<heading lvl="1">BACKGROUND OF THE INVENTION </heading>
<paragraph id="P-0002" lvl="0"><number>&lsqb;0002&rsqb;</number> 1. Field of the Invention </paragraph>
<paragraph id="P-0003" lvl="0"><number>&lsqb;0003&rsqb;</number> The invention relates generally to the field of medical imaging and, more specifically, to transmission of medical imagery via a relatively narrow bandwidth client-server computer network such as the World Wide Web. </paragraph>
<paragraph id="P-0004" lvl="0"><number>&lsqb;0004&rsqb;</number> 2. Description of the Related Art </paragraph>
<paragraph id="P-0005" lvl="0"><number>&lsqb;0005&rsqb;</number> The most common medical imaging techniques produce three-dimensional (3-D) data sets. Medical imaging techniques, such as computed tomography (CT), magnetic resonance (MR), positron emission tomography (PET), and single-photon emission computed tomography (SPECT), generate multiple slices in a single examination. Each such slice represents a different cross-section of the body part that is imaged. A simple transfer to the client computer of the result of the examination stored in the server&apos;s storage is obviously time consuming in a narrow bandwidth environment. This problem can be overcome by storing images in some compressed formats. </paragraph>
<paragraph id="P-0006" lvl="0"><number>&lsqb;0006&rsqb;</number> Data compression techniques can be roughly divided into two classes: lossy and lossless. Lossless compression techniques allow exact reconstruction of the original image, while lossy compression techniques achieve higher compression ratios, because they allow some acceptable degradation. </paragraph>
<paragraph id="P-0007" lvl="0"><number>&lsqb;0007&rsqb;</number> Although lossy compression is acceptable in many cases, lossless transmission is required in medical applications because lossy compression of images can lead to errors in diagnosis by introducing artifacts. Furthermore, there exist several legal and regulatory issues that favor lossless compression in medical applications. Although precise diagnosis require lossless representation of the study, lossy compression can be extremely useful for medical applications in which quick image browsing is desired. Therefore, the combination of lossy and lossless representations in a single workflow is desirable, with progressive lossy streaming of 3-D data terminating at lossless quality. </paragraph>
<paragraph id="P-0008" lvl="0"><number>&lsqb;0008&rsqb;</number> Because 3-D image data can be represented as a set of two-dimensional (2-D) images, it is possible to code these 2-D images independently. There exist several 2-D lossless compression algorithms, such as the LOw COmplexity LOssless COmpression of Images (LOCO-I) on which a lossless image compression standard called JPEG-LS is base, the Context-based Adaptive Lossless Image Codec (CALIC) algorithm and Compression with Reversible Embedded Wavelets (CREW). However, such 2-D methods do not utilize the inter-slice dependencies that exist among pixel values in the third dimension. A better approach considers the whole set of slices as a single 3-D data set taking advantage of correlation in all three dimensions. </paragraph>
<paragraph id="P-0009" lvl="0"><number>&lsqb;0009&rsqb;</number> Several methods that utilize dependencies in all three dimensions have been proposed for compression of 3-D data, both lossy and lossless, such as the Improved 3-D EZW (3D-IEZW); Modified EZW algorithm, used for compression of volumetric medical images; Context-based coding improvement of the EZW algorithm (3-D CB-EZW); a 3-D extension of Set Partitioning in Hierarchical Trees and Scalable Compressed Video coding algorithms. However, there is a common disadvantage of all the existing methods: they all need to store a compressed version of the original data, because the compression is very time consuming. These methods additionally lead to a tremendous growth of system memory usage. Wavelet compression is well known in the art. Conventional compression systems preferred wavelet bases of best coding performance. </paragraph>
<paragraph id="P-0010" lvl="0"><number>&lsqb;0010&rsqb;</number> A system and method for transmitting a digital image over a communication network is disclosed in U.S. patent application No. 6,314,452, &ldquo;System and Method for Transmitting a Digital Image Over a Communication Network&rdquo;, incorporated herein in its entirety by this reference That system and method does not address problems involved with lossless compression, and it does not specifically address 3-D images. </paragraph>
<paragraph id="P-0011" lvl="0"><number>&lsqb;0011&rsqb;</number> A system and method for a lossless wavelet transform in 2-D, having only the X and Y directions, is disclosed in U.S. patent application Ser. No. 60/198,017 &ldquo;Lossless Progressive Streaming of Images Over the Internet&rdquo; incorporated herein in its entirety by this reference. That system and method does not address 3-D images. </paragraph>
</section>
<section>
<heading lvl="1">SUMMARY OF THE INVENTION </heading>
<paragraph id="P-0012" lvl="0"><number>&lsqb;0012&rsqb;</number> The present invention relates to a 3-D image data streaming system that obviates storing a compressed version of the original data by streaming region-of-interest (ROI) data using the original stored 3-D data. The system also avoids the computationally intensive task of compression of the full data. The term &ldquo;pixels-on-demand&rdquo; may be used in this patent specification to describe the process of serving the requested ROI and progressively transmitting the ROI data in real-time, where the quality of the view improves towards lossless quality as the transfer process progresses. </paragraph>
<paragraph id="P-0013" lvl="0"><number>&lsqb;0013&rsqb;</number> The system allows lossless progressive streaming of 3-D images over the Internet of speed and quality unknown in the prior art. Once a user indicates intention to view an image, a server performs a fast preprocessing step, after which the server quickly responds to requests for viewing specific regions of interest. Each request for an ROI triggers an encoding algorithm, but such that does not involve the full 3-D image. Since the size of the ROI is limited by the size and resolution of the viewing device and by number of frames that can be simultaneously viewed at the client and not by the size of the full 3-D image, only a portion progressive coding computation is performed for a local area of the original 3-D data. The same is true for the client computer that performs decoding and rendering only for an ROI and not the fall 3-D image. The imaging system described herein preferably uses wavelet bases of best performance in streaming ROI data. </paragraph>
<paragraph id="P-0014" lvl="0"><number>&lsqb;0014&rsqb;</number> In one aspect of the present invention there is disclosed a system and method for transmitting a three-dimensional digital image over a communication network. A 3-D digital image is stored on an image storage device accessible via the network. A client computer coupled to the network can generate a request for interaction with the 3-D image stored on the image storage device, the request identifying a region of interest within the image. </paragraph>
<paragraph id="P-0015" lvl="0"><number>&lsqb;0015&rsqb;</number> The system includes a server computer coupled to the communication network and the image storage device, wherein the server computer performs the steps of: i) performing 2-D sub-band transform decompositions in x-axis and y-axis directions upon the three-dimensional digital image; ii) performing a 1-D sub-band transform decomposition in a z-axis direction upon a portion of the two-dimensionally transform-decomposed digital image; and iii) progressively transmitting to the client computer data representing the identified region of interest within the 3-D image. </paragraph>
<paragraph id="P-0016" lvl="0"><number>&lsqb;0016&rsqb;</number> In one or more embodiments of the present invention, the system can transmit to the client computer data representing thumbnail-resolution images resulting from the 2-D sub-band transform decompositions. Furthermore, the system can, in one or more embodiments of the invention, perform a one-dimensional sub-band transform decomposition in a z-axis direction comprising the steps of: a) computing transform coefficients using integer arithmetic and not floating-point arithmetic; and b) correcting the computed transform coefficients by performing integer arithmetic operations with one or more predetermined correction factors. </paragraph>
<paragraph id="P-0017" lvl="0"><number>&lsqb;0017&rsqb;</number> The steps of performing sub-band transform decompositions can comprise computing transform coefficients for each of a predetermined plurality of resolutions. Furthermore, the transform coefficients for an Nth resolution of the plurality can be computed in response to a one transform formula if N is odd and another transform formula if N is even. For example, the server computer can scale the transform coefficients by alternating factors of {square root}{square root over (2)} and 1 along the z-axis, i.e., the resolution axis. </paragraph>
<paragraph id="P-0018" lvl="0"><number>&lsqb;0018&rsqb;</number> In yet another aspect of the present invention there is disclosed a system and method for transmitting a 3-D digital image over a communication network in which the request that a client computer generates for interaction with the 3-D image stored on the image storage device specifies a quality threshold and includes a request list specifying data blocks that define a region of interest within the 3-D image. The system includes a server computer coupled to the communication network and the image storage device, wherein the server computer, in response to the request list, transmits to the client computer a number of data blocks corresponding to the specified quality threshold. </paragraph>
<paragraph id="P-0019" lvl="0"><number>&lsqb;0019&rsqb;</number> In one or more embodiments of the present invention, the server computer can map the luminance of the three-dimensional image stored on the image storage device from a predetermined image bit depth to a predetermined screen bit depth in accordance with a monotonic luminance mapping function. The server computer can do so by, for example, computing a root mean square (RMS) increasing factor defined by a maximal derivative of the luminance mapping function. The server computer can provide more data blocks (i.e., more than some predetermined normal number) if the RMS increasing factor is greater than one and a fewer data blocks if the RMS increasing factor is less than one. </paragraph>
<paragraph id="P-0020" lvl="0"><number>&lsqb;0020&rsqb;</number> Furthermore, the request generated by the client computer can specify a resolution. In response, the server computer provides a number of data blocks corresponding to not only the specified quality threshold but also the specified resolution.</paragraph>
</section>
</summary-of-invention>
<brief-description-of-drawings>
<section>
<heading lvl="1">BRIEF DESCRIPTION OF THE DRAWINGS </heading>
<paragraph id="P-0021" lvl="0"><number>&lsqb;0021&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1</cross-reference> is a block diagram of an embodiment of the system architecture. </paragraph>
<paragraph id="P-0022" lvl="0"><number>&lsqb;0022&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 2</cross-reference> illustrates an embodiment of the imaging system workflow. </paragraph>
<paragraph id="P-0023" lvl="0"><number>&lsqb;0023&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3</cross-reference> illustrates subband decomposition and tiling of subband coefficients at given resolution. </paragraph>
<paragraph id="P-0024" lvl="0"><number>&lsqb;0024&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 4</cross-reference> illustrates subband decomposition types. </paragraph>
<paragraph id="P-0025" lvl="0"><number>&lsqb;0025&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 5</cross-reference> illustrates a multi-resolution structure of transformed image data. </paragraph>
<paragraph id="P-0026" lvl="0"><number>&lsqb;0026&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 6</cross-reference> illustrates multi-resolution decomposition of image data. </paragraph>
<paragraph id="P-0027" lvl="0"><number>&lsqb;0027&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 7</cross-reference> illustrates scaling factors of 3-D wavelet coefficients for different sub-bands. </paragraph>
<paragraph id="P-0028" lvl="0"><number>&lsqb;0028&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 8</cross-reference> illustrates tile dimensions and the addition of half-bit information planes for lossless subband decomposition types. </paragraph>
<paragraph id="P-0029" lvl="0"><number>&lsqb;0029&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 9</cross-reference> is a flowchart illustrating a server encoding algorithm outer loop. </paragraph>
<paragraph id="P-0030" lvl="0"><number>&lsqb;0030&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 10A</cross-reference> illustrates a server encoding algorithm bit plane significance scan flowchart. </paragraph>
<paragraph id="P-0031" lvl="0"><number>&lsqb;0031&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 10B</cross-reference> illustrates a server encoding algorithm, bit plane significance scan flowchart. </paragraph>
<paragraph id="P-0032" lvl="0"><number>&lsqb;0032&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 11</cross-reference> illustrates a server encoding algorithm bit plane significance scan pseudo-code. </paragraph>
<paragraph id="P-0033" lvl="0"><number>&lsqb;0033&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 12A</cross-reference> illustrates a least significant bit plane scan pseudo-code encoding algorithm. </paragraph>
<paragraph id="P-0034" lvl="0"><number>&lsqb;0034&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 12B</cross-reference> illustrates a half bit plane scan pseudo-code encoding algorithm. </paragraph>
<paragraph id="P-0035" lvl="0"><number>&lsqb;0035&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 13</cross-reference> illustrates a least significant bit plane scan encoding algorithm flowchart. </paragraph>
<paragraph id="P-0036" lvl="0"><number>&lsqb;0036&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 14</cross-reference> is a flowchart illustrating a client decoding algorithm outer loop. </paragraph>
<paragraph id="P-0037" lvl="0"><number>&lsqb;0037&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 15</cross-reference> illustrates a client decoding algorithm bit plane scan pseudo-code. </paragraph>
<paragraph id="P-0038" lvl="0"><number>&lsqb;0038&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 16A</cross-reference> illustrates a least significant bit plane scan pseudo-code decoding algorithm. </paragraph>
<paragraph id="P-0039" lvl="0"><number>&lsqb;0039&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 16B</cross-reference> is a half bit plane scan pseudo-code decoding algorithm. </paragraph>
<paragraph id="P-0040" lvl="0"><number>&lsqb;0040&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 17</cross-reference> is a flowchart illustrating client &ldquo;progressive by accuracy&rdquo; workflow. </paragraph>
<paragraph id="P-0041" lvl="0"><number>&lsqb;0041&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 18</cross-reference> illustrates a curve defining the mapping from Original_Image_Depth-bit image to Screen_Depth-bit. </paragraph>
<paragraph id="P-0042" lvl="0"><number>&lsqb;0042&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 19</cross-reference> is a flowchart illustrating the composition of a &ldquo;Progressive by accuracy&rdquo; request list for a ROI according to an embodiment of the invention. </paragraph>
<paragraph id="P-0043" lvl="0"><number>&lsqb;0043&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 20</cross-reference> is pseudo-code for multi-resolution march in the client rendering function. </paragraph>
<paragraph id="P-0044" lvl="0"><number>&lsqb;0044&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 21</cross-reference> is a flowchart illustrating the subband tile extraction function according to an embodiment of the present invention. </paragraph>
<paragraph id="P-0045" lvl="0"><number>&lsqb;0045&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 22</cross-reference> is a flowchart illustrating the server workflow of the present invention. </paragraph>
<paragraph id="P-0046" lvl="0"><number>&lsqb;0046&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 23</cross-reference> is a flowchart illustrating a server preprocessing function of the present invention. </paragraph>
<paragraph id="P-0047" lvl="0"><number>&lsqb;0047&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 24</cross-reference> is pseudo-code for the memory constrained subband tile preprocessing function of the present invention. </paragraph>
<paragraph id="P-0048" lvl="0"><number>&lsqb;0048&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 25</cross-reference> is a flowchart illustrating the low resolution encoding function of the present invention. </paragraph>
<paragraph id="P-0049" lvl="0"><number>&lsqb;0049&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 26</cross-reference> is a diagram illustrating an imaging protocol of communication between client and server. </paragraph>
<paragraph id="P-0050" lvl="0"><number>&lsqb;0050&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 27</cross-reference> is a flowchart illustrating the encoding algorithm principal steps of the present invention. </paragraph>
<paragraph id="P-0051" lvl="0"><number>&lsqb;0051&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 28A</cross-reference> is a flowchart illustrating the bit plane significance scan client decoding algorithm. </paragraph>
<paragraph id="P-0052" lvl="0"><number>&lsqb;0052&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 28B</cross-reference> is a flowchart illustrating the bit plane significance scan client decoding algorithm. </paragraph>
<paragraph id="P-0053" lvl="0"><number>&lsqb;0053&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 29</cross-reference> is a flowchart illustrating a method for transmitting a 3D digital image in accordance with one aspect of the present invention. </paragraph>
<paragraph id="P-0054" lvl="0"><number>&lsqb;0054&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 30</cross-reference> is a flowchart illustrating a method for transmitting a 3D digital image in accordance with another aspect of the present invention. </paragraph>
</section>
</brief-description-of-drawings>
<detailed-description>
<section>
<heading lvl="1">DETAILED DESCRIPTION </heading>
<paragraph id="P-0055" lvl="7"><number>&lsqb;0055&rsqb;</number> 1. Notation and Terminology </paragraph>
<paragraph id="P-0056" lvl="0"><number>&lsqb;0056&rsqb;</number> The following notation is used throughout this document.  
<table-cwu id="TABLE-US-00001">
<number>1</number>
<table frame="none" colsep="0" rowsep="0">
<tgroup align="left" colsep="0" rowsep="0" cols="3">
<colspec colname="OFFSET" colwidth="14PT" align="left"/>
<colspec colname="1" colwidth="28PT" align="left"/>
<colspec colname="2" colwidth="175PT" align="left"/>
<thead>
<row>
<entry></entry>
<entry></entry>
</row>
<row>
<entry></entry>
<entry namest="OFFSET" nameend="2" align="center" rowsep="1"></entry>
</row>
<row>
<entry></entry>
<entry>Term</entry>
<entry>Definition</entry>
</row>
<row>
<entry></entry>
<entry namest="OFFSET" nameend="2" align="center" rowsep="1"></entry>
</row>
</thead>
<tbody valign="top">
<row>
<entry></entry>
<entry>2D</entry>
<entry>Two dimensional</entry>
</row>
<row>
<entry></entry>
<entry>3D</entry>
<entry>Three dimensional</entry>
</row>
<row>
<entry></entry>
<entry>5D</entry>
<entry>Five dimensional</entry>
</row>
<row>
<entry></entry>
<entry>FIR</entry>
<entry>Finite Impulse Response</entry>
</row>
<row>
<entry></entry>
<entry>FWT</entry>
<entry>Forward Wavelet Transform</entry>
</row>
<row>
<entry></entry>
<entry>GUI</entry>
<entry>Graphical User Interface</entry>
</row>
<row>
<entry></entry>
<entry>ID</entry>
<entry>Identification tag</entry>
</row>
<row>
<entry></entry>
<entry>IWT</entry>
<entry>Inverse Wavelet Transform</entry>
</row>
<row>
<entry></entry>
<entry>ROI</entry>
<entry>Region Of Interest</entry>
</row>
<row>
<entry></entry>
<entry>URL</entry>
<entry>Uniform Resource Locator</entry>
</row>
<row>
<entry></entry>
<entry>LSB</entry>
<entry>Least Significant Bit</entry>
</row>
<row>
<entry></entry>
<entry>FP</entry>
<entry>Floating Point</entry>
</row>
<row>
<entry></entry>
<entry>EZW</entry>
<entry>Embedded coding of Zerotrees of Wavelet coefficients</entry>
</row>
<row>
<entry></entry>
<entry namest="OFFSET" nameend="2" align="center" rowsep="1"></entry>
</row>
</tbody>
</tgroup>
</table>
</table-cwu>
</paragraph>
<paragraph id="P-0057" lvl="0"><number>&lsqb;0057&rsqb;</number> The following terminology and definitions apply throughout this document.  
<table-cwu id="TABLE-US-00002">
<number>2</number>
<table frame="none" colsep="0" rowsep="0" pgwide="1">
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="1" colwidth="77PT" align="left"/>
<colspec colname="2" colwidth="196PT" align="left"/>
<thead>
<row>
<entry></entry>
</row>
<row><entry namest="1" nameend="2" align="center" rowsep="1"></entry>
</row>
<row>
<entry>Term</entry>
<entry>Definition</entry>
</row>
<row><entry namest="1" nameend="2" align="center" rowsep="1"></entry>
</row>
</thead>
<tbody valign="top">
<row>
<entry>Rendering</entry>
<entry>Procedure to output/display a ROI of an image into a device such</entry>
</row>
<row>
<entry></entry>
<entry>as a monitor, printer, etc.</entry>
</row>
<row>
<entry>Multiresolution</entry>
<entry>A pyramidal structure representing an image at dyadic resolutions,</entry>
</row>
<row>
<entry></entry>
<entry>beginning with the original image as the highest resolution.</entry>
</row>
<row>
<entry>Subband Transform /</entry>
<entry>A method of decomposing an image (time domain) to frequency</entry>
</row>
<row>
<entry>subband coefficients</entry>
<entry>components (frequency domain). A representation of an image as</entry>
</row>
<row>
<entry></entry>
<entry>a sum of differences between the dyadic resolutions of the image&apos;s</entry>
</row>
<row>
<entry></entry>
<entry>multi-resolution.</entry>
</row>
<row>
<entry>Wavelet Transform /</entry>
<entry>A special case of Subband Transform.</entry>
</row>
<row>
<entry>Wavelet coefficients</entry>
</row>
<row>
<entry>Quantization</entry>
<entry>A process that, given a number removes some precision from it,</entry>
</row>
<row>
<entry></entry>
<entry>such that it will be possible to code it in lower precision using less</entry>
</row>
<row>
<entry></entry>
<entry>bits of memory</entry>
</row>
<row>
<entry>Threshold</entry>
<entry>A process that, using a given positive constant, sets to zero any</entry>
</row>
<row>
<entry></entry>
<entry>number whose absolute value is below the constant.</entry>
</row>
<row>
<entry>Progressive</entry>
<entry>Transmitting a given image in successive steps, where each step</entry>
</row>
<row>
<entry>Transmission</entry>
<entry>adds more detail to the rendering of the image</entry>
</row>
<row>
<entry>Progressive Rendering</entry>
<entry>A sequence of rendering operations, each adding more detail.</entry>
</row>
<row>
<entry>Progressive by accuracy</entry>
<entry>Transmit/render strong features first (sharp edges), less significant</entry>
</row>
<row>
<entry></entry>
<entry>features (texture) last</entry>
</row>
<row>
<entry>Progressive by</entry>
<entry>Transmit/render low resolution first, high resolution last</entry>
</row>
<row>
<entry>resolution</entry>
</row>
<row>
<entry>Distributed database</entry>
<entry>A database architecture that can be used in a network environment</entry>
</row>
<row>
<entry>Subband/Wavelet tile</entry>
<entry>A group of subband/wavelet coefficients corresponding to a time-</entry>
</row>
<row>
<entry></entry>
<entry>frequency localization at some given spatial location and</entry>
</row>
<row>
<entry></entry>
<entry>resolution/frequency</entry>
</row>
<row>
<entry>Subband/Wavelet data</entry>
<entry>An encoded portion of a subband/wavelet tile that corresponds to</entry>
</row>
<row>
<entry>block</entry>
<entry>some accuracy layer</entry>
</row>
<row><entry namest="1" nameend="2" align="center" rowsep="1"></entry>
</row>
</tbody>
</tgroup>
</table>
</table-cwu>
</paragraph>
<paragraph id="P-0058" lvl="7"><number>&lsqb;0058&rsqb;</number> 2. Description of Embodiments </paragraph>
<paragraph id="P-0059" lvl="0"><number>&lsqb;0059&rsqb;</number> Referring to <cross-reference target="DRAWINGS">FIG. 1, a</cross-reference> block diagram is provided depicting the various components of the imaging system in one embodiment of the invention. A client computer <highlight><bold>110</bold></highlight> is coupled to a server computer <highlight><bold>120</bold></highlight> through a communication network <highlight><bold>130</bold></highlight>. </paragraph>
<paragraph id="P-0060" lvl="0"><number>&lsqb;0060&rsqb;</number> In one embodiment, both client computer <highlight><bold>110</bold></highlight> and server computer <highlight><bold>120</bold></highlight> may comprise a PC-type computer operating with a Pentium&reg;-class microprocessor, or equivalent. Each of the computers <highlight><bold>110</bold></highlight> and <highlight><bold>120</bold></highlight> may include a cache, <highlight><bold>111</bold></highlight> and <highlight><bold>121</bold></highlight> respectively, as part of its memory. The server computer <highlight><bold>120</bold></highlight> may include a suitable storage device <highlight><bold>122</bold></highlight>, such as a high-capacity disk, CD-ROM, DVD, or the like. Server computer <highlight><bold>120</bold></highlight> is programmed with software that effects the processes described below. In view of the description below, persons skilled in the art to which the invention relates will be capable of writing or otherwise providing software suitable for such programming. In preparation for operation, the software can reside in whole or part on a hard disk or similar data medium (not shown) within server computer <highlight><bold>120</bold></highlight> and can be downloaded onto the disk or otherwise retrieved in whole or part from a remote source (not shown) via a communication network <highlight><bold>130</bold></highlight>. Note that the present invention can be embodied not only as a system of computers but also as computer-implemented methods and as computer program products that carry the software via suitable computer data media. </paragraph>
<paragraph id="P-0061" lvl="0"><number>&lsqb;0061&rsqb;</number> The client computer <highlight><bold>110</bold></highlight> and server computer <highlight><bold>120</bold></highlight> may be connected to each other, and to other computers, through communication network <highlight><bold>130</bold></highlight>, which may be the Internet, an intranet (e.g., a local area network), a wide-area network, or the like. Those having ordinary skill in the art will recognize that any of a variety of communication networks may be used to implement the present invention. Any suitable web browser-type application running on the client computer <highlight><bold>110</bold></highlight> can be used to connect to the server computer <highlight><bold>120</bold></highlight>. The browser software can likewise be stored for execution on a hard disk or similar medium (not shown) within client computer <highlight><bold>110</bold></highlight> in the conventional manner. </paragraph>
<paragraph id="P-0062" lvl="0"><number>&lsqb;0062&rsqb;</number> The system workflow is first described with reference to <cross-reference target="DRAWINGS">FIG. 2</cross-reference>. A client computer <highlight><bold>110</bold></highlight> (<cross-reference target="DRAWINGS">FIG. 1</cross-reference>) begins by requesting to interact with a specific 3-D image at step <highlight><bold>201</bold></highlight>. In response, the server computer <highlight><bold>120</bold></highlight> preprocesses the image at step <highlight><bold>202</bold></highlight>, and notifies the client computer <highlight><bold>110</bold></highlight> that it is ready to serve the image. The client computer <highlight><bold>110</bold></highlight> continues by requesting a specific ROI at step <highlight><bold>203</bold></highlight>. In response, the server computer <highlight><bold>120</bold></highlight> encodes this ROI and sends its encoded data at step <highlight><bold>204</bold></highlight>. The client computer <highlight><bold>110</bold></highlight>, in turn, performs progressive rendering of the received data at step <highlight><bold>205</bold></highlight>, and may iterate back for another ROI at step <highlight><bold>203</bold></highlight>. </paragraph>
<paragraph id="P-0063" lvl="0"><number>&lsqb;0063&rsqb;</number> The system workflow is now described with reference to <cross-reference target="DRAWINGS">FIG. 1</cross-reference>. The user operating a client computer <highlight><bold>110</bold></highlight> selects, using common browser tools, a 3-D image residing on the image file storage <highlight><bold>122</bold></highlight>. The corresponding URL request is received and processed by the server computer <highlight><bold>120</bold></highlight>. In the case that results of previous computations on the 3-D image are not present in the imaging cache <highlight><bold>121</bold></highlight>, the server computer <highlight><bold>120</bold></highlight> performs a fast preprocessing algorithm (described herein below as step <highlight><bold>2201</bold></highlight> with reference to <cross-reference target="DRAWINGS">FIG. 22</cross-reference>). The result of this computation is inserted into the cache <highlight><bold>121</bold></highlight>. Unlike previous applications or methods, which perform full progressive encoding of the image offline, the goal of the preprocessing step is to allow the server computer <highlight><bold>120</bold></highlight>, after a relatively fast computational step, to serve any ROI specified by the user of the client computer <highlight><bold>110</bold></highlight>. For example, server software processing (step <highlight><bold>202</bold></highlight>) of a sequence of 100 slices 512 by 512 pixels, 16-bit Grayscale each, will typically take 1-2 seconds, running on a computer with a Pentium&reg; processor and the Windows NT&reg; operating system. </paragraph>
<paragraph id="P-0064" lvl="0"><number>&lsqb;0064&rsqb;</number> Once the preprocessing stage is done, the server computer <highlight><bold>120</bold></highlight> notifies the client computer <highlight><bold>110</bold></highlight> that the image is ready to be served. The server computer <highlight><bold>120</bold></highlight> also transmits the basic parameters associated with the image such as dimensions, number or resolutions, etc. Upon receiving this notification, the client computer <highlight><bold>110</bold></highlight> can select any ROI of the 3-D image, as indicated by the user through some GUI. The ROI is formulated (step <highlight><bold>203</bold></highlight>) into a request list that is sent to the server computer <highlight><bold>120</bold></highlight>. Each such request corresponds to a data block (as described herein below with reference to <cross-reference target="DRAWINGS">FIGS. 3 and 8</cross-reference>). </paragraph>
<paragraph id="P-0065" lvl="0"><number>&lsqb;0065&rsqb;</number> The order of requests in the list corresponds to some progressive mode selected in the context of the application. For example, the order can be of increasing accuracy. Upon receiving the ROI request list, the server computer <highlight><bold>120</bold></highlight> processes the requests according to their order. For each such request the server computer <highlight><bold>120</bold></highlight> checks if the corresponding data block exists in its cache <highlight><bold>121</bold></highlight>. If not, the server computer <highlight><bold>120</bold></highlight> then computes the data block, stores it in the cache <highlight><bold>121</bold></highlight> and immediately sends it to the client computer <highlight><bold>110</bold></highlight>. Once a data block that was requested arrives at the client computer <highlight><bold>110</bold></highlight>, it is inserted into its cache <highlight><bold>111</bold></highlight>. At various moments in time during the transfer process, a decision rule invokes a rendering of the ROI. If some of the data blocks required for a high quality rendering of the ROI, were requested from the server computer <highlight><bold>120</bold></highlight> but have not arrived yet, the rendering of the ROI will be of lower quality. But, due to the progressive request order, the rendering quality will improve with each received data block as specified. The user can order a change of the ROI, in which case the rendering task at the client computer <highlight><bold>110</bold></highlight> is canceled. A new request list corresponding to a new ROI is then sent from the client computer <highlight><bold>110</bold></highlight> to the server computer <highlight><bold>120</bold></highlight> notifying the server to terminate the previous computation and transmission task and to begin the new one. </paragraph>
<paragraph id="P-0066" lvl="0"><number>&lsqb;0066&rsqb;</number> The imaging protocol serves as a common language between the server and its clients. It is described with reference to <cross-reference target="DRAWINGS">FIG. 26</cross-reference>. The imaging protocol <highlight><bold>3050</bold></highlight> is mainly used by the client computer <highlight><bold>3010</bold></highlight> to efficiently stream to the server an ordered request <highlight><bold>3020</bold></highlight> list of data blocks required for progressive rendering of a given ROI, and by the server computer <highlight><bold>3030</bold></highlight> to efficiently compose and send to the client computer <highlight><bold>3010</bold></highlight> a stream of (requested) data blocks <highlight><bold>3040</bold></highlight>. </paragraph>
<paragraph id="P-0067" lvl="0"><number>&lsqb;0067&rsqb;</number> Both client computer <highlight><bold>3010</bold></highlight> and server computer <highlight><bold>3020</bold></highlight> use the same distributed database associated with the protocol, such that they are using the same tagging system for the various data blocks. Using this approach it is also possible to cache the data blocks at both ends. The server computer <highlight><bold>3020</bold></highlight> is able to cache any computed data block, such that this data block can be sent to any other client that requests it. The client computer <highlight><bold>3010</bold></highlight> is able to cache any data block received, such that for any subsequent ROI rendering operation requiring the data block, it will be extracted from the client cache and not ordered from the server computer <highlight><bold>3020</bold></highlight>. The protocol is designed such that the imaging system will have efficient ROI control and rendering in any mode such as: progressive by accuracy, progressive by resolution and progressive by spatial order. </paragraph>
<paragraph id="P-0068" lvl="0"><number>&lsqb;0068&rsqb;</number> The generalized method by which the present invention operates to transmit data blocks corresponding to the ROI in response to client requests is illustrated in <cross-reference target="DRAWINGS">FIG. 29</cross-reference>. At step <highlight><bold>2910</bold></highlight>, the client computer <highlight><bold>110</bold></highlight> (<cross-reference target="DRAWINGS">FIG. 1</cross-reference>) generates a request for interaction with the 3-D digital image stored on the image storage device <highlight><bold>122</bold></highlight>. As noted above, the request identifies an ROI within the image. </paragraph>
<paragraph id="P-0069" lvl="0"><number>&lsqb;0069&rsqb;</number> As a result of an initial request, a server computer process is initiated at step <highlight><bold>2920</bold></highlight>. Note that a 3-D image can be conceptually described as a sequence along the z-axis direction of x-y frames, analogous to the manner in which a movie is described by a sequence of frames. The image is decomposed in the x-y plane and along the z-axis direction. The server computer <highlight><bold>120</bold></highlight> performs 2-D sub-band transform decompositions in x-axis and y-axis directions upon the 3-D image at step <highlight><bold>2930</bold></highlight>. As described below in further detail, in two dimensions each frame is decomposed into four parts: &lcub;HH,HL,LH,LL&rcub;. This is repeated with each resolution step or level, where the LL part of resolution level N is the source image for resolution level N&plus;1. Decomposition along the z-axis direction averages pairs of frames together, so with each resolution level the number of frames is reduced by half. For example, if there is a sequence of frames &lcub;1,2,3,4,5,6 . . . &rcub;, at the first resolution level there will be &lcub;1&plus;2,3&plus;4,5&plus;6, . . . &rcub;, where &ldquo;1&plus;2&rdquo; represents the averaging of frames 1 and 2 together. </paragraph>
<paragraph id="P-0070" lvl="0"><number>&lsqb;0070&rsqb;</number> At step <highlight><bold>2940</bold></highlight>, as described below in further detail, the server computer <highlight><bold>120</bold></highlight> acquires thumbnail-resolution images that were created as a result of the 2-D sub-band transform decompositions. As known in the art, thumbnail-resolution images or, simply, &ldquo;thumbnails,&rdquo; are frames presented at a resolution less than or equal to that of the original image and at a quality less than or equal to that of the original image. In the present invention, thumbnails are presented as a sequence of the same number as in the original image &lcub;1,2,3,4,5,6&rcub;, so each thumbnail corresponds to a frame. Thumbnail resolution images are a by-product of the LL part. After decomposing the original image a few resolution levels, the LL part at that level is used as the thumbnail. Note that in embodiments of the invention in which thumbnails are not acquired, the process can proceed directly to step <highlight><bold>2950</bold></highlight>. </paragraph>
<paragraph id="P-0071" lvl="0"><number>&lsqb;0071&rsqb;</number> At step <highlight><bold>2950</bold></highlight>, as described below in further detail, 1-D sub-band transform decomposition in a z-axis direction is performed upon a portion, such as &lcub;HH,HL,LH&rcub;, of the two-dimensionally transform-decomposed digital image. The 1-D z-axis decomposition is not performed upon the LL portion in order to preserve its thumbnail qualities. </paragraph>
<paragraph id="P-0072" lvl="0"><number>&lsqb;0072&rsqb;</number> At step <highlight><bold>2960</bold></highlight>, the computed transform coefficients are corrected by the performance of integer operations that utilize one or more predetermined correction factors. For reasons described below in further detail, the coefficients are ideally or theoretically to be scaled by a factor or {square root}{square root over (2)} at each resolution level. Nevertheless, the floating-point computations required to scale coefficients by {square root}{square root over (2)} can impact processing speed. Employing integer operations, such as multiplying by integer correction factors, to compensate for the omission of true floating-point operations maintains processing speed while sacrificing image accuracy at only some of the resolution levels. </paragraph>
<paragraph id="P-0073" lvl="0"><number>&lsqb;0073&rsqb;</number> At step <highlight><bold>2970</bold></highlight>, the server computer <highlight><bold>120</bold></highlight> transmits data to the client computer thumbnail-resolution images that were the result of the 2-D sub-band transform operations of step <highlight><bold>2940</bold></highlight>. At step <highlight><bold>2980</bold></highlight>, the server computer <highlight><bold>120</bold></highlight> progressively transmits data representing the identified ROI to the client computer <highlight><bold>110</bold></highlight>. </paragraph>
<paragraph id="P-0074" lvl="0"><number>&lsqb;0074&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 30</cross-reference> illustrates the method of operation associated with a further aspect of the invention, in which the client request can include not only a request list specifying data blocks that define the ROI but can also include a specified quality threshold. Thus, step <highlight><bold>3110</bold></highlight> indicates the client computer <highlight><bold>110</bold></highlight> (<cross-reference target="DRAWINGS">FIG. 1</cross-reference>) transmitting such a request that includes the request list and a quality threshold. Additionally, the client request can include a specified resolution. At step <highlight><bold>3120</bold></highlight> the server computer <highlight><bold>120</bold></highlight> (<cross-reference target="DRAWINGS">FIG. 1</cross-reference>) can map the luminance of the 3-D image stored on the image storage device from a predetermined image bit depth to a predetermined screen bit depth in accordance with a monotonic luminance mapping function. At step <highlight><bold>3130</bold></highlight>, the server computer <highlight><bold>120</bold></highlight> computes a root mean square (RMS) increasing factor defined by a maximal derivative of the luminance mapping function. A determination as to whether the RMS increasing factor is greater than one is made at step <highlight><bold>3140</bold></highlight>. Accordingly, the server computer <highlight><bold>120</bold></highlight> provides more data blocks, i.e., more than some predetermined normal number, if the RMS increasing factor is greater than one at step <highlight><bold>3150</bold></highlight> and fewer data blocks, i.e., less than the predetermined number, if the RMS increasing factor is less than one at step <highlight><bold>3160</bold></highlight>. If the RMS increasing factor is equal to one, the server computer <highlight><bold>120</bold></highlight> provides a number of data blocks that is responsive to the specified quality threshold at step <highlight><bold>3170</bold></highlight>. </paragraph>
<paragraph id="P-0075" lvl="0"><number>&lsqb;0075&rsqb;</number> The basic components of the protocol are accuracy layers associated with tiles of subband/wavelet coefficients. Let I (x, y, z) be a given single component 3-D image such as a grayscale image. It is explained herein below, in reference to Eq.1, how the protocol is generalized to arbitrary color spaces. Let FWT(I) (Forward Wavelet Transform) be a subband/wavelet transform of the image. A basic introduction to the FWT is not provided in this patent specification because the FWT is in and of itself well known in the art. Transforms used herein are required to be separable. A 3-D separable transform can be computed by three 1D steps: subsequently in the X, Y and Z directions. </paragraph>
<paragraph id="P-0076" lvl="0"><number>&lsqb;0076&rsqb;</number> Reference is now made to <cross-reference target="DRAWINGS">FIG. 3</cross-reference>. The wavelet transform typically creates for each given resolution j eight subbands denoted as lll<highlight><subscript>j</subscript></highlight>, llh<highlight><subscript>j</subscript></highlight>, lhl<highlight><subscript>j</subscript></highlight>, lhh<highlight><subscript>j</subscript></highlight>, hll<highlight><subscript>j</subscript></highlight>, hlh<highlight><subscript>j</subscript></highlight>, hhl<highlight><subscript>j</subscript></highlight>, hhh<highlight><subscript>j</subscript></highlight>, while only the subband lll<highlight><subscript>j </subscript></highlight>is passed to the next resolution level processing. Thus, in the typical case the coefficients of FWT (I) are associated to the multiresolution structure shown on <cross-reference target="DRAWINGS">FIG. 3</cross-reference>. Observe that each coefficient belongs to a certain resolution j. </paragraph>
<paragraph id="P-0077" lvl="0"><number>&lsqb;0077&rsqb;</number> Some special kinds of multi-resolution decomposition are introduced in reference to <cross-reference target="DRAWINGS">FIG. 4</cross-reference>, which pass not only the single subband <highlight><bold>111</bold></highlight>, but also a group of subbands to the next resolution level. </paragraph>
<paragraph id="P-0078" lvl="0"><number>&lsqb;0078&rsqb;</number> If a Finite Impulse Response (FIR) subband filter (compactly supported wavelet) is used, each coefficient &ldquo;influences&rdquo; only a compactly supported region of the image. High resolution/frequency coefficients are associated with a small region and low resolution/frequency coefficients are associated with a larger region. The coefficients are subdivided into the tiles as shown in the <cross-reference target="DRAWINGS">FIG. 3</cross-reference> for the purpose of efficient rendering. Several subgroups of coefficients are grouped into tiles, associated with the same spatial area, corresponding to the subbands at the resolution j that are not passed to the next resolution. In some embodiments of the invention, the sub-tiles can have, for example, a length and width of 32 and height of 1, so that the tile contains n&times;32<highlight><superscript>2</superscript></highlight>&times;1 coefficients, where n is the number of sub-bands that are not passed to the next resolution. This relates to the fact that at the time of rendering at the client, the subband tile will provide a mean to render a tile of size 64&times;64&times;2. The parameters tileLength and tileHeight control the size of the subband tiles and can be changed dynamically per 3-D image volume. A 4-D coordinate is associated to each such tile, as described by Eq.1. </paragraph>
<paragraph lvl="0"><in-line-formula>Tile&equals;(t_x, t_y, t_z, t_resolution) &emsp;&emsp;(Eq.1) </in-line-formula></paragraph>
<paragraph id="P-0079" lvl="0"><number>&lsqb;0079&rsqb;</number> To generalize the above description for more than one image component, simply associate all the coefficients corresponding to the same spatial location of all the components with the tile of Eq.1. This yields n&times;32<highlight><superscript>2</superscript></highlight>&times;1&times;numberOfComponents coefficients associated with a multidimensional tile. </paragraph>
<paragraph id="P-0080" lvl="0"><number>&lsqb;0080&rsqb;</number> Discussion now proceeds to explain how the subband tiles are further decomposed to subband data blocks. The motivation for this finer 5-D decomposition is the following. Each subband tile at the resolution j participates in the rendering of local regions in all the resolutions &gE;j . Assume j corresponds to a very low resolution. It turns out that for a high quality rendering of a given ROI at the resolution j only the coefficients with high absolute value are required. Transmitting small coefficients will not have any significant visual effect at the time of rendering and thus should be avoided. Also transmitted coefficients need not be sent at a high precision, since this also will have visual significant to the rendering operation. Rather, for each such significant coefficient only a few bits of precision should be transmitted along with the coefficient&apos;s sign. Rendering the same ROI at a higher quality or rendering a higher resolution will require sending more of the tile&apos;s coefficients and also more accuracy bits for the coefficients that were already sent. For this reason, each subband tile is further decomposed into &ldquo;accuracy&rdquo; data blocks. Each data block is associated with the &ldquo;bit plane&rdquo; interval &lsqb;0,2) of level 0 or the intervals &lsqb;2<highlight><superscript>l</superscript></highlight>, 2<highlight><superscript>l&plus;1</superscript></highlight>) at level l&gE;1, so each data block of the subband tile of Eq.1 will have a 5D coordinate </paragraph>
<paragraph lvl="0"><in-line-formula>Block&equals;(t_x, t_y, t_z, t_resolution, t_bitPlane) &emsp;&emsp;(Eq.2) </in-line-formula></paragraph>
<paragraph id="P-0081" lvl="7"><number>&lsqb;0081&rsqb;</number> where </paragraph>
<paragraph lvl="0"><in-line-formula>0&lE;t_bitPlane&lE;maxBitPlane (t_resolution). </in-line-formula></paragraph>
<paragraph id="P-0082" lvl="0"><number>&lsqb;0082&rsqb;</number> The value of maxBitPlane(t_resolution) corresponds to some predetermined constant or selected dynamically according to the largest coefficient at the resolution t_resolution of the given image. In some embodiments of the invention, maxBitPlane(t_resolution)&equals;8 is suitable. The data block of Eq.2 contains the following data in encoded format: </paragraph>
<paragraph id="P-0083" lvl="2"><number>&lsqb;0083&rsqb;</number> 1. For t_bitPlane&gE;0, a list of the indices of all subband coefficients whose absolute value is in the range &lsqb;2<highlight><superscript>t</superscript></highlight><highlight><superscript><highlight><subscript>&mdash;</subscript></highlight></superscript></highlight><highlight><superscript>bitPlane</superscript></highlight>, 2<highlight><superscript>t</superscript></highlight><highlight><superscript><highlight><subscript>&mdash;</subscript></highlight></superscript></highlight><highlight><superscript>bitPlane&plus;1</superscript></highlight>). </paragraph>
<paragraph id="P-0084" lvl="2"><number>&lsqb;0084&rsqb;</number> 2. The sign of all the coefficients of datum 1. </paragraph>
<paragraph id="P-0085" lvl="2"><number>&lsqb;0085&rsqb;</number> 3. An additional precision bit for any coefficient that belongs to the current bit plane or any higher bit plane is used in one preferred embodiment. </paragraph>
<paragraph id="P-0086" lvl="7"><number>&lsqb;0086&rsqb;</number> The following two remarks can be made on the description herein above: </paragraph>
<paragraph id="P-0087" lvl="0"><number>&lsqb;0087&rsqb;</number> First, in case that the subband tile has coefficients whose absolute value&gE;2<highlight><superscript>maxBitPlane(t</superscript></highlight><highlight><superscript><highlight><subscript>&mdash;</subscript></highlight></superscript></highlight><highlight><superscript>resolution)&plus;1</superscript></highlight>, where maxBitPlane(t_resolution) is not dynamically selected, their bit plane information, which is the most significant, is inserted into the &ldquo;highest&rdquo; possible data block (t_x, t_y, t_z,t_resolution ,maxBitPlane(t<highlight><subscript>&mdash;resolution)). In such a case this most significant data block contains the data of possibly several bit planes. </subscript></highlight></paragraph>
<paragraph id="P-0088" lvl="0"><number>&lsqb;0088&rsqb;</number> Second, in the case of lossy image coding, it is preferable to threshold (discard) all coefficients whose absolute value is below some given threshold &egr;&gt;0. In such a case each data block of Eq.2 is associated with the bit plane &lsqb;&egr;2<highlight><superscript>t</superscript></highlight><highlight><superscript><highlight><subscript>&mdash;</subscript></highlight></superscript></highlight><highlight><superscript>bitPlane</superscript></highlight>,&egr;2<highlight><superscript>t</superscript></highlight><highlight><superscript><highlight><subscript>&mdash;</subscript></highlight></superscript></highlight><highlight><superscript>bitPlane&plus;1</superscript></highlight>). Observe that coefficients whose absolute value is smaller than &egr; are not reported in any data block and therefore never transmitted. </paragraph>
<paragraph id="P-0089" lvl="0"><number>&lsqb;0089&rsqb;</number> In some embodiments, the invention can provide a quickly generated thumbnail view of all the slices of the study, the 3-D image. This feature is particularly useful in medical imaging. To provide thumbnails, the system can generate a low resolution representation of a 2-D image at every coordinate Z of the 3-D image. A multi-resolution decomposition of the original 3-D data is employed for this purpose. Before this decomposition is described, 3 types of subband decomposition need to be defined. </paragraph>
<paragraph id="P-0090" lvl="0"><number>&lsqb;0090&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 4</cross-reference> describes three types of subband decomposition. Each type merits different handling as follows: </paragraph>
<paragraph id="P-0091" lvl="2"><number>&lsqb;0091&rsqb;</number> Case (A) is named herein the HHX-Subbands type. In this case an embodiment of the present invention first performs 2-D wavelet transform for each 2-D image section of the 3-D data having Z&equals;Const, and then performs a wavelet transform in the Z direction on the lh, hl and hh sub-bands of these 2-D transform result. All the ll subbands of the 2-D transform result for every Z are passed to the next resolution. </paragraph>
<paragraph id="P-0092" lvl="2"><number>&lsqb;0092&rsqb;</number> Case (B) is named herein the XYH-Subbands type. In this case a wavelet transform in the Z direction only is performed first, and then the low-pass result of the transform is passed to the next resolution for each X and Y. </paragraph>
<paragraph id="P-0093" lvl="2"><number>&lsqb;0093&rsqb;</number> Case (C) is named herein the All-Subbands type of decomposition. In this case a 2-D wavelet transform is first done for each Z, and then the result undergoes the wavelet transform in the Z direction. Only the lll subband of this separable 3-D wavelet transform is passed to the next resolution level. </paragraph>
<paragraph id="P-0094" lvl="0"><number>&lsqb;0094&rsqb;</number> An embodiment of the present invention for medical applications minimizes the response time for ROI request from the client by evaluating the multi-resolution decomposition in accordance with the following description in reference to <cross-reference target="DRAWINGS">FIG. 5</cross-reference>. The embodiment first employs several steps of HHX-Sub-bands type decomposition (steps <highlight><bold>5010</bold></highlight>, <highlight><bold>5020</bold></highlight>, <highlight><bold>5030</bold></highlight> and <highlight><bold>5040</bold></highlight>) to obtain thumbnail resolution, which is controlled by the predefined parameter thumbnailResolution. Decomposition is employed on slices Z&equals;Const of the original 3-D image. The embodiment then further employs XXH-Sub-bands type decomposition (steps <highlight><bold>5050</bold></highlight>, <highlight><bold>5060</bold></highlight> and <highlight><bold>5070</bold></highlight>) to reduce resolution in the Z direction alone. The resulting DC block (step <highlight><bold>5070</bold></highlight>) may be further optionally decomposed by the All-Subbands type decomposition. Decomposition such as depicted in <cross-reference target="DRAWINGS">FIG. 5</cross-reference> allows quick calculation of all the thumbnail views of every slice of the study and also swift (&ldquo;near real time&rdquo;) response to any ROI chosen by the client computer <highlight><bold>110</bold></highlight>. </paragraph>
<paragraph id="P-0095" lvl="0"><number>&lsqb;0095&rsqb;</number> The multi-resolution decomposition, mentioned herein above in reference to <cross-reference target="DRAWINGS">FIGS. 4 and 5</cross-reference>, is shown schematically in <cross-reference target="DRAWINGS">FIG. 6</cross-reference> for further clarity. The decomposition of original 3-D image <highlight><bold>5010</bold></highlight> is executed in two stages, the first stage is depicted by dividing line <highlight><bold>6010</bold></highlight>, and the second stage is depicted by dividing line <highlight><bold>6015</bold></highlight>. The first is done along the X and Y directions, and the second along the Z direction. The decomposition of the resulting image <highlight><bold>5020</bold></highlight> is executed in two stages, the first is depicted by dividing line <highlight><bold>6020</bold></highlight>, and the second is depicted by dividing line <highlight><bold>6025</bold></highlight>. The first is done along the X and Y directions, and the second along the Z direction. The decomposition of the resulting image <highlight><bold>5030</bold></highlight> continues until a kth step that is executed in two stages, the first is depicted by dividing line <highlight><bold>6030</bold></highlight>, and the second is depicted by dividing line <highlight><bold>6035</bold></highlight>. The first is done along the X and Y directions, and the second along the Z direction. These first k decompositions are of the HHX-Subbands type. The next decompositions are of the X-Subbands type. The decomposition of image <highlight><bold>5040</bold></highlight> is depicted by dividing line <highlight><bold>6040</bold></highlight>. The decomposition of image <highlight><bold>5050</bold></highlight> is depicted by dividing line <highlight><bold>6050</bold></highlight>. Finally, the decomposition of image <highlight><bold>5060</bold></highlight> is depicted by dividing line <highlight><bold>6060</bold></highlight>. </paragraph>
<paragraph id="P-0096" lvl="0"><number>&lsqb;0096&rsqb;</number> Embodiments of the present invention can use a separable wavelet transform. Embodiments for lossy applications can use well-known wavelet transforms while embodiments for lossless applications can use wavelet transforms that are described below. </paragraph>
<paragraph id="P-0097" lvl="0"><number>&lsqb;0097&rsqb;</number> Several embodiments of 2-D Lossless Transforms can be constructed, each based on one of the transforms known in the art. Two embodiments are described herein, the first based on the well-known Haar transform, and the second is based on the lossless version of well-known Cohen-Daubechies-Feauveau (1,3) transform (C.D.F.). Persons skilled in the art can apply the principles described herein below to other transforms. </paragraph>
<paragraph id="P-0098" lvl="0"><number>&lsqb;0098&rsqb;</number> In 2-D Lossless Transforms, any of such well-known lossless transforms can be employed in the X direction. A similar but different transform is employed in the Y direction. It is modified in each subband to get the proper scaling of the coefficients. Proper scaling means that coefficients are normalized in a L<highlight><subscript>2</subscript></highlight>-norm as do wavelet coefficients computed in an accurate mathematical transform that is not limited to integer numbers. </paragraph>
<paragraph id="P-0099" lvl="0"><number>&lsqb;0099&rsqb;</number> This is achieved by assignment of so-called HalfBit information to every coefficient belonging to some of the subbands to keep the perfect reconstruction property of the proposed transforms. The calculation of the HalfBit information is explained herein below in reference to Eq.4c and Eq.6c. </paragraph>
<paragraph id="P-0100" lvl="0"><number>&lsqb;0100&rsqb;</number> Denoting by x(n) the n<highlight><superscript>th </superscript></highlight>component of one-dimensional discrete signal, by s(n) and d(n) respectively the low and high pass components of transform, and by the symbol &boxur;&compfn;&boxul; the floor function meaning &ldquo;greatest integer less than or equal to &compfn;&rdquo;, e.g. &boxur;0.5&boxul;&equals;0,&boxur;&minus;1.5&boxul;&equals;&minus;1, &boxur;2&boxul;&equals;2, &boxur;&minus;1&boxul;&equals;&minus;1 an embodiment of a 2-D lossless wavelet transform can be formulated in the following way. </paragraph>
<paragraph id="P-0101" lvl="0"><number>&lsqb;0101&rsqb;</number> The following description is based on the Haar transform, and first in the X direction. The forward step is the process of coding x(n) to obtain s(n) and d(n). The Haar X direction forward step is given by the following equation.  
<math-cwu id="MATH-US-00001">
<number>1</number>
<math>
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mo>{</mo>
        <mtable>
          <mtr>
            <mtd>
              <mrow>
                <mrow>
                  <mrow>
                    <mi>s</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>(</mo>
                      <mi>n</mi>
                      <mo>)</mo>
                    </mrow>
                  </mrow>
                  <mo>=</mo>
                  <mrow>
                    <mo>&LeftFloor;</mo>
                    <mfrac>
                      <mrow>
                        <mrow>
                          <mi>x</mi>
                          <mo>&af;</mo>
                          <mrow>
                            <mo>(</mo>
                            <mrow>
                              <mn>2</mn>
                              <mo>&it;</mo>
                              <mi>n</mi>
                            </mrow>
                            <mo>)</mo>
                          </mrow>
                        </mrow>
                        <mo>+</mo>
                        <mrow>
                          <mi>x</mi>
                          <mo>&af;</mo>
                          <mrow>
                            <mo>(</mo>
                            <mrow>
                              <mrow>
                                <mn>2</mn>
                                <mo>&it;</mo>
                                <mi>n</mi>
                              </mrow>
                              <mo>+</mo>
                              <mn>1</mn>
                            </mrow>
                            <mo>)</mo>
                          </mrow>
                        </mrow>
                      </mrow>
                      <mn>2</mn>
                    </mfrac>
                    <mo>&RightFloor;</mo>
                  </mrow>
                </mrow>
                <mo>,</mo>
              </mrow>
            </mtd>
          </mtr>
          <mtr>
            <mtd>
              <mrow>
                <mrow>
                  <mi>d</mi>
                  <mo>&af;</mo>
                  <mrow>
                    <mo>(</mo>
                    <mi>n</mi>
                    <mo>)</mo>
                  </mrow>
                </mrow>
                <mo>=</mo>
                <mrow>
                  <mrow>
                    <mi>x</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>(</mo>
                      <mrow>
                        <mrow>
                          <mn>2</mn>
                          <mo>&it;</mo>
                          <mi>n</mi>
                        </mrow>
                        <mo>+</mo>
                        <mn>1</mn>
                      </mrow>
                      <mo>)</mo>
                    </mrow>
                  </mrow>
                  <mo>-</mo>
                  <mrow>
                    <mrow>
                      <mi>x</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mrow>
                          <mn>2</mn>
                          <mo>&it;</mo>
                          <mi>n</mi>
                        </mrow>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                    <mo>.</mo>
                  </mrow>
                </mrow>
              </mrow>
            </mtd>
          </mtr>
        </mtable>
      </mrow>
    </mtd>
    <mtd>
      <mstyle>
        <mtext>(Eq.&nbsp;&nbsp;3A)</mtext>
      </mstyle>
    </mtd>
  </mtr>
</mtable>
</math>
<mathematica-file id="MATHEMATICA-00001" file="US20030005140A1-20030102-M00001.NB"/>
<image id="EMI-M00001" wi="216.027" he="29.9943" file="US20030005140A1-20030102-M00001.TIF" imf="TIFF" ti="MF"/>
</math-cwu>
</paragraph>
<paragraph id="P-0102" lvl="7"><number>&lsqb;0102&rsqb;</number> The inverse step is the process of recovering x(n) from s(n) and d(n). The Haar X direction inverse step is given by the following equation.  
<math-cwu id="MATH-US-00002">
<number>2</number>
<math>
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mo>{</mo>
        <mtable>
          <mtr>
            <mtd>
              <mrow>
                <mrow>
                  <mrow>
                    <mi>x</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>(</mo>
                      <mrow>
                        <mn>2</mn>
                        <mo>&it;</mo>
                        <mi>n</mi>
                      </mrow>
                      <mo>)</mo>
                    </mrow>
                  </mrow>
                  <mo>=</mo>
                  <mrow>
                    <mrow>
                      <mi>s</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mi>n</mi>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                    <mo>-</mo>
                    <mrow>
                      <mo>&LeftFloor;</mo>
                      <mfrac>
                        <mrow>
                          <mi>d</mi>
                          <mo>&af;</mo>
                          <mrow>
                            <mo>(</mo>
                            <mi>n</mi>
                            <mo>)</mo>
                          </mrow>
                        </mrow>
                        <mn>2</mn>
                      </mfrac>
                      <mo>&RightFloor;</mo>
                    </mrow>
                  </mrow>
                </mrow>
                <mo>,</mo>
              </mrow>
            </mtd>
          </mtr>
          <mtr>
            <mtd>
              <mrow>
                <mrow>
                  <mi>x</mi>
                  <mo>&af;</mo>
                  <mrow>
                    <mo>(</mo>
                    <mrow>
                      <mrow>
                        <mn>2</mn>
                        <mo>&it;</mo>
                        <mi>n</mi>
                      </mrow>
                      <mo>+</mo>
                      <mn>1</mn>
                    </mrow>
                    <mo>)</mo>
                  </mrow>
                </mrow>
                <mo>=</mo>
                <mrow>
                  <mrow>
                    <mi>d</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>(</mo>
                      <mi>n</mi>
                      <mo>)</mo>
                    </mrow>
                  </mrow>
                  <mo>+</mo>
                  <mrow>
                    <mrow>
                      <mi>x</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mrow>
                          <mn>2</mn>
                          <mo>&it;</mo>
                          <mi>n</mi>
                        </mrow>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                    <mo>.</mo>
                  </mrow>
                </mrow>
              </mrow>
            </mtd>
          </mtr>
        </mtable>
      </mrow>
    </mtd>
    <mtd>
      <mstyle>
        <mtext>(Eq.&nbsp;&nbsp;3B)</mtext>
      </mstyle>
    </mtd>
  </mtr>
</mtable>
</math>
<mathematica-file id="MATHEMATICA-00002" file="US20030005140A1-20030102-M00002.NB"/>
<image id="EMI-M00002" wi="216.027" he="29.9943" file="US20030005140A1-20030102-M00002.TIF" imf="TIFF" ti="MF"/>
</math-cwu>
</paragraph>
<paragraph id="P-0103" lvl="7"><number>&lsqb;0103&rsqb;</number> The Haar-based low part of the Y direction forward step is given by the following equation.  
<math-cwu id="MATH-US-00003">
<number>3</number>
<math>
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mo>{</mo>
        <mtable>
          <mtr>
            <mtd>
              <mrow>
                <mstyle>
                  <mtext>&emsp;</mtext>
                </mstyle>
                <mo>&it;</mo>
                <mrow>
                  <mrow>
                    <mrow>
                      <mi>s</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mi>n</mi>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                    <mo>=</mo>
                    <mrow>
                      <mrow>
                        <mi>x</mi>
                        <mo>&af;</mo>
                        <mrow>
                          <mo>(</mo>
                          <mrow>
                            <mn>2</mn>
                            <mo>&it;</mo>
                            <mi>n</mi>
                          </mrow>
                          <mo>)</mo>
                        </mrow>
                      </mrow>
                      <mo>+</mo>
                      <mrow>
                        <mi>x</mi>
                        <mo>&af;</mo>
                        <mrow>
                          <mo>(</mo>
                          <mrow>
                            <mrow>
                              <mn>2</mn>
                              <mo>&it;</mo>
                              <mi>n</mi>
                            </mrow>
                            <mo>+</mo>
                            <mn>1</mn>
                          </mrow>
                          <mo>)</mo>
                        </mrow>
                      </mrow>
                    </mrow>
                  </mrow>
                  <mo>,</mo>
                </mrow>
              </mrow>
            </mtd>
          </mtr>
          <mtr>
            <mtd>
              <mrow>
                <mstyle>
                  <mtext>&emsp;</mtext>
                </mstyle>
                <mo>&it;</mo>
                <mrow>
                  <mrow>
                    <mrow>
                      <msup>
                        <mi>d</mi>
                        <mrow>
                          <mo>(</mo>
                          <mn>1</mn>
                          <mo>)</mo>
                        </mrow>
                      </msup>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mi>n</mi>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                    <mo>=</mo>
                    <mrow>
                      <mo>&LeftFloor;</mo>
                      <mfrac>
                        <mrow>
                          <mrow>
                            <mi>x</mi>
                            <mo>&af;</mo>
                            <mrow>
                              <mo>(</mo>
                              <mrow>
                                <mrow>
                                  <mn>2</mn>
                                  <mo>&it;</mo>
                                  <mi>n</mi>
                                </mrow>
                                <mo>+</mo>
                                <mn>1</mn>
                              </mrow>
                              <mo>)</mo>
                            </mrow>
                          </mrow>
                          <mo>-</mo>
                          <mrow>
                            <mi>x</mi>
                            <mo>&af;</mo>
                            <mrow>
                              <mo>(</mo>
                              <mrow>
                                <mn>2</mn>
                                <mo>&it;</mo>
                                <mi>n</mi>
                              </mrow>
                              <mo>)</mo>
                            </mrow>
                          </mrow>
                        </mrow>
                        <mn>2</mn>
                      </mfrac>
                      <mo>&RightFloor;</mo>
                    </mrow>
                  </mrow>
                  <mo>,</mo>
                </mrow>
              </mrow>
            </mtd>
          </mtr>
          <mtr>
            <mtd>
              <mrow>
                <mstyle>
                  <mtext>&emsp;</mtext>
                </mstyle>
                <mo>&it;</mo>
                <mrow>
                  <mrow>
                    <mi>d</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>(</mo>
                      <mi>n</mi>
                      <mo>)</mo>
                    </mrow>
                  </mrow>
                  <mo>=</mo>
                  <mrow>
                    <mn>2</mn>
                    <mo>&it;</mo>
                    <mrow>
                      <mrow>
                        <msup>
                          <mi>d</mi>
                          <mrow>
                            <mo>(</mo>
                            <mn>1</mn>
                            <mo>)</mo>
                          </mrow>
                        </msup>
                        <mo>&af;</mo>
                        <mrow>
                          <mo>(</mo>
                          <mi>n</mi>
                          <mo>)</mo>
                        </mrow>
                      </mrow>
                      <mo>.</mo>
                    </mrow>
                  </mrow>
                </mrow>
              </mrow>
            </mtd>
          </mtr>
        </mtable>
      </mrow>
    </mtd>
    <mtd>
      <mstyle>
        <mtext>(Eq.&nbsp;&nbsp;4A)</mtext>
      </mstyle>
    </mtd>
  </mtr>
</mtable>
</math>
<mathematica-file id="MATHEMATICA-00003" file="US20030005140A1-20030102-M00003.NB"/>
<image id="EMI-M00003" wi="216.027" he="42.9786" file="US20030005140A1-20030102-M00003.TIF" imf="TIFF" ti="MF"/>
</math-cwu>
</paragraph>
<paragraph id="P-0104" lvl="0"><number>&lsqb;0104&rsqb;</number> Eq 4A shows the following properties of an embodiment of the present invention. First, s(n) comprises scaled LL-subband coefficient. Second, s(n) and d<highlight><superscript>(1) </superscript></highlight>(n) are a de-correlated and reversible couple (so they can be transformed back to x(2n) and x(2n&plus;1)), but d<highlight><superscript>(1) </superscript></highlight>(n) is not scaled, so it is assigned half the value use in similar transformed known in the art. Thus, d<highlight><superscript>(1) </superscript></highlight>(n) is multiplied by 2. Third, and nevertheless, the LSB of the LH-subband coefficient d(n) is known to be 0 and not encoded. </paragraph>
<paragraph id="P-0105" lvl="0"><number>&lsqb;0105&rsqb;</number> The Haar-based low part of the Y direction inverse step is given by the following equation.  
<math-cwu id="MATH-US-00004">
<number>4</number>
<math>
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mo>{</mo>
        <mtable>
          <mtr>
            <mtd>
              <mrow>
                <mstyle>
                  <mtext>&emsp;</mtext>
                </mstyle>
                <mo>&it;</mo>
                <mrow>
                  <mrow>
                    <mrow>
                      <mi>x</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mrow>
                          <mrow>
                            <mn>2</mn>
                            <mo>&it;</mo>
                            <mi>n</mi>
                          </mrow>
                          <mo>+</mo>
                          <mn>1</mn>
                        </mrow>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                    <mo>=</mo>
                    <mrow>
                      <mfrac>
                        <mn>1</mn>
                        <mn>2</mn>
                      </mfrac>
                      <mo>&it;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mrow>
                          <mrow>
                            <mi>s</mi>
                            <mo>&af;</mo>
                            <mrow>
                              <mo>(</mo>
                              <mi>n</mi>
                              <mo>)</mo>
                            </mrow>
                          </mrow>
                          <mo>+</mo>
                          <mrow>
                            <mi>d</mi>
                            <mo>&af;</mo>
                            <mrow>
                              <mo>(</mo>
                              <mi>n</mi>
                              <mo>)</mo>
                            </mrow>
                          </mrow>
                          <mo>+</mo>
                          <mrow>
                            <mo>(</mo>
                            <mrow>
                              <mrow>
                                <mi>s</mi>
                                <mo>&af;</mo>
                                <mrow>
                                  <mo>(</mo>
                                  <mi>n</mi>
                                  <mo>)</mo>
                                </mrow>
                              </mrow>
                              <mo>&it;</mo>
                              <mi>mod</mi>
                              <mo>&it;</mo>
                              <mstyle>
                                <mtext>&emsp;</mtext>
                              </mstyle>
                              <mo>&it;</mo>
                              <mn>2</mn>
                            </mrow>
                            <mo>)</mo>
                          </mrow>
                        </mrow>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                  </mrow>
                  <mo>,</mo>
                </mrow>
              </mrow>
            </mtd>
          </mtr>
          <mtr>
            <mtd>
              <mrow>
                <mstyle>
                  <mtext>&emsp;</mtext>
                </mstyle>
                <mo>&it;</mo>
                <mrow>
                  <mrow>
                    <mi>x</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>(</mo>
                      <mrow>
                        <mn>2</mn>
                        <mo>&it;</mo>
                        <mi>n</mi>
                      </mrow>
                      <mo>)</mo>
                    </mrow>
                  </mrow>
                  <mo>=</mo>
                  <mrow>
                    <mrow>
                      <mi>s</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mi>n</mi>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                    <mo>-</mo>
                    <mrow>
                      <mrow>
                        <mi>x</mi>
                        <mo>&af;</mo>
                        <mrow>
                          <mo>(</mo>
                          <mrow>
                            <mrow>
                              <mn>2</mn>
                              <mo>&it;</mo>
                              <mi>n</mi>
                            </mrow>
                            <mo>+</mo>
                            <mn>1</mn>
                          </mrow>
                          <mo>)</mo>
                        </mrow>
                      </mrow>
                      <mo>.</mo>
                    </mrow>
                  </mrow>
                </mrow>
              </mrow>
            </mtd>
          </mtr>
        </mtable>
      </mrow>
    </mtd>
    <mtd>
      <mstyle>
        <mtext>(Eq.&nbsp;&nbsp;4B)</mtext>
      </mstyle>
    </mtd>
  </mtr>
</mtable>
</math>
<mathematica-file id="MATHEMATICA-00004" file="US20030005140A1-20030102-M00004.NB"/>
<image id="EMI-M00004" wi="216.027" he="29.0304" file="US20030005140A1-20030102-M00004.TIF" imf="TIFF" ti="MF"/>
</math-cwu>
</paragraph>
<paragraph id="P-0106" lvl="7"><number>&lsqb;0106&rsqb;</number> The Haar-based high part of the Y direction forward step is given by the following equation.  
<math-cwu id="MATH-US-00005">
<number>5</number>
<math>
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mo>{</mo>
        <mtable>
          <mtr>
            <mtd>
              <mrow>
                <mstyle>
                  <mtext>&emsp;</mtext>
                </mstyle>
                <mo>&it;</mo>
                <mrow>
                  <mrow>
                    <mrow>
                      <msup>
                        <mi>d</mi>
                        <mrow>
                          <mo>(</mo>
                          <mn>1</mn>
                          <mo>)</mo>
                        </mrow>
                      </msup>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mi>n</mi>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                    <mo>=</mo>
                    <mrow>
                      <mrow>
                        <mi>x</mi>
                        <mo>&af;</mo>
                        <mrow>
                          <mo>(</mo>
                          <mrow>
                            <mrow>
                              <mn>2</mn>
                              <mo>&it;</mo>
                              <mi>n</mi>
                            </mrow>
                            <mo>+</mo>
                            <mn>1</mn>
                          </mrow>
                          <mo>)</mo>
                        </mrow>
                      </mrow>
                      <mo>-</mo>
                      <mrow>
                        <mi>x</mi>
                        <mo>&af;</mo>
                        <mrow>
                          <mo>(</mo>
                          <mrow>
                            <mn>2</mn>
                            <mo>&it;</mo>
                            <mi>n</mi>
                          </mrow>
                          <mo>)</mo>
                        </mrow>
                      </mrow>
                    </mrow>
                  </mrow>
                  <mo>,</mo>
                </mrow>
              </mrow>
            </mtd>
          </mtr>
          <mtr>
            <mtd>
              <mrow>
                <mstyle>
                  <mtext>&emsp;</mtext>
                </mstyle>
                <mo>&it;</mo>
                <mrow>
                  <mrow>
                    <mrow>
                      <mi>HalfBit</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mi>n</mi>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                    <mo>=</mo>
                    <mrow>
                      <mrow>
                        <mo>(</mo>
                        <mrow>
                          <msup>
                            <mi>d</mi>
                            <mrow>
                              <mo>(</mo>
                              <mn>1</mn>
                              <mo>)</mo>
                            </mrow>
                          </msup>
                          <mo>&af;</mo>
                          <mrow>
                            <mo>(</mo>
                            <mi>n</mi>
                            <mo>)</mo>
                          </mrow>
                        </mrow>
                        <mo>)</mo>
                      </mrow>
                      <mo>&it;</mo>
                      <mi>mod</mi>
                      <mo>&it;</mo>
                      <mstyle>
                        <mtext>&emsp;</mtext>
                      </mstyle>
                      <mo>&it;</mo>
                      <mn>2</mn>
                    </mrow>
                  </mrow>
                  <mo>,</mo>
                </mrow>
              </mrow>
            </mtd>
          </mtr>
          <mtr>
            <mtd>
              <mrow>
                <mstyle>
                  <mtext>&emsp;</mtext>
                </mstyle>
                <mo>&it;</mo>
                <mrow>
                  <mrow>
                    <mrow>
                      <mi>d</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mi>n</mi>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                    <mo>=</mo>
                    <mrow>
                      <mo>&LeftFloor;</mo>
                      <mfrac>
                        <mrow>
                          <msup>
                            <mi>d</mi>
                            <mrow>
                              <mo>(</mo>
                              <mn>1</mn>
                              <mo>)</mo>
                            </mrow>
                          </msup>
                          <mo>&af;</mo>
                          <mrow>
                            <mo>(</mo>
                            <mi>n</mi>
                            <mo>)</mo>
                          </mrow>
                        </mrow>
                        <mn>2</mn>
                      </mfrac>
                      <mo>&RightFloor;</mo>
                    </mrow>
                  </mrow>
                  <mo>,</mo>
                </mrow>
              </mrow>
            </mtd>
          </mtr>
          <mtr>
            <mtd>
              <mrow>
                <mstyle>
                  <mtext>&emsp;</mtext>
                </mstyle>
                <mo>&it;</mo>
                <mrow>
                  <mrow>
                    <mi>s</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>(</mo>
                      <mi>n</mi>
                      <mo>)</mo>
                    </mrow>
                  </mrow>
                  <mo>=</mo>
                  <mrow>
                    <mrow>
                      <mi>x</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mrow>
                          <mn>2</mn>
                          <mo>&it;</mo>
                          <mi>n</mi>
                        </mrow>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                    <mo>+</mo>
                    <mrow>
                      <mrow>
                        <mi>d</mi>
                        <mo>&af;</mo>
                        <mrow>
                          <mo>(</mo>
                          <mi>n</mi>
                          <mo>)</mo>
                        </mrow>
                      </mrow>
                      <mo>.</mo>
                    </mrow>
                  </mrow>
                </mrow>
              </mrow>
            </mtd>
          </mtr>
        </mtable>
      </mrow>
    </mtd>
    <mtd>
      <mstyle>
        <mtext>(Eq.&nbsp;&nbsp;4C)</mtext>
      </mstyle>
    </mtd>
  </mtr>
</mtable>
</math>
<mathematica-file id="MATHEMATICA-00005" file="US20030005140A1-20030102-M00005.NB"/>
<image id="EMI-M00005" wi="216.027" he="59.05305" file="US20030005140A1-20030102-M00005.TIF" imf="TIFF" ti="MF"/>
</math-cwu>
</paragraph>
<paragraph id="P-0107" lvl="0"><number>&lsqb;0107&rsqb;</number> Eq.4C shows the following properties. First, d<highlight><superscript>(1) </superscript></highlight>(n) and s(n) comprise a de-correlated and reversible couple, but d<highlight><superscript>(1) </superscript></highlight>(n) is not scaled, so it is assigned twice the value use in similar transformed known in the art. Therefore, d<highlight><superscript>(1) </superscript></highlight>(n) is divided by 2. By doing that, its least significant bit is lost, and cannot be restored, unless this bit is kept as the so called Half-Bit information. This name serves to remind us that its weight is half that of other coefficients and that it is the least significant (from an approximation point of view). </paragraph>
<paragraph id="P-0108" lvl="0"><number>&lsqb;0108&rsqb;</number> The Haar-based high part of the Y direction inverse step is given by the following equation.  
<math-cwu id="MATH-US-00006">
<number>6</number>
<math>
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mo>{</mo>
        <mtable>
          <mtr>
            <mtd>
              <mrow>
                <mstyle>
                  <mtext>&emsp;</mtext>
                </mstyle>
                <mo>&it;</mo>
                <mrow>
                  <mrow>
                    <mrow>
                      <mi>x</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mrow>
                          <mn>2</mn>
                          <mo>&it;</mo>
                          <mi>n</mi>
                        </mrow>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                    <mo>=</mo>
                    <mrow>
                      <mrow>
                        <mi>s</mi>
                        <mo>&af;</mo>
                        <mrow>
                          <mo>(</mo>
                          <mi>n</mi>
                          <mo>)</mo>
                        </mrow>
                      </mrow>
                      <mo>-</mo>
                      <mrow>
                        <mi>d</mi>
                        <mo>&af;</mo>
                        <mrow>
                          <mo>(</mo>
                          <mi>n</mi>
                          <mo>)</mo>
                        </mrow>
                      </mrow>
                    </mrow>
                  </mrow>
                  <mo>,</mo>
                </mrow>
              </mrow>
            </mtd>
          </mtr>
          <mtr>
            <mtd>
              <mrow>
                <mstyle>
                  <mtext>&emsp;</mtext>
                </mstyle>
                <mo>&it;</mo>
                <mrow>
                  <mrow>
                    <mrow>
                      <msup>
                        <mi>d</mi>
                        <mrow>
                          <mo>(</mo>
                          <mn>1</mn>
                          <mo>)</mo>
                        </mrow>
                      </msup>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mi>n</mi>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                    <mo>=</mo>
                    <mrow>
                      <mrow>
                        <mn>2</mn>
                        <mo>&it;</mo>
                        <mrow>
                          <mi>d</mi>
                          <mo>&af;</mo>
                          <mrow>
                            <mo>(</mo>
                            <mi>n</mi>
                            <mo>)</mo>
                          </mrow>
                        </mrow>
                      </mrow>
                      <mo>+</mo>
                      <mrow>
                        <mi>HalfBit</mi>
                        <mo>&af;</mo>
                        <mrow>
                          <mo>(</mo>
                          <mi>n</mi>
                          <mo>)</mo>
                        </mrow>
                      </mrow>
                    </mrow>
                  </mrow>
                  <mo>,</mo>
                </mrow>
              </mrow>
            </mtd>
          </mtr>
          <mtr>
            <mtd>
              <mrow>
                <mstyle>
                  <mtext>&emsp;</mtext>
                </mstyle>
                <mo>&it;</mo>
                <mrow>
                  <mrow>
                    <mi>x</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>(</mo>
                      <mrow>
                        <mrow>
                          <mn>2</mn>
                          <mo>&it;</mo>
                          <mi>n</mi>
                        </mrow>
                        <mo>+</mo>
                        <mn>1</mn>
                      </mrow>
                      <mo>)</mo>
                    </mrow>
                  </mrow>
                  <mo>=</mo>
                  <mrow>
                    <mrow>
                      <msup>
                        <mi>d</mi>
                        <mrow>
                          <mo>(</mo>
                          <mn>1</mn>
                          <mo>)</mo>
                        </mrow>
                      </msup>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mi>n</mi>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                    <mo>+</mo>
                    <mrow>
                      <mrow>
                        <mi>x</mi>
                        <mo>&af;</mo>
                        <mrow>
                          <mo>(</mo>
                          <mrow>
                            <mn>2</mn>
                            <mo>&it;</mo>
                            <mi>n</mi>
                          </mrow>
                          <mo>)</mo>
                        </mrow>
                      </mrow>
                      <mo>.</mo>
                    </mrow>
                  </mrow>
                </mrow>
              </mrow>
            </mtd>
          </mtr>
        </mtable>
      </mrow>
    </mtd>
    <mtd>
      <mstyle>
        <mtext>(Eq.&nbsp;&nbsp;4D)</mtext>
      </mstyle>
    </mtd>
  </mtr>
</mtable>
</math>
<mathematica-file id="MATHEMATICA-00006" file="US20030005140A1-20030102-M00006.NB"/>
<image id="EMI-M00006" wi="216.027" he="36.0045" file="US20030005140A1-20030102-M00006.TIF" imf="TIFF" ti="MF"/>
</math-cwu>
</paragraph>
<paragraph id="P-0109" lvl="0"><number>&lsqb;0109&rsqb;</number> The following description is based on the CDF (1,3) transform, and first in the X direction. The forward step is the process of coding x(n) to obtain s(n) and d(n). The CDF (1,3) X direction forward step is given by the following equation.  
<math-cwu id="MATH-US-00007">
<number>7</number>
<math>
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mo>{</mo>
        <mtable>
          <mtr>
            <mtd>
              <mrow>
                <mstyle>
                  <mtext>&emsp;</mtext>
                </mstyle>
                <mo>&it;</mo>
                <mrow>
                  <mrow>
                    <mrow>
                      <mi>s</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mi>n</mi>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                    <mo>=</mo>
                    <mrow>
                      <mo>&LeftFloor;</mo>
                      <mfrac>
                        <mrow>
                          <mrow>
                            <mi>x</mi>
                            <mo>&af;</mo>
                            <mrow>
                              <mo>(</mo>
                              <mrow>
                                <mn>2</mn>
                                <mo>&it;</mo>
                                <mi>n</mi>
                              </mrow>
                              <mo>)</mo>
                            </mrow>
                          </mrow>
                          <mo>+</mo>
                          <mrow>
                            <mi>x</mi>
                            <mo>&af;</mo>
                            <mrow>
                              <mo>(</mo>
                              <mrow>
                                <mrow>
                                  <mn>2</mn>
                                  <mo>&it;</mo>
                                  <mi>n</mi>
                                </mrow>
                                <mo>+</mo>
                                <mn>1</mn>
                              </mrow>
                              <mo>)</mo>
                            </mrow>
                          </mrow>
                        </mrow>
                        <mn>2</mn>
                      </mfrac>
                      <mo>&RightFloor;</mo>
                    </mrow>
                  </mrow>
                  <mo>,</mo>
                </mrow>
              </mrow>
            </mtd>
          </mtr>
          <mtr>
            <mtd>
              <mrow>
                <mstyle>
                  <mtext>&emsp;</mtext>
                </mstyle>
                <mo>&it;</mo>
                <mrow>
                  <mrow>
                    <mrow>
                      <msup>
                        <mi>d</mi>
                        <mrow>
                          <mo>(</mo>
                          <mn>1</mn>
                          <mo>)</mo>
                        </mrow>
                      </msup>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mi>n</mi>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                    <mo>=</mo>
                    <mrow>
                      <mrow>
                        <mi>x</mi>
                        <mo>&af;</mo>
                        <mrow>
                          <mo>(</mo>
                          <mrow>
                            <mrow>
                              <mn>2</mn>
                              <mo>&it;</mo>
                              <mi>n</mi>
                            </mrow>
                            <mo>+</mo>
                            <mn>1</mn>
                          </mrow>
                          <mo>)</mo>
                        </mrow>
                      </mrow>
                      <mo>-</mo>
                      <mrow>
                        <mi>x</mi>
                        <mo>&af;</mo>
                        <mrow>
                          <mo>(</mo>
                          <mrow>
                            <mn>2</mn>
                            <mo>&it;</mo>
                            <mi>n</mi>
                          </mrow>
                          <mo>)</mo>
                        </mrow>
                      </mrow>
                    </mrow>
                  </mrow>
                  <mo>,</mo>
                </mrow>
              </mrow>
            </mtd>
          </mtr>
          <mtr>
            <mtd>
              <mrow>
                <mstyle>
                  <mtext>&emsp;</mtext>
                </mstyle>
                <mo>&it;</mo>
                <mrow>
                  <mrow>
                    <mi>d</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>(</mo>
                      <mi>n</mi>
                      <mo>)</mo>
                    </mrow>
                  </mrow>
                  <mo>=</mo>
                  <mrow>
                    <mrow>
                      <msup>
                        <mi>d</mi>
                        <mrow>
                          <mo>(</mo>
                          <mn>1</mn>
                          <mo>)</mo>
                        </mrow>
                      </msup>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mi>n</mi>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                    <mo>+</mo>
                    <mrow>
                      <mrow>
                        <mo>&LeftFloor;</mo>
                        <mfrac>
                          <mrow>
                            <mrow>
                              <mi>s</mi>
                              <mo>&af;</mo>
                              <mrow>
                                <mo>(</mo>
                                <mrow>
                                  <mi>n</mi>
                                  <mo>-</mo>
                                  <mn>1</mn>
                                </mrow>
                                <mo>)</mo>
                              </mrow>
                            </mrow>
                            <mo>-</mo>
                            <mrow>
                              <mi>s</mi>
                              <mo>&af;</mo>
                              <mrow>
                                <mo>(</mo>
                                <mrow>
                                  <mi>n</mi>
                                  <mo>+</mo>
                                  <mn>1</mn>
                                </mrow>
                                <mo>)</mo>
                              </mrow>
                            </mrow>
                          </mrow>
                          <mn>4</mn>
                        </mfrac>
                        <mo>&RightFloor;</mo>
                      </mrow>
                      <mo>.</mo>
                    </mrow>
                  </mrow>
                </mrow>
              </mrow>
            </mtd>
          </mtr>
        </mtable>
      </mrow>
    </mtd>
    <mtd>
      <mstyle>
        <mtext>(Eq.&nbsp;&nbsp;5A)</mtext>
      </mstyle>
    </mtd>
  </mtr>
</mtable>
</math>
<mathematica-file id="MATHEMATICA-00007" file="US20030005140A1-20030102-M00007.NB"/>
<image id="EMI-M00007" wi="216.027" he="52.07895" file="US20030005140A1-20030102-M00007.TIF" imf="TIFF" ti="MF"/>
</math-cwu>
</paragraph>
<paragraph id="P-0110" lvl="0"><number>&lsqb;0110&rsqb;</number> The CDF (1,3) X direction inverse step is given by the following equation.  
<math-cwu id="MATH-US-00008">
<number>8</number>
<math>
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mo>{</mo>
        <mtable>
          <mtr>
            <mtd>
              <mrow>
                <mstyle>
                  <mtext>&emsp;</mtext>
                </mstyle>
                <mo>&it;</mo>
                <mrow>
                  <mrow>
                    <mrow>
                      <msup>
                        <mi>d</mi>
                        <mrow>
                          <mo>(</mo>
                          <mn>1</mn>
                          <mo>)</mo>
                        </mrow>
                      </msup>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mi>n</mi>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                    <mo>=</mo>
                    <mrow>
                      <mrow>
                        <mi>d</mi>
                        <mo>&af;</mo>
                        <mrow>
                          <mo>(</mo>
                          <mi>n</mi>
                          <mo>)</mo>
                        </mrow>
                      </mrow>
                      <mo>-</mo>
                      <mrow>
                        <mo>&LeftFloor;</mo>
                        <mfrac>
                          <mrow>
                            <mrow>
                              <mi>s</mi>
                              <mo>&af;</mo>
                              <mrow>
                                <mo>(</mo>
                                <mrow>
                                  <mi>n</mi>
                                  <mo>-</mo>
                                  <mn>1</mn>
                                </mrow>
                                <mo>)</mo>
                              </mrow>
                            </mrow>
                            <mo>-</mo>
                            <mrow>
                              <mi>s</mi>
                              <mo>&af;</mo>
                              <mrow>
                                <mo>(</mo>
                                <mrow>
                                  <mi>n</mi>
                                  <mo>+</mo>
                                  <mn>1</mn>
                                </mrow>
                                <mo>)</mo>
                              </mrow>
                            </mrow>
                          </mrow>
                          <mn>4</mn>
                        </mfrac>
                        <mo>&RightFloor;</mo>
                      </mrow>
                    </mrow>
                  </mrow>
                  <mo>,</mo>
                </mrow>
              </mrow>
            </mtd>
          </mtr>
          <mtr>
            <mtd>
              <mrow>
                <mstyle>
                  <mtext>&emsp;</mtext>
                </mstyle>
                <mo>&it;</mo>
                <mrow>
                  <mrow>
                    <mrow>
                      <mi>x</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mrow>
                          <mn>2</mn>
                          <mo>&it;</mo>
                          <mi>n</mi>
                        </mrow>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                    <mo>=</mo>
                    <mrow>
                      <mrow>
                        <mi>s</mi>
                        <mo>&af;</mo>
                        <mrow>
                          <mo>(</mo>
                          <mi>n</mi>
                          <mo>)</mo>
                        </mrow>
                      </mrow>
                      <mo>-</mo>
                      <mrow>
                        <mo>&LeftFloor;</mo>
                        <mfrac>
                          <mrow>
                            <msup>
                              <mi>d</mi>
                              <mrow>
                                <mo>(</mo>
                                <mn>1</mn>
                                <mo>)</mo>
                              </mrow>
                            </msup>
                            <mo>&af;</mo>
                            <mrow>
                              <mo>(</mo>
                              <mi>n</mi>
                              <mo>)</mo>
                            </mrow>
                          </mrow>
                          <mn>2</mn>
                        </mfrac>
                        <mo>&RightFloor;</mo>
                      </mrow>
                    </mrow>
                  </mrow>
                  <mo>,</mo>
                </mrow>
              </mrow>
            </mtd>
          </mtr>
          <mtr>
            <mtd>
              <mrow>
                <mstyle>
                  <mtext>&emsp;</mtext>
                </mstyle>
                <mo>&it;</mo>
                <mrow>
                  <mrow>
                    <mi>x</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>(</mo>
                      <mrow>
                        <mrow>
                          <mn>2</mn>
                          <mo>&it;</mo>
                          <mi>n</mi>
                        </mrow>
                        <mo>+</mo>
                        <mn>1</mn>
                      </mrow>
                      <mo>)</mo>
                    </mrow>
                  </mrow>
                  <mo>=</mo>
                  <mrow>
                    <mrow>
                      <mi>x</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mrow>
                          <mn>2</mn>
                          <mo>&it;</mo>
                          <mi>n</mi>
                        </mrow>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                    <mo>+</mo>
                    <mrow>
                      <mrow>
                        <msup>
                          <mi>d</mi>
                          <mrow>
                            <mo>(</mo>
                            <mn>1</mn>
                            <mo>)</mo>
                          </mrow>
                        </msup>
                        <mo>&af;</mo>
                        <mrow>
                          <mo>(</mo>
                          <mi>n</mi>
                          <mo>)</mo>
                        </mrow>
                      </mrow>
                      <mo>.</mo>
                    </mrow>
                  </mrow>
                </mrow>
              </mrow>
            </mtd>
          </mtr>
        </mtable>
      </mrow>
    </mtd>
    <mtd>
      <mstyle>
        <mtext>(Eq.&nbsp;&nbsp;5B)</mtext>
      </mstyle>
    </mtd>
  </mtr>
</mtable>
</math>
<mathematica-file id="MATHEMATICA-00008" file="US20030005140A1-20030102-M00008.NB"/>
<image id="EMI-M00008" wi="216.027" he="54.97065" file="US20030005140A1-20030102-M00008.TIF" imf="TIFF" ti="MF"/>
</math-cwu>
</paragraph>
<paragraph id="P-0111" lvl="7"><number>&lsqb;0111&rsqb;</number> CDF (1,3) low part Y direction forward step is given by the following equation.  
<math-cwu id="MATH-US-00009">
<number>9</number>
<math>
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mo>{</mo>
        <mrow>
          <mtable>
            <mtr>
              <mtd>
                <mrow>
                  <mstyle>
                    <mtext>&emsp;</mtext>
                  </mstyle>
                  <mo>&it;</mo>
                  <mrow>
                    <mrow>
                      <mrow>
                        <mi>s</mi>
                        <mo>&af;</mo>
                        <mrow>
                          <mo>(</mo>
                          <mi>n</mi>
                          <mo>)</mo>
                        </mrow>
                      </mrow>
                      <mo>=</mo>
                      <mrow>
                        <mrow>
                          <mi>x</mi>
                          <mo>&af;</mo>
                          <mrow>
                            <mo>(</mo>
                            <mrow>
                              <mn>2</mn>
                              <mo>&it;</mo>
                              <mi>n</mi>
                            </mrow>
                            <mo>)</mo>
                          </mrow>
                        </mrow>
                        <mo>+</mo>
                        <mrow>
                          <mi>x</mi>
                          <mo>&af;</mo>
                          <mrow>
                            <mo>(</mo>
                            <mrow>
                              <mrow>
                                <mn>2</mn>
                                <mo>&it;</mo>
                                <mi>n</mi>
                              </mrow>
                              <mo>+</mo>
                              <mn>1</mn>
                            </mrow>
                            <mo>)</mo>
                          </mrow>
                        </mrow>
                      </mrow>
                    </mrow>
                    <mo>,</mo>
                  </mrow>
                </mrow>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <mrow>
                  <mstyle>
                    <mtext>&emsp;</mtext>
                  </mstyle>
                  <mo>&it;</mo>
                  <mrow>
                    <mrow>
                      <mrow>
                        <msup>
                          <mi>d</mi>
                          <mrow>
                            <mo>(</mo>
                            <mn>1</mn>
                            <mo>)</mo>
                          </mrow>
                        </msup>
                        <mo>&af;</mo>
                        <mrow>
                          <mo>(</mo>
                          <mi>n</mi>
                          <mo>)</mo>
                        </mrow>
                      </mrow>
                      <mo>=</mo>
                      <mrow>
                        <mo>&LeftFloor;</mo>
                        <mfrac>
                          <mrow>
                            <mrow>
                              <mi>x</mi>
                              <mo>&af;</mo>
                              <mrow>
                                <mo>(</mo>
                                <mrow>
                                  <mrow>
                                    <mn>2</mn>
                                    <mo>&it;</mo>
                                    <mi>n</mi>
                                  </mrow>
                                  <mo>+</mo>
                                  <mn>1</mn>
                                </mrow>
                                <mo>)</mo>
                              </mrow>
                            </mrow>
                            <mo>-</mo>
                            <mrow>
                              <mi>x</mi>
                              <mo>&af;</mo>
                              <mrow>
                                <mo>(</mo>
                                <mrow>
                                  <mn>2</mn>
                                  <mo>&it;</mo>
                                  <mi>n</mi>
                                </mrow>
                                <mo>)</mo>
                              </mrow>
                            </mrow>
                            <mo>+</mo>
                            <mrow>
                              <mo>&LeftFloor;</mo>
                              <mfrac>
                                <mrow>
                                  <mrow>
                                    <mi>s</mi>
                                    <mo>&af;</mo>
                                    <mrow>
                                      <mo>(</mo>
                                      <mrow>
                                        <mi>n</mi>
                                        <mo>-</mo>
                                        <mn>1</mn>
                                      </mrow>
                                      <mo>)</mo>
                                    </mrow>
                                  </mrow>
                                  <mo>-</mo>
                                  <mrow>
                                    <mi>s</mi>
                                    <mo>&af;</mo>
                                    <mrow>
                                      <mo>(</mo>
                                      <mrow>
                                        <mi>n</mi>
                                        <mo>+</mo>
                                        <mn>1</mn>
                                      </mrow>
                                      <mo>)</mo>
                                    </mrow>
                                  </mrow>
                                </mrow>
                                <mn>8</mn>
                              </mfrac>
                              <mo>&RightFloor;</mo>
                            </mrow>
                          </mrow>
                          <mn>2</mn>
                        </mfrac>
                        <mo>&RightFloor;</mo>
                      </mrow>
                    </mrow>
                    <mo>,</mo>
                  </mrow>
                </mrow>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <mrow>
                  <mstyle>
                    <mtext>&emsp;</mtext>
                  </mstyle>
                  <mo>&it;</mo>
                  <mrow>
                    <mrow>
                      <mi>d</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mi>n</mi>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                    <mo>=</mo>
                    <mrow>
                      <mn>2</mn>
                      <mo>&it;</mo>
                      <mrow>
                        <mrow>
                          <msup>
                            <mi>d</mi>
                            <mrow>
                              <mo>(</mo>
                              <mn>1</mn>
                              <mo>)</mo>
                            </mrow>
                          </msup>
                          <mo>&af;</mo>
                          <mrow>
                            <mo>(</mo>
                            <mi>n</mi>
                            <mo>)</mo>
                          </mrow>
                        </mrow>
                        <mo>.</mo>
                      </mrow>
                    </mrow>
                  </mrow>
                </mrow>
              </mtd>
            </mtr>
          </mtable>
          <mo>&AutoLeftMatch;</mo>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mstyle>
        <mtext>(Eq.&nbsp;&nbsp;6A)</mtext>
      </mstyle>
    </mtd>
  </mtr>
</mtable>
</math>
<mathematica-file id="MATHEMATICA-00009" file="US20030005140A1-20030102-M00009.NB"/>
<image id="EMI-M00009" wi="216.027" he="51.11505" file="US20030005140A1-20030102-M00009.TIF" imf="TIFF" ti="MF"/>
</math-cwu>
</paragraph>
<paragraph id="P-0112" lvl="7"><number>&lsqb;0112&rsqb;</number> CDF (1,3) low part Y direction inverse step is given by the following equation.  
<math-cwu id="MATH-US-00010">
<number>10</number>
<math>
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mo>{</mo>
        <mrow>
          <mtable>
            <mtr>
              <mtd>
                <mrow>
                  <mstyle>
                    <mtext>&emsp;</mtext>
                  </mstyle>
                  <mo>&it;</mo>
                  <mrow>
                    <mrow>
                      <mrow>
                        <msup>
                          <mi>d</mi>
                          <mrow>
                            <mo>(</mo>
                            <mn>1</mn>
                            <mo>)</mo>
                          </mrow>
                        </msup>
                        <mo>&af;</mo>
                        <mrow>
                          <mo>(</mo>
                          <mi>n</mi>
                          <mo>)</mo>
                        </mrow>
                      </mrow>
                      <mo>=</mo>
                      <mrow>
                        <mrow>
                          <mn>2</mn>
                          <mo>&it;</mo>
                          <mrow>
                            <mi>d</mi>
                            <mo>&af;</mo>
                            <mrow>
                              <mo>(</mo>
                              <mi>n</mi>
                              <mo>)</mo>
                            </mrow>
                          </mrow>
                        </mrow>
                        <mo>+</mo>
                        <mrow>
                          <mi>HalfBit</mi>
                          <mo>&af;</mo>
                          <mrow>
                            <mo>(</mo>
                            <mi>n</mi>
                            <mo>)</mo>
                          </mrow>
                        </mrow>
                        <mo>-</mo>
                        <mrow>
                          <mo>&LeftFloor;</mo>
                          <mfrac>
                            <mrow>
                              <mrow>
                                <mi>s</mi>
                                <mo>&af;</mo>
                                <mrow>
                                  <mo>(</mo>
                                  <mrow>
                                    <mi>n</mi>
                                    <mo>-</mo>
                                    <mn>1</mn>
                                  </mrow>
                                  <mo>)</mo>
                                </mrow>
                              </mrow>
                              <mo>-</mo>
                              <mrow>
                                <mi>s</mi>
                                <mo>&af;</mo>
                                <mrow>
                                  <mo>(</mo>
                                  <mrow>
                                    <mi>n</mi>
                                    <mo>+</mo>
                                    <mn>1</mn>
                                  </mrow>
                                  <mo>)</mo>
                                </mrow>
                              </mrow>
                            </mrow>
                            <mn>4</mn>
                          </mfrac>
                          <mo>&RightFloor;</mo>
                        </mrow>
                      </mrow>
                    </mrow>
                    <mo>,</mo>
                  </mrow>
                </mrow>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <mrow>
                  <mstyle>
                    <mtext>&emsp;</mtext>
                  </mstyle>
                  <mo>&it;</mo>
                  <mrow>
                    <mrow>
                      <mrow>
                        <mi>x</mi>
                        <mo>&af;</mo>
                        <mrow>
                          <mo>(</mo>
                          <mrow>
                            <mn>2</mn>
                            <mo>&it;</mo>
                            <mi>n</mi>
                          </mrow>
                          <mo>)</mo>
                        </mrow>
                      </mrow>
                      <mo>=</mo>
                      <mrow>
                        <mrow>
                          <mi>s</mi>
                          <mo>&af;</mo>
                          <mrow>
                            <mo>(</mo>
                            <mi>n</mi>
                            <mo>)</mo>
                          </mrow>
                        </mrow>
                        <mo>-</mo>
                        <mrow>
                          <mo>&LeftFloor;</mo>
                          <mfrac>
                            <mrow>
                              <msup>
                                <mi>d</mi>
                                <mrow>
                                  <mo>(</mo>
                                  <mn>1</mn>
                                  <mo>)</mo>
                                </mrow>
                              </msup>
                              <mo>&af;</mo>
                              <mrow>
                                <mo>(</mo>
                                <mi>n</mi>
                                <mo>)</mo>
                              </mrow>
                            </mrow>
                            <mn>2</mn>
                          </mfrac>
                          <mo>&RightFloor;</mo>
                        </mrow>
                      </mrow>
                    </mrow>
                    <mo>,</mo>
                  </mrow>
                </mrow>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <mrow>
                  <mstyle>
                    <mtext>&emsp;</mtext>
                  </mstyle>
                  <mo>&it;</mo>
                  <mrow>
                    <mrow>
                      <mi>x</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mrow>
                          <mrow>
                            <mn>2</mn>
                            <mo>&it;</mo>
                            <mi>n</mi>
                          </mrow>
                          <mo>+</mo>
                          <mn>1</mn>
                        </mrow>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                    <mo>=</mo>
                    <mrow>
                      <mrow>
                        <msup>
                          <mi>d</mi>
                          <mrow>
                            <mo>(</mo>
                            <mn>1</mn>
                            <mo>)</mo>
                          </mrow>
                        </msup>
                        <mo>&af;</mo>
                        <mrow>
                          <mo>(</mo>
                          <mi>n</mi>
                          <mo>)</mo>
                        </mrow>
                      </mrow>
                      <mo>+</mo>
                      <mrow>
                        <mrow>
                          <mi>x</mi>
                          <mo>&af;</mo>
                          <mrow>
                            <mo>(</mo>
                            <mrow>
                              <mn>2</mn>
                              <mo>&it;</mo>
                              <mi>n</mi>
                            </mrow>
                            <mo>)</mo>
                          </mrow>
                        </mrow>
                        <mo>.</mo>
                      </mrow>
                    </mrow>
                  </mrow>
                </mrow>
              </mtd>
            </mtr>
          </mtable>
          <mo>&AutoLeftMatch;</mo>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mstyle>
        <mtext>(Eq.&nbsp;&nbsp;6d)</mtext>
      </mstyle>
    </mtd>
  </mtr>
</mtable>
</math>
<mathematica-file id="MATHEMATICA-00010" file="US20030005140A1-20030102-M00010.NB"/>
<image id="EMI-M00010" wi="216.027" he="54.97065" file="US20030005140A1-20030102-M00010.TIF" imf="TIFF" ti="MF"/>
</math-cwu>
</paragraph>
<paragraph id="P-0113" lvl="7"><number>&lsqb;0113&rsqb;</number> CDF (1,3) high part Y direction forward step is given by the following equation.  
<math-cwu id="MATH-US-00011">
<number>11</number>
<math>
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mo>{</mo>
        <mtable>
          <mtr>
            <mtd>
              <mrow>
                <mstyle>
                  <mtext>&emsp;</mtext>
                </mstyle>
                <mo>&it;</mo>
                <mrow>
                  <mrow>
                    <mrow>
                      <mi>s</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mi>n</mi>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                    <mo>=</mo>
                    <mrow>
                      <mo>&LeftFloor;</mo>
                      <mfrac>
                        <mrow>
                          <mrow>
                            <mi>x</mi>
                            <mo>&af;</mo>
                            <mrow>
                              <mo>(</mo>
                              <mrow>
                                <mn>2</mn>
                                <mo>&it;</mo>
                                <mi>n</mi>
                              </mrow>
                              <mo>)</mo>
                            </mrow>
                          </mrow>
                          <mo>+</mo>
                          <mrow>
                            <mi>x</mi>
                            <mo>&af;</mo>
                            <mrow>
                              <mo>(</mo>
                              <mrow>
                                <mrow>
                                  <mn>2</mn>
                                  <mo>&it;</mo>
                                  <mi>n</mi>
                                </mrow>
                                <mo>+</mo>
                                <mn>1</mn>
                              </mrow>
                              <mo>)</mo>
                            </mrow>
                          </mrow>
                        </mrow>
                        <mn>2</mn>
                      </mfrac>
                      <mo>&RightFloor;</mo>
                    </mrow>
                  </mrow>
                  <mo>,</mo>
                </mrow>
              </mrow>
            </mtd>
          </mtr>
          <mtr>
            <mtd>
              <mrow>
                <mstyle>
                  <mtext>&emsp;</mtext>
                </mstyle>
                <mo>&it;</mo>
                <mrow>
                  <mrow>
                    <mrow>
                      <msup>
                        <mi>d</mi>
                        <mrow>
                          <mo>(</mo>
                          <mn>1</mn>
                          <mo>)</mo>
                        </mrow>
                      </msup>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mi>n</mi>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                    <mo>=</mo>
                    <mrow>
                      <mrow>
                        <mi>x</mi>
                        <mo>&af;</mo>
                        <mrow>
                          <mo>(</mo>
                          <mrow>
                            <mrow>
                              <mn>2</mn>
                              <mo>&it;</mo>
                              <mi>n</mi>
                            </mrow>
                            <mo>+</mo>
                            <mn>1</mn>
                          </mrow>
                          <mo>)</mo>
                        </mrow>
                      </mrow>
                      <mo>-</mo>
                      <mrow>
                        <mi>x</mi>
                        <mo>&af;</mo>
                        <mrow>
                          <mo>(</mo>
                          <mrow>
                            <mn>2</mn>
                            <mo>&it;</mo>
                            <mi>n</mi>
                          </mrow>
                          <mo>)</mo>
                        </mrow>
                      </mrow>
                    </mrow>
                  </mrow>
                  <mo>,</mo>
                </mrow>
              </mrow>
            </mtd>
          </mtr>
          <mtr>
            <mtd>
              <mrow>
                <mstyle>
                  <mtext>&emsp;</mtext>
                </mstyle>
                <mo>&it;</mo>
                <mrow>
                  <mrow>
                    <mrow>
                      <msup>
                        <mi>d</mi>
                        <mrow>
                          <mo>(</mo>
                          <mn>2</mn>
                          <mo>)</mo>
                        </mrow>
                      </msup>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mi>n</mi>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                    <mo>=</mo>
                    <mrow>
                      <mrow>
                        <msup>
                          <mi>d</mi>
                          <mrow>
                            <mo>(</mo>
                            <mn>1</mn>
                            <mo>)</mo>
                          </mrow>
                        </msup>
                        <mo>&af;</mo>
                        <mrow>
                          <mo>(</mo>
                          <mi>n</mi>
                          <mo>)</mo>
                        </mrow>
                      </mrow>
                      <mo>+</mo>
                      <mrow>
                        <mo>&LeftFloor;</mo>
                        <mfrac>
                          <mrow>
                            <mrow>
                              <mi>s</mi>
                              <mo>&af;</mo>
                              <mrow>
                                <mo>(</mo>
                                <mrow>
                                  <mi>n</mi>
                                  <mo>-</mo>
                                  <mn>1</mn>
                                </mrow>
                                <mo>)</mo>
                              </mrow>
                            </mrow>
                            <mo>-</mo>
                            <mrow>
                              <mi>s</mi>
                              <mo>&af;</mo>
                              <mrow>
                                <mo>(</mo>
                                <mrow>
                                  <mi>n</mi>
                                  <mo>+</mo>
                                  <mn>1</mn>
                                </mrow>
                                <mo>)</mo>
                              </mrow>
                            </mrow>
                          </mrow>
                          <mn>4</mn>
                        </mfrac>
                        <mo>&RightFloor;</mo>
                      </mrow>
                    </mrow>
                  </mrow>
                  <mo>,</mo>
                </mrow>
              </mrow>
            </mtd>
          </mtr>
          <mtr>
            <mtd>
              <mrow>
                <mstyle>
                  <mtext>&emsp;</mtext>
                </mstyle>
                <mo>&it;</mo>
                <mrow>
                  <mrow>
                    <mrow>
                      <mi>d</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mi>n</mi>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                    <mo>=</mo>
                    <mrow>
                      <mo>&LeftFloor;</mo>
                      <mfrac>
                        <mrow>
                          <msup>
                            <mi>d</mi>
                            <mrow>
                              <mo>(</mo>
                              <mn>2</mn>
                              <mo>)</mo>
                            </mrow>
                          </msup>
                          <mo>&af;</mo>
                          <mrow>
                            <mo>(</mo>
                            <mi>n</mi>
                            <mo>)</mo>
                          </mrow>
                        </mrow>
                        <mn>2</mn>
                      </mfrac>
                      <mo>&RightFloor;</mo>
                    </mrow>
                  </mrow>
                  <mo>,</mo>
                </mrow>
              </mrow>
            </mtd>
          </mtr>
          <mtr>
            <mtd>
              <mrow>
                <mstyle>
                  <mtext>&emsp;</mtext>
                </mstyle>
                <mo>&it;</mo>
                <mrow>
                  <mrow>
                    <mi>HalfBit</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>(</mo>
                      <mi>n</mi>
                      <mo>)</mo>
                    </mrow>
                  </mrow>
                  <mo>=</mo>
                  <mrow>
                    <mrow>
                      <msup>
                        <mi>d</mi>
                        <mrow>
                          <mo>(</mo>
                          <mn>2</mn>
                          <mo>)</mo>
                        </mrow>
                      </msup>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mi>n</mi>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                    <mo>&it;</mo>
                    <mi>mod</mi>
                    <mo>&it;</mo>
                    <mstyle>
                      <mtext>&emsp;</mtext>
                    </mstyle>
                    <mo>&it;</mo>
                    <mn>2.</mn>
                  </mrow>
                </mrow>
              </mrow>
            </mtd>
          </mtr>
        </mtable>
      </mrow>
    </mtd>
    <mtd>
      <mstyle>
        <mtext>(Eq.&nbsp;&nbsp;6c)</mtext>
      </mstyle>
    </mtd>
  </mtr>
</mtable>
</math>
<mathematica-file id="MATHEMATICA-00011" file="US20030005140A1-20030102-M00011.NB"/>
<image id="EMI-M00011" wi="216.027" he="88.08345" file="US20030005140A1-20030102-M00011.TIF" imf="TIFF" ti="MF"/>
</math-cwu>
</paragraph>
<paragraph id="P-0114" lvl="7"><number>&lsqb;0114&rsqb;</number> CDF (1,3) high part Y direction inverse step is given by the following equation.  
<math-cwu id="MATH-US-00012">
<number>12</number>
<math>
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mo>{</mo>
        <mrow>
          <mtable>
            <mtr>
              <mtd>
                <mrow>
                  <mstyle>
                    <mtext>&emsp;</mtext>
                  </mstyle>
                  <mo>&it;</mo>
                  <mrow>
                    <mrow>
                      <mrow>
                        <msup>
                          <mi>d</mi>
                          <mrow>
                            <mo>(</mo>
                            <mn>1</mn>
                            <mo>)</mo>
                          </mrow>
                        </msup>
                        <mo>&af;</mo>
                        <mrow>
                          <mo>(</mo>
                          <mi>n</mi>
                          <mo>)</mo>
                        </mrow>
                      </mrow>
                      <mo>=</mo>
                      <mrow>
                        <mrow>
                          <mn>2</mn>
                          <mo>&it;</mo>
                          <mrow>
                            <mi>d</mi>
                            <mo>&af;</mo>
                            <mrow>
                              <mo>(</mo>
                              <mi>n</mi>
                              <mo>)</mo>
                            </mrow>
                          </mrow>
                        </mrow>
                        <mo>+</mo>
                        <mrow>
                          <mi>HalfBit</mi>
                          <mo>&af;</mo>
                          <mrow>
                            <mo>(</mo>
                            <mi>n</mi>
                            <mo>)</mo>
                          </mrow>
                        </mrow>
                        <mo>-</mo>
                        <mrow>
                          <mo>&LeftFloor;</mo>
                          <mfrac>
                            <mrow>
                              <mrow>
                                <mi>s</mi>
                                <mo>&af;</mo>
                                <mrow>
                                  <mo>(</mo>
                                  <mrow>
                                    <mi>n</mi>
                                    <mo>-</mo>
                                    <mn>1</mn>
                                  </mrow>
                                  <mo>)</mo>
                                </mrow>
                              </mrow>
                              <mo>-</mo>
                              <mrow>
                                <mi>s</mi>
                                <mo>&af;</mo>
                                <mrow>
                                  <mo>(</mo>
                                  <mrow>
                                    <mi>n</mi>
                                    <mo>+</mo>
                                    <mn>1</mn>
                                  </mrow>
                                  <mo>)</mo>
                                </mrow>
                              </mrow>
                            </mrow>
                            <mn>4</mn>
                          </mfrac>
                          <mo>&RightFloor;</mo>
                        </mrow>
                      </mrow>
                    </mrow>
                    <mo>,</mo>
                  </mrow>
                </mrow>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <mrow>
                  <mstyle>
                    <mtext>&emsp;</mtext>
                  </mstyle>
                  <mo>&it;</mo>
                  <mrow>
                    <mrow>
                      <mrow>
                        <mi>x</mi>
                        <mo>&af;</mo>
                        <mrow>
                          <mo>(</mo>
                          <mrow>
                            <mn>2</mn>
                            <mo>&it;</mo>
                            <mi>n</mi>
                          </mrow>
                          <mo>)</mo>
                        </mrow>
                      </mrow>
                      <mo>=</mo>
                      <mrow>
                        <mrow>
                          <mi>s</mi>
                          <mo>&af;</mo>
                          <mrow>
                            <mo>(</mo>
                            <mi>n</mi>
                            <mo>)</mo>
                          </mrow>
                        </mrow>
                        <mo>-</mo>
                        <mrow>
                          <mo>&LeftFloor;</mo>
                          <mfrac>
                            <mrow>
                              <msup>
                                <mi>d</mi>
                                <mrow>
                                  <mo>(</mo>
                                  <mn>1</mn>
                                  <mo>)</mo>
                                </mrow>
                              </msup>
                              <mo>&af;</mo>
                              <mrow>
                                <mo>(</mo>
                                <mi>n</mi>
                                <mo>)</mo>
                              </mrow>
                            </mrow>
                            <mn>2</mn>
                          </mfrac>
                          <mo>&RightFloor;</mo>
                        </mrow>
                      </mrow>
                    </mrow>
                    <mo>,</mo>
                  </mrow>
                </mrow>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <mrow>
                  <mstyle>
                    <mtext>&emsp;</mtext>
                  </mstyle>
                  <mo>&it;</mo>
                  <mrow>
                    <mrow>
                      <mi>x</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mrow>
                          <mrow>
                            <mn>2</mn>
                            <mo>&it;</mo>
                            <mi>n</mi>
                          </mrow>
                          <mo>+</mo>
                          <mn>1</mn>
                        </mrow>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                    <mo>=</mo>
                    <mrow>
                      <mrow>
                        <msup>
                          <mi>d</mi>
                          <mrow>
                            <mo>(</mo>
                            <mn>1</mn>
                            <mo>)</mo>
                          </mrow>
                        </msup>
                        <mo>&af;</mo>
                        <mrow>
                          <mo>(</mo>
                          <mi>n</mi>
                          <mo>)</mo>
                        </mrow>
                      </mrow>
                      <mo>+</mo>
                      <mrow>
                        <mrow>
                          <mi>x</mi>
                          <mo>&af;</mo>
                          <mrow>
                            <mo>(</mo>
                            <mrow>
                              <mn>2</mn>
                              <mo>&it;</mo>
                              <mi>n</mi>
                            </mrow>
                            <mo>)</mo>
                          </mrow>
                        </mrow>
                        <mo>.</mo>
                      </mrow>
                    </mrow>
                  </mrow>
                </mrow>
              </mtd>
            </mtr>
          </mtable>
          <mo>&AutoLeftMatch;</mo>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mstyle>
        <mtext>(Eq.&nbsp;&nbsp;6d)</mtext>
      </mstyle>
    </mtd>
  </mtr>
</mtable>
</math>
<mathematica-file id="MATHEMATICA-00012" file="US20030005140A1-20030102-M00012.NB"/>
<image id="EMI-M00012" wi="216.027" he="54.97065" file="US20030005140A1-20030102-M00012.TIF" imf="TIFF" ti="MF"/>
</math-cwu>
</paragraph>
<paragraph id="P-0115" lvl="0"><number>&lsqb;0115&rsqb;</number> 2-D Lossless Transforms have better approximation properties to the exact mathematical wavelet transform than previous known separable implementation of the one-dimensional lossless transform. </paragraph>
<paragraph id="P-0116" lvl="0"><number>&lsqb;0116&rsqb;</number> The fact that the 2-D transform requires two sequential 1D transforms allows 2-D Lossless Transforms to mutually compensate the scale distortion of 1D lossless wavelet transform and to keep the proper scaling of wavelet coefficients as described herein above in reference to Eq.&apos;s 4a through 6d and in the above-referenced U.S. patent application Ser. No. 60/198,017. It is impossible to apply the same method in the case of 3-D lossless wavelet transform. Instead, the present invention modifies the lossless 1D Haar transform in such a way that allows it to keep the wavelet coefficients as close to their scaled values as possible and to decrease the scatter of scaling factors in different subbands at all the resolution levels. </paragraph>
<paragraph id="P-0117" lvl="0"><number>&lsqb;0117&rsqb;</number> The present invention uses a transform in the form of the following equation for HHX-Subbands type decomposition for the coefficients belonging to the HL and HH subbands of the 2-D slices  
<math-cwu id="MATH-US-00013">
<number>13</number>
<math>
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mo>{</mo>
        <mtable>
          <mtr>
            <mtd>
              <mrow>
                <mstyle>
                  <mtext>&emsp;</mtext>
                </mstyle>
                <mo>&it;</mo>
                <mrow>
                  <mrow>
                    <mrow>
                      <mi>s</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mi>n</mi>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                    <mo>=</mo>
                    <mrow>
                      <mrow>
                        <mi>z</mi>
                        <mo>&af;</mo>
                        <mrow>
                          <mo>(</mo>
                          <mrow>
                            <mn>2</mn>
                            <mo>&it;</mo>
                            <mi>n</mi>
                          </mrow>
                          <mo>)</mo>
                        </mrow>
                      </mrow>
                      <mo>+</mo>
                      <mrow>
                        <mi>z</mi>
                        <mo>&af;</mo>
                        <mrow>
                          <mo>(</mo>
                          <mrow>
                            <mrow>
                              <mn>2</mn>
                              <mo>&it;</mo>
                              <mi>n</mi>
                            </mrow>
                            <mo>+</mo>
                            <mn>1</mn>
                          </mrow>
                          <mo>)</mo>
                        </mrow>
                      </mrow>
                    </mrow>
                  </mrow>
                  <mo>,</mo>
                </mrow>
              </mrow>
            </mtd>
          </mtr>
          <mtr>
            <mtd>
              <mrow>
                <mstyle>
                  <mtext>&emsp;</mtext>
                </mstyle>
                <mo>&it;</mo>
                <mrow>
                  <mrow>
                    <mi>d</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>(</mo>
                      <mi>n</mi>
                      <mo>)</mo>
                    </mrow>
                  </mrow>
                  <mo>=</mo>
                  <mrow>
                    <mrow>
                      <mo>&LeftFloor;</mo>
                      <mfrac>
                        <mrow>
                          <mrow>
                            <mi>z</mi>
                            <mo>&af;</mo>
                            <mrow>
                              <mo>(</mo>
                              <mrow>
                                <mn>2</mn>
                                <mo>&it;</mo>
                                <mi>n</mi>
                              </mrow>
                              <mo>)</mo>
                            </mrow>
                          </mrow>
                          <mo>-</mo>
                          <mrow>
                            <mi>z</mi>
                            <mo>&af;</mo>
                            <mrow>
                              <mo>(</mo>
                              <mrow>
                                <mrow>
                                  <mn>2</mn>
                                  <mo>&it;</mo>
                                  <mi>n</mi>
                                </mrow>
                                <mo>+</mo>
                                <mn>1</mn>
                              </mrow>
                              <mo>)</mo>
                            </mrow>
                          </mrow>
                        </mrow>
                        <mn>2</mn>
                      </mfrac>
                      <mo>&RightFloor;</mo>
                    </mrow>
                    <mo>&times;</mo>
                    <mn>2</mn>
                  </mrow>
                </mrow>
              </mrow>
            </mtd>
          </mtr>
        </mtable>
      </mrow>
    </mtd>
    <mtd>
      <mstyle>
        <mtext>(Eq.&nbsp;&nbsp;7A)</mtext>
      </mstyle>
    </mtd>
  </mtr>
</mtable>
</math>
<mathematica-file id="MATHEMATICA-00013" file="US20030005140A1-20030102-M00013.NB"/>
<image id="EMI-M00013" wi="216.027" he="29.9943" file="US20030005140A1-20030102-M00013.TIF" imf="TIFF" ti="MF"/>
</math-cwu>
</paragraph>
<paragraph id="P-0118" lvl="7"><number>&lsqb;0118&rsqb;</number> The following different equation is used for the coefficients from the LH subband of the 2-D slices that already have LSB equal 0.  
<math-cwu id="MATH-US-00014">
<number>14</number>
<math>
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mo>{</mo>
        <mtable>
          <mtr>
            <mtd>
              <mrow>
                <mstyle>
                  <mtext>&emsp;</mtext>
                </mstyle>
                <mo>&it;</mo>
                <mrow>
                  <mrow>
                    <mrow>
                      <mi>s</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mi>n</mi>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                    <mo>=</mo>
                    <mrow>
                      <mrow>
                        <mi>z</mi>
                        <mo>&af;</mo>
                        <mrow>
                          <mo>(</mo>
                          <mrow>
                            <mn>2</mn>
                            <mo>&it;</mo>
                            <mi>n</mi>
                          </mrow>
                          <mo>)</mo>
                        </mrow>
                      </mrow>
                      <mo>+</mo>
                      <mrow>
                        <mi>z</mi>
                        <mo>&af;</mo>
                        <mrow>
                          <mo>(</mo>
                          <mrow>
                            <mrow>
                              <mn>2</mn>
                              <mo>&it;</mo>
                              <mi>n</mi>
                            </mrow>
                            <mo>+</mo>
                            <mn>1</mn>
                          </mrow>
                          <mo>)</mo>
                        </mrow>
                      </mrow>
                    </mrow>
                  </mrow>
                  <mo>,</mo>
                </mrow>
              </mrow>
            </mtd>
          </mtr>
          <mtr>
            <mtd>
              <mrow>
                <mstyle>
                  <mtext>&emsp;</mtext>
                </mstyle>
                <mo>&it;</mo>
                <mrow>
                  <mrow>
                    <mi>d</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>(</mo>
                      <mi>n</mi>
                      <mo>)</mo>
                    </mrow>
                  </mrow>
                  <mo>=</mo>
                  <mrow>
                    <mrow>
                      <mo>&LeftFloor;</mo>
                      <mfrac>
                        <mrow>
                          <mrow>
                            <mi>z</mi>
                            <mo>&af;</mo>
                            <mrow>
                              <mo>(</mo>
                              <mrow>
                                <mn>2</mn>
                                <mo>&it;</mo>
                                <mi>n</mi>
                              </mrow>
                              <mo>)</mo>
                            </mrow>
                          </mrow>
                          <mo>-</mo>
                          <mrow>
                            <mi>z</mi>
                            <mo>&af;</mo>
                            <mrow>
                              <mo>(</mo>
                              <mrow>
                                <mrow>
                                  <mn>2</mn>
                                  <mo>&it;</mo>
                                  <mi>n</mi>
                                </mrow>
                                <mo>+</mo>
                                <mn>1</mn>
                              </mrow>
                              <mo>)</mo>
                            </mrow>
                          </mrow>
                        </mrow>
                        <mn>4</mn>
                      </mfrac>
                      <mo>&RightFloor;</mo>
                    </mrow>
                    <mo>&times;</mo>
                    <mn>4.</mn>
                  </mrow>
                </mrow>
              </mrow>
            </mtd>
          </mtr>
        </mtable>
      </mrow>
    </mtd>
    <mtd>
      <mstyle>
        <mtext>(Eq.&nbsp;&nbsp;7B)</mtext>
      </mstyle>
    </mtd>
  </mtr>
</mtable>
</math>
<mathematica-file id="MATHEMATICA-00014" file="US20030005140A1-20030102-M00014.NB"/>
<image id="EMI-M00014" wi="216.027" he="29.9943" file="US20030005140A1-20030102-M00014.TIF" imf="TIFF" ti="MF"/>
</math-cwu>
</paragraph>
<paragraph id="P-0119" lvl="7"><number>&lsqb;0119&rsqb;</number> This means that hlh subband of this 3-D transform has its two last bits equal to 0. </paragraph>
<paragraph id="P-0120" lvl="0"><number>&lsqb;0120&rsqb;</number> Eq.7B scales s(n) and d(n) by a factor off{square root}{square root over (2)}. Because of the fact that all the coefficients resulting from the 2-D Lossless Transforms are scaled properly, all the wavelet coefficients of our entire 3-D transform are scaled in total effect by {square root}{square root over (2)} in this case. </paragraph>
<paragraph id="P-0121" lvl="0"><number>&lsqb;0121&rsqb;</number> The inverse transforms for Eq&apos;s 7A and 7B are 7C and 7D respectively.  
<math-cwu id="MATH-US-00015">
<number>15</number>
<math>
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mo>{</mo>
        <mtable>
          <mtr>
            <mtd>
              <mrow>
                <mstyle>
                  <mtext>&emsp;</mtext>
                </mstyle>
                <mo>&it;</mo>
                <mrow>
                  <mrow>
                    <mi>z</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>(</mo>
                      <mrow>
                        <mn>2</mn>
                        <mo>&it;</mo>
                        <mi>n</mi>
                      </mrow>
                      <mo>)</mo>
                    </mrow>
                  </mrow>
                  <mo>=</mo>
                  <mrow>
                    <mfrac>
                      <mn>1</mn>
                      <mn>2</mn>
                    </mfrac>
                    <mo>&it;</mo>
                    <mrow>
                      <mo>(</mo>
                      <mrow>
                        <mrow>
                          <mi>s</mi>
                          <mo>&af;</mo>
                          <mrow>
                            <mo>(</mo>
                            <mi>n</mi>
                            <mo>)</mo>
                          </mrow>
                        </mrow>
                        <mo>+</mo>
                        <mrow>
                          <mi>d</mi>
                          <mo>&af;</mo>
                          <mrow>
                            <mo>(</mo>
                            <mi>n</mi>
                            <mo>)</mo>
                          </mrow>
                        </mrow>
                        <mo>+</mo>
                        <mrow>
                          <mo>(</mo>
                          <mrow>
                            <mrow>
                              <mi>s</mi>
                              <mo>&af;</mo>
                              <mrow>
                                <mo>(</mo>
                                <mi>n</mi>
                                <mo>)</mo>
                              </mrow>
                            </mrow>
                            <mo>&it;</mo>
                            <mi>mod</mi>
                            <mo>&it;</mo>
                            <mstyle>
                              <mtext>&emsp;</mtext>
                            </mstyle>
                            <mo>&it;</mo>
                            <mn>2</mn>
                          </mrow>
                          <mo>)</mo>
                        </mrow>
                      </mrow>
                      <mo>)</mo>
                    </mrow>
                  </mrow>
                </mrow>
              </mrow>
            </mtd>
          </mtr>
          <mtr>
            <mtd>
              <mrow>
                <mstyle>
                  <mtext>&emsp;</mtext>
                </mstyle>
                <mo>&it;</mo>
                <mrow>
                  <mrow>
                    <mi>z</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>(</mo>
                      <mrow>
                        <mrow>
                          <mn>2</mn>
                          <mo>&it;</mo>
                          <mi>n</mi>
                        </mrow>
                        <mo>+</mo>
                        <mn>1</mn>
                      </mrow>
                      <mo>)</mo>
                    </mrow>
                  </mrow>
                  <mo>=</mo>
                  <mrow>
                    <mrow>
                      <mi>s</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mi>n</mi>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                    <mo>-</mo>
                    <mrow>
                      <mi>z</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mrow>
                          <mn>2</mn>
                          <mo>&it;</mo>
                          <mi>n</mi>
                        </mrow>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                  </mrow>
                </mrow>
              </mrow>
            </mtd>
          </mtr>
        </mtable>
      </mrow>
    </mtd>
    <mtd>
      <mstyle>
        <mtext>(Eq.&nbsp;&nbsp;7C)</mtext>
      </mstyle>
    </mtd>
  </mtr>
  <mtr>
    <mtd>
      <mrow>
        <mo>{</mo>
        <mtable>
          <mtr>
            <mtd>
              <mrow>
                <mstyle>
                  <mtext>&emsp;</mtext>
                </mstyle>
                <mo>&it;</mo>
                <mrow>
                  <mrow>
                    <mi>z</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>(</mo>
                      <mrow>
                        <mn>2</mn>
                        <mo>&it;</mo>
                        <mi>n</mi>
                      </mrow>
                      <mo>)</mo>
                    </mrow>
                  </mrow>
                  <mo>=</mo>
                  <mrow>
                    <mrow>
                      <mfrac>
                        <mn>1</mn>
                        <mn>2</mn>
                      </mfrac>
                      <mo>&it;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mrow>
                          <mrow>
                            <mi>s</mi>
                            <mo>&af;</mo>
                            <mrow>
                              <mo>(</mo>
                              <mi>n</mi>
                              <mo>)</mo>
                            </mrow>
                          </mrow>
                          <mo>+</mo>
                          <mrow>
                            <mi>d</mi>
                            <mo>&af;</mo>
                            <mrow>
                              <mo>(</mo>
                              <mi>n</mi>
                              <mo>)</mo>
                            </mrow>
                          </mrow>
                        </mrow>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                    <mo>+</mo>
                    <mrow>
                      <mrow>
                        <mo>(</mo>
                        <mrow>
                          <mfrac>
                            <mn>1</mn>
                            <mn>2</mn>
                          </mfrac>
                          <mo>&it;</mo>
                          <mrow>
                            <mi>s</mi>
                            <mo>&af;</mo>
                            <mrow>
                              <mo>(</mo>
                              <mi>n</mi>
                              <mo>)</mo>
                            </mrow>
                          </mrow>
                        </mrow>
                        <mo>)</mo>
                      </mrow>
                      <mo>&it;</mo>
                      <mi>mod</mi>
                      <mo>&it;</mo>
                      <mstyle>
                        <mtext>&emsp;</mtext>
                      </mstyle>
                      <mo>&it;</mo>
                      <mn>2</mn>
                    </mrow>
                  </mrow>
                </mrow>
              </mrow>
            </mtd>
          </mtr>
          <mtr>
            <mtd>
              <mrow>
                <mstyle>
                  <mtext>&emsp;</mtext>
                </mstyle>
                <mo>&it;</mo>
                <mrow>
                  <mrow>
                    <mi>z</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>(</mo>
                      <mrow>
                        <mrow>
                          <mn>2</mn>
                          <mo>&it;</mo>
                          <mi>n</mi>
                        </mrow>
                        <mo>+</mo>
                        <mn>1</mn>
                      </mrow>
                      <mo>)</mo>
                    </mrow>
                  </mrow>
                  <mo>=</mo>
                  <mrow>
                    <mrow>
                      <mi>s</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mi>n</mi>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                    <mo>-</mo>
                    <mrow>
                      <mrow>
                        <mi>z</mi>
                        <mo>&af;</mo>
                        <mrow>
                          <mo>(</mo>
                          <mrow>
                            <mn>2</mn>
                            <mo>&it;</mo>
                            <mi>n</mi>
                          </mrow>
                          <mo>)</mo>
                        </mrow>
                      </mrow>
                      <mo>.</mo>
                    </mrow>
                  </mrow>
                </mrow>
              </mrow>
            </mtd>
          </mtr>
        </mtable>
      </mrow>
    </mtd>
    <mtd>
      <mstyle>
        <mtext>(Eq.&nbsp;&nbsp;7D)</mtext>
      </mstyle>
    </mtd>
  </mtr>
</mtable>
</math>
<mathematica-file id="MATHEMATICA-00015" file="US20030005140A1-20030102-M00015.NB"/>
<image id="EMI-M00015" wi="216.027" he="63.13545" file="US20030005140A1-20030102-M00015.TIF" imf="TIFF" ti="MF"/>
</math-cwu>
</paragraph>
<paragraph id="P-0122" lvl="0"><number>&lsqb;0122&rsqb;</number> It should be mentioned that the resulting low-resolution 2-D image, that is passed to the next resolution processing is properly scaled. It should be also noted that, as explained herein above, it does not undergo a transform in Z direction. </paragraph>
<paragraph id="P-0123" lvl="0"><number>&lsqb;0123&rsqb;</number> A single one-dimensional lossless wavelet transform doesn&apos;t preserve the scaling of the resulting coefficients, but the requirement exists, as explained herein above in reference to <cross-reference target="DRAWINGS">FIG. 5</cross-reference> and <highlight><bold>6</bold></highlight> for XXH-Subbands type decomposition to use a one-dimensional transform. The present invention can overcome this difficulty in the following way: Two different transforms can be implemented in turn. In one of them, the resulting lowpass coefficients are scaled by a factor of {square root}{square root over (2)}, and in another they are scaled by {square root}{square root over (2)}<highlight><superscript>&minus;1</superscript></highlight>. This preserves overall scaling of the low pass fraction. In other words, every odd time Eq.7A is used for the forward step and Eq.7C for the inverse step, and every even time the following Eq.7E is used for the forward step, and Eq.7F for the inverse step.  
<math-cwu id="MATH-US-00016">
<number>16</number>
<math>
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mo>{</mo>
        <mtable>
          <mtr>
            <mtd>
              <mrow>
                <mstyle>
                  <mtext>&emsp;</mtext>
                </mstyle>
                <mo>&it;</mo>
                <mrow>
                  <mrow>
                    <mrow>
                      <mi>s</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mi>n</mi>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                    <mo>=</mo>
                    <mrow>
                      <mo>&LeftFloor;</mo>
                      <mfrac>
                        <mrow>
                          <mrow>
                            <mi>z</mi>
                            <mo>&af;</mo>
                            <mrow>
                              <mo>(</mo>
                              <mrow>
                                <mn>2</mn>
                                <mo>&it;</mo>
                                <mi>n</mi>
                              </mrow>
                              <mo>)</mo>
                            </mrow>
                          </mrow>
                          <mo>+</mo>
                          <mrow>
                            <mi>z</mi>
                            <mo>&af;</mo>
                            <mrow>
                              <mo>(</mo>
                              <mrow>
                                <mrow>
                                  <mn>2</mn>
                                  <mo>&it;</mo>
                                  <mi>n</mi>
                                </mrow>
                                <mo>+</mo>
                                <mn>1</mn>
                              </mrow>
                              <mo>)</mo>
                            </mrow>
                          </mrow>
                        </mrow>
                        <mn>2</mn>
                      </mfrac>
                      <mo>&RightFloor;</mo>
                    </mrow>
                  </mrow>
                  <mo>,</mo>
                </mrow>
              </mrow>
            </mtd>
          </mtr>
          <mtr>
            <mtd>
              <mrow>
                <mstyle>
                  <mtext>&emsp;</mtext>
                </mstyle>
                <mo>&it;</mo>
                <mrow>
                  <mrow>
                    <mrow>
                      <msup>
                        <mi>d</mi>
                        <mrow>
                          <mo>(</mo>
                          <mn>1</mn>
                          <mo>)</mo>
                        </mrow>
                      </msup>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mi>n</mi>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                    <mo>=</mo>
                    <mrow>
                      <mrow>
                        <mi>z</mi>
                        <mo>&af;</mo>
                        <mrow>
                          <mo>(</mo>
                          <mrow>
                            <mn>2</mn>
                            <mo>&it;</mo>
                            <mi>n</mi>
                          </mrow>
                          <mo>)</mo>
                        </mrow>
                      </mrow>
                      <mo>-</mo>
                      <mrow>
                        <mi>z</mi>
                        <mo>&af;</mo>
                        <mrow>
                          <mo>(</mo>
                          <mrow>
                            <mrow>
                              <mn>2</mn>
                              <mo>&it;</mo>
                              <mi>n</mi>
                            </mrow>
                            <mo>+</mo>
                            <mn>1</mn>
                          </mrow>
                          <mo>)</mo>
                        </mrow>
                      </mrow>
                    </mrow>
                  </mrow>
                  <mo>,</mo>
                </mrow>
              </mrow>
            </mtd>
          </mtr>
          <mtr>
            <mtd>
              <mrow>
                <mstyle>
                  <mtext>&emsp;</mtext>
                </mstyle>
                <mo>&it;</mo>
                <mrow>
                  <mrow>
                    <mrow>
                      <mi>HalfBit</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mi>n</mi>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                    <mo>=</mo>
                    <mrow>
                      <mrow>
                        <mo>(</mo>
                        <mrow>
                          <msup>
                            <mi>d</mi>
                            <mrow>
                              <mo>(</mo>
                              <mn>1</mn>
                              <mo>)</mo>
                            </mrow>
                          </msup>
                          <mo>&af;</mo>
                          <mrow>
                            <mo>(</mo>
                            <mi>n</mi>
                            <mo>)</mo>
                          </mrow>
                        </mrow>
                        <mo>)</mo>
                      </mrow>
                      <mo>&it;</mo>
                      <mi>mod</mi>
                      <mo>&it;</mo>
                      <mstyle>
                        <mtext>&emsp;</mtext>
                      </mstyle>
                      <mo>&it;</mo>
                      <mn>2</mn>
                    </mrow>
                  </mrow>
                  <mo>,</mo>
                </mrow>
              </mrow>
            </mtd>
          </mtr>
          <mtr>
            <mtd>
              <mrow>
                <mstyle>
                  <mtext>&emsp;</mtext>
                </mstyle>
                <mo>&it;</mo>
                <mrow>
                  <mrow>
                    <mi>d</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>(</mo>
                      <mi>n</mi>
                      <mo>)</mo>
                    </mrow>
                  </mrow>
                  <mo>=</mo>
                  <mrow>
                    <mo>&LeftFloor;</mo>
                    <mfrac>
                      <mrow>
                        <msup>
                          <mi>d</mi>
                          <mrow>
                            <mo>(</mo>
                            <mn>1</mn>
                            <mo>)</mo>
                          </mrow>
                        </msup>
                        <mo>&af;</mo>
                        <mrow>
                          <mo>(</mo>
                          <mi>n</mi>
                          <mo>)</mo>
                        </mrow>
                      </mrow>
                      <mn>2</mn>
                    </mfrac>
                    <mo>&RightFloor;</mo>
                  </mrow>
                </mrow>
              </mrow>
            </mtd>
          </mtr>
        </mtable>
      </mrow>
    </mtd>
    <mtd>
      <mstyle>
        <mtext>(Eq.&nbsp;&nbsp;7E)</mtext>
      </mstyle>
    </mtd>
  </mtr>
  <mtr>
    <mtd>
      <mrow>
        <mo>{</mo>
        <mtable>
          <mtr>
            <mtd>
              <mrow>
                <mstyle>
                  <mtext>&emsp;</mtext>
                </mstyle>
                <mo>&it;</mo>
                <mrow>
                  <mrow>
                    <mrow>
                      <mi>z</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mrow>
                          <mn>2</mn>
                          <mo>&it;</mo>
                          <mi>n</mi>
                        </mrow>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                    <mo>=</mo>
                    <mrow>
                      <mrow>
                        <mi>s</mi>
                        <mo>&af;</mo>
                        <mrow>
                          <mo>(</mo>
                          <mi>n</mi>
                          <mo>)</mo>
                        </mrow>
                      </mrow>
                      <mo>+</mo>
                      <mrow>
                        <mi>d</mi>
                        <mo>&af;</mo>
                        <mrow>
                          <mo>(</mo>
                          <mi>n</mi>
                          <mo>)</mo>
                        </mrow>
                      </mrow>
                      <mo>+</mo>
                      <mrow>
                        <mi>HalfBit</mi>
                        <mo>&af;</mo>
                        <mrow>
                          <mo>(</mo>
                          <mi>n</mi>
                          <mo>)</mo>
                        </mrow>
                      </mrow>
                    </mrow>
                  </mrow>
                  <mo>,</mo>
                </mrow>
              </mrow>
            </mtd>
          </mtr>
          <mtr>
            <mtd>
              <mrow>
                <mstyle>
                  <mtext>&emsp;</mtext>
                </mstyle>
                <mo>&it;</mo>
                <mrow>
                  <mrow>
                    <mi>z</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>(</mo>
                      <mrow>
                        <mrow>
                          <mn>2</mn>
                          <mo>&it;</mo>
                          <mi>n</mi>
                        </mrow>
                        <mo>+</mo>
                        <mn>1</mn>
                      </mrow>
                      <mo>)</mo>
                    </mrow>
                  </mrow>
                  <mo>=</mo>
                  <mrow>
                    <mrow>
                      <mi>s</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mi>n</mi>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                    <mo>-</mo>
                    <mrow>
                      <mrow>
                        <mi>d</mi>
                        <mo>&af;</mo>
                        <mrow>
                          <mo>(</mo>
                          <mi>n</mi>
                          <mo>)</mo>
                        </mrow>
                      </mrow>
                      <mo>.</mo>
                    </mrow>
                  </mrow>
                </mrow>
              </mrow>
            </mtd>
          </mtr>
        </mtable>
      </mrow>
    </mtd>
    <mtd>
      <mstyle>
        <mtext>(Eq.&nbsp;&nbsp;7F)</mtext>
      </mstyle>
    </mtd>
  </mtr>
</mtable>
</math>
<mathematica-file id="MATHEMATICA-00016" file="US20030005140A1-20030102-M00016.NB"/>
<image id="EMI-M00016" wi="216.027" he="93.12975" file="US20030005140A1-20030102-M00016.TIF" imf="TIFF" ti="MF"/>
</math-cwu>
</paragraph>
<paragraph id="P-0124" lvl="0"><number>&lsqb;0124&rsqb;</number> The resulting scaling factors of wavelet coefficients for all subbands in the proposed multiresolution decomposition are shown on <cross-reference target="DRAWINGS">FIG. 7</cross-reference>. It can bee seen that with the present invention all the coefficients are almost equally scaled. </paragraph>
<paragraph id="P-0125" lvl="0"><number>&lsqb;0125&rsqb;</number> As for the All-Subbands type decomposition, which is optionally implemented and only for the lowest resolution (or DC) block the present invention uses the combination of HHX-Subbands and XXH-Subbands types of decompositions. </paragraph>
<paragraph id="P-0126" lvl="0"><number>&lsqb;0126&rsqb;</number> Reference is now made to <cross-reference target="DRAWINGS">FIG. 8</cross-reference>. The figure depicts data blocks as defined in Eq.2. Embodiments of the present invention for lossless transformation can utilize two additional &ldquo;half bit planes&rdquo;, one of which is associated with 2-D wavelet transforms on the XY plane as explained in reference to Eq&apos;s 3 through 6. The other is associated with transform in the Z direction as explained in reference to Eq&apos;s 7. Each of these two &ldquo;half bit planes&rdquo; is implemented as a three-dimensional matrix. For the HHX-Subbands type decomposition this matrix has size (tileLength/2)&times;(tileLength/2)&times;tileHeight while for the XXH-Subbands type decomposition this matrix has size tileLength&times;tileLength&times;(tileHeight/2). </paragraph>
<paragraph id="P-0127" lvl="0"><number>&lsqb;0127&rsqb;</number> Thus, each data block for lossless implementation contains the following data in encoded format: </paragraph>
<paragraph id="P-0128" lvl="2"><number>&lsqb;0128&rsqb;</number> 1. For t_bitPlane&gE;2 </paragraph>
<paragraph id="P-0129" lvl="3"><number>&lsqb;0129&rsqb;</number> a. A list of the indices of all subband coefficients whose absolute value is in the range &lsqb;2<highlight><superscript>t</superscript></highlight><highlight><superscript><highlight><subscript>&mdash;</subscript></highlight></superscript></highlight><highlight><superscript>bitPlane&minus;1</superscript></highlight>,2<highlight><superscript>t</superscript></highlight><highlight><superscript><highlight><subscript>&mdash;</subscript></highlight></superscript></highlight><highlight><superscript>bitPlane</superscript></highlight>). </paragraph>
<paragraph id="P-0130" lvl="3"><number>&lsqb;0130&rsqb;</number> b. The sign of all the coefficients of 1.a. </paragraph>
<paragraph id="P-0131" lvl="3"><number>&lsqb;0131&rsqb;</number> c. For t_bitPlane&gt;2, an additional precision bit for any coefficient that belongs to the current bit plane or any higher bit plane. These are exactly the same data as for the lossy case. </paragraph>
<paragraph id="P-0132" lvl="2"><number>&lsqb;0132&rsqb;</number> 2. For t_bitPlane&equals;1, which is called herein the &ldquo;least significant bit plane&rdquo;: </paragraph>
<paragraph id="P-0133" lvl="3"><number>&lsqb;0133&rsqb;</number> a. A list of the indices of coefficients whose absolute value belongs to the set &lcub;&minus;1,0,1&rcub; from HLH and HHH-subbands for HHX-Subbands type of decomposition or from HLH and HHH-subbands for XXH-Subbands at even resolution type of decomposition or all subbands for XXH-Subbands type of decomposition at odd resolutions. </paragraph>
<paragraph id="P-0134" lvl="3"><number>&lsqb;0134&rsqb;</number> b. A &ldquo;zero flag&rdquo; for each coefficient of 2.a, which indicates if the coefficient is equal to zero or not. </paragraph>
<paragraph id="P-0135" lvl="3"><number>&lsqb;0135&rsqb;</number> c. The sign of all the coefficients of 2.a, whose &ldquo;zero flag&rdquo; is false. </paragraph>
<paragraph id="P-0136" lvl="3"><number>&lsqb;0136&rsqb;</number> d. The LSB of the coefficients from 2.a that belong to higher bit plane. </paragraph>
<paragraph id="P-0137" lvl="0"><number>&lsqb;0137&rsqb;</number> Note that since the remaining subbands contain only even coefficients, their LSB must be zero and is not coded. </paragraph>
<paragraph id="P-0138" lvl="2"><number>&lsqb;0138&rsqb;</number> 3. For t_bitPlane&equals;0 which is called herein the &ldquo;half bit plane&rdquo;, a matrix of (tileLength/2)&times;(tileLength/2)&times;tileHeight bits for HHX-Subbands type decomposition, or a matrix of tileLength&times;tileLength&times;(tileHeight/2) bits for XXH-Subbands type decomposition as their last &ldquo;half bit&rdquo;. </paragraph>
<paragraph id="P-0139" lvl="0"><number>&lsqb;0139&rsqb;</number> The encoding algorithm employs the forward steps described above with reference to Eq&apos;s 3 through 7. It is performed at the server, which is block <highlight><bold>120</bold></highlight> in <cross-reference target="DRAWINGS">FIG. 1</cross-reference>. The present invention is an imaging system that enables this time consuming task to be swiftly performed for a specific ROI and not necessarily on the full image. The following is a description the encoding algorithm for images with a single color component such as grayscale images. The straightforward generalization for an arbitrary number of components is explained later. The algorithm receives as input the following parameters listed in Table 1. 
<table-cwu id="TABLE-US-00003">
<number>3</number>
<table frame="none" colsep="0" rowsep="0" pgwide="1">
<tgroup align="left" colsep="0" rowsep="0" cols="1">
<colspec colname="1" colwidth="259PT" align="center"/>
<thead>
<row>
<entry namest="1" nameend="1" align="center">TABLE 1</entry>
</row>
</thead>
<tbody valign="top">
<row>
<entry></entry>
</row>
<row><entry namest="1" nameend="1" align="center" rowsep="1"></entry>
</row>
<row>
<entry>Encoding Algorithm input parameters</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="1" colwidth="49PT" align="left"/>
<colspec colname="2" colwidth="210PT" align="left"/>
<tbody valign="top">
<row>
<entry>Variable</entry>
<entry>Meaning</entry>
</row>
<row><entry namest="1" nameend="2" align="center" rowsep="1"></entry>
</row>
<row>
<entry>coef</entry>
<entry>3D matrix of subband coefficients, containing either</entry>
</row>
<row>
<entry></entry>
<entry>3 &times; (tileLength/2) &times; (tileLength/2) &times; tileHeight coefficients for HHX-</entry>
</row>
<row>
<entry></entry>
<entry>Subbands type decomposition or</entry>
</row>
<row>
<entry></entry>
<entry>tileLength &times; tileLength &times; (tileHeight/2) coefficients for XXH-Subbands</entry>
</row>
<row>
<entry></entry>
<entry>type decomposition.</entry>
</row>
<row>
<entry>EqualBinSize</entry>
<entry>Boolean: True for high or lossless quality. False for low quality.</entry>
</row>
<row>
<entry>&egr;<highlight><subscript>c</subscript></highlight></entry>
<entry>The minimal threshold for the component.</entry>
</row>
<row>
<entry>HalfBit</entry>
<entry>A 3D matrix of bits containing</entry>
</row>
<row>
<entry></entry>
<entry>(tileLength/2) &times; (tileLength/2) &times; tileHeight bits for HHX-Subbands</entry>
</row>
<row>
<entry></entry>
<entry>type decomposition or tileLength x tileLength x (tileHeight/2) bits for</entry>
</row>
<row>
<entry></entry>
<entry>XXH-Subbands type decomposition.</entry>
</row>
<row><entry namest="1" nameend="2" align="center" rowsep="1"></entry>
</row>
</tbody>
</tgroup>
</table>
</table-cwu>
</paragraph>
<paragraph id="P-0140" lvl="0"><number>&lsqb;0140&rsqb;</number> At any given time in the encoding algorithm a coefficient belongs to one of three types of groups: </paragraph>
<paragraph id="P-0141" lvl="2"><number>&lsqb;0141&rsqb;</number> 1. Type16: A group of 4&times;4&times;1 coefficients (B group) </paragraph>
<paragraph lvl="0"><in-line-formula>&lcub;coef (4i&plus;x,4j&plus;y,k),x &isin;&lsqb;0,3&rsqb;,y &isin;&lsqb;0,3&rsqb;&rcub;</in-line-formula></paragraph>
<paragraph id="P-0142" lvl="2"><number>&lsqb;0142&rsqb;</number> 2. Type4: A group of 2&times;2&times;1 coefficients (A group) </paragraph>
<paragraph lvl="0"><in-line-formula>&lcub;coef (2i&plus;x,2j&plus;y,k),x &isin;&lsqb;0,1&rsqb;,y &isin;&lsqb;0,1&rsqb;&rcub;</in-line-formula></paragraph>
<paragraph id="P-0143" lvl="2"><number>&lsqb;0143&rsqb;</number> 3. Type&rsqb;: Single coefficient </paragraph>
<paragraph id="P-0144" lvl="7"><number>&lsqb;0144&rsqb;</number> A Type16 group is also named herein a &lsquo;B&rsquo; group, and a Type4 group is also named herein as &lsquo;A&rsquo; group. </paragraph>
<paragraph id="P-0145" lvl="0"><number>&lsqb;0145&rsqb;</number> In a general case, the size of the A and B groups of coefficients may be controlled by parameters such as the following: </paragraph>
<paragraph id="P-0146" lvl="2"><number>&lsqb;0146&rsqb;</number> Coef. A Group Length in X and Y, </paragraph>
<paragraph id="P-0147" lvl="2"><number>&lsqb;0147&rsqb;</number> Coef A Group Length in Z. </paragraph>
<paragraph id="P-0148" lvl="2"><number>&lsqb;0148&rsqb;</number> A groups In a B Group in X and Y, </paragraph>
<paragraph id="P-0149" lvl="2"><number>&lsqb;0149&rsqb;</number> A groups In a B Group in Z, </paragraph>
<paragraph id="P-0150" lvl="7"><number>&lsqb;0150&rsqb;</number> which allow flexible control of coefficients grouping. The sizes need not necessarily be 4 and 16. </paragraph>
<paragraph id="P-0151" lvl="0"><number>&lsqb;0151&rsqb;</number> The encoding algorithm is now described in reference to <cross-reference target="DRAWINGS">FIG. 27</cross-reference>. The encoding algorithm principal steps are the following. Step <highlight><bold>2710</bold></highlight> is an initialization, and step <highlight><bold>2720</bold></highlight> is an outer loop in which the inner loops nest. </paragraph>
<paragraph id="P-0152" lvl="0"><number>&lsqb;0152&rsqb;</number> The first step in the encoding algorithm is its initialization (step <highlight><bold>2710</bold></highlight>), which is conducted as follows. </paragraph>
<paragraph id="P-0153" lvl="2"><number>&lsqb;0153&rsqb;</number> 1. Assign to each coefficient coef (x,y,z) its bit plane such that </paragraph>
<paragraph lvl="0"><in-line-formula>&verbar;coef (x,y,z)&verbar;&isin;&lsqb;&egr;2<highlight><superscript>b</superscript></highlight>, &egr;2<highlight><superscript>b&plus;1</superscript></highlight>) </in-line-formula></paragraph>
<paragraph id="P-0154" lvl="7"><number>&lsqb;0154&rsqb;</number> where &egr;&equals;&egr;<highlight><subscript>c </subscript></highlight>for lossy applications and &egr;&equals;2<highlight><superscript>&minus;1 </superscript></highlight>for lossless ones. </paragraph>
<paragraph id="P-0155" lvl="2"><number>&lsqb;0155&rsqb;</number> 2. Compute the maximum bit plane over all such coefficients  
<math-cwu id="MATH-US-00017">
<number>17</number>
<math>
<mrow>
  <mrow>
    <mi>max</mi>
    <mo>&it;</mo>
    <mstyle>
      <mtext>&emsp;</mtext>
    </mstyle>
    <mo>&it;</mo>
    <mi>Bit</mi>
    <mo>&it;</mo>
    <mstyle>
      <mtext>&emsp;</mtext>
    </mstyle>
    <mo>&it;</mo>
    <mrow>
      <mi>Plane</mi>
      <mo>&it;</mo>
      <mrow>
        <mo>(</mo>
        <mi>tile</mi>
        <mo>)</mo>
      </mrow>
    </mrow>
  </mrow>
  <mo>=</mo>
  <mrow>
    <munder>
      <mi>max</mi>
      <mrow>
        <mi>x</mi>
        <mo>,</mo>
        <mi>y</mi>
        <mo>,</mo>
        <mi>z</mi>
      </mrow>
    </munder>
    <mo>&it;</mo>
    <mrow>
      <mo>(</mo>
      <mrow>
        <mi>b</mi>
        <mo>&it;</mo>
        <mrow>
          <mo>(</mo>
          <mrow>
            <mi>x</mi>
            <mo>,</mo>
            <mi>y</mi>
            <mo>,</mo>
            <mi>z</mi>
          </mrow>
          <mo>)</mo>
        </mrow>
      </mrow>
      <mo>)</mo>
    </mrow>
  </mrow>
</mrow>
</math>
<mathematica-file id="MATHEMATICA-00017" file="US20030005140A1-20030102-M00017.NB"/>
<image id="EMI-M00017" wi="216.027" he="16.07445" file="US20030005140A1-20030102-M00017.TIF" imf="TIFF" ti="MF"/>
</math-cwu>
</paragraph>
<paragraph id="P-0156" lvl="2"><number>&lsqb;0156&rsqb;</number> 3. Write the value of maxBitPlane(tile) using one byte as the header of the data block (t_x, t_y, t_z, t_resolution , maxBitPlane(t_resolution)). </paragraph>
<paragraph id="P-0157" lvl="2"><number>&lsqb;0157&rsqb;</number> 4. Initialize all the coefficients as members of their corresponding Type16 group. </paragraph>
<paragraph id="P-0158" lvl="2"><number>&lsqb;0158&rsqb;</number> 5. Initialize a list of significant coefficients to be empty. </paragraph>
<paragraph id="P-0159" lvl="2"><number>&lsqb;0159&rsqb;</number> 6. Initialize a coefficient approximation matrix coef as zero. </paragraph>
<paragraph id="P-0160" lvl="0"><number>&lsqb;0160&rsqb;</number> The second step in the encoding algorithm (step <highlight><bold>2720</bold></highlight>) can be conducted as follows with reference to <cross-reference target="DRAWINGS">FIG. 9</cross-reference>. The encoding algorithm scans the bit planes from b&equals;maxBitPlane(tile) to b&equals;0 (step <highlight><bold>910</bold></highlight>).The output of each such bit plane scan is the subband data block defined in Eq.2. Since the last stage of the encoding algorithm is arithmetic encoding of given symbols, at the beginning of each scan (step <highlight><bold>920</bold></highlight>) the arithmetic encoding output module is redirected to the storage area allocated for the particular data block. Once the bit plane scan is finished and the data block defined in Eq.2 has been encoded (step <highlight><bold>940</bold></highlight>), the output stream is closed (step <highlight><bold>950</bold></highlight>) and the bit plane is decremented (step <highlight><bold>960</bold></highlight>). The last two bit planes for the lossless applications are the &ldquo;least significant bit plane&rdquo; (b&equals;1) and the &ldquo;half bit plane&rdquo; (b&equals;0), as described in reference to <cross-reference target="DRAWINGS">FIG. 8</cross-reference>. The following description with reference to <cross-reference target="DRAWINGS">FIG. 10</cross-reference>A, <cross-reference target="DRAWINGS">FIG. 10</cross-reference>B and <cross-reference target="DRAWINGS">FIG. 11</cross-reference> is true for the case b&gt;1, while the description with reference to <cross-reference target="DRAWINGS">FIG. 12</cross-reference>A and <cross-reference target="DRAWINGS">FIG. 13</cross-reference> is true for the case b&equals;1 and <cross-reference target="DRAWINGS">FIG. 12B</cross-reference> is true for the case b&equals;0. </paragraph>
<paragraph id="P-0161" lvl="0"><number>&lsqb;0161&rsqb;</number> The process of encoding per bit plane (step <highlight><bold>940</bold></highlight>) in <cross-reference target="DRAWINGS">FIG. 9</cross-reference>, is now described in detail with reference to <cross-reference target="DRAWINGS">FIG. 10</cross-reference>A, <cross-reference target="DRAWINGS">FIG. 10</cross-reference>B and <cross-reference target="DRAWINGS">FIG. 11</cross-reference>. A flowchart is depicted in <cross-reference target="DRAWINGS">FIG. 10</cross-reference>A and <cross-reference target="DRAWINGS">FIG. 10</cross-reference>B and equivalent pseudo-code is listed in <cross-reference target="DRAWINGS">FIG. 11</cross-reference>. The scan, for a given level b, encodes all of the coefficients&apos; data corresponding to the absolute value interval &lsqb;&egr;2<highlight><superscript>b</superscript></highlight>, &egr;2<highlight><superscript>b&plus;1</superscript></highlight>) where &egr;&equals;&egr;<highlight><subscript>c </subscript></highlight>for lossy applications and &egr;&equals;2<highlight><superscript>&minus;1 </superscript></highlight>for lossless ones, as described with reference to <cross-reference target="DRAWINGS">FIG. 3</cross-reference> and <cross-reference target="DRAWINGS">FIG. 8</cross-reference> </paragraph>
<paragraph id="P-0162" lvl="0"><number>&lsqb;0162&rsqb;</number> As with any progressive subband-coding algorithm, the goal is to efficiently encode the locations of the coefficients that are &ldquo;exposed&rdquo; when encoding traverses down to the current bit plane. Naturally, the encoder and decoder have at the time of the scan all the information on what &ldquo;took place&rdquo; at the previous higher bit plane scans. As with most methods, the heuristics of the algorithm is that coefficients, which are insignificant at the current bit plane, which are coefficients with absolute value &lt;&egr;2<highlight><superscript>b</superscript></highlight>, are spatially correlated. If it is known that a coefficient is insignificant at the bit plane b then with higher probability so will his neighbors. This explains why the algorithm groups coefficients into groups of 16 and then 4 and tries to efficiently report (with one symbol) their insignificance. The significance scan uses four binary probability models as listed in the following table.  
<table-cwu id="TABLE-US-00004">
<number>4</number>
<table frame="none" colsep="0" rowsep="0">
<tgroup align="left" colsep="0" rowsep="0" cols="3">
<colspec colname="OFFSET" colwidth="14PT" align="left"/>
<colspec colname="1" colwidth="49PT" align="left"/>
<colspec colname="2" colwidth="154PT" align="left"/>
<thead>
<row>
<entry></entry>
<entry namest="OFFSET" nameend="2" align="center">TABLE 2</entry>
</row>
<row>
<entry></entry>
<entry></entry>
</row>
<row>
<entry></entry>
<entry namest="OFFSET" nameend="2" align="center" rowsep="1"></entry>
</row>
<row>
<entry></entry>
<entry>Model</entry>
<entry>Use</entry>
</row>
<row>
<entry></entry>
<entry namest="OFFSET" nameend="2" align="center" rowsep="1"></entry>
</row>
</thead>
<tbody valign="top">
<row>
<entry></entry>
<entry>Type16</entry>
<entry>to model significance of the groups of 16</entry>
</row>
<row>
<entry></entry>
<entry>Type4</entry>
<entry>to model significance of the groups of 4</entry>
</row>
<row>
<entry></entry>
<entry>Type1</entry>
<entry>to model significance of single coefficients</entry>
</row>
<row>
<entry></entry>
<entry>Sign</entry>
<entry>to model the sign of a significant coefficient</entry>
</row>
<row>
<entry></entry>
<entry namest="OFFSET" nameend="2" align="center" rowsep="1"></entry>
</row>
</tbody>
</tgroup>
</table>
</table-cwu>
</paragraph>
<paragraph id="P-0163" lvl="0"><number>&lsqb;0163&rsqb;</number> The models listed in Table 2 are simply histograms with two levels. They are initialized to equal probabilities at the beginning of each significance scan and are used by and updated by the arithmetic encoder each time a symbol is encoded. Description now proceeds to details of the significance scan. </paragraph>
<paragraph id="P-0164" lvl="0"><number>&lsqb;0164&rsqb;</number> As depicted in <cross-reference target="DRAWINGS">FIG. 10A, a</cross-reference> first loop uses a test (step <highlight><bold>1010</bold></highlight>) on groups of 4&times;4 coefficients. If there are no more such groups the significance scan is terminated and encoding proceeds to an accuracy update in (step <highlight><bold>1000</bold></highlight>). If the current group is still labeled Type16 (step <highlight><bold>1020</bold></highlight>) the encoder computes  
<math-cwu id="MATH-US-00018">
<number>18</number>
<math>
<mrow>
  <mi>b_group</mi>
  <mo>=</mo>
  <mrow>
    <munder>
      <mrow>
        <mi>max</mi>
        <mo>&it;</mo>
        <mstyle>
          <mtext>&emsp;</mtext>
        </mstyle>
      </mrow>
      <mrow>
        <mi>x</mi>
        <mo>,</mo>
        <mi>y</mi>
        <mo>,</mo>
        <mrow>
          <mi>z</mi>
          <mo>&Element;</mo>
          <mi>group16</mi>
        </mrow>
      </mrow>
    </munder>
    <mo>&it;</mo>
    <mrow>
      <mi>b</mi>
      <mo>&it;</mo>
      <mrow>
        <mo>(</mo>
        <mrow>
          <mi>x</mi>
          <mo>,</mo>
          <mi>y</mi>
          <mo>,</mo>
          <mi>z</mi>
        </mrow>
        <mo>)</mo>
      </mrow>
    </mrow>
  </mrow>
</mrow>
</math>
<mathematica-file id="MATHEMATICA-00018" file="US20030005140A1-20030102-M00018.NB"/>
<image id="EMI-M00018" wi="216.027" he="16.07445" file="US20030005140A1-20030102-M00018.TIF" imf="TIFF" ti="MF"/>
</math-cwu>
</paragraph>
<paragraph id="P-0165" lvl="7"><number>&lsqb;0165&rsqb;</number> and arithmetic encodes the Boolean value b_group&lt;b (computed in step <highlight><bold>1030</bold></highlight>). If b_group&lt;b (step <highlight><bold>1040</bold></highlight>), then the group is currently insignificant and encoding proceeds to the next group. Else, the encoder removes the label Type16 (step <highlight><bold>1050</bold></highlight>), splits the group to 4 subgroups of 2&times;2 coefficients and labels each of them Type4. If the group of 16 was not labeled Type16 (step <highlight><bold>1020</bold></highlight>) then it must have been split at a higher bit plane. In both cases the next step will handle the four subgroups of four coefficients. </paragraph>
<paragraph id="P-0166" lvl="0"><number>&lsqb;0166&rsqb;</number> The encoder iterates over the subgroups of four coefficients (step <highlight><bold>1070</bold></highlight>). If a subgroup is labeled Type4 the encoder again computes  
<math-cwu id="MATH-US-00019">
<number>19</number>
<math>
<mrow>
  <mi>b_subgroup</mi>
  <mo>=</mo>
  <mrow>
    <munder>
      <mrow>
        <mi>max</mi>
        <mo>&it;</mo>
        <mstyle>
          <mtext>&emsp;</mtext>
        </mstyle>
      </mrow>
      <mrow>
        <mi>x</mi>
        <mo>,</mo>
        <mi>y</mi>
        <mo>,</mo>
        <mrow>
          <mi>z</mi>
          <mo>&Element;</mo>
          <mi>subgroup</mi>
        </mrow>
      </mrow>
    </munder>
    <mo>&it;</mo>
    <mrow>
      <mi>b</mi>
      <mo>&it;</mo>
      <mrow>
        <mo>(</mo>
        <mrow>
          <mi>x</mi>
          <mo>,</mo>
          <mi>y</mi>
          <mo>,</mo>
          <mi>z</mi>
        </mrow>
        <mo>)</mo>
      </mrow>
    </mrow>
  </mrow>
</mrow>
</math>
<mathematica-file id="MATHEMATICA-00019" file="US20030005140A1-20030102-M00019.NB"/>
<image id="EMI-M00019" wi="216.027" he="16.07445" file="US20030005140A1-20030102-M00019.TIF" imf="TIFF" ti="MF"/>
</math-cwu>
</paragraph>
<paragraph id="P-0167" lvl="7"><number>&lsqb;0167&rsqb;</number> and arithmetically encodes the value of the test b_subgroup&lt;b. There is no need to perform the arithmetic encoding step if the following three conditions hold true: </paragraph>
<paragraph id="P-0168" lvl="2"><number>&lsqb;0168&rsqb;</number> 1. The current group is the fourth subgroup. </paragraph>
<paragraph id="P-0169" lvl="2"><number>&lsqb;0169&rsqb;</number> 2. The previous three subgroups are still labeled Type4. </paragraph>
<paragraph id="P-0170" lvl="2"><number>&lsqb;0170&rsqb;</number> 3. The four subgroups were created &ldquo;just now&rdquo; at the current scan by splitting a group of 16. </paragraph>
<paragraph id="P-0171" lvl="0"><number>&lsqb;0171&rsqb;</number> Under these conditions it is certain that b_subgroup&gE;b, or else the split would not have taken place. Thus, there is no need to arithmetically encode the significance of the subgroup, since this information will be known also to the decoder at this stage. </paragraph>
<paragraph id="P-0172" lvl="0"><number>&lsqb;0172&rsqb;</number> If the current subgroup is found to be (still) insignificant the encoder proceeds to the next subgroup. Else, it removes the label Type4, split the subgroup to the single coefficients and label each of them Type1 (step <highlight><bold>1100</bold></highlight>). If the subgroup was not labeled Type4 then it must have been split at a higher bit plane. In both cases the next task is to handle each individual coefficient. </paragraph>
<paragraph id="P-0173" lvl="0"><number>&lsqb;0173&rsqb;</number> The iteration performed over the four coefficients in step <highlight><bold>1110</bold></highlight> in <cross-reference target="DRAWINGS">FIG. 10B</cross-reference> is now explained in detail. If a coefficient coef(x,y,z) is labeled Type1 the encoder arithmetically encodes the value of the test b(x,y,z)&lt;b . There is no need to perform the arithmetic encoding step if the following three conditions hold true: </paragraph>
<paragraph id="P-0174" lvl="2"><number>&lsqb;0174&rsqb;</number> 1. The current coefficient is the fourth coefficient. </paragraph>
<paragraph id="P-0175" lvl="2"><number>&lsqb;0175&rsqb;</number> 2. The previous three coefficients are still labeled Type1. </paragraph>
<paragraph id="P-0176" lvl="2"><number>&lsqb;0176&rsqb;</number> 3. The subgroup of the four coefficients was split &ldquo;just now&rdquo; at the current scan. </paragraph>
<paragraph id="P-0177" lvl="0"><number>&lsqb;0177&rsqb;</number> Under these conditions it is certain that b(x,y,z)&gE;b, or else the split would not have taken place. As in the subgroup case, there is no need to arithmetically encode the significance of the coefficient. </paragraph>
<paragraph id="P-0178" lvl="0"><number>&lsqb;0178&rsqb;</number> If the current coefficient is still found to be insignificant, then encoding proceeds to the next coefficient, else, the encoder arithmetically encodes the sign of the coefficient, remove the label Type1 and adds the coefficient to the list of significant coefficients. The encoder now sets  
<math-cwu id="MATH-US-00020">
<number>20</number>
<math>
<mrow>
  <mrow>
    <mi>coef</mi>
    <mo>&af;</mo>
    <mrow>
      <mo>(</mo>
      <mrow>
        <mi>x</mi>
        <mo>,</mo>
        <mi>y</mi>
        <mo>,</mo>
        <mi>z</mi>
      </mrow>
      <mo>)</mo>
    </mrow>
  </mrow>
  <mo>=</mo>
  <mrow>
    <mrow>
      <mi>sign</mi>
      <mo>&af;</mo>
      <mrow>
        <mo>(</mo>
        <mrow>
          <mi>coef</mi>
          <mo>&af;</mo>
          <mrow>
            <mo>(</mo>
            <mrow>
              <mi>x</mi>
              <mo>,</mo>
              <mi>y</mi>
              <mo>,</mo>
              <mi>z</mi>
            </mrow>
            <mo>)</mo>
          </mrow>
        </mrow>
        <mo>)</mo>
      </mrow>
    </mrow>
    <mo>&times;</mo>
    <mi>&varepsilon;</mi>
    <mo>&times;</mo>
    <mfrac>
      <mrow>
        <mn>3</mn>
        <mo>&times;</mo>
        <msup>
          <mn>2</mn>
          <mi>b</mi>
        </msup>
      </mrow>
      <mn>2</mn>
    </mfrac>
  </mrow>
</mrow>
</math>
<mathematica-file id="MATHEMATICA-00020" file="US20030005140A1-20030102-M00020.NB"/>
<image id="EMI-M00020" wi="216.027" he="18.96615" file="US20030005140A1-20030102-M00020.TIF" imf="TIFF" ti="MF"/>
</math-cwu>
</paragraph>
<paragraph id="P-0179" lvl="0"><number>&lsqb;0179&rsqb;</number> The value of coef(x,y,z) simulates the reconstruction of the coefficient by the decoder. At this stage, with no additional information available, this will be the approximated value of the coefficient by the decoder, which corresponds to the middle of the bit plane interval &lsqb;&egr;2<highlight><superscript>b</superscript></highlight>,&egr;2<highlight><superscript>b&plus;1</superscript></highlight>). </paragraph>
<paragraph id="P-0180" lvl="0"><number>&lsqb;0180&rsqb;</number> The encoding accuracy update of step <highlight><bold>1000</bold></highlight> in <cross-reference target="DRAWINGS">FIG. 10A</cross-reference> in now explained in detail. This step is performed if one of the following two conditions holds: </paragraph>
<paragraph id="P-0181" lvl="2"><number>&lsqb;0181&rsqb;</number> 1. equalBinSize&equals;false (see Table 1) </paragraph>
<paragraph id="P-0182" lvl="2"><number>&lsqb;0182&rsqb;</number> 2. b&gt;0 </paragraph>
<paragraph id="P-0183" lvl="0"><number>&lsqb;0183&rsqb;</number> At the bit plane b the significant coefficient list contains all the coefficients coef(x,y,z) for which b(x,y,z)&gE;b and their current approximated value coef(x,y,z). For each coefficient in the list the encoder arithmetically encodes the value of the test coef(x,y,z)&lt;coef(x,y,z). To that end, a special binary probability model is initialized at the beginning of the step and used by the arithmetic encoder. After the accuracy improvement has been encoded, the encoder accordingly simulates the reconstruction done by the decoder and updates the coefficient&apos;s approximated value by adding/subtracting from coef(x,y,z) the amount  
<math-cwu id="MATH-US-00021">
<number>21</number>
<math>
<mrow>
  <mi>&varepsilon;</mi>
  <mo>&times;</mo>
  <mrow>
    <mfrac>
      <msup>
        <mn>2</mn>
        <mi>b</mi>
      </msup>
      <mn>4</mn>
    </mfrac>
    <mo>.</mo>
  </mrow>
</mrow>
</math>
<mathematica-file id="MATHEMATICA-00021" file="US20030005140A1-20030102-M00021.NB"/>
<image id="EMI-M00021" wi="216.027" he="18.96615" file="US20030005140A1-20030102-M00021.TIF" imf="TIFF" ti="MF"/>
</math-cwu>
</paragraph>
<paragraph id="P-0184" lvl="0"><number>&lsqb;0184&rsqb;</number> Reference is now made to <cross-reference target="DRAWINGS">FIG. 12</cross-reference>A and <cross-reference target="DRAWINGS">FIG. 13</cross-reference>, for the description of the encoding at the least significant bit plane. This is a detailed description of step <highlight><bold>940</bold></highlight> in <cross-reference target="DRAWINGS">FIG. 9</cross-reference>, for the special case of b&equals;1. Pseudo-code is provided in <cross-reference target="DRAWINGS">FIG. 12</cross-reference>A, and an equivalent flowchart is shown in <cross-reference target="DRAWINGS">FIG. 13</cross-reference>. The least significant bit encoding algorithm is as follows. </paragraph>
<paragraph id="P-0185" lvl="0"><number>&lsqb;0185&rsqb;</number> The coefficients scanning procedure in step <highlight><bold>1210</bold></highlight> in <cross-reference target="DRAWINGS">FIG. 12</cross-reference>A and step <highlight><bold>1310</bold></highlight> in <cross-reference target="DRAWINGS">FIG. 13</cross-reference> skips all the coefficients that belong to those subbands that have zero least significant bits in all coefficients, as described in detail herein above in reference to <cross-reference target="DRAWINGS">FIG. 8</cross-reference>. </paragraph>
<paragraph id="P-0186" lvl="0"><number>&lsqb;0186&rsqb;</number> The test for reported coefficients procedure in step <highlight><bold>1220</bold></highlight> in <cross-reference target="DRAWINGS">FIG. 12</cross-reference>A and step <highlight><bold>1320</bold></highlight> in <cross-reference target="DRAWINGS">FIG. 13</cross-reference> returns false if the coefficient is one of &lcub;&minus;1,0,1&rcub; (as in all higher bit plane scans it was insignificant), otherwise it returns true. The test for zero coefficients in step <highlight><bold>1230</bold></highlight> in <cross-reference target="DRAWINGS">FIG. 12</cross-reference>A and step <highlight><bold>1330</bold></highlight> in <cross-reference target="DRAWINGS">FIG. 13</cross-reference> returns true if and only if the coefficient is zero. </paragraph>
<paragraph id="P-0187" lvl="0"><number>&lsqb;0187&rsqb;</number> The half bit plane scan is now described in reference to the pseudo-code shown in <cross-reference target="DRAWINGS">FIG. 12B</cross-reference>. A scan is made in the three dimensions, labeled x, y and z. In each dimension the scan is made from zero to the size in that dimension. A symbol in encoded arithmetically in each point of the 3-D space. Clearly, the scan could be made in any other particular order such as the reverse order to that embodiment depicted in <cross-reference target="DRAWINGS">FIG. 12</cross-reference>B, as long as the encoder and the decoder agree on the order of the scan. The decoder algorithm is explained herein below, and the relevant decoder scan is described with reference to <cross-reference target="DRAWINGS">FIG. 16B</cross-reference>. </paragraph>
<paragraph id="P-0188" lvl="0"><number>&lsqb;0188&rsqb;</number> The decoding algorithm is a reversed reflection of the encoding algorithm performed in the server and described herein above. Decoding is done at the client computer during the progressive rendering operation as described at step <highlight><bold>1705</bold></highlight> of <cross-reference target="DRAWINGS">FIG. 17</cross-reference>. </paragraph>
<paragraph id="P-0189" lvl="0"><number>&lsqb;0189&rsqb;</number> The decoding algorithm is explained herein using the simple case of an image with one component (such as a grayscale image). This is done for clarity of discussion, in the same fashion in which the encoding algorithm is explained herein above. The generalization to images of more components in straightforward. Input parameters to the algorithm are listed in Table 3 below:  
<table-cwu id="TABLE-US-00005">
<number>5</number>
<table frame="none" colsep="0" rowsep="0" pgwide="1">
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="1" colwidth="49PT" align="left"/>
<colspec colname="2" colwidth="210PT" align="left"/>
<thead>
<row>
<entry namest="1" nameend="2" align="center">TABLE 3</entry>
</row>
<row>
<entry></entry>
</row>
<row><entry namest="1" nameend="2" align="center" rowsep="1"></entry>
</row>
<row>
<entry>Variable</entry>
<entry>Meaning</entry>
</row>
<row><entry namest="1" nameend="2" align="center" rowsep="1"></entry>
</row>
</thead>
<tbody valign="top">
<row>
<entry>coef</entry>
<entry>Empty 3D matrix of subband coefficients to be filled by the decoding</entry>
</row>
<row>
<entry></entry>
<entry>algorithm.</entry>
</row>
<row>
<entry>EqualBinSize</entry>
<entry>True for high or lossless quality. False for low quality (transmitted from</entry>
</row>
<row>
<entry></entry>
<entry>the server).</entry>
</row>
<row>
<entry>&egr;<highlight><subscript>c</subscript></highlight></entry>
<entry>The minimal threshold for the component (transmitted from the server).</entry>
</row>
<row>
<entry>HalfBit</entry>
<entry>3D matrix of bits containing</entry>
</row>
<row>
<entry></entry>
<entry>(tileLength/2) &times; (tileLength/2) &times; tileHeight bits for HHX-Subbands</entry>
</row>
<row>
<entry></entry>
<entry>type decomposition or tileLength &times; tileLength &times; (tileHeight/2) bits for</entry>
</row>
<row>
<entry></entry>
<entry>XXH-Subbands type.</entry>
</row>
<row><entry namest="1" nameend="2" align="center" rowsep="1"></entry>
</row>
</tbody>
</tgroup>
</table>
</table-cwu>
</paragraph>
<paragraph id="P-0190" lvl="0"><number>&lsqb;0190&rsqb;</number> Decoding algorithm initialization </paragraph>
<paragraph id="P-0191" lvl="2"><number>&lsqb;0191&rsqb;</number> 1. Assign the value zero to each coefficient Coef(x,y,z). </paragraph>
<paragraph id="P-0192" lvl="2"><number>&lsqb;0192&rsqb;</number> 2. Assign the value zero to each bit belonging to the HalfBit matrix. </paragraph>
<paragraph id="P-0193" lvl="2"><number>&lsqb;0193&rsqb;</number> 3. Initialize all the coefficients as members of their corresponding Type16 group. </paragraph>
<paragraph id="P-0194" lvl="2"><number>&lsqb;0194&rsqb;</number> 4. Initialize the list of significant coefficients to be empty. </paragraph>
<paragraph id="P-0195" lvl="2"><number>&lsqb;0195&rsqb;</number> 5. If the data block (t_x,t_y,t_z,t_resolution,maxBitPlane(t_resolution)) </paragraph>
<paragraph id="P-0196" lvl="7"><number>&lsqb;0196&rsqb;</number> is available at the client, read the value of maxBitPlane (tile), which in a embodiment of the invention is the first byte. </paragraph>
<paragraph id="P-0197" lvl="0"><number>&lsqb;0197&rsqb;</number> The outer loop of the decoding algorithm is now described with reference to <cross-reference target="DRAWINGS">FIG. 14</cross-reference>. The decoding algorithm scans the bit planes from the given b&equals;maxBitPlane(tile) to b&equals;0 (step <highlight><bold>1410</bold></highlight>). The input to each such bit plane scan is encoded data block (t_x,t_y,t_z, t_resolution ,b) . Since the first stage of the decoding algorithm is arithmetic decoding, at the beginning of each scan the arithmetic decoder&apos;s input module is redirected (step <highlight><bold>1420</bold></highlight>) to read from &ldquo;slot&rdquo; in the database allocated for the particular data block. There are cases where although a subband tile participates in the rendering of the ROI, some of its data blocks will be missing. A data block could be missing due to the following reasons: </paragraph>
<paragraph id="P-0198" lvl="2"><number>&lsqb;0198&rsqb;</number> 1. It was not requested for the current ROI since it is visually insignificant. </paragraph>
<paragraph id="P-0199" lvl="2"><number>&lsqb;0199&rsqb;</number> 2. It was requested from the server, but has not arrived yet. </paragraph>
<paragraph id="P-0200" lvl="0"><number>&lsqb;0200&rsqb;</number> In any case, the tile&apos;s coefficients are required at some accuracy level for the rendering and the rule is obviously to use whatever data is present. At the first missing data block (step <highlight><bold>1430</bold></highlight>), the outer loop is terminated. For example, if the first data block is missing, all of the coefficients retain their initial value of zero. If only the first few data blocks are present then only coefficients with &ldquo;large&rdquo; absolute value will be reconstructed and at a low precision. Once the bit plane scan is finished and the data block (t_x,t_y,t_z,t_resolution ,b) has been decoded (step <highlight><bold>1450</bold></highlight>), the input stream is closed (<highlight><bold>1460</bold></highlight>) and the bit plane is decremented. It should be mentioned that as during the encoding, the last two bit planes for the lossless applications are the &ldquo;least significant bit plane&rdquo; (b&equals;1) and the &ldquo;half bit plane&rdquo; (b&equals;0), as described in reference to <cross-reference target="DRAWINGS">FIG. 8</cross-reference>. </paragraph>
<paragraph id="P-0201" lvl="0"><number>&lsqb;0201&rsqb;</number> Pseudo-code for the bit plane scan is provided in <cross-reference target="DRAWINGS">FIG. 15</cross-reference>. The scan, for a given level b, decodes all of the coefficients&apos; data corresponding to the absolute value interval &lsqb;&egr;2<highlight><superscript>b</superscript></highlight>,&egr;2<highlight><superscript>b&plus;1</superscript></highlight>) where &egr;&equals;&egr;<highlight><subscript>c </subscript></highlight>for lossy applications and &egr;&equals;2<highlight><superscript>&minus;1 </superscript></highlight>for lossless ones (as described in reference to <cross-reference target="DRAWINGS">FIG. 3</cross-reference> and <cross-reference target="DRAWINGS">FIG. 8</cross-reference>). </paragraph>
<paragraph id="P-0202" lvl="0"><number>&lsqb;0202&rsqb;</number> The goal of the significance scan is to decode the locations of the coefficients that are &ldquo;exposed&rdquo; when the decoder traverses down to the current bit plane. Since the scan is a reversed reflection of the encoding scan as described herein above in reference to Table 2, the description below is brief. Reference is made to <cross-reference target="DRAWINGS">FIG. 28</cross-reference>A and <cross-reference target="DRAWINGS">FIG. 28</cross-reference>B, which reflect corresponding <cross-reference target="DRAWINGS">FIG. 10</cross-reference>A and <cross-reference target="DRAWINGS">FIG. 10B</cross-reference>. </paragraph>
<paragraph id="P-0203" lvl="0"><number>&lsqb;0203&rsqb;</number> Reference is first made to <cross-reference target="DRAWINGS">FIG. 28A</cross-reference>. The first loop is on groups of Type16. If there are no more such groups (step <highlight><bold>2810</bold></highlight>) the significance scan is terminated and decoding proceeds to the accuracy update (step <highlight><bold>2800</bold></highlight>). If the current group is still labeled Type16 (<highlight><bold>2820</bold></highlight>) decoding is performed of the Boolean value b_Group&lt;b (<highlight><bold>2830</bold></highlight>). If b_Group&lt;b (<highlight><bold>2840</bold></highlight>), then the group is currently insignificant and decoding proceeds to the next group (<highlight><bold>2845</bold></highlight>). Else, the decoder removes the label Type16 (step <highlight><bold>2850</bold></highlight>) and splits the Type16 group to 4 subgroups of Type4. If the group of 16 was not labeled Type16 then it must have been split at a higher bit plane. In both cases decoding must now continue to process the four subgroups of four coefficients. The decoder uses the same probability models as the encoder for the purpose of arithmetic decoding. </paragraph>
<paragraph id="P-0204" lvl="0"><number>&lsqb;0204&rsqb;</number> Reference is now made to <cross-reference target="DRAWINGS">FIG. 28B</cross-reference>. Decoding iterates (step <highlight><bold>2860</bold></highlight>) over the subgroups of four coefficients. If a subgroup is labeled 4 Type arithmetic decoding of the value of the test b_Subgroup&lt;b is done (step <highlight><bold>2880</bold></highlight>). The arithmetic decoding step is not performed if the following three conditions hold true: </paragraph>
<paragraph id="P-0205" lvl="2"><number>&lsqb;0205&rsqb;</number> 1. The current group of Type4 is the fourth subgroup. </paragraph>
<paragraph id="P-0206" lvl="2"><number>&lsqb;0206&rsqb;</number> 2. The previous three subgroups are still labeled Type4. </paragraph>
<paragraph id="P-0207" lvl="2"><number>&lsqb;0207&rsqb;</number> 3. The four subgroups were created &ldquo;just now&rdquo; at the current scan by splitting a Type16 group. </paragraph>
<paragraph id="P-0208" lvl="0"><number>&lsqb;0208&rsqb;</number> In such a case the group surely significant, it was not encoded and therefore need not be decoded. If the current subgroup remains insignificant, then decoding proceeds to the next subgroup. Else, the decoder removes the label Type4, splits the subgroup to the single coefficients and labels each of them Type1. If the subgroup was not labeled Type4 then it must have been split at a higher bit plane. In both cases the decoder must now continue to handle each individual coefficient. </paragraph>
<paragraph id="P-0209" lvl="0"><number>&lsqb;0209&rsqb;</number> Decoding loops over the four coefficients. If a coefficient coef(x,y,z) is still labeled Type1 the decoder arithmetically decodes the value of the test b(x,y,z)&lt;b. It does not perform the arithmetic decoding step if the following three conditions hold: </paragraph>
<paragraph id="P-0210" lvl="2"><number>&lsqb;0210&rsqb;</number> 1. The current coefficient is the fourth coefficient. </paragraph>
<paragraph id="P-0211" lvl="2"><number>&lsqb;0211&rsqb;</number> 2. The previous three coefficients are still labeled Type1. </paragraph>
<paragraph id="P-0212" lvl="2"><number>&lsqb;0212&rsqb;</number> 3. The subgroup of the four coefficients was split &ldquo;just now&rdquo; at the current scan. </paragraph>
<paragraph id="P-0213" lvl="7"><number>&lsqb;0213&rsqb;</number> In such a case the coefficient is surely significant, so there is no need to decode the significance of the coefficient. </paragraph>
<paragraph id="P-0214" lvl="0"><number>&lsqb;0214&rsqb;</number> If the current coefficient remains insignificant, decoding then proceeds to the next coefficient. Else, it arithmetically decodes the sign of the coefficient, removes the label Type1 and adds the coefficient to the list of significant coefficients. At this stage the current approximated value coef(x,y,z) at the decoder is  
<math-cwu id="MATH-US-00022">
<number>22</number>
<math>
<mrow>
  <mrow>
    <mi>sign</mi>
    <mo>&af;</mo>
    <mrow>
      <mo>(</mo>
      <mrow>
        <mi>coef</mi>
        <mo>&af;</mo>
        <mrow>
          <mo>(</mo>
          <mrow>
            <mi>x</mi>
            <mo>,</mo>
            <mi>y</mi>
            <mo>,</mo>
            <mi>z</mi>
          </mrow>
          <mo>)</mo>
        </mrow>
      </mrow>
      <mo>)</mo>
    </mrow>
  </mrow>
  <mo>&times;</mo>
  <mi>&varepsilon;</mi>
  <mo>&times;</mo>
  <mfrac>
    <mrow>
      <mn>3</mn>
      <mo>&times;</mo>
      <msup>
        <mn>2</mn>
        <mi>b</mi>
      </msup>
    </mrow>
    <mn>2</mn>
  </mfrac>
</mrow>
</math>
<mathematica-file id="MATHEMATICA-00022" file="US20030005140A1-20030102-M00022.NB"/>
<image id="EMI-M00022" wi="216.027" he="18.96615" file="US20030005140A1-20030102-M00022.TIF" imf="TIFF" ti="MF"/>
</math-cwu>
</paragraph>
<paragraph id="P-0215" lvl="7"><number>&lsqb;0215&rsqb;</number> which corresponds to the middle of the bit plane interval &lsqb;&egr;2<highlight><superscript>b</superscript></highlight>,&egr;2<highlight><superscript>b&plus;1</superscript></highlight>). </paragraph>
<paragraph id="P-0216" lvl="0"><number>&lsqb;0216&rsqb;</number> At the bit plane b the significant coefficient list contains all the coefficients coef(x,y,z) for which b(x,y,z)&gE;b at an approximated value. The encoder provided this list by step <highlight><bold>1000</bold></highlight> in <cross-reference target="DRAWINGS">FIG. 10</cross-reference>A, and the decoder handles it in step <highlight><bold>2800</bold></highlight> in <cross-reference target="DRAWINGS">FIG. 28A</cross-reference>. When performing this operation, and for each coefficient in the list the decoder arithmetically decodes the value of test coef(x,y,z)&lt;coef(x,y,z), where coef(x,y,z) is the actual value of the coefficient (not known to the decoder). It then accordingly updates the approximated value by adding/subtracting from coef(x,y,z) the amount  
<math-cwu id="MATH-US-00023">
<number>23</number>
<math>
<mrow>
  <mi>&varepsilon;</mi>
  <mo>&times;</mo>
  <mrow>
    <mfrac>
      <msup>
        <mn>2</mn>
        <mi>b</mi>
      </msup>
      <mn>4</mn>
    </mfrac>
    <mo>.</mo>
  </mrow>
</mrow>
</math>
<mathematica-file id="MATHEMATICA-00023" file="US20030005140A1-20030102-M00023.NB"/>
<image id="EMI-M00023" wi="216.027" he="18.96615" file="US20030005140A1-20030102-M00023.TIF" imf="TIFF" ti="MF"/>
</math-cwu>
</paragraph>
<paragraph id="P-0217" lvl="0"><number>&lsqb;0217&rsqb;</number> Pseudo-code for the least significant bit plane scan and half bit plane scan are given in <cross-reference target="DRAWINGS">FIG. 16</cross-reference>A and <cross-reference target="DRAWINGS">FIG. 16B</cross-reference>. The decoder scans all the coefficients from all subbands at step <highlight><bold>1610</bold></highlight>. Decoding of those of the subbands that are skipped by the encoding algorithm is not performed, but their least significant bit is counted as zero instead. The order of the scan in <cross-reference target="DRAWINGS">FIG. 16B</cross-reference> reflects the order of the encoding scan in <cross-reference target="DRAWINGS">FIG. 12B</cross-reference>. </paragraph>
<paragraph id="P-0218" lvl="0"><number>&lsqb;0218&rsqb;</number> Reference is now made to <cross-reference target="DRAWINGS">FIG. 17</cross-reference> for the description of the workflow at the client computer <highlight><bold>110</bold></highlight>. Any new ROI generated by the user&apos;s action such as a zoom-in or a scroll, invokes at step <highlight><bold>1701</bold></highlight> a call from the GUI interface to the client imaging module with the new ROI view parameters. The client imaging module then computes in step <highlight><bold>1702</bold></highlight> which data blocks (described herein above in reference to <cross-reference target="DRAWINGS">FIG. 3</cross-reference>) are required for the rendering of the ROI and checks if these data blocks are available in the client cache. If not, their coordinate (given by Eq.2) is added to a request list ordered according to some progressive mode. The request list is then encoded in step <highlight><bold>1703</bold></highlight> and sent to the server. The server responds to the request by sending back to the client a stream of data blocks, in the order in which they were requested. In step <highlight><bold>1704</bold></highlight> the client inserts them to their appropriate location in the distributed database. At various moments (step <highlight><bold>1705</bold></highlight>), the rendering of the ROI, is invoked. Naturally, the rendering operation is progressive and is able to use only the currently available data in the client&apos;s database. </paragraph>
<paragraph id="P-0219" lvl="0"><number>&lsqb;0219&rsqb;</number> The imaging module on the client computer <highlight><bold>110</bold></highlight> receives view parameters listed in Table 4 from the GUI interface module. These parameters are used in step <highlight><bold>1702</bold></highlight> to generate a request list for the ROI. The same parameters are used to render the ROI in step <highlight><bold>1705</bold></highlight>.  
<table-cwu id="TABLE-US-00006">
<number>6</number>
<table frame="none" colsep="0" rowsep="0" pgwide="1">
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="1" colwidth="56PT" align="left"/>
<colspec colname="2" colwidth="203PT" align="left"/>
<thead>
<row>
<entry namest="1" nameend="2" align="center">TABLE 4</entry>
</row>
<row>
<entry></entry>
</row>
<row><entry namest="1" nameend="2" align="center" rowsep="1"></entry>
</row>
<row>
<entry>Variable</entry>
<entry>Meaning</entry>
</row>
<row><entry namest="1" nameend="2" align="center" rowsep="1"></entry>
</row>
</thead>
<tbody valign="top">
<row>
<entry>worldPolygon</entry>
<entry>A 2-D polygon in the original image coordinate system -</entry>
</row>
<row>
<entry></entry>
<entry>defines which portion of each slice of the sequence will be</entry>
</row>
<row>
<entry></entry>
<entry>rendered</entry>
</row>
<row>
<entry>sliceRange</entry>
<entry>An interval &lsqb;firstSlice,lastSlice) that defines which slices will be</entry>
</row>
<row>
<entry></entry>
<entry>rendered</entry>
</row>
<row>
<entry>scale</entry>
<entry>The view resolution. 0 &lt; scale &lt; 1 implies a low view resolution,</entry>
</row>
<row>
<entry></entry>
<entry>scale &equals; 1 original resolution and scale &gt; 1 a &ldquo;higher than</entry>
</row>
<row>
<entry></entry>
<entry>original&rdquo; view resolution</entry>
</row>
<row>
<entry>deviceDepth</entry>
<entry>A number in the set &lcub;8,16,24&rcub; representing the depth of the</entry>
</row>
<row>
<entry></entry>
<entry>output device</entry>
</row>
<row>
<entry>viewQuality</entry>
<entry>A quality factor in the range &lsqb;1, 7&rsqb; where 1 implies very low</entry>
</row>
<row>
<entry></entry>
<entry>quality and 7 implies lossless quality</entry>
</row>
<row>
<entry>luminanceMap</entry>
<entry>If active: a curve defining a mapping of medical images with</entry>
</row>
<row>
<entry></entry>
<entry>more than 8 bits (typically 10,12,16 bits) per grayscale values to</entry>
</row>
<row>
<entry></entry>
<entry>an 8 bit screen</entry>
</row>
<row>
<entry>progressiveMode</entry>
<entry>One of: Progressive By Accuracy, Progressive By Resolution,</entry>
</row>
<row>
<entry></entry>
<entry>Progressive by Spatial Order</entry>
</row>
<row><entry namest="1" nameend="2" align="center" rowsep="1"></entry>
</row>
</tbody>
</tgroup>
</table>
</table-cwu>
</paragraph>
<paragraph id="P-0220" lvl="0"><number>&lsqb;0220&rsqb;</number> The basic parameters of a ROI are worldPolygon, sliceRange and scale, which determine uniquely the ROI view. If the ROI is to be rendered onto a viewing device with limited resolution, then a slicerange, containing a large number of slices of the 3-D image, will be coupled by a small scale. The other view parameters determine the way in which the view will be rendered. The parameters deviceDepth and viewQuality determine the quality of the rendering operation. In cases the viewing device is of low resolution or the user sets the quality parameter to a lower quality, the transfer size can be reduced significantly, as described herein below in reference to step <highlight><bold>1702</bold></highlight>. </paragraph>
<paragraph id="P-0221" lvl="0"><number>&lsqb;0221&rsqb;</number> The parameter luminanceMap is typically used in medical imaging for grayscale images that are of higher resolution than the viewing device. Typically, screens display grayscale images using 8 bits, while medical images sometimes represent each pixel using 16 bits. Thus, it is necessary to map the bigger pixel range to the smaller range of &lsqb;0, 255&rsqb;. </paragraph>
<paragraph id="P-0222" lvl="0"><number>&lsqb;0222&rsqb;</number> Lastly, the parameter progressiveMode determines the order in which data blocks should be transmitted from the server computer <highlight><bold>120</bold></highlight>. The &ldquo;Progressive By Accuracy&rdquo; mode is the preferred mode for viewing in low bandwidth environments. &ldquo;Progressive By Resolution&rdquo; mode is easier to implement since it does not require the more sophisticated accuracy (bit plane) management and therefore is commonly found in previous solutions. The superiority of the &ldquo;progressive by accuracy&rdquo; mode can be mathematically proved by showing the superiority of non-linear approximation over linear approximation for the class of real-life images. The &ldquo;Progressive by Spatial Order&rdquo; mode is preferred for a cine view of the sequence of 2-D slices one by one. In this mode the image data is ordered and received from the first slice to the last one, such that rendering can be done in parallel to the transmission. </paragraph>
<paragraph id="P-0223" lvl="0"><number>&lsqb;0223&rsqb;</number> Reference is now made to <cross-reference target="DRAWINGS">FIG. 18</cross-reference> for the description of luminance mapping. A mapping from original image depth (e.g., 10,12,16 bits) to screen depth (typically 8-bits), is defined by a monotonic function as in Eq.8 </paragraph>
<paragraph lvl="0"><in-line-formula>f: &lsqb;0,2<highlight><superscript>orginal</superscript></highlight><highlight><superscript><highlight><subscript>&mdash;</subscript></highlight></superscript></highlight><highlight><superscript>image</superscript></highlight><highlight><superscript><highlight><subscript>&mdash;</subscript></highlight></superscript></highlight><highlight><superscript>depth</superscript></highlight>&minus;1&rsqb;&rarr;&lsqb;0,2<highlight><superscript>screen</superscript></highlight><highlight><superscript><highlight><subscript>&mdash;</subscript></highlight></superscript></highlight><highlight><superscript>depth</superscript></highlight>&minus;1&rsqb;. &emsp;&emsp;(Eq.8) </in-line-formula></paragraph>
<paragraph id="P-0224" lvl="0"><number>&lsqb;0224&rsqb;</number> The curve influences not only the mapping, i.e. the drawing to the screen, but also the request from the server. To understand that, let us concentrate in the maximal gradient of the curve in <cross-reference target="DRAWINGS">FIG. 18</cross-reference>. In a lossy mode, the request is created such that the image approximation in the client side is close enough to the original image, i.e., the RMS (Root Mean Square error) is visually negligible. When a curve (mapping function) is applied, the RMS can be increased or reduced. The maximal RMS increasing factor depends on the maximal derivative of the curve as in Eq.9.  
<math-cwu id="MATH-US-00024">
<number>24</number>
<math>
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mrow>
            <mi>RMS_increasing</mi>
            <mo>&it;</mo>
            <mi>_factor</mi>
          </mrow>
          <mo>=</mo>
          <mrow>
            <mfrac>
              <mrow>
                <mi>R</mi>
                <mo>&it;</mo>
                <mstyle>
                  <mtext>&emsp;</mtext>
                </mstyle>
                <mo>&it;</mo>
                <mi>M</mi>
                <mo>&it;</mo>
                <mstyle>
                  <mtext>&emsp;</mtext>
                </mstyle>
                <mo>&it;</mo>
                <mrow>
                  <mi>S</mi>
                  <mo>&af;</mo>
                  <mrow>
                    <mo>(</mo>
                    <mrow>
                      <mrow>
                        <mi>f</mi>
                        <mo>&af;</mo>
                        <mrow>
                          <mo>(</mo>
                          <mi>I</mi>
                          <mo>)</mo>
                        </mrow>
                      </mrow>
                      <mo>,</mo>
                      <mrow>
                        <mi>f</mi>
                        <mo>&af;</mo>
                        <mrow>
                          <mo>(</mo>
                          <mover>
                            <mi>I</mi>
                            <mo>^</mo>
                          </mover>
                          <mo>)</mo>
                        </mrow>
                      </mrow>
                    </mrow>
                    <mo>)</mo>
                  </mrow>
                </mrow>
              </mrow>
              <mrow>
                <mi>R</mi>
                <mo>&it;</mo>
                <mstyle>
                  <mtext>&emsp;</mtext>
                </mstyle>
                <mo>&it;</mo>
                <mi>M</mi>
                <mo>&it;</mo>
                <mstyle>
                  <mtext>&emsp;</mtext>
                </mstyle>
                <mo>&it;</mo>
                <mrow>
                  <mi>S</mi>
                  <mo>&af;</mo>
                  <mrow>
                    <mo>(</mo>
                    <mrow>
                      <mi>I</mi>
                      <mo>,</mo>
                      <mover>
                        <mi>I</mi>
                        <mo>^</mo>
                      </mover>
                    </mrow>
                    <mo>)</mo>
                  </mrow>
                </mrow>
              </mrow>
            </mfrac>
            <mo>&leq;</mo>
            <mrow>
              <mi>max</mi>
              <mo>&af;</mo>
              <mrow>
                <mo>(</mo>
                <msup>
                  <mi>f</mi>
                  <mi>&prime;</mi>
                </msup>
                <mo>)</mo>
              </mrow>
            </mrow>
          </mrow>
        </mrow>
        <mo>,</mo>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mrow>
          <mi>Eq</mi>
          <mo>.</mo>
          <mstyle>
            <mtext>&emsp;</mtext>
          </mstyle>
          <mo>&it;</mo>
          <mn>9</mn>
        </mrow>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
<mathematica-file id="MATHEMATICA-00024" file="US20030005140A1-20030102-M00024.NB"/>
<image id="EMI-M00024" wi="216.027" he="25.9119" file="US20030005140A1-20030102-M00024.TIF" imf="TIFF" ti="MF"/>
</math-cwu>
</paragraph>
<paragraph id="P-0225" lvl="7"><number>&lsqb;0225&rsqb;</number> where </paragraph>
<paragraph id="P-0226" lvl="7"><number>&lsqb;0226&rsqb;</number> I is the original image, </paragraph>
<paragraph id="P-0227" lvl="7"><number>&lsqb;0227&rsqb;</number> &Icirc; is the approximated image, </paragraph>
<paragraph id="P-0228" lvl="7"><number>&lsqb;0228&rsqb;</number> f is the mapping function,  
<math-cwu id="MATH-US-00025">
<number>25</number>
<math>
<mrow>
  <mrow>
    <mrow>
      <mi>R</mi>
      <mo>&it;</mo>
      <mstyle>
        <mtext>&emsp;</mtext>
      </mstyle>
      <mo>&it;</mo>
      <mi>M</mi>
      <mo>&it;</mo>
      <mstyle>
        <mtext>&emsp;</mtext>
      </mstyle>
      <mo>&it;</mo>
      <mrow>
        <mi>S</mi>
        <mo>&it;</mo>
        <mrow>
          <mo>(</mo>
          <mrow>
            <msub>
              <mi>I</mi>
              <mn>1</mn>
            </msub>
            <mo>,</mo>
            <msub>
              <mi>I</mi>
              <mn>2</mn>
            </msub>
          </mrow>
          <mo>)</mo>
        </mrow>
      </mrow>
    </mrow>
    <mo>=</mo>
    <mfrac>
      <msub>
        <mrow>
          <mo>&LeftDoubleBracketingBar;</mo>
          <mrow>
            <msub>
              <mi>I</mi>
              <mn>1</mn>
            </msub>
            <mo>-</mo>
            <msub>
              <mi>I</mi>
              <mn>2</mn>
            </msub>
          </mrow>
          <mo>&RightDoubleBracketingBar;</mo>
        </mrow>
        <msub>
          <mi>L</mi>
          <mn>2</mn>
        </msub>
      </msub>
      <mi>Image_size</mi>
    </mfrac>
  </mrow>
  <mo>,</mo>
</mrow>
</math>
<mathematica-file id="MATHEMATICA-00025" file="US20030005140A1-20030102-M00025.NB"/>
<image id="EMI-M00025" wi="216.027" he="19.93005" file="US20030005140A1-20030102-M00025.TIF" imf="TIFF" ti="MF"/>
</math-cwu>
</paragraph>
<paragraph id="P-0229" lvl="7"><number>&lsqb;0229&rsqb;</number> max (f&prime;) is the maximal derivative of the curve. </paragraph>
<paragraph id="P-0230" lvl="0"><number>&lsqb;0230&rsqb;</number> Instead of calculating Eq.9, image quality will be assured by using the worst case of the RMS increasing factor that is given by the following Eq.10. </paragraph>
<paragraph lvl="0"><in-line-formula>RMS_increasing_factor&equals;Maximal_derivative&equals;max (f&prime;) &emsp;&emsp;(Eq.10) </in-line-formula></paragraph>
<paragraph id="P-0231" lvl="0"><number>&lsqb;0231&rsqb;</number> If the RMS increasing factor is greater than 1, it means that the &ldquo;new RMS&rdquo; may be greater than a visually negligible error. Thus, the request list should be increased (more bit-planes should be requested from the server) in order to improve the approximation accuracy. Conversely, if the RMS increasing factor is smaller than 1, the request list can be reduced. The exact specification of this is given in the follows description. </paragraph>
<paragraph id="P-0232" lvl="0"><number>&lsqb;0232&rsqb;</number> In step <highlight><bold>1702</bold></highlight>, using the ROI view parameters, the client imaging module calculates data blocks request list ordered according to the progressiveMode. Given the parameters worldPolygon, sliceRange and scale it is possible to determine which subband tiles (such as defined in Eq.1) in the frequency domain participate in the reconstruction of the ROI in the image domain. These tiles contain all the coefficients that are required for an Inverse Subband/Wavelet Transform (IWT) step that produces the ROI. The parameter dyadicResolution(ROI), which is the lowest possible dyadic resolution higher than the resolution of the ROI, is first calculated. Any subband tiles of a higher resolution than dyadicResolution(ROI) do not participate in the rendering operation. Their associated data blocks are therefore not requested, since they are visually insignificant for the rendering of the ROI. If scale&gE;1 then the highest resolution subband tiles are required. If scale&lE;2<highlight><superscript>1-thumbnailResolution </superscript></highlight>(as described in reference to <cross-reference target="DRAWINGS">FIG. 4</cross-reference>) then only the lowest resolution tile is required. Mapping is performed for any other value of scale according to Table 5. Table 5 describes the mapping from a given scale to dyadic subband resolution.  
<table-cwu id="TABLE-US-00007">
<number>7</number>
<table frame="none" colsep="0" rowsep="0">
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="1" colwidth="98PT" align="left"/>
<colspec colname="2" colwidth="119PT" align="left"/>
<thead>
<row>
<entry namest="1" nameend="2" align="center">TABLE 5</entry>
</row>
<row>
<entry></entry>
</row>
<row><entry namest="1" nameend="2" align="center" rowsep="1"></entry>
</row>
<row>
<entry>Scale</entry>
<entry>Highest Subband Resolution</entry>
</row>
<row><entry namest="1" nameend="2" align="center" rowsep="1"></entry>
</row>
</thead>
<tbody valign="top">
<row>
<entry>scale &lE; 2<highlight><superscript>1-thumbnailResolution</superscript></highlight></entry>
<entry>1</entry>
</row>
<row>
<entry>2<highlight><superscript>1-thumbnailResolution </superscript></highlight>&lt; scale &lE; 1</entry>
<entry>numberOfResolutons - &boxur;- log<highlight><subscript>2 </subscript></highlight>(scale)&boxul;</entry>
</row>
<row>
<entry>scale &gt; 1</entry>
<entry>NumberOfResolutions</entry>
</row>
<row><entry namest="1" nameend="2" align="center" rowsep="1"></entry>
</row>
</tbody>
</tgroup>
</table>
</table-cwu>
</paragraph>
<paragraph id="P-0233" lvl="0"><number>&lsqb;0233&rsqb;</number> Once it is determined which subband tiles participate in the rendering of the ROI computation proceeds with finding which of their data blocks are visually significant and in what order they should be requested. Using well known rate/distortion rules from the field of image coding, it is possible to determine the preferred order in which the data blocks should be ordered by the client imaging module (and thus delivered by the server). An ordering scheme referred to herein as &ldquo;Progressive By Accuracy&rdquo; mode is described in <cross-reference target="DRAWINGS">FIG. 19</cross-reference>. The mathematical principals of non-linear approximation underlie this approach. First, the subband coefficients with largest absolute values are requested since they represent the most visually significant data such as strong edges in the image. Notice that high resolution coefficients with large absolute value are requested before low resolution coefficients with smaller absolute value. Within each given layer of precision (bit plane) (step <highlight><bold>1910</bold></highlight>) the order of request is according to resolution (step <highlight><bold>1920</bold></highlight>), low resolution coefficients are requested first and the coefficients of highest-Sub-band-Resolution are requested last. </paragraph>
<paragraph id="P-0234" lvl="0"><number>&lsqb;0234&rsqb;</number> A major difficulty in executing this step is now discussed. Assume a subband tile such as described by Eq.1 is required for the rendering of the ROI. This means that t_resolution&lE;dyadicResolution (ROI) and the tile is required in the IWT procedure that reconstructs the ROI. There is a need to understand which of the data blocks such as described by Eq.2 associated with the subband tile represent visually insignificant data and thus should not be requested. Sending all of the associated data blocks will not affect the quality of the progressive rendering. However, in many cases transmitting the last of data blocks associated with high precision is unnecessary since the last blocks will be visually insignificant. In such a case, the user will notice that the transmission of the ROI from the server is still in progress, yet the progressive rendering of the ROI seems to no longer change the displayed image. </paragraph>
<paragraph id="P-0235" lvl="0"><number>&lsqb;0235&rsqb;</number> This difficulty is further explained by the following examples: </paragraph>
<paragraph id="P-0236" lvl="0"><number>&lsqb;0236&rsqb;</number> In the first example, let us assume that the ROI is a low resolution rendering of the full image at the resolution n. Thus, all the subband coefficients at the subband resolutions 1&lE;j&lE;n participate in the IWT of the ROI. However, only the very large coefficients of these sub-bands are visually significant for a rendering of this ROI, even at very high qualities. Also these large coefficients are only required at a very low precision. Thus, it is advisable to request from the server only the first few data blocks associated with each subband tile at resolutions &lE;n since they correspond to the highest bit planes. </paragraph>
<paragraph id="P-0237" lvl="0"><number>&lsqb;0237&rsqb;</number> In the second example, let us assume that the ROI is at the highest resolution of the image. Usually this would mean that for any subband tile participating in the reconstruction of the ROI all of the associated data blocks should be requested, such that the rendering will be of a very high (or even lossless) quality. But if the parameter deviceDepth listed in Table 4 is set at low resolution (indicating that the viewing device is of low resolution) or the parameter viewQuality is set at low quality (indicating that the user is currently not interested in high quality rendering), the last data blocks of each subband tile corresponding to high precision need not be ordered. </paragraph>
<paragraph id="P-0238" lvl="0"><number>&lsqb;0238&rsqb;</number> A method to determine which of the first data blocks are required is as follows. First, for each subband tile (t_x ,t_y, t_z, t_resolution) participating in the reconstruction of the ROI, initialize the set of requested data blocks to the &ldquo;maximal&rdquo; set </paragraph>
<paragraph lvl="0"><in-line-formula>(t_x,t_y,t_z,t_resolution, t_bitPlane) </in-line-formula></paragraph>
<paragraph lvl="0"><in-line-formula>minRequestPlane&lE;t_bitPlane&lE;maxBitPlane(t_resolution) </in-line-formula></paragraph>
<paragraph id="P-0239" lvl="7"><number>&lsqb;0239&rsqb;</number> with minRequestPlane&equals;0. Recall that at this point the client does not know the amount of data that each absent data block contains. In many cases requested data blocks will turn out to be empty. Second, remove from the data set all the data blocks </paragraph>
<paragraph lvl="0"><in-line-formula>(t_x, t_y, t_z, t_resolution, t_bitPlane) </in-line-formula></paragraph>
<paragraph id="P-0240" lvl="7"><number>&lsqb;0240&rsqb;</number> such that t_bitPlane&lE;numberOfResolution&minus;dyadicResolution(ROI). That is one data block/bit plane for each lower resolution. </paragraph>
<paragraph id="P-0241" lvl="0"><number>&lsqb;0241&rsqb;</number> Third, update minRequestPlane accordingly. This rule, that the lower the resolution the less precision is required, originates from the way subband coefficients are scaled according to their resolution. Fourth, wenever deviceDepth&equals;8, the output device is of low resolution. In such a case the client can request less precision. Decrement one bit plane and set </paragraph>
<paragraph lvl="0"><in-line-formula>minRequestPlane&equals;min(maxBitPlane(t_resolution),minRequestPlane&plus;1). </in-line-formula></paragraph>
<paragraph id="P-0242" lvl="7"><number>&lsqb;0242&rsqb;</number> Fifth, if viewQuality is set at a lower viewing quality, further remove high precision data blocks from the set. Again, the rule is a removal of one bit plane per lower quality. </paragraph>
<paragraph id="P-0243" lvl="0"><number>&lsqb;0243&rsqb;</number> Last, and according to the description herein above in reference to <cross-reference target="DRAWINGS">FIG. 18</cross-reference>, additionally reduce or add the number  
<math-cwu id="MATH-US-00026">
<number>26</number>
<math>
<mrow>
  <mo>&LeftFloor;</mo>
  <mrow>
    <msub>
      <mi>log</mi>
      <mn>2</mn>
    </msub>
    <mo>&it;</mo>
    <mrow>
      <mo>(</mo>
      <mfrac>
        <mn>1</mn>
        <mi>Maximal_derivative</mi>
      </mfrac>
      <mo>)</mo>
    </mrow>
  </mrow>
  <mo>&RightFloor;</mo>
</mrow>
</math>
<mathematica-file id="MATHEMATICA-00026" file="US20030005140A1-20030102-M00026.NB"/>
<image id="EMI-M00026" wi="216.027" he="18.96615" file="US20030005140A1-20030102-M00026.TIF" imf="TIFF" ti="MF"/>
</math-cwu>
</paragraph>
<paragraph id="P-0244" lvl="7"><number>&lsqb;0244&rsqb;</number> of bit planes from the request list. </paragraph>
<paragraph id="P-0245" lvl="0"><number>&lsqb;0245&rsqb;</number> This last step in the process is further explained via the following examples. </paragraph>
<paragraph id="P-0246" lvl="0"><number>&lsqb;0246&rsqb;</number> In the first example there is given an image depth of 12 bit, a screen depth of 8 bit and a linear luminance mapping, calculate Maximal_derivative  
<math-cwu id="MATH-US-00027">
<number>27</number>
<math>
<mrow>
  <mi>Maximal_derivative</mi>
  <mo>=</mo>
  <mrow>
    <mfrac>
      <msup>
        <mn>2</mn>
        <mn>8</mn>
      </msup>
      <msup>
        <mn>2</mn>
        <mn>12</mn>
      </msup>
    </mfrac>
    <mo>=</mo>
    <msup>
      <mn>2</mn>
      <mrow>
        <mo>-</mo>
        <mn>4</mn>
      </mrow>
    </msup>
  </mrow>
</mrow>
</math>
<mathematica-file id="MATHEMATICA-00027" file="US20030005140A1-20030102-M00027.NB"/>
<image id="EMI-M00027" wi="216.027" he="18.96615" file="US20030005140A1-20030102-M00027.TIF" imf="TIFF" ti="MF"/>
</math-cwu>
</paragraph>
<paragraph id="P-0247" lvl="7"><number>&lsqb;0247&rsqb;</number> and so the number of additionally reduced from the request list bit planes becomes  
<math-cwu id="MATH-US-00028">
<number>28</number>
<math>
<mrow>
  <mrow>
    <mo>&LeftFloor;</mo>
    <mrow>
      <msub>
        <mi>log</mi>
        <mn>2</mn>
      </msub>
      <mo>&it;</mo>
      <mrow>
        <mo>(</mo>
        <mfrac>
          <mn>1</mn>
          <mi>Maximal_derivative</mi>
        </mfrac>
        <mo>)</mo>
      </mrow>
    </mrow>
    <mo>&RightFloor;</mo>
  </mrow>
  <mo>=</mo>
  <mrow>
    <mrow>
      <mo>&LeftFloor;</mo>
      <mrow>
        <msub>
          <mi>log</mi>
          <mn>2</mn>
        </msub>
        <mo>&it;</mo>
        <mrow>
          <mo>(</mo>
          <mfrac>
            <mn>1</mn>
            <msup>
              <mn>2</mn>
              <mrow>
                <mo>-</mo>
                <mn>4</mn>
              </mrow>
            </msup>
          </mfrac>
          <mo>)</mo>
        </mrow>
      </mrow>
      <mo>&RightFloor;</mo>
    </mrow>
    <mo>=</mo>
    <mn>4</mn>
  </mrow>
</mrow>
</math>
<mathematica-file id="MATHEMATICA-00028" file="US20030005140A1-20030102-M00028.NB"/>
<image id="EMI-M00028" wi="216.027" he="18.96615" file="US20030005140A1-20030102-M00028.TIF" imf="TIFF" ti="MF"/>
</math-cwu>
</paragraph>
<paragraph id="P-0248" lvl="0"><number>&lsqb;0248&rsqb;</number> In the second example there is given a luminance mapping with Maximal_derivative&equals;2, the number of bit planes reduced from the request list is:  
<math-cwu id="MATH-US-00029">
<number>29</number>
<math>
<mrow>
  <mrow>
    <mo>&LeftFloor;</mo>
    <mrow>
      <msub>
        <mi>log</mi>
        <mn>2</mn>
      </msub>
      <mo>&it;</mo>
      <mrow>
        <mo>(</mo>
        <mfrac>
          <mn>1</mn>
          <mi>Maximal_derivative</mi>
        </mfrac>
        <mo>)</mo>
      </mrow>
    </mrow>
    <mo>&RightFloor;</mo>
  </mrow>
  <mo>=</mo>
  <mrow>
    <mrow>
      <mo>&LeftFloor;</mo>
      <mrow>
        <msub>
          <mi>log</mi>
          <mn>2</mn>
        </msub>
        <mo>&it;</mo>
        <mrow>
          <mo>(</mo>
          <mfrac>
            <mn>1</mn>
            <mn>2</mn>
          </mfrac>
          <mo>)</mo>
        </mrow>
      </mrow>
      <mo>&RightFloor;</mo>
    </mrow>
    <mo>=</mo>
    <mrow>
      <mo>-</mo>
      <mn>1</mn>
    </mrow>
  </mrow>
</mrow>
</math>
<mathematica-file id="MATHEMATICA-00029" file="US20030005140A1-20030102-M00029.NB"/>
<image id="EMI-M00029" wi="216.027" he="18.96615" file="US20030005140A1-20030102-M00029.TIF" imf="TIFF" ti="MF"/>
</math-cwu>
</paragraph>
<paragraph id="P-0249" lvl="7"><number>&lsqb;0249&rsqb;</number> Thus one bit plane is added to the original set. </paragraph>
<paragraph id="P-0250" lvl="0"><number>&lsqb;0250&rsqb;</number> In step <highlight><bold>1703</bold></highlight> in <cross-reference target="DRAWINGS">FIG. 17</cross-reference>, the client imaging module encodes the request list into a request stream which is sent to the server computer <highlight><bold>120</bold></highlight> via the media <highlight><bold>130</bold></highlight> (see <cross-reference target="DRAWINGS">FIG. 1</cross-reference>). The request list encoding algorithm is a &ldquo;cube based&rdquo; procedure. The heuristics of the algorithm is that the requested data block usually can be grouped into data block &ldquo;cubes&rdquo;. From the request list of data blocks indexed as in Eq.2 the encoding algorithm computes structures of the type presented in Eq.11. </paragraph>
<paragraph lvl="0"><in-line-formula>struct&equals;&lcub;(t_x,t_y,t_z,t_resolution,t_bitPlane),n<highlight><subscript>x</subscript></highlight>,n<highlight><subscript>y</subscript></highlight>,n<highlight><subscript>z</subscript></highlight>&rcub;, n<highlight><subscript>x</subscript></highlight>,n<highlight><subscript>y</subscript></highlight>,n<highlight><subscript>z</subscript></highlight>&gE;1 &emsp;&emsp;(Eq.11) </in-line-formula></paragraph>
<paragraph id="P-0251" lvl="7"><number>&lsqb;0251&rsqb;</number> Each such structure represents the n<highlight><subscript>x</subscript></highlight>&times;n<highlight><subscript>y</subscript></highlight>&times;n<highlight><subscript>z </subscript></highlight>data blocks </paragraph>
<paragraph lvl="0"><in-line-formula>&lcub;(t_x&plus;i,t_y&plus;j,t_z&plus;k,t_resolution,t_bitPlane)&rcub;, 0&lE;i&lt;n<highlight><subscript>x</subscript></highlight>, 0&lE;j&lt;n<highlight><subscript>y</subscript></highlight>,0&lE;k&lt;n<highlight><subscript>z </subscript></highlight></in-line-formula></paragraph>
<paragraph id="P-0252" lvl="0"><number>&lsqb;0252&rsqb;</number> The encoding algorithm attempts to create the shortest possible list of structures of the type defined by Eq.11, which can be done by collecting the data blocks to the largest possible cubes. It is important to note that the algorithm ensures the order of data blocks in the request list is not changed, since the server will respond to the request stream by transmitting data blocks in the order in which they were requested. This is particularly preferable when a user switches to another subsequent group of 3-D image slices that has not been viewed before. In such a case the request list might be composed of hundreds of requested data blocks, but they will be collected to one (x,y,z) cube as defined by Eq.11 for each pair (t_resolution, t_bitplane). </paragraph>
<paragraph id="P-0253" lvl="0"><number>&lsqb;0253&rsqb;</number> In step <highlight><bold>1704</bold></highlight> in <cross-reference target="DRAWINGS">FIG. 17</cross-reference> the client computer <highlight><bold>110</bold></highlight>, upon receiving from the server an encoded stream containing data blocks, decodes the stream and inserts the data blocks into their appropriate location in the distributed database using their ID as a key. The decoding algorithm performed in this event is a reversed step of the encoding process described in reference to step <highlight><bold>1703</bold></highlight>. Since the client computer <highlight><bold>110</bold></highlight> is aware of the order of the data blocks in the encoded stream, only the size of each data block need be reported along with the actual data. In case that the server informs of an empty data block, the receiving module marks the appropriate slot in the database as existing but empty. </paragraph>
<paragraph id="P-0254" lvl="0"><number>&lsqb;0254&rsqb;</number> Recall that the first four of the five coordinates of a data block (t_x,t_y,t_z,t_resolution,t_bitPlane) denote the subband tile, associated with each data block. From the subband tile&apos;s coordinates we calculate the dimensions of the &ldquo;area of visual significance.&rdquo; That is, the portion of the ROI that is affected by the subband tile. </paragraph>
<paragraph id="P-0255" lvl="0"><number>&lsqb;0255&rsqb;</number> Assuming that each subband tile is of size tileLength&times;tileLength&times;tileHeight and that the wavelet basis used has a maximal filter size maxFilterSizeXY in X and Y directions and maxFilterSizeZ in Z direction, then defining hFilterSize&equals;&boxdr;maxFilterSize/2&boxdl; and factorXY and factorZ&mdash;numbers of HHX-Subbands and XXH-Subbands type decompositions respectively that were performed on the 3-D image from the resolution t_resolution till the lowest resolution, we have that the dimensions of the affected region of the ROI (in the original image&apos;s coordinate system) are  
<math-cwu id="MATH-US-00030">
<number>30</number>
<math>
<mrow>
  <mrow>
    <mo>[</mo>
    <mrow>
      <mrow>
        <mrow>
          <mi>t_x</mi>
          <mo>&times;</mo>
          <msup>
            <mi>tileLength</mi>
            <mi>factorXY</mi>
          </msup>
        </mrow>
        <mo>-</mo>
        <msup>
          <mi>hFilterSizeXY</mi>
          <mi>factorXY</mi>
        </msup>
      </mrow>
      <mo>,</mo>
      <mrow>
        <mrow>
          <mrow>
            <mo>(</mo>
            <mrow>
              <mi>t_x</mi>
              <mo>+</mo>
              <mn>1</mn>
            </mrow>
            <mo>)</mo>
          </mrow>
          <mo>&times;</mo>
          <msup>
            <mi>tileLength</mi>
            <mi>factorXY</mi>
          </msup>
        </mrow>
        <mo>+</mo>
        <msup>
          <mi>hFilterSizeXY</mi>
          <mi>factorXY</mi>
        </msup>
      </mrow>
    </mrow>
    <mo>]</mo>
  </mrow>
  <mo>&times;</mo>
  <mrow>
    <mo>[</mo>
    <mstyle>
      <mtext>&emsp;</mtext>
    </mstyle>
    <mo>&it;</mo>
    <mrow>
      <mrow>
        <mrow>
          <mi>t_y</mi>
          <mo>&times;</mo>
          <msup>
            <mi>tileLength</mi>
            <mi>factorXY</mi>
          </msup>
        </mrow>
        <mo>-</mo>
        <msup>
          <mi>hFilterSizeXY</mi>
          <mi>factorXY</mi>
        </msup>
      </mrow>
      <mo>,</mo>
      <mrow>
        <mrow>
          <mrow>
            <mo>(</mo>
            <mrow>
              <mi>t_y</mi>
              <mo>+</mo>
              <mn>1</mn>
            </mrow>
            <mo>)</mo>
          </mrow>
          <mo>&times;</mo>
          <msup>
            <mi>tileLength</mi>
            <mi>factorXY</mi>
          </msup>
        </mrow>
        <mo>+</mo>
        <msup>
          <mi>hFilterSizeXY</mi>
          <mi>factorXY</mi>
        </msup>
      </mrow>
    </mrow>
    <mo>]</mo>
  </mrow>
  <mo>&times;</mo>
  <mrow>
    <mo>[</mo>
    <mstyle>
      <mtext>&emsp;</mtext>
    </mstyle>
    <mo>&it;</mo>
    <mrow>
      <mrow>
        <mrow>
          <mi>t_z</mi>
          <mo>&times;</mo>
          <msup>
            <mi>tileHeight</mi>
            <mi>factorZ</mi>
          </msup>
        </mrow>
        <mo>-</mo>
        <msup>
          <mi>hFilterSizeZ</mi>
          <mi>factorZ</mi>
        </msup>
      </mrow>
      <mo>,</mo>
      <mrow>
        <mrow>
          <mrow>
            <mo>(</mo>
            <mrow>
              <mi>t_z</mi>
              <mo>+</mo>
              <mn>1</mn>
            </mrow>
            <mo>)</mo>
          </mrow>
          <mo>&times;</mo>
          <msup>
            <mi>tileHeight</mi>
            <mi>factorZ</mi>
          </msup>
        </mrow>
        <mo>+</mo>
        <msup>
          <mi>hFilterSizeZ</mi>
          <mi>factorZ</mi>
        </msup>
      </mrow>
    </mrow>
    <mo>]</mo>
  </mrow>
</mrow>
</math>
<mathematica-file id="MATHEMATICA-00030" file="US20030005140A1-20030102-M00030.NB"/>
<image id="EMI-M00030" wi="216.027" he="60.98085" file="US20030005140A1-20030102-M00030.TIF" imf="TIFF" ti="MF"/>
</math-cwu>
</paragraph>
<paragraph id="P-0256" lvl="7"><number>&lsqb;0256&rsqb;</number> These dimensions are merged into the next rendering operation&apos;s region. The rendering region is used to efficiently render only the &ldquo;updated&rdquo; portion of the ROI. </paragraph>
<paragraph id="P-0257" lvl="0"><number>&lsqb;0257&rsqb;</number> Discussion now continues with the description of step <highlight><bold>1705</bold></highlight> in <cross-reference target="DRAWINGS">FIG. 17</cross-reference>, the step of progressive rendering. During the transmission of ROI data from the server to the client, the client performs rendering operations of the ROI. To ensure that these rendering tasks do not interrupt the transfer, the client runs two program threads: communications and rendering. The rendering thread runs in the background and draws into a pre-allocated &ldquo;off-screen&rdquo; buffer. Only then does the client use device and system dependant tools to output the visual information from the &ldquo;off-screen&rdquo; to the rendering device such as the screen or printer. </paragraph>
<paragraph id="P-0258" lvl="0"><number>&lsqb;0258&rsqb;</number> The rendering algorithm performs reconstruction of the ROI at the highest possible quality based on the available data at the client. That is data that were previously cached or data that recently arrived from the server. For efficiency, the progressive rendering is performed only for the portion of the ROI that is affected by newly arrived data. Specifically, data that arrived after the previous rendering task began. This updated region is obtained using the method of step <highlight><bold>1704</bold></highlight> described herein above. </paragraph>
<paragraph id="P-0259" lvl="0"><number>&lsqb;0259&rsqb;</number> The parameters of the rendering algorithm are composed of two sets as follows. The first set comprises ROI parameters as listed in Table 4 herein above. The second set comprises parameters transmitted from the server as listed in Table 6 herein below, with the exception of one parameter, the jumpsize parameter, which is a parameter particular to the server. </paragraph>
<paragraph id="P-0260" lvl="0"><number>&lsqb;0260&rsqb;</number> The rendering algorithm computes pixels at the dyadic resolution dyadicResolution(ROI). Recall that this is the lowest possible dyadic resolution, which is higher than the resolution of the ROI. The obtained image is then resized to the correct resolution and mapped to the depth of output device. </paragraph>
<paragraph id="P-0261" lvl="0"><number>&lsqb;0261&rsqb;</number> Discussion of the rendering rate now follows. As ROI data is transmitted to the client, the rendering algorithm is performed at certain time intervals of a few seconds. At each point in time, only one rendering task is performed for any given displayed image. To ensure that progressive rendering does not become a bottleneck, two rates are measured: the data block transfer rate and the ROI rendering speed. If it is predicted that the transfer will be finished before a rendering task, a small delay is inserted, such that rendering will be performed after all the data arrives. Therefore, in a slow network scenario (as the Internet often is), for almost the entire progressive rendering tasks, no delay is inserted. With the arrival of every few kilobytes of data, containing the information of a few data blocks, a rendering task visualizes the ROI at the best possible quality. In such a case the user is aware that the bottleneck of the ROI rendering is the slow network and has the option to accept the current rendering as a good enough approximation of the image and not wait for all the data to arrive. </paragraph>
<paragraph id="P-0262" lvl="0"><number>&lsqb;0262&rsqb;</number> The following is a discussion of the memory requirements of a subband data structure, and of the allocation and initialization of this memory in reference to <cross-reference target="DRAWINGS">FIG. 20</cross-reference>. This data-structure is required to efficiently store subband coefficients, in memory, during the rendering algorithm. This is required since the coefficients are represented in long integer (lossless coding mode) or floating-point (lossy coding mode) precision, which typically require more memory than a pixel representation (1 or 2 bytes). In a lossy mode the coefficients at the client side are represented using floating-point representation, even if they were computed at the server side using an integer implementation to minimize round-off errors. </paragraph>
<paragraph id="P-0263" lvl="0"><number>&lsqb;0263&rsqb;</number> The rendering algorithm begins with initializing coefficient and pixel memory 3-D matrices. Let us denote by dyadicWidth(ROI) the width of the XY projection of the ROI onto the resolution dyadicResolution(ROI) and height(ROI) the number of slices in the ROI. For each component two 3-D matrices of coefficients are allocated with dimensions </paragraph>
<paragraph lvl="0"><in-line-formula>dyadicWidth(ROI)&times;dyadicWidth(ROI)&times;height(ROI) </in-line-formula></paragraph>
<paragraph id="P-0264" lvl="7"><number>&lsqb;0264&rsqb;</number> For a lossless case two additional matrices with dimensions </paragraph>
<paragraph lvl="0"><in-line-formula>sliceWidth&times;sliceWidth&times;tileHeight </in-line-formula></paragraph>
<paragraph id="P-0265" lvl="7"><number>&lsqb;0265&rsqb;</number> are allocated for half bit planes of XY and Z transforms as described herein above in reference to <cross-reference target="DRAWINGS">FIG. 8</cross-reference>. The size of these allocations is limited by the resolution of the output device and not by the original 3-D data, leading to the memory-constrained data structure. </paragraph>
<paragraph id="P-0266" lvl="0"><number>&lsqb;0266&rsqb;</number> Beginning with the lowest resolution of 1, the algorithm executes a multi-resolution march from the first to the last tile of the ROI in Z direction. The pseudo-code for this recursive march is given in <cross-reference target="DRAWINGS">FIG. 20</cross-reference>. First the allocated matrix is filled with sub-tiles of coefficients calculated on the lower resolution, giving low pass subbands of the current resolution. Then the matrix is complemented by the high pass subbands (wavelet) coefficients, decoded from the database or read from the memory cache as described herein below in reference to <cross-reference target="DRAWINGS">FIG. 21</cross-reference>. An inverse subband transform described herein below in reference to <cross-reference target="DRAWINGS">FIG. 3</cross-reference> produces multiresolution pixels. Each time the highest resolution DyadicResolution(ROI) is reconstructed, it is supplied as input to the resizing and luminance mapping step. </paragraph>
<paragraph id="P-0267" lvl="0"><number>&lsqb;0267&rsqb;</number> The subband coefficients data structure described in herein above in reference to <cross-reference target="DRAWINGS">FIG. 20</cross-reference> is filled on a tile basis. Each such subband tile is obtained either by decoding the corresponding data blocks stored in the database or by reading from the memory cache. The memory cache is used to store coefficients in a simple encoded format. The motivation for its use is as follows. The decoding algorithm described herein above in reference to Table 3 is computationally intensive and thus should be avoided whenever possible. To this end the rendering module uses a memory cache where subband coefficient are stored in a relatively simple encoded format, which decodes relatively fast. For each required subband tile the following extraction procedure is performed, as depicted in <cross-reference target="DRAWINGS">FIG. 21</cross-reference>. If no data blocks are available in the database for the subband tile ( step <highlight><bold>2130</bold></highlight>), its coefficients are set to zero (step <highlight><bold>2140</bold></highlight>). If the tile&apos;s memory cache storage is updated (step <highlight><bold>2150</bold></highlight>), in other words if it stores coefficients in the same precision as in the database, then the coefficients can be efficiently read from there (step <highlight><bold>2160</bold></highlight>). The last possibility is that the database holds the subband tile in higher precision. Then, the tile is decoded (step <highlight><bold>2170</bold></highlight>) down to the lowest available bit plane using the decoding algorithm described herein above in reference to Table 3, and the cached representation is replaced (step <highlight><bold>2180</bold></highlight>) with a representation of this higher precision information. </paragraph>
<paragraph id="P-0268" lvl="0"><number>&lsqb;0268&rsqb;</number> The inverse subband transform is an inverse step to step <highlight><bold>2302</bold></highlight> performed in the server as described herein below in reference to <cross-reference target="DRAWINGS">FIG. 23</cross-reference>. Following <cross-reference target="DRAWINGS">FIG. 3</cross-reference>, we see that eight combined tiles of total size </paragraph>
<paragraph lvl="0"><in-line-formula>&lsqb;nTileX(j)&times;tileLength, nTileY(j)&times;tileLength, tileHeight&rsqb;</in-line-formula></paragraph>
<paragraph id="P-0269" lvl="7"><number>&lsqb;0269&rsqb;</number> at the resolution j are transformed to a sequence of tileHeight frames at the next higher resolution using subbandtransformType(j) . If j&plus;1&lt;dyadicResolution(ROI), the pixels obtained by this step are inserted into the corresponding place of allocated memory at the resolution j&plus;1. If j&plus;1&equals;dyadicResolution(ROI), the pixels are processed by the next step of image resize and luminance mapping. </paragraph>
<paragraph id="P-0270" lvl="0"><number>&lsqb;0270&rsqb;</number> In case that the resolution of the ROI is not an exact dyadic resolution, the image obtained by the previous step must be re-sized to this resolution. This can be done using operating system imaging functionality. In most cases the operating system&apos;s implementation is sub-sampling which in many cases produces an aliasing effect, which is not visually pleasing. To provide higher visual quality, the imaging system uses the method of linear interpolation. The output of the interpolation is written to an &ldquo;off-screen&rdquo; buffer. From there it is displayed on the screen using system device dependant methods. When luminanceMap is active, mapping to 8-bit screen is performed using the mapping function described in reference to <cross-reference target="DRAWINGS">FIG. 18</cross-reference>. </paragraph>
<paragraph id="P-0271" lvl="0"><number>&lsqb;0271&rsqb;</number> The operation of the server computer <highlight><bold>120</bold></highlight> in <cross-reference target="DRAWINGS">FIG. 1</cross-reference> will now be described with reference to <cross-reference target="DRAWINGS">FIG. 22</cross-reference>. Initially, an uncompressed digital 3-D image is stored in, for example, storage <highlight><bold>122</bold></highlight> of the server computer <highlight><bold>120</bold></highlight>. This uncompressed digital 3-D image may be a sequence of two-dimensional images, stored with a selected resolution and depth. For example, in the medical field, each of these the uncompressed digital image may be contained in a DICOM file. </paragraph>
<paragraph id="P-0272" lvl="0"><number>&lsqb;0272&rsqb;</number> Once the client computer <highlight><bold>110</bold></highlight> requests to view or print a certain 3-D image, the server computer <highlight><bold>120</bold></highlight> performs preprocessing (step <highlight><bold>2201</bold></highlight>). This step is a computation done on data read from the original digital 3-D image. The results of the computation are stored in the server cache device <highlight><bold>121</bold></highlight>. After this fast computation a &ldquo;ready to serve&rdquo; message is sent from the server to the client containing basic information on the image. </paragraph>
<paragraph id="P-0273" lvl="0"><number>&lsqb;0273&rsqb;</number> In step <highlight><bold>2202</bold></highlight>, the server receives an encoded stream of requests for data blocks associated with a ROI that needs to be rendered at the client. The server then decodes the request stream and extracts the request list. </paragraph>
<paragraph id="P-0274" lvl="0"><number>&lsqb;0274&rsqb;</number> In step <highlight><bold>2203</bold></highlight>, the server reads from cache or encodes data block associated with low-resolution portions of the ROI, using the cached result of the preprocessing Step <highlight><bold>2201</bold></highlight>. </paragraph>
<paragraph id="P-0275" lvl="0"><number>&lsqb;0275&rsqb;</number> If the ROI is a high-resolution portion of the image, the server (step <highlight><bold>2204</bold></highlight>) either reads from cache or performs a local and efficient version of the preprocessing step <highlight><bold>2201</bold></highlight>. Specifically, a local portion of the uncompressed 3-D image volume, associated with the ROI, is read from the storage <highlight><bold>122</bold></highlight>, processed and encoded. In step <highlight><bold>2205</bold></highlight>, the data that was encoded in step <highlight><bold>2203</bold></highlight> and step <highlight><bold>2204</bold></highlight> is progressively sent to the client in the order it was requested. </paragraph>
<paragraph id="P-0276" lvl="0"><number>&lsqb;0276&rsqb;</number> The preprocessing step <highlight><bold>2201</bold></highlight> is now described in further detail with reference to <cross-reference target="DRAWINGS">FIG. 23</cross-reference>. The goal of the preprocessing algorithm is to provide the fastest response to the user&apos;s request to interact with the 3-D image. Once this fast computational step is performed, the server is able to provide efficient transmission of any client ROI requests that will follow. In most cases, regarding medical applications, the first ROI is a view of several 2-D slices of the 3-D image volume at low resolution (thumbnails). The preprocessing algorithm begins with a request for an uncompressed image that has not been processed before or that has been processed but the result of this previous computation has been deleted from the cache. As explained, this unique algorithm is preferable over the simpler procedure of encoding the full image into some progressive format. This latter technique provides a significantly slower response to the user&apos;s initial request then the technique described below provided by the present invention. At the end of the algorithm a &ldquo;ready to serve ROI &rdquo; message is sent to the client containing basic information on the 3-D image. While some of this information, 3-D image dimensions, original color space, resolution etc., is available to the user of the client computer, most of this information is &ldquo;internal&rdquo; and required by the client to formulate ROI request lists (step <highlight><bold>1702</bold></highlight>) and progressively render (step <highlight><bold>1705</bold></highlight>). A detailed description of the preprocessing algorithm now follows.  
<table-cwu id="TABLE-US-00008">
<number>8</number>
<table frame="none" colsep="0" rowsep="0" pgwide="1">
<tgroup align="left" colsep="0" rowsep="0" cols="1">
<colspec colname="1" colwidth="266PT" align="center"/>
<thead>
<row>
<entry namest="1" nameend="1" align="center">TABLE 6</entry>
</row>
</thead>
<tbody valign="top">
<row>
<entry></entry>
</row>
<row><entry namest="1" nameend="1" align="center" rowsep="1"></entry>
</row>
<row>
<entry>Preprocessing Parameters</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="1" colwidth="84PT" align="left"/>
<colspec colname="2" colwidth="182PT" align="left"/>
<tbody valign="top">
<row>
<entry>Variable</entry>
<entry>Meaning</entry>
</row>
<row><entry namest="1" nameend="2" align="center" rowsep="1"></entry>
</row>
<row>
<entry>LosslessMode</entry>
<entry>If true, preprocessing will prepare data that can be used for</entry>
</row>
<row>
<entry></entry>
<entry>lossless transmission.</entry>
</row>
<row>
<entry>SubbandTransform Type(j)</entry>
<entry>The framework allows to select a different subband</entry>
</row>
<row>
<entry></entry>
<entry>transform for each resolution of the 3D image. The technical</entry>
</row>
<row>
<entry></entry>
<entry>term is: non-stationary transforms.</entry>
</row>
<row>
<entry>Decomposition Type(j)</entry>
<entry>The type of decomposition (HHX-Subbands, XHH-Subbands,</entry>
</row>
<row>
<entry></entry>
<entry>or All-Subbands, see &sect;4) that was used on the resolution</entry>
</row>
<row>
<entry></entry>
<entry>number j.</entry>
</row>
<row>
<entry>NumberOfResolutions</entry>
<entry>The number of resolutions in the Multiresolution structure</entry>
</row>
<row>
<entry></entry>
<entry>calculated for the image.</entry>
</row>
<row>
<entry>JumpSize</entry>
<entry>A number in the range &lsqb;0, numberOfResolutions - 1&rsqb;. The</entry>
</row>
<row>
<entry></entry>
<entry>preprocessing stage computes only the top lower part of the</entry>
</row>
<row>
<entry></entry>
<entry>image&apos;s multiresolution pyramid of the size</entry>
</row>
<row>
<entry></entry>
<entry>numberOfResolutions -jumpSize.</entry>
</row>
<row>
<entry>TileLength</entry>
<entry>Size of 3D tile in x and y direction. Typically &equals; 64 as</entry>
</row>
<row>
<entry></entry>
<entry>tradeoff between time and coding performance.</entry>
</row>
<row>
<entry>TileHeight</entry>
<entry>Size of 3D tile in z direction. Typically &equals; 2 for the better time</entry>
</row>
<row>
<entry></entry>
<entry>performance.</entry>
</row>
<row>
<entry>NTilesX(j)</entry>
<entry>Number of subband tiles in the x direction at the resolution j</entry>
</row>
<row>
<entry>NTilesY(j)</entry>
<entry>Number of subband tiles in the y direction at the resolution j</entry>
</row>
<row>
<entry>NTilesZ(j)</entry>
<entry>Number of subband tiles in the z direction at the resolution j</entry>
</row>
<row>
<entry>Threshold(j)</entry>
<entry>A matrix of values used in lossy compression. The subband</entry>
</row>
<row>
<entry></entry>
<entry>coefficients at the resolution j with absolute value below</entry>
</row>
<row>
<entry></entry>
<entry>threshold(j) are considered as (visually) insignificant and set</entry>
</row>
<row>
<entry></entry>
<entry>to zero.</entry>
</row>
<row><entry namest="1" nameend="2" align="center" rowsep="1"></entry>
</row>
</tbody>
</tgroup>
</table>
</table-cwu>
</paragraph>
<paragraph id="P-0277" lvl="0"><number>&lsqb;0277&rsqb;</number> Given an input image, the parameters described in Table 6 above are either computed or chosen. These parameters are also written into a header sent to the client and are used during the progressive rendering step <highlight><bold>1705</bold></highlight>. The most important parameters to select are the following: </paragraph>
<paragraph id="P-0278" lvl="0"><number>&lsqb;0278&rsqb;</number> The losslessMode is a mode in which progressive transmission of images takes place until lossless quality is obtained. Choosing this mode requires the preprocessing algorithm to use certain reversible wavelet transforms and may slow down the algorithm. </paragraph>
<paragraph id="P-0279" lvl="0"><number>&lsqb;0279&rsqb;</number> The subbandTransformType(j) parameters are used for the (dynamic) selection of wavelet basis that is crucial to the performance of the imaging system. The selection can be non-stationary, meaning a different transform for each resolution j. The selection is derived from the following considerations. </paragraph>
<paragraph id="P-0280" lvl="0"><number>&lsqb;0280&rsqb;</number> The first consideration is of coding performance (in a rate/distortion sense). This is obviously required from any subband/wavelet transform. </paragraph>
<paragraph id="P-0281" lvl="0"><number>&lsqb;0281&rsqb;</number> The second consideration is of an approximation of ideal low pass. It is preferred to choose a transform such that low resolutions of the image will be of high visual quality. Some filters produce poor quality low resolutions even before any compression takes place. </paragraph>
<paragraph id="P-0282" lvl="0"><number>&lsqb;0282&rsqb;</number> The third consideration is of fast transform implementation. The associated fast transform must be implemented using fast operations such as lifting steps, or integer shifts and additions, etc. Some good examples are the Haar and CDF transforms (1,3), (2,2). </paragraph>
<paragraph id="P-0283" lvl="0"><number>&lsqb;0283&rsqb;</number> The fourth consideration is of fast low pass implementation. This is a very important parameter, since together with the parameter named jumpSize herein, it determines almost all of the complexity of the algorithm. For example, the CDF (1,3) is in this respect the &ldquo;optimal&rdquo; transform with three vanishing moments. Since the dual scaling function is the simple B-spline of order 1, its low pass is simple averaging. Thus, the sequence of CDF transforms, using the B-spline of order 1 as the dual scaling function, but with wavelets with increasing number of vanishing moments are in some sense &ldquo;optimal&rdquo; in our system. They provide a framework for both real time response and good coding efficiency. </paragraph>
<paragraph id="P-0284" lvl="0"><number>&lsqb;0284&rsqb;</number> The fifth consideration is the existence of a lossless mode. If the losslessMode parameter is true, filters must belong to a subclass of reversible transforms. </paragraph>
<paragraph id="P-0285" lvl="0"><number>&lsqb;0285&rsqb;</number> The sixth consideration is of low system I/O. If the network <highlight><bold>157</bold></highlight> depicted in <cross-reference target="DRAWINGS">FIG. 1</cross-reference> connecting between the image residing on the storage <highlight><bold>122</bold></highlight> and the imaging server <highlight><bold>120</bold></highlight> is slow, the bottleneck of the preprocessing stage (and the whole imaging system for that fact) might be simply the reading of the original image. In such a case we may choose a transform with a &ldquo;lazy&rdquo; sub-sampling low pass filter that corresponds to efficient selective reading of the input image. Many interpolating subband transforms with increasing number of vanishing moments can be selected to suit this requirement. However, this choice should be avoided whenever possible, since it conflicts with the first and second considerations. </paragraph>
<paragraph id="P-0286" lvl="0"><number>&lsqb;0286&rsqb;</number> The decompositionType(j) parameters control the type of multi-resolution decomposition performed on each resolution j. These parameters together with the parameter namedjumpSize give us the opportunity to achieve quick response to the first view of the 3-D image. For example in medical applications the common first view is the group of several subsequent 2-D slices of the 3-D image volume at thumbnail resolution. For this case it is preferred to perform several XXH-Subbands type decomposition on the original image up to the thumbnail resolution, and then to perform decompositions of HHX-Subbands type as described herein above in reference to <cross-reference target="DRAWINGS">FIG. 4</cross-reference>. </paragraph>
<paragraph id="P-0287" lvl="0"><number>&lsqb;0287&rsqb;</number> The parameter named jumpSize controls the tradeoff between fast response to the user&apos;s initial request for interaction with the image and response times to subsequent ROI requests. WhenjumpSize is large, the initial response is faster, but each computation of a region of interest with higher resolution than the jump might require processing of a large portion of the original image. </paragraph>
<paragraph id="P-0288" lvl="0"><number>&lsqb;0288&rsqb;</number> The threshold(j) parameters control the visual quality in the case of lossy compression. The smaller the thresholds, the higher the visual quality is. Naturally, the tradeoff is quality for bit-rate. A suitable choice for &ldquo;visually lossless&rdquo; quality in the case of a Grayscale image is threshold(j)&equals;6 for j&equals;numberOfResolutions, and threshold(j)&equals;4 for j&lt;numberOfResolutions. The choice is also derived from the mathematical properties of the pre-chosen subband transform(s). In the case of lossless compression these parameters are not used since in lossless mode there is no threshold operation performed. </paragraph>
<paragraph id="P-0289" lvl="0"><number>&lsqb;0289&rsqb;</number> By adding sufficient rows and columns to each resolution j (padding), one obtains an exact tiling of the multiresolution structure with &lcub;nTilesX(j),nTilesY(j),nTilesZ(j)&rcub; tiles for each resolution j, each of size &lsqb;tilelength, tileLength, titeHeight&rsqb;. </paragraph>
<paragraph id="P-0290" lvl="0"><number>&lsqb;0290&rsqb;</number> The following is a discussion of the memory requirements of a multi-resolution data structure, and of the allocation and initialization of this memory with reference to <cross-reference target="DRAWINGS">FIG. 23</cross-reference>. </paragraph>
<paragraph id="P-0291" lvl="0"><number>&lsqb;0291&rsqb;</number> For efficient use of memory during the preprocessing stage, storage needs to be allocated for 2&times;tileHeight&plus;maxfilterSizeZ frames at each resolution 1&lE;j&lE;numberOfResolutions&minus;jumpSize. Each such memory frame buffer stores the low-pass coefficients at various resolutions. Thus the memory complexity is limited by several single frames and is independent of the number of frames in the original sequence. </paragraph>
<paragraph id="P-0292" lvl="0"><number>&lsqb;0292&rsqb;</number> During the preprocessing, the resolutions are scanned simultaneously from start to end in the z direction. For each resolution the corresponding frame buffer stores low-pass coefficients or &ldquo;pixels&rdquo; at that resolution. The core of the preprocessing algorithm are steps <highlight><bold>2302</bold></highlight> to <highlight><bold>2305</bold></highlight> where tiles of pixels of size </paragraph>
<paragraph lvl="0"><in-line-formula>&lsqb;tileLength&plus;2&times;maxFilterSizeXY,tileLength&plus;2&times;maxFilterSizeXY,tileHeight&plus;2&times;maxFilterSizeZ&rsqb;</in-line-formula></paragraph>
<paragraph id="P-0293" lvl="7"><number>&lsqb;0293&rsqb;</number> are read from the memory frame buffers and handled one at a time. In Step <highlight><bold>2302</bold></highlight> the tile is transformed into a tile of size &lsqb;tilelength , tileLength, tileHeight &rsqb; containing two types of coefficient data: subband coefficients and &ldquo;pixels&rdquo; at a lower resolution. The subband coefficients are processed in step <highlight><bold>2303</bold></highlight> and step <highlight><bold>2304</bold></highlight> and are stored in the cache. The lower resolution pixels are inserted in step <highlight><bold>2305</bold></highlight> to a lower resolution memory frame buffer. Whenever such a new sub-tile of lower resolution &ldquo;pixels&rdquo; (step <highlight><bold>2305</bold></highlight>) is inserted into a frame, a memory management module performs the following check. If the part of the sub-tile exceeds the current virtual boundaries of the memory frame buffer, the corresponding first frames of the memory frame buffer are considered unnecessary anymore. Their memory is (virtually) re-allocated for the purpose of storing the sub-tile&apos;s new data. The pseudo-code of the memory constraint scan algorithm is detailed in <cross-reference target="DRAWINGS">FIG. 24</cross-reference>. </paragraph>
<paragraph id="P-0294" lvl="0"><number>&lsqb;0294&rsqb;</number> In Step <highlight><bold>2301</bold></highlight> the low pass filters of the transforms subbandTransformType(j), numberOfResolutions&minus;jumpSize&lt;j&lE;numberOfResolutions, are used to obtain a low resolution 3-D image at the resolution numberOfResolutions&minus;jumpSize (as can be seen in <cross-reference target="DRAWINGS">FIG. 5</cross-reference>). The low pass calculation is initiated by an input operation of tiles of pixels from the memory frame buffers performed in step <highlight><bold>2302</bold></highlight>. Whenever there is an attempt to read missing low resolution tiles, they are computed by low-pass filtering the original image and inserted into the memory frame buffer. As explained herein above, the insertion over-writes frames which are no longer required, such that the algorithm is memory constraint. By metaphorically jumping up the multi-resolution ladder, the present invention avoids computation and storage of high resolution subband coefficients. For example, given a sequence of 2-D images of the size 512&times;512 pixels, and given thumbnails of size 64&times;64, by choosing jumpSize&equals;3, the main preprocessing stages: subband transform, quantization and storing are done only for a low resolution 3-D image that is 64 times smaller than the original 3-D image. When the user requests to view a higher resolution ROI, for example a single slice of size 128&times;128, the server needs to read (again) the associated local area of the original image and perform (using step <highlight><bold>2204</bold></highlight>) more computations. </paragraph>
<paragraph id="P-0295" lvl="0"><number>&lsqb;0295&rsqb;</number> In a lossy mode, the low pass filtering can be implemented efficiently in integer numbers without paying much attention to round-off errors. In lossless mode (when losslessMode&equals;true ), care must be taken to ensure that the result of the low pass step, which are low resolution pixels, can be used in a lossless framework. Specifically, it must be ensured that in a scenario where a user views a low resolution ROI and then zooms into a high resolution ROI, the low resolution data already present at the client side can be used for the rendering such that only the difference between the low resolution and high resolution need to be progressively transmitted until lossless quality is reached. Thus, the low pass filter is implemented using a special lossless &ldquo;integer to integer&rdquo; transform technique. Unfortunately, this means that this step is slower in lossless mode, due to this special implementation. Nevertheless, it is the embodiment as it provides fast response to the user&apos;s first request to view the image in a true lossless efficient imaging system. </paragraph>
<paragraph id="P-0296" lvl="0"><number>&lsqb;0296&rsqb;</number> In lossless mode the jumpSize parameter defines the number of lossless wavelet low pass steps should be done. A single low pass step is the same for Haar and CDF (1,3) and for the HHX-Subbands type of decomposition that is the only one used in the &ldquo;jump&rdquo;. This step is defined by the following Eq.12. 
<math-cwu id="MATH-US-00031">
<number>31</number>
<math>
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mi>ll</mi>
          <mo>&af;</mo>
          <mrow>
            <mo>(</mo>
            <mrow>
              <mi>m</mi>
              <mo>,</mo>
              <mi>n</mi>
            </mrow>
            <mo>)</mo>
          </mrow>
        </mrow>
        <mo>=</mo>
        <mrow>
          <mrow>
            <mo>&LeftFloor;</mo>
            <mfrac>
              <mrow>
                <mrow>
                  <mi>x</mi>
                  <mo>&af;</mo>
                  <mrow>
                    <mo>(</mo>
                    <mrow>
                      <mrow>
                        <mrow>
                          <mn>2</mn>
                          <mo>&it;</mo>
                          <mi>m</mi>
                        </mrow>
                        <mo>+</mo>
                        <mn>1</mn>
                      </mrow>
                      <mo>,</mo>
                      <mrow>
                        <mrow>
                          <mn>2</mn>
                          <mo>&it;</mo>
                          <mi>n</mi>
                        </mrow>
                        <mo>+</mo>
                        <mn>1</mn>
                      </mrow>
                    </mrow>
                    <mo>)</mo>
                  </mrow>
                </mrow>
                <mo>+</mo>
                <mrow>
                  <mi>x</mi>
                  <mo>&af;</mo>
                  <mrow>
                    <mo>(</mo>
                    <mrow>
                      <mrow>
                        <mn>2</mn>
                        <mo>&it;</mo>
                        <mi>m</mi>
                      </mrow>
                      <mo>,</mo>
                      <mrow>
                        <mrow>
                          <mn>2</mn>
                          <mo>&it;</mo>
                          <mi>n</mi>
                        </mrow>
                        <mo>+</mo>
                        <mn>1</mn>
                      </mrow>
                    </mrow>
                    <mo>)</mo>
                  </mrow>
                </mrow>
              </mrow>
              <mn>2</mn>
            </mfrac>
            <mo>&RightFloor;</mo>
          </mrow>
          <mo>+</mo>
          <mrow>
            <mo>&LeftFloor;</mo>
            <mfrac>
              <mrow>
                <mrow>
                  <mi>x</mi>
                  <mo>&af;</mo>
                  <mrow>
                    <mo>(</mo>
                    <mrow>
                      <mrow>
                        <mrow>
                          <mn>2</mn>
                          <mo>&it;</mo>
                          <mi>m</mi>
                        </mrow>
                        <mo>+</mo>
                        <mn>1</mn>
                      </mrow>
                      <mo>,</mo>
                      <mrow>
                        <mn>2</mn>
                        <mo>&it;</mo>
                        <mi>n</mi>
                      </mrow>
                    </mrow>
                    <mo>)</mo>
                  </mrow>
                </mrow>
                <mo>+</mo>
                <mrow>
                  <mi>x</mi>
                  <mo>&af;</mo>
                  <mrow>
                    <mo>(</mo>
                    <mrow>
                      <mrow>
                        <mn>2</mn>
                        <mo>&it;</mo>
                        <mi>m</mi>
                      </mrow>
                      <mo>,</mo>
                      <mrow>
                        <mn>2</mn>
                        <mo>&it;</mo>
                        <mi>n</mi>
                      </mrow>
                    </mrow>
                    <mo>)</mo>
                  </mrow>
                </mrow>
              </mrow>
              <mn>2</mn>
            </mfrac>
            <mo>&RightFloor;</mo>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mrow>
          <mi>Eq</mi>
          <mo>.</mo>
          <mstyle>
            <mtext>&emsp;</mtext>
          </mstyle>
          <mo>&it;</mo>
          <mn>12</mn>
        </mrow>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
<mathematica-file id="MATHEMATICA-00031" file="US20030005140A1-20030102-M00031.NB"/>
<image id="EMI-M00031" wi="216.027" he="39.123" file="US20030005140A1-20030102-M00031.TIF" imf="TIFF" ti="MF"/>
</math-cwu>
</paragraph>
<paragraph id="P-0297" lvl="0"><number>&lsqb;0297&rsqb;</number> The server performs these steps efficiently (almost like the lossy algorithm) by a single operation that simulates exactly jumpSize low pass steps defined by Eq.12. The simplicity of the formula makes filters such as Haar and CDF (1,3) optimal in the sense of low pass efficiency. </paragraph>
<paragraph id="P-0298" lvl="0"><number>&lsqb;0298&rsqb;</number> Step <highlight><bold>2302</bold></highlight> is one step of an efficient local subband transform (FWT) performed on a tile of pixels at the resolution 1&lE;j&lE;numberOfResolutions&minus;jumpSize. As described herein above, the type of transform is determined by the parameters decompositionType(j) and subbandTransformType(j). The transform is performed on an extended tile of pixels of size </paragraph>
<paragraph lvl="0"><in-line-formula>&lsqb;tileLength&plus;2&times;maxFilterSizeXY,tileLength&plus;2&times;maxFilterSizeXY,tileHeight&plus;2&times;maxFilterSizeZ&rsqb;</in-line-formula></paragraph>
<paragraph id="P-0299" lvl="7"><number>&lsqb;0299&rsqb;</number> (except at the boundaries) read directly from the memory frame buffers at the resolution j&plus;1. The output of the step is a subband tile as defined by Eq.2 of size &lsqb;tileLength, tileLength, tileHeight&rsqb; containing two types of coefficient data: subband/wavelet coefficients and low resolution coefficients/pixels. The transform step can be efficiently implemented in integer numbers. This saves converting the original pixels to floating-point representation and facilitates the next quantization step (used for lossy transform). </paragraph>
<paragraph id="P-0300" lvl="0"><number>&lsqb;0300&rsqb;</number> The subband transform of step <highlight><bold>2302</bold></highlight> outputs two types of coefficients: scaling function (low pass) and wavelet (high pass). For the lossless case their wavelet coefficients also include additional Half bit plane data. The wavelet coefficients are treated in step <highlight><bold>2303</bold></highlight> and step <highlight><bold>2304</bold></highlight> while the scaling function coefficients are treated in step <highlight><bold>2305</bold></highlight>. Tiles of pixels which are located on the boundaries sometimes need to be padded by extra frames, rows and/or columns of pixels, such that they will formulate a complete tile of size &lsqb;tileLength,tileLength,tileHeight&rsqb;. </paragraph>
<paragraph id="P-0301" lvl="0"><number>&lsqb;0301&rsqb;</number> In step <highlight><bold>2303</bold></highlight>, unless losslessMode is true, the subband coefficients calculated in step <highlight><bold>2302</bold></highlight> are quantized. This procedure is performed at this time for the following reason. It is required that the coefficients computed in the previous step will be stored in the cache <highlight><bold>121</bold></highlight>. To avoid writing huge amounts of data to the cache <highlight><bold>121</bold></highlight>, some compression is required. Thus, the quantization step serves as a preparation step for the next variable length encoding step. It is important to point out that the quantization step has no effect on compression results. Namely, the quantization step is synchronized with the encoding algorithm ensuring that the results of the encoding algorithm of quantized and non-quantized coefficients are identical. A tile of an image at the resolution j is quantized using the given threshold, threshold(j): for each coefficients x , the quantized value is &boxur;x/threshold(j)&boxul;. It is advantageous to choose the parameters threshold(j) to be dyadic such that the quantization can be implemented using integer shifts. The quantization procedure performed on a subband tile is as follows: </paragraph>
<paragraph id="P-0302" lvl="0"><number>&lsqb;0302&rsqb;</number> First, initialize maxBitPlane(tile)&equals;0. </paragraph>
<paragraph id="P-0303" lvl="0"><number>&lsqb;0303&rsqb;</number> Second, iterate over each group of four coefficients </paragraph>
<paragraph lvl="0"><in-line-formula>&lcub;coef(2i&plus;x,2j&plus;y,k),x &isin;&lsqb;0,1&rsqb;,y &isin;&lsqb;0,1&rsqb;&rcub;. </in-line-formula></paragraph>
<paragraph id="P-0304" lvl="7"><number>&lsqb;0304&rsqb;</number> For each such group initialize a variable length parameter length(i,j,k)&equals;0 . </paragraph>
<paragraph id="P-0305" lvl="0"><number>&lsqb;0305&rsqb;</number> Third, quantize each coefficient in the group using the appropriate threshold. </paragraph>
<paragraph id="P-0306" lvl="0"><number>&lsqb;0306&rsqb;</number> Fourth, and for each coefficient, update length(i,j k) by the bit plane b of the coefficient,where the bit plane is defined by </paragraph>
<paragraph lvl="0"><in-line-formula>&verbar;coef(2i&plus;x,2j&plus;y,k)&verbar;&isin;&lsqb;2<highlight><superscript>b</superscript></highlight>threshold(j),2<highlight><superscript>b&plus;1</superscript></highlight>threshold (j)) </in-line-formula></paragraph>
<paragraph id="P-0307" lvl="0"><number>&lsqb;0307&rsqb;</number> Fifth, after processing the group of four coefficients, use the final value of length(i,j,k) to update maxBitPlane(tile) by </paragraph>
<paragraph lvl="0"><in-line-formula>maxBitPlane(tile)&equals;max(maxBitPlane(tile),length(i,j,k)) </in-line-formula></paragraph>
<paragraph id="P-0308" lvl="0"><number>&lsqb;0308&rsqb;</number> Last, store the value maxBitPlane(tile) in the cache (<highlight><bold>121</bold></highlight>). </paragraph>
<paragraph id="P-0309" lvl="0"><number>&lsqb;0309&rsqb;</number> As for handling subband tiles located at the boundaries. A solution sets to zero subband coefficients that are not associated with the actual image, but only with a padded portion. To do this the amount of padding is taken into account together with the parameters maxFilterSizeXY and maxFilterSizeZ. The motivation for this procedure of the removal of these coefficients is coding efficiency. </paragraph>
<paragraph id="P-0310" lvl="0"><number>&lsqb;0310&rsqb;</number> In step <highlight><bold>2304</bold></highlight> the coefficients that were quantized in the previous step are variable length encoded and stored in the cache <highlight><bold>121</bold></highlight>. If maxBitPlane(tile)&equals;0 no data is written, else an iteration is performed over the coefficient groups &lcub;coef(2i&plus;x,2j&plus;y,k),x &isin;&lsqb;0,1&rsqb;,y &isin;&lsqb;0,1&rsqb;&rcub;. For each such group the group&apos;s variable length length (i,j,k) is first written using log<highlight><subscript>2 </subscript></highlight>(maxBitPlane(tile)) bits. Then for each coefficient in the group length (i,j,k)&plus;1 bits are written representing the coefficient&apos;s value. The least significant bit represents the coefficient&apos;s sign. For example, if it is 1 then the variable length encoded coefficient is assumed to be negative. The HalfBit subband coefficients are written last using one bit per coefficient. </paragraph>
<paragraph id="P-0311" lvl="0"><number>&lsqb;0311&rsqb;</number> In step <highlight><bold>2305</bold></highlight> the low pass coefficients are inserted into the pyramidal frame buffer data structure at the appropriate location. If the size of the subband tile is &lsqb;tileLength,tileLength,tileHeight&rsqb;, then the size of the low pass sub-tile is &lsqb;tileLength/2,tileLength/2,tileHeight&rsqb; for the HHX_Subbands type decomposition and &lsqb;tileLength, tileLength, tileHeight/2&rsqb; for XXH_Subbands type, as explained herein above in reference to <cross-reference target="DRAWINGS">FIG. 4</cross-reference>. Denoting the size of the sub-tile by &lsqb;sizeX,sizeY,sizeZ&rsqb;, if the coordinates of the tile are (t_x, t_y, t_z, t_resolution), then the coefficients are copied into the frame buffer t_resolution&minus;1 at the virtual location described by the following Eq.13.  
<math-cwu id="MATH-US-00032">
<number>32</number>
<math>
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mi>Location</mi>
        <mo>=</mo>
        <mrow>
          <mrow>
            <mo>[</mo>
            <mrow>
              <mrow>
                <mi>t_x</mi>
                <mo>&times;</mo>
                <mi>tileSizeX</mi>
              </mrow>
              <mo>,</mo>
              <mrow>
                <mrow>
                  <mo>(</mo>
                  <mrow>
                    <mi>t_x</mi>
                    <mo>+</mo>
                    <mn>1</mn>
                  </mrow>
                  <mo>)</mo>
                </mrow>
                <mo>&times;</mo>
                <mi>tileLength</mi>
              </mrow>
            </mrow>
            <mo>]</mo>
          </mrow>
          <mo>&times;</mo>
          <mstyle>
            <mtext>&NewLine;</mtext>
          </mstyle>
          <mo>&it;</mo>
          <mstyle>
            <mtext>&emsp;</mtext>
          </mstyle>
          <mo>&it;</mo>
          <mrow>
            <mo>[</mo>
            <mrow>
              <mrow>
                <mi>t_y</mi>
                <mo>&times;</mo>
                <mi>tileSizeY</mi>
              </mrow>
              <mo>,</mo>
              <mrow>
                <mrow>
                  <mo>(</mo>
                  <mrow>
                    <mi>t_y</mi>
                    <mo>+</mo>
                    <mn>1</mn>
                  </mrow>
                  <mo>)</mo>
                </mrow>
                <mo>&times;</mo>
                <mi>tileLength</mi>
              </mrow>
            </mrow>
            <mo>]</mo>
          </mrow>
          <mo>&times;</mo>
          <mstyle>
            <mtext>&NewLine;</mtext>
          </mstyle>
          <mo>&it;</mo>
          <mstyle>
            <mtext>&emsp;</mtext>
          </mstyle>
          <mo>&it;</mo>
          <mrow>
            <mo>[</mo>
            <mrow>
              <mrow>
                <mi>t_z</mi>
                <mo>&times;</mo>
                <mi>tileSizeZ</mi>
              </mrow>
              <mo>,</mo>
              <mrow>
                <mrow>
                  <mo>(</mo>
                  <mrow>
                    <mi>t_z</mi>
                    <mo>+</mo>
                    <mn>1</mn>
                  </mrow>
                  <mo>)</mo>
                </mrow>
                <mo>&times;</mo>
                <mi>tileHeight</mi>
              </mrow>
            </mrow>
            <mo>]</mo>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mrow>
          <mi>Eq</mi>
          <mo>.</mo>
          <mstyle>
            <mtext>&emsp;</mtext>
          </mstyle>
          <mo>&it;</mo>
          <mn>13</mn>
        </mrow>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
<mathematica-file id="MATHEMATICA-00032" file="US20030005140A1-20030102-M00032.NB"/>
<image id="EMI-M00032" wi="216.027" he="30.9582" file="US20030005140A1-20030102-M00032.TIF" imf="TIFF" ti="MF"/>
</math-cwu>
</paragraph>
<paragraph id="P-0312" lvl="7"><number>&lsqb;0312&rsqb;</number> As explained herein above, these coefficients will be merged into a bigger tile of low resolution pixels and processed later. </paragraph>
<paragraph id="P-0313" lvl="0"><number>&lsqb;0313&rsqb;</number> Step <highlight><bold>2202</bold></highlight> is the decoding of the request stream. This is the inverse step <highlight><bold>1703</bold></highlight>. Once the request stream arrives at the server, it is decoded back to a data block request list. Each data structure defined by Eq.11 and representing a group of requested data blocks is converted to the sub-list of these data blocks. </paragraph>
<paragraph id="P-0314" lvl="0"><number>&lsqb;0314&rsqb;</number> Reference is now made to <cross-reference target="DRAWINGS">FIG. 25</cross-reference> describing step <highlight><bold>2203</bold></highlight> in detail. This step is only performed whenever the data blocks associated with low resolution subband tile are not available in the server cache <highlight><bold>121</bold></highlight>. </paragraph>
<paragraph id="P-0315" lvl="0"><number>&lsqb;0315&rsqb;</number> Step <highlight><bold>2501</bold></highlight> is the inverse step of step <highlight><bold>2304</bold></highlight>. In the preprocessing algorithm subband tiles of low resolution, that is resolutions lower than numberOfResolutions&minus;jumpSize, were stored in the cache using a variable length type algorithm. For such a tile the variable length representation is first decoded, and then the algorithm uses the stored value maxBitPlane(tile). </paragraph>
<paragraph id="P-0316" lvl="0"><number>&lsqb;0316&rsqb;</number> If maxBitPlane(tile)&equals;0, then all the coefficients are set to zero including the HalfBit subband for lossless case, else and in the lossy case following decoding algorithm if performed. For each group of four coefficients &lcub;coef(2&times;i&plus;x,2&times;j&plus;y,k)&rcub;<highlight><subscript>x,y&equals;0,1</subscript></highlight>, log<highlight><subscript>2 </subscript></highlight>(maxBitPlane(tile)) bits are read representing the variable length of the group. </paragraph>
<paragraph id="P-0317" lvl="0"><number>&lsqb;0317&rsqb;</number> Assuming the variable length is length(i,j,k), and for each of the four coefficients length (i,j,k)&plus;1 bits are then read. The least significant bit represents the sign. The reconstructed coefficient takes the value defined by Eq.14  
<math-cwu id="MATH-US-00033">
<number>33</number>
<math>
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mi>value</mi>
        <mo>=</mo>
        <mrow>
          <mi>threshold</mi>
          <mo>&times;</mo>
          <mrow>
            <mo>(</mo>
            <mrow>
              <mi>readBits</mi>
              <mo>&GreaterGreater;</mo>
              <mn>1</mn>
            </mrow>
            <mo>)</mo>
          </mrow>
          <mo>&times;</mo>
          <mrow>
            <mo>{</mo>
            <mtable>
              <mtr>
                <mtd>
                  <mrow>
                    <mstyle>
                      <mtext>&emsp;</mtext>
                    </mstyle>
                    <mo>&it;</mo>
                    <mrow>
                      <mrow>
                        <mo>-</mo>
                        <mn>1</mn>
                      </mrow>
                      <mo>,</mo>
                      <mrow>
                        <mrow>
                          <mrow>
                            <mi>readBits</mi>
                            <mo>&it;</mo>
                            <mstyle>
                              <mtext>&emsp;</mtext>
                            </mstyle>
                            <mo>&amp;</mo>
                          </mrow>
                          <mo>&it;</mo>
                          <mstyle>
                            <mtext>&emsp;</mtext>
                          </mstyle>
                          <mo>&it;</mo>
                          <mn>1</mn>
                        </mrow>
                        <mo>=</mo>
                        <mn>1</mn>
                      </mrow>
                    </mrow>
                  </mrow>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mrow>
                    <mstyle>
                      <mtext>&emsp;</mtext>
                    </mstyle>
                    <mo>&it;</mo>
                    <mrow>
                      <mn>1</mn>
                      <mo>,</mo>
                      <mrow>
                        <mrow>
                          <mrow>
                            <mi>readBits</mi>
                            <mo>&it;</mo>
                            <mstyle>
                              <mtext>&emsp;</mtext>
                            </mstyle>
                            <mo>&amp;</mo>
                          </mrow>
                          <mo>&it;</mo>
                          <mstyle>
                            <mtext>&emsp;</mtext>
                          </mstyle>
                          <mo>&it;</mo>
                          <mn>1</mn>
                        </mrow>
                        <mo>=</mo>
                        <mn>0</mn>
                      </mrow>
                    </mrow>
                  </mrow>
                </mtd>
              </mtr>
            </mtable>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mrow>
          <mi>Eq</mi>
          <mo>.</mo>
          <mstyle>
            <mtext>&emsp;</mtext>
          </mstyle>
          <mo>&it;</mo>
          <mn>14</mn>
        </mrow>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
<mathematica-file id="MATHEMATICA-00033" file="US20030005140A1-20030102-M00033.NB"/>
<image id="EMI-M00033" wi="216.027" he="21.12075" file="US20030005140A1-20030102-M00033.TIF" imf="TIFF" ti="MF"/>
</math-cwu>
</paragraph>
<paragraph id="P-0318" lvl="0"><number>&lsqb;0318&rsqb;</number> In the lossless case threshold&equals;1, and a special treatment should be made if maxBitPlane(tile)&equals;1. In this case all the coefficients are set to zero, and the HalfBit subband coefficient are read bit by bit from cache. If maxBitPlane(tile)&gt;1 then the HalfBit subband coefficient are read bit by bit from cache, and then the decoding algorithm is performed as in the lossy case. </paragraph>
<paragraph id="P-0319" lvl="0"><number>&lsqb;0319&rsqb;</number> In step <highlight><bold>2502</bold></highlight> the encoding algorithm described in reference to Table 1 encodes the requested data blocks associated with the extracted subband tile. </paragraph>
<paragraph id="P-0320" lvl="0"><number>&lsqb;0320&rsqb;</number> In case that a jumpSize greater than zero is used in step <highlight><bold>2201</bold></highlight> and the resolution of the ROI is greater than numberOfResolutions&minus;jumpSize the following is the calculation. It is a variation on the preprocessing step described in reference to <cross-reference target="DRAWINGS">FIG. 23 </cross-reference>. Whenever the server receives a request list of data blocks its checks the following. If a data block has been previously computed (present in the cache <highlight><bold>121</bold></highlight>), or if it is associated with a low resolution subband tile data block, then it is either read from the cache or handled in step <highlight><bold>2203</bold></highlight>. Else, the coordinates of the data block are used in the same manner as in step <highlight><bold>1704</bold></highlight> described herein above to find the minimal portion of the ROI that needs to be processed. A local version of the preprocessing algorithm is then performed for this local portion. The difference between this variation and the description in reference to <cross-reference target="DRAWINGS">FIG. 23</cross-reference> is that the subband coefficients of ROI are directly encoded by arithmetic encoder described in reference to Table 1 and not by Variable Length encoder as in step <highlight><bold>2304</bold></highlight> and step <highlight><bold>2305</bold></highlight> of the preprocessing algorithm. </paragraph>
<paragraph id="P-0321" lvl="0"><number>&lsqb;0321&rsqb;</number> In the final step, the encoded data tiles are sent to the client, in the order they were requested. In many cases data blocks will be empty. For example, for a region of the original image with a constant pixel value all of the corresponding data blocks will be empty, except for the first one, which will contain only one byte with the value zero representing maxBitPlane(tile)&equals;0. For a region of the image of low information content only the last data blocks representing higher accuracy will contain any data. Therefore, to avoid unnecessary communications, cubes of empty data blocks are collectively reported to the client using a structure of the type defined by Eq.11 under the restriction that they are reported in the order in which they were requested. For blocks containing actual data we need only report the data block&apos;s size in bytes, since the client already knows which data blocks to expect and in which order. </paragraph>
<paragraph id="P-0322" lvl="0"><number>&lsqb;0322&rsqb;</number> It will be apparent to those skilled in the art that various modifications and variations can be made in the present invention without departing from the scope or spirit of the invention. Other embodiments of the invention will be apparent to those skilled in the art from consideration of the specification and practice of the invention disclosed herein. It is intended that the specification and examples be considered as exemplary only, with a true scope and spirit of the invention being indicated by the following claims. </paragraph>
</section>
</detailed-description>
</subdoc-description>
<subdoc-claims>
<heading lvl="1">What is claimed is: </heading>
<claim id="CLM-00001">
<claim-text><highlight><bold>1</bold></highlight>. A system for transmitting a three-dimensional digital image over a communication network, comprising: 
<claim-text>a) an image storage device for storing a three-dimensional digital image; </claim-text>
<claim-text>b) a client computer coupled to the communication network, wherein the client computer generates a request for interaction with the three-dimensional image stored on the image storage device, the request identifying a region of interest within the three-dimensional digital image; and </claim-text>
<claim-text>c) a server computer coupled to the communication network and the image storage device, wherein the server computer performs the steps of: 
<claim-text>i) performing two-dimensional sub-band transform decompositions in x-axis and y-axis directions upon the three-dimensional digital image; </claim-text>
<claim-text>ii) performing a one-dimensional sub-band transform decomposition in a z-axis direction upon a portion of the two-dimensionally transform-decomposed digital image; and </claim-text>
<claim-text>iii) progressively transmitting to the client computer data representing the identified region of interest within the three-dimensional digital image. </claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002">
<claim-text><highlight><bold>2</bold></highlight>. The system of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, further comprising the step of transmitting to the client computer data representing thumbnail-resolution images resulting from the two-dimensional sub-band transform decompositions. </claim-text>
</claim>
<claim id="CLM-00003">
<claim-text><highlight><bold>3</bold></highlight>. The system of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein the step of performing a one-dimensional sub-band transform decomposition in a z-axis direction comprises: 
<claim-text>a) computing transform coefficients using integer arithmetic and not floating-point arithmetic; and </claim-text>
<claim-text>b) correcting the computed transform coefficients by performing integer arithmetic operations with one or more predetermined correction factors. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00004">
<claim-text><highlight><bold>4</bold></highlight>. The system of <dependent-claim-reference depends_on="CLM-00003">claim 3</dependent-claim-reference>, wherein the steps of performing sub-band transform decompositions comprise computing transform coefficients for each of a predetermined plurality of resolutions, and the transform coefficients for an Nth resolution of the plurality is computed in response to a one transform formula if N is odd and another transform formula if N is even. </claim-text>
</claim>
<claim id="CLM-00005">
<claim-text><highlight><bold>5</bold></highlight>. The system of <dependent-claim-reference depends_on="CLM-00004">claim 4</dependent-claim-reference>, wherein the server computer scales the transform coefficients by alternating factors of {square root}{square root over (2)} and 1 along the z-axis. </claim-text>
</claim>
<claim id="CLM-00006">
<claim-text><highlight><bold>6</bold></highlight>. A system for transmitting a three-dimensional digital image over a communication network, comprising: 
<claim-text>a) an image storage device for storing a three-dimensional digital image; </claim-text>
<claim-text>b) a client computer coupled to the communication network, wherein the client computer generates a request for interaction with the three-dimensional image stored on the image storage device, the request specifying a quality threshold and including a request list specifying data blocks that define a region of interest within the three-dimensional digital image; and </claim-text>
<claim-text>c) a server computer coupled to the communication network and the image storage device, wherein the server computer, in response to the request list, transmits to the client computer a number of data blocks corresponding to the specified quality threshold. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00007">
<claim-text><highlight><bold>7</bold></highlight>. The system of <dependent-claim-reference depends_on="CLM-00006">claim 6</dependent-claim-reference>, wherein the server computer maps luminance of the three-dimensional image stored on the image storage device from a predetermined image bit depth to a predetermined screen bit depth in accordance with a monotonic luminance mapping function. </claim-text>
</claim>
<claim id="CLM-00008">
<claim-text><highlight><bold>8</bold></highlight>. The system of <dependent-claim-reference depends_on="CLM-00007">claim 7</dependent-claim-reference>, wherein: 
<claim-text>a) the server computer computes a root mean square (RMS) increasing factor defined by a maximal derivative of the luminance mapping function; and </claim-text>
<claim-text>b) the server computer provides a number of data blocks greater than a predetermined number if the RMS increasing factor is greater than one. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00009">
<claim-text><highlight><bold>9</bold></highlight>. The system of <dependent-claim-reference depends_on="CLM-00007">claim 7</dependent-claim-reference>, wherein: 
<claim-text>a) the server computer computes a root mean square (RMS) increasing factor defined by a maximal derivative of the luminance mapping function; and </claim-text>
<claim-text>b) the server computer provides a number of data blocks less than a predetermined number if the RMS increasing factor is less than one. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00010">
<claim-text><highlight><bold>10</bold></highlight>. The system of <dependent-claim-reference depends_on="CLM-00007">claim 7</dependent-claim-reference>, wherein: 
<claim-text>a) the request generated by the client computer further specifies a resolution; and </claim-text>
<claim-text>b) the server computer provides a number of data blocks corresponding to the specified quality threshold and resolution. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00011">
<claim-text><highlight><bold>11</bold></highlight>. A method for transmitting a three-dimensional digital image over a communication network, comprising: 
<claim-text>a) storing a three-dimensional digital image within an image storage device; </claim-text>
<claim-text>b) a client computer coupled to the communication network generating a request for interaction with the three-dimensional image stored on the image storage device; </claim-text>
<claim-text>c) a server computer coupled to the communication network performing two-dimensional sub-band transform decompositions in x-axis and y-axis directions upon the three-dimensional digital image; </claim-text>
<claim-text>d) the server computer performing a one-dimensional sub-band transform decomposition in a z-axis direction upon a portion of the two-dimensionally transform-decomposed digital image; and </claim-text>
<claim-text>e) the server computer progressively transmitting to the client computer via the communication network data representing the identified region of interest within the three-dimensional digital image. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00012">
<claim-text><highlight><bold>12</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00011">claim 11</dependent-claim-reference>, further comprising the step of transmitting to the client computer data representing thumbnail-resolution images resulting from the two-dimensional sub-band transform decompositions. </claim-text>
</claim>
<claim id="CLM-00013">
<claim-text><highlight><bold>13</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00011">claim 11</dependent-claim-reference>, wherein the step of performing a one-dimensional sub-band transform decomposition in a z-axis direction comprises the steps of: 
<claim-text>a) computing transform coefficients using integer arithmetic and not floating-point arithmetic; and </claim-text>
<claim-text>b) correcting the computed transform coefficients by performing integer arithmetic operations with one or more predetermined correction factors. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00014">
<claim-text><highlight><bold>14</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00011">claim 13</dependent-claim-reference>, wherein the steps of computing sub-band transform decompositions comprise computing transform coefficients for each of a predetermined plurality of resolutions, and the transform coefficients for an Nth resolution of the plurality is computed in response to a one transform formula if N is odd and another transform formula if N is even. </claim-text>
</claim>
<claim id="CLM-00015">
<claim-text><highlight><bold>15</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00011">claim 14</dependent-claim-reference>, wherein the server computer scales the transform coefficients by alternating factors of {square root}{square root over (2)} and 1 along the z-axis. </claim-text>
</claim>
<claim id="CLM-00016">
<claim-text><highlight><bold>16</bold></highlight>. A method for transmitting a three-dimensional digital image from a server computer to a client computer over a communication network, comprising the steps of: 
<claim-text>a) storing a three-dimensional digital image on an image storage device; </claim-text>
<claim-text>b) the client computer generating a request for interaction with the three-dimensional image stored on the image storage device, the request specifying a quality threshold and including a request list specifying data blocks that define a region of interest within the three-dimensional digital image; and </claim-text>
<claim-text>c) transmitting from the server computer to the client computer, via the communication network, a number of data blocks corresponding to the specified quality threshold. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00017">
<claim-text><highlight><bold>17</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00011">claim 16</dependent-claim-reference>, further comprising the step of the server computer mapping luminance of the three-dimensional image stored on the image storage device from a predetermined image bit depth to a predetermined screen bit depth in accordance with a monotonic luminance mapping function. </claim-text>
</claim>
<claim id="CLM-00018">
<claim-text><highlight><bold>18</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00011">claim 17</dependent-claim-reference>, further comprising the steps of: 
<claim-text>a) the server computer computing a root mean square (RMS) increasing factor defined by a maximal derivative of the luminance mapping function; and </claim-text>
<claim-text>b) the server computer providing a number of data blocks greater than a predetermined number if the RMS increasing factor is greater than one. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00019">
<claim-text><highlight><bold>19</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00011">claim 17</dependent-claim-reference>, further comprising the steps of: 
<claim-text>a) the server computer computing a root mean square (RMS) increasing factor defined by a maximal derivative of the luminance mapping function; and </claim-text>
<claim-text>b) the server computer providing a number of data blocks less than a predetermined number if the RMS increasing factor is less than one. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00020">
<claim-text><highlight><bold>20</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00011">claim 17</dependent-claim-reference>, further comprising the steps of: 
<claim-text>a) including in the request generated by the client computer a specified resolution; and </claim-text>
<claim-text>b) providing a number of data blocks from the server computer that correspond to the specified quality threshold and resolution. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00021">
<claim-text><highlight><bold>21</bold></highlight>. A computer program product for communicating a three-dimensional digital image over a communication network, the three-dimensional image stored on an image storage device accessible via the communication network, the computer program product comprising one or more computer data media carrying thereon: 
<claim-text>a) a client portion effecting a client computer request for interaction with the three-dimensional image stored on the image storage device, the request identifying a region of interest within the three-dimensional digital image; and </claim-text>
<claim-text>b) a server portion effecting in a server computer the steps of: 
<claim-text>i) performing two-dimensional sub-band transform decompositions in x-axis and y-axis directions upon the three-dimensional digital image; </claim-text>
<claim-text>ii) performing a one-dimensional sub-band transform decomposition in a z-axis direction upon a portion of the two-dimensionally transofrm-decomposed digital image; and </claim-text>
<claim-text>iii) progressively transmitting to the client computer via the communication network data representing the identified region of interest within the three-dimensional digital image. </claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00022">
<claim-text><highlight><bold>22</bold></highlight>. The computer program product of <dependent-claim-reference depends_on="CLM-00022">claim 21</dependent-claim-reference>, wherein the server portion further effects in the server computer a step of transmitting to the client computer data representing thumbnail-resolution images resulting from the two-dimensional sub-band transform decompositions. </claim-text>
</claim>
<claim id="CLM-00023">
<claim-text><highlight><bold>23</bold></highlight>. The computer program product of <dependent-claim-reference depends_on="CLM-00022">claim 21</dependent-claim-reference>, wherein the step of performing a one-dimensional sub-band transform decomposition in a z-axis direction comprises: 
<claim-text>a) computing transform coefficients using integer arithmetic and not floating-point arithmetic; and </claim-text>
<claim-text>b) correcting the computed transform coefficients by performing integer arithmetic operations with one or more predetermined correction factors. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00024">
<claim-text><highlight><bold>24</bold></highlight>. The computer program product of <dependent-claim-reference depends_on="CLM-00022">claim 23</dependent-claim-reference>, wherein the steps of performing sub-band transform decompositions comprise computing transform coefficients for each of a predetermined plurality of resolutions, and the transform coefficients for an Nth resolution of the plurality is computed in response to a one transform formula if N is odd and another transform formula if N is even. </claim-text>
</claim>
<claim id="CLM-00025">
<claim-text><highlight><bold>25</bold></highlight>. The computer program product of <dependent-claim-reference depends_on="CLM-00022">claim 24</dependent-claim-reference>, wherein the server portion effects in the server computer a step of scaling the transform coefficients by alternating factors of {square root}{square root over (2)} and 1 along the z-axis. </claim-text>
</claim>
<claim id="CLM-00026">
<claim-text><highlight><bold>26</bold></highlight>. A computer program product for communicating a three-dimensional digital image over a communication network, the three-dimensional image stored on an image storage device accessible via the communication network, the computer program product comprising one or more computer data media carrying thereon: 
<claim-text>a) a client portion effecting a client computer request for interaction with the three-dimensional image stored on the image storage device, the request specifying a quality threshold and including a request list specifying data blocks that define a region of interest within the three-dimensional digital image; and </claim-text>
<claim-text>b) a server computer portion effecting in a server computer, in response to the request list, transmission to the client computer of a number of data blocks corresponding to the specified quality threshold. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00027">
<claim-text><highlight><bold>27</bold></highlight>. The computer program product of <dependent-claim-reference depends_on="CLM-00022">claim 26</dependent-claim-reference>, wherein the server portion effects in the server computer a step of mapping luminance of the three-dimensional image stored on the image storage device from a predetermined image bit depth to a predetermined screen bit depth in accordance with a monotonic luminance mapping function. </claim-text>
</claim>
<claim id="CLM-00028">
<claim-text><highlight><bold>28</bold></highlight>. The computer program product of <dependent-claim-reference depends_on="CLM-00022">claim 27</dependent-claim-reference>, wherein: 
<claim-text>a) the server portion effects in the server computer a step of computing a root mean square (RMS) increasing factor defined by a maximal derivative of the luminance mapping function; and </claim-text>
<claim-text>b) the server portion effects in the server computer a step of providing a number of data blocks greater than a predetermined number if the RMS increasing factor is greater than one. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00029">
<claim-text><highlight><bold>29</bold></highlight>. The computer program product of <dependent-claim-reference depends_on="CLM-00022">claim 27</dependent-claim-reference>, wherein: 
<claim-text>a) the server portion effects in the server computer a step of computing a root mean square (RMS) increasing factor defined by a maximal derivative of the luminance mapping function; and </claim-text>
<claim-text>b) the server portion effects in the server computer a step of providing a number of data blocks less than a predetermined number if the RMS increasing factor is less than one. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00030">
<claim-text><highlight><bold>30</bold></highlight>. The computer program product of <dependent-claim-reference depends_on="CLM-00022">claim 27</dependent-claim-reference>, wherein: 
<claim-text>a) the client computer request further specifies a resolution; and </claim-text>
<claim-text>b) the server portion effects in the server computer a step of providing a number of data blocks corresponding to the specified quality threshold and resolution.</claim-text>
</claim-text>
</claim>
</subdoc-claims>
<subdoc-drawings id="DRAWINGS">
<heading lvl="0" align="CENTER">Drawings</heading>
<representative-figure>1</representative-figure>
<figure id="figure-D00000">
<image id="EMI-D00000" file="US20030005140A1-20030102-D00000.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00001">
<image id="EMI-D00001" file="US20030005140A1-20030102-D00001.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00002">
<image id="EMI-D00002" file="US20030005140A1-20030102-D00002.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00003">
<image id="EMI-D00003" file="US20030005140A1-20030102-D00003.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00004">
<image id="EMI-D00004" file="US20030005140A1-20030102-D00004.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00005">
<image id="EMI-D00005" file="US20030005140A1-20030102-D00005.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00006">
<image id="EMI-D00006" file="US20030005140A1-20030102-D00006.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00007">
<image id="EMI-D00007" file="US20030005140A1-20030102-D00007.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00008">
<image id="EMI-D00008" file="US20030005140A1-20030102-D00008.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00009">
<image id="EMI-D00009" file="US20030005140A1-20030102-D00009.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00010">
<image id="EMI-D00010" file="US20030005140A1-20030102-D00010.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00011">
<image id="EMI-D00011" file="US20030005140A1-20030102-D00011.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00012">
<image id="EMI-D00012" file="US20030005140A1-20030102-D00012.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00013">
<image id="EMI-D00013" file="US20030005140A1-20030102-D00013.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00014">
<image id="EMI-D00014" file="US20030005140A1-20030102-D00014.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00015">
<image id="EMI-D00015" file="US20030005140A1-20030102-D00015.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00016">
<image id="EMI-D00016" file="US20030005140A1-20030102-D00016.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00017">
<image id="EMI-D00017" file="US20030005140A1-20030102-D00017.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00018">
<image id="EMI-D00018" file="US20030005140A1-20030102-D00018.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00019">
<image id="EMI-D00019" file="US20030005140A1-20030102-D00019.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00020">
<image id="EMI-D00020" file="US20030005140A1-20030102-D00020.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00021">
<image id="EMI-D00021" file="US20030005140A1-20030102-D00021.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00022">
<image id="EMI-D00022" file="US20030005140A1-20030102-D00022.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00023">
<image id="EMI-D00023" file="US20030005140A1-20030102-D00023.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00024">
<image id="EMI-D00024" file="US20030005140A1-20030102-D00024.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00025">
<image id="EMI-D00025" file="US20030005140A1-20030102-D00025.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00026">
<image id="EMI-D00026" file="US20030005140A1-20030102-D00026.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00027">
<image id="EMI-D00027" file="US20030005140A1-20030102-D00027.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00028">
<image id="EMI-D00028" file="US20030005140A1-20030102-D00028.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00029">
<image id="EMI-D00029" file="US20030005140A1-20030102-D00029.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00030">
<image id="EMI-D00030" file="US20030005140A1-20030102-D00030.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00031">
<image id="EMI-D00031" file="US20030005140A1-20030102-D00031.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00032">
<image id="EMI-D00032" file="US20030005140A1-20030102-D00032.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00033">
<image id="EMI-D00033" file="US20030005140A1-20030102-D00033.TIF" imf="TIFF" ti="DR"/>
</figure>
</subdoc-drawings>
</patent-application-publication>
