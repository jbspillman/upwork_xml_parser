<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE patent-application-publication SYSTEM "pap-v16-2002-01-01.dtd" [
<!ENTITY US20030002096A1-20030102-M00001.NB SYSTEM "US20030002096A1-20030102-M00001.NB" NDATA NB>
<!ENTITY US20030002096A1-20030102-M00001.TIF SYSTEM "US20030002096A1-20030102-M00001.TIF" NDATA TIF>
<!ENTITY US20030002096A1-20030102-M00002.NB SYSTEM "US20030002096A1-20030102-M00002.NB" NDATA NB>
<!ENTITY US20030002096A1-20030102-M00002.TIF SYSTEM "US20030002096A1-20030102-M00002.TIF" NDATA TIF>
<!ENTITY US20030002096A1-20030102-M00003.NB SYSTEM "US20030002096A1-20030102-M00003.NB" NDATA NB>
<!ENTITY US20030002096A1-20030102-M00003.TIF SYSTEM "US20030002096A1-20030102-M00003.TIF" NDATA TIF>
<!ENTITY US20030002096A1-20030102-M00004.NB SYSTEM "US20030002096A1-20030102-M00004.NB" NDATA NB>
<!ENTITY US20030002096A1-20030102-M00004.TIF SYSTEM "US20030002096A1-20030102-M00004.TIF" NDATA TIF>
<!ENTITY US20030002096A1-20030102-M00005.NB SYSTEM "US20030002096A1-20030102-M00005.NB" NDATA NB>
<!ENTITY US20030002096A1-20030102-M00005.TIF SYSTEM "US20030002096A1-20030102-M00005.TIF" NDATA TIF>
<!ENTITY US20030002096A1-20030102-M00006.NB SYSTEM "US20030002096A1-20030102-M00006.NB" NDATA NB>
<!ENTITY US20030002096A1-20030102-M00006.TIF SYSTEM "US20030002096A1-20030102-M00006.TIF" NDATA TIF>
<!ENTITY US20030002096A1-20030102-M00007.NB SYSTEM "US20030002096A1-20030102-M00007.NB" NDATA NB>
<!ENTITY US20030002096A1-20030102-M00007.TIF SYSTEM "US20030002096A1-20030102-M00007.TIF" NDATA TIF>
<!ENTITY US20030002096A1-20030102-M00008.NB SYSTEM "US20030002096A1-20030102-M00008.NB" NDATA NB>
<!ENTITY US20030002096A1-20030102-M00008.TIF SYSTEM "US20030002096A1-20030102-M00008.TIF" NDATA TIF>
<!ENTITY US20030002096A1-20030102-M00009.NB SYSTEM "US20030002096A1-20030102-M00009.NB" NDATA NB>
<!ENTITY US20030002096A1-20030102-M00009.TIF SYSTEM "US20030002096A1-20030102-M00009.TIF" NDATA TIF>
<!ENTITY US20030002096A1-20030102-M00010.NB SYSTEM "US20030002096A1-20030102-M00010.NB" NDATA NB>
<!ENTITY US20030002096A1-20030102-M00010.TIF SYSTEM "US20030002096A1-20030102-M00010.TIF" NDATA TIF>
<!ENTITY US20030002096A1-20030102-M00011.NB SYSTEM "US20030002096A1-20030102-M00011.NB" NDATA NB>
<!ENTITY US20030002096A1-20030102-M00011.TIF SYSTEM "US20030002096A1-20030102-M00011.TIF" NDATA TIF>
<!ENTITY US20030002096A1-20030102-M00012.NB SYSTEM "US20030002096A1-20030102-M00012.NB" NDATA NB>
<!ENTITY US20030002096A1-20030102-M00012.TIF SYSTEM "US20030002096A1-20030102-M00012.TIF" NDATA TIF>
<!ENTITY US20030002096A1-20030102-M00013.NB SYSTEM "US20030002096A1-20030102-M00013.NB" NDATA NB>
<!ENTITY US20030002096A1-20030102-M00013.TIF SYSTEM "US20030002096A1-20030102-M00013.TIF" NDATA TIF>
<!ENTITY US20030002096A1-20030102-M00014.NB SYSTEM "US20030002096A1-20030102-M00014.NB" NDATA NB>
<!ENTITY US20030002096A1-20030102-M00014.TIF SYSTEM "US20030002096A1-20030102-M00014.TIF" NDATA TIF>
<!ENTITY US20030002096A1-20030102-D00000.TIF SYSTEM "US20030002096A1-20030102-D00000.TIF" NDATA TIF>
<!ENTITY US20030002096A1-20030102-D00001.TIF SYSTEM "US20030002096A1-20030102-D00001.TIF" NDATA TIF>
<!ENTITY US20030002096A1-20030102-D00002.TIF SYSTEM "US20030002096A1-20030102-D00002.TIF" NDATA TIF>
<!ENTITY US20030002096A1-20030102-D00003.TIF SYSTEM "US20030002096A1-20030102-D00003.TIF" NDATA TIF>
<!ENTITY US20030002096A1-20030102-D00004.TIF SYSTEM "US20030002096A1-20030102-D00004.TIF" NDATA TIF>
<!ENTITY US20030002096A1-20030102-D00005.TIF SYSTEM "US20030002096A1-20030102-D00005.TIF" NDATA TIF>
<!ENTITY US20030002096A1-20030102-D00006.TIF SYSTEM "US20030002096A1-20030102-D00006.TIF" NDATA TIF>
<!ENTITY US20030002096A1-20030102-D00007.TIF SYSTEM "US20030002096A1-20030102-D00007.TIF" NDATA TIF>
<!ENTITY US20030002096A1-20030102-D00008.TIF SYSTEM "US20030002096A1-20030102-D00008.TIF" NDATA TIF>
<!ENTITY US20030002096A1-20030102-D00009.TIF SYSTEM "US20030002096A1-20030102-D00009.TIF" NDATA TIF>
<!ENTITY US20030002096A1-20030102-D00010.TIF SYSTEM "US20030002096A1-20030102-D00010.TIF" NDATA TIF>
]>
<patent-application-publication>
<subdoc-bibliographic-information>
<document-id>
<doc-number>20030002096</doc-number>
<kind-code>A1</kind-code>
<document-date>20030102</document-date>
</document-id>
<publication-filing-type>new</publication-filing-type>
<domestic-filing-data>
<application-number>
<doc-number>10103758</doc-number>
</application-number>
<application-number-series-code>10</application-number-series-code>
<filing-date>20020325</filing-date>
</domestic-filing-data>
<foreign-priority-data>
<priority-application-number>
<doc-number>2001-094234</doc-number>
</priority-application-number>
<filing-date>20010328</filing-date>
<country-code>JP</country-code>
</foreign-priority-data>
<technical-information>
<classification-ipc>
<classification-ipc-primary>
<ipc>G03F003/08</ipc>
</classification-ipc-primary>
<classification-ipc-edition>07</classification-ipc-edition>
</classification-ipc>
<classification-us>
<classification-us-primary>
<uspc>
<class>358</class>
<subclass>518000</subclass>
</uspc>
</classification-us-primary>
</classification-us>
<title-of-invention>Image forming apparatus and masking coefficient calculation method</title-of-invention>
</technical-information>
<inventors>
<first-named-inventor>
<name>
<given-name>Naoki</given-name>
<family-name>Sugiyama</family-name>
</name>
<residence>
<residence-non-us>
<city>Kanagawa</city>
<country-code>JP</country-code>
</residence-non-us>
</residence>
<authority-applicant>INV</authority-applicant>
</first-named-inventor>
</inventors>
<correspondence-address>
<name-1>DICKSTEIN SHAPIRO MORIN &amp; OSHINSKY LLP</name-1>
<name-2></name-2>
<address>
<address-1>2101 L STREET NW</address-1>
<city>WASHINGTON</city>
<state>DC</state>
<postalcode>20037-1526</postalcode>
<country>
<country-code>US</country-code>
</country>
</address>
</correspondence-address>
</subdoc-bibliographic-information>
<subdoc-abstract>
<paragraph id="A-0001" lvl="0">An image forming apparatus for calculating a masking coefficient is provides, in which the masking coefficient is calculated by using RGB input image signals obtained by reading a document of which spectral characteristics are known by an image reading part and CMYK output image signals optimal for reproducing a color of the document. The masking coefficient can be also calculated by using difference values between CMYK output image signals obtained from actually read RGB signals and optimal CMYK output image signals. </paragraph>
</subdoc-abstract>
<subdoc-description>
<summary-of-invention>
<section>
<heading lvl="1">BACKGROUND OF THE INVENTION </heading>
<paragraph id="P-0001" lvl="0"><number>&lsqb;0001&rsqb;</number> 1. Field of the Invention </paragraph>
<paragraph id="P-0002" lvl="0"><number>&lsqb;0002&rsqb;</number> The present invention relates to an image forming apparatus such as a copying machine, a printer and a FAX and the like. More particularly, the present invention relates to an image forming apparatus having a color conversion function for handling a color image. </paragraph>
<paragraph id="P-0003" lvl="0"><number>&lsqb;0003&rsqb;</number> 2. Description of the Related Art </paragraph>
<paragraph id="P-0004" lvl="0"><number>&lsqb;0004&rsqb;</number> Conventionally, for performing color correction in a digital image forming apparatus, there is a technology in which a pattern image formed on an image carrier is transferred to a transfer material and fixed, and the transferred image is read by a scanner, and, then, a tone correction table is selected/generated on the basis of the read image data, so that tone correction or density correction of a printer part is performed. </paragraph>
<paragraph id="P-0005" lvl="0"><number>&lsqb;0005&rsqb;</number> Japanese laid-open patent application No. 10-191061 discloses a technology in which the tone correction table is corrected in consideration of variation of spectral characteristics of the scanner so that density values of CMYK and gray balance are corrected. </paragraph>
<paragraph id="P-0006" lvl="0"><number>&lsqb;0006&rsqb;</number> In a scanner used in an image forming apparatus like a color copying machine, due to change with time in spectral characteristics of an RGB filter in a CCD (Charge Coupled Device) constituting the scanner or due to variations of each machine, even if the same color patch pattern is read, a value read by each scanner may vary from unit to unit. </paragraph>
<paragraph id="P-0007" lvl="0"><number>&lsqb;0007&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1</cross-reference> is a figure for explaining non-uniformity (variation) of spectral transmission characteristics of a B (Blue) filter in a CCD. In <cross-reference target="DRAWINGS">FIG. 1, a</cross-reference>) indicates a spectral transmission factor of a blue (B) filter <highlight><bold>1</bold></highlight> in a CCD, b) indicates a spectral transmission factor of a blue (B) filter <highlight><bold>2</bold></highlight> in the CCD, c) indicates a spectral reflection factor of yellow (Y) patch, and d) indicates a spectral reflection factor of black (K) patch. The horizontal axis indicates a wavelength, while the vertical axis indicates a spectral transmission factor or a spectral reflection factor of the CCD. </paragraph>
<paragraph id="P-0008" lvl="0"><number>&lsqb;0008&rsqb;</number> In this figure, it is assumed that the spectral transmission factors a) and b) have been shifted by a rate indicated at h) respectively, but the same consideration is applicable also to a case where the assumption as described above is not made. </paragraph>
<paragraph id="P-0009" lvl="0"><number>&lsqb;0009&rsqb;</number> Namely, comparing the light transmitted through the blue filter <highlight><bold>1</bold></highlight> in a) to the light transmitted through the blue filter <highlight><bold>2</bold></highlight> in b) under the spectral reflection factor d) of black patch, a quantity of light having transmitted through the blue filter <highlight><bold>1</bold></highlight> is larger by a quantity of light having transmitted through a region e), but is smaller by a quantity of light having transmitted through regions f) and g). </paragraph>
<paragraph id="P-0010" lvl="0"><number>&lsqb;0010&rsqb;</number> As shown in <cross-reference target="DRAWINGS">FIG. 1</cross-reference>, since the spectral characteristics of the blue filter <highlight><bold>1</bold></highlight> in a) and the blue filter <highlight><bold>2</bold></highlight> in b) have been shifted by a rate in h) respectively, in a case of the light having transmitted through the blue filter <highlight><bold>1</bold></highlight> in a), the quantity of light having transmitted through the region e) is equal to the quantity of light blocked by the regions f) and g), and for this reason a difference for a blue signal between a) and b) is small as far as the black patch is concerned. </paragraph>
<paragraph id="P-0011" lvl="0"><number>&lsqb;0011&rsqb;</number> To strictly examine the different above, it is necessary to take into considerations the spectral characteristics of the light source and dependency of sensitivity of a CCD on wavelength, but when calibrating shading of a scanner, by using an achromatic-colored reflection plate with low dependency of a spectral reflection factor for instance in gray on wavelength in a visible light area, the difference between the filter <highlight><bold>1</bold></highlight> and the filter <highlight><bold>2</bold></highlight> is calibrated. </paragraph>
<paragraph id="P-0012" lvl="0"><number>&lsqb;0012&rsqb;</number> However, in a case of yellow (Y) patch, the difference between filters in a) and b) appears as a difference of light having transmitted through or having been blocked by the region g), and the difference is clearly larger than that in a case of black patch. Also the difference can not be calibrated even by a shading calibration using an achromatic-colored reflection plate. </paragraph>
<paragraph id="P-0013" lvl="0"><number>&lsqb;0013&rsqb;</number> The variations in spectral transmission factors among filters in a CCD can be calibrated in a case of achromatic colors like white or gray by means of shading calibration so that the RGB data become uniform, but in a case of a document with a spectral characteristic dependent on wavelength, the calibration can not be executed appropriately, and sometimes values for R, G, and B may vary unit by unit. </paragraph>
<paragraph id="P-0014" lvl="0"><number>&lsqb;0014&rsqb;</number> Due to the effect of the variation of the spectral characteristics, in a case where some machines reads the same patch having spectral reflection characteristics similar to the spectral transmission characteristics of the CCD, even if the same RGB output is set when performing shading by using an achromatic color, the outputs are different machine by machine. </paragraph>
<paragraph id="P-0015" lvl="0"><number>&lsqb;0015&rsqb;</number> The difference becomes a cause of disabling faithful color reproduction in a color calibration process for obtaining record values of cyan, magenta, yellow and black optimal for reproducing the color from RGB values of a document read by the scanner. </paragraph>
<paragraph id="P-0016" lvl="0"><number>&lsqb;0016&rsqb;</number> It is effective for correcting gray balance of achromatic color to correct the tone correction table as is disclosed in the Japanese laid-open patent application No. 10-191061 in the conventional technology for calibrating variation of the spectral characteristics of the scanner. However, there is a problem in that this technology is not applicable for reproducing chromatic color faithfully. </paragraph>
<paragraph id="P-0017" lvl="0"><number>&lsqb;0017&rsqb;</number> That is, in the invention disclosed in the Japanese laid-open patent application No. 10-191061, patch data is read by the scanner, and characteristic values of a printer table which is the tone correction table are adjusted on the basis of experiment and the like such that the density of the output of the printer after performing ACC becomes constant even when the machine is changed, so that good tone can be obtained. Therefore, since any calibration of variation of the spectral characteristics of the CCD in the scanner is not performed in the image processing part in the Japanese laid-open patent application No. 10-191061, this variation is not corrected in the input stage of the printer part, but, corrected by the tone correction table in the printer. In addition, since the correction is tone correction, it is effective for gray balance of achromatic color. However, there is a problem in that it is not enough for performing faithful color reproduction for chromatic color. </paragraph>
</section>
<section>
<heading lvl="1">SUMMARY OF THE INVENTION </heading>
<paragraph id="P-0018" lvl="0"><number>&lsqb;0018&rsqb;</number> An object of the present invention is to provide an image forming apparatus which can calibrate variation of spectral characteristics of the scanner CCD, and obtain a CMYK output image signal which can reproduce a color faithfully without variation for documents of chromatic color. </paragraph>
<paragraph id="P-0019" lvl="0"><number>&lsqb;0019&rsqb;</number> The object can be achieved by an image forming apparatus including: </paragraph>
<paragraph id="P-0020" lvl="2"><number>&lsqb;0020&rsqb;</number> an image reading part, including a CCD, for optically reading a color document by scanning the color document; </paragraph>
<paragraph id="P-0021" lvl="2"><number>&lsqb;0021&rsqb;</number> an image processing part for converting, by using a masking coefficient, RGB input image signals obtained by reading the color document by the image reading part into CMYK output image signals used for recording by developing parts; </paragraph>
<paragraph id="P-0022" lvl="2"><number>&lsqb;0022&rsqb;</number> a part for calculating the masking coefficient by using RGB input image signals obtained by reading a document of which spectral characteristics are known by the image reading part and CMYK output image signals optimal for reproducing a color of the document. </paragraph>
<paragraph id="P-0023" lvl="0"><number>&lsqb;0023&rsqb;</number> According to the present invention, color calibration is performed not by correcting the tone correction table in the printer part, instead of that, the masking coefficient is corrected (calculated) on the basis of points on the planes extending radially from an achromatic color axis by which planes a color space is divided irrespective of achromatic color or chromatic color. Thus, variation of spectral characteristics of the scanner CCD can be calibrated irrespective of for achromatic color or chromatic color, so that faithful color reproduction can be performed. </paragraph>
<paragraph id="P-0024" lvl="0"><number>&lsqb;0024&rsqb;</number> That is, according to the present invention, by using RGB input image signals obtained by actually reading a document (color patch) by a scanner having variation and CMYK output image signals of developing parts optimal for reproducing color of the document of which spectral characteristics are known, a masking coefficient is calculated such that the RGB input image signals are converted to the optimal CMYK output image signals by the masking coefficient. Thus, faithful color reproduction can be performed irrespective of achromatic color or chromatic color. </paragraph>
<paragraph id="P-0025" lvl="0"><number>&lsqb;0025&rsqb;</number> The image forming apparatus may further includes: </paragraph>
<paragraph id="P-0026" lvl="2"><number>&lsqb;0026&rsqb;</number> a hue determining part for determining a hue to which the RGB input image signals obtained by reading the document belong among hues corresponding to RGB color spaces divided by planes including an achromatic color axis; and </paragraph>
<paragraph id="P-0027" lvl="2"><number>&lsqb;0027&rsqb;</number> a memory part for storing CMYK output image signal values optimal for reproducing a color of the document of which spectral characteristics are known; </paragraph>
<paragraph id="P-0028" lvl="2"><number>&lsqb;0028&rsqb;</number> wherein the image reading part reads the document of which spectral characteristics are known; </paragraph>
<paragraph id="P-0029" lvl="2"><number>&lsqb;0029&rsqb;</number> the hue determining part determines a hue to which the color of the document belongs; </paragraph>
<paragraph id="P-0030" lvl="2"><number>&lsqb;0030&rsqb;</number> optimal CMYK output image signals is read from the memory part according to the hue; and </paragraph>
<paragraph id="P-0031" lvl="2"><number>&lsqb;0031&rsqb;</number> the masking coefficient is calculated from the RGB input image signals obtained by reading the document and the CMYK output image signals. </paragraph>
<paragraph id="P-0032" lvl="0"><number>&lsqb;0032&rsqb;</number> The above object can be also achieved by an image forming apparatus comprising: </paragraph>
<paragraph id="P-0033" lvl="2"><number>&lsqb;0033&rsqb;</number> an image reading part, including a CCD, for optically reading a color document by scanning the color document; </paragraph>
<paragraph id="P-0034" lvl="2"><number>&lsqb;0034&rsqb;</number> an image processing part for converting, by using a masking coefficient, RGB input image signals obtained by reading the color document by the image reading part into CMYK output image signals used for recording by developing parts; </paragraph>
<paragraph id="P-0035" lvl="2"><number>&lsqb;0035&rsqb;</number> a part for calculating difference values between first CMYK output image signals and second CMYK output image signals, and calculating the masking coefficient by using the difference values, wherein the first CMYK output image signals are obtained by converting, by using a predetermined masking coefficient, first RGB input image signals obtained by reading a document of which spectral characteristics are known by using the image reading part, and the second CMYK output image signals are obtained by converting, by using the predetermined masking coefficient, second RGB input image signals obtained if the document of which spectral characteristics are known is read by an image reading device which has standard spectral characteristics. </paragraph>
<paragraph id="P-0036" lvl="0"><number>&lsqb;0036&rsqb;</number> According to this invention, color calibration is performed not by correcting the tone correction table in the printer part, instead of that, the masking coefficient is corrected (calculated) on the basis of points on the planes extending radially from an achromatic color axis by which planes a color space is divided irrespective of achromatic color or chromatic color. Thus, variation of spectral characteristics of the scanner CCD can be calibrated irrespective of for achromatic color or chromatic color, so that faithful color reproduction can be performed. </paragraph>
<paragraph id="P-0037" lvl="0"><number>&lsqb;0037&rsqb;</number> That is, according to the present invention, the difference values between CMYK output image signals obtained, by using a predetermined masking coefficient, from RGB input image signals obtained by actually reading a document of which the spectral characteristics are known by a scanner CCD and CMYK output image signals obtained, by using the predetermined masking coefficient, from RGB input image signals obtained by if the document of which the spectral characteristics are known is read by a scanner CCD having standard spectral characteristics. Then, the masking coefficient used for color conversion is calculated by using the difference values. By using the difference values, the masking coefficient can be obtained such that the error (due to variation of spectral characteristics of the scanner CCD) which is represented by the difference values is calibrated. Thus, CMYK values can be obtained from the RGB input image signals actually read by the scanner CCD. Therefore, faithful color reproduction can be performed irrespective of achromatic color or chromatic color. </paragraph>
<paragraph id="P-0038" lvl="0"><number>&lsqb;0038&rsqb;</number> In the image forming apparatus, the predetermined masking coefficient may be calculated by using first two points of spectral data on an achromatic color axis, second two points of spectral data on two boundary planes which are boundary planes forming a color space corresponding to the spectral characteristics of the document in which the second two points are not on the achromatic color axis, and four points of CMYK output image signal data optimal for reproducing colors of four points of the first and second two points; and </paragraph>
<paragraph id="P-0039" lvl="2"><number>&lsqb;0039&rsqb;</number> the predetermined masking coefficient is corrected by correcting the four points of CMYK output image signals by using the difference values. </paragraph>
<paragraph id="P-0040" lvl="0"><number>&lsqb;0040&rsqb;</number> In addition, the predetermined masking coefficient may be calculated by using first two points of spectral data on an achromatic color axis, second two points of spectral data on two boundary planes which are boundary planes forming a color space corresponding to the spectral characteristics of the document in which the second two points are not on the achromatic color axis, and four points of CMYK output image signal data optimal for reproducing colors of four points of the first and second two points; and </paragraph>
<paragraph id="P-0041" lvl="2"><number>&lsqb;0041&rsqb;</number> the predetermined masking coefficient is corrected by correcting CMYK output image signals of the second two points on the two boundary planes by using the difference values in which CMYK output image signals of the first two points on the achromatic color axis are not corrected. </paragraph>
<paragraph id="P-0042" lvl="0"><number>&lsqb;0042&rsqb;</number> According to this invention, the difference values are not added to printer vectors of the white point and the black point when calculating the masking coefficient, and, the difference values are added to printer vectors of other two point colors. Accordingly, discontinuity in each boundary plane can be prevented. </paragraph>
<paragraph id="P-0043" lvl="0"><number>&lsqb;0043&rsqb;</number> The image forming apparatus may include a part for storing RGB input image signals obtained if the document of which spectral characteristics are known is read by an image reading device which has standard spectral characteristics, or CMYK output image signals converted from the RGB input image signals beforehand. </paragraph>
<paragraph id="P-0044" lvl="0"><number>&lsqb;0044&rsqb;</number> According to the invention, since data necessary for calculating the masking coefficient is stored, the necessary values can be obtained easily when the apparatus is manufactured or when a serviceman performs adjustment. </paragraph>
<paragraph id="P-0045" lvl="0"><number>&lsqb;0045&rsqb;</number> In addition, the image forming apparatus may further include a part for storing the difference values. Thus, the masking coefficient can be easily obtained. Further, the difference values can be used for other apparatus and the like. </paragraph>
<paragraph id="P-0046" lvl="0"><number>&lsqb;0046&rsqb;</number> In the image forming apparatus, color patches having the same spectral characteristic as those of divided points on the planes used for dividing the color space can be used for the document of which spectral characteristics are known, and difference values are obtained for each divided point. </paragraph>
<paragraph id="P-0047" lvl="0"><number>&lsqb;0047&rsqb;</number> By using a document having a color close to the boundary point by which the hue is divided, the color of the boundary point can be reproduced faithfully. </paragraph>
<paragraph id="P-0048" lvl="0"><number>&lsqb;0048&rsqb;</number> The present invention can be also configures as a method for calculating the masking coefficient, and a computer readable medium storing a program for calculating the masking coefficient.</paragraph>
</section>
</summary-of-invention>
<brief-description-of-drawings>
<section>
<heading lvl="1">BRIEF DESCRIPTION OF THE DRAWINGS </heading>
<paragraph id="P-0049" lvl="0"><number>&lsqb;0049&rsqb;</number> Other objects, features and advantages of the present invention will become more apparent from the following detailed description when read in conjunction with the accompanying drawings, in which: </paragraph>
<paragraph id="P-0050" lvl="0"><number>&lsqb;0050&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1</cross-reference> is a figure for explaining non-uniformity of spectral transmission characteristic of a B (Blue) filter in a CCD; </paragraph>
<paragraph id="P-0051" lvl="0"><number>&lsqb;0051&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 2</cross-reference> is a schematic view showing mechanical configuration of the main body of a copying machine <highlight><bold>101</bold></highlight>; </paragraph>
<paragraph id="P-0052" lvl="0"><number>&lsqb;0052&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3</cross-reference> is a view for explanation of the control system in the main body of the copying machine; </paragraph>
<paragraph id="P-0053" lvl="0"><number>&lsqb;0053&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 4</cross-reference> is a view for explanation of electric configuration of an image processing part; </paragraph>
<paragraph id="P-0054" lvl="0"><number>&lsqb;0054&rsqb;</number> <cross-reference target="DRAWINGS">FIGS. 5A and 5B</cross-reference> are views of color spaces for explanation of calibration processing; </paragraph>
<paragraph id="P-0055" lvl="0"><number>&lsqb;0055&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 6</cross-reference> is a flowchart indicating a procedure for obtaining difference values; </paragraph>
<paragraph id="P-0056" lvl="0"><number>&lsqb;0056&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 7</cross-reference> shows examples of color patches; </paragraph>
<paragraph id="P-0057" lvl="0"><number>&lsqb;0057&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 8</cross-reference> shows a block diagram of the color calibration processing circuit; </paragraph>
<paragraph id="P-0058" lvl="0"><number>&lsqb;0058&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 9</cross-reference> shows a block diagram of the printer <highlight><bold>500</bold></highlight> according to a fourth embodiment of the present invention; and </paragraph>
<paragraph id="P-0059" lvl="0"><number>&lsqb;0059&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 10</cross-reference> shows a configuration when a color calibration part <highlight><bold>600</bold></highlight> is in the outside of the printer.</paragraph>
</section>
</brief-description-of-drawings>
<detailed-description>
<section>
<heading lvl="1">DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENTS </heading>
<paragraph id="P-0060" lvl="0"><number>&lsqb;0060&rsqb;</number> (First Embodiment) </paragraph>
<paragraph id="P-0061" lvl="0"><number>&lsqb;0061&rsqb;</number> First, the first embodiment of the present invention will be described. The first embodiment is a case when a color calibration technique of the present invention is applied to an electronic photocopying machine (hereinafter, simply called as a copying machine) which is an image forming apparatus. </paragraph>
<paragraph id="P-0062" lvl="0"><number>&lsqb;0062&rsqb;</number> Although this invention mainly relates to correction or calculation of a masking coefficient for color calibration process performed in an after-mentioned color calibration circuit, a configuration and the operation of the copying machine will be described first with reference to FIGS. <highlight><bold>2</bold></highlight>-<highlight><bold>4</bold></highlight>, and the color calibration process will be described in detail after that. </paragraph>
<paragraph id="P-0063" lvl="0"><number>&lsqb;0063&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 2</cross-reference> is a schematic view showing mechanical configuration of the main body of a copying machine <highlight><bold>101</bold></highlight>. Outline of the mechanism of the main body of the copying machine <highlight><bold>101</bold></highlight> of the present invention will be described with reference to <cross-reference target="DRAWINGS">FIG. 2</cross-reference>. </paragraph>
<paragraph id="P-0064" lvl="0"><number>&lsqb;0064&rsqb;</number> In <cross-reference target="DRAWINGS">FIG. 2</cross-reference>, an organic photosensitive (OPC) drum <highlight><bold>102</bold></highlight> having a diameter of 120 mm as an image carrier is provided in substantially the center of the main body of the copying machine <highlight><bold>101</bold></highlight>. In addition, successively arranged in the periphery of the organic photosensitive (OPC) are an electrifying charger <highlight><bold>103</bold></highlight> for electrifying the surface of this photosensitive drum <highlight><bold>102</bold></highlight>, a laser optical system <highlight><bold>104</bold></highlight> for irradiating the surface of the uniformly electrified photosensitive drum <highlight><bold>102</bold></highlight> with a semiconductor laser beam to form an electrostatic latent image, a black-developing device <highlight><bold>105</bold></highlight> and three types of developing device s<highlight><bold>106</bold></highlight>, <highlight><bold>107</bold></highlight>, <highlight><bold>108</bold></highlight> for yellow Y, magenta M, and cyan C for supplying toner for each color to the electrostatic latent image to be developed and obtaining each toner image in each color, an intermediate transfer belt <highlight><bold>109</bold></highlight> for successively transferring the toner images in each of the colors formed on the photosensitive drum <highlight><bold>102</bold></highlight>, a bias roller <highlight><bold>110</bold></highlight> for applying a transfer voltage to this intermediate transfer belt <highlight><bold>109</bold></highlight>, a cleaning device <highlight><bold>111</bold></highlight> for removing toner residues on the surface of the photosensitive drum <highlight><bold>102</bold></highlight> after the toner image is transferred onto transfer material, and a charge-removing section <highlight><bold>112</bold></highlight> for removing charge residues on the surface of the photosensitive drum <highlight><bold>102</bold></highlight> after the toner image is transferred thereonto. </paragraph>
<paragraph id="P-0065" lvl="0"><number>&lsqb;0065&rsqb;</number> Provided therein are also a transfer bias roller <highlight><bold>113</bold></highlight> for applying a voltage for transferring the toner image transferred along the intermediate transfer belt <highlight><bold>109</bold></highlight> onto transfer material and a belt cleaning device <highlight><bold>114</bold></highlight> for cleaning the image of toner residues on the intermediate transfer belt <highlight><bold>109</bold></highlight> after the toner image is transferred onto the transfer material. </paragraph>
<paragraph id="P-0066" lvl="0"><number>&lsqb;0066&rsqb;</number> A fixing device <highlight><bold>116</bold></highlight> for fixing the toner image by heating or pressuring is provided in the exit side of an edge section of a transfer belt <highlight><bold>115</bold></highlight> for transferring transfer material peeled from the intermediate transfer belt <highlight><bold>109</bold></highlight>, and a paper feeder tray <highlight><bold>117</bold></highlight> is also attached to the exit section of this fixing device <highlight><bold>116</bold></highlight>. </paragraph>
<paragraph id="P-0067" lvl="0"><number>&lsqb;0067&rsqb;</number> A contact glass <highlight><bold>118</bold></highlight> as a document base arranged on the top section of the main body of a copying machine <highlight><bold>101</bold></highlight> and an exposing lamp <highlight><bold>119</bold></highlight> for irradiating a document on this contact glass <highlight><bold>118</bold></highlight> with scanning light are provided in the upper side of the laser optical system <highlight><bold>104</bold></highlight>, and a reflected light from the document is led to an image-formation lens <highlight><bold>122</bold></highlight> by a reflecting mirror <highlight><bold>121</bold></highlight> to be introduced into an image sensor array <highlight><bold>123</bold></highlight> of a CCD (Charge Coupled Device) as a photoelectric transfer element. Image signals converted to electric signals in the image sensor array <highlight><bold>123</bold></highlight> of a CCD oscillate a semiconductor laser in the laser optical system <highlight><bold>104</bold></highlight> through the image processing apparatus not shown herein. </paragraph>
<paragraph id="P-0068" lvl="0"><number>&lsqb;0068&rsqb;</number> Next, description is made for a control system of the copying machine with reference to <cross-reference target="DRAWINGS">FIG. 3</cross-reference>. <cross-reference target="DRAWINGS">FIG. 3</cross-reference> is a view for explanation of the control system in the main body of the copying machine shown in <cross-reference target="DRAWINGS">FIG. 2</cross-reference>. </paragraph>
<paragraph id="P-0069" lvl="0"><number>&lsqb;0069&rsqb;</number> As shown in <cross-reference target="DRAWINGS">FIG. 3</cross-reference>, the control system has a main control part (CPU) <highlight><bold>130</bold></highlight>, and a ROM <highlight><bold>131</bold></highlight> and a RAM <highlight><bold>132</bold></highlight> for this main control part <highlight><bold>130</bold></highlight> are additionally provided therein. Connected to the main control part <highlight><bold>130</bold></highlight> are also a laser-optical system control part <highlight><bold>134</bold></highlight>, a power supply circuit <highlight><bold>135</bold></highlight>, an optical sensor <highlight><bold>136</bold></highlight>, a toner density sensor <highlight><bold>137</bold></highlight>, an environment sensor <highlight><bold>138</bold></highlight>, a photosensitive body surface potential sensor <highlight><bold>139</bold></highlight>, a toner supplying circuit <highlight><bold>140</bold></highlight>, an intermediate transfer belt driving part <highlight><bold>141</bold></highlight>, and an operating part <highlight><bold>142</bold></highlight> respectively through an interface I/O <highlight><bold>133</bold></highlight>. </paragraph>
<paragraph id="P-0070" lvl="0"><number>&lsqb;0070&rsqb;</number> The laser system control part <highlight><bold>134</bold></highlight> adjusts laser output from the laser optical system <highlight><bold>104</bold></highlight>, and the power supply circuit <highlight><bold>135</bold></highlight> gives a specified discharging voltage for electrification to the electrifying charger <highlight><bold>113</bold></highlight>, gives a development bias at a specified voltage to the developing devices <highlight><bold>105</bold></highlight>, <highlight><bold>106</bold></highlight>, <highlight><bold>107</bold></highlight>, <highlight><bold>108</bold></highlight>, and also gives a specified transfer voltage to the bias roller <highlight><bold>110</bold></highlight> as well as to the transfer bias roller <highlight><bold>113</bold></highlight>. </paragraph>
<paragraph id="P-0071" lvl="0"><number>&lsqb;0071&rsqb;</number> The optical sensor <highlight><bold>136</bold></highlight> includes light-emitter such as light-emitting diodes or the like and light-receptors such as photosensors or the like each provided adjacent to an area of the image after being transferred from the photosensitive drum <highlight><bold>102</bold></highlight>, and a quantity of deposited toner in a toner image for a detection-pattern latent image formed on the photosensitive drum <highlight><bold>102</bold></highlight> and a quantity of deposited toner in the background color section are detected for each color respectively, and so-called potential residues on the photosensitive body after electrification thereon is removed is also detected. </paragraph>
<paragraph id="P-0072" lvl="0"><number>&lsqb;0072&rsqb;</number> The detection output signal from this photoelectric sensor <highlight><bold>136</bold></highlight> is applied to the photoelectric sensor control part not shown herein. The photoelectric sensor control part computes a ratio between the quantity of deposited toner in the detection-pattern toner image and the quantity of deposited toner in the background color part, compares the ratio value to the reference value to detect fluctuation in an image density, and corrects the control values for the toner density sensor <highlight><bold>137</bold></highlight>. </paragraph>
<paragraph id="P-0073" lvl="0"><number>&lsqb;0073&rsqb;</number> In addition, the photoelectric sensor control part has a function for computing an exposure lamp voltage corresponding to it and a function for detecting residual voltage of a photosensitizer and comparing the residual voltage with a reference value, and computing a development bias voltage value corresponding to it. The exposure lamp voltage value and the development bias voltage value detected in this photoelectric sensor control part are applied to an exposure control circuit which controls driving power source voltage of the exposing lamp <highlight><bold>119</bold></highlight> and a development bias control circuit which applies a voltage to developing devices <highlight><bold>105</bold></highlight>-<highlight><bold>108</bold></highlight> by using development bias. </paragraph>
<paragraph id="P-0074" lvl="0"><number>&lsqb;0074&rsqb;</number> Further, the toner density sensor <highlight><bold>137</bold></highlight> detects a toner density according to changes of magnetic permeability in a developer existing in each of the developing devices <highlight><bold>105</bold></highlight> to <highlight><bold>108</bold></highlight>. The toner density sensor <highlight><bold>137</bold></highlight> has a function of applying a toner supply signal with amplitude, in a case where the detected toner density value is compared to the reference value and the toner density is found under the specified value which indicates a short of toner therein, corresponding to the shortage thereof to the toner supplying circuit <highlight><bold>140</bold></highlight>. </paragraph>
<paragraph id="P-0075" lvl="0"><number>&lsqb;0075&rsqb;</number> The potential sensor <highlight><bold>139</bold></highlight> detects a surface potential of the photosensitive body <highlight><bold>102</bold></highlight> as an image carrier, and the intermediate transfer belt driving part <highlight><bold>141</bold></highlight> controls driving of the intermediate transfer belt <highlight><bold>109</bold></highlight>. </paragraph>
<paragraph id="P-0076" lvl="0"><number>&lsqb;0076&rsqb;</number> Non-magnetic cylindrical development sleeves <highlight><bold>201</bold></highlight>B, <highlight><bold>201</bold></highlight>Y, <highlight><bold>201</bold></highlight>M, <highlight><bold>201</bold></highlight>C which are developer containers are provided in the inside of the developing devices <highlight><bold>105</bold></highlight>-<highlight><bold>108</bold></highlight> with a predetermined gap to the photosensitive drum <highlight><bold>102</bold></highlight> (only 201M is shown in <cross-reference target="DRAWINGS">FIG. 3</cross-reference>), wherein the gap between the sleeve and the photosensitive drum 102 is 0.60 mm. In each of the development sleeves 201B, 201Y, 201M, 201C, a development magnet formed such that a plurality of different magnetic poles are alternately arranged and a magnetic shield plate formed of a magnetic substance are provided. </paragraph>
<paragraph id="P-0077" lvl="0"><number>&lsqb;0077&rsqb;</number> When developing, each of the development sleeves <highlight><bold>201</bold></highlight>B, <highlight><bold>201</bold></highlight>Y, <highlight><bold>201</bold></highlight>M, <highlight><bold>201</bold></highlight>C rotates in the direction of the arrow by a yellow development sleeve driving motor, a magenta development sleeve driving motor, a cyan development sleeve driving motor and the like. A case where the development sleeve rotates in this direction is called &ldquo;forward rotation&rdquo;. </paragraph>
<paragraph id="P-0078" lvl="0"><number>&lsqb;0078&rsqb;</number> A developer including a black toner and carrier is contained in the black-developing device <highlight><bold>105</bold></highlight> and is agitated in association with rotation of a developer agitating member <highlight><bold>202</bold></highlight>, so that the developer sucked up onto a sleeve <highlight><bold>201</bold></highlight> by a developer restricting member is adjusted on the developing sleeve <highlight><bold>201</bold></highlight>B. This supplied developer rotates in the direction of rotation of the developing sleeve <highlight><bold>201</bold></highlight>B as a magnetic brush while it is magnetically carried on the developing sleeve <highlight><bold>201</bold></highlight>B. </paragraph>
<paragraph id="P-0079" lvl="0"><number>&lsqb;0079&rsqb;</number> Next description is made for electric configuration of an image processing part with the reference to a block diagram shown in <cross-reference target="DRAWINGS">FIG. 4</cross-reference>, in which the color calibration process of the present invention is performed in the image processing part. The image processing part corresponds to the above-mentioned image processing apparatus and installed in the main body of the copying machine, however, the image processing part is not shown in <cross-reference target="DRAWINGS">FIG. 1</cross-reference> and <cross-reference target="DRAWINGS">FIG. 2</cross-reference>. </paragraph>
<paragraph id="P-0080" lvl="0"><number>&lsqb;0080&rsqb;</number> In <cross-reference target="DRAWINGS">FIG. 1</cross-reference>, designated at the reference numeral <highlight><bold>401</bold></highlight> is a color scanner, at <highlight><bold>402</bold></highlight> a shading calibrating circuit, at <highlight><bold>403</bold></highlight> an RGB&ggr;-calibrating circuit, at <highlight><bold>404</bold></highlight> an image separating circuit, at <highlight><bold>405</bold></highlight> an MTF calibrating circuit, at <highlight><bold>406</bold></highlight> a color calibration processing circuit, at <highlight><bold>407</bold></highlight> a scaling circuit, at <highlight><bold>408</bold></highlight> an image processing (creating) circuit, at <highlight><bold>409</bold></highlight> an MTF filter, at <highlight><bold>410</bold></highlight> a &ggr;-calibrating circuit, at <highlight><bold>411</bold></highlight> a gradation processing circuit, and at <highlight><bold>412</bold></highlight> a printer. </paragraph>
<paragraph id="P-0081" lvl="0"><number>&lsqb;0081&rsqb;</number> The scanner corresponds to the image sensor array <highlight><bold>123</bold></highlight> in the CCD in <cross-reference target="DRAWINGS">FIG. 2</cross-reference>, and the printer part <highlight><bold>412</bold></highlight> corresponds to a part relating to image forming after the laser optical system <highlight><bold>104</bold></highlight>. </paragraph>
<paragraph id="P-0082" lvl="0"><number>&lsqb;0082&rsqb;</number> A document to be copied is resolved into colors of R, G, B and read by the color scanner <highlight><bold>401</bold></highlight>. Non-uniformity due to characteristics of an image pickup device or non-uniformity in irradiation of a light source or the like are calibrated in the shading calibrating circuit <highlight><bold>402</bold></highlight>. Read signals from the color scanner <highlight><bold>401</bold></highlight> are converted from data for reflection factors to data for brightness in the RGB&ggr;-calibrating circuit <highlight><bold>403</bold></highlight>. Determination is made between a character part and a photographic part as well as between chromatic color and achromatic color in the image separating circuit <highlight><bold>404</bold></highlight>. Degradation of an MTF characteristics in an input system, especially in a high frequency area is calibrated in the MTF calibrating circuit <highlight><bold>405</bold></highlight>. </paragraph>
<paragraph id="P-0083" lvl="0"><number>&lsqb;0083&rsqb;</number> The color calibration processing circuit <highlight><bold>406</bold></highlight> which relates to color calibration processing of the present invention includes a color calibration processing part <highlight><bold>4061</bold></highlight> for correcting a difference between color-resolution characteristics in the input system and spectral characteristics of color materials in an output system and computing a rate of color materials for CMYK required for faithful color reproduction and a UCR processing <highlight><bold>4062</bold></highlight>. Details will be described later. </paragraph>
<paragraph id="P-0084" lvl="0"><number>&lsqb;0084&rsqb;</number> In the scaling circuit <highlight><bold>407</bold></highlight>, vertical and horizontal scaling is executed, and a repeat processing or the like is executed in the image processing (creating) circuit <highlight><bold>408</bold></highlight>. </paragraph>
<paragraph id="P-0085" lvl="0"><number>&lsqb;0085&rsqb;</number> Executed in the MTF filter <highlight><bold>409</bold></highlight> is processing for changing frequency characteristics of image signals such as edge enhancement or smoothing or the like according to a user&apos;s taste to an image such as a sharp image or a soft image or the like. </paragraph>
<paragraph id="P-0086" lvl="0"><number>&lsqb;0086&rsqb;</number> Image signals are calibrated in the e-calibrating circuit <highlight><bold>410</bold></highlight> according to characteristics of a printer <highlight><bold>412</bold></highlight>. Processing such as eliminating a background color or the like can concurrently be executed also in the y-calibrating circuit <highlight><bold>410</bold></highlight>. Dither processing or pattern processing is executed in the gradation processing circuit <highlight><bold>411</bold></highlight>. </paragraph>
<paragraph id="P-0087" lvl="0"><number>&lsqb;0087&rsqb;</number> Provided therein are interfaces I/F <highlight><bold>413</bold></highlight>, <highlight><bold>414</bold></highlight> for processing image data read by the scanner <highlight><bold>401</bold></highlight> in an external image processing unit or the like or outputting the image data from the external image processing unit to the printer <highlight><bold>412</bold></highlight>. </paragraph>
<paragraph id="P-0088" lvl="0"><number>&lsqb;0088&rsqb;</number> A CPU <highlight><bold>415</bold></highlight> for controlling the image processing circuit described above, a ROM <highlight><bold>416</bold></highlight>, and a RAM <highlight><bold>417</bold></highlight> are connected to each other through a BUS <highlight><bold>418</bold></highlight>. The CPU <highlight><bold>415</bold></highlight> is connected to a system controller <highlight><bold>419</bold></highlight> through a serial I/F, and commands from the operating section or the like not shown herein are sent thereto. The CPU <highlight><bold>415</bold></highlight>, ROM <highlight><bold>416</bold></highlight>, RAM <highlight><bold>417</bold></highlight> and the operation part may be the same as the CPU <highlight><bold>130</bold></highlight>, ROM <highlight><bold>131</bold></highlight>, RAM <highlight><bold>132</bold></highlight> and the operation part <highlight><bold>142</bold></highlight> in the control system shown in <cross-reference target="DRAWINGS">FIG. 3</cross-reference>, or may be not the same as those. </paragraph>
<paragraph id="P-0089" lvl="0"><number>&lsqb;0089&rsqb;</number> The color calibration process in this embodiment is performed in the above-mentioned color calibration processing circuit <highlight><bold>406</bold></highlight>. In the following, the process method is described by using <cross-reference target="DRAWINGS">FIGS. 5A and 5B</cross-reference> showing a color space. </paragraph>
<paragraph id="P-0090" lvl="0"><number>&lsqb;0090&rsqb;</number> As shown in <cross-reference target="DRAWINGS">FIG. 5</cross-reference>A, in the color calibration processing in this embodiment, the color space (R,G,B) is divided by planes extending radially from an achromatic color axis (R&equals;G&equals;B). The hue determining circuit <highlight><bold>422</bold></highlight> decides where an input image signal (R,G,B) exists among the divided spaces. After that, color calibration processing is performed by using the following equation by using a masking coefficient which have been set for each space, in which, as is indicated in the equation (1), the masking coefficient can be represented as a matrix. At the time, linear processing and the like is performed as necessary. Hereinafter, a divided point is used meaning a point at which a boundary plane and an edge are intersected like a point A in <cross-reference target="DRAWINGS">FIG. 5A</cross-reference>.  
<math-cwu id="MATH-US-00001">
<number>1</number>
<math>
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mo>(</mo>
          <mtable>
            <mtr>
              <mtd>
                <mi>C</mi>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <mi>M</mi>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <mi>Y</mi>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <mi>K</mi>
              </mtd>
            </mtr>
          </mtable>
          <mo>)</mo>
        </mrow>
        <mo>=</mo>
        <mrow>
          <mrow>
            <mo>(</mo>
            <mtable>
              <mtr>
                <mtd>
                  <msub>
                    <mi>a</mi>
                    <mi>cr</mi>
                  </msub>
                </mtd>
                <mtd>
                  <msub>
                    <mi>a</mi>
                    <mi>cg</mi>
                  </msub>
                </mtd>
                <mtd>
                  <msub>
                    <mi>a</mi>
                    <mi>cb</mi>
                  </msub>
                </mtd>
                <mtd>
                  <msub>
                    <mi>a</mi>
                    <mi>c</mi>
                  </msub>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <msub>
                    <mi>a</mi>
                    <mi>mr</mi>
                  </msub>
                </mtd>
                <mtd>
                  <msub>
                    <mi>a</mi>
                    <mi>mg</mi>
                  </msub>
                </mtd>
                <mtd>
                  <msub>
                    <mi>a</mi>
                    <mi>mb</mi>
                  </msub>
                </mtd>
                <mtd>
                  <msub>
                    <mi>a</mi>
                    <mi>m</mi>
                  </msub>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <msub>
                    <mi>a</mi>
                    <mi>yr</mi>
                  </msub>
                </mtd>
                <mtd>
                  <msub>
                    <mi>a</mi>
                    <mi>yg</mi>
                  </msub>
                </mtd>
                <mtd>
                  <msub>
                    <mi>a</mi>
                    <mi>yb</mi>
                  </msub>
                </mtd>
                <mtd>
                  <msub>
                    <mi>a</mi>
                    <mi>y</mi>
                  </msub>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <msub>
                    <mi>a</mi>
                    <mi>kr</mi>
                  </msub>
                </mtd>
                <mtd>
                  <msub>
                    <mi>a</mi>
                    <mi>kg</mi>
                  </msub>
                </mtd>
                <mtd>
                  <msub>
                    <mi>a</mi>
                    <mi>kb</mi>
                  </msub>
                </mtd>
                <mtd>
                  <msub>
                    <mi>a</mi>
                    <mi>k</mi>
                  </msub>
                </mtd>
              </mtr>
            </mtable>
            <mo>)</mo>
          </mrow>
          <mo>&times;</mo>
          <mrow>
            <mo>(</mo>
            <mtable>
              <mtr>
                <mtd>
                  <mi>R</mi>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mi>G</mi>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mi>B</mi>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mn>1</mn>
                </mtd>
              </mtr>
            </mtable>
            <mo>)</mo>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>1</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
<mathematica-file id="MATHEMATICA-00001" file="US20030002096A1-20030102-M00001.NB"/>
<image id="EMI-M00001" wi="216.027" he="47.03265" file="US20030002096A1-20030102-M00001.TIF" imf="TIFF" ti="MF"/>
</math-cwu>
</paragraph>
<paragraph id="P-0091" lvl="0"><number>&lsqb;0091&rsqb;</number> Normally, the masking coefficient in each space is calculated by using a following equation after determining values of R,G,B of four points which are different two points (R1,G1,B1) and (R2,G2,B2) on the achromatic color axis and two points (R3,G3,B3) and (R4,G4,B4) on two boundary planes which are not on the achromatic color axis, and recording values (C1,M1,Y1,K1), (C2,M2,Y2,K2), (C3,M3,Y3,K3) and (C4,M4,Y4,K4) of developing parts C, M, Y and K optimal for reproducing colors for the four points.  
<math-cwu id="MATH-US-00002">
<number>2</number>
<math>
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mo>(</mo>
          <mtable>
            <mtr>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>cr</mi>
                </msub>
              </mtd>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>cg</mi>
                </msub>
              </mtd>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>cb</mi>
                </msub>
              </mtd>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>c</mi>
                </msub>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>mr</mi>
                </msub>
              </mtd>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>mg</mi>
                </msub>
              </mtd>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>mb</mi>
                </msub>
              </mtd>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>m</mi>
                </msub>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>yr</mi>
                </msub>
              </mtd>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>yg</mi>
                </msub>
              </mtd>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>yb</mi>
                </msub>
              </mtd>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>y</mi>
                </msub>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>kr</mi>
                </msub>
              </mtd>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>kg</mi>
                </msub>
              </mtd>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>kb</mi>
                </msub>
              </mtd>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>k</mi>
                </msub>
              </mtd>
            </mtr>
          </mtable>
          <mo>)</mo>
        </mrow>
        <mo>=</mo>
        <mrow>
          <mrow>
            <mo>(</mo>
            <mtable>
              <mtr>
                <mtd>
                  <mi>C1</mi>
                </mtd>
                <mtd>
                  <mi>C2</mi>
                </mtd>
                <mtd>
                  <mi>C3</mi>
                </mtd>
                <mtd>
                  <mi>C4</mi>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mi>M1</mi>
                </mtd>
                <mtd>
                  <mi>M2</mi>
                </mtd>
                <mtd>
                  <mi>M3</mi>
                </mtd>
                <mtd>
                  <mi>M4</mi>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mi>Y1</mi>
                </mtd>
                <mtd>
                  <mi>Y2</mi>
                </mtd>
                <mtd>
                  <mi>Y3</mi>
                </mtd>
                <mtd>
                  <mi>Y4</mi>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mi>K1</mi>
                </mtd>
                <mtd>
                  <mi>K2</mi>
                </mtd>
                <mtd>
                  <mi>K3</mi>
                </mtd>
                <mtd>
                  <mi>K4</mi>
                </mtd>
              </mtr>
            </mtable>
            <mo>)</mo>
          </mrow>
          <mo>&times;</mo>
          <msup>
            <mrow>
              <mo>(</mo>
              <mtable>
                <mtr>
                  <mtd>
                    <mi>R1</mi>
                  </mtd>
                  <mtd>
                    <mi>R2</mi>
                  </mtd>
                  <mtd>
                    <mi>R3</mi>
                  </mtd>
                  <mtd>
                    <mi>R4</mi>
                  </mtd>
                </mtr>
                <mtr>
                  <mtd>
                    <mi>G1</mi>
                  </mtd>
                  <mtd>
                    <mi>G2</mi>
                  </mtd>
                  <mtd>
                    <mi>G3</mi>
                  </mtd>
                  <mtd>
                    <mi>G4</mi>
                  </mtd>
                </mtr>
                <mtr>
                  <mtd>
                    <mi>B2</mi>
                  </mtd>
                  <mtd>
                    <mi>B2</mi>
                  </mtd>
                  <mtd>
                    <mi>B3</mi>
                  </mtd>
                  <mtd>
                    <mi>B4</mi>
                  </mtd>
                </mtr>
                <mtr>
                  <mtd>
                    <mn>1</mn>
                  </mtd>
                  <mtd>
                    <mn>1</mn>
                  </mtd>
                  <mtd>
                    <mn>1</mn>
                  </mtd>
                  <mtd>
                    <mn>1</mn>
                  </mtd>
                </mtr>
              </mtable>
              <mo>)</mo>
            </mrow>
            <mrow>
              <mo>-</mo>
              <mn>1</mn>
            </mrow>
          </msup>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>2</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
<mathematica-file id="MATHEMATICA-00002" file="US20030002096A1-20030102-M00002.NB"/>
<image id="EMI-M00002" wi="216.027" he="99.13995" file="US20030002096A1-20030102-M00002.TIF" imf="TIFF" ti="MF"/>
</math-cwu>
</paragraph>
<paragraph id="P-0092" lvl="7"><number>&lsqb;0092&rsqb;</number> Here, the recording values of C, M, Y and K for each point are equivalent achromatic color density conversion values before performing UCR (under color removing). For the sake of simplicity, two points on the achromatic color axis are a white point and a black point in the following description. In this case, when it is assumed that the maximum value which the equivalent achromatic color density conversion value can take is Xmax, there are following relationships between each value. </paragraph>
<paragraph id="P-0093" lvl="0"><number>&lsqb;0093&rsqb;</number> In the case of the white point </paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>R</italic></highlight>1&equals;<highlight><italic>G</italic></highlight>1&equals;<highlight><italic>B</italic></highlight>1&equals;<highlight><italic>C</italic></highlight>1&equals;<highlight><italic>M</italic></highlight>1&equals;<highlight><italic>Y</italic></highlight>1&equals;0&gE;<highlight><italic>K</italic></highlight>1. </in-line-formula></paragraph>
<paragraph id="P-0094" lvl="0"><number>&lsqb;0094&rsqb;</number> In the case of black point </paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>R</italic></highlight>1&equals;<highlight><italic>G</italic></highlight>1&equals;<highlight><italic>B</italic></highlight>1&equals;<highlight><italic>C</italic></highlight>1&equals;<highlight><italic>M</italic></highlight>1&equals;<highlight><italic>Y</italic></highlight>1&equals;<highlight><italic>X</italic></highlight>max <highlight><italic>K</italic></highlight>2. </in-line-formula></paragraph>
<paragraph id="P-0095" lvl="0"><number>&lsqb;0095&rsqb;</number> In addition, it is favorable to adopt a point in which the minimum value of the recording value of developing parts C, M, Y and K is 0 and the maximum value of the recording value is Xmax for the two points on the boundary planes, that is, a point which has the highest saturation which can be recorded on each boundary plane. That is, following equations are satisfied. </paragraph>
<paragraph lvl="0"><in-line-formula>Min(<highlight><italic>C</italic></highlight>3,<highlight><italic>M</italic></highlight>3,<highlight><italic>Y</italic></highlight>3)&equals;0&gE;<highlight><italic>K</italic></highlight>3 </in-line-formula></paragraph>
<paragraph lvl="0"><in-line-formula>Max(<highlight><italic>C</italic></highlight>3,<highlight><italic>M</italic></highlight>3,<highlight><italic>Y</italic></highlight><highlight><bold>3)&equals;</bold></highlight><highlight><italic>X</italic></highlight>max </in-line-formula></paragraph>
<paragraph lvl="0"><in-line-formula>Min(<highlight><italic>C</italic></highlight>4,<highlight><italic>M</italic></highlight>4,<highlight><italic>Y</italic></highlight>4)&equals;0&gE;<highlight><italic>K</italic></highlight>4 </in-line-formula></paragraph>
<paragraph lvl="0"><in-line-formula>Max(<highlight><italic>C</italic></highlight>4,<highlight><italic>M</italic></highlight>4,<highlight><italic>Y</italic></highlight>4)&equals;<highlight><italic>X</italic></highlight>max </in-line-formula></paragraph>
<paragraph id="P-0096" lvl="0"><number>&lsqb;0096&rsqb;</number> The UCR rate can be controlled by determining the recording value of the developing part K in the following way from the minimum value in the developing parts C, M and Y. </paragraph>
<paragraph id="P-0097" lvl="2"><number>&lsqb;0097&rsqb;</number> When UCR rate is 100%: K&equals;Min(C,M,Y) </paragraph>
<paragraph id="P-0098" lvl="2"><number>&lsqb;0098&rsqb;</number> When UCR rate is 70%: K&equals;Min(C,M,Y)&times;0.7 </paragraph>
<paragraph id="P-0099" lvl="7"><number>&lsqb;0099&rsqb;</number> When the color space (R,G,B) is divided by using six boundary planes as shown in <cross-reference target="DRAWINGS">FIG. 5A, R</cross-reference>, G, B values of at least eight points which are six points on each boundary plane and two points on the achromatic color axis, and optimal recording values of the developing parts C, M, Y and K for reproducing the colors are determined beforehand. Then, the masking coefficient for each space is obtained on the basis of these. By storing the masking coefficients of each space obtained in the above-mentioned way in a ROM, RAM and the like, color calibration can be performed by selecting a proper masking coefficient for a color determined on a hue determining process. </paragraph>
<paragraph id="P-0100" lvl="0"><number>&lsqb;0100&rsqb;</number> In the color calibration process on the present invention, the masking coefficient is corrected in order to calibrate difference of spectral characteristics between CCDs. That is, corrected masking coefficient is calculated for each color (hue). In the following, the method will be described. </paragraph>
<paragraph id="P-0101" lvl="0"><number>&lsqb;0101&rsqb;</number> It is assumed that (R3,G3,B3) are values obtained if a color of a point on a boundary plane which is not on the achromatic color axis is read by a scanner CCD having standard spectral characteristics for example. When another scanner reads the same point (color), the point is read as (R3&prime;,G3&prime;,B3&prime;) which are different from (R3,G3,B3) due to variation of spectral characteristics of the scanner CCDs. As a result, the recording values of the developing parts C, M, Y and K are calculated as (C3&prime;,M3&prime;,Y3&prime;,K3&prime;) by the equation (1). That is, the values can be represented by the following equation.  
<math-cwu id="MATH-US-00003">
<number>3</number>
<math>
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mo>(</mo>
          <mtable>
            <mtr>
              <mtd>
                <msup>
                  <mi>C3</mi>
                  <mi>&prime;</mi>
                </msup>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <msup>
                  <mi>M3</mi>
                  <mi>&prime;</mi>
                </msup>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <msup>
                  <mi>Y3</mi>
                  <mi>&prime;</mi>
                </msup>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <msup>
                  <mi>K3</mi>
                  <mi>&prime;</mi>
                </msup>
              </mtd>
            </mtr>
          </mtable>
          <mo>)</mo>
        </mrow>
        <mo>=</mo>
        <mrow>
          <mrow>
            <mo>(</mo>
            <mtable>
              <mtr>
                <mtd>
                  <msub>
                    <mi>a</mi>
                    <mi>cr</mi>
                  </msub>
                </mtd>
                <mtd>
                  <msub>
                    <mi>a</mi>
                    <mi>cg</mi>
                  </msub>
                </mtd>
                <mtd>
                  <msub>
                    <mi>a</mi>
                    <mi>cb</mi>
                  </msub>
                </mtd>
                <mtd>
                  <msub>
                    <mi>a</mi>
                    <mi>c</mi>
                  </msub>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <msub>
                    <mi>a</mi>
                    <mi>mr</mi>
                  </msub>
                </mtd>
                <mtd>
                  <msub>
                    <mi>a</mi>
                    <mi>mg</mi>
                  </msub>
                </mtd>
                <mtd>
                  <msub>
                    <mi>a</mi>
                    <mi>mb</mi>
                  </msub>
                </mtd>
                <mtd>
                  <msub>
                    <mi>a</mi>
                    <mi>m</mi>
                  </msub>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <msub>
                    <mi>a</mi>
                    <mi>yr</mi>
                  </msub>
                </mtd>
                <mtd>
                  <msub>
                    <mi>a</mi>
                    <mi>yg</mi>
                  </msub>
                </mtd>
                <mtd>
                  <msub>
                    <mi>a</mi>
                    <mi>yb</mi>
                  </msub>
                </mtd>
                <mtd>
                  <msub>
                    <mi>a</mi>
                    <mi>y</mi>
                  </msub>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <msub>
                    <mi>a</mi>
                    <mi>kr</mi>
                  </msub>
                </mtd>
                <mtd>
                  <msub>
                    <mi>a</mi>
                    <mi>kg</mi>
                  </msub>
                </mtd>
                <mtd>
                  <msub>
                    <mi>a</mi>
                    <mi>kb</mi>
                  </msub>
                </mtd>
                <mtd>
                  <msub>
                    <mi>a</mi>
                    <mi>k</mi>
                  </msub>
                </mtd>
              </mtr>
            </mtable>
            <mo>)</mo>
          </mrow>
          <mo>&times;</mo>
          <mrow>
            <mo>(</mo>
            <mtable>
              <mtr>
                <mtd>
                  <msup>
                    <mi>R3</mi>
                    <mi>&prime;</mi>
                  </msup>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <msup>
                    <mi>G3</mi>
                    <mi>&prime;</mi>
                  </msup>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <msup>
                    <mi>B3</mi>
                    <mi>&prime;</mi>
                  </msup>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mn>1</mn>
                </mtd>
              </mtr>
            </mtable>
            <mo>)</mo>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>3</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
<mathematica-file id="MATHEMATICA-00003" file="US20030002096A1-20030102-M00003.NB"/>
<image id="EMI-M00003" wi="216.027" he="47.03265" file="US20030002096A1-20030102-M00003.TIF" imf="TIFF" ti="MF"/>
</math-cwu>
</paragraph>
<paragraph id="P-0102" lvl="7"><number>&lsqb;0102&rsqb;</number> However, the recording values of the developing parts C, M, Y and K optimal for reproducing the color (R3,G3,B3) should be (C3,M3,Y3,K3). Thus, the difference values shown in the equation (4) become a cause for preventing faithful color reproduction.  
<math-cwu id="MATH-US-00004">
<number>4</number>
<math>
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mo>(</mo>
          <mtable>
            <mtr>
              <mtd>
                <msub>
                  <mi>C</mi>
                  <mi>D</mi>
                </msub>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <msub>
                  <mi>M</mi>
                  <mi>D</mi>
                </msub>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <msub>
                  <mi>Y</mi>
                  <mi>D</mi>
                </msub>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <msub>
                  <mi>K</mi>
                  <mi>D</mi>
                </msub>
              </mtd>
            </mtr>
          </mtable>
          <mo>)</mo>
        </mrow>
        <mo>=</mo>
        <mrow>
          <mrow>
            <mo>(</mo>
            <mtable>
              <mtr>
                <mtd>
                  <mi>C3</mi>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mi>M3</mi>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mi>Y3</mi>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mi>K3</mi>
                </mtd>
              </mtr>
            </mtable>
            <mo>)</mo>
          </mrow>
          <mo>-</mo>
          <mrow>
            <mo>(</mo>
            <mtable>
              <mtr>
                <mtd>
                  <msup>
                    <mi>C3</mi>
                    <mi>&prime;</mi>
                  </msup>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <msup>
                    <mi>M3</mi>
                    <mi>&prime;</mi>
                  </msup>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <msup>
                    <mi>Y3</mi>
                    <mi>&prime;</mi>
                  </msup>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <msup>
                    <mi>K3</mi>
                    <mi>&prime;</mi>
                  </msup>
                </mtd>
              </mtr>
            </mtable>
            <mo>)</mo>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>4</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
<mathematica-file id="MATHEMATICA-00004" file="US20030002096A1-20030102-M00004.NB"/>
<image id="EMI-M00004" wi="216.027" he="47.03265" file="US20030002096A1-20030102-M00004.TIF" imf="TIFF" ti="MF"/>
</math-cwu>
</paragraph>
<paragraph id="P-0103" lvl="0"><number>&lsqb;0103&rsqb;</number> In this embodiment, the variation of the spectral characteristics of the scanner CCDs is calibrated by using the difference values. This process will be described in the following. </paragraph>
<paragraph id="P-0104" lvl="0"><number>&lsqb;0104&rsqb;</number> The difference values of the equation (4) are added to each element in the first term in the right side of an equation (2) which is used for calculating the masking coefficient as shown in the following equation.  
<math-cwu id="MATH-US-00005">
<number>5</number>
<math>
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mo>(</mo>
          <mtable>
            <mtr>
              <mtd>
                <mi>C</mi>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <mi>M</mi>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <mi>Y</mi>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <mi>K</mi>
              </mtd>
            </mtr>
          </mtable>
          <mo>)</mo>
        </mrow>
        <mo>=</mo>
        <mrow>
          <mrow>
            <mo>(</mo>
            <mtable>
              <mtr>
                <mtd>
                  <mrow>
                    <mi>C1</mi>
                    <mo>+</mo>
                    <msub>
                      <mi>C</mi>
                      <mi>D</mi>
                    </msub>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>C2</mi>
                    <mo>+</mo>
                    <msub>
                      <mi>C</mi>
                      <mi>D</mi>
                    </msub>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>C3</mi>
                    <mo>+</mo>
                    <msub>
                      <mi>C</mi>
                      <mi>D</mi>
                    </msub>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>C4</mi>
                    <mo>+</mo>
                    <msub>
                      <mi>C</mi>
                      <mi>D</mi>
                    </msub>
                  </mrow>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mrow>
                    <mi>M1</mi>
                    <mo>+</mo>
                    <msub>
                      <mi>M</mi>
                      <mi>D</mi>
                    </msub>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>M2</mi>
                    <mo>+</mo>
                    <msub>
                      <mi>M</mi>
                      <mi>D</mi>
                    </msub>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>M3</mi>
                    <mo>+</mo>
                    <msub>
                      <mi>M</mi>
                      <mi>D</mi>
                    </msub>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>M4</mi>
                    <mo>+</mo>
                    <msub>
                      <mi>M</mi>
                      <mi>D</mi>
                    </msub>
                  </mrow>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mrow>
                    <mi>Y1</mi>
                    <mo>+</mo>
                    <msub>
                      <mi>Y</mi>
                      <mi>D</mi>
                    </msub>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>Y2</mi>
                    <mo>+</mo>
                    <msub>
                      <mi>Y</mi>
                      <mi>D</mi>
                    </msub>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>Y3</mi>
                    <mo>+</mo>
                    <msub>
                      <mi>Y</mi>
                      <mi>D</mi>
                    </msub>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>Y4</mi>
                    <mo>+</mo>
                    <msub>
                      <mi>Y</mi>
                      <mi>D</mi>
                    </msub>
                  </mrow>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mrow>
                    <mi>K1</mi>
                    <mo>+</mo>
                    <msub>
                      <mi>K</mi>
                      <mi>D</mi>
                    </msub>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>K2</mi>
                    <mo>+</mo>
                    <msub>
                      <mi>K</mi>
                      <mi>D</mi>
                    </msub>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <msup>
                      <mi>K3</mi>
                      <mi>&prime;</mi>
                    </msup>
                    <mo>+</mo>
                    <msub>
                      <mi>K</mi>
                      <mi>D</mi>
                    </msub>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>K4</mi>
                    <mo>+</mo>
                    <msub>
                      <mi>K</mi>
                      <mi>D</mi>
                    </msub>
                  </mrow>
                </mtd>
              </mtr>
            </mtable>
            <mo>)</mo>
          </mrow>
          <mo>&times;</mo>
          <msup>
            <mrow>
              <mo>(</mo>
              <mtable>
                <mtr>
                  <mtd>
                    <mi>R1</mi>
                  </mtd>
                  <mtd>
                    <mi>R2</mi>
                  </mtd>
                  <mtd>
                    <mi>R3</mi>
                  </mtd>
                  <mtd>
                    <mi>R4</mi>
                  </mtd>
                </mtr>
                <mtr>
                  <mtd>
                    <mi>G1</mi>
                  </mtd>
                  <mtd>
                    <mi>G2</mi>
                  </mtd>
                  <mtd>
                    <mi>G3</mi>
                  </mtd>
                  <mtd>
                    <mi>G4</mi>
                  </mtd>
                </mtr>
                <mtr>
                  <mtd>
                    <mi>B2</mi>
                  </mtd>
                  <mtd>
                    <mi>B2</mi>
                  </mtd>
                  <mtd>
                    <mi>B3</mi>
                  </mtd>
                  <mtd>
                    <mi>B4</mi>
                  </mtd>
                </mtr>
                <mtr>
                  <mtd>
                    <mn>1</mn>
                  </mtd>
                  <mtd>
                    <mn>1</mn>
                  </mtd>
                  <mtd>
                    <mn>1</mn>
                  </mtd>
                  <mtd>
                    <mn>1</mn>
                  </mtd>
                </mtr>
              </mtable>
              <mo>)</mo>
            </mrow>
            <mrow>
              <mo>-</mo>
              <mn>1</mn>
            </mrow>
          </msup>
          <mo>&times;</mo>
          <mrow>
            <mo>(</mo>
            <mtable>
              <mtr>
                <mtd>
                  <msup>
                    <mi>R3</mi>
                    <mi>&prime;</mi>
                  </msup>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <msup>
                    <mi>G3</mi>
                    <mi>&prime;</mi>
                  </msup>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <msup>
                    <mi>B3</mi>
                    <mi>&prime;</mi>
                  </msup>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mn>1</mn>
                </mtd>
              </mtr>
            </mtable>
            <mo>)</mo>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>5</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mrow>
            <mi>Assuming</mi>
            <mo>&it;</mo>
            <mstyle>
              <mtext>&emsp;</mtext>
            </mstyle>
            <mo>&it;</mo>
            <mrow>
              <mo>(</mo>
              <mtable>
                <mtr>
                  <mtd>
                    <msup>
                      <mi>R</mi>
                      <mi>&Prime;</mi>
                    </msup>
                  </mtd>
                </mtr>
                <mtr>
                  <mtd>
                    <msup>
                      <mi>G</mi>
                      <mi>&Prime;</mi>
                    </msup>
                  </mtd>
                </mtr>
                <mtr>
                  <mtd>
                    <msup>
                      <mi>B</mi>
                      <mi>&Prime;</mi>
                    </msup>
                  </mtd>
                </mtr>
                <mtr>
                  <mtd>
                    <mi>T</mi>
                  </mtd>
                </mtr>
              </mtable>
              <mo>)</mo>
            </mrow>
          </mrow>
          <mo>=</mo>
          <mrow>
            <msup>
              <mrow>
                <mo>(</mo>
                <mtable>
                  <mtr>
                    <mtd>
                      <mi>R1</mi>
                    </mtd>
                    <mtd>
                      <mi>R2</mi>
                    </mtd>
                    <mtd>
                      <mi>R3</mi>
                    </mtd>
                    <mtd>
                      <mi>R4</mi>
                    </mtd>
                  </mtr>
                  <mtr>
                    <mtd>
                      <mi>G1</mi>
                    </mtd>
                    <mtd>
                      <mi>G2</mi>
                    </mtd>
                    <mtd>
                      <mi>G3</mi>
                    </mtd>
                    <mtd>
                      <mi>G4</mi>
                    </mtd>
                  </mtr>
                  <mtr>
                    <mtd>
                      <mi>B2</mi>
                    </mtd>
                    <mtd>
                      <mi>B2</mi>
                    </mtd>
                    <mtd>
                      <mi>B3</mi>
                    </mtd>
                    <mtd>
                      <mi>B4</mi>
                    </mtd>
                  </mtr>
                  <mtr>
                    <mtd>
                      <mn>1</mn>
                    </mtd>
                    <mtd>
                      <mn>1</mn>
                    </mtd>
                    <mtd>
                      <mn>1</mn>
                    </mtd>
                    <mtd>
                      <mn>1</mn>
                    </mtd>
                  </mtr>
                </mtable>
                <mo>)</mo>
              </mrow>
              <mrow>
                <mo>-</mo>
                <mn>1</mn>
              </mrow>
            </msup>
            <mo>&times;</mo>
            <mrow>
              <mo>(</mo>
              <mtable>
                <mtr>
                  <mtd>
                    <msup>
                      <mi>R3</mi>
                      <mi>&prime;</mi>
                    </msup>
                  </mtd>
                </mtr>
                <mtr>
                  <mtd>
                    <msup>
                      <mi>G3</mi>
                      <mi>&prime;</mi>
                    </msup>
                  </mtd>
                </mtr>
                <mtr>
                  <mtd>
                    <msup>
                      <mi>B3</mi>
                      <mi>&prime;</mi>
                    </msup>
                  </mtd>
                </mtr>
                <mtr>
                  <mtd>
                    <mn>1</mn>
                  </mtd>
                </mtr>
              </mtable>
              <mo>)</mo>
            </mrow>
          </mrow>
        </mrow>
        <mo>,</mo>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>6</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
<mathematica-file id="MATHEMATICA-00005" file="US20030002096A1-20030102-M00005.NB"/>
<image id="EMI-M00005" wi="216.027" he="148.1004" file="US20030002096A1-20030102-M00005.TIF" imf="TIFF" ti="MF"/>
</math-cwu>
</paragraph>
<paragraph id="P-0105" lvl="7"><number>&lsqb;0105&rsqb;</number> the following equation (7) holds true.  
<math-cwu id="MATH-US-00006">
<number>6</number>
<math>
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mrow>
            <mo>(</mo>
            <mtable>
              <mtr>
                <mtd>
                  <mi>R1</mi>
                </mtd>
                <mtd>
                  <mi>R2</mi>
                </mtd>
                <mtd>
                  <mi>R3</mi>
                </mtd>
                <mtd>
                  <mi>R4</mi>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mi>G1</mi>
                </mtd>
                <mtd>
                  <mi>G2</mi>
                </mtd>
                <mtd>
                  <mi>G3</mi>
                </mtd>
                <mtd>
                  <mi>G4</mi>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mi>B1</mi>
                </mtd>
                <mtd>
                  <mi>B2</mi>
                </mtd>
                <mtd>
                  <mi>B3</mi>
                </mtd>
                <mtd>
                  <mi>B4</mi>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mn>1</mn>
                </mtd>
                <mtd>
                  <mn>1</mn>
                </mtd>
                <mtd>
                  <mn>1</mn>
                </mtd>
                <mtd>
                  <mn>1</mn>
                </mtd>
              </mtr>
            </mtable>
            <mo>)</mo>
          </mrow>
          <mo>&it;</mo>
          <mrow>
            <mo>(</mo>
            <mtable>
              <mtr>
                <mtd>
                  <msup>
                    <mi>R</mi>
                    <mi>&Prime;</mi>
                  </msup>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <msup>
                    <mi>G</mi>
                    <mi>&Prime;</mi>
                  </msup>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <msup>
                    <mi>B</mi>
                    <mi>&Prime;</mi>
                  </msup>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mi>T</mi>
                </mtd>
              </mtr>
            </mtable>
            <mo>)</mo>
          </mrow>
        </mrow>
        <mo>=</mo>
        <mrow>
          <mo>(</mo>
          <mtable>
            <mtr>
              <mtd>
                <msup>
                  <mi>R3</mi>
                  <mi>&prime;</mi>
                </msup>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <msup>
                  <mi>G3</mi>
                  <mi>&prime;</mi>
                </msup>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <msup>
                  <mi>B3</mi>
                  <mi>&prime;</mi>
                </msup>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <mn>1</mn>
              </mtd>
            </mtr>
          </mtable>
          <mo>)</mo>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>7</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
<mathematica-file id="MATHEMATICA-00006" file="US20030002096A1-20030102-M00006.NB"/>
<image id="EMI-M00006" wi="216.027" he="46.0971" file="US20030002096A1-20030102-M00006.TIF" imf="TIFF" ti="MF"/>
</math-cwu>
</paragraph>
<paragraph id="P-0106" lvl="7"><number>&lsqb;0106&rsqb;</number> Therefore, R&Prime;&plus;G&Prime;&plus;B&Prime;&plus;T&equals;1 is obtained by comparing fourth row in the vectors. By substituting the equation (6) into the equation (5), a following equation (8) is obtained.  
<math-cwu id="MATH-US-00007">
<number>7</number>
<math>
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mo>(</mo>
          <mtable>
            <mtr>
              <mtd>
                <mi>C</mi>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <mi>M</mi>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <mi>Y</mi>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <mi>K</mi>
              </mtd>
            </mtr>
          </mtable>
          <mo>)</mo>
        </mrow>
        <mo>=</mo>
        <mrow>
          <mrow>
            <mrow>
              <mo>(</mo>
              <mtable>
                <mtr>
                  <mtd>
                    <mrow>
                      <mi>C1</mi>
                      <mo>+</mo>
                      <msub>
                        <mi>C</mi>
                        <mi>D</mi>
                      </msub>
                    </mrow>
                  </mtd>
                  <mtd>
                    <mrow>
                      <mi>C2</mi>
                      <mo>+</mo>
                      <msub>
                        <mi>C</mi>
                        <mi>D</mi>
                      </msub>
                    </mrow>
                  </mtd>
                  <mtd>
                    <mrow>
                      <mi>C3</mi>
                      <mo>+</mo>
                      <msub>
                        <mi>C</mi>
                        <mi>D</mi>
                      </msub>
                    </mrow>
                  </mtd>
                  <mtd>
                    <mrow>
                      <mi>C4</mi>
                      <mo>+</mo>
                      <msub>
                        <mi>C</mi>
                        <mi>D</mi>
                      </msub>
                    </mrow>
                  </mtd>
                </mtr>
                <mtr>
                  <mtd>
                    <mrow>
                      <mi>M1</mi>
                      <mo>+</mo>
                      <msub>
                        <mi>M</mi>
                        <mi>D</mi>
                      </msub>
                    </mrow>
                  </mtd>
                  <mtd>
                    <mrow>
                      <mi>M2</mi>
                      <mo>+</mo>
                      <msub>
                        <mi>M</mi>
                        <mi>D</mi>
                      </msub>
                    </mrow>
                  </mtd>
                  <mtd>
                    <mrow>
                      <mi>M3</mi>
                      <mo>+</mo>
                      <msub>
                        <mi>M</mi>
                        <mi>D</mi>
                      </msub>
                    </mrow>
                  </mtd>
                  <mtd>
                    <mrow>
                      <mi>M4</mi>
                      <mo>+</mo>
                      <msub>
                        <mi>M</mi>
                        <mi>D</mi>
                      </msub>
                    </mrow>
                  </mtd>
                </mtr>
                <mtr>
                  <mtd>
                    <mrow>
                      <mi>Y1</mi>
                      <mo>+</mo>
                      <msub>
                        <mi>Y</mi>
                        <mi>D</mi>
                      </msub>
                    </mrow>
                  </mtd>
                  <mtd>
                    <mrow>
                      <mi>Y2</mi>
                      <mo>+</mo>
                      <msub>
                        <mi>Y</mi>
                        <mi>D</mi>
                      </msub>
                    </mrow>
                  </mtd>
                  <mtd>
                    <mrow>
                      <mi>Y3</mi>
                      <mo>+</mo>
                      <msub>
                        <mi>Y</mi>
                        <mi>D</mi>
                      </msub>
                    </mrow>
                  </mtd>
                  <mtd>
                    <mrow>
                      <mi>Y4</mi>
                      <mo>+</mo>
                      <msub>
                        <mi>Y</mi>
                        <mi>D</mi>
                      </msub>
                    </mrow>
                  </mtd>
                </mtr>
                <mtr>
                  <mtd>
                    <mrow>
                      <mi>K1</mi>
                      <mo>+</mo>
                      <msub>
                        <mi>K</mi>
                        <mi>D</mi>
                      </msub>
                    </mrow>
                  </mtd>
                  <mtd>
                    <mrow>
                      <mi>K2</mi>
                      <mo>+</mo>
                      <msub>
                        <mi>K</mi>
                        <mi>D</mi>
                      </msub>
                    </mrow>
                  </mtd>
                  <mtd>
                    <mrow>
                      <msup>
                        <mi>K3</mi>
                        <mi>&prime;</mi>
                      </msup>
                      <mo>+</mo>
                      <msub>
                        <mi>K</mi>
                        <mi>D</mi>
                      </msub>
                    </mrow>
                  </mtd>
                  <mtd>
                    <mrow>
                      <mi>K4</mi>
                      <mo>+</mo>
                      <msub>
                        <mi>K</mi>
                        <mi>D</mi>
                      </msub>
                    </mrow>
                  </mtd>
                </mtr>
              </mtable>
              <mo>)</mo>
            </mrow>
            <mo>&times;</mo>
            <mstyle>
              <mtext>&emsp;</mtext>
            </mstyle>
            <mo>&it;</mo>
            <mrow>
              <mo>(</mo>
              <mtable>
                <mtr>
                  <mtd>
                    <msup>
                      <mi>R</mi>
                      <mi>&Prime;</mi>
                    </msup>
                  </mtd>
                </mtr>
                <mtr>
                  <mtd>
                    <msup>
                      <mi>G</mi>
                      <mi>&Prime;</mi>
                    </msup>
                  </mtd>
                </mtr>
                <mtr>
                  <mtd>
                    <msup>
                      <mi>B</mi>
                      <mi>&Prime;</mi>
                    </msup>
                  </mtd>
                </mtr>
                <mtr>
                  <mtd>
                    <mi>T</mi>
                  </mtd>
                </mtr>
              </mtable>
              <mo>)</mo>
            </mrow>
          </mrow>
          <mo>=</mo>
          <mrow>
            <mo>(</mo>
            <mtable>
              <mtr>
                <mtd>
                  <mrow>
                    <mrow>
                      <mo>(</mo>
                      <mrow>
                        <msup>
                          <mi>C1R</mi>
                          <mi>&Prime;</mi>
                        </msup>
                        <mo>+</mo>
                        <msup>
                          <mi>C2G</mi>
                          <mi>&Prime;</mi>
                        </msup>
                        <mo>+</mo>
                        <msup>
                          <mi>C3B</mi>
                          <mi>&Prime;</mi>
                        </msup>
                        <mo>+</mo>
                        <mi>C4T</mi>
                      </mrow>
                      <mo>)</mo>
                    </mrow>
                    <mo>+</mo>
                    <mrow>
                      <msub>
                        <mi>C</mi>
                        <mi>D</mi>
                      </msub>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mrow>
                          <msup>
                            <mi>R</mi>
                            <mi>&Prime;</mi>
                          </msup>
                          <mo>+</mo>
                          <msup>
                            <mi>G</mi>
                            <mi>&Prime;</mi>
                          </msup>
                          <mo>+</mo>
                          <msup>
                            <mi>B</mi>
                            <mi>&Prime;</mi>
                          </msup>
                          <mo>+</mo>
                          <mi>T</mi>
                        </mrow>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                  </mrow>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mi>&ctdot;</mi>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mi>&ctdot;</mi>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mi>&ctdot;</mi>
                </mtd>
              </mtr>
            </mtable>
            <mo>)</mo>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>8</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
<mathematica-file id="MATHEMATICA-00007" file="US20030002096A1-20030102-M00007.NB"/>
<image id="EMI-M00007" wi="216.027" he="97.9209" file="US20030002096A1-20030102-M00007.TIF" imf="TIFF" ti="MF"/>
</math-cwu>
</paragraph>
<paragraph id="P-0107" lvl="7"><number>&lsqb;0107&rsqb;</number> The first term in the first element in the vector is the same as C3&prime; of the equation (3) according to the definition of the equations (1), (2) and (6). Since R&Prime;&plus;G&Prime;&plus;B&Prime;&plus;T&equals;1, the equation (8) becomes  
<math-cwu id="MATH-US-00008">
<number>8</number>
<math>
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mo>=</mo>
        <mrow>
          <mrow>
            <mrow>
              <mo>(</mo>
              <mtable>
                <mtr>
                  <mtd>
                    <mrow>
                      <msup>
                        <mi>C3</mi>
                        <mi>&prime;</mi>
                      </msup>
                      <mo>+</mo>
                      <msub>
                        <mi>D</mi>
                        <mi>D</mi>
                      </msub>
                    </mrow>
                  </mtd>
                </mtr>
                <mtr>
                  <mtd>
                    <mrow>
                      <msup>
                        <mi>M3</mi>
                        <mi>&prime;</mi>
                      </msup>
                      <mo>+</mo>
                      <msub>
                        <mi>M</mi>
                        <mi>D</mi>
                      </msub>
                    </mrow>
                  </mtd>
                </mtr>
                <mtr>
                  <mtd>
                    <mrow>
                      <msup>
                        <mi>Y3</mi>
                        <mi>&prime;</mi>
                      </msup>
                      <mo>+</mo>
                      <msub>
                        <mi>Y</mi>
                        <mi>D</mi>
                      </msub>
                    </mrow>
                  </mtd>
                </mtr>
                <mtr>
                  <mtd>
                    <mrow>
                      <msup>
                        <mi>K3</mi>
                        <mi>&prime;</mi>
                      </msup>
                      <mo>+</mo>
                      <msub>
                        <mi>K</mi>
                        <mi>D</mi>
                      </msub>
                    </mrow>
                  </mtd>
                </mtr>
              </mtable>
              <mo>)</mo>
            </mrow>
            <mo>&it;</mo>
            <mstyle>
              <mtext>&emsp;</mtext>
            </mstyle>
            <mo>&it;</mo>
            <mi>by</mi>
            <mo>&it;</mo>
            <mstyle>
              <mtext>&emsp;</mtext>
            </mstyle>
            <mo>&it;</mo>
            <mi>equation</mi>
            <mo>&it;</mo>
            <mstyle>
              <mtext>&emsp;</mtext>
            </mstyle>
            <mo>&it;</mo>
            <mrow>
              <mo>(</mo>
              <mn>4</mn>
              <mo>)</mo>
            </mrow>
          </mrow>
          <mo>=</mo>
          <mrow>
            <mrow>
              <mo>(</mo>
              <mtable>
                <mtr>
                  <mtd>
                    <mi>C3</mi>
                  </mtd>
                </mtr>
                <mtr>
                  <mtd>
                    <mi>M3</mi>
                  </mtd>
                </mtr>
                <mtr>
                  <mtd>
                    <mi>Y3</mi>
                  </mtd>
                </mtr>
                <mtr>
                  <mtd>
                    <mi>K3</mi>
                  </mtd>
                </mtr>
              </mtable>
              <mo>)</mo>
            </mrow>
            <mo>.</mo>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>9</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
<mathematica-file id="MATHEMATICA-00008" file="US20030002096A1-20030102-M00008.NB"/>
<image id="EMI-M00008" wi="216.027" he="47.03265" file="US20030002096A1-20030102-M00008.TIF" imf="TIFF" ti="MF"/>
</math-cwu>
</paragraph>
<paragraph id="P-0108" lvl="7"><number>&lsqb;0108&rsqb;</number> That is, the values (C3,M3,Y3,K3) which should be obtained can be obtained by using the difference values of the equation (4). </paragraph>
<paragraph id="P-0109" lvl="0"><number>&lsqb;0109&rsqb;</number> As mentioned above, the corrected masking coefficient is calculated and the recording values of the developing parts C, M, Y and K of the point on the boundary plane are corrected by using the masking coefficient, so that color calibration in the space within the boundary planes can be performed by performing linear calculation and the like. </paragraph>
<paragraph id="P-0110" lvl="0"><number>&lsqb;0110&rsqb;</number> The difference values between the recording values of the developing parts C, M, Y and K optimal for reproducing a color (R,G,B) read by a scanner CCD having standard spectral characteristics and C&prime;, M&prime;, Y&prime; and K&prime; calculated by multiplying read values (R&prime;,G&prime;,B&prime;) of a scanner CCD having spectral characteristics variation by the uncorrected masking coefficient are calculated. Then, the masking coefficient is corrected by performing calculation of an equation (10) by using the difference values.  
<math-cwu id="MATH-US-00009">
<number>9</number>
<math>
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mo>(</mo>
          <mtable>
            <mtr>
              <mtd>
                <mrow>
                  <msub>
                    <mi>C</mi>
                    <mn>1</mn>
                  </msub>
                  <mo>+</mo>
                  <msub>
                    <mi>C</mi>
                    <mi>D</mi>
                  </msub>
                </mrow>
              </mtd>
              <mtd>
                <mrow>
                  <msub>
                    <mi>C</mi>
                    <mn>2</mn>
                  </msub>
                  <mo>+</mo>
                  <msub>
                    <mi>C</mi>
                    <mi>D</mi>
                  </msub>
                </mrow>
              </mtd>
              <mtd>
                <mrow>
                  <msub>
                    <mi>C</mi>
                    <mn>3</mn>
                  </msub>
                  <mo>+</mo>
                  <msub>
                    <mi>C</mi>
                    <mi>D</mi>
                  </msub>
                </mrow>
              </mtd>
              <mtd>
                <mrow>
                  <msub>
                    <mi>C</mi>
                    <mn>4</mn>
                  </msub>
                  <mo>+</mo>
                  <msub>
                    <mi>C</mi>
                    <mi>D</mi>
                  </msub>
                </mrow>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <mrow>
                  <msub>
                    <mi>M</mi>
                    <mn>1</mn>
                  </msub>
                  <mo>+</mo>
                  <msub>
                    <mi>M</mi>
                    <mi>D</mi>
                  </msub>
                </mrow>
              </mtd>
              <mtd>
                <mrow>
                  <msub>
                    <mi>M</mi>
                    <mn>2</mn>
                  </msub>
                  <mo>+</mo>
                  <msub>
                    <mi>M</mi>
                    <mi>D</mi>
                  </msub>
                </mrow>
              </mtd>
              <mtd>
                <mrow>
                  <msub>
                    <mi>M</mi>
                    <mn>3</mn>
                  </msub>
                  <mo>+</mo>
                  <msub>
                    <mi>M</mi>
                    <mi>D</mi>
                  </msub>
                </mrow>
              </mtd>
              <mtd>
                <mrow>
                  <msub>
                    <mi>M</mi>
                    <mn>4</mn>
                  </msub>
                  <mo>+</mo>
                  <msub>
                    <mi>M</mi>
                    <mi>D</mi>
                  </msub>
                </mrow>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <mrow>
                  <msub>
                    <mi>Y</mi>
                    <mn>1</mn>
                  </msub>
                  <mo>+</mo>
                  <msub>
                    <mi>Y</mi>
                    <mi>D</mi>
                  </msub>
                </mrow>
              </mtd>
              <mtd>
                <mrow>
                  <msub>
                    <mi>Y</mi>
                    <mn>2</mn>
                  </msub>
                  <mo>+</mo>
                  <msub>
                    <mi>Y</mi>
                    <mi>D</mi>
                  </msub>
                </mrow>
              </mtd>
              <mtd>
                <mrow>
                  <msub>
                    <mi>Y</mi>
                    <mn>3</mn>
                  </msub>
                  <mo>+</mo>
                  <msub>
                    <mi>Y</mi>
                    <mi>D</mi>
                  </msub>
                </mrow>
              </mtd>
              <mtd>
                <mrow>
                  <msub>
                    <mi>Y</mi>
                    <mn>4</mn>
                  </msub>
                  <mo>+</mo>
                  <msub>
                    <mi>Y</mi>
                    <mi>D</mi>
                  </msub>
                </mrow>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <mrow>
                  <msub>
                    <mi>K</mi>
                    <mn>1</mn>
                  </msub>
                  <mo>+</mo>
                  <msub>
                    <mi>K</mi>
                    <mi>D</mi>
                  </msub>
                </mrow>
              </mtd>
              <mtd>
                <mrow>
                  <msub>
                    <mi>K</mi>
                    <mn>2</mn>
                  </msub>
                  <mo>+</mo>
                  <msub>
                    <mi>K</mi>
                    <mi>D</mi>
                  </msub>
                </mrow>
              </mtd>
              <mtd>
                <mrow>
                  <msub>
                    <mi>K</mi>
                    <mn>3</mn>
                  </msub>
                  <mo>+</mo>
                  <msub>
                    <mi>K</mi>
                    <mi>D</mi>
                  </msub>
                </mrow>
              </mtd>
              <mtd>
                <mrow>
                  <msub>
                    <mi>K</mi>
                    <mn>4</mn>
                  </msub>
                  <mo>+</mo>
                  <msub>
                    <mi>K</mi>
                    <mi>D</mi>
                  </msub>
                </mrow>
              </mtd>
            </mtr>
          </mtable>
          <mo>)</mo>
        </mrow>
        <mo>&times;</mo>
        <msup>
          <mrow>
            <mo>(</mo>
            <mtable>
              <mtr>
                <mtd>
                  <mi>R1</mi>
                </mtd>
                <mtd>
                  <mi>R2</mi>
                </mtd>
                <mtd>
                  <mi>R3</mi>
                </mtd>
                <mtd>
                  <mi>R4</mi>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mi>G1</mi>
                </mtd>
                <mtd>
                  <mi>G2</mi>
                </mtd>
                <mtd>
                  <mi>G3</mi>
                </mtd>
                <mtd>
                  <mi>G4</mi>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mi>B2</mi>
                </mtd>
                <mtd>
                  <mi>B2</mi>
                </mtd>
                <mtd>
                  <mi>B3</mi>
                </mtd>
                <mtd>
                  <mi>B4</mi>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mn>1</mn>
                </mtd>
                <mtd>
                  <mn>1</mn>
                </mtd>
                <mtd>
                  <mn>1</mn>
                </mtd>
                <mtd>
                  <mn>1</mn>
                </mtd>
              </mtr>
            </mtable>
            <mo>)</mo>
          </mrow>
          <mrow>
            <mo>-</mo>
            <mn>1</mn>
          </mrow>
        </msup>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>10</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
<mathematica-file id="MATHEMATICA-00009" file="US20030002096A1-20030102-M00009.NB"/>
<image id="EMI-M00009" wi="216.027" he="94.09365" file="US20030002096A1-20030102-M00009.TIF" imf="TIFF" ti="MF"/>
</math-cwu>
</paragraph>
<paragraph id="P-0111" lvl="7"><number>&lsqb;0111&rsqb;</number> Accordingly, the variation of the spectral characteristics is calibrated and faithful color reproduction can be realized. </paragraph>
<paragraph id="P-0112" lvl="0"><number>&lsqb;0112&rsqb;</number> In the following, a procedure for obtaining the difference values in the color calibration processing using the above-mentioned method will be described concretely with reference to a flowchart of <cross-reference target="DRAWINGS">FIG. 6</cross-reference>. </paragraph>
<paragraph id="P-0113" lvl="0"><number>&lsqb;0113&rsqb;</number> In this example, the color space is divided by points of red (R), yellow (Y), green (G), cyan (C), blue (B), magenta (M) for example. A patch chart having red, yellow, green, cyan, blue and magenta of which the spectral characteristics are known as shown in <cross-reference target="DRAWINGS">FIG. 7</cross-reference> is used. By using a document having colors near the boundary points by which the hue (color space) is divided, reproducibility of colors of the boundary points can become faithful. </paragraph>
<paragraph id="P-0114" lvl="0"><number>&lsqb;0114&rsqb;</number> In addition, read values (Rs&lsqb;i&rsqb;,Gs&lsqb;i&rsqb;,Bs&lsqb;i&rsqb;:i&equals;R,G,B,C,M,Y) obtained if the chart shown in <cross-reference target="DRAWINGS">FIG. 7</cross-reference> is read by a scanner CCD having standard spectral characteristics, and recording values (Cs&lsqb;i&rsqb;,Ms&lsqb;i&rsqb;,Ys&lsqb;i&rsqb;,Ks&lsqb;i&rsqb;:i&equals;R,G,B,C,M,Y) of the developing parts C, M, Y and K calculated from (Rs&lsqb;i&rsqb;,Gs&lsqb;i&rsqb;,Bs&lsqb;i&rsqb;:i&equals;R,G,B,C,M,Y) are calculated beforehand, and the values will be used in the following process. These values can be stored in a ROM or a RAM beforehand. </paragraph>
<paragraph id="P-0115" lvl="0"><number>&lsqb;0115&rsqb;</number> First, the chart of <cross-reference target="DRAWINGS">FIG. 7</cross-reference> is read by the scanner, so that reading values of each patch (R&prime;&lsqb;i&rsqb;,G&prime;&lsqb;i&rsqb;,B&prime;&lsqb;i&rsqb;) are obtained in step <highlight><bold>1</bold></highlight>. Next, RGB y correction is performed on the read values (R&prime;&lsqb;i&rsqb;,G&prime;&lsqb;i&rsqb;,B&prime;&lsqb;i&rsqb;) in step <highlight><bold>2</bold></highlight>. Then, the hue determining circuit determines color of each patch, and a masking coefficient corresponding to the color of each patch, and (C&prime;&lsqb;i&rsqb;,M&prime;&lsqb;i&rsqb;,Y&prime;&lsqb;i&rsqb;,K&prime;&lsqb;i&rsqb;) is calculated by using the equation (3) in step <highlight><bold>3</bold></highlight>. </paragraph>
<paragraph id="P-0116" lvl="0"><number>&lsqb;0116&rsqb;</number> Then, difference values (C<highlight><subscript>D</subscript></highlight>&lsqb;i&rsqb;, &lsqb;i&rsqb;,M<highlight><subscript>D</subscript></highlight>&lsqb;i&rsqb;,K<highlight><subscript>D</subscript></highlight>&lsqb;i&rsqb;) between the obtained values (C&prime;&lsqb;i&rsqb;,M&prime;&lsqb;i&rsqb;,Y&prime;&lsqb;i&rsqb;,K&prime;&lsqb;i&rsqb;) and (Cs&lsqb;i&rsqb;,Ms&lsqb;i&rsqb;,Ys&lsqb;i&rsqb;,Ks&lsqb;i&rsqb;) which have been calculated are calculated in step 4. The difference values (C<highlight><subscript>D</subscript></highlight>&lsqb;i&rsqb;,M<highlight><subscript>D</subscript></highlight>&lsqb;i&rsqb;,Y<highlight><subscript>D</subscript></highlight>&lsqb;i&rsqb;,K<highlight><subscript>D</subscript></highlight>&lsqb;i&rsqb;) are stored as correction values in step <highlight><bold>5</bold></highlight>. The above process is performed for each color. </paragraph>
<paragraph id="P-0117" lvl="0"><number>&lsqb;0117&rsqb;</number> By storing read values (Rs&lsqb;i&rsqb;,Gs&lsqb;i&rsqb;,Bs&lsqb;i&rsqb;) by a scanner CCD having standard spectral characteristics, and recording values (Cs&lsqb;i&rsqb;,Ms&lsqb;i&rsqb;,Ys&lsqb;i&rsqb;,Ks&lsqb;i&rsqb;) of the developing parts C, M, Y and K calculated from (Rs&lsqb;i&rsqb;,Gs&lsqb;i&rsqb;,Bs&lsqb;i&rsqb;) in the ROM <highlight><bold>416</bold></highlight> or in a RAM <highlight><bold>417</bold></highlight> in the image forming apparatus, the process for calculating the difference values can be performed by using the RGB&ggr; correction circuit <highlight><bold>403</bold></highlight> and the color calibration processing circuit <highlight><bold>406</bold></highlight>. </paragraph>
<paragraph id="P-0118" lvl="0"><number>&lsqb;0118&rsqb;</number> Next, a process for calculating the corrected masking coefficient will be described concretely. </paragraph>
<paragraph id="P-0119" lvl="0"><number>&lsqb;0119&rsqb;</number> As described before, the masking coefficient is calculated from (R,G,B) values of the white point, the black point and two points on the boundary plane which are not on the achromatic color axis, and (C,M,Y,K) values of the developing parts optimal for reproducing the colors. As mentioned above, in this embodiment, the color space (R,G,B) is divided into six spaces of R, Y, G, C, B, M, and each value of the divided point is represented as (R&lsqb;i&rsqb;,G&lsqb;i&rsqb;,B&lsqb;i&rsqb;:i&equals;R,Y,G,C,B,M). In addition, (R&lsqb;i&rsqb;,G&lsqb;i&rsqb;,B&lsqb;i&rsqb;:i&equals;R,Y,G,C,B,M) is called as a scanner vector. The recording values of the developing parts C, M, Y and K optimal for reproducing color of each divided point are represented as (C&lsqb;i&rsqb;,M&lsqb;i&rsqb;,Y&lsqb;i&rsqb;,K&lsqb;i&rsqb;:i&equals;R,Y,G,C,B,M), and (C&lsqb;i&rsqb;,M&lsqb;i&rsqb;,Y&lsqb;i&rsqb;,K&lsqb;i&rsqb;:i&equals;R,Y,G,C,B,M) is called a printer vector in the following description. For the white and black points, these are represented as (R&lsqb;j&rsqb;,G&lsqb;j&rsqb;,B&lsqb;j&rsqb;:i&equals;W,K) and (C&lsqb;j&rsqb;,M&lsqb;j&rsqb;,Y&lsqb;j&rsqb;,K&lsqb;j&rsqb;:j&equals;W,K). The scanner vector and the printer vector are stored in the ROM <highlight><bold>416</bold></highlight> or in the RAM <highlight><bold>417</bold></highlight> beforehand. </paragraph>
<paragraph id="P-0120" lvl="0"><number>&lsqb;0120&rsqb;</number> For example, if the R patch read when calculating the correction value is in a M-R space, the corrected masking coefficient can be calculated by adding the correction values (C<highlight><subscript>D</subscript></highlight>&lsqb;R&rsqb;,M<highlight><subscript>D</subscript></highlight>&lsqb;R&rsqb;,Y<highlight><subscript>D</subscript></highlight>&lsqb;R&rsqb;,K<highlight><subscript>D</subscript></highlight>&lsqb;R&rsqb;) to all printer vectors which form the masking coefficient of the M-R space from the equation (10). That is, the corrected masking coefficients can be represented as the equation (11).  
<math-cwu id="MATH-US-00010">
<number>10</number>
<math>
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mo>(</mo>
          <mtable>
            <mtr>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>cr</mi>
                </msub>
              </mtd>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>cg</mi>
                </msub>
              </mtd>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>cb</mi>
                </msub>
              </mtd>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>c</mi>
                </msub>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>mr</mi>
                </msub>
              </mtd>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>mg</mi>
                </msub>
              </mtd>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>mb</mi>
                </msub>
              </mtd>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>m</mi>
                </msub>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>yr</mi>
                </msub>
              </mtd>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>yg</mi>
                </msub>
              </mtd>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>yb</mi>
                </msub>
              </mtd>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>y</mi>
                </msub>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>kr</mi>
                </msub>
              </mtd>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>kg</mi>
                </msub>
              </mtd>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>kb</mi>
                </msub>
              </mtd>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>k</mi>
                </msub>
              </mtd>
            </mtr>
          </mtable>
          <mo>)</mo>
        </mrow>
        <mo>=</mo>
        <mrow>
          <mrow>
            <mo>(</mo>
            <mtable>
              <mtr>
                <mtd>
                  <mrow>
                    <mrow>
                      <mi>C</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>W</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                    <mo>+</mo>
                    <mrow>
                      <msub>
                        <mi>C</mi>
                        <mi>D</mi>
                      </msub>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>R</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mrow>
                      <mi>C</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>K</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                    <mo>+</mo>
                    <mrow>
                      <msub>
                        <mi>C</mi>
                        <mi>D</mi>
                      </msub>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>R</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mrow>
                      <mi>C</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>M</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                    <mo>+</mo>
                    <mrow>
                      <msub>
                        <mi>C</mi>
                        <mi>D</mi>
                      </msub>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>R</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mrow>
                      <mi>C</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>R</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                    <mo>+</mo>
                    <mrow>
                      <msub>
                        <mi>C</mi>
                        <mi>D</mi>
                      </msub>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>R</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mrow>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mrow>
                    <mrow>
                      <mi>M</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>W</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                    <mo>+</mo>
                    <mrow>
                      <msub>
                        <mi>M</mi>
                        <mi>D</mi>
                      </msub>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>R</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mrow>
                      <mi>M</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>K</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                    <mo>+</mo>
                    <mrow>
                      <msub>
                        <mi>M</mi>
                        <mi>D</mi>
                      </msub>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>R</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mrow>
                      <mi>M</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>M</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                    <mo>+</mo>
                    <mrow>
                      <msub>
                        <mi>M</mi>
                        <mi>D</mi>
                      </msub>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>R</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mrow>
                      <mi>M</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>R</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                    <mo>+</mo>
                    <mrow>
                      <msub>
                        <mi>M</mi>
                        <mi>D</mi>
                      </msub>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>R</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mrow>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mrow>
                    <mrow>
                      <mi>Y</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>W</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                    <mo>+</mo>
                    <mrow>
                      <msub>
                        <mi>Y</mi>
                        <mi>D</mi>
                      </msub>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>R</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mrow>
                      <mi>Y</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>K</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                    <mo>+</mo>
                    <mrow>
                      <msub>
                        <mi>Y</mi>
                        <mi>D</mi>
                      </msub>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>R</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mrow>
                      <mi>Y</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>M</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                    <mo>+</mo>
                    <mrow>
                      <msub>
                        <mi>Y</mi>
                        <mi>D</mi>
                      </msub>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>R</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mrow>
                      <mi>Y</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>R</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                    <mo>+</mo>
                    <mrow>
                      <msub>
                        <mi>Y</mi>
                        <mi>D</mi>
                      </msub>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>R</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mrow>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mrow>
                    <mrow>
                      <mi>K</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>W</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                    <mo>+</mo>
                    <mrow>
                      <msub>
                        <mi>K</mi>
                        <mi>D</mi>
                      </msub>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>R</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mrow>
                      <mi>K</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>K</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                    <mo>+</mo>
                    <mrow>
                      <msub>
                        <mi>K</mi>
                        <mi>D</mi>
                      </msub>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>R</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mrow>
                      <mi>K</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>M</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                    <mo>+</mo>
                    <mrow>
                      <msub>
                        <mi>K</mi>
                        <mi>D</mi>
                      </msub>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>R</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mrow>
                      <mi>K</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>R</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                    <mo>+</mo>
                    <mrow>
                      <msub>
                        <mi>K</mi>
                        <mi>D</mi>
                      </msub>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>R</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mrow>
                </mtd>
              </mtr>
            </mtable>
            <mo>)</mo>
          </mrow>
          <mo>&times;</mo>
          <mrow>
            <mo>(</mo>
            <mtable>
              <mtr>
                <mtd>
                  <mrow>
                    <mi>R</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>W</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>R</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>K</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>R</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>M</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>R</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>R</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mrow>
                    <mi>G</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>W</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>G</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>K</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>G</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>M</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>G</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>R</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mrow>
                    <mi>B</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>W</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>B</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>K</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>B</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>M</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>B</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>R</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mn>1</mn>
                </mtd>
                <mtd>
                  <mn>1</mn>
                </mtd>
                <mtd>
                  <mn>1</mn>
                </mtd>
                <mtd>
                  <mn>1</mn>
                </mtd>
              </mtr>
            </mtable>
            <mo>)</mo>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>11</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
<mathematica-file id="MATHEMATICA-00010" file="US20030002096A1-20030102-M00010.NB"/>
<image id="EMI-M00010" wi="274.11615" he="148.1004" file="US20030002096A1-20030102-M00010.TIF" imf="TIFF" ti="MF"/>
</math-cwu>
</paragraph>
<paragraph id="P-0121" lvl="0"><number>&lsqb;0121&rsqb;</number> By storing thus obtained masking coefficients in the ROM or in the RAM, a proper masking coefficient can be selected and used according to the result of hue determination of the input image. </paragraph>
<paragraph id="P-0122" lvl="0"><number>&lsqb;0122&rsqb;</number> The above process will be described by using a process block diagram of the color calibration processing circuit <highlight><bold>406</bold></highlight> shown in <cross-reference target="DRAWINGS">FIG. 8</cross-reference>. As shown in <cross-reference target="DRAWINGS">FIG. 8</cross-reference>, an input signal obtained by reading the color patch and the result of the hue determination are input into a color calibration processing part <highlight><bold>4061</bold></highlight>. Next, a reference masking coefficient and CMYK values are read from the ROM and the like, and the difference values are calculated. Then, the masking coefficient is calculated by using the equation (11), and the masking coefficient is stored. In a normal image processing, the color calibration process is performed by using the masking coefficient, and under-color-removing-process is performed in the UCR part <highlight><bold>4062</bold></highlight>. </paragraph>
<paragraph id="P-0123" lvl="0"><number>&lsqb;0123&rsqb;</number> Normally, the processes of steps <highlight><bold>1</bold></highlight>-<highlight><bold>5</bold></highlight> and calculation of masking coefficients are performed in a manufacturing process. However, a serviceman or a user, for example, can calculate the difference values and the masking coefficient, so that calibration of CCD for variation over time can be performed. In addition, by providing a color patch in the copying machine, operability at the time of calibration can be improved. </paragraph>
<paragraph id="P-0124" lvl="0"><number>&lsqb;0124&rsqb;</number> In addition, the image forming apparatus can be configured such that the color patch is read on a regular basis or when change over time of CCD is detected, and the correction values and the masking coefficient are automatically calculated. </paragraph>
<paragraph id="P-0125" lvl="0"><number>&lsqb;0125&rsqb;</number> In addition, the image forming apparatus can be configured such that the read values by the scanner CCD are captured from an external image processing apparatus by the I/F <highlight><bold>413</bold></highlight>, and after the correction values are calculated, the calculated correction values (C<highlight><subscript>D</subscript></highlight>&lsqb;i&rsqb;,M<highlight><subscript>D</subscript></highlight>&lsqb;i&rsqb;,Y<highlight><subscript>D</subscript></highlight>&lsqb;i&rsqb;,K<highlight><subscript>D</subscript></highlight>&lsqb;i&rsqb;) are stored in the ROM <highlight><bold>416</bold></highlight> or in the RAM <highlight><bold>417</bold></highlight> in the image forming apparatus, and the calculation of the masking coefficient is performed in the image forming apparatus. In addition, the external image processing apparatus may calculate the masking coefficient, and the masking coefficient may be stored in the ROM <highlight><bold>416</bold></highlight> or in the RAM <highlight><bold>417</bold></highlight> in the image forming apparatus. In addition, by installing a program for calculating the correction values and the masking coefficient in a computer, the computer can calculate the correction values and the masking coefficients by inputting values read by the scanner CCD. </paragraph>
<paragraph id="P-0126" lvl="0"><number>&lsqb;0126&rsqb;</number> (Second Dmbodiment) </paragraph>
<paragraph id="P-0127" lvl="0"><number>&lsqb;0127&rsqb;</number> In the first embodiment, the difference value is added to every printer vectors when calculating the corrected masking coefficient as shown in equation (11). As indicated by the equations 8 and 9, color calibration can be performed effectively by this method. </paragraph>
<paragraph id="P-0128" lvl="0"><number>&lsqb;0128&rsqb;</number> However, since the printer vectors of the white and black points are used for calculation of masking coefficients for every divided color space, when different correction values are used for each space, there is a case that discontiguous spaces are generated around the boundary planes near the white and black points. </paragraph>
<paragraph id="P-0129" lvl="0"><number>&lsqb;0129&rsqb;</number> In addition, for a printer vector of another point of the boundary point, by using difference values corresponding to the point, discontinuity on each boundary plane can be prevented. </paragraph>
<paragraph id="P-0130" lvl="0"><number>&lsqb;0130&rsqb;</number> In the second embodiment, in consideration of these points, in the above example using R patch, the correction values (C<highlight><subscript>D</subscript></highlight>&lsqb;R&rsqb;,M<highlight><subscript>D</subscript></highlight>&lsqb;R&rsqb;,Y<highlight><subscript>D</subscript></highlight>&lsqb;R&rsqb;,K<highlight><subscript>D</subscript></highlight>&lsqb;R&rsqb;) and (C<highlight><subscript>D</subscript></highlight>&lsqb;M&rsqb;, M<highlight><subscript>D</subscript></highlight>&lsqb;M&rsqb;,Y<highlight><subscript>D</subscript></highlight>&lsqb;M&rsqb;,K<highlight><subscript>D</subscript></highlight>&lsqb;M&rsqb;) corresponding to printer vectors of R and M respectively stored in the ROM <highlight><bold>416</bold></highlight> or in the RAM <highlight><bold>417</bold></highlight> are added to corresponding printer vectors respectively, and the masking coefficient is calculated by the color calibration processing circuit <highlight><bold>406</bold></highlight>. That is, calculation shown in a following equation (12) is performed.  
<math-cwu id="MATH-US-00011">
<number>11</number>
<math>
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mo>(</mo>
          <mtable>
            <mtr>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>cr</mi>
                </msub>
              </mtd>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>cg</mi>
                </msub>
              </mtd>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>cb</mi>
                </msub>
              </mtd>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>c</mi>
                </msub>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>mr</mi>
                </msub>
              </mtd>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>mg</mi>
                </msub>
              </mtd>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>mb</mi>
                </msub>
              </mtd>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>m</mi>
                </msub>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>yr</mi>
                </msub>
              </mtd>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>yg</mi>
                </msub>
              </mtd>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>yb</mi>
                </msub>
              </mtd>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>y</mi>
                </msub>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>kr</mi>
                </msub>
              </mtd>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>kg</mi>
                </msub>
              </mtd>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>kb</mi>
                </msub>
              </mtd>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>k</mi>
                </msub>
              </mtd>
            </mtr>
          </mtable>
          <mo>)</mo>
        </mrow>
        <mo>=</mo>
        <mrow>
          <mrow>
            <mo>(</mo>
            <mtable>
              <mtr>
                <mtd>
                  <mrow>
                    <mi>C</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>W</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>C</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>K</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mrow>
                      <mi>C</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>M</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                    <mo>+</mo>
                    <mrow>
                      <msub>
                        <mi>C</mi>
                        <mi>D</mi>
                      </msub>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>M</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mrow>
                      <mi>C</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>R</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                    <mo>+</mo>
                    <mrow>
                      <msub>
                        <mi>C</mi>
                        <mi>D</mi>
                      </msub>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>R</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mrow>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mrow>
                    <mi>M</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>W</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>M</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>K</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mrow>
                      <mi>M</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>M</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                    <mo>+</mo>
                    <mrow>
                      <msub>
                        <mi>M</mi>
                        <mi>D</mi>
                      </msub>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>M</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mrow>
                      <mi>M</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>R</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                    <mo>+</mo>
                    <mrow>
                      <msub>
                        <mi>M</mi>
                        <mi>D</mi>
                      </msub>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>R</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mrow>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mrow>
                    <mi>Y</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>W</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>Y</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>K</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mrow>
                      <mi>Y</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>M</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                    <mo>+</mo>
                    <mrow>
                      <msub>
                        <mi>Y</mi>
                        <mi>D</mi>
                      </msub>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>M</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mrow>
                      <mi>Y</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>R</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                    <mo>+</mo>
                    <mrow>
                      <msub>
                        <mi>Y</mi>
                        <mi>D</mi>
                      </msub>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>R</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mrow>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mrow>
                    <mi>K</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>W</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>K</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>K</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mrow>
                      <mi>K</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>M</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                    <mo>+</mo>
                    <mrow>
                      <msub>
                        <mi>K</mi>
                        <mi>D</mi>
                      </msub>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>M</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mrow>
                      <mi>K</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>R</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                    <mo>+</mo>
                    <mrow>
                      <msub>
                        <mi>K</mi>
                        <mi>D</mi>
                      </msub>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>R</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mrow>
                </mtd>
              </mtr>
            </mtable>
            <mo>)</mo>
          </mrow>
          <mo>&times;</mo>
          <msup>
            <mrow>
              <mo>(</mo>
              <mtable>
                <mtr>
                  <mtd>
                    <mrow>
                      <mi>R</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>W</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mtd>
                  <mtd>
                    <mrow>
                      <mi>R</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>K</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mtd>
                  <mtd>
                    <mrow>
                      <mi>R</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>M</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mtd>
                  <mtd>
                    <mrow>
                      <mi>R</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>R</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mtd>
                </mtr>
                <mtr>
                  <mtd>
                    <mrow>
                      <mi>G</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>W</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mtd>
                  <mtd>
                    <mrow>
                      <mi>G</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>K</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mtd>
                  <mtd>
                    <mrow>
                      <mi>G</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>M</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mtd>
                  <mtd>
                    <mrow>
                      <mi>G</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>R</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mtd>
                </mtr>
                <mtr>
                  <mtd>
                    <mrow>
                      <mi>B</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>W</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mtd>
                  <mtd>
                    <mrow>
                      <mi>B</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>K</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mtd>
                  <mtd>
                    <mrow>
                      <mi>B</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>M</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mtd>
                  <mtd>
                    <mrow>
                      <mi>B</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>R</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mtd>
                </mtr>
                <mtr>
                  <mtd>
                    <mn>1</mn>
                  </mtd>
                  <mtd>
                    <mn>1</mn>
                  </mtd>
                  <mtd>
                    <mn>1</mn>
                  </mtd>
                  <mtd>
                    <mn>1</mn>
                  </mtd>
                </mtr>
              </mtable>
              <mo>)</mo>
            </mrow>
            <mrow>
              <mo>-</mo>
              <mn>1</mn>
            </mrow>
          </msup>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>12</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
<mathematica-file id="MATHEMATICA-00011" file="US20030002096A1-20030102-M00011.NB"/>
<image id="EMI-M00011" wi="216.027" he="149.0643" file="US20030002096A1-20030102-M00011.TIF" imf="TIFF" ti="MF"/>
</math-cwu>
</paragraph>
<paragraph id="P-0131" lvl="7"><number>&lsqb;0131&rsqb;</number> In an actual image forming process, calculation of the equation (1) is performed on image information read by the scanner by using the color calibration processing circuit 406 by using the masking coefficient calculated by using the equation (12), so that the variation of spectral characteristics of the scanner CCD is calibrated, and continuous and faithful color reproduction can be performed. </paragraph>
<paragraph id="P-0132" lvl="0"><number>&lsqb;0132&rsqb;</number> (Third Embodiment) </paragraph>
<paragraph id="P-0133" lvl="0"><number>&lsqb;0133&rsqb;</number> In the first and second embodiments, the masking coefficient is calculated by using the difference values indicated by the equation (4). In the third embodiment, a method for calculating the masking coefficient without using the difference values. </paragraph>
<paragraph id="P-0134" lvl="0"><number>&lsqb;0134&rsqb;</number> In a case where the color space is divided by points red (R), yellow (Y), green (G), cyan (C), blue (B), magenta (M)in the same way as the above mentioned embodiments, the masking coefficient (before correction) of the hue between R and Y can be represented by an equation (13).  
<math-cwu id="MATH-US-00012">
<number>12</number>
<math>
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mo>(</mo>
          <mtable>
            <mtr>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>cr</mi>
                </msub>
              </mtd>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>cg</mi>
                </msub>
              </mtd>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>cb</mi>
                </msub>
              </mtd>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>c</mi>
                </msub>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>mr</mi>
                </msub>
              </mtd>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>mg</mi>
                </msub>
              </mtd>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>mb</mi>
                </msub>
              </mtd>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>m</mi>
                </msub>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>yr</mi>
                </msub>
              </mtd>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>yg</mi>
                </msub>
              </mtd>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>yb</mi>
                </msub>
              </mtd>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>y</mi>
                </msub>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>kr</mi>
                </msub>
              </mtd>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>kg</mi>
                </msub>
              </mtd>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>kb</mi>
                </msub>
              </mtd>
              <mtd>
                <msub>
                  <mi>a</mi>
                  <mi>k</mi>
                </msub>
              </mtd>
            </mtr>
          </mtable>
          <mo>)</mo>
        </mrow>
        <mo>=</mo>
        <mrow>
          <mrow>
            <mo>(</mo>
            <mtable>
              <mtr>
                <mtd>
                  <mrow>
                    <mi>C</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>R</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>C</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>Y</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>C</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>W</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>C</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>K</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mrow>
                    <mi>M</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>R</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>M</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>Y</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>M</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>W</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>M</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>K</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mrow>
                    <mi>Y</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>R</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>Y</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>Y</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>Y</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>W</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>Y</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>K</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mrow>
                    <mi>K</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>R</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>K</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>Y</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>K</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>W</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>K</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>K</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
              </mtr>
            </mtable>
            <mo>)</mo>
          </mrow>
          <mo>&times;</mo>
          <msup>
            <mrow>
              <mo>(</mo>
              <mtable>
                <mtr>
                  <mtd>
                    <mrow>
                      <mi>R</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>R</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mtd>
                  <mtd>
                    <mrow>
                      <mi>R</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>Y</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mtd>
                  <mtd>
                    <mrow>
                      <mi>R</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>W</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mtd>
                  <mtd>
                    <mrow>
                      <mi>R</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>K</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mtd>
                </mtr>
                <mtr>
                  <mtd>
                    <mrow>
                      <mi>G</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>R</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mtd>
                  <mtd>
                    <mrow>
                      <mi>G</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>Y</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mtd>
                  <mtd>
                    <mrow>
                      <mi>G</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>W</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mtd>
                  <mtd>
                    <mrow>
                      <mi>G</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>K</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mtd>
                </mtr>
                <mtr>
                  <mtd>
                    <mrow>
                      <mi>B</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>R</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mtd>
                  <mtd>
                    <mrow>
                      <mi>B</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>Y</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mtd>
                  <mtd>
                    <mrow>
                      <mi>B</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>W</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mtd>
                  <mtd>
                    <mrow>
                      <mi>B</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>K</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mtd>
                </mtr>
                <mtr>
                  <mtd>
                    <mn>1</mn>
                  </mtd>
                  <mtd>
                    <mn>1</mn>
                  </mtd>
                  <mtd>
                    <mn>1</mn>
                  </mtd>
                  <mtd>
                    <mn>1</mn>
                  </mtd>
                </mtr>
              </mtable>
              <mo>)</mo>
            </mrow>
            <mrow>
              <mo>-</mo>
              <mn>1</mn>
            </mrow>
          </msup>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>13</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
<mathematica-file id="MATHEMATICA-00012" file="US20030002096A1-20030102-M00012.NB"/>
<image id="EMI-M00012" wi="216.027" he="99.13995" file="US20030002096A1-20030102-M00012.TIF" imf="TIFF" ti="MF"/>
</math-cwu>
</paragraph>
<paragraph id="P-0135" lvl="0"><number>&lsqb;0135&rsqb;</number> For example, assuming that values obtained by reading the R patch by a scanner CCD having variation of spectral characteristics is (R&prime;&lsqb;R&rsqb;,G&prime;&lsqb;R&rsqb;,B&prime;&lsqb;R&rsqb;), values calculated by the masking coefficient of the equation (13) can be represented by a following equation.  
<math-cwu id="MATH-US-00013">
<number>13</number>
<math>
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mo>(</mo>
          <mtable>
            <mtr>
              <mtd>
                <mrow>
                  <msup>
                    <mi>C</mi>
                    <mi>&prime;</mi>
                  </msup>
                  <mo>&af;</mo>
                  <mrow>
                    <mo>[</mo>
                    <mi>R</mi>
                    <mo>]</mo>
                  </mrow>
                </mrow>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <mrow>
                  <msup>
                    <mi>M</mi>
                    <mi>&prime;</mi>
                  </msup>
                  <mo>&af;</mo>
                  <mrow>
                    <mo>[</mo>
                    <mi>R</mi>
                    <mo>]</mo>
                  </mrow>
                </mrow>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <mrow>
                  <msup>
                    <mi>Y</mi>
                    <mi>&prime;</mi>
                  </msup>
                  <mo>&af;</mo>
                  <mrow>
                    <mo>[</mo>
                    <mi>R</mi>
                    <mo>]</mo>
                  </mrow>
                </mrow>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <mrow>
                  <msup>
                    <mi>K</mi>
                    <mi>&prime;</mi>
                  </msup>
                  <mo>&af;</mo>
                  <mrow>
                    <mo>[</mo>
                    <mi>R</mi>
                    <mo>]</mo>
                  </mrow>
                </mrow>
              </mtd>
            </mtr>
          </mtable>
          <mo>)</mo>
        </mrow>
        <mo>=</mo>
        <mrow>
          <mrow>
            <mo>(</mo>
            <mtable>
              <mtr>
                <mtd>
                  <mrow>
                    <mi>C</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>R</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>C</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>Y</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>C</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>W</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>C</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>K</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mrow>
                    <mi>M</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>R</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>M</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>Y</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>M</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>W</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>M</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>K</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mrow>
                    <mi>Y</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>R</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>Y</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>Y</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>Y</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>W</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>Y</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>K</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mrow>
                    <mi>K</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>R</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>K</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>Y</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>K</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>W</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>K</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>K</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
              </mtr>
            </mtable>
            <mo>)</mo>
          </mrow>
          <mo>&times;</mo>
          <msup>
            <mrow>
              <mo>(</mo>
              <mtable>
                <mtr>
                  <mtd>
                    <mrow>
                      <mi>R</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>R</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mtd>
                  <mtd>
                    <mrow>
                      <mi>R</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>Y</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mtd>
                  <mtd>
                    <mrow>
                      <mi>R</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>W</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mtd>
                  <mtd>
                    <mrow>
                      <mi>R</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>K</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mtd>
                </mtr>
                <mtr>
                  <mtd>
                    <mrow>
                      <mi>G</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>R</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mtd>
                  <mtd>
                    <mrow>
                      <mi>G</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>Y</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mtd>
                  <mtd>
                    <mrow>
                      <mi>G</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>W</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mtd>
                  <mtd>
                    <mrow>
                      <mi>G</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>K</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mtd>
                </mtr>
                <mtr>
                  <mtd>
                    <mrow>
                      <mi>B</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>R</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mtd>
                  <mtd>
                    <mrow>
                      <mi>B</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>Y</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mtd>
                  <mtd>
                    <mrow>
                      <mi>B</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>W</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mtd>
                  <mtd>
                    <mrow>
                      <mi>B</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>K</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mtd>
                </mtr>
                <mtr>
                  <mtd>
                    <mn>1</mn>
                  </mtd>
                  <mtd>
                    <mn>1</mn>
                  </mtd>
                  <mtd>
                    <mn>1</mn>
                  </mtd>
                  <mtd>
                    <mn>1</mn>
                  </mtd>
                </mtr>
              </mtable>
              <mo>)</mo>
            </mrow>
            <mrow>
              <mo>-</mo>
              <mn>1</mn>
            </mrow>
          </msup>
          <mo>&times;</mo>
          <mrow>
            <mo>(</mo>
            <mtable>
              <mtr>
                <mtd>
                  <mrow>
                    <msup>
                      <mi>R</mi>
                      <mi>&prime;</mi>
                    </msup>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>R</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mrow>
                    <msup>
                      <mi>G</mi>
                      <mi>&prime;</mi>
                    </msup>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>R</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mrow>
                    <msup>
                      <mi>B</mi>
                      <mi>&prime;</mi>
                    </msup>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>R</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mn>1</mn>
                </mtd>
              </mtr>
            </mtable>
            <mo>)</mo>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>14</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
<mathematica-file id="MATHEMATICA-00013" file="US20030002096A1-20030102-M00013.NB"/>
<image id="EMI-M00013" wi="216.027" he="102.0033" file="US20030002096A1-20030102-M00013.TIF" imf="TIFF" ti="MF"/>
</math-cwu>
</paragraph>
<paragraph id="P-0136" lvl="0"><number>&lsqb;0136&rsqb;</number> Therefore, (C&lsqb;R&rsqb;,M&lsqb;R&rsqb;,Y&lsqb;R&rsqb;,K&lsqb;R&rsqb;) optimal for color reproducing of the R patch can not be obtained. </paragraph>
<paragraph id="P-0137" lvl="0"><number>&lsqb;0137&rsqb;</number> To solve this problem, variation of spectral characteristics of the scanner CCD is calibrated by using machine-specific scanner vectors as the scanner vector part of the equation (13). That is, the RGB values (R&prime;&lsqb;i&rsqb;,G&prime;&lsqb;i&rsqb;,B&prime;&lsqb;i&rsqb;:i&equals;R,Y,G,C,B,M) obtained by reading the color patch of <cross-reference target="DRAWINGS">FIG. 7</cross-reference> are used as the scanner vector. Therefore,  
<math-cwu id="MATH-US-00014">
<number>14</number>
<math>
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mo>(</mo>
          <mtable>
            <mtr>
              <mtd>
                <mrow>
                  <mi>C</mi>
                  <mo>&af;</mo>
                  <mrow>
                    <mo>[</mo>
                    <mi>R</mi>
                    <mo>]</mo>
                  </mrow>
                </mrow>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <mrow>
                  <mi>M</mi>
                  <mo>&af;</mo>
                  <mrow>
                    <mo>[</mo>
                    <mi>R</mi>
                    <mo>]</mo>
                  </mrow>
                </mrow>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <mrow>
                  <mi>Y</mi>
                  <mo>&af;</mo>
                  <mrow>
                    <mo>[</mo>
                    <mi>R</mi>
                    <mo>]</mo>
                  </mrow>
                </mrow>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <mrow>
                  <mi>K</mi>
                  <mo>&af;</mo>
                  <mrow>
                    <mo>[</mo>
                    <mi>R</mi>
                    <mo>]</mo>
                  </mrow>
                </mrow>
              </mtd>
            </mtr>
          </mtable>
          <mo>)</mo>
        </mrow>
        <mo>=</mo>
        <mrow>
          <mrow>
            <mo>(</mo>
            <mtable>
              <mtr>
                <mtd>
                  <mrow>
                    <mi>C</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>R</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>C</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>Y</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>C</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>W</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>C</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>K</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mrow>
                    <mi>M</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>R</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>M</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>Y</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>M</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>W</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>M</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>K</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mrow>
                    <mi>Y</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>R</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>Y</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>Y</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>Y</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>W</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>Y</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>K</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mrow>
                    <mi>K</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>R</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>K</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>Y</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>K</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>W</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mi>K</mi>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>K</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
              </mtr>
            </mtable>
            <mo>)</mo>
          </mrow>
          <mo>&times;</mo>
          <msup>
            <mrow>
              <mo>(</mo>
              <mtable>
                <mtr>
                  <mtd>
                    <mrow>
                      <msup>
                        <mi>R</mi>
                        <mi>&prime;</mi>
                      </msup>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>R</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mtd>
                  <mtd>
                    <mrow>
                      <msup>
                        <mi>R</mi>
                        <mi>&prime;</mi>
                      </msup>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>Y</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mtd>
                  <mtd>
                    <mrow>
                      <mi>R</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>W</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mtd>
                  <mtd>
                    <mrow>
                      <mi>R</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>K</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mtd>
                </mtr>
                <mtr>
                  <mtd>
                    <mrow>
                      <msup>
                        <mi>G</mi>
                        <mi>&prime;</mi>
                      </msup>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>R</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mtd>
                  <mtd>
                    <mrow>
                      <msup>
                        <mi>G</mi>
                        <mi>&prime;</mi>
                      </msup>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>Y</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mtd>
                  <mtd>
                    <mrow>
                      <mi>G</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>W</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mtd>
                  <mtd>
                    <mrow>
                      <mi>G</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>K</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mtd>
                </mtr>
                <mtr>
                  <mtd>
                    <mrow>
                      <msup>
                        <mi>B</mi>
                        <mi>&prime;</mi>
                      </msup>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>R</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mtd>
                  <mtd>
                    <mrow>
                      <msup>
                        <mi>B</mi>
                        <mi>&prime;</mi>
                      </msup>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>Y</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mtd>
                  <mtd>
                    <mrow>
                      <mi>B</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>W</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mtd>
                  <mtd>
                    <mrow>
                      <mi>B</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>[</mo>
                        <mi>K</mi>
                        <mo>]</mo>
                      </mrow>
                    </mrow>
                  </mtd>
                </mtr>
                <mtr>
                  <mtd>
                    <mn>1</mn>
                  </mtd>
                  <mtd>
                    <mn>1</mn>
                  </mtd>
                  <mtd>
                    <mn>1</mn>
                  </mtd>
                  <mtd>
                    <mn>1</mn>
                  </mtd>
                </mtr>
              </mtable>
              <mo>)</mo>
            </mrow>
            <mrow>
              <mo>-</mo>
              <mn>1</mn>
            </mrow>
          </msup>
          <mo>&times;</mo>
          <mrow>
            <mo>(</mo>
            <mtable>
              <mtr>
                <mtd>
                  <mrow>
                    <msup>
                      <mi>R</mi>
                      <mi>&prime;</mi>
                    </msup>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>R</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mrow>
                    <msup>
                      <mi>G</mi>
                      <mi>&prime;</mi>
                    </msup>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>R</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mrow>
                    <msup>
                      <mi>B</mi>
                      <mi>&prime;</mi>
                    </msup>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>[</mo>
                      <mi>R</mi>
                      <mo>]</mo>
                    </mrow>
                  </mrow>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mn>1</mn>
                </mtd>
              </mtr>
            </mtable>
            <mo>)</mo>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>15</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
<mathematica-file id="MATHEMATICA-00014" file="US20030002096A1-20030102-M00014.NB"/>
<image id="EMI-M00014" wi="216.027" he="97.9209" file="US20030002096A1-20030102-M00014.TIF" imf="TIFF" ti="MF"/>
</math-cwu>
</paragraph>
<paragraph id="P-0138" lvl="7"><number>&lsqb;0138&rsqb;</number> holds true, so that (C&lsqb;R&rsqb;,M&lsqb;R&rsqb;,Y&lsqb;R&rsqb;,K&lsqb;R&rsqb;) optimal for reproducing colors of the R patch of <cross-reference target="DRAWINGS">FIG. 7</cross-reference> can be obtained. Accordingly, the masking coefficient is calculated by using scanner reading values (scanner vectors) of the divided points by which the hue is divided and recording values (printer vectors) of the developing parts C, M, Y and K optimal for reproducing color of the divided points. Then, faithful color reproduction can be performed by calibrating variation of spectral characteristics of the scanner CCD by using the masking coefficient. </paragraph>
<paragraph id="P-0139" lvl="0"><number>&lsqb;0139&rsqb;</number> According to then third embodiment, different from the first and second embodiments, it becomes unnecessary to hold the difference values (C<highlight><subscript>D</subscript></highlight>&lsqb;i&rsqb;,M<highlight><subscript>D</subscript></highlight>&lsqb;i&rsqb;,Y<highlight><subscript>D</subscript></highlight>&lsqb;i&rsqb;,K<highlight><subscript>D</subscript></highlight>&lsqb;i&rsqb;), and, faithful color reproduction can be performed. </paragraph>
<paragraph id="P-0140" lvl="0"><number>&lsqb;0140&rsqb;</number> In addition, it is possible that the hue determining circuit determines the hue of the color of the patch and optimal CMYK output image signals according to the determined hue are read from a memory and the like, and the read values can be used for calculating the masking coefficient of the third embodiment. </paragraph>
<paragraph id="P-0141" lvl="0"><number>&lsqb;0141&rsqb;</number> (Fourth Embodiment) </paragraph>
<paragraph id="P-0142" lvl="0"><number>&lsqb;0142&rsqb;</number> The above mentioned color calibration process can be applied not only to the copying machine shown in <cross-reference target="DRAWINGS">FIG. 2</cross-reference> but also to other image forming apparatuses. In the following, an example using a printer <highlight><bold>500</bold></highlight> as an image forming apparatus other than the copying machine will be described as the fourth embodiment. </paragraph>
<paragraph id="P-0143" lvl="0"><number>&lsqb;0143&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 9</cross-reference> shows a block diagram of the printer <highlight><bold>500</bold></highlight> according to the fourth embodiment of the present invention. In <cross-reference target="DRAWINGS">FIG. 9</cross-reference>, designated at the reference numeral <highlight><bold>501</bold></highlight> is a belt-like flexible photosensitive part which is a belt-like image carrier. The photosensitive belt <highlight><bold>501</bold></highlight> is provided between rotating rollers <highlight><bold>502</bold></highlight> and <highlight><bold>503</bold></highlight>, and is moved in the direction indicated by an arrow A (clockwise direction) in the figure by rotation of the rotating roller <highlight><bold>502</bold></highlight>. In the figure, designated at the reference numeral <highlight><bold>504</bold></highlight> is an electrification charger which is an electrification means for electrifying the surface of the photosensitive belt <highlight><bold>501</bold></highlight> uniformly, at the reference numeral <highlight><bold>505</bold></highlight> is a laser writing system unit which is an electrostatic image exposure means, at the reference numeral <highlight><bold>506</bold></highlight> is a color developing apparatus in which four developing devices having after-mentioned toners of yellow, magenta, cyan and black are integrated. </paragraph>
<paragraph id="P-0144" lvl="0"><number>&lsqb;0144&rsqb;</number> In the figure, designated at the reference numeral <highlight><bold>510</bold></highlight> is an intermediate transfer belt <highlight><bold>510</bold></highlight>. The intermediate transfer belt <highlight><bold>510</bold></highlight> is provided between the rotating rollers <highlight><bold>511</bold></highlight> and <highlight><bold>512</bold></highlight>, and moved in the direction indicated by an arrow B (counterclockwise direction) by rotation of the rotating roller <highlight><bold>511</bold></highlight>. The photosensitive belt <highlight><bold>501</bold></highlight> touches the intermediate transfer belt <highlight><bold>510</bold></highlight> at the rotating roller <highlight><bold>503</bold></highlight>. In the intermediate transfer belt <highlight><bold>510</bold></highlight> side of the touching part, a bias roller <highlight><bold>513</bold></highlight> having conductivity touches the back surface of the intermediate transfer belt <highlight><bold>510</bold></highlight> in a predetermined condition. In the following, the image forming operation of the printer will be described. In <cross-reference target="DRAWINGS">FIG. 9</cross-reference>, after the belt-like photosensitive part (latent image carrier) <highlight><bold>501</bold></highlight> is electrified uniformly by the electrification charger <highlight><bold>504</bold></highlight>, the laser optical device <highlight><bold>505</bold></highlight> performs scanning and exposure on the basis of image information, so that electrostatic latent image is formed on the surface of the belt-like photosensitive part (latent image carrier) <highlight><bold>501</bold></highlight>. The image information which is exposed is resolved colors each being single color image information of yellow, cyan, magenta and black into which a desired full-color image is resolved. According to this information, the laser beam L generated by the semiconductor laser (which is not shown in the figure) is used for scanning by the optical device not shown in the figure and the path of the laser beam is adjusted. </paragraph>
<paragraph id="P-0145" lvl="0"><number>&lsqb;0145&rsqb;</number> The electrostatic latent image formed here is developed as each single color by the predetermined yellow, cyan, magenta and black toner by the after-mentioned rotation type developing apparatus 506, and the image of each color is formed on the photosensitive belt successively. </paragraph>
<paragraph id="P-0146" lvl="0"><number>&lsqb;0146&rsqb;</number> Each single color image formed on the photosensitive belt <highlight><bold>501</bold></highlight> which rotates in the direction of the arrow A in the figure is transferred and overlaid successively to the intermediate transfer belt <highlight><bold>510</bold></highlight> which rotates in the direction of the arrow B for each single color of yellow, cyan, magenta and black. The images of yellow, cyan, magenta and black overlaid on the intermediate transfer belt <highlight><bold>510</bold></highlight> are transferred on the transfer paper <highlight><bold>517</bold></highlight><highlight><italic>a </italic></highlight>conveyed to the transferring part via the feeding roller <highlight><bold>518</bold></highlight>, pair of carrying rollers <highlight><bold>519</bold></highlight><highlight><italic>a </italic></highlight>and <highlight><bold>519</bold></highlight><highlight><italic>b </italic></highlight>and pair of resist rollers <highlight><bold>520</bold></highlight><highlight><italic>a </italic></highlight>and <highlight><bold>520</bold></highlight><highlight><italic>b </italic></highlight>from the sheet feeder <highlight><bold>517</bold></highlight>. After the transfer ends, the transfer paper <highlight><bold>517</bold></highlight><highlight><italic>a </italic></highlight>is fixed by a fixing device <highlight><bold>580</bold></highlight>, so that the full-color image is completed, and the print image is ejected to the ejection stack part <highlight><bold>582</bold></highlight> via the pair of ejection rollers <highlight><bold>581</bold></highlight><highlight><italic>a </italic></highlight>and <highlight><bold>581</bold></highlight><highlight><italic>b. </italic></highlight></paragraph>
<paragraph id="P-0147" lvl="0"><number>&lsqb;0147&rsqb;</number> The color calibration process of the present invention is performed in the laser writing system unit <highlight><bold>505</bold></highlight> which resolves the desired full-color image into color information of yellow, cyan, magenta and black and performs exposure or in the control apparatus (not shown in the figure). That is, input image information is converted by the masking coefficient and exposure is performed on the basis of color information of yellow, cyan, magenta and black obtained by the conversion. </paragraph>
<paragraph id="P-0148" lvl="0"><number>&lsqb;0148&rsqb;</number> The control apparatus may be provided in the inside of the printer or the outside of the printer. When providing the control apparatus (color calibration part) in the outside, the configuration can be as shown in <cross-reference target="DRAWINGS">FIG. 10</cross-reference> for example. In <cross-reference target="DRAWINGS">FIG. 10</cross-reference>, the image input part <highlight><bold>700</bold></highlight> is a scanner and the like. However, any apparatus (camera for example) can be used as long as the apparatus outputs an image as R, G, B data. In addition, the image input part <highlight><bold>700</bold></highlight> may be an apparatus which does not receive an image, instead, stores image data obtained by other apparatus and the like. The color calibrating part <highlight><bold>600</bold></highlight> performs the process for calculating CMYK necessary for color reproduction by using the masking coefficient described on the embodiments 1-3, the UCR process and other necessary processes. The correction of the masking coefficient can be performed by reading reference colors (color patch and the like) from the image input part <highlight><bold>700</bold></highlight>. Accordingly, variation and time change for each device of the image input part <highlight><bold>700</bold></highlight> can be calibrated. </paragraph>
<paragraph id="P-0149" lvl="0"><number>&lsqb;0149&rsqb;</number> The color calibration part <highlight><bold>600</bold></highlight> can be configured by a general computer by using software for performing the processing of the color calibration. In addition, the color calibration part <highlight><bold>600</bold></highlight> can be configured by using hardware for image processing. In addition, the image input part and the color calibration part <highlight><bold>600</bold></highlight> can be integrated. </paragraph>
<paragraph id="P-0150" lvl="0"><number>&lsqb;0150&rsqb;</number> As mentioned above, according to the present invention, variation of spectral characteristics of the scanner CCD from device to device even for chromatic color can be calibrated. Therefore, an image forming apparatus which can reproduce color faithfully can be provided. </paragraph>
<paragraph id="P-0151" lvl="0"><number>&lsqb;0151&rsqb;</number> In addition, discontinuity of each boundary plane can be prevented, so that faithful color reproduction can be performed without loosing continuity. </paragraph>
<paragraph id="P-0152" lvl="0"><number>&lsqb;0152&rsqb;</number> In addition, the reference values can be obtained easily when the apparatus is manufactured or when a serviceman performs adjustment. </paragraph>
<paragraph id="P-0153" lvl="0"><number>&lsqb;0153&rsqb;</number> In addition, the masking coefficient can be easily obtained by storing the difference values. Further, the difference values can be used for other apparatus and the like. </paragraph>
<paragraph id="P-0154" lvl="0"><number>&lsqb;0154&rsqb;</number> By using a document having a color close to the boundary point by which the hue is divided, the color of the boundary point can be reproduced faithfully. </paragraph>
<paragraph id="P-0155" lvl="0"><number>&lsqb;0155&rsqb;</number> The present invention is not limited to the specifically disclosed embodiments, and variations and modifications may be made without departing from the scope of the invention. </paragraph>
</section>
</detailed-description>
</subdoc-description>
<subdoc-claims>
<heading lvl="1">What is claimed is: </heading>
<claim id="CLM-00001">
<claim-text><highlight><bold>1</bold></highlight>. An image forming apparatus comprising: 
<claim-text>an image reading part, including a CCD, for optically reading a color document by scanning said color document; </claim-text>
<claim-text>an image processing part for converting, by using a masking coefficient, RGB input image signals obtained by reading said color document by said image reading part into CMYK output image signals used for recording by developing parts; </claim-text>
<claim-text>a part for calculating said masking coefficient by using RGB input image signals obtained by reading a document of which spectral characteristics are known by said image reading part and CMYK output image signals optimal for reproducing a color of said document. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00002">
<claim-text><highlight><bold>2</bold></highlight>. The image forming apparatus as claimed in <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, further comprising: 
<claim-text>a hue determining part for determining a hue to which said RGB input image signals obtained by reading said document belong among hues corresponding to RGB color spaces divided by planes including an achromatic color axis; and </claim-text>
<claim-text>a memory part for storing CMYK output image signal values optimal for reproducing a color of said document of which spectral characteristics are known; </claim-text>
<claim-text>wherein said image reading part reads said document of which spectral characteristics are known; </claim-text>
<claim-text>said hue determining part determines a hue to which said color of said document belongs; </claim-text>
<claim-text>optimal CMYK output image signals is read from said memory part according to said hue; and </claim-text>
<claim-text>said masking coefficient is calculated from said RGB input image signals obtained by reading said document and said CMYK output image signals. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00003">
<claim-text><highlight><bold>3</bold></highlight>. An image forming apparatus comprising: 
<claim-text>an image reading part, including a CCD, for optically reading a color document by scanning said color document; </claim-text>
<claim-text>an image processing part for converting, by using a masking coefficient, RGB input image signals obtained by reading said color document by said image reading part into CMYK output image signals used for recording by developing parts; </claim-text>
<claim-text>a part for calculating difference values between first CMYK output image signals and second CMYK output image signals, and calculating said masking coefficient by using said difference values, wherein said first CMYK output image signals are obtained by converting, by using a predetermined masking coefficient, first RGB input image signals obtained by reading a document of which spectral characteristics are known by using said image reading part, and said second CMYK output image signals are obtained by converting, by using said predetermined masking coefficient, second RGB input image signals obtained if said document of which spectral characteristics are known is read by an image reading device which has standard spectral characteristics. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00004">
<claim-text><highlight><bold>4</bold></highlight>. The image forming apparatus as claimed in <dependent-claim-reference depends_on="CLM-00003">claim 3</dependent-claim-reference>, wherein said predetermined masking coefficient is calculated by using first two points of spectral data on an achromatic color axis, second two points of spectral data on two boundary planes which are boundary planes forming a color space corresponding to said spectral characteristics of said document in which said second two points are not on said achromatic color axis, and four points of CMYK output image signal data optimal for reproducing colors of four points of said first and second two points; and 
<claim-text>said predetermined masking coefficient is corrected by correcting said four points of CMYK output image signals by using said difference values. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00005">
<claim-text><highlight><bold>5</bold></highlight>. The image forming apparatus as claimed in <dependent-claim-reference depends_on="CLM-00003">claim 3</dependent-claim-reference>, wherein said predetermined masking coefficient is calculated by using first two points of spectral data on an achromatic color axis, second two points of spectral data on two boundary planes which are boundary planes forming a color space corresponding to said spectral characteristics of said document in which said second two points are not on said achromatic color axis, and four points of CMYK output image signal data optimal for reproducing colors of four points of said first and second two points; and 
<claim-text>said predetermined masking coefficient is corrected by correcting CMYK output image signals of said second two points on said two boundary planes by using said difference values in which CMYK output image signals of said first two points on said achromatic color axis are not corrected. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00006">
<claim-text><highlight><bold>6</bold></highlight>. The image forming apparatus as claimed in <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, further comprising a part for storing RGB input image signals obtained if said document of which spectral characteristics are known is read by an image reading device which has standard spectral characteristics, or CMYK output image signals converted from said RGB input image signals beforehand. </claim-text>
</claim>
<claim id="CLM-00007">
<claim-text><highlight><bold>7</bold></highlight>. The image forming apparatus as claimed in <dependent-claim-reference depends_on="CLM-00003">claim 3</dependent-claim-reference>, further comprising a part for storing RGB input image signals obtained if said document of which spectral characteristics are known is read by an image reading device which has standard spectral characteristics, or CMYK output image signals converted from said RGB input image signals beforehand. </claim-text>
</claim>
<claim id="CLM-00008">
<claim-text><highlight><bold>8</bold></highlight>. The image forming apparatus as claimed in <dependent-claim-reference depends_on="CLM-00003">claim 3</dependent-claim-reference>, further comprising a part for storing said difference values. </claim-text>
</claim>
<claim id="CLM-00009">
<claim-text><highlight><bold>9</bold></highlight>. The image forming apparatus as claimed in <dependent-claim-reference depends_on="CLM-00008">claim 8</dependent-claim-reference>, wherein color patches having the same spectral characteristic as those of divided points on said planes used for dividing said color space are used for said document of which spectral characteristics are known, and difference values are obtained for each divided point. </claim-text>
</claim>
<claim id="CLM-00010">
<claim-text><highlight><bold>10</bold></highlight>. A method used for calculating a masking coefficient in an image forming apparatus comprising: an image reading part, including a CCD, for optically reading a color document by scanning said color document; an image processing part for converting, by using a masking coefficient, RGB input image signals obtained by reading said color document by said image reading part into CMYK output image signals used for recording by developing parts; 
<claim-text>said method comprising the step of: 
<claim-text>calculating said masking coefficient by using RGB input image signals obtained by reading a document of which spectral characteristics are known by said image reading part and CMYK output image signals optimal for reproducing a color of said document. </claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00011">
<claim-text><highlight><bold>11</bold></highlight>. The method as claimed in <dependent-claim-reference depends_on="CLM-00011">claim 10</dependent-claim-reference>, said image forming apparatus further comprising a hue determining part for determining a hue to which said RGB input image signals obtained by reading said document belong among hues corresponding to RGB color spaces divided by planes including an achromatic color axis; and a memory part for storing CMYK output image signal values optimal for reproducing a color of said document of which spectral characteristics are known; 
<claim-text>wherein said image reading part reads said document of which spectral characteristics are known; </claim-text>
<claim-text>said hue determining part determines a hue to which said color of said document belongs; </claim-text>
<claim-text>optimal CMYK output image signals is read from said memory part according to said hue; and </claim-text>
<claim-text>said masking coefficient is calculated from said RGB input image signals obtained by reading said document and said CMYK output image signals. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00012">
<claim-text><highlight><bold>12</bold></highlight>. A method used for calculating a masking coefficient in an image forming apparatus comprising: an image reading part, including a CCD, for optically reading a color document by scanning said color document; an image processing part for converting, by using a masking coefficient, RGB input image signals obtained by reading said color document by said image reading part into CMYK output image signals used for recording by developing parts; 
<claim-text>said method comprising the step of: 
<claim-text>calculating difference values between first CMYK output image signals and second CMYK output image signals, and calculating said masking coefficient by using said difference values, wherein said first CMYK output image signals are obtained by converting, by using a predetermined masking coefficient, first RGB input image signals obtained by reading a document of which spectral characteristics are known by using said image reading part, and said second CMYK output image signals are obtained by converting, by using said predetermined masking coefficient, second RGB input image signals obtained if said document of which spectral characteristics are known is read by an image reading device which has standard spectral characteristics. </claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00013">
<claim-text><highlight><bold>13</bold></highlight>. The method as claimed in <dependent-claim-reference depends_on="CLM-00011">claim 12</dependent-claim-reference>, wherein said predetermined masking coefficient is calculated by using first two points of spectral data on an achromatic color axis, second two points of spectral data on two boundary planes which are boundary planes forming a color space corresponding to said spectral characteristics of said document in which said second two points are not on said achromatic color axis, and four points of CMYK output image signal data optimal for reproducing colors of four points of said first and second two points; and 
<claim-text>said predetermined masking coefficient is corrected by correcting said four points of CMYK output image signals by using said difference values. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00014">
<claim-text><highlight><bold>14</bold></highlight>. The method as claimed in <dependent-claim-reference depends_on="CLM-00011">claim 12</dependent-claim-reference>, wherein said predetermined masking coefficient is calculated by using first two points of spectral data on an achromatic color axis, second two points of spectral data on two boundary planes which are boundary planes forming a color space corresponding to said spectral characteristics of said document in which said second two points are not on said achromatic color axis, and four points of CMYK output image signal data optimal for reproducing colors of four points of said first and second two points; and 
<claim-text>said predetermined masking coefficient is corrected by correcting CMYK output image signals of said second two points on said two boundary planes by using said difference values in which CMYK output image signals of said first two points on said achromatic color axis are not corrected. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00015">
<claim-text><highlight><bold>15</bold></highlight>. The method as claimed in <dependent-claim-reference depends_on="CLM-00011">claim 10</dependent-claim-reference>, further comprising the step of using values which have been stored beforehand as RGB input image signals obtained if said document of which spectral characteristics are known is read by an image reading device which has standard spectral characteristics, or as CMYK output image signals converted from said RGB input image signals. </claim-text>
</claim>
<claim id="CLM-00016">
<claim-text><highlight><bold>16</bold></highlight>. The method as claimed in <dependent-claim-reference depends_on="CLM-00011">claim 12</dependent-claim-reference>, further comprising the step of using values which have been stored beforehand as RGB input image signals obtained if said document of which spectral characteristics are known is read by an image reading device which has standard spectral characteristics, or as CMYK output image signals converted from said RGB input image signals. </claim-text>
</claim>
<claim id="CLM-00017">
<claim-text><highlight><bold>17</bold></highlight>. The method as claimed in <dependent-claim-reference depends_on="CLM-00011">claim 12</dependent-claim-reference>, further comprising the step of using values which have been stored beforehand as said difference values. </claim-text>
</claim>
<claim id="CLM-00018">
<claim-text><highlight><bold>18</bold></highlight>. The method as claimed in <dependent-claim-reference depends_on="CLM-00011">claim 17</dependent-claim-reference>, wherein color patches having the same spectral characteristic as those of divided points on said planes used for dividing said color space are used for said document of which spectral characteristics are known, and difference values are obtained for each divided point. </claim-text>
</claim>
<claim id="CLM-00019">
<claim-text><highlight><bold>19</bold></highlight>. A computer readable medium storing program code for causing a computer to calculate a masking coefficient used in an image forming apparatus comprising: an image reading part, including a CCD, for optically reading a color document by scanning said color document; an image processing part for converting, by using a masking coefficient, RGB input image signals obtained by reading said color document by said image reading part into CMYK output image signals used for recording by developing parts; 
<claim-text>said computer readable medium comprising: 
<claim-text>program code means for calculating said masking coefficient by using RGB input image signals obtained by reading a document of which spectral characteristics are known by said image reading part and CMYK output image signals optimal for reproducing a color of said document. </claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00020">
<claim-text><highlight><bold>20</bold></highlight>. A computer readable medium storing program code for causing a computer to calculate a masking coefficient used in an image forming apparatus comprising: an image reading part, including a CCD, for optically reading a color document by scanning said color document; an image processing part for converting, by using a masking coefficient, RGB input image signals obtained by reading said color document by said image reading part into CMYK output image signals used for recording by developing parts; 
<claim-text>said computer readable medium comprising: 
<claim-text>program code means for calculating difference values between first CMYK output image signals and second CMYK output image signals, and calculating said masking coefficient by using said difference values, wherein said first CMYK output image signals are obtained by converting, by using a predetermined masking coefficient, first RGB input image signals obtained by reading a document of which spectral characteristics are known by using said image reading part, and said second CMYK output image signals are obtained by converting, by using said predetermined masking coefficient, second RGB input image signals obtained if said document of which spectral characteristics are known is read by an image reading device which has standard spectral characteristics.</claim-text>
</claim-text>
</claim-text>
</claim>
</subdoc-claims>
<subdoc-drawings id="DRAWINGS">
<heading lvl="0" align="CENTER">Drawings</heading>
<representative-figure>4</representative-figure>
<figure id="figure-D00000">
<image id="EMI-D00000" file="US20030002096A1-20030102-D00000.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00001">
<image id="EMI-D00001" file="US20030002096A1-20030102-D00001.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00002">
<image id="EMI-D00002" file="US20030002096A1-20030102-D00002.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00003">
<image id="EMI-D00003" file="US20030002096A1-20030102-D00003.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00004">
<image id="EMI-D00004" file="US20030002096A1-20030102-D00004.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00005">
<image id="EMI-D00005" file="US20030002096A1-20030102-D00005.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00006">
<image id="EMI-D00006" file="US20030002096A1-20030102-D00006.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00007">
<image id="EMI-D00007" file="US20030002096A1-20030102-D00007.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00008">
<image id="EMI-D00008" file="US20030002096A1-20030102-D00008.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00009">
<image id="EMI-D00009" file="US20030002096A1-20030102-D00009.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00010">
<image id="EMI-D00010" file="US20030002096A1-20030102-D00010.TIF" imf="TIFF" ti="DR"/>
</figure>
</subdoc-drawings>
</patent-application-publication>
