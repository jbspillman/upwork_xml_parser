<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE patent-application-publication SYSTEM "pap-v16-2002-01-01.dtd" [
<!ENTITY US20030002480A1-20030102-D00000.TIF SYSTEM "US20030002480A1-20030102-D00000.TIF" NDATA TIF>
<!ENTITY US20030002480A1-20030102-D00001.TIF SYSTEM "US20030002480A1-20030102-D00001.TIF" NDATA TIF>
<!ENTITY US20030002480A1-20030102-D00002.TIF SYSTEM "US20030002480A1-20030102-D00002.TIF" NDATA TIF>
<!ENTITY US20030002480A1-20030102-D00003.TIF SYSTEM "US20030002480A1-20030102-D00003.TIF" NDATA TIF>
<!ENTITY US20030002480A1-20030102-D00004.TIF SYSTEM "US20030002480A1-20030102-D00004.TIF" NDATA TIF>
<!ENTITY US20030002480A1-20030102-D00005.TIF SYSTEM "US20030002480A1-20030102-D00005.TIF" NDATA TIF>
<!ENTITY US20030002480A1-20030102-D00006.TIF SYSTEM "US20030002480A1-20030102-D00006.TIF" NDATA TIF>
<!ENTITY US20030002480A1-20030102-D00007.TIF SYSTEM "US20030002480A1-20030102-D00007.TIF" NDATA TIF>
<!ENTITY US20030002480A1-20030102-D00008.TIF SYSTEM "US20030002480A1-20030102-D00008.TIF" NDATA TIF>
]>
<patent-application-publication>
<subdoc-bibliographic-information>
<document-id>
<doc-number>20030002480</doc-number>
<kind-code>A1</kind-code>
<document-date>20030102</document-date>
</document-id>
<publication-filing-type>new</publication-filing-type>
<domestic-filing-data>
<application-number>
<doc-number>10105983</doc-number>
</application-number>
<application-number-series-code>10</application-number-series-code>
<filing-date>20020325</filing-date>
</domestic-filing-data>
<foreign-priority-data>
<priority-application-number>
<doc-number>01302759.4</doc-number>
</priority-application-number>
<filing-date>20010326</filing-date>
<country-code>EP</country-code>
</foreign-priority-data>
<technical-information>
<classification-ipc>
<classification-ipc-primary>
<ipc>H04L012/28</ipc>
</classification-ipc-primary>
<classification-ipc-edition>07</classification-ipc-edition>
</classification-ipc>
<classification-us>
<classification-us-primary>
<uspc>
<class>370</class>
<subclass>352000</subclass>
</uspc>
</classification-us-primary>
<classification-us-secondary>
<uspc>
<class>370</class>
<subclass>401000</subclass>
</uspc>
</classification-us-secondary>
</classification-us>
<title-of-invention>Mobile telecommunications systems</title-of-invention>
</technical-information>
<inventors>
<first-named-inventor>
<name>
<given-name>Andrea</given-name>
<family-name>Giustina</family-name>
</name>
<residence>
<residence-non-us>
<city>Swindon</city>
<country-code>GB</country-code>
</residence-non-us>
</residence>
<authority-applicant>INV</authority-applicant>
</first-named-inventor>
<inventor>
<name>
<given-name>Silvia</given-name>
<family-name>Martin-Leon</family-name>
</name>
<residence>
<residence-non-us>
<city>Swindon</city>
<country-code>GB</country-code>
</residence-non-us>
</residence>
<authority-applicant>INV</authority-applicant>
</inventor>
<inventor>
<name>
<given-name>Rajiv</given-name>
<family-name>Sharma</family-name>
</name>
<residence>
<residence-non-us>
<city>Wembley</city>
<country-code>GB</country-code>
</residence-non-us>
</residence>
<authority-applicant>INV</authority-applicant>
</inventor>
</inventors>
<correspondence-address>
<name-1>Docket Administrator (Room 3J-219)</name-1>
<name-2>Lucent Technologies Inc.</name-2>
<address>
<address-1>101 Crawfords Corner Road</address-1>
<city>Holmdel</city>
<state>NJ</state>
<postalcode>07733-3030</postalcode>
<country>
<country-code>US</country-code>
</country>
</address>
</correspondence-address>
</subdoc-bibliographic-information>
<subdoc-abstract>
<paragraph id="A-0001" lvl="0">In order to establish a reliable connection with a mobile station in a GSM/GPRS system for external packet services initiated from an external packet data network (PDN), the GGSN acting as a gateway to the external data network maintains a table associating the IMSI of each mobile station with the PDP address for each context activated for the respective mobile station. The information is compiled in the GGSN from data obtained when individual mobile stations initiate a context activation procedure. Contexts are activated according to GSM standard 03.60. The table also includes the Access Point Name (APN) for each connected PDN, the last recorded SGSN together with time of recording, and entries relating to non-reachable mobile stations. These items are updated during the course of context activation procedures. </paragraph>
</subdoc-abstract>
<subdoc-description>
<summary-of-invention>
<section>
<heading lvl="1">CROSS REFERENCE TO RELATED APPLICATION </heading>
<paragraph id="P-0001" lvl="0"><number>&lsqb;0001&rsqb;</number> This application claims priority of European Application No. 01302759.4 filed on Mar. 26, 2001. </paragraph>
</section>
<section>
<heading lvl="1">FIELD OF THE INVENTION </heading>
<paragraph id="P-0002" lvl="0"><number>&lsqb;0002&rsqb;</number> This invention relates to mobile telecommunications systems providing packet switched services. </paragraph>
</section>
<section>
<heading lvl="1">BACKGROUND OF THE RELATED ART </heading>
<paragraph id="P-0003" lvl="0"><number>&lsqb;0003&rsqb;</number> Mobile telecommunications systems, or personal communications systems (PCS), are commonly used both for speech services provided on a circuit switched basis, and for data services provided on a packet switched basis. For example, the GSM system has the GPRS (General Packet Radio Service) for packet switched services. However the present invention has application to any mobile or personal telecommunications system providing packet switched services. In the present specification, the following abbreviations and terminology are used:  
<table-cwu id="TABLE-US-00001">
<number>1</number>
<table frame="none" colsep="0" rowsep="0">
<tgroup align="left" colsep="0" rowsep="0" cols="3">
<colspec colname="OFFSET" colwidth="21PT" align="left"/>
<colspec colname="1" colwidth="49PT" align="left"/>
<colspec colname="2" colwidth="147PT" align="left"/>
<thead>
<row>
<entry></entry>
<entry></entry>
</row>
<row>
<entry></entry>
<entry namest="OFFSET" nameend="2" align="center" rowsep="1"></entry>
</row>
</thead>
<tbody valign="top">
<row>
<entry></entry>
<entry>APN</entry>
<entry>Access Point Name</entry>
</row>
<row>
<entry></entry>
<entry>BSS</entry>
<entry>Base Station System</entry>
</row>
<row>
<entry></entry>
<entry>CS</entry>
<entry>Circuit Switched</entry>
</row>
<row>
<entry></entry>
<entry>DNS</entry>
<entry>Domain Name Server</entry>
</row>
<row>
<entry></entry>
<entry>GGSN</entry>
<entry>Gateway GPRS Support Node</entry>
</row>
<row>
<entry></entry>
<entry>GPRS</entry>
<entry>General Packet Radio Service</entry>
</row>
<row>
<entry></entry>
<entry>GTP</entry>
<entry>GPRS Tunnelling Protocol</entry>
</row>
<row>
<entry></entry>
<entry>GSN</entry>
<entry>GPRS Support Node</entry>
</row>
<row>
<entry></entry>
<entry>GSM</entry>
<entry>Global System for Mobile Communication</entry>
</row>
<row>
<entry></entry>
<entry>HLR</entry>
<entry>Home Location Register</entry>
</row>
<row>
<entry></entry>
<entry>IMSI</entry>
<entry>International Mobile Subscriber Identity</entry>
</row>
<row>
<entry></entry>
<entry>IP</entry>
<entry>Internet Protocol</entry>
</row>
<row>
<entry></entry>
<entry>MNRG</entry>
<entry>Mobile Station not Reachable for GPRS</entry>
</row>
<row>
<entry></entry>
<entry>MNRR</entry>
<entry>Mobile Station not Reachable Reason</entry>
</row>
<row>
<entry></entry>
<entry>MS</entry>
<entry>Mobile Station</entry>
</row>
<row>
<entry></entry>
<entry>O&amp;M</entry>
<entry>Operations and Maintenance</entry>
</row>
<row>
<entry></entry>
<entry>PCU</entry>
<entry>Packet Control Unit</entry>
</row>
<row>
<entry></entry>
<entry>PDN</entry>
<entry>Packet Data Network</entry>
</row>
<row>
<entry></entry>
<entry>PDP</entry>
<entry>Packet Data Protocol</entry>
</row>
<row>
<entry></entry>
<entry>PDU</entry>
<entry>Protocol Data Unit</entry>
</row>
<row>
<entry></entry>
<entry>SGSN</entry>
<entry>Serving GPRS Support Node</entry>
</row>
<row>
<entry></entry>
<entry namest="OFFSET" nameend="2" align="center" rowsep="1"></entry>
</row>
</tbody>
</tgroup>
</table>
</table-cwu>
</paragraph>
<paragraph id="P-0004" lvl="0"><number>&lsqb;0004&rsqb;</number> In GSM, each mobile station (MS) is equipped with an International Mobile Subscriber Identity (IMSI) which is used to connect speech (CS) services. In GPRS however, the IMSI is not appropriate to use as an identifying address where the GSM (GPRS) system is connected to an external packet data network (PDN), e.g. the Internet or X.25, which uses a different addressing mechanism. GSM Standard 03.60 defines PDP (Packet Data Protocol) Contexts, in which the GPRS creates a set of parameters which permit the MS to interface with the external PDN. In particular a PDP context defines a PDP address associated with the MS, usually in the same format as the address for the external PDN, e.g. IPv.4, Ipv.6, or X.121. GSM Standard 09.60 defines in more detail the Context address fields. Reference is made to <cross-reference target="DRAWINGS">FIGS. 1 and 2</cross-reference> showing the logical architecture and transmission plane of GPRS, from which it may be seen that there is a direct application link at the uppermost network layer between the MS and the external PDN, and a lower X.25/ IP link between the MS and GGSN. </paragraph>
<paragraph id="P-0005" lvl="0"><number>&lsqb;0005&rsqb;</number> GPRS introduces the connection of external packet data networks to GSM networks via a Serving GPRS Support Node (SGSN) and a Gateway GPRS Support Node (GGSN). This allows the network to introduce new services to the mobile subscriber. Some of these are services that originate from the external packet data network. Thus it is required that packet data units (PDUs) can be sent from the external packet data network to the mobile network before the user has initiated a session. These PDUs will first arrive at the GGSN. The GGSN connects to external networks (PDN) over an interface and can act as a firewall to prevent unwanted access. It connects to SGSN which support the mobile stations. It also counts the data/packets for billing or charging purposes. The SGSN controls the BSS, together serving the attached mobile stations and controlling mobility management functions. They are concerned with radio channel allocations, power levels and other quality of service matters. PDUs that arrive at the GGSN have a Packet Data Protocol (PDP) address in the header. The PDP address relates to a mobile station (MS). In order for the PDU to be delivered, a PDP context must be active in the GGSN (i.e. valid PDP context information must be present in the GGSN). If a PDP context is not active for the PDP address, the GGSN can activate the procedure &ldquo;Network requested PDP context activation&rdquo; which is described in its main functionalities in the ETSI standard GSM 03.60 v 6.60, Para. 9.2.2.2. PDP context values are stored at the MS, SGSN and GGSN. Typically the GGSN will include, after context activation, the following values: IMSI of MS; PDP type and PDP address; QoS (Quality of Service); IP address of SGSN; access point name of PDN; etc. </paragraph>
<paragraph id="P-0006" lvl="0"><number>&lsqb;0006&rsqb;</number> To send the messages required for the Network-Requested PDP Context Activation Procedure, the GGSN is required to have the International Mobile Subscriber Identity (IMSI) that identifies the MS that the PDP address relates to. It must be included as part of the message information. Therefore, there must be information stored in the GGSN that can identify the IMSI of a MS for a given PDP Address. </paragraph>
<paragraph id="P-0007" lvl="0"><number>&lsqb;0007&rsqb;</number> The GGSN must also know which SGSN to forward the message to, since there may be many. It can either request the SGSN&apos;s address from the Home Location Register (the HLR holds information about the temporary location of the MS) or, as the standards suggest, this information may also be cached in the GGSN from previous data sessions or from other PDP contexts active for the same user. In the latter case, when a PDU arrives from the external PDN, the message can be sent directly to the SGSN without unnecessarily interrogating the HLR. </paragraph>
<paragraph id="P-0008" lvl="0"><number>&lsqb;0008&rsqb;</number> Thus, when a PDU arrives, if a PDP context is not active for it, the GGSN should be able to request the MS to set up a PDP context so that the PDU can be delivered. To do this, the GGSN must get information about the IMSI that the PDP address relates to and also get the address of the SGSN that the MS is attached to. The method to make available IMSI information for each PDP in the GGSN is not standardised. </paragraph>
</section>
<section>
<heading lvl="1">SUMMARY OF THE INVENTION </heading>
<paragraph id="P-0009" lvl="0"><number>&lsqb;0009&rsqb;</number> In a first aspect, the invention provides in a mobile telecommunications system providing packet switched services, a method of connecting mobile stations (MS) to a packet data network (PDN) external to the system, comprising: providing a gateway control means (GGSN) which receives packet data units (PDU) from the external data network for routing to a selected mobile station; providing the selected mobile station with a system address (IMSI) for enabling the gateway control means to establish a connection with the mobile station, and a packet address (PDP) to enable packet data units to be routed to the mobile station; and providing the gateway control means with a table means identifying mobile stations within the system and linking the system address of each such mobile station with a respective packet address. </paragraph>
<paragraph id="P-0010" lvl="0"><number>&lsqb;0010&rsqb;</number> Information can be entered manually into the table means with O&amp;M commands from a local management system or from the centralised Operation and Maintenance System (OMC), but this would be an arduous task, since there are likely to be many mobiles in the mobile network and each may have more than one PDP address. Also, information about the SGSN address to which the MS is attached may not be available. As preferred therefore, the information is obtained from requests initiated by such mobile stations for external packet data services. </paragraph>
<paragraph id="P-0011" lvl="0"><number>&lsqb;0011&rsqb;</number> In a second aspect, the invention provides in a mobile telecommunications system providing packet switched services, a method of connecting mobile stations (MS) to a packet data network (PDN) external to the system, comprising: providing a gateway control means (GGSN) which receives packet data units (PDU) from the external data network for routing to a selected mobile station; providing the selected mobile station with a system address (IMSI) for enabling the gateway control means to establish a connection with the mobile station, and a packet address (PDP) to enable packet data units to be routed to the mobile station; and the gateway control means obtaining and storing information linking the system address of mobile stations within the system with respective packet addresses, the information being obtained from requests initiated by such mobile stations for external packet data services. </paragraph>
<paragraph id="P-0012" lvl="0"><number>&lsqb;0012&rsqb;</number> In a preferred embodiment, entries are initially made into the GGSN during an MS initiated PDP Context Activation Procedure. During the PDP context activation procedure GSM 03.60 v 6.60, Para. 9.2.2.1(initiated by the MS), the SGSN sends a &ldquo;Create PDP Context Request&rdquo; message to the GGSN. The static PDP address (i.e. the PDP address of the MS created when the mobile subscription is set up) will be contained in this request if this is the type of context the MS requires. For the mechanism to work reliably over time, the PDP address is a static IP address, as opposed to a dynamically allocated address. At this point, the GGSN shall store the PDP Address and its associated IMSI. All the information is stored in a table as described below. </paragraph>
<paragraph id="P-0013" lvl="0"><number>&lsqb;0013&rsqb;</number> In accordance with the invention existing messages received by the GGSN, are employed to build the PDP addresses to IMSI table, without the need of explicit OA&amp;M commands. The IMSI of the MS that a PDP address relates to is stored when a PDP context activation attempt occurs in the GGSN for that static PDP address. This is beneficial because it makes use of existing messages that are sent to the GGSN and will occur automatically when each user attempts to activate a PDP context. This prevents manual entering of data so the system effectively learns the information itself. </paragraph>
<paragraph id="P-0014" lvl="0"><number>&lsqb;0014&rsqb;</number> The table means preferably stores the SGSN address associated with each MS, and a time indication of whether the SGSN address is valid. If the table does not have a valid SGSN address, then the GGSN will interrogate the HLR for such information. As preferred, the table means also stores the access point name (APN). This provides a reference point or identifying address for the external network. This is of use where the GGSN is connected to more than one external data network (PDN) using overlapping addressing spaces. In such case the PDP address is not unique, and there could be more than one mapping to an IMSI. The GGSN uses separate logical links to connect to each of the PDNs. Each PDN is identified by an APN, which is a logical name. </paragraph>
<paragraph id="P-0015" lvl="0"><number>&lsqb;0015&rsqb;</number> In a third aspect, the invention provides a mobile telecommunications system providing packet switched services, apparatus for connecting mobile stations (MS) to an external data network (PDN), comprising: a gateway control means (GGSN) for receiving packet data units (PDU), from the external data network for routing to a selected mobile station; the selected mobile station having a system address (IMSI) for establishing connection with the gateway control means and, the system having facility for associating a packet address with a mobile station for a selected packet data service; and the gateway control means including a table means for mobile stations, which relates the system address to the or each packet address associated with each mobile station, together with an access point identifier employed in the system for the external data network.</paragraph>
</section>
</summary-of-invention>
<brief-description-of-drawings>
<section>
<heading lvl="1">BRIEF DESCRIPTION OF THE DRAWINGS </heading>
<paragraph id="P-0016" lvl="0"><number>&lsqb;0016&rsqb;</number> A preferred embodiment of the invention will now be described with reference to the accompanying drawings wherein: </paragraph>
<paragraph id="P-0017" lvl="0"><number>&lsqb;0017&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1</cross-reference> is a block schematic of the architecture of a GPRS system; </paragraph>
<paragraph id="P-0018" lvl="0"><number>&lsqb;0018&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 2</cross-reference> is a conceptual diagram of the transmission plane of a GPRS system; </paragraph>
<paragraph id="P-0019" lvl="0"><number>&lsqb;0019&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3</cross-reference> is a schematic block diagram of a preferred embodiment of the invention; </paragraph>
<paragraph id="P-0020" lvl="0"><number>&lsqb;0020&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 4</cross-reference> is a flow chart showing the procedures of the preferred embodiment of the invention; </paragraph>
<paragraph id="P-0021" lvl="0"><number>&lsqb;0021&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 5</cross-reference> is a schematic of the procedure of the embodiment &ldquo;send routing info for GPRS&rdquo;; </paragraph>
<paragraph id="P-0022" lvl="0"><number>&lsqb;0022&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 6</cross-reference> is a schematic of the procedure of the embodiment &ldquo;PDU notification request&rdquo;; </paragraph>
<paragraph id="P-0023" lvl="0"><number>&lsqb;0023&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 7</cross-reference> is a schematic of the procedure of the embodiment &ldquo;PDP context activation&rdquo;; </paragraph>
<paragraph id="P-0024" lvl="0"><number>&lsqb;0024&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 8</cross-reference> is a schematic of the procedure of the embodiment &ldquo;failure report&rdquo; and </paragraph>
<paragraph id="P-0025" lvl="0"><number>&lsqb;0025&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 9</cross-reference> is a schematic of the procedure of the embodiment &ldquo;mobile user activity&rdquo;.</paragraph>
</section>
</brief-description-of-drawings>
<detailed-description>
<section>
<heading lvl="1">DETAILED DESCRIPTION </heading>
<paragraph id="P-0026" lvl="0"><number>&lsqb;0026&rsqb;</number> New service applications are enabled by the Network Requested PDP Context Activation procedure in accordance with GSM 03.60. These services may be requested by the subscriber or may be services initiated by the operator. For example the subscriber may use a reminder service so that a message can be sent to the MS to remind the subscriber of an event listed in a schedule. Another such service for example may be used when the MS is in a given location area, e.g. arrival to an airport may result in delivering information on local hotels, transport, tourist information etc. being made available to the mobile subscriber. For such services, packets of data will arrive at a GGSN over a packet data network, before the user has established the required session (PDP Context). These IP packets will have an IP address in the header which is the static IP address for an MS. The GGSN must then be able to deliver the packet based on this information. To make this possible, the invention provides a table of information that is required in the GGSN and the procedures involved in attempting to deliver packets by setting up PDP contexts. There is the requirement for the availability of static IP addresses for this feature to work </paragraph>
<paragraph id="P-0027" lvl="0"><number>&lsqb;0027&rsqb;</number> PDP context activations are normally initiated from the MS. The Network-Requested PDP Context Activation procedure allows the GGSN to initiate the activation of a PDP context. When receiving a PDP PDU the GGSN checks if a PDP context is established for that PDP address. If no PDP context has been previously established, the GGSN may try to deliver the PDP PDU by initiating the Network-Requested PDP Context Activation procedure. The Network-Requested PDP Context Activation works by allowing the GGSN to send messages down to the MS to instruct it to initiate the PDP context activation. To do this, the GGSN must send a message to the SGSN that the MS is attached to. Therefore, the GGSN needs information about the SGSN&apos;s Address and the IMSI of the MS which is required to be included as part of this message. Thus, a table is created in accordance with the invention in the GGSN to map from the PDP Address included in the header of the PDP PDU, to the IMSI of the MS that the PDP PDU relates to, and the SGSN Address the MS is attached to. </paragraph>
<paragraph id="P-0028" lvl="0"><number>&lsqb;0028&rsqb;</number> Thus, when the PDP PDU arrives at the GGSN and no PDP context has already been established, the GGSN will look up the PDP address in the table and get its IMSI information. The GGSN then needs to inform the correct SGSN so that it can tell the MS to start the activation procedure. This information could be old or wrong so there is also information in the table to indicate how old the information is. Thus, if the information is old, the HLR can be queried about the SGSN that the MS is attached to. The SGSN that the MS is attached to may then be contacted with messaging procedures. The SGSN requests the MS to initiate the PDP context for that PDP address. The MS can now initiate PDP context activation in the MS, SGSN and GGSN so the PDU can be delivered. The HLR can be queried for location information and can be used to inform the GGSN of the activity of the MS. </paragraph>
<paragraph id="P-0029" lvl="0"><number>&lsqb;0029&rsqb;</number> The invention involves creating a table in the GGSN for information that is required to deliver the PDU. Additional information is also made available in the table to make PDP context activation attempts more efficient. The table maps PDP addresses and APN combinations to IMSIs and relevant location information. The table is called the Address Mapping Table. Essentially, it may be viewed as a two dimensional table with columns relating to PDP Address, APN, etc, and each row giving the IMSI, SGSN address, etc for the respective PDP Address/ APN combination. The Table has column entries to include: </paragraph>
<paragraph id="P-0030" lvl="2"><number>&lsqb;0030&rsqb;</number> PDP Address. The PDP Address is the static IP address for the MS. When the packet of data arrives at the GGSN, it will have a PDP Address in the header which is used to identify the MS that the packet should be delivered to. </paragraph>
<paragraph id="P-0031" lvl="2"><number>&lsqb;0031&rsqb;</number> Access Point Name (APN). The APN is used to identify the external network from which the packet originated. A private static IP address may be used for more than one MS if the packets of data originate from different networks. The Access Point Name (APN) is used to differentiate between these points so that the originating network can be identified and thus the correct MS. </paragraph>
<paragraph id="P-0032" lvl="0"><number>&lsqb;0032&rsqb;</number> PDP Address has a mapping to each of the following: </paragraph>
<paragraph id="P-0033" lvl="2"><number>&lsqb;0033&rsqb;</number> International Mobile Subscriber Identity (IMSI). The IMSI is the identification number for the MS that the PDP address relates to. </paragraph>
<paragraph id="P-0034" lvl="2"><number>&lsqb;0034&rsqb;</number> SGSN address. This is the IP address for the SGSN that the MS was last attached to. This may not always be correct as it may not be the most up to date information. </paragraph>
<paragraph id="P-0035" lvl="2"><number>&lsqb;0035&rsqb;</number> Time Entry. When a new entry or an update is made in the Address Mapping Table, a new Time Entry is made. This is a time stamp of when the change occurred. It is used to identify whether information about the PDP Address is valid. Information loses its validity after a given time has expired. The Time Entry applies to the SGSN Address and the Undeliverable Entry. </paragraph>
<paragraph id="P-0036" lvl="2"><number>&lsqb;0036&rsqb;</number> Mobile Station Not Reachable for GPRS flag (MNRG). MNRG is a flag to indicate that the MS is unreachable and is applicable for all Mobile Station Not Reachable Reasons (MNRRs) except &ldquo;No Paging Response&rdquo;. An entry &ldquo;1&rdquo; indicates that the MS is unreachable and &ldquo;0&rdquo; indicates that it is reachable. </paragraph>
<paragraph id="P-0037" lvl="2"><number>&lsqb;0037&rsqb;</number> Undeliverable Entry. The Undeliverable Entry is used to indicate whether the Network Requested PDP Context Activation should be attempted. The entry can be &ldquo;1&rdquo; to indicate that PDP context activation has previously failed and should not be re-attempted. The entry can be &ldquo;0&rdquo; to indicate that the PDP context can be attempted. </paragraph>
<paragraph id="P-0038" lvl="0"><number>&lsqb;0038&rsqb;</number> The Address Mapping Table is indexed using both PDP Addresses/ APN and IMSI information. The entries in the table relating to a PDP address are updated when the GGSN receives messages from the HLR or SGSN. The update procedures are described in Table 1 below. If an update is to be made for a PDP address/ APN regarding one MS, it will also occur for all PDP addresses/ APN with the same IMSI. Mobile stations can have more than one PDP address/ APN and this way, if for example an MS is unreachable, this information will be updated for all the PDP addresses that relate to that MS. Management of the Address Mapping table is described below and details how information initially gets into the table, how it is updated and how it is deleted. </paragraph>
<paragraph id="P-0039" lvl="0"><number>&lsqb;0039&rsqb;</number> Referring to <cross-reference target="DRAWINGS">FIG. 3, a</cross-reference> preferred embodiment of the invention is shown in schematic form comprising a GPRS system, wherein a mobile station MSn has a SIM card with an IMSI address IMSIn, and one or more PDP Contexts PDPnq. The mobile stations communicate via BSS with a SGSN, by means of the GMM/SM protocol. The SGSN communicates with a GGSN by means of the GTP protocol. The GGSN communicates with the HLR by means of the MAP protocol, and with an external PDN by means of the appropriate IP or X.25 protocol for that PDN. When PDP contexts are activated, they are stored in the respective MS, the SGSN, and the GGSN. The GGSN stores the Address Mapping Table, shown as columns comprising PDP Address, APN, IMSI, SGSN Address, etc. Each row relates to a particular PDP Address/ APN combination. The PDP Context Activation procedures are carried out between the MS and GGSN, in accordance with Standard GSM 3.60, Para 9.2.2.2. </paragraph>
<paragraph id="P-0040" lvl="0"><number>&lsqb;0040&rsqb;</number> In use, entries are initially made into the Address Mapping Table of the GGSN from Activate PDP Context Requests initiated by the MS. During the PDP context activation procedure (initiated by the MS), the SGSN sends a Create PDP Context Request to the GGSN. The static PDP address will be contained in this request if this is the type of context the MS requires, together with the APN. At this point, a new entry is made to the table for the PDP Address/ APN combination, if it did not exist before. All other entries corresponding to this address are also made. The GGSN will update entries for PDP addresses/ APNs every time one of the messages listed below is received or when the message procedure described occurs. When a message is received that relates to a PDP address/ APN, it is looked up and entries for that PDP address are modified. Information is also updated for all PDP addresses with the same IMSI as the PDP address that the message relates to. If there is no entry for the PDP address/ APN, the update will be ignored unless it is a Create PDP Context Request. In this case, a new entry will be made for the PDP Address/ APN entry as described above. Some messages (i.e. MAP messages) arrive that relate to IMSIs only, in which case updates will be made for all PDP addresses/ APNs with that IMSI. </paragraph>
<paragraph id="P-0041" lvl="0"><number>&lsqb;0041&rsqb;</number> Referring to <cross-reference target="DRAWINGS">FIG. 4</cross-reference>, when a PDP PDU arrives at the GGSN, the following procedure is initiated. Initially, a PDP PDU arrives at the GGSN via a packet data network. In the header of the PDP PDU, there is the PDP address of the MS. The APN is obtained from the logical link the PDU arrives on. The GGSN checks if there is a PDP context with the same APN active for the PDP address. The state may be PDP Active, which is when there is valid PDP context information in the GGSN or PDP Inactive, which is when there is no PDP context in the GGSN. If the PDP context is active, the PDU may be delivered without further activation procedures. Now, when the PDP context for a PDP PDU address is found to be inactive in the GGSN, it checks if the Network-Requested PDP Context Activation Procedure is enabled. If the procedure is disabled, the PDP PDU is deleted. If the procedure is enabled, the Address Mapping Table is queried for information it holds on that PDP address/APN combination. If there is no record of a PDP address with the relevant APN in the Address Mapping Table, then the PDU cannot be delivered and is deleted. If a record for the PDP address with relevant APN does exist, the GGSN checks for the presence of an MNRG flag. </paragraph>
<paragraph id="P-0042" lvl="0"><number>&lsqb;0042&rsqb;</number> If there is an MNRG flag (i.e. an entry &lsquo;1&rsquo;), the PDU is deleted. If there is no MNRG flag (i.e. an entry &lsquo;0&rsquo;), a check is made to establish if the information held about the PDP address is valid. This is done by comparing the time expired from when the Time Entry was made, against a configurable time parameter called TIME_SGSNADDRESS_INFO_VALID. If the time expired is greater than the parameter value, the SGSN address information is not valid. If the time expired is less than the parameter value, the SGSN address is considered valid. If the information held about the PDP address is not valid, the GGSN shall send a Send Routing Information for GPRS message to the HLR. If the information held is valid or the SGSN address is not present in the table, the Undeliverable Entry is checked in the table. If the Undeliverable Entry is &lsquo;1&rsquo;, the GGSN checks if the Undeliverable Entry is valid. This is done by comparing the time expired from when the Time Entry was made, against a configurable time value called TIME_UNDELIVERABLE_INFO_VALID. If the Undeliverable information is valid, the PDU is deleted (N.B. TIME_UNDELIVERABLE_INFO_VALID &lt;TIME_SGSNADDRESS _INFO_VALID). </paragraph>
<paragraph id="P-0043" lvl="0"><number>&lsqb;0043&rsqb;</number> If the Undeliverable Entry is &lsquo;0&rsquo; or there is an Undeliverable Entry that is not valid, a PDU Notification Request message is sent to the SGSN address held in the Address Mapping Table. The process continues as described from the PDU Notification Request Procedure section. If there is no SGSN address present, the GGSN shall send a Send Routing Information for GPRS message to the HLR to get the location information about the MS. The process continues from the Send Routing Info for GPRS Procedure section. </paragraph>
<paragraph id="P-0044" lvl="0"><number>&lsqb;0044&rsqb;</number> If a PDP PDU arrives at the GGSN with the same PDP address as one for which a PDP context activation procedure is already in process, the newly arrived PDP PDU is buffered. When there is an outcome for the PDP context activation, the newly arrived PDP PDU can be delivered or deleted. Several PDP PDUs may be buffered simultaneously. </paragraph>
<paragraph id="P-0045" lvl="7"><number>&lsqb;0045&rsqb;</number> Send Routing Info for GPRS Procedure (<cross-reference target="DRAWINGS">FIGS. 4, 5</cross-reference>) (The Process Described Here Begins When a PDP Context is not Active in the GGSN and the Network-Requested PDP Context Activation Procedure is Enabled in the GGSN </paragraph>
<paragraph id="P-0046" lvl="0"><number>&lsqb;0046&rsqb;</number> 1) The GGSN sends a Send Routing Info For GPRS message to the HLR. The HLR uses the IMSI contained in this message to find the location information for the mobile station. The HLR will send back a Send Routing Information for GPRS Acknowledgement message to the GGSN. If the acknowledgement cannot be received after the re-send procedure, the GGSN enters &lsquo;1&rsquo; in the Undeliverable flag in the Address Mapping Table with a new Time Entry, deletes the SGSN Address and deletes the PDU. This occurs for all PDP addresses with the same IMSI. </paragraph>
<paragraph id="P-0047" lvl="0"><number>&lsqb;0047&rsqb;</number> If the GGSN receives a Create PDP Context Request after a Send Routing Information for GPRS Request has been sent for the IMSI of an MS with the same PDP address and APN, but before a Send Routing Information for GPRS Response has been received the GGSN handles the Create PDP Context Request as a normal context activation. The GGSN ignores the following Send Routing Information for GPRS Response and halts the Send Routing Information for GPRS Request re-send procedure. </paragraph>
<paragraph id="P-0048" lvl="2"><number>&lsqb;0048&rsqb;</number> 2) When the acknowledgement is received, it contains the IMSI, SGSN Address and if an MNRG flag is set in the HLR, a Mobile Station Not Reachable Reason parameter (MNRR). If there is no MNRR in the message or the MNRR indicates &lsquo;No Paging Response&rsquo;, in the Address Mapping Table for all PDP Addresses with the same IMSI, the GGSN updates the SGSN Address and Time Entry, the Undeliverable Entry is set to &lsquo;0&rsquo;. Also, a PDU Notification Request is sent to the SGSN identified in the acknowledgement. The process continues as described from the PDU Notification Request Procedure section. However, if the SGSN identified is the same as one from which a PDU Notification Response has been received with cause &lsquo;IMSI Not Known&rsquo; as part of the same Network-requested PDP context activation procedure, the GGSN sends a Failure Report to the HLR. The procedure continues as described from the Failure Report section. If the HLR responds with an acknowledgement with an MNRR other than &lsquo;No Paging Response&rsquo;, the PDU is deleted and in the Address Mapping Table, for all PDP Addresses with the same IMSI, the MNRG flag is set to &lsquo;1&rsquo; with a new Time Entry and the Undeliverable Entry is set to &lsquo;0&rsquo;. If the HLR responds with a User Error that indicates Absent Subscriber, System Failure, Data Missing, Unexpected Data Value or any Provider Error, then in the Address Mapping Table, for all PDP Addresses with the same IMSI, the Undeliverable Entry is set to &lsquo;1&rsquo; with a new Time Entry, the SGSN Address is deleted and the PDU is deleted. If the HLR responds with a User Error that indicates Unknown Subscriber, the PDU is deleted and all PDP Address entries in the Address Mapping Table are deleted for the IMSI that the message refers to. </paragraph>
<paragraph id="P-0049" lvl="7"><number>&lsqb;0049&rsqb;</number> PDU Notification Request Procedure (<cross-reference target="DRAWINGS">FIGS. 4, 6</cross-reference>) </paragraph>
<paragraph id="P-0050" lvl="0"><number>&lsqb;0050&rsqb;</number> 1) The GGSN sends a PDU Notification Request message to the SGSN that is identified in the Address Mapping Table, over the Gc interface. The SGSN will respond with a PDU Notification Response with one of the cause values, as described in GSM 09.60 &sect;7.5.13. If the PDU Notification Response cannot be received after the PDU Notification Request re-send procedure, the PDU is deleted and in the Address Mapping Table, for all PDP Addresses with the same IMSI, the Undeliverable Entry is set to &lsquo;1&rsquo; with a new Time Entry and the SGSN Address is deleted. </paragraph>
<paragraph id="P-0051" lvl="0"><number>&lsqb;0051&rsqb;</number> If the GGSN receives a Create PDP Context Request before a PDU Notification Response for the same PDP context, the GGSN handles the Create PDP Context Request as a normal context activation and ignores the following PDU Notification Response. Also, the PDU Notification Request re-send procedure is stopped. </paragraph>
<paragraph id="P-0052" lvl="0"><number>&lsqb;0052&rsqb;</number> 2) If the SGSN cannot continue the PDP context activation, it sends a PDU Notification Response containing one of the following causes depending on the reason: </paragraph>
<paragraph id="P-0053" lvl="2"><number>&lsqb;0053&rsqb;</number> No Resources Available, Service not supported, GPRS Connection Suspended, Mandatory IE Incorrect, Mandatory IE Missing, Optional IE Incorrect, Invalid Message Format. If the GGSN receives a response with any of these causes or cause System Failure, Version Not Supported or Roaming Restriction, the GGSN deletes the PDU, and sets &lsquo;1&rsquo;for Undeliverable with a new Time Entry and deletes the SGSN address in the Address Mapping Table. </paragraph>
<paragraph id="P-0054" lvl="2"><number>&lsqb;0054&rsqb;</number> If the mobile station is not attached to the SGSN, the SGSN sends a PDU Notification Response with cause &lsquo;MS GPRS Detached&rsquo;. The GGSN sends a Failure Report Request to the HLR. See Failure Report section. </paragraph>
<paragraph id="P-0055" lvl="2"><number>&lsqb;0055&rsqb;</number> If the SGSN has no record of a mobile station with the IMSI contained in the PDU Notification Request, the SGSN sends a PDU Notification Response with cause &lsquo;IMSI Not Known&rsquo;. If the GGSN has already received a Send Routing Info for GPRS Acknowledgement message as part of the same Network-Requested PDP Context Activation procedure, the GGSN sends a Failure Report Request to the HLR. The procedure continues as described from the Failure Report section. If a Send Routing Info for GPRS Acknowledgement message has not just been received, the GGSN sends a Send Routing Info for GPRS message to the HLR. The procedure continues as described from the Send Routing Info for GPRS Procedure section. </paragraph>
<paragraph id="P-0056" lvl="0"><number>&lsqb;0056&rsqb;</number> If none of the above problems prevent PDP Context Activation, the SGSN sends a PDU Notification Response to the GGSN that has cause &lsquo;Request Accepted&rsquo; and sends a Request PDP Context Activation message to the MS. The process continues as described from the PDP Context Activation section. On receipt of a PDU Notification Response with cause &lsquo;Request Accepted&rsquo;, the GGSN starts a timer and waits for the PDP context to become active or for a PDU Notification Reject Request. If neither message is received after the timer has expired, the GGSN deletes the PDU and in the Address Mapping Table for all PDP Addresses with the IMSI, the GGSN updates the Time Entry and sets Undeliverable to &lsquo;1&rsquo;. </paragraph>
<paragraph id="P-0057" lvl="0"><number>&lsqb;0057&rsqb;</number> If the SGSN receives a PDU Notification Request from a GGSN after a Create PDP Context Request has been sent to the same GGSN but before a Create PDP Context Response has been received for the same PDP context, the SGSN will only send a PDU Notification Response with Cause &lsquo;Request accepted&rsquo; without any further processing and then wait for the Create PDP Context Response. </paragraph>
<paragraph id="P-0058" lvl="7"><number>&lsqb;0058&rsqb;</number> PDP Context Activation (<cross-reference target="DRAWINGS">FIG. 7</cross-reference>) </paragraph>
<paragraph id="P-0059" lvl="0"><number>&lsqb;0059&rsqb;</number> 1) The SGSN sends a Request PDP Context Activation message to the MS. The procedure is as described in GSM 04.08&sect;6.1.3.1.2 </paragraph>
<paragraph id="P-0060" lvl="2"><number>&lsqb;0060&rsqb;</number> a) The MS may start the PDP context activation as described in GSM 04.08 &sect;6.1.3.1.2 in which case the PDP Context will become Active and the PDU can be delivered. </paragraph>
<paragraph id="P-0061" lvl="2"><number>&lsqb;0061&rsqb;</number> b) Otherwise, the MS will respond with a Request PDP Context Activation Reject as described in GSM 04.08&sect;6.1.3.1.4. The message contains one of the cause codes specified in that section. </paragraph>
<paragraph id="P-0062" lvl="0"><number>&lsqb;0062&rsqb;</number> 2) Upon receipt of a Request PDP Context Activation Reject message, the SGSN will send a PDU Notification Reject Request to the GGSN with cause &lsquo;MS Refuses&rsquo;. The GGSN deletes the PDU and in the Address Mapping Table, for all PDP Addresses with the same IMSI the GGSN sets the Undeliverable to &lsquo;1&rsquo; with a new Time Entry. If the Request PDP Context Activation message transfer is unsuccessful (from step <highlight><bold>1</bold></highlight>).) after the re-send procedure described in GSM 04.08&sect;6.1.3.1.5, the SGSN sends a PDU Notification Reject Request to the GGSN with cause &lsquo;MS Not GPRS Responding&rsquo;. In this case, the GGSN deletes the PDU and in the Address Mapping Table, for all PDP Addresses with the same IMSI, the GGSN sets &lsquo;1&rsquo; for the Undeliverable Entry with new Time Entry. After a PDU Notification Reject Request message has been received, the GGSN sends a PDU Notification Reject Response. </paragraph>
<paragraph id="P-0063" lvl="7"><number>&lsqb;0063&rsqb;</number> Failure Report (<cross-reference target="DRAWINGS">FIG. 8</cross-reference>) </paragraph>
<paragraph id="P-0064" lvl="0"><number>&lsqb;0064&rsqb;</number> 1) The GGSN sends a Failure Report to the HLR, over the Gc interface. If the re-send procedure fails, then in the Address Mapping Table, for all PDP Addresses with the same IMSI, the Undeliverable Entry is set to &lsquo;1&rsquo;, the SGSN Address is deleted and the Time entry is updated. </paragraph>
<paragraph id="P-0065" lvl="0"><number>&lsqb;0065&rsqb;</number> 2) The HLR responds with a Failure Report Response. On receiving the Failure Report, the GGSN updates the Address Mapping Table for all PDP addresses with the IMSI number. The MNRG flag is set to &lsquo;1&rsquo;, the Undeliverable Entry is set to &lsquo;0&rsquo; and the Time Entry is updated. </paragraph>
<paragraph id="P-0066" lvl="7"><number>&lsqb;0066&rsqb;</number> The Mobile User Activity Procedure (<cross-reference target="DRAWINGS">FIG. 9</cross-reference>) </paragraph>
<paragraph id="P-0067" lvl="0"><number>&lsqb;0067&rsqb;</number> The MS sends an Attach Request message to an SGSN. </paragraph>
<paragraph id="P-0068" lvl="2"><number>&lsqb;0068&rsqb;</number> 1) When an SGSN receives an Attach Request message, if the message contains an MM context of the MS and MNRG for that MS is set, it sends a Ready for SM message to the HLR and clears MNRG. </paragraph>
<paragraph id="P-0069" lvl="2"><number>&lsqb;0069&rsqb;</number> 2) When an SGSN receives an Attach Request message, if it does not keep an MM context of the MS, it sends Ready for SM and Update Location messages to the HLR. </paragraph>
<paragraph id="P-0070" lvl="2"><number>&lsqb;0070&rsqb;</number> 3) When the HLR receives the Ready for SM message or the Update Location message for an MS that has MNRG set, it clears MNRG for that MS and sends a Note MS GPRS Present message to all the GGSNs in the list of the subscriber. The SGSN Address information element contains the address of the SGSN that currently serves the MS. Upon reception of Note MS Present, each GGSN updates entries for each PDP Address with the IMSI contained in the message. The MNRG and Undeliverable Entries are set to &lsquo;0&rsquo; and the SGSN Address is updated with a new Time Entry. </paragraph>
<paragraph id="P-0071" lvl="7"><number>&lsqb;0071&rsqb;</number> Management of the Address Mapping Table </paragraph>
<paragraph id="P-0072" lvl="0"><number>&lsqb;0072&rsqb;</number> Entries are initially made into the GGSN from the Activate PDP Context Request Procedure initiated by the MS for static PDP Addresses. During the PDP context activation procedure, the SGSN sends a Create PDP Context Request to the GGSN. If a static PDP address is used for this, each time a Create PDP Context message is received, the GGSN checks for an entry for that PDP Address in the table that also has the same APN. If there is no entry in the table for the PDP Address with the same APN, a new entry for the PDP Address will be made. All other entries corresponding to this address are also made: </paragraph>
<paragraph id="P-0073" lvl="0"><number>&lsqb;0073&rsqb;</number> If there is already an entry for the PDP Address/APN combination, the IMSI information about it is checked. The PDP Address contained in the message and the IMSI contained in the TID part of the GTP header should be the same as the values in the table. If the mapping is different, all entries for that PDP Address will be deleted. At this point, a new entry is made to the Address Mapping Table for the PDP Address and corresponding entries as described above. </paragraph>
<paragraph id="P-0074" lvl="0"><number>&lsqb;0074&rsqb;</number> The table below indicates how entries in the Address Mapping Table are updated. The GGSN will update entries for PDP addresses every time one of the messages listed in the table is received. When one of these messages is received, the PDP address is looked up and entries for that PDP address are modified. Information is also updated for all PDP addresses with the same IMSI as the PDP address that the message relates to. If there is no entry for the PDP address, the update will be ignored unless it is a Create PDP Context Request. In this case, a new entry will be made for the PDP Address entry as described above. The OMC-G may instruct the deletion of PDP Address entries or all PDP Address entries that relate to an IMSI. Blank cells in the table indicate that no change be made for that entry in the Address Mapping Table.  
<table-cwu id="TABLE-US-00002">
<number>2</number>
<table frame="none" colsep="0" rowsep="0" pgwide="1">
<tgroup align="left" colsep="0" rowsep="0" cols="5">
<colspec colname="1" colwidth="147PT" align="left"/>
<colspec colname="2" colwidth="28PT" align="left"/>
<colspec colname="3" colwidth="28PT" align="left"/>
<colspec colname="4" colwidth="35PT" align="left"/>
<colspec colname="5" colwidth="49PT" align="left"/>
<thead>
<row>
<entry></entry>
</row>
<row><entry namest="1" nameend="5" align="center" rowsep="1"></entry>
</row>
<row>
<entry></entry>
<entry>SGSN</entry>
<entry>Time</entry>
<entry>MNRG</entry>
<entry>Undeliverable</entry>
</row>
<row>
<entry>Message Received/Message Procedure</entry>
<entry>Address</entry>
<entry>Entry</entry>
<entry>flag</entry>
<entry>Entry</entry>
</row>
<row><entry namest="1" nameend="5" align="center" rowsep="1"></entry>
</row>
</thead>
<tbody valign="top">
<row>
<entry>Create PDP Context Request (if the message</entry>
<entry>Update</entry>
<entry>Update</entry>
<entry>Set to &lsquo;0&rsquo;</entry>
<entry>Set to &lsquo;0&rsquo;</entry>
</row>
<row>
<entry>is for a static IP address)</entry>
</row>
<row>
<entry>If a PDU Notification Request is sent to an</entry>
<entry>Delete</entry>
<entry>Update</entry>
<entry></entry>
<entry>Set to &lsquo;1&rsquo;</entry>
</row>
<row>
<entry>SGSN and no PDU Notification Response is</entry>
</row>
<row>
<entry>received after the re-send procedure</entry>
</row>
<row>
<entry>PDU Notification Response with cause *</entry>
<entry>Delete</entry>
<entry>Update</entry>
<entry></entry>
<entry>Set to &lsquo;1&rsquo;</entry>
</row>
<row>
<entry>PDU Notification Response with cause</entry>
<entry></entry>
<entry>Update</entry>
<entry></entry>
<entry>Set to &lsquo;1&rsquo;</entry>
</row>
<row>
<entry>&lsquo;Request Accepted&rsquo; is received and after</entry>
</row>
<row>
<entry>T_NOT_RESP has expired, the context has</entry>
</row>
<row>
<entry>not become active or the PDU Notification</entry>
</row>
<row>
<entry>Reject Request message has not been</entry>
</row>
<row>
<entry>received</entry>
</row>
<row>
<entry>PDU Notification Reject Request with cause</entry>
<entry></entry>
<entry>Update</entry>
<entry></entry>
<entry>Set to &lsquo;1&rsquo;</entry>
</row>
<row>
<entry>&lsquo;MS Refuses&rsquo;</entry>
</row>
<row>
<entry>PDU Notification Reject Request with cause</entry>
<entry></entry>
<entry>Update</entry>
<entry></entry>
<entry>Set to &lsquo;1&rsquo;</entry>
</row>
<row>
<entry>&lsquo;MS Not GPRS Responding&rsquo;</entry>
</row>
<row>
<entry>Update PDP Context Request</entry>
<entry>Update</entry>
<entry>Update</entry>
<entry>Set to &lsquo;0&rsquo;</entry>
<entry>Set to &lsquo;0&rsquo;</entry>
</row>
<row>
<entry>MAP_SEND_ROUTING_INFO_FOR_GPRS</entry>
<entry></entry>
<entry>Update</entry>
<entry>Set to &lsquo;1&rsquo;</entry>
<entry>Set to &lsquo;0&rsquo;</entry>
</row>
<row>
<entry>Response with an MNRR that is not &lsquo;No</entry>
</row>
<row>
<entry>Paging Response&rsquo;</entry>
</row>
<row>
<entry>MAP_NOTE_MS_PRESENT_FOR_GPRS</entry>
<entry>Update</entry>
<entry>Update</entry>
<entry>Set to &lsquo;0&rsquo;</entry>
<entry>Set to &lsquo;0&rsquo;</entry>
</row>
<row>
<entry>message</entry>
</row>
<row>
<entry>MAP_SEND_ROUTING_INFORMATION<highlight><subscript>&mdash;</subscript></highlight></entry>
<entry>Delete</entry>
<entry>Update</entry>
<entry></entry>
<entry>Set to &lsquo;1&rsquo;</entry>
</row>
<row>
<entry>FOR_GPRS response with a User Error Cause</entry>
</row>
<row>
<entry>Absent Subscriber, System Failure, Data</entry>
</row>
<row>
<entry>Missing or Unexpected Data Value</entry>
</row>
<row>
<entry>MAP_SEND_ROUTING_INFORMATION<highlight><subscript>&mdash;</subscript></highlight></entry>
<entry>Delete</entry>
<entry>Delete</entry>
<entry>Delete</entry>
<entry>Delete</entry>
</row>
<row>
<entry>FOR_GPRS response with a User Error Cause</entry>
</row>
<row>
<entry>&lsquo;Unknown Subscriber&rsquo; **</entry>
</row>
<row>
<entry>MAP_SEND_ROUTING_INFORMATION<highlight><subscript>&mdash;</subscript></highlight></entry>
<entry>Delete</entry>
<entry>Update</entry>
<entry></entry>
<entry>Set to &lsquo;1&rsquo;</entry>
</row>
<row>
<entry>FOR_GPRS response with a Provider Error</entry>
</row>
<row>
<entry>If the</entry>
<entry>Delete</entry>
<entry>Update</entry>
<entry></entry>
<entry>Set to &lsquo;1&rsquo;</entry>
</row>
<row>
<entry>MAP_SEND_ROUTING_INFORMATION<highlight><subscript>&mdash;</subscript></highlight></entry>
</row>
<row>
<entry>FOR_GPRS re-send procedure fails</entry>
</row>
<row>
<entry>Send Routing Info for GPRS</entry>
<entry>Update</entry>
<entry>Update</entry>
<entry></entry>
<entry>Set to &lsquo;0&rsquo;</entry>
</row>
<row>
<entry>Acknowledgement with no MNRR or an</entry>
</row>
<row>
<entry>MNRR that reads &lsquo;No Paging Response&rsquo;</entry>
</row>
<row>
<entry>MAP_FAILURE_REPORT Response</entry>
<entry></entry>
<entry>Update</entry>
<entry>Set to &lsquo;1&rsquo;</entry>
<entry>Set to &lsquo;0&rsquo;</entry>
</row>
<row>
<entry>No MAP_FAILURE_REPORT Response</entry>
<entry>Delete</entry>
<entry>Update</entry>
<entry></entry>
<entry>Set to &lsquo;1&rsquo;</entry>
</row>
<row>
<entry>received after the re-send procedure</entry>
</row>
<row><entry namest="1" nameend="5" align="center" rowsep="1"></entry>
</row>
<row>
<entry namest="1" nameend="5" align="left"><footnote id="FOO-00001">* - &lsquo;No Resources Available&rsquo;, &lsquo;Service Not Supported&rsquo;, &lsquo;System Failure&rsquo;, &lsquo;GPRS Connection Suspended&rsquo;, &lsquo;Mandatory IE Incorrect&rsquo;, &lsquo;Mandatory IE Missing&rsquo;, &lsquo;Optional IE Incorrect&rsquo;, &lsquo;Invalid Message Format&rsquo;, &lsquo;Version Not Supported&rsquo;, or &lsquo;Roaming Restriction&rsquo;</footnote></entry>
</row>
<row>
<entry namest="1" nameend="5" align="left"><footnote id="FOO-00002">** - If a MAP_SEND_ROUTING_INFORMATION_FOR_GPRS response with a Map Error Cause &lsquo;Unknown Subscriber&rsquo; is received by the GGSN then all PDP address entries with that IMSI are deleted. </footnote></entry>
</row>
</tbody>
</tgroup>
</table>
</table-cwu>
</paragraph>
</section>
</detailed-description>
</subdoc-description>
<subdoc-claims>
<claim id="CLM-00001">
<claim-text><highlight><bold>1</bold></highlight>. In a mobile telecommunications system providing packet switched services, a method of connecting mobile stations (MS) to a packet data network (PDN) external to the system, comprising: 
<claim-text>providing a gateway control means (GGSN) which receives packet data units (PDU) from the external data network for routing to a selected mobile station; </claim-text>
<claim-text>providing the selected mobile station with a system address (IMSI) for enabling the gateway control means to establish a connection with the mobile station, and a packet address (PDP) to enable packet data units to be routed to the mobile station; and </claim-text>
<claim-text>the gateway control means linking the system address of each mobile station with a respective packet address. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00002">
<claim-text><highlight><bold>2</bold></highlight>. A method according to <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein the gateway control means links the system address of each mobile station with a respective packet address by obtaining information from requests initiated by the mobile stations for external packet data services. </claim-text>
</claim>
<claim id="CLM-00003">
<claim-text><highlight><bold>3</bold></highlight>. A method according to <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein the system address of each mobile station is an international mobile subscriber identity (IMSI) number. </claim-text>
</claim>
<claim id="CLM-00004">
<claim-text><highlight><bold>4</bold></highlight>. A method according to any preceding claim, wherein said packet address is a static IP address </claim-text>
</claim>
<claim id="CLM-00005">
<claim-text><highlight><bold>5</bold></highlight>. A method according to <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein the information stored in the gateway control means is created as a result of individual mobile stations initiating the creation of a packet data protocol context for receiving required data services from external networks, in which the individual mobile stations transmit their system address to the gateway control means. </claim-text>
</claim>
<claim id="CLM-00006">
<claim-text><highlight><bold>6</bold></highlight>. A method according to <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein the gateway control means, having received a PDU, checks whether the packet address relates to an active packet procedure, and obtains the system address for a mobile station from its stored information. </claim-text>
</claim>
<claim id="CLM-00007">
<claim-text><highlight><bold>7</bold></highlight>. A method according to <dependent-claim-reference depends_on="CLM-00006">claim 6</dependent-claim-reference>, wherein the gateway control means initiates the creation of an active packet procedure, if no valid procedure currently exists, including obtaining the system address for the mobile station. </claim-text>
</claim>
<claim id="CLM-00008">
<claim-text><highlight><bold>8</bold></highlight>. A method according to <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, including checking whether the address for a support control means (SGSN) is valid; and if the address is not valid, the gateway control means obtaining routing information from home location register means (HLR). </claim-text>
</claim>
<claim id="CLM-00009">
<claim-text><highlight><bold>9</bold></highlight>. A method according to <dependent-claim-reference depends_on="CLM-00008">claim 8</dependent-claim-reference>, wherein the gateway control means initiates a packet data unit notification request procedure towards support control means (SGSN) to enable activation of a PDP context. </claim-text>
</claim>
<claim id="CLM-00010">
<claim-text><highlight><bold>10</bold></highlight>. A method according to <dependent-claim-reference depends_on="CLM-00009">claim 9</dependent-claim-reference>, wherein the gateway control means, the support control means, and the mobile station cooperate to create a PDP context for transmission of the packet data unit to its PDP address. </claim-text>
</claim>
<claim id="CLM-00011">
<claim-text><highlight><bold>11</bold></highlight>. A method according to <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein the gateway control means includes a table means including system addresses for mobile stations together with respective packet addresses, and in addition, address for a support control means (SGSN) linking the gateway control means to the selected mobile station, and time of when an entry is made to the table means. </claim-text>
</claim>
<claim id="CLM-00012">
<claim-text><highlight><bold>12</bold></highlight>. A method according to <dependent-claim-reference depends_on="CLM-00011">claim 11</dependent-claim-reference>, wherein the table means includes information as to whether a mobile station can be reached for packet services, and/or whether previous attempts at delivering packet data units have failed. </claim-text>
</claim>
<claim id="CLM-00013">
<claim-text><highlight><bold>13</bold></highlight>. A method according to <dependent-claim-reference depends_on="CLM-00011">claim 11</dependent-claim-reference>, wherein selected items of the table means relating to the SGSN are updated in response to information received in messages in the procedure set forth in any of <dependent-claim-reference depends_on="CLM-00007">claims 7</dependent-claim-reference> to <dependent-claim-reference depends_on="CLM-00010">10</dependent-claim-reference>. </claim-text>
</claim>
<claim id="CLM-00014">
<claim-text><highlight><bold>14</bold></highlight>. A method according to <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein the gateway control means includes a table means including system addresses for mobile stations together with respective packet addresses, and in addition, access point identifiers(APN) for identifying the external networks. </claim-text>
</claim>
<claim id="CLM-00015">
<claim-text><highlight><bold>15</bold></highlight>. A method according to <dependent-claim-reference depends_on="CLM-00011">claim 14</dependent-claim-reference>, wherein the table means is indexed according to system address and to packet address/ access point identifier combination. </claim-text>
</claim>
<claim id="CLM-00016">
<claim-text><highlight><bold>16</bold></highlight>. A method according to <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein the gateway control means is provided with a table means identifying mobile stations within the system and linking the system address of each mobile station with a respective packet address. </claim-text>
</claim>
<claim id="CLM-00017">
<claim-text><highlight><bold>17</bold></highlight>. In a mobile telecommunications system providing packet switched services, apparatus for connecting mobile stations to an external data network (PDN), comprising: 
<claim-text>a gateway control means (GGSN) for receiving packet data units (PDU), from the external data network for routing to a selected mobile station; </claim-text>
<claim-text>the selected mobile stations having a system address (IMSI) for establishing connection with the gateway control means and, the system having a facility for associating a packet address with the selected mobile station for a selected packet data service; and </claim-text>
<claim-text>the gateway control means including a table means for the mobile stations, which maps the system address to the or each packet address associated with each mobile station, together with an access point identifier employed in the system for the external data network. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00018">
<claim-text><highlight><bold>18</bold></highlight>. Apparatus as claimed in <dependent-claim-reference depends_on="CLM-00011">claim 17</dependent-claim-reference> wherein the table means is indexed according to system address and to packet address/ access point identifier combination. </claim-text>
</claim>
<claim id="CLM-00019">
<claim-text><highlight><bold>19</bold></highlight>. Apparatus as claimed in <dependent-claim-reference depends_on="CLM-00011">claim 17</dependent-claim-reference>, wherein the table means is compiled from information obtained by the gateway control means when mobile stations initiate procedures for establishing a connection for data services from an external data network. </claim-text>
</claim>
<claim id="CLM-00020">
<claim-text><highlight><bold>20</bold></highlight>. Apparatus as claimed in <dependent-claim-reference depends_on="CLM-00011">claim 17</dependent-claim-reference>, wherein the table means includes system addresses for mobile stations together with respective packet addresses, and in addition, address for a support control means (SGSN) linking the gateway control means to the selected mobile station, and time entry of when an entry is made to the table means.</claim-text>
</claim>
</subdoc-claims>
<subdoc-drawings id="DRAWINGS">
<heading lvl="0" align="CENTER">Drawings</heading>
<representative-figure>1</representative-figure>
<figure id="figure-D00000">
<image id="EMI-D00000" file="US20030002480A1-20030102-D00000.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00001">
<image id="EMI-D00001" file="US20030002480A1-20030102-D00001.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00002">
<image id="EMI-D00002" file="US20030002480A1-20030102-D00002.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00003">
<image id="EMI-D00003" file="US20030002480A1-20030102-D00003.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00004">
<image id="EMI-D00004" file="US20030002480A1-20030102-D00004.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00005">
<image id="EMI-D00005" file="US20030002480A1-20030102-D00005.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00006">
<image id="EMI-D00006" file="US20030002480A1-20030102-D00006.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00007">
<image id="EMI-D00007" file="US20030002480A1-20030102-D00007.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00008">
<image id="EMI-D00008" file="US20030002480A1-20030102-D00008.TIF" imf="TIFF" ti="DR"/>
</figure>
</subdoc-drawings>
</patent-application-publication>
