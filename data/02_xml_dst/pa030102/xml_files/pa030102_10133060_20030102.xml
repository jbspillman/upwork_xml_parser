<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE patent-application-publication SYSTEM "pap-v16-2002-01-01.dtd" [
<!ENTITY US20030001971A1-20030102-D00000.TIF SYSTEM "US20030001971A1-20030102-D00000.TIF" NDATA TIF>
<!ENTITY US20030001971A1-20030102-D00001.TIF SYSTEM "US20030001971A1-20030102-D00001.TIF" NDATA TIF>
<!ENTITY US20030001971A1-20030102-D00002.TIF SYSTEM "US20030001971A1-20030102-D00002.TIF" NDATA TIF>
<!ENTITY US20030001971A1-20030102-D00003.TIF SYSTEM "US20030001971A1-20030102-D00003.TIF" NDATA TIF>
<!ENTITY US20030001971A1-20030102-D00004.TIF SYSTEM "US20030001971A1-20030102-D00004.TIF" NDATA TIF>
<!ENTITY US20030001971A1-20030102-D00005.TIF SYSTEM "US20030001971A1-20030102-D00005.TIF" NDATA TIF>
<!ENTITY US20030001971A1-20030102-D00006.TIF SYSTEM "US20030001971A1-20030102-D00006.TIF" NDATA TIF>
<!ENTITY US20030001971A1-20030102-D00007.TIF SYSTEM "US20030001971A1-20030102-D00007.TIF" NDATA TIF>
<!ENTITY US20030001971A1-20030102-D00008.TIF SYSTEM "US20030001971A1-20030102-D00008.TIF" NDATA TIF>
<!ENTITY US20030001971A1-20030102-D00009.TIF SYSTEM "US20030001971A1-20030102-D00009.TIF" NDATA TIF>
<!ENTITY US20030001971A1-20030102-D00010.TIF SYSTEM "US20030001971A1-20030102-D00010.TIF" NDATA TIF>
<!ENTITY US20030001971A1-20030102-D00011.TIF SYSTEM "US20030001971A1-20030102-D00011.TIF" NDATA TIF>
<!ENTITY US20030001971A1-20030102-D00012.TIF SYSTEM "US20030001971A1-20030102-D00012.TIF" NDATA TIF>
<!ENTITY US20030001971A1-20030102-D00013.TIF SYSTEM "US20030001971A1-20030102-D00013.TIF" NDATA TIF>
<!ENTITY US20030001971A1-20030102-D00014.TIF SYSTEM "US20030001971A1-20030102-D00014.TIF" NDATA TIF>
]>
<patent-application-publication>
<subdoc-bibliographic-information>
<document-id>
<doc-number>20030001971</doc-number>
<kind-code>A1</kind-code>
<document-date>20030102</document-date>
</document-id>
<publication-filing-type>new</publication-filing-type>
<domestic-filing-data>
<application-number>
<doc-number>10133060</doc-number>
</application-number>
<application-number-series-code>10</application-number-series-code>
<filing-date>20020425</filing-date>
</domestic-filing-data>
<foreign-priority-data>
<priority-application-number>
<doc-number>2001-141978</doc-number>
</priority-application-number>
<filing-date>20010511</filing-date>
<country-code>JP</country-code>
</foreign-priority-data>
<technical-information>
<classification-ipc>
<classification-ipc-primary>
<ipc>H03M001/12</ipc>
</classification-ipc-primary>
<classification-ipc-edition>07</classification-ipc-edition>
</classification-ipc>
<classification-us>
<classification-us-primary>
<uspc>
<class>348</class>
<subclass>572000</subclass>
</uspc>
</classification-us-primary>
</classification-us>
<title-of-invention>Image-signal processing apparatus for clamping analog image signal and then for converting it to digital image signal</title-of-invention>
</technical-information>
<inventors>
<first-named-inventor>
<name>
<given-name>Junichi</given-name>
<family-name>Saito</family-name>
</name>
<residence>
<residence-non-us>
<city>Miyagi-ken</city>
<country-code>JP</country-code>
</residence-non-us>
</residence>
<authority-applicant>INV</authority-applicant>
</first-named-inventor>
</inventors>
<correspondence-address>
<name-1>BEYER WEAVER &amp; THOMAS LLP</name-1>
<name-2></name-2>
<address>
<address-1>P.O. BOX 778</address-1>
<city>BERKELEY</city>
<state>CA</state>
<postalcode>94704-0778</postalcode>
<country>
<country-code>US</country-code>
</country>
</address>
</correspondence-address>
</subdoc-bibliographic-information>
<subdoc-abstract>
<paragraph id="A-0001" lvl="0">An analog Y signal input from an input terminal <highlight><bold>101 </bold></highlight>is clamped at a pedestal level in a clamp circuit <highlight><bold>102, </bold></highlight>and then, is converted to a digital image signal in a quantization circuit <highlight><bold>103. </bold></highlight>The pedestal level Dp of the digital output D(t) <highlight><bold>113 </bold></highlight>is stored in a register <highlight><bold>702. </bold></highlight>A predetermined value Dref (Dref&equals;0 for the Y signal) is subtracted from Dp in a subtracter <highlight><bold>802. </bold></highlight>The subtraction output <highlight><bold>806 </bold></highlight>is subtracted from the digital output 113 in a subtracter <highlight><bold>803. </bold></highlight>The subtraction output <highlight><bold>805 </bold></highlight>(D(t)&minus;(Dp&minus;Dref)) is a signal for which a shift caused by a variation in the precision of the clamp circuit <highlight><bold>102 </bold></highlight>and the quantization circuit <highlight><bold>103 </bold></highlight>has been compensated for. The subtraction output <highlight><bold>805 </bold></highlight>is limited to a predetermined dynamic range by an overflow limiter circuit <highlight><bold>807, </bold></highlight>and output as Dout. </paragraph>
</subdoc-abstract>
<subdoc-description>
<summary-of-invention>
<section>
<heading lvl="1">BACKGROUND OF THE INVENTION </heading>
<paragraph id="P-0001" lvl="0"><number>&lsqb;0001&rsqb;</number> 1. Field of the Invention </paragraph>
<paragraph id="P-0002" lvl="0"><number>&lsqb;0002&rsqb;</number> The present invention relates to image-signal processing apparatuses which clamp an analog image signal, such as Y, Pb, and Pr signals, and then convert it to a digital image signal, and image display apparatuses, such as TV-camera viewfinders, which use the image-signal processing apparatuses. </paragraph>
<paragraph id="P-0003" lvl="0"><number>&lsqb;0003&rsqb;</number> 2. Description of the Related Art </paragraph>
<paragraph id="P-0004" lvl="0"><number>&lsqb;0004&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 10</cross-reference> is a block diagram of an image-signal processing apparatus used in a conventional image display apparatus, such as a TV-camera viewfinder. </paragraph>
<paragraph id="P-0005" lvl="0"><number>&lsqb;0005&rsqb;</number> In <cross-reference target="DRAWINGS">FIG. 10</cross-reference>, analog Y, Pb, and Pr signals to which matrix conversion has been applied by a HDTV (Hi-Vision) method are input from a previous-stage TV camera (not shown) or others to terminals <highlight><bold>101</bold></highlight>, <highlight><bold>104</bold></highlight>, and <highlight><bold>107</bold></highlight>. The Y signal is input to a synchronization separation circuit <highlight><bold>111</bold></highlight> to be separated into a horizontal synchronizing signal Hs and a vertical synchronizing signal Vs. A clamp-pulse generation circuit <highlight><bold>110</bold></highlight> generates a clamp pulse according to the horizontal synchronizing signal Hs. A clock generation circuit <highlight><bold>118</bold></highlight> generates a clock pulse CLK in synchronization with the horizontal synchronizing signal Hs. In the figure, thick lines indicate data bases, and solid lines indicate control buses. </paragraph>
<paragraph id="P-0006" lvl="0"><number>&lsqb;0006&rsqb;</number> The input Y, Pb, and Pr signals are clamped at a DC level with the use of the clamp pulse CLP by clamp circuits <highlight><bold>102</bold></highlight>, <highlight><bold>105</bold></highlight>, and <highlight><bold>108</bold></highlight>; their clamp outputs <highlight><bold>112</bold></highlight>, <highlight><bold>114</bold></highlight>, and <highlight><bold>116</bold></highlight> are A/D-converted by quantization circuit <highlight><bold>103</bold></highlight>, <highlight><bold>106</bold></highlight>, and <highlight><bold>109</bold></highlight> to form a digital Y signal <highlight><bold>113</bold></highlight>, a digital Pb signal <highlight><bold>115</bold></highlight>, and a digital Pr signal <highlight><bold>117</bold></highlight>; and they are input to an inverse matrix conversion circuit <highlight><bold>108</bold></highlight>. </paragraph>
<paragraph id="P-0007" lvl="0"><number>&lsqb;0007&rsqb;</number> The inverse matrix conversion circuit <highlight><bold>108</bold></highlight> applies inverse matrix calculation processing to the digital Y, Pb, and Pr signals to generate digital R, G, and B signals and to output them at output terminals <highlight><bold>120</bold></highlight>, <highlight><bold>121</bold></highlight>, and <highlight><bold>122</bold></highlight>. </paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>G&equals;k</italic></highlight>(<highlight><italic>Y&minus;</italic></highlight>0.187 <highlight><italic>Pb&minus;</italic></highlight>0.468 <highlight><italic>Pr</italic></highlight>) </in-line-formula></paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>B&equals;k</italic></highlight>(<highlight><italic>Y&plus;</italic></highlight>0.1856 <highlight><italic>Pb</italic></highlight>) &emsp;&emsp;(1) </in-line-formula></paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>R&equals;k</italic></highlight>(<highlight><italic>Y&plus;</italic></highlight>1.575 <highlight><italic>Pr</italic></highlight>) </in-line-formula></paragraph>
<paragraph id="P-0008" lvl="0"><number>&lsqb;0008&rsqb;</number> These R, G, and B signals are processed by a subsequent-stage display processing circuit (not shown), and displayed on a liquid-crystal display apparatus (not shown) or others. </paragraph>
<paragraph id="P-0009" lvl="0"><number>&lsqb;0009&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 11</cross-reference> shows unclamped Y, Pb, and Pr signals and clamp pulses CLP in a case in which a color bar is displayed, with arrows indicating the pedestal levels of the signals. In this figure, the back porch of each signal has the same level as the pedestal, which is an ideal condition. In an actual case, the Y, Pb, and Pr signals have indefinite DC levels. </paragraph>
<paragraph id="P-0010" lvl="0"><number>&lsqb;0010&rsqb;</number> As shown in the figure, the Y signal has an image component at the positive side of the pedestal level, and the Pb and Pr signals have image components at both sides of the pedestal level. A level of each signal, close to the pedestal level is clamped to a predetermined level by a clamp pulse CLP. </paragraph>
<paragraph id="P-0011" lvl="0"><number>&lsqb;0011&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 12</cross-reference> shows the relationship between clamped Y, Pb, and Pr signals (the clamp outputs <highlight><bold>112</bold></highlight>, <highlight><bold>114</bold></highlight>, and <highlight><bold>116</bold></highlight> in <cross-reference target="DRAWINGS">FIG. 10</cross-reference>) and calculation reference values used for A/D conversion to eight-bit digital signals. </paragraph>
<paragraph id="P-0012" lvl="0"><number>&lsqb;0012&rsqb;</number> As shown in the figure, when the Y signal is A/D converted such that the pedestal level is set to the minimum digital value Ref_L, &ldquo;0&rdquo; and the maximum digital value Ref_H is set to &ldquo;255,&rdquo; the maximum dynamic range is obtained. When the Pb and Pr signals are A/D converted such that the minimum digital value Ref_L is set to &ldquo;0,&rdquo; the maximum digital value Ref_H is set to &ldquo;255,&rdquo; and the pedestal level is set to &ldquo;127,&rdquo; the maximum dynamic ranges are obtained. </paragraph>
<paragraph id="P-0013" lvl="0"><number>&lsqb;0013&rsqb;</number> In the conventional image-signal processing apparatus, however, an analog signal system and a digital signal system have the following problem. </paragraph>
<paragraph id="P-0014" lvl="0"><number>&lsqb;0014&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 13</cross-reference> shows the structure of the conventional clamp circuit <highlight><bold>102</bold></highlight> shown in <cross-reference target="DRAWINGS">FIG. 12</cross-reference>. The other clamp circuits <highlight><bold>105</bold></highlight> and <highlight><bold>108</bold></highlight> have the same structure. </paragraph>
<paragraph id="P-0015" lvl="0"><number>&lsqb;0015&rsqb;</number> In <cross-reference target="DRAWINGS">FIG. 13</cross-reference>, the clamp circuit <highlight><bold>102</bold></highlight> is basically formed of the input terminal <highlight><bold>101</bold></highlight> to which the Y signal is input, an input terminal <highlight><bold>123</bold></highlight> to which the clamp pulse CLP is input, a coupling capacitor C<highlight><bold>201</bold></highlight>, a switch SW<highlight><bold>203</bold></highlight>, a power source E<highlight><bold>209</bold></highlight>, an amplifier U<highlight><bold>208</bold></highlight>, and an output terminal <highlight><bold>124</bold></highlight>. In addition to these components, parasitic resistors R<highlight><bold>202</bold></highlight>, R<highlight><bold>204</bold></highlight>, and R<highlight><bold>206</bold></highlight>, and parasitic capacitors C<highlight><bold>205</bold></highlight> and C<highlight><bold>207</bold></highlight> connected by dotted lines also exist. </paragraph>
<paragraph id="P-0016" lvl="0"><number>&lsqb;0016&rsqb;</number> In <cross-reference target="DRAWINGS">FIG. 13</cross-reference>, after the switch SW<highlight><bold>203</bold></highlight> is closed for the pulse width of the clamp pulse CLP to charge the capacitor C<highlight><bold>201</bold></highlight>, the switch SW<highlight><bold>203</bold></highlight> is opened. The pedestal level of the Y signal is clamped to the voltage Vp of the power source E<highlight><bold>209</bold></highlight>. </paragraph>
<paragraph id="P-0017" lvl="0"><number>&lsqb;0017&rsqb;</number> Since the actual circuit includes the parasitic resistors R<highlight><bold>202</bold></highlight>, R<highlight><bold>204</bold></highlight>, and R<highlight><bold>206</bold></highlight>, however, charges may flow in or out from the capacitor C<highlight><bold>201</bold></highlight> due to the leakage effect of the parasitic resistors. In addition, since there are the parasitic capacitors C<highlight><bold>205</bold></highlight> and C<highlight><bold>207</bold></highlight>, the charges of the capacitor C<highlight><bold>201</bold></highlight> are distributed. Especially, the capacitor C<highlight><bold>205</bold></highlight> connected in parallel to the switch SW<highlight><bold>203</bold></highlight> is not charged at all when the switch SW<highlight><bold>203</bold></highlight> is closed, as if the capacitor C<highlight><bold>205</bold></highlight> nominally did not exist, but it absorbs charges of the capacitor C<highlight><bold>201</bold></highlight> when the switch SW<highlight><bold>203</bold></highlight> is opened, as if it suddenly appeared. </paragraph>
<paragraph id="P-0018" lvl="0"><number>&lsqb;0018&rsqb;</number> In the conventional clamp circuit, a voltage shift &Dgr;Vp shown in <cross-reference target="DRAWINGS">FIG. 14</cross-reference> occurs in the clamp voltage Vp due to the parasitic resistors and parasitic capacitors. <cross-reference target="DRAWINGS">FIG. 14</cross-reference> shows that the actual clamp voltage is shifted from the target voltage by &Dgr;Vp. When this voltage shift is A/D converted by a quantization circuit, the following shift &ldquo;err&rdquo; appears in the A/D conversion output. </paragraph>
<paragraph lvl="0"><in-line-formula>err&equals;&minus;&Dgr;<highlight><italic>Vp/</italic></highlight>(Ref<highlight><subscript>&mdash;</subscript></highlight><highlight><italic>H&minus;</italic></highlight>Ref<highlight><subscript>&mdash;</subscript></highlight><highlight><italic>L</italic></highlight>)&times;255</in-line-formula></paragraph>
<paragraph id="P-0019" lvl="0"><number>&lsqb;0019&rsqb;</number> When inverse matrix conversion is applied to digital Y, Pb, and Pr signals having such a clamp-voltage shift &ldquo;err,&rdquo; by the calculation expressed by (1) to convert them to R, G, and B signals, because the calculation coefficients differ among the R, G, and B signals, the shift appears differently in the signals, causing deterioration in color balance. </paragraph>
<paragraph id="P-0020" lvl="0"><number>&lsqb;0020&rsqb;</number> To eliminate the effect of the parasitic resistors and parasitic capacitors, a method has been conventionally considered in which the output voltage is fed back to the power source E<highlight><bold>209</bold></highlight> in <cross-reference target="DRAWINGS">FIG. 13</cross-reference>. An attempt is also made to reduce the parasitic resistors and parasitic capacitors themselves as much as possible. Any method, however, increases cost. </paragraph>
<paragraph id="P-0021" lvl="0"><number>&lsqb;0021&rsqb;</number> Further, there was conventionally a problem of precision in a quantization circuit. </paragraph>
<paragraph id="P-0022" lvl="0"><number>&lsqb;0022&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 15</cross-reference> shows the structure of the quantization circuit <highlight><bold>103</bold></highlight> shown in <cross-reference target="DRAWINGS">FIG. 10</cross-reference>. The other quantization circuits <highlight><bold>106</bold></highlight> and <highlight><bold>109</bold></highlight> have the same structure. </paragraph>
<paragraph id="P-0023" lvl="0"><number>&lsqb;0023&rsqb;</number> In <cross-reference target="DRAWINGS">FIG. 15</cross-reference>, the quantization circuit <highlight><bold>103</bold></highlight> includes an A/D converter <highlight><bold>103</bold></highlight><highlight><italic>a. </italic></highlight>The target voltage is input from the clamp circuit <highlight><bold>102</bold></highlight>, which is the previous-stage circuit, to an input terminal <highlight><bold>125</bold></highlight>, and an A/D conversion output (digital Y signal) is obtained at an output terminal <highlight><bold>126</bold></highlight>. The reference voltage Vref_H and the reference voltage Vref_L are applied to the A/D converter <highlight><bold>103</bold></highlight><highlight><italic>a </italic></highlight>to obtain the digital value &ldquo;255&rdquo; and the digital value &ldquo;0&rdquo; respectively. </paragraph>
<paragraph id="P-0024" lvl="0"><number>&lsqb;0024&rsqb;</number> When the reference voltages Vref_H and Vref_L and a voltage of (Vref_H&plus;Vref_L)/2, which is used to obtain the intermediate digital value &ldquo;127,&rdquo; are input as the target voltage, the A/D conversion outputs obtained at the output terminal <highlight><bold>126</bold></highlight> have shifts of &agr;, &bgr;, and &ggr; as shown in Table 2 due to variations in the precision of the A/D converter <highlight><bold>103</bold></highlight><highlight><italic>a. </italic></highlight> 
<table-cwu id="TABLE-US-00001">
<number>1</number>
<table frame="none" colsep="0" rowsep="0">
<tgroup align="left" colsep="0" rowsep="0" cols="4">
<colspec colname="OFFSET" colwidth="14PT" align="left"/>
<colspec colname="1" colwidth="70PT" align="left"/>
<colspec colname="2" colwidth="126PT" align="center"/>
<colspec colname="3" colwidth="7PT" align="center"/>
<thead>
<row>
<entry></entry>
<entry namest="OFFSET" nameend="3" align="center">TABLE 2</entry>
</row>
</thead>
<tbody valign="top">
<row>
<entry></entry>
<entry></entry>
</row>
<row>
<entry></entry>
<entry namest="OFFSET" nameend="3" align="center" rowsep="1"></entry>
</row>
<row>
<entry></entry>
<entry></entry>
<entry>OUTPUT</entry>
<entry></entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="4">
<colspec colname="OFFSET" colwidth="14PT" align="left"/>
<colspec colname="1" colwidth="70PT" align="left"/>
<colspec colname="2" colwidth="70PT" align="center"/>
<colspec colname="3" colwidth="63PT" align="left"/>
<tbody valign="top">
<row>
<entry></entry>
<entry>TARGET VOLTAGE</entry>
<entry>IDEAL CASE</entry>
<entry>ACTUAL CASE</entry>
</row>
<row>
<entry></entry>
<entry namest="OFFSET" nameend="3" align="center" rowsep="1"></entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="4">
<colspec colname="OFFSET" colwidth="14PT" align="left"/>
<colspec colname="1" colwidth="70PT" align="left"/>
<colspec colname="2" colwidth="70PT" align="char" char="."/>
<colspec colname="3" colwidth="63PT" align="left"/>
<tbody valign="top">
<row>
<entry></entry>
<entry>Vref_H</entry>
<entry>255</entry>
<entry>255 &minus; &agr;</entry>
</row>
<row>
<entry></entry>
<entry>(Vref_H &plus; Vref_L)/2</entry>
<entry>127</entry>
<entry>127 &plusmn; &bgr;</entry>
</row>
<row>
<entry></entry>
<entry>Vref_L</entry>
<entry>0</entry>
<entry>0 &plus; &ggr;</entry>
</row>
<row>
<entry></entry>
<entry namest="OFFSET" nameend="3" align="center" rowsep="1"></entry>
</row>
</tbody>
</tgroup>
</table>
</table-cwu>
</paragraph>
<paragraph id="P-0025" lvl="0"><number>&lsqb;0025&rsqb;</number> To increase the precision of the A/D converter <highlight><bold>103</bold></highlight><highlight><italic>a </italic></highlight>to eliminate the shifts &agr;, &bgr;, and &ggr; it is necessary that a high current flow into an analog part of the A/D converter <highlight><bold>103</bold></highlight><highlight><italic>a </italic></highlight>. As a result, power consumption increases. In addition, a precise A/D converter is expensive. As described above, conventionally, a large amount of cost and a high power consumption are required to prevent pedestal-level values obtained after quantization from shifting. </paragraph>
</section>
<section>
<heading lvl="1">SUMMARY OF THE INVENTION </heading>
<paragraph id="P-0026" lvl="0"><number>&lsqb;0026&rsqb;</number> The present invention has been made in consideration of the above-described problems. Accordingly, it is an object of the present invention to eliminate the shifts without requesting a very high precision in a clamp circuit of an analog system and in a quantization circuit of a digital system. </paragraph>
<paragraph id="P-0027" lvl="0"><number>&lsqb;0027&rsqb;</number> The foregoing object is achieved in one aspect of the present invention through the provision of an image-signal processing apparatus including clamp means for clamping a level of an input image signal to a value close to a predetermined value; digital conversion means for sampling a clamped image signal and for converting it to a digital image signal; and calculation means for obtaining the difference between the pedestal level of the digital image signal and the predetermined value and for compensating the digital image signal according to the difference. </paragraph>
<paragraph id="P-0028" lvl="0"><number>&lsqb;0028&rsqb;</number> According to the above-described structure, a level of an input image signal is clamped at a value close to the predetermined value by the clamp means, and the clamped video signal is converted to a digital image signal by the digital conversion means. The calculation means obtains the difference between the pedestal level of the digital image signal and the predetermined value, and compensates the digital image signal according to the difference. Therefore, a shift of the pedestal level in the digital image signal, caused by the clamp means and a shift caused by a variation in the precision of the digital conversion means can be compensated for. </paragraph>
<paragraph id="P-0029" lvl="0"><number>&lsqb;0029&rsqb;</number> In the image-signal processing apparatus, the calculation means may include register means for storing the pedestal level from the output of the digital conversion means; first calculation means for performing addition or subtraction between the pedestal level stored in the register means and the predetermined value; and second calculation means for performing addition or subtraction between the output of the digital conversion means and the output of the first calculation means. </paragraph>
<paragraph id="P-0030" lvl="0"><number>&lsqb;0030&rsqb;</number> According to the above-described structure, in the calculation means, the register means stores the pedestal level of the digital image signal; the first calculation means performs addition or subtraction between the stored pedestal level and the predetermined value; and the second calculation means performs addition or subtraction between the digital image signal and the output of the first calculation means. Therefore, a digital image signal for which the above-described shifts have been compensated for can be obtained by the second calculation means. </paragraph>
<paragraph id="P-0031" lvl="0"><number>&lsqb;0031&rsqb;</number> In the image-signal processing apparatus, the calculation means may include register means for storing the pedestal level from the output of the digital conversion means; first calculation means for performing addition or subtraction between the pedestal level stored in the register means and the predetermined value; switching means for switching between the pedestal level stored in the register means and the output of the digital conversion means, and for outputting switched data; and second calculation means for performing addition or subtraction between the output of the switching means and the output of the first calculation means. </paragraph>
<paragraph id="P-0032" lvl="0"><number>&lsqb;0032&rsqb;</number> According to the above-described structure, in the calculation means, the register means stores the pedestal level of the digital image signal; the first calculation means performs addition or subtraction between the stored pedestal level and the predetermined value; the switching means switches between the stored pedestal level and the digital image signal and outputs switched data; and the second calculation means performs addition or subtraction between the output of the switching means and the output of the first calculation means. Therefore, when the switching means selects and outputs the pedestal level, the second calculation means outputs the predetermined value. The predetermined value can be used for white balance adjustment. </paragraph>
<paragraph id="P-0033" lvl="0"><number>&lsqb;0033&rsqb;</number> In the image-signal processing apparatus, overflow processing means for limiting the output of the second calculation means to a predetermined range may be provided. </paragraph>
<paragraph id="P-0034" lvl="0"><number>&lsqb;0034&rsqb;</number> According to the above-described structure, since the overflow processing means limits the output of the second calculation means to a predetermined range, even when the output level of the second calculation means exceeds an upper limit or a lower limit, the output is limited to the predetermined range. </paragraph>
<paragraph id="P-0035" lvl="0"><number>&lsqb;0035&rsqb;</number> In the image-signal processing apparatus, the register means may include n (n&equals;2, 3, . . . ) latch means connected in series; and averaging means for adding the output of the latch means and for dividing the sum by n. </paragraph>
<paragraph id="P-0036" lvl="0"><number>&lsqb;0036&rsqb;</number> According to the above-described structure, since the register means includes the n (n&equals;2, 3, . . . ) latch means and the averaging means for adding the output of the latch means and for dividing the sum by n, the effect of noise generated when the register means stores the digital image signal can be reduced. </paragraph>
<paragraph id="P-0037" lvl="0"><number>&lsqb;0037&rsqb;</number> In the image-signal processing apparatus, second switching means for switching between the output of the second calculation means and the predetermined value used in calculation by the first calculation means and for outputting switched data may be provided after the second calculation means. </paragraph>
<paragraph id="P-0038" lvl="0"><number>&lsqb;0038&rsqb;</number> According to the above-described structure, since the second switching means for switching between the output of the second calculation means and the predetermined value and for outputting switched data is provided after the second calculation means, when the switching means selects and outputs the predetermined value, the predetermined value can be used for white balance adjustment. </paragraph>
<paragraph id="P-0039" lvl="0"><number>&lsqb;0039&rsqb;</number> The foregoing object is achieved in another aspect of the present invention through the provision of an image display apparatus including an image-signal processing apparatus described above. </paragraph>
<paragraph id="P-0040" lvl="0"><number>&lsqb;0040&rsqb;</number> According to the above-described structure, since the image display apparatus includes any image-signal processing apparatus described above, a successful image having no color shift can be displayed according to the above-described operations. </paragraph>
<paragraph id="P-0041" lvl="0"><number>&lsqb;0041&rsqb;</number> Y, Pr, and Pb signals may be handled as the digital image signal. In this case, the above-described means is provided for each of the Y, Pr, and Pb signals.</paragraph>
</section>
</summary-of-invention>
<brief-description-of-drawings>
<section>
<heading lvl="1">BRIEF DESCRIPTION OF THE DRAWINGS </heading>
<paragraph id="P-0042" lvl="0"><number>&lsqb;0042&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1</cross-reference> is a block diagram of an image-signal processing apparatus used in an image display apparatus, according to a first embodiment of the present invention. </paragraph>
<paragraph id="P-0043" lvl="0"><number>&lsqb;0043&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 2</cross-reference> is a view showing the structures of a clamp circuit, a quantization circuit, a calculation circuit, and a register shown in <cross-reference target="DRAWINGS">FIG. 1</cross-reference>. </paragraph>
<paragraph id="P-0044" lvl="0"><number>&lsqb;0044&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3</cross-reference>A and <cross-reference target="DRAWINGS">FIG. 3B</cross-reference> are waveform views showing an operation in the first embodiment. </paragraph>
<paragraph id="P-0045" lvl="0"><number>&lsqb;0045&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 4</cross-reference> is a timing chart showing an operation in the first embodiment. </paragraph>
<paragraph id="P-0046" lvl="0"><number>&lsqb;0046&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 5</cross-reference> is a view showing the structure of the register shown in <cross-reference target="DRAWINGS">FIG. 1</cross-reference>. </paragraph>
<paragraph id="P-0047" lvl="0"><number>&lsqb;0047&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 6</cross-reference> is a view showing the structure of a register according to a second embodiment of the present invention. </paragraph>
<paragraph id="P-0048" lvl="0"><number>&lsqb;0048&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 7</cross-reference> is a timing chart showing an operation in the second embodiment. </paragraph>
<paragraph id="P-0049" lvl="0"><number>&lsqb;0049&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 8</cross-reference> is a view showing the structures of a clamp circuit, a quantization circuit, a calculation circuit, and a register according to a third embodiment of the present invention. </paragraph>
<paragraph id="P-0050" lvl="0"><number>&lsqb;0050&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 9</cross-reference> is a view showing the structures of a clamp circuit, a quantization circuit, a calculation circuit, and a register according to a fourth embodiment of the present invention. </paragraph>
<paragraph id="P-0051" lvl="0"><number>&lsqb;0051&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 10</cross-reference> is a block diagram of an image-signal processing apparatus used in a conventional image display apparatus. </paragraph>
<paragraph id="P-0052" lvl="0"><number>&lsqb;0052&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 11</cross-reference> is a waveform view of Y, Pb, and Pr signals in the conventional image-signal processing apparatus. </paragraph>
<paragraph id="P-0053" lvl="0"><number>&lsqb;0053&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 12</cross-reference> is a waveform view showing the relationship between the clamp levels of Y, Pb, and Pr signals and calculation reference values for A/D conversion in the conventional image-signal processing apparatus. </paragraph>
<paragraph id="P-0054" lvl="0"><number>&lsqb;0054&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 13</cross-reference> is a view showing the structure of a clamp circuit used in the conventional image-signal processing apparatus. </paragraph>
<paragraph id="P-0055" lvl="0"><number>&lsqb;0055&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 14</cross-reference> is a characteristic view showing a problem in the conventional clamp circuit. </paragraph>
<paragraph id="P-0056" lvl="0"><number>&lsqb;0056&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 15</cross-reference> is a structural view showing a problem in a conventional quantization circuit.</paragraph>
</section>
</brief-description-of-drawings>
<detailed-description>
<section>
<heading lvl="1">DESCRIPTION OF THE PREFERRED EMBODIMENTS </heading>
<paragraph id="P-0057" lvl="0"><number>&lsqb;0057&rsqb;</number> Embodiments of the present invention will be described below by referring to the drawings. </paragraph>
<paragraph id="P-0058" lvl="0"><number>&lsqb;0058&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1</cross-reference> is a block diagram of an image-signal processing apparatus used in an image display apparatus, according to a first embodiment of the present invention. The same symbols as those used in <cross-reference target="DRAWINGS">FIG. 10</cross-reference> are assigned to the portions corresponding to those shown in <cross-reference target="DRAWINGS">FIG. 10</cross-reference>, and descriptions thereof will be omitted. </paragraph>
<paragraph id="P-0059" lvl="0"><number>&lsqb;0059&rsqb;</number> In <cross-reference target="DRAWINGS">FIG. 1, a</cross-reference> calculation circuit <highlight><bold>701</bold></highlight> and a register <highlight><bold>702</bold></highlight> are provided between a quantization circuit <highlight><bold>103</bold></highlight> and an inverse matrix conversion circuit <highlight><bold>108</bold></highlight>, and a digital Y signal which is the output <highlight><bold>113</bold></highlight> of the quantization circuit <highlight><bold>103</bold></highlight> is input to the calculation circuit <highlight><bold>701</bold></highlight> and to the register <highlight><bold>702</bold></highlight>. The output <highlight><bold>705</bold></highlight> of the register <highlight><bold>702</bold></highlight> is input to the calculation circuit <highlight><bold>701</bold></highlight>, and the output <highlight><bold>706</bold></highlight> of the calculation circuit <highlight><bold>701</bold></highlight> is input to the inverse matrix conversion circuit <highlight><bold>108</bold></highlight>. </paragraph>
<paragraph id="P-0060" lvl="0"><number>&lsqb;0060&rsqb;</number> Calculation circuits <highlight><bold>707</bold></highlight> and <highlight><bold>708</bold></highlight> and registers <highlight><bold>709</bold></highlight> and <highlight><bold>710</bold></highlight> are provided between quantization circuits <highlight><bold>106</bold></highlight> and <highlight><bold>109</bold></highlight> and the inverse matrix conversion circuit <highlight><bold>108</bold></highlight>, respectively, and digital Pb and Pr signals which are the outputs <highlight><bold>115</bold></highlight> and <highlight><bold>117</bold></highlight> of the quantization circuits <highlight><bold>106</bold></highlight>and <highlight><bold>109</bold></highlight> are input to the calculation circuits <highlight><bold>707</bold></highlight> and <highlight><bold>708</bold></highlight> and to the registers <highlight><bold>709</bold></highlight> and <highlight><bold>710</bold></highlight>, respectively. The outputs of the registers <highlight><bold>709</bold></highlight> and <highlight><bold>710</bold></highlight> are input to the calculation circuits <highlight><bold>707</bold></highlight> and <highlight><bold>708</bold></highlight>, and the outputs of the calculation circuits <highlight><bold>707</bold></highlight> and <highlight><bold>708</bold></highlight> are input to the inverse matrix conversion circuit <highlight><bold>108</bold></highlight>. </paragraph>
<paragraph id="P-0061" lvl="0"><number>&lsqb;0061&rsqb;</number> A clamp-pulse and register-pulse generation circuit <highlight><bold>703</bold></highlight> is also provided to generate a clamp pulse CLP and a register pulse RGP according to a horizontal synchronizing signal Hs separated by a synchronization separation circuit <highlight><bold>111</bold></highlight>. The register pulse RGP is input to the registers <highlight><bold>702</bold></highlight>, <highlight><bold>709</bold></highlight>, and <highlight><bold>710</bold></highlight>. </paragraph>
<paragraph id="P-0062" lvl="0"><number>&lsqb;0062&rsqb;</number> In the following description, a circuit structure and an operation for the Y signal are mainly described. The same circuit structure and operation are also provided for the Pb signal and Pr signal. </paragraph>
<paragraph id="P-0063" lvl="0"><number>&lsqb;0063&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 2</cross-reference> shows the structures of the register <highlight><bold>702</bold></highlight>, the calculation circuit <highlight><bold>701</bold></highlight>,the clamp circuit <highlight><bold>102</bold></highlight>, and the quantization circuit <highlight><bold>103</bold></highlight>. The clamp circuit <highlight><bold>102</bold></highlight> and the quantization circuit <highlight><bold>103</bold></highlight> have the same structures as those shown in <cross-reference target="DRAWINGS">FIG. 13</cross-reference> and <cross-reference target="DRAWINGS">FIG. 15</cross-reference>. The same symbols as those used in <cross-reference target="DRAWINGS">FIG. 13</cross-reference> and <cross-reference target="DRAWINGS">FIG. 15</cross-reference> are assigned to the portions corresponding to those shown in <cross-reference target="DRAWINGS">FIG. 13</cross-reference> and <cross-reference target="DRAWINGS">FIG. 15</cross-reference>, and descriptions thereof will be omitted. In the clamp circuit <highlight><bold>102</bold></highlight>, parasitic resistors and parasitic capacitors are omitted in the figure. In the quantization circuit <highlight><bold>103</bold></highlight>, E<highlight><bold>808</bold></highlight> indicates a power source for a reference voltage Vref_H, and E<highlight><bold>809</bold></highlight> indicates a power source for a reference voltage Vref_L. </paragraph>
<paragraph id="P-0064" lvl="0"><number>&lsqb;0064&rsqb;</number> The register pulse RGP is input to an input terminal <highlight><bold>704</bold></highlight> of the register <highlight><bold>702</bold></highlight>. The register pulse RGP is generated immediately after the clamp pulse CLP, and is used to latch the output <highlight><bold>113</bold></highlight> (digital Y signal, indicated by D(t)) of the quantization circuit <highlight><bold>103</bold></highlight>. Therefore, the latch output <highlight><bold>705</bold></highlight> (Dp) of the register <highlight><bold>702</bold></highlight> includes the above-described shifts generated in the clamp circuit <highlight><bold>102</bold></highlight> and the quantization circuit <highlight><bold>103</bold></highlight>. A predetermined value Dref generated by a predetermined-value generation circuit <highlight><bold>801</bold></highlight> is subtracted from the latch output Dp in a subtracter <highlight><bold>802</bold></highlight>. The subtraction output <highlight><bold>806</bold></highlight> (Dp&minus;Dref) is subtracted from the output D(t) in a subtracter <highlight><bold>803</bold></highlight>. </paragraph>
<paragraph id="P-0065" lvl="0"><number>&lsqb;0065&rsqb;</number> The predetermined value Dref is set to &ldquo;0,&rdquo; which is the digital value of the pedestal level of the Y signal, for the Y signal, and the predetermined value Dref is set to &ldquo;127,&rdquo; which is the digital value of the pedestal levels of the Pb and Pr signals, for the Pb and Pr signals (as shown in <cross-reference target="DRAWINGS">FIG. 12</cross-reference>). Therefore, the subtraction output <highlight><bold>806</bold></highlight> (Dp&minus;Dref) of the subtracter <highlight><bold>802</bold></highlight> indicates the shift from the pedestal level for the Y signal. This shift is subtracted from D(t) in the subtracter <highlight><bold>803</bold></highlight> to compensate D(t) for the shift to obtain the subtraction output <highlight><bold>805</bold></highlight> &lcub;D(t)&minus;(Dp&minus;Dref)&rcub;. </paragraph>
<paragraph id="P-0066" lvl="0"><number>&lsqb;0066&rsqb;</number> The subtraction output <highlight><bold>805</bold></highlight> is input to an overflow limiter circuit <highlight><bold>807</bold></highlight>. When the subtraction output <highlight><bold>805</bold></highlight> exceeds a predetermined upper limit or a predetermined lower limit, the subtraction output <highlight><bold>805</bold></highlight> is limited to a predetermined value. To this end, the subtracter <highlight><bold>803</bold></highlight> sends a carry signal or a borrow signal <highlight><bold>804</bold></highlight> to the overflow limiter circuit <highlight><bold>807</bold></highlight> when the subtraction output <highlight><bold>805</bold></highlight> exceeds the predetermined upper limit or the predetermined lower limit. </paragraph>
<paragraph id="P-0067" lvl="0"><number>&lsqb;0067&rsqb;</number> A digital Y signal in which the shift has been compensated for and which is within a predetermined dynamic range is obtained from the overflow limiter circuit <highlight><bold>807</bold></highlight>, and it is output as an output Dout from an output terminal <highlight><bold>808</bold></highlight>. </paragraph>
<paragraph id="P-0068" lvl="0"><number>&lsqb;0068&rsqb;</number> Table 1 shows the relationship among the input (subtraction output <highlight><bold>805</bold></highlight>) and the output Dout of the overflow limiter circuit <highlight><bold>807</bold></highlight>, and the carry signal or the borrow signal <highlight><bold>804</bold></highlight>.  
<table-cwu id="TABLE-US-00002">
<number>2</number>
<table frame="none" colsep="0" rowsep="0">
<tgroup align="left" colsep="0" rowsep="0" cols="4">
<colspec colname="OFFSET" colwidth="21PT" align="left"/>
<colspec colname="1" colwidth="49PT" align="left"/>
<colspec colname="2" colwidth="42PT" align="left"/>
<colspec colname="3" colwidth="105PT" align="center"/>
<thead>
<row>
<entry></entry>
<entry namest="OFFSET" nameend="3" align="center">TABLE 1</entry>
</row>
<row>
<entry></entry>
<entry></entry>
</row>
<row>
<entry></entry>
<entry namest="OFFSET" nameend="3" align="center" rowsep="1"></entry>
</row>
<row>
<entry></entry>
<entry>804</entry>
<entry>805</entry>
<entry>Dout</entry>
</row>
<row>
<entry></entry>
<entry namest="OFFSET" nameend="3" align="center" rowsep="1"></entry>
</row>
</thead>
<tbody valign="top">
<row>
<entry></entry>
<entry>Borrow</entry>
<entry>less than 0</entry>
<entry>&emsp;0</entry>
</row>
<row>
<entry></entry>
<entry>&mdash;</entry>
<entry>0 to 255 both</entry>
<entry>D(t) &minus; (Dp &minus; Dref)</entry>
</row>
<row>
<entry></entry>
<entry></entry>
<entry>inclusive</entry>
</row>
<row>
<entry></entry>
<entry>Carry</entry>
<entry>256 or more</entry>
<entry>255</entry>
</row>
<row>
<entry></entry>
<entry namest="OFFSET" nameend="3" align="center" rowsep="1"></entry>
</row>
</tbody>
</tgroup>
</table>
</table-cwu>
</paragraph>
<paragraph id="P-0069" lvl="0"><number>&lsqb;0069&rsqb;</number> In table 1, when the subtraction output <highlight><bold>805</bold></highlight> falls in a range from 0 to 255 both inclusive, the subtraction output is output as is. When the subtraction output is less than 0, 0 is output . When the subtraction output is more than 255, 255 is output. </paragraph>
<paragraph id="P-0070" lvl="0"><number>&lsqb;0070&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3</cross-reference>A and <cross-reference target="DRAWINGS">FIG. 3B</cross-reference> are waveform charts showing the above-described shift compensation operation. <cross-reference target="DRAWINGS">FIG. 3A</cross-reference> shows a case in which the latch output Dp (register output <highlight><bold>705</bold></highlight>) is shifted to a smaller-value side of the predetermined value Dref, and <cross-reference target="DRAWINGS">FIG. 3B</cross-reference> shows a case in which the latch output Dp (register output <highlight><bold>705</bold></highlight>) is shifted to a larger-value side of the predetermined value Dref. Dk indicates an instantaneous value (t&equals;k) of D(t). </paragraph>
<paragraph id="P-0071" lvl="0"><number>&lsqb;0071&rsqb;</number> In <cross-reference target="DRAWINGS">FIG. 3</cross-reference>A, the same value as the shift (Dref&minus;Dp) from the pedestal level is added to Dk to obtain a correct output Dout in which the shift has been compensated for. </paragraph>
<paragraph id="P-0072" lvl="0"><number>&lsqb;0072&rsqb;</number> In <cross-reference target="DRAWINGS">FIG. 3</cross-reference>B, the same value as the shift (Dref&minus;Dp) from the pedestal level is subtracted from Dk to obtain a correct output Dout in which the shift has been compensated for. </paragraph>
<paragraph id="P-0073" lvl="0"><number>&lsqb;0073&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 4</cross-reference> is a timing chart of signals shown in <cross-reference target="DRAWINGS">FIG. 2</cross-reference>, obtained during the above-described operation. </paragraph>
<paragraph id="P-0074" lvl="0"><number>&lsqb;0074&rsqb;</number> In <cross-reference target="DRAWINGS">FIG. 4</cross-reference>, the output <highlight><bold>113</bold></highlight> (D(t)) is formed of data Dp at the back porch and the following D<highlight><bold>0</bold></highlight>, D<highlight><bold>1</bold></highlight>, . . . , Dk, . . . The data Dp at the back porch is latched by the register pulse RGP generated after the clamp pulse CLP, and D(t) is stored in the register <highlight><bold>702</bold></highlight>. Then, the subtracter <highlight><bold>802</bold></highlight> obtains the shift (Dp&minus;Dref) in the subtraction output <highlight><bold>806</bold></highlight>, the shift is compensated for by the predetermined value Dref, and Dp and D<highlight><bold>0</bold></highlight>, D<highlight><bold>1</bold></highlight>, . . . , Dk, . . . are compensated to obtain Dref and DA<highlight><bold>0</bold></highlight>, DA<highlight><bold>1</bold></highlight>, . . . DAk, . . . They are limited according to Table 1 by the overflow limiter circuit <highlight><bold>807</bold></highlight>, and then output as Dout. </paragraph>
<paragraph id="P-0075" lvl="0"><number>&lsqb;0075&rsqb;</number> The same processing as that for the Y signal is applied to the Pb signal and to the Pr signal. The pedestal levels of the Pb and Pr signals are compensated, the Pb and Pr signals are limited to have values within a predetermined range, and the Pb and Pr signals are input to the inverse matrix conversion circuit <highlight><bold>108</bold></highlight> together with the Y signal. </paragraph>
<paragraph id="P-0076" lvl="0"><number>&lsqb;0076&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 5</cross-reference> shows an example structure of the register <highlight><bold>702</bold></highlight>. As shown in the figure, a latch circuit is formed of a NAND circuit, an AND circuit, an OR circuit, a D flip-flop, and others. The parallel data D(t) is taken at the rising edge of the register pulse RGP and latched at the falling edge in D flip-flops. </paragraph>
<paragraph id="P-0077" lvl="0"><number>&lsqb;0077&rsqb;</number> A second embodiment of the present invention will be described next. </paragraph>
<paragraph id="P-0078" lvl="0"><number>&lsqb;0078&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 6</cross-reference> shows the structure of a register <highlight><bold>102</bold></highlight> according to the present embodiment, and corresponds to <cross-reference target="DRAWINGS">FIG. 5</cross-reference>. </paragraph>
<paragraph id="P-0079" lvl="0"><number>&lsqb;0079&rsqb;</number> In <cross-reference target="DRAWINGS">FIG. 6</cross-reference>, two latch circuits each of which are the same as that shown in <cross-reference target="DRAWINGS">FIG. 5</cross-reference> are connected in series as a latch <highlight><bold>1</bold></highlight> and a latch <highlight><bold>2</bold></highlight>. The register pulse RGP is input to the latches <highlight><bold>1</bold></highlight> and <highlight><bold>2</bold></highlight>. The latch <highlight><bold>1</bold></highlight> latches the output <highlight><bold>113</bold></highlight> (D(t)) of a quantization circuit <highlight><bold>103</bold></highlight>, which is the preceding-stage circuit, and the latch <highlight><bold>2</bold></highlight> latches the output of the latch <highlight><bold>1</bold></highlight>. Latch outputs <highlight><bold>11</bold></highlight> and <highlight><bold>12</bold></highlight> are input to an averaging circuit <highlight><bold>15</bold></highlight>. </paragraph>
<paragraph id="P-0080" lvl="0"><number>&lsqb;0080&rsqb;</number> The averaging circuit <highlight><bold>15</bold></highlight> adds the latch outputs <highlight><bold>11</bold></highlight> and 1:2 in an adder <highlight><bold>13</bold></highlight> and divides the sum by 2 in a division circuit <highlight><bold>14</bold></highlight> to obtain the average of the latch outputs, and outputs it as the output (Dp). </paragraph>
<paragraph id="P-0081" lvl="0"><number>&lsqb;0081&rsqb;</number> In the register <highlight><bold>702</bold></highlight> shown in <cross-reference target="DRAWINGS">FIG. 5</cross-reference> according to the first embodiment, an incorrect value may be latched due to the effect of noise. According to the present embodiment, since the latch outputs are averaged, the effect of noise is reduced. When n (n&equals;3, 4, . . . ) sets of latch circuits are provided and the sum of latch outputs are divided by n in the averaging circuit <highlight><bold>15</bold></highlight>, precision becomes further higher. </paragraph>
<paragraph id="P-0082" lvl="0"><number>&lsqb;0082&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 7</cross-reference> is a timing chart of signals obtained during the above-described operation of the register <highlight><bold>702</bold></highlight> shown in <cross-reference target="DRAWINGS">FIG. 6</cross-reference> according to the present embodiment. </paragraph>
<paragraph id="P-0083" lvl="0"><number>&lsqb;0083&rsqb;</number> In <cross-reference target="DRAWINGS">FIG. 7</cross-reference>, the output <highlight><bold>113</bold></highlight> (D(t)) is formed of data Dp<highlight><bold>1</bold></highlight>, Dp<highlight><bold>2</bold></highlight>, . . . and Dp<highlight><bold>6</bold></highlight> at the back porch and the following data D<highlight><bold>0</bold></highlight>, D<highlight><bold>1</bold></highlight>, . . . , Dk, . . . . In D(t), the data pieces Dp<highlight><bold>1</bold></highlight> and Dp<highlight><bold>2</bold></highlight> at the back porch are latched by the register pulse RGP, which has a pulse width equal to two data pieces, in the latch <highlight><bold>1</bold></highlight>, and the data piece Dp<highlight><bold>1</bold></highlight> is again latched in the latch <highlight><bold>2</bold></highlight>. The data pieces Dp<highlight><bold>1</bold></highlight> and Dp<highlight><bold>2</bold></highlight> are averaged to obtain a register output <highlight><bold>705</bold></highlight>. Then, a subtracter <highlight><bold>802</bold></highlight> obtains a shift <highlight><bold>806</bold></highlight> (Dp&minus;Dref). By processing in a subtracter <highlight><bold>803</bold></highlight> and an overflow limiter circuit <highlight><bold>807</bold></highlight>, (Dp<highlight><bold>1</bold></highlight>&plus;Dp<highlight><bold>2</bold></highlight>)/2 Dref, DA<highlight><bold>0</bold></highlight>, DA<highlight><bold>1</bold></highlight>, DAk, . . . are output as Dout. </paragraph>
<paragraph id="P-0084" lvl="0"><number>&lsqb;0084&rsqb;</number> A third embodiment of the present invention will be described next. </paragraph>
<paragraph id="P-0085" lvl="0"><number>&lsqb;0085&rsqb;</number> The third embodiment relates to a circuit structure having a white balance adjustment function, which is provided for the circuits for the Pb signal and for the Pr signal, shown in <cross-reference target="DRAWINGS">FIG. 1</cross-reference>. </paragraph>
<paragraph id="P-0086" lvl="0"><number>&lsqb;0086&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 8</cross-reference> is a view showing a case in which the circuit structure according to the present embodiment is provided for the circuit for the Pb signal, and the same symbols as those used in <cross-reference target="DRAWINGS">FIG. 1</cross-reference> are assigned to the portions corresponding to those shown in <cross-reference target="DRAWINGS">FIG. 1</cross-reference>. </paragraph>
<paragraph id="P-0087" lvl="0"><number>&lsqb;0087&rsqb;</number> In <cross-reference target="DRAWINGS">FIG. 8, a</cross-reference> clamp circuit <highlight><bold>105</bold></highlight>, a quantization circuit <highlight><bold>106</bold></highlight>, a calculation circuit <highlight><bold>707</bold></highlight>, and a register <highlight><bold>709</bold></highlight> are provided in the same way as in <cross-reference target="DRAWINGS">FIG. 1</cross-reference>. The output <highlight><bold>115</bold></highlight> (D(t)) of the quantization circuit <highlight><bold>106</bold></highlight> is input to the register <highlight><bold>709</bold></highlight> as well as to the calculation circuit <highlight><bold>707</bold></highlight>. </paragraph>
<paragraph id="P-0088" lvl="0"><number>&lsqb;0088&rsqb;</number> In the calculation circuit <highlight><bold>707</bold></highlight>, the output <highlight><bold>115</bold></highlight> is input to a subtracter <highlight><bold>903</bold></highlight> through contacts &ldquo;a&rdquo; and &ldquo;c&rdquo; of a switch <highlight><bold>909</bold></highlight>. The output <highlight><bold>711</bold></highlight> (Dp) of the register <highlight><bold>709</bold></highlight> is input to a subtracter <highlight><bold>902</bold></highlight> as well as through contacts &ldquo;b&rdquo; and &ldquo;c&rdquo; of the switch <highlight><bold>909</bold></highlight> to the subtracter <highlight><bold>903</bold></highlight>. The switch <highlight><bold>909</bold></highlight> is switched by a switch control signal BW to the contact &ldquo;b&rdquo; side when white balance adjustment is to be performed. </paragraph>
<paragraph id="P-0089" lvl="0"><number>&lsqb;0089&rsqb;</number> A predetermined-value generation circuit <highlight><bold>901</bold></highlight> generates a predetermined value Dref of 127. This value is subtracted from the output <highlight><bold>711</bold></highlight> in the subtracter <highlight><bold>902</bold></highlight>. A subtraction output <highlight><bold>906</bold></highlight> is subtracted from the output of the switch <highlight><bold>909</bold></highlight> in the subtracter <highlight><bold>903</bold></highlight>. </paragraph>
<paragraph id="P-0090" lvl="0"><number>&lsqb;0090&rsqb;</number> Circuits and signals <highlight><bold>901</bold></highlight>, <highlight><bold>902</bold></highlight>, <highlight><bold>903</bold></highlight>, <highlight><bold>904</bold></highlight>, <highlight><bold>905</bold></highlight>, <highlight><bold>906</bold></highlight>, <highlight><bold>907</bold></highlight>, and <highlight><bold>908</bold></highlight> shown in <cross-reference target="DRAWINGS">FIG. 8</cross-reference> correspond to those <highlight><bold>801</bold></highlight>, <highlight><bold>802</bold></highlight>, <highlight><bold>803</bold></highlight>, <highlight><bold>804</bold></highlight>, <highlight><bold>805</bold></highlight>, <highlight><bold>806</bold></highlight>, <highlight><bold>807</bold></highlight>, and <highlight><bold>808</bold></highlight> shown in <cross-reference target="DRAWINGS">FIG. 2</cross-reference>. </paragraph>
<paragraph id="P-0091" lvl="0"><number>&lsqb;0091&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 8</cross-reference> shows the structure of the calculation circuit <highlight><bold>707</bold></highlight> for the Pb signal. A calculation circuit <highlight><bold>708</bold></highlight> for the Pr signal has the same structure as the calculation circuit <highlight><bold>707</bold></highlight>. </paragraph>
<paragraph id="P-0092" lvl="0"><number>&lsqb;0092&rsqb;</number> According to the above structure, the switch <highlight><bold>909</bold></highlight> is switched to the contact &ldquo;a&rdquo; side in a normal operation, the same operation as when the Y signal is processed, described before by referring to <cross-reference target="DRAWINGS">FIG. 2</cross-reference>, is performed, and the output <highlight><bold>115</bold></highlight> of the quantization circuit <highlight><bold>106</bold></highlight> is compensated for the shift. </paragraph>
<paragraph id="P-0093" lvl="0"><number>&lsqb;0093&rsqb;</number> When white balance adjustment is performed, the switch <highlight><bold>909</bold></highlight> is switched to the contact &ldquo;b&rdquo; side, and the output <highlight><bold>711</bold></highlight> of the register <highlight><bold>709</bold></highlight> is input to the subtracter <highlight><bold>903</bold></highlight> through the switch <highlight><bold>909</bold></highlight>. As a result, the calculation circuit <highlight><bold>707</bold></highlight> performs the following calculation, applies overflow processing to Dref, and the result is output as Dout. </paragraph>
<paragraph lvl="0"><in-line-formula>Dp&minus;(Dp&minus;Dref)&equals;Dref </in-line-formula></paragraph>
<paragraph id="P-0094" lvl="0"><number>&lsqb;0094&rsqb;</number> Also in the calculation circuit <highlight><bold>708</bold></highlight> for the Pr signal, having the same structure, overflow processing is applied to Dref and the result is output as Dout. Overflow processing is applied to the Y signal for which the shift has been compensated for, and the result is output as Dout in the calculation circuit <highlight><bold>701</bold></highlight> for the Y signal, shown in <cross-reference target="DRAWINGS">FIG. 2</cross-reference>. </paragraph>
<paragraph id="P-0095" lvl="0"><number>&lsqb;0095&rsqb;</number> Therefore, the compensated Y signal and the Pb and Pr signals having Dref as the reference value of the pedestal level of a color signal are used to perform an appropriate white balance adjustment. </paragraph>
<paragraph id="P-0096" lvl="0"><number>&lsqb;0096&rsqb;</number> A fourth embodiment of the present invention will be described next. </paragraph>
<paragraph id="P-0097" lvl="0"><number>&lsqb;0097&rsqb;</number> The fourth embodiment is another embodiment for providing white balance adjustment. </paragraph>
<paragraph id="P-0098" lvl="0"><number>&lsqb;0098&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 9</cross-reference> is a view showing the structure of a calculation circuit <highlight><bold>707</bold></highlight> according to the present embodiment. The same symbols as those used in <cross-reference target="DRAWINGS">FIG. 8</cross-reference> are assigned to the portions corresponding to those shown in <cross-reference target="DRAWINGS">FIG. 8</cross-reference>, and descriptions thereof will be omitted. </paragraph>
<paragraph id="P-0099" lvl="0"><number>&lsqb;0099&rsqb;</number> In the calculation circuit <highlight><bold>707</bold></highlight> shown in <cross-reference target="DRAWINGS">FIG. 9, a</cross-reference> switch <highlight><bold>909</bold></highlight> is provided after a subtracter <highlight><bold>903</bold></highlight>, and a predetermined value Dref is sent to a contact &ldquo;b.&rdquo; With this structure, Dref can be taken out directly during white balance adjustment by switching the switch <highlight><bold>909</bold></highlight> to the contact &ldquo;b&rdquo; side. </paragraph>
<paragraph id="P-0100" lvl="0"><number>&lsqb;0100&rsqb;</number> A calculation circuit <highlight><bold>708</bold></highlight> for the Pr signal has the same structure. </paragraph>
<paragraph id="P-0101" lvl="0"><number>&lsqb;0101&rsqb;</number> According to the above-described structure, the compensated Y signal and the Pb and Pr signals having Dref as the reference value of the pedestal level are used to provide a white balance adjustment function, in the same way as in the third embodiment. </paragraph>
<paragraph id="P-0102" lvl="0"><number>&lsqb;0102&rsqb;</number> As described above, according to the present invention, the following advantages are obtained. </paragraph>
<paragraph id="P-0103" lvl="0"><number>&lsqb;0103&rsqb;</number> According to the present invention, a shift of the pedestal level, generated when digital conversion means converts an analog image signal to a digital image signal after the pedestal level of the analog image signal is clamped by clamp means, and a shift caused by a variation in precision of the digital conversion means can be compensated for. Therefore, it is not necessary to use clamp means and digital conversion means having especially high precision, and an image-signal processing apparatus can be implemented at a low cost. </paragraph>
<paragraph id="P-0104" lvl="0"><number>&lsqb;0104&rsqb;</number> Further, according to the present invention, since the pedestal level read from a digital image signal and a predetermined value are used for calculation, a digital image signal having a predetermined pedestal level can be obtained, for which the above shifts have been compensated for. </paragraph>
<paragraph id="P-0105" lvl="0"><number>&lsqb;0105&rsqb;</number> Further, according to the present invention, since switching means is switched to output the predetermined value, a precise white balance adjustment function is implemented by the use of the predetermined value. </paragraph>
<paragraph id="P-0106" lvl="0"><number>&lsqb;0106&rsqb;</number> Further, according to the present invention, since overflow processing for limiting the calculation output of calculation means to a predetermined range is performed, the dynamic range of an output digital image signal is always within the predetermined range. </paragraph>
<paragraph id="P-0107" lvl="0"><number>&lsqb;0107&rsqb;</number> Further, according to the present invention, since register means is formed of a plurality of latch means, and the average of latch outputs is obtained, the effect of noise generated when the register means reads a digital image signal is reduced. </paragraph>
<paragraph id="P-0108" lvl="0"><number>&lsqb;0108&rsqb;</number> Further, an image display apparatus according to the present invention includes any of the above-described image-signal processing apparatuses, the corresponding advantage is obtained, and a successful image having no color shift can be displayed. </paragraph>
</section>
</detailed-description>
</subdoc-description>
<subdoc-claims>
<heading lvl="1">What is claimed is: </heading>
<claim id="CLM-00001">
<claim-text><highlight><bold>1</bold></highlight>. An image-signal processing apparatus comprising: 
<claim-text>clamp means for clamping a level of an input image signal to a value close to a predetermined value; </claim-text>
<claim-text>digital conversion means for sampling a clamped image signal and for converting it to a digital image signal; and </claim-text>
<claim-text>calculation means for obtaining the difference between the pedestal level of the digital image signal and the predetermined value and for compensating the digital image signal according to the difference. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00002">
<claim-text><highlight><bold>2</bold></highlight>. An image-signal processing apparatus according to <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein the calculation means comprises: 
<claim-text>register means for storing the pedestal level from the output of the digital conversion means; </claim-text>
<claim-text>first calculation means for performing addition or subtraction between the pedestal level stored in the register means and the predetermined value; and </claim-text>
<claim-text>second calculation means for performing addition or subtraction between the output of the digital conversion means and the output of the first calculation means. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00003">
<claim-text><highlight><bold>3</bold></highlight>. An image-signal processing apparatus according to <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein the calculation means comprises: 
<claim-text>register means for storing the pedestal level from the output of the digital conversion means; </claim-text>
<claim-text>first calculation means for performing addition or subtraction between the pedestal level stored in the register means and the predetermined value; </claim-text>
<claim-text>switching means for switching between the pedestal level stored in the register means and the output of the digital conversion means, and for outputting switched data; and </claim-text>
<claim-text>second calculation means for performing addition or subtraction between the output of the switching means and the output of the first calculation means. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00004">
<claim-text><highlight><bold>4</bold></highlight>. An image-signal processing apparatus according to <dependent-claim-reference depends_on="CLM-00002">claim 2</dependent-claim-reference>, wherein overflow processing means for limiting the output of the second calculation means to a predetermined range is provided. </claim-text>
</claim>
<claim id="CLM-00005">
<claim-text><highlight><bold>5</bold></highlight>. An image-signal processing apparatus according to <dependent-claim-reference depends_on="CLM-00002">claim 2</dependent-claim-reference>, wherein the register means comprises: 
<claim-text>n (n&equals;2, 3, . . . ) latch means connected in series; and </claim-text>
<claim-text>averaging means for adding the output of the latch means and for dividing the sum by n. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00006">
<claim-text><highlight><bold>6</bold></highlight>. An image-signal processing apparatus according to <dependent-claim-reference depends_on="CLM-00002">claim 2</dependent-claim-reference>, wherein second switching means for switching between the output of the second calculation means and the predetermined value used in calculation by the first calculation means and for outputting switched data is provided after the second calculation means. </claim-text>
</claim>
<claim id="CLM-00007">
<claim-text><highlight><bold>7</bold></highlight>. An image display apparatus comprising an image-signal processing apparatus according to <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>. </claim-text>
</claim>
<claim id="CLM-00008">
<claim-text><highlight><bold>8</bold></highlight>. An image-signal processing apparatus according to <dependent-claim-reference depends_on="CLM-00003">claim 3</dependent-claim-reference>, wherein overflow processing means for limiting the output of the second calculation means to a predetermined range is provided. </claim-text>
</claim>
<claim id="CLM-00009">
<claim-text><highlight><bold>9</bold></highlight>. An image-signal processing apparatus according to <dependent-claim-reference depends_on="CLM-00003">claim 3</dependent-claim-reference>, wherein the register means comprises: 
<claim-text>n (n&equals;2, 3, . . . ) latch means connected in series; and </claim-text>
<claim-text>averaging means for adding the output of the latch means and for dividing the sum by n.</claim-text>
</claim-text>
</claim>
</subdoc-claims>
<subdoc-drawings id="DRAWINGS">
<heading lvl="0" align="CENTER">Drawings</heading>
<representative-figure>1</representative-figure>
<figure id="figure-D00000">
<image id="EMI-D00000" file="US20030001971A1-20030102-D00000.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00001">
<image id="EMI-D00001" file="US20030001971A1-20030102-D00001.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00002">
<image id="EMI-D00002" file="US20030001971A1-20030102-D00002.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00003">
<image id="EMI-D00003" file="US20030001971A1-20030102-D00003.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00004">
<image id="EMI-D00004" file="US20030001971A1-20030102-D00004.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00005">
<image id="EMI-D00005" file="US20030001971A1-20030102-D00005.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00006">
<image id="EMI-D00006" file="US20030001971A1-20030102-D00006.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00007">
<image id="EMI-D00007" file="US20030001971A1-20030102-D00007.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00008">
<image id="EMI-D00008" file="US20030001971A1-20030102-D00008.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00009">
<image id="EMI-D00009" file="US20030001971A1-20030102-D00009.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00010">
<image id="EMI-D00010" file="US20030001971A1-20030102-D00010.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00011">
<image id="EMI-D00011" file="US20030001971A1-20030102-D00011.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00012">
<image id="EMI-D00012" file="US20030001971A1-20030102-D00012.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00013">
<image id="EMI-D00013" file="US20030001971A1-20030102-D00013.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00014">
<image id="EMI-D00014" file="US20030001971A1-20030102-D00014.TIF" imf="TIFF" ti="DR"/>
</figure>
</subdoc-drawings>
</patent-application-publication>
