<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE patent-application-publication SYSTEM "pap-v16-2002-01-01.dtd" [
<!ENTITY US20030003912A1-20030102-D00000.TIF SYSTEM "US20030003912A1-20030102-D00000.TIF" NDATA TIF>
<!ENTITY US20030003912A1-20030102-D00001.TIF SYSTEM "US20030003912A1-20030102-D00001.TIF" NDATA TIF>
<!ENTITY US20030003912A1-20030102-D00002.TIF SYSTEM "US20030003912A1-20030102-D00002.TIF" NDATA TIF>
<!ENTITY US20030003912A1-20030102-D00003.TIF SYSTEM "US20030003912A1-20030102-D00003.TIF" NDATA TIF>
<!ENTITY US20030003912A1-20030102-D00004.TIF SYSTEM "US20030003912A1-20030102-D00004.TIF" NDATA TIF>
<!ENTITY US20030003912A1-20030102-D00005.TIF SYSTEM "US20030003912A1-20030102-D00005.TIF" NDATA TIF>
<!ENTITY US20030003912A1-20030102-D00006.TIF SYSTEM "US20030003912A1-20030102-D00006.TIF" NDATA TIF>
<!ENTITY US20030003912A1-20030102-D00007.TIF SYSTEM "US20030003912A1-20030102-D00007.TIF" NDATA TIF>
<!ENTITY US20030003912A1-20030102-D00008.TIF SYSTEM "US20030003912A1-20030102-D00008.TIF" NDATA TIF>
<!ENTITY US20030003912A1-20030102-D00009.TIF SYSTEM "US20030003912A1-20030102-D00009.TIF" NDATA TIF>
<!ENTITY US20030003912A1-20030102-D00010.TIF SYSTEM "US20030003912A1-20030102-D00010.TIF" NDATA TIF>
<!ENTITY US20030003912A1-20030102-D00011.TIF SYSTEM "US20030003912A1-20030102-D00011.TIF" NDATA TIF>
<!ENTITY US20030003912A1-20030102-D00012.TIF SYSTEM "US20030003912A1-20030102-D00012.TIF" NDATA TIF>
]>
<patent-application-publication>
<subdoc-bibliographic-information>
<document-id>
<doc-number>20030003912</doc-number>
<kind-code>A1</kind-code>
<document-date>20030102</document-date>
</document-id>
<publication-filing-type>new</publication-filing-type>
<domestic-filing-data>
<application-number>
<doc-number>10135353</doc-number>
</application-number>
<application-number-series-code>10</application-number-series-code>
<filing-date>20020430</filing-date>
</domestic-filing-data>
<foreign-priority-data>
<priority-application-number>
<doc-number>01201614.3</doc-number>
</priority-application-number>
<filing-date>20010501</filing-date>
<country-code>EP</country-code>
</foreign-priority-data>
<foreign-priority-data>
<priority-application-number>
<doc-number>01201698.6</doc-number>
</priority-application-number>
<filing-date>20010509</filing-date>
<country-code>EP</country-code>
</foreign-priority-data>
<foreign-priority-data>
<priority-application-number>
<doc-number>02075082.4</doc-number>
</priority-application-number>
<filing-date>20020109</filing-date>
<country-code>EP</country-code>
</foreign-priority-data>
<technical-information>
<classification-ipc>
<classification-ipc-primary>
<ipc>H04Q007/20</ipc>
</classification-ipc-primary>
<classification-ipc-edition>07</classification-ipc-edition>
</classification-ipc>
<classification-us>
<classification-us-primary>
<uspc>
<class>455</class>
<subclass>436000</subclass>
</uspc>
</classification-us-primary>
</classification-us>
<title-of-invention>Radio communication arrangements</title-of-invention>
</technical-information>
<inventors>
<first-named-inventor>
<name>
<given-name>Diego</given-name>
<family-name>Melpignano</family-name>
</name>
<residence>
<residence-non-us>
<city>Monza</city>
<country-code>IT</country-code>
</residence-non-us>
</residence>
<authority-applicant>INV</authority-applicant>
</first-named-inventor>
<inventor>
<name>
<given-name>Francesco</given-name>
<family-name>Gallo</family-name>
</name>
<residence>
<residence-non-us>
<city>Caneva (PN)</city>
<country-code>IT</country-code>
</residence-non-us>
</residence>
<authority-applicant>INV</authority-applicant>
</inventor>
</inventors>
<correspondence-address>
<name-1>U.S. Philips Corporation</name-1>
<name-2></name-2>
<address>
<address-1>580 White Plains Road</address-1>
<city>Tarrytown</city>
<state>NY</state>
<postalcode>10591</postalcode>
<country>
<country-code>US</country-code>
</country>
</address>
</correspondence-address>
</subdoc-bibliographic-information>
<subdoc-abstract>
<paragraph id="A-0001" lvl="0">An arrangement is disclosed for performing a handoff of a slave unit (MT) from a currently wireless connected first master unit (AP<highlight><subscript>1</subscript></highlight>) of a shared resource network to a further master unit (AP<highlight><subscript>2</subscript></highlight>) of said shared resource network, the arrangement including: </paragraph>
<paragraph id="A-0002" lvl="0">a) holding in said first master unit information about the topology of said shared resource network; and </paragraph>
<paragraph id="A-0003" lvl="0">b) activating during a said handoff a paging procedure in one or more further master units (AP<highlight><subscript>2-4</subscript></highlight>) based on said topology, in which paging procedure the or each further master unit pages said slave unit. </paragraph>
</subdoc-abstract>
<subdoc-description>
<summary-of-invention>
<paragraph id="P-0001" lvl="0"><number>&lsqb;0001&rsqb;</number> The present invention relates to radio communications arrangements and in particular to a handoff procedure for handing over a slave unit from one master unit to another master unit in a communications network such as a local area network (LAN), as might be useful for example in handing over mobile terminals between access points in an uncoordinated frequency hopping wireless local area network. The present invention also provides a technique for deriving and distributing information about network topology in such an arrangement and provides communication units for use in the arrangement. </paragraph>
<paragraph id="P-0002" lvl="0"><number>&lsqb;0002&rsqb;</number> A current implementation of the above type in the form of a short range wireless based local area network (LAN) is known in the art as &ldquo;Bluetooth&rdquo; (&trade;) communications, which is controlled by the Bluetooth standard. A fall specification for Bluetooth communications can be found through the Bluetooth Special Interests Group (SIG), whose web site can be found at &ldquo;www.bluetooth.com&rdquo; along with the current standard and related information. </paragraph>
<paragraph id="P-0003" lvl="0"><number>&lsqb;0003&rsqb;</number> A useful discussion of Bluetooth communications can be found in text book form in &ldquo;Bluetooth, Connect Without Wires&rdquo; by Jennifer Bray and Charles F. Sturman, published by Prentice Hall PTR under ISBN 0-13-089840-6. </paragraph>
<paragraph id="P-0004" lvl="0"><number>&lsqb;0004&rsqb;</number> Further prior art can be found in, for example, WO 01/20940, U.S. Pat. No. 5,940,431 and in US published applications 2001/0005368A1 and 2001/0033601A1, in which some aspects of the current state of the art in this field are also discussed. </paragraph>
<paragraph id="P-0005" lvl="0"><number>&lsqb;0005&rsqb;</number> The reader is referred to the above mentioned sources for general Bluetooth background information and also, for example, for clarification of terms of art used herein and not specifically covered by the abbreviations defined below. </paragraph>
<paragraph id="P-0006" lvl="0"><number>&lsqb;0006&rsqb;</number> Enabling hand-over of slave units between master units in a wireless LAN, based for example on Bluetooth techniques, is a difficult task. The time taken to establish new connections can be quite long enough for a mobile terminal (MT) acting as a slave unit to have moved out of range of its current master unit. The master unit is the mobile terminal&apos;s access point (AP) to the Bluetooth LAN and therefore communication may be lost. </paragraph>
<paragraph id="P-0007" lvl="0"><number>&lsqb;0007&rsqb;</number> When the network of access points is large, layer-3 mobility protocols help routing packets from the gateway/host (H) to the access point/Bluetooth module to which the target mobile terminal is attached. Link layer handoffs/hand-overs and network layer mobility protocols, however, must be properly synchronized to optimize performance and this may be compromised if long periods are taken to establish connections when a mobile terminal is moving between access points. </paragraph>
<paragraph id="P-0008" lvl="0"><number>&lsqb;0008&rsqb;</number> The connection establishment phase in many current arrangements is used each time a mobile terminal attached to a LAN by means of an access point moves towards an area covered by another access point with better signal quality. One such arrangement is disclosed in U.S. Pat. No. 5,448,569, in which a mobile station determines that the quality of transmission between itself and a current base station has degraded below a predetermined performance level. The mobile station listens in turn to each of successive frequency channels until it senses a transmission from a suitable base station. This means that the mobile station is forced into the potentially time consuming task of monitoring numerous channels in the radio environment which are at differing frequencies, so as to identify candidates for its next base station. </paragraph>
<paragraph id="P-0009" lvl="0"><number>&lsqb;0009&rsqb;</number> In WO 00/62438, a mobile terminal determines information pertaining to a set of base stations that are within a geographical region defined by the location of the mobile terminal. The mobile terminal supplies to base stations in the set information about each other, such as for example clock offsets between the base stations. The base stations accumulate information about each other and supply this to the mobile terminal to help it establish communications with base stations it has not yet encountered. During a handoff, the mobile terminal listens for beacons from the base stations and determines which one or more are in range. It then selects for connection the one and which is closest based on a received signal strength indicator (RSSI). In this arrangement, the mobile terminal uses the information it has about further bases stations in order to page them in a conventional manner but using more detailed addressing so as to try and reduce the time taken to establish a connection. </paragraph>
<paragraph id="P-0010" lvl="0"><number>&lsqb;0010&rsqb;</number> It is an object of the present invention to provide an improved radio communications arrangement. It is a further object of the present invention to provide an improved radio communications arrangement for handing over slave units between master units in a radio communications network comprising for example a shared resource network and especially a local area network. It is a further object of the present invention to provide improved communications units and methods for use therewith. </paragraph>
<paragraph id="P-0011" lvl="0"><number>&lsqb;0011&rsqb;</number> The present invention relates to radio communications using mobile radio communications units and to connections used to group them into the network. Accordingly the present invention provides a method of performing a handoff of a currently wireless connected slave unit from a first master unit of a shared resource network to a further master unit of said network, the method including: </paragraph>
<paragraph id="P-0012" lvl="0"><number>&lsqb;0012&rsqb;</number> a) holding in said first master unit information about the topology of said shared resource network; and </paragraph>
<paragraph id="P-0013" lvl="0"><number>&lsqb;0013&rsqb;</number> b) activating during a said handoff a paging procedure in one or more further master units based on said topology, in which paging procedure the or each further master unit pages said slave unit. The shared resources network may be a local area network a wide area network or similar and may, for example, comprise a Bluetooth local area network in which access points are configured as the master units and mobile terminals act as the slave units. </paragraph>
<paragraph id="P-0014" lvl="0"><number>&lsqb;0014&rsqb;</number> The method may include determining in which of said master units to activate a said paging procedure on the basis of their topological proximity to said first master unit. The method may include activating said paging procedure only in further master units neighboring said first master unit, so as for example to reduce the likelihood of interference from further master units not involved in the handoff in question. The method may include said first master unit supplying to the or each further/neighboring master unit during a said handoff, paging information relating to said slave unit. This information may assist the or each neighboring master unit in paging said slave unit, such as for example an address of said slave unit. The method may include using said network topology information to select neighboring master units for the exchange of clock offset information. The method may include deriving said clock offset or offsets by exchanging time-stamped information between master units. The method may include exchanging messages between said master units through a substantially fixed network connecting them, for example an Ethernet or through a wireless network. The method may include passing in said messages said network topology information. </paragraph>
<paragraph id="P-0015" lvl="0"><number>&lsqb;0015&rsqb;</number> The method may include determining said network topology information substantially upon initialization of said shared resources network. The method may include determining said network topology information after initialization of said local area network, so as for example to determine which of the neighboring access points should be contacted to exchange clock offset information in order to take account of clock drifts which occurs during network operation. </paragraph>
<paragraph id="P-0016" lvl="0"><number>&lsqb;0016&rsqb;</number> The method may include sharing clock offset information by exporting the value of a master unit native clock to a master unit host, for example by means of a vendor specific Host Controller Interface command or by periodically sending at least one said master unit into an inquiry mode in which it communicates with other master units and uses their responses to update its estimate of their respective clock offsets. </paragraph>
<paragraph id="P-0017" lvl="0"><number>&lsqb;0017&rsqb;</number> The method may include said slave unit triggering a handoff procedure by sending a handoff request to its currently connected master unit and preferably substantially immediately entering into a continuous page scan. </paragraph>
<paragraph id="P-0018" lvl="0"><number>&lsqb;0018&rsqb;</number> The method may include said currently connected master unit forwarding said handoff request to one or more substantially neighboring said master units, preferably including a network address of said slave unit. </paragraph>
<paragraph id="P-0019" lvl="0"><number>&lsqb;0019&rsqb;</number> The method may include performing said handoff procedure as a hard hand-over in which resources allocated by said currently connected master unit (AP<highlight><subscript>1</subscript></highlight>) to connection with said slave unit MT are not torn down or released until a connection is at least under establishment between said slave unit and a next or target master unit. In this manner, if an attempted handoff does not succeed, it may still be possible for the slave unit to return to its original connection. The original connection may for example be broken on the expiration of a preset timeout or on receipt of an acknowledgment message received from said next master unit. The method may include triggering said handoff procedure by said slave unit indicating to said currently connected master unit a degradation in radio link quality therebetween. </paragraph>
<paragraph id="P-0020" lvl="0"><number>&lsqb;0020&rsqb;</number> The method may include triggering said handoff procedure from a currently connected said master unit, for example after a slave unit currently connected thereto indicates to said master unit a degradation in radio link quality therebetween or in the event that said slave unit does not have the capability to measure said link quality itself and said link quality is monitored by said currently connected master unit. </paragraph>
<paragraph id="P-0021" lvl="0"><number>&lsqb;0021&rsqb;</number> The method may include, on receipt of a message indicative of connection of said slave unit to a next said master unit, canceling an attempt by a further said master unit at paging or connecting with said slave unit. </paragraph>
<paragraph id="P-0022" lvl="0"><number>&lsqb;0022&rsqb;</number> The method may include operating said master units in such a manner that there is substantially no overlap in coverage area between any further master units neighboring said currently connected master unit, whereby said slave unit receives identity packets from preferably only its closest further master unit. </paragraph>
<paragraph id="P-0023" lvl="0"><number>&lsqb;0023&rsqb;</number> The method may include using said network topology information to configure one or more of a group of master units with information about which of said master units are neighbors and/or what are their network/device addresses. The method may include determining said network topology information during at least one of installation of said shared resource network and in the event that a said master unit is moved. The method may include holding said network topology information in the form of a matrix indicating which said master units neighbor which others in at least part of the coverage of said shared resource network, and preferably storing a said matrix locally to one or more of said master units. </paragraph>
<paragraph id="P-0024" lvl="0"><number>&lsqb;0024&rsqb;</number> The method may include gathering said network topology information in an automatic manner. The method may include gathering said network topology information using a mobile probe adapted to probe said master units by activating an inquiry procedure in different positions within the coverage of said local area network and preferably also adapted to make a record of the response or responses from said master units to said inquiries. The method may include gathering said information in steps by performing a succession of probe inquiries, using for example an iterative process such that the accuracy of said network topology information resulting from the probing increases with an increasing number of probing inquiries being performed. </paragraph>
<paragraph id="P-0025" lvl="0"><number>&lsqb;0025&rsqb;</number> Said probe may comprise a mobile communications unit, said record preferably including a Medium Access Control address of the or each responding master unit and said record being developed for example in the form of a matrix. The method may include uploading said gathered information to a host controller which is adapted to control said master units. The method may include uploading said gathered information through a said probed master unit. </paragraph>
<paragraph id="P-0026" lvl="0"><number>&lsqb;0026&rsqb;</number> The present invention also provides a radio communications arrangement for performing a handoff of a slave unit from a currently wireless connected first master unit of a shared resource network to a further master unit of said shared resource network, said shared resource network being adapted to hold in said first master unit information about the topology of said network and further adapted to activate during a said handoff a paging procedure in one or more further master units based on said topology, in which paging procedure one or more said further master units page said slave unit. </paragraph>
<paragraph id="P-0027" lvl="0"><number>&lsqb;0027&rsqb;</number> The arrangement may be adapted to determine in which of said master units to activate a said paging procedure on the basis of their topological proximity to said first master unit. Said paging procedure may be activated only in further master units neighboring said first master unit. Said first master unit may supply to the or each further/neighboring master unit during a said handoff, paging information relating to said slave unit, which information assists the or each neighboring master unit in paging said slave unit, such as for example an address of said slave unit. Said network topology information may be used in determining which one or more of said neighboring master units should be contacted in order to derive clock offset information. Said clock offset or offsets may be derived by exchanging time-stamped information between master units. Messages may be exchanged between said master units through a substantially fixed network connecting them, for example an Ethernet or through a wireless network and said network topology information may be passed in said messages. </paragraph>
<paragraph id="P-0028" lvl="0"><number>&lsqb;0028&rsqb;</number> Said network topology information may be derived substantially upon initialization of said shared resources network. Said network topology information may be derived after initialization of said local area network, so as, for example, to update initial records in order to take account of, for example, master unit movement during network operation. </paragraph>
<paragraph id="P-0029" lvl="0"><number>&lsqb;0029&rsqb;</number> Said network topology information may be derived by exporting the value of a master unit native clock to a master unit host, for example by means of a vendor specific Host Controller Interface command or by periodically sending at least one said master unit into an inquiry mode in which it communicates with other master units and uses their responses to update its estimate of their respective clock offsets. </paragraph>
<paragraph id="P-0030" lvl="0"><number>&lsqb;0030&rsqb;</number> Said slave unit may trigger a handoff procedure by sending a handoff request to its currently connected master unit and preferably substantially immediately entering into a continuous page scan. Said currently connected master unit may forward said handoff request to one or more substantially neighboring said master units, preferably including a network address of said slave unit. </paragraph>
<paragraph id="P-0031" lvl="0"><number>&lsqb;0031&rsqb;</number> Said handoff procedure may be performed as a hard hand-over in which resources allocated by said currently connected master unit (AP<highlight><subscript>1</subscript></highlight>) to connection with said slave unit MT are not torn down or released until a connection is at least under establishment between said slave unit and a next or target master unit. In this manner, if an attempted handoff does not succeed, it may still be possible for the slave unit to return to its original connection. The original connection may for example be broken on the expiration of a preset timeout or on receipt of an acknowledgment message received from said next master unit. Said handoff procedure may be triggered by said slave unit indicating to said currently connected master unit a degradation in radio link quality therebetween. Said handoff procedure may be triggered from a currently connected said master unit, for example after a slave unit currently connected thereto indicates to said master unit a degradation in radio link quality therebetween or in the event that said slave unit does not have the capability to measure said link quality itself and said link quality is monitored by said currently connected master unit. </paragraph>
<paragraph id="P-0032" lvl="0"><number>&lsqb;0032&rsqb;</number> On receipt of a message indicative of connection of said slave unit to a next said master unit, an attempt by a further said master unit at paging or connecting with said slave unit may be canceled. </paragraph>
<paragraph id="P-0033" lvl="0"><number>&lsqb;0033&rsqb;</number> Said master units may be operated in such a manner that there is substantially no overlap in coverage area between any further master units neighboring said currently connected master unit, whereby said slave unit receives identity packets from preferably only its closest further master unit. </paragraph>
<paragraph id="P-0034" lvl="0"><number>&lsqb;0034&rsqb;</number> Said network topology information may be used to configure one or more of a group of master units with information about which of said master units are neighbors and what are their network addresses, said network topology also possibly being used in obtaining clock offset information, e.g. from further master units so defined as neighbors. Said network topology information may be determined during at least one of installation of said shared resource network and in the event that a said master unit is moved. Said network topology information may be held in the form of a matrix indicating which said master units neighbor which others in at least part of the coverage of said shared resource network. Said matrix may preferably be stored locally to one or more of said master units. </paragraph>
<paragraph id="P-0035" lvl="0"><number>&lsqb;0035&rsqb;</number> Said network topology information may be gathered in an automatic manner and may be gathered through a mobile probe adapted to probe said master units by activating an inquiry procedure in different positions within the coverage of said local area network and preferably also adapted to make a record of the response or responses from said master units to said inquiries. Said information may be gathered in steps by performing a succession of probe inquiries, using for example an iterative process such that the accuracy of said network topology information resulting from the probing increases with an increasing number of probing inquiries being performed. </paragraph>
<paragraph id="P-0036" lvl="0"><number>&lsqb;0036&rsqb;</number> Said probe may comprise a mobile communications unit, said record preferably including a Medium Access Control address of the or each responding master unit and said record being developed for example in the form of a matrix. Said gathered information may be uploaded to a host controller which is adapted to control said master units and may be uploaded through a said probed master unit. </paragraph>
<paragraph id="P-0037" lvl="0"><number>&lsqb;0037&rsqb;</number> The present invention also provides a communications unit for use as a slave unit in a method according the invention or in a system according to the invention, said slave unit being adapted to send a handoff request to a master unit and to advertise in said handoff request a page scan time window. Said communications unit may comprise a mobile terminal of a Bluetooth local area network. Said communications unit may be adapted to enter into a substantially continuous page scan state during said advertised page scan window. Said communications unit may be adapted to select from a plurality of paging master units a particular said master unit for connection therewith. </paragraph>
<paragraph id="P-0038" lvl="0"><number>&lsqb;0038&rsqb;</number> The present invention also provides a communications unit for use as a master unit in a method according to the invention or in a system according to the invention, wherein said master unit is adapted to page a slave unit during a handoff procedure. Said communications unit may comprise an access point of a Bluetooth local area network. </paragraph>
<paragraph id="P-0039" lvl="0"><number>&lsqb;0039&rsqb;</number> Said communication unit may hold information about the topology of a local area network of which in use it forms a part, for example which master units are neighbors and what are their addresses, said network topology also possibly being used in obtaining clock offset information, e.g. from further master units so defined as neighbors. </paragraph>
<paragraph id="P-0040" lvl="0"><number>&lsqb;0040&rsqb;</number> Said communications unit may be adapted to accept handoff requests from slave units and preferably also adapted to acknowledge said handoff requests. Said communications unit may also be adapted to forward a received said handoff request to at least one neighboring master unit, preferably using a shared resource network, for example a fixed network such as an Ethernet local area network (LAN) or a wireless LAN. Said communications device may also be adapted to accept from a network a request to page at least one slave unit. </paragraph>
<paragraph id="P-0041" lvl="0"><number>&lsqb;0041&rsqb;</number> Said communications unit may be adapted to schedule paging processes used to attempt connection with a plurality of slave units. If a number of requests made from a plurality of slave units to said communications unit for connection exceeds the available capacity of said communications unit to finalize paging procedures before expiry of any one or more page scan windows of the requesting slave units, a signal indicative of congestion may be communicated to one or more further communications units acting as master units. </paragraph>
<paragraph id="P-0042" lvl="0"><number>&lsqb;0042&rsqb;</number> If said communications unit receives from a slave unit a handoff request which involves a master unit which is congested, said slave unit may be informed that it must wait for said handoff, by staying for example in a continuous page scan for an extended period. </paragraph>
<paragraph id="P-0043" lvl="0"><number>&lsqb;0043&rsqb;</number> Said communications unit may be adapted to stop paging a slave unit on or after a message is received indicative of a successful connection between a further communications unit acting as a master unit and said slave unit. </paragraph>
<paragraph id="P-0044" lvl="0"><number>&lsqb;0044&rsqb;</number> Said further communications unit may be adapted to send an acknowledgment message to at least one master unit indicative of successful paging of, and preferably also a successful connection to, a slave unit. </paragraph>
<paragraph id="P-0045" lvl="0"><number>&lsqb;0045&rsqb;</number> Said communications unit may be adapted to send and/or receive messages with further communications units acting as master units through a substantially fixed or a wireless network connection which connects together a plurality of communications units and preferably also an associated master unit host, such as for example through an Ethernet local area network. </paragraph>
<paragraph id="P-0046" lvl="0"><number>&lsqb;0046&rsqb;</number> Said communications unit may be adapted to hold said network topology information locally and preferably in the form of a matrix.</paragraph>
</summary-of-invention>
<brief-description-of-drawings>
<paragraph id="P-0047" lvl="0"><number>&lsqb;0047&rsqb;</number> The invention will now be described by way of example only and with reference to the accompanying drawings, in which: </paragraph>
<paragraph id="P-0048" lvl="0"><number>&lsqb;0048&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1</cross-reference> is a schematic diagram of part of a local area network which is adapted to operate in accordance with an embodiment of the present invention; </paragraph>
<paragraph id="P-0049" lvl="0"><number>&lsqb;0049&rsqb;</number> FIGS. <highlight><bold>2</bold></highlight> to <highlight><bold>5</bold></highlight> are sequence diagrams of aspects of a method according to the invention; </paragraph>
<paragraph id="P-0050" lvl="0"><number>&lsqb;0050&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 6</cross-reference> is a schematic diagram of a further example of the arrangement of <cross-reference target="DRAWINGS">FIG. 1</cross-reference>; </paragraph>
<paragraph id="P-0051" lvl="0"><number>&lsqb;0051&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 7</cross-reference> is a state machine in Harel notation for an access point of the examples of <cross-reference target="DRAWINGS">FIGS. 1 and 6</cross-reference>, the full notation for which is included in the Annex; </paragraph>
<paragraph id="P-0052" lvl="0"><number>&lsqb;0052&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 8</cross-reference> is a state machine in Harv notation for an access point of the examples of <cross-reference target="DRAWINGS">FIGS. 1 and 6</cross-reference>, the full notation for which is included in the Annex; </paragraph>
<paragraph id="P-0053" lvl="0"><number>&lsqb;0053&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 9</cross-reference> is a schematic diagram of a variation to the arrangement of <cross-reference target="DRAWINGS">FIG. 1</cross-reference>; </paragraph>
<paragraph id="P-0054" lvl="0"><number>&lsqb;0054&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 10</cross-reference> is a matrix of the topology of access points in <cross-reference target="DRAWINGS">FIG. 9</cross-reference>; </paragraph>
<paragraph id="P-0055" lvl="0"><number>&lsqb;0055&rsqb;</number> <cross-reference target="DRAWINGS">FIGS. 11</cross-reference><highlight><italic>a </italic></highlight>to <highlight><bold>11</bold></highlight><highlight><italic>d </italic></highlight>are schematic diagrams of a technique for gathering topological information about the arrangement of <cross-reference target="DRAWINGS">FIG. 9</cross-reference>; </paragraph>
<paragraph id="P-0056" lvl="0"><number>&lsqb;0056&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 12</cross-reference> is a table of the results of using the technique of <cross-reference target="DRAWINGS">FIGS. 11</cross-reference><highlight><italic>a </italic></highlight>to <highlight><bold>11</bold></highlight><highlight><italic>d; </italic></highlight>and </paragraph>
<paragraph id="P-0057" lvl="0"><number>&lsqb;0057&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 13</cross-reference> is a matrix of the results gathered in the table of <cross-reference target="DRAWINGS">FIG. 12</cross-reference>.</paragraph>
</brief-description-of-drawings>
<detailed-description>
<paragraph id="P-0058" lvl="0"><number>&lsqb;0058&rsqb;</number> The present invention will be described with reference to certain embodiments and drawings but the present invention is not limited thereto but only by the attached claims. Further, the present invention will be described mainly with reference to a local area network but is not limited thereto. The network may be any form of shared resource network (SRN), i.e. in an SRN hardware resources are shared, and each hardware network element can be accessed from any other network element. An SRN in accordance with the present invention is more-or-less synonymous with a CAN, LAN or WAN, but the term SRN will be used to indicate that the present invention is not limited to specific aspects of known CANs, WANs or LANs e.g. contention scheme or whether Ethernet, Token Ring or Wireless LAN. In particular, the present invention relates to a PAN&mdash;a personal area network, involving short range radio connection between mobile units and master units. Also the topology of the PAN, LAN or WAN is not considered a limit on the present invention, e.g. bus physical, star physical, distributed star, ring physical, bus logical, ring logical may all be used as appropriate. Various standards have been produced for LAN&apos;s, e.g. IEEE 802.3, IEEE 802.4, IEEE 802.5, ANSI X3T9.5 (FDDI, I and II) any of which may find advantageous use with the present invention. LAN and WAN design and construction are discussed in detail in, for example, &ldquo;Mastering Local Area Networks&rdquo;, by Christa Anderson and Mark Minasi, SYBEX Network Press, 1999 or &ldquo;Data Communications, Computer networks and Open Systems&rdquo;, by Fred Halsall, Addison-Wiley, 1996. Various types of wireless LAN have been standardized or are in general use, e.g. the standards IEEE 802.11, IEEE 802.11HR (Spread Spectrum)and systems based on DECT, Bluetooth, HIPERLAN, Diffuse or point-to-point infra- red. Wireless LAN&apos;s are discussed in detail in &ldquo;Wireless LAN&apos;s&rdquo; by Jim Geier, Macmillan Technical Publishing, 1999. </paragraph>
<paragraph id="P-0059" lvl="0"><number>&lsqb;0059&rsqb;</number> Referring to the figures and for the moment in particular to <cross-reference target="DRAWINGS">FIG. 1, a</cross-reference> wireless communications system is in the form of shared resource network <highlight><bold>10</bold></highlight>, in this case a Bluetooth local area network (BT LAN), and comprises a slave unit in the form of a mobile terminal MT and set of master units in the form of wireless access points AP<highlight><subscript>1-4 </subscript></highlight>connected together via the shared resource network <highlight><bold>10</bold></highlight>. The word &ldquo;connecting&rdquo; includes within its scope wireless connections such as found in a wireless LAN, e.g. a Hiperlan, infra-red connections and other diffuse or line-of sight connections, as well as wired LAN&apos;s e.g. optical fiber, twisted pair or coaxial cable networks. A mobile terminal may include any suitable device providing wireless communications and may include a mobile phone, a personal computer such as a laptop computer or a palm top computer, a personal digital assistant (PDA), etc. </paragraph>
<paragraph id="P-0060" lvl="0"><number>&lsqb;0060&rsqb;</number> All the embodiments of the present invention can include master and slave units which communicate in accordance with the Bluetooth protocol. The features of such a system may include one or more of: </paragraph>
<paragraph id="P-0061" lvl="2"><number>&lsqb;0061&rsqb;</number> Slow frequency hopping as a spread spectrum technique, i.e. the hopping rate is slower than the modulation rate; </paragraph>
<paragraph id="P-0062" lvl="2"><number>&lsqb;0062&rsqb;</number> Master and slave units whereby the master unit can set the hopping sequence; </paragraph>
<paragraph id="P-0063" lvl="2"><number>&lsqb;0063&rsqb;</number> Each device has its own clock and its own address; </paragraph>
<paragraph id="P-0064" lvl="2"><number>&lsqb;0064&rsqb;</number> The hopping sequence of a master unit can be determined at least in part from its address; </paragraph>
<paragraph id="P-0065" lvl="2"><number>&lsqb;0065&rsqb;</number> A set of slave units communicating with one master all have the same hopping frequency (of the master) and form a piconet; </paragraph>
<paragraph id="P-0066" lvl="2"><number>&lsqb;0066&rsqb;</number> Piconets can be linked through common slave units to form a scatternet; </paragraph>
<paragraph id="P-0067" lvl="2"><number>&lsqb;0067&rsqb;</number> Time division multiplex transmissions between slave and master units; </paragraph>
<paragraph id="P-0068" lvl="2"><number>&lsqb;0068&rsqb;</number> Time Division Duplex transmissions between slaves and masters units; </paragraph>
<paragraph id="P-0069" lvl="2"><number>&lsqb;0069&rsqb;</number> Transmissions between slave and master units may be either synchronous or asynchronous; </paragraph>
<paragraph id="P-0070" lvl="2"><number>&lsqb;0070&rsqb;</number> Master units determine when slave units can transmit; </paragraph>
<paragraph id="P-0071" lvl="2"><number>&lsqb;0071&rsqb;</number> Slave units may only reply when addressed by a master unit; </paragraph>
<paragraph id="P-0072" lvl="2"><number>&lsqb;0072&rsqb;</number> The clocks are free-running; </paragraph>
<paragraph id="P-0073" lvl="2"><number>&lsqb;0073&rsqb;</number> Uncoordinated networks, especially those operating in the 2.4 GHz license-free ISM band; </paragraph>
<paragraph id="P-0074" lvl="2"><number>&lsqb;0074&rsqb;</number> A software stack to enable applications to find other Bluetooth devices in the area; </paragraph>
<paragraph id="P-0075" lvl="2"><number>&lsqb;0075&rsqb;</number> Other devices are found by a discovery/inquiry procedure; and </paragraph>
<paragraph id="P-0076" lvl="2"><number>&lsqb;0076&rsqb;</number> Hard hand-overs. </paragraph>
<paragraph id="P-0077" lvl="0"><number>&lsqb;0077&rsqb;</number> The present invention is also not limited to only the Bluetooth protocol but includes any suitable protocol for connection orientated (e.g. circuit switched) wireless arrangements which use a spread spectrum technique, such as for example frequency hopping, and lack a true broadcast, beacon or pilot channel. Some such arrangements may also be referred to as uncoordinated cellular systems in which each master unit plays the roll of a base station and a cell can be considered its coverage area. Regulatory prohibition (e.g. FCC in USA) of synchronizing master units in the Industry, Science and Medical Band (ISM 2.4 GHz), however, means that operation between cells must remain uncoordinated. </paragraph>
<paragraph id="P-0078" lvl="0"><number>&lsqb;0078&rsqb;</number> Signaling between the mobile terminal MT and the access points AP<highlight><subscript>1-4 </subscript></highlight>need not be the same as the manner in which the access points communicate with each other through the shared access network <highlight><bold>10</bold></highlight>. The access point mobile terminal signaling may advantageously use a standard Inter-Access Point Protocol (IAPP) defined in the Bluetooth Personal Area Network (BT PAN) working group. The access points AP<highlight><subscript>1-4 </subscript></highlight>communicate with each other by exchanging messages through the shared resource network, e.g. through a fixed network connecting the access points AP<highlight><subscript>1-4 </subscript></highlight>in the form in this exemplary case of an Ethernet LAN 12. They could also use the PAN-defined Inter-Access Point Protocol (IAPP), although other messaging schemes may be chosen such as those currently being proposed by the Internet Engineering Task Force (IETF) Seamoby Working Group for transferring context information among access points. The mobile terminals and access points preferably form a wireless network which may be uncoordinated, that is the frequencies used by the network are not necessarily coordinated with any neighboring networks. Further, the wireless network may use spread spectrum techniques to improve transmission reception quality. Well accepted forms of spread spectrum techniques are fast or slow frequency hopping and direct sequence spread spectrum, fast frequency hopping being considered as a technique in which the frequency changes more quickly than the modulation rate. Summaries of these techniques may be found in the articles: &ldquo;Spread Spectrum Communication Techniques&rdquo;, by Tsui and Clarkson, Electronics &amp; Communication Eng. Journal, vol. 6, number 1, February 1994, pp 3 - 12, and &ldquo;Simplified matched filter receiver designs for spread spectrum communications applications&rdquo;, by Povey and Grant, Electronics &amp; Communication Eng. Journal, vol. 5, number 2, April 1993, pp 59 - 64 and &ldquo;Pseudo noise sequences for engineers&rdquo;, by Mutagi, Electronics &amp; Communication Eng. Journal, vol. 8, number 2, April, 1996, pp 79 - 87. </paragraph>
<paragraph id="P-0079" lvl="0"><number>&lsqb;0079&rsqb;</number> The access points AP<highlight><subscript>1-4 </subscript></highlight>are spread around an area covered by the shared resource network <highlight><bold>10</bold></highlight>, which in the embodiment shown is an indoor area <highlight><bold>14</bold></highlight>. The access points AP<highlight><subscript>1-4 </subscript></highlight>each cover a portion of the indoor area <highlight><bold>14</bold></highlight> and, due to limitations in access point power, it is necessary to use a number of these access points AP<highlight><subscript>1-4 </subscript></highlight>a to give adequate coverage. </paragraph>
<paragraph id="P-0080" lvl="0"><number>&lsqb;0080&rsqb;</number> While the mobile terminal MT remains substantially (but probably temporarily) stationary or at least within an area/cell covered by only its currently connected access point AP<highlight><subscript>1</subscript></highlight>, a piconet &num;<highlight><bold>1</bold></highlight> is established between them and is maintained. While the radio link quality between the currently connected access point AP<highlight><subscript>1 </subscript></highlight>and the mobile terminal MT remains strong, no further action is immediately necessary with respect to connectivity on the part of either the access point AP<highlight><subscript>1 </subscript></highlight>or the mobile terminal MT. If the mobile terminal MT moves and the connection weakens such that link quality is degraded, it may become necessary to hand the mobile terminal MT over to an access point AP<highlight><subscript>2-4 </subscript></highlight>which has a stronger signal and/or better covers the area into which the mobile terminal MT may have moved or be heading. During a handoff procedure, such a new access point AP<highlight><subscript>2 </subscript></highlight>is selected, a new piconet &num;2 between the mobile terminal MT and the new access point AP<highlight><subscript>2 </subscript></highlight>is established and the resources reserved in the originally connected access point AP<highlight><subscript>1 </subscript></highlight>and used to establish/maintain the original piconet &num;<highlight><bold>1</bold></highlight> are torn down and released. </paragraph>
<paragraph id="P-0081" lvl="0"><number>&lsqb;0081&rsqb;</number> The handoff procedure in a BT network is traditionally a difficult task, because the time taken to establish connections can be quite long. For example, with some known paging/page scan procedures, the average time for synchronizing frequency hopping patterns ranges from tenths to hundreds of milliseconds according to channel conditions, not including the Link Management Protocol (LMP) and higher layers&apos; message exchange. </paragraph>
<paragraph id="P-0082" lvl="0"><number>&lsqb;0082&rsqb;</number> To ensure as rapid a handoff as possible, in the present invention all access points AP<highlight><subscript>1-4 </subscript></highlight>connected to the shared resource network <highlight><bold>10</bold></highlight> are preferably pseudo-synchronized although the present invention does not exclude that all clocks in the system are synchronized. By pseudo-synchronization is meant that, although all clocks are free-running, their respective offsets are known to each other. The aim of the pseudo-synchronization phase is to make all the clocks of the access points AP<highlight><subscript>1-4 </subscript></highlight>known to each other within a certain precision, i.e. each access point AP<highlight><subscript>1-4 </subscript></highlight>knows the offset between its native clock CLKN and the clocks of its neighboring access points AP<highlight><subscript>1-4</subscript></highlight>. The way this is achieved in this embodiment is by exchanging messages through the shared resource network infrastructure that connects the access points AP<highlight><subscript>1-4</subscript></highlight>, e.g. an Ethernet LAN or HIPERLAN. </paragraph>
<paragraph id="P-0083" lvl="0"><number>&lsqb;0083&rsqb;</number> Access point clocks are used to determine the timing and the frequency hopping pattern of the piconet &num;<highlight><bold>1</bold></highlight>, &num;<highlight><bold>2</bold></highlight> of which they are the master. Each piconet &num;1, &num;2 is uniquely identified by the master&apos;s clock and its Bluetooth address. All slaves such as mobile terminals in a piconet &num;<highlight><bold>1</bold></highlight>, &num;<highlight><bold>2</bold></highlight> add an offset to their native clock in order to have an estimated clock that matches the Bluetooth master&apos;s clock. Since all the clocks are free-running, the offsets must be updated regularly. </paragraph>
<paragraph id="P-0084" lvl="0"><number>&lsqb;0084&rsqb;</number> The technique employed to pseudo-synchronize the clocks of the access points AP<highlight><subscript>1-4 </subscript></highlight>is similar to the Network Time Protocol specified in Network Time Protocol, RFC-1305, www.ietf.org, and is based on timestamps. The access point AP<highlight><subscript>1 </subscript></highlight>that is interested in updating its clock offset estimate of another access point AP<highlight><subscript>2-4</subscript></highlight>, sends a timestamp T<highlight><bold>1</bold></highlight> that represents the value of its native clock. Upon receiving this message, the target access point AP<highlight><subscript>2-4 </subscript></highlight>responds with a message containing T<highlight><bold>1</bold></highlight>, T<highlight><bold>2</bold></highlight> and T<highlight><bold>3</bold></highlight>, where T<highlight><bold>1</bold></highlight> is the original timestamp sent by the first access point AP<highlight><subscript>1</subscript></highlight>, T<highlight><bold>2</bold></highlight> is the value of the BT clock when the initial messages has arrived and T<highlight><bold>3</bold></highlight> is the time stamp corresponding to the instant the response message is sent back. Upon reception of the response message at time T<highlight><bold>4</bold></highlight>, the access point AP<highlight><subscript>1 </subscript></highlight>that had initiated the pseudo-synchronization procedure uses the values T<highlight><bold>1</bold></highlight>, T<highlight><bold>2</bold></highlight>, T<highlight><bold>3</bold></highlight> and T<highlight><bold>4</bold></highlight> to update its own estimate of the clock offset referred to the other access point AP<highlight><subscript>2-4</subscript></highlight>. </paragraph>
<paragraph id="P-0085" lvl="0"><number>&lsqb;0085&rsqb;</number> Each mobile terminal MT maintains an estimate of the master access point&apos;s clock as follows:</paragraph>
<paragraph lvl="0"><in-line-formula>CLK&equals;CLKN&plus;offset&emsp;&emsp;(1)</in-line-formula></paragraph>
<paragraph id="P-0086" lvl="0"><number>&lsqb;0086&rsqb;</number> Where CLK is the reconstructed Bluetooth clock, CLKN is the Bluetooth free-running native clock and the offset, which is periodically updated, is used to compensate for clock drifts. Obviously, at the master CLK&equals;CLKN. </paragraph>
<paragraph id="P-0087" lvl="0"><number>&lsqb;0087&rsqb;</number> When one access point AP<highlight><subscript>1-4 </subscript></highlight>wants to perform a page procedure towards a mobile terminal MT, it needs an estimate of the paged unit&apos;s clock and it uses an estimated clock CLKE as follows:</paragraph>
<paragraph lvl="0"><in-line-formula>CLKE&equals;CLKN&plus;estimated_offset&emsp;&emsp;(2)</in-line-formula></paragraph>
<paragraph id="P-0088" lvl="7"><number>&lsqb;0088&rsqb;</number> CLKE is used to determine the frequency used for paging along with the address of the page recipient, i.e. the mobile terminal MT. </paragraph>
<paragraph id="P-0089" lvl="0"><number>&lsqb;0089&rsqb;</number> In order for the pseudo-synchronization method described to be implemented, the Bluetooth host H must be able to read the access point&apos;s native clock. The current Bluetooth 1.1 specification does not include an HCI command that allows this feature. Such a problem can be overcome for implementation of the present invention in two different ways: </paragraph>
<paragraph id="P-0090" lvl="0"><number>&lsqb;0090&rsqb;</number> a) a vendor specific HCI command is implemented in the access point AP<highlight><subscript>1-4 </subscript></highlight>to export the value of the access point native clock, for example to or through a Bluetooth host (H); or </paragraph>
<paragraph id="P-0091" lvl="0"><number>&lsqb;0091&rsqb;</number> b) access point AP<highlight><subscript>1-4 </subscript></highlight>pseudo-synchronization can be accomplished through the Bluetooth radio interface, i.e. access points AP<highlight><subscript>1-4 </subscript></highlight>periodically go to inquiry mode trying to find other access points and inquiry responses are used to update the estimates of access point clock offsets. </paragraph>
<paragraph id="P-0092" lvl="0"><number>&lsqb;0092&rsqb;</number> When a mobile terminal MT that is connected &num;<highlight><bold>1</bold></highlight> to an access point AP<highlight><subscript>1 </subscript></highlight>needs a hand-over, it sends a handoff request to its currently connected access point AP<highlight><subscript>1</subscript></highlight>. The mobile terminal MT may initiate the handoff simply by informing its currently connected AP<highlight><subscript>1 </subscript></highlight>that it has detected degradation in the quality of their radio link. In the alternative, if for example the mobile terminal MT does not have the capability to measure link quality but the currently connected access point AP<highlight><subscript>1 </subscript></highlight>does, the handoff may be initiated by the access point AP<highlight><subscript>1</subscript></highlight>. </paragraph>
<paragraph id="P-0093" lvl="0"><number>&lsqb;0093&rsqb;</number> The mobile terminal MT then goes into a hold mode, in which it is in a continuous page scan waiting to hear from one or more potential new access points AP<highlight><subscript>2,3</subscript></highlight>, i.e. it waits to recognize its identity in a data packet transmitted by a potential new access point AP<highlight><subscript>2-4</subscript></highlight>. </paragraph>
<paragraph id="P-0094" lvl="0"><number>&lsqb;0094&rsqb;</number> The currently connected access point AP<highlight><subscript>1 </subscript></highlight>communicates with at least its immediately neighboring access points AP<highlight><subscript>2,3 </subscript></highlight>i.e. those into whose area of coverage the mobile terminal MT may have moved or be heading. It should be noted that the mobile terminal MT does not know the identity of those further access points AP<highlight><subscript>2-4</subscript></highlight>. The further access points AP<highlight><subscript>2,3 </subscript></highlight>are solicited on the basis of their proximity to the currently connected access point AP<highlight><subscript>1</subscript></highlight>. This is achieved by holding in each access point AP<highlight><subscript>1-4 </subscript></highlight>information about the network topology, i.e. which one or more access points AP<highlight><subscript>1-4 </subscript></highlight>are neighbors; what are their addresses; and which of their neighbors should be contacted for the exchange of clock offset information. How this network topology information is gathered and held is discussed in greater detail further below. The neighboring access points AP<highlight><subscript>2,3 </subscript></highlight>solicited by the currently connected access point AP<highlight><subscript>1 </subscript></highlight>each activate a paging procedure in which they page the mobile terminal MT. </paragraph>
<paragraph id="P-0095" lvl="0"><number>&lsqb;0095&rsqb;</number> The handoff procedure can be implemented as a make-before-break connection, by which the handoff is a hard hand-over in which resources allocated by the currently connected access point AP<highlight><subscript>1 </subscript></highlight>to connection with the mobile terminal MT are not torn down or released until a connection is at least under establishment between that slave unit and a next or target master unit/access point AP<highlight><subscript>1-4</subscript></highlight>. In this manner, if an attempted handoff does not succeed, it may still be possible for the mobile terminal MT to return to its original connection. The original connection may for example be broken on the expiration of a preset timeout or on receipt of an acknowledgment message received from the next/new access point AP<highlight><subscript>2</subscript></highlight>. </paragraph>
<paragraph id="P-0096" lvl="0"><number>&lsqb;0096&rsqb;</number> It will be noted that the paging procedure is activated only in access points AP<highlight><subscript>2,3 </subscript></highlight>neighboring the currently connected access point AP<highlight><subscript>1 </subscript></highlight>and not in access points AP<highlight><subscript>4 </subscript></highlight>which are not neighbors. This use of the network topology information prevents activation of a paging procedure in access points into whose coverage area the mobile terminal MT cannot have moved, as it would have lost communication with its currently connected access point AP<highlight><subscript>1 </subscript></highlight>during the transition. Such a loss in communication would occur due to the lack of overlap between coverage areas of the current and furthest access points AP<highlight><subscript>1,4</subscript></highlight>. This feature helps avoid unnecessary interference by reducing the possibility of interference from access points AP<highlight><subscript>4 </subscript></highlight>which are not involved in the current handoff, which interference might otherwise occur if they start paging even though they are highly unlikely to be in range of the slave unit requesting the handoff. </paragraph>
<paragraph id="P-0097" lvl="0"><number>&lsqb;0097&rsqb;</number> In the first embodiment, the paging access points AP<highlight><subscript>2,3 </subscript></highlight>do not overlap in coverage and the mobile terminal MT will therefore only receive identity packets ID from its closest potential new AP<highlight><subscript>2</subscript></highlight>, i.e. the access point into whose coverage area the mobile terminal MT has moved or is heading. In the event that coverage areas do overlap or for any other reason the mobile terminal MT does actually receive ID packets from more than one access point AP<highlight><subscript>2-4</subscript></highlight>, a choice must be made about which one to connect to. At this stage, the mobile terminal MT is in a continuous page scan and can simply respond to the first identity packet it receives and thereby connect to the first access point which succeeds in paging it. A further technique available to the mobile terminal MT is the use of a Received Signal Strength Indicator (RSSI) test. </paragraph>
<paragraph id="P-0098" lvl="0"><number>&lsqb;0098&rsqb;</number> Once the connection to the new access point AP<highlight><subscript>2 </subscript></highlight>is established, a new piconet &num;<highlight><bold>2</bold></highlight> is created connecting the mobile terminal MT with its new access point AP<highlight><subscript>2</subscript></highlight>. The establishment of the new connection &num;<highlight><bold>2</bold></highlight> takes place at the link layer and is preferably seamless, such that the mobile terminal MT does not lose communication with the Bluetooth LAN 10. </paragraph>
<paragraph id="P-0099" lvl="0"><number>&lsqb;0099&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 2</cross-reference> comprises a sequence diagram providing an overall view of the handoff procedure using notation in accordance with the current Bluetooth standard and represents the sequence of events as the currently connected access point AP<highlight><subscript>1 </subscript></highlight>(also referred to as the &ldquo;Old Access Point) activates a paging procedure in the or each access point AP<highlight><subscript>2,3 </subscript></highlight>which may be the next access point AP for connection (also referred to as the &ldquo;New Access Point&rdquo;). </paragraph>
<paragraph id="P-0100" lvl="0"><number>&lsqb;0100&rsqb;</number> Using the Bluetooth notation and <cross-reference target="DRAWINGS">FIG. 2</cross-reference>, after a handoff request (HO_req) has been received, e.g. from the mobile terminal MT to the currently connected access point AP<highlight><subscript>1</subscript></highlight>, the currently connected access point AP<highlight><subscript>1 </subscript></highlight>(depicted as &ldquo;Old AP&rdquo; in <cross-reference target="DRAWINGS">FIG. 2</cross-reference>) transmits a multicast page request message &lsqb;Page_req(t<highlight><subscript>0</subscript></highlight>,d<highlight><subscript>0</subscript></highlight>,BD_ADDR, CLK_OFF)&rsqb; to its neighboring access points AP<highlight><subscript>2</subscript></highlight>, AP<highlight><subscript>3</subscript></highlight>, which are the access points into whose coverage area the mobile terminal MT may have moved or be heading. </paragraph>
<paragraph id="P-0101" lvl="0"><number>&lsqb;0101&rsqb;</number> The page request message carries the Bluetooth address (BD_ADDR) of the mobile terminal to be paged, its clock offset (CLK_OFF) and timing parameters that indicate the estimated time the mobile will enter page scan (t<highlight><subscript>0</subscript></highlight>) and its duration (d<highlight><subscript>0</subscript></highlight>). When the handoff request has been acknowledged, the mobile terminal MT is put into hold mode (Hold) by the old access point AP<highlight><subscript>1</subscript></highlight>, for a period of time &lsqb;LMP_hold(time)&rsqb; that must be carefully calculated and depends on d<highlight><subscript>0</subscript></highlight>. During the hold mode the mobile terminal MT enters into a continuous page scan (Cont_page_scan). </paragraph>
<paragraph id="P-0102" lvl="0"><number>&lsqb;0102&rsqb;</number> At this step, the potential new access points AP<highlight><subscript>2 </subscript></highlight>and AP<highlight><subscript>3 </subscript></highlight>start paging the mobile terminal MT by sending identity packets &lsqb;Create_connection (BD_ADDR, CLK_OFF)&rsqb;. The mobile terminal MT will send an identity response packet (ID_response) to the closest access point AP<highlight><subscript>2</subscript></highlight>. </paragraph>
<paragraph id="P-0103" lvl="0"><number>&lsqb;0103&rsqb;</number> The connection between the mobile terminal MT and the access point AP<highlight><subscript>2 </subscript></highlight>into whose area the mobile terminal MT is moving (&ldquo;New AP&rdquo; in <cross-reference target="DRAWINGS">FIG. 2</cross-reference>) is established once frequency hop sequence/synchronization (FHS) packets and subsequent identities ID have been exchanged. </paragraph>
<paragraph id="P-0104" lvl="0"><number>&lsqb;0104&rsqb;</number> From this point on, the frequency hopping pattern used in the newly formed piconet &num;<highlight><bold>2</bold></highlight> follows the usual rules defined in the Bluetooth specification, and normal data exchange can begin after the link has been configured (including LMP and L2CAP configuration messages). </paragraph>
<paragraph id="P-0105" lvl="0"><number>&lsqb;0105&rsqb;</number> It should be noted however that, when the new access point AP<highlight><subscript>2 </subscript></highlight>has successfully established a new connection with the mobile terminal MT, it informs the old access point AP<highlight><subscript>1 </subscript></highlight>and the other access points AP<highlight><subscript>3 </subscript></highlight>that are performing paging by sending an acknowledgment message (Acknowledge) through the shared resource network <highlight><bold>10</bold></highlight>. This message has two functions. In the old access point AP<highlight><subscript>1</subscript></highlight>, the resources associated with the mobile terminal MT being handed-over are torn down and released and in the other access point or points AP<highlight><subscript>3 </subscript></highlight>that are trying to connect with the mobile terminal MT, the paging process is stopped, thereby reducing interference. </paragraph>
<paragraph id="P-0106" lvl="0"><number>&lsqb;0106&rsqb;</number> The page procedure is initiated at each access point AP<highlight><subscript>2,3 </subscript></highlight>by means of the standard HCI command &ldquo;hci_create_connection&rdquo; sent to the communications device acting as that access point, which in this embodiment comprises a Bluetooth module. The parameters for this command are:  
<table-cwu id="TABLE-US-00001">
<number>1</number>
<table frame="none" colsep="0" rowsep="0">
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="1" colwidth="105PT" align="left"/>
<colspec colname="2" colwidth="112PT" align="left"/>
<thead>
<row>
<entry></entry>
</row>
<row><entry namest="1" nameend="2" align="center" rowsep="1"></entry>
</row>
</thead>
<tbody valign="top">
<row>
<entry>BD_ADDR</entry>
<entry>address of the Bluetooth MT to page</entry>
</row>
<row>
<entry>Packet_Type</entry>
<entry>Bluetooth packet type to use in the</entry>
</row>
<row>
<entry></entry>
<entry>connection</entry>
</row>
<row>
<entry>Page_Scan_Repetition_Mode</entry>
</row>
<row>
<entry>Page_Scan_Mode</entry>
</row>
<row>
<entry>Clock_Offset</entry>
<entry>MT estimated clock offset</entry>
</row>
<row>
<entry>Allow_Role_Switch</entry>
</row>
<row><entry namest="1" nameend="2" align="center" rowsep="1"></entry>
</row>
</tbody>
</tgroup>
</table>
</table-cwu>
</paragraph>
<paragraph id="P-0107" lvl="0"><number>&lsqb;0107&rsqb;</number> Once the connection between the mobile terminal MT and the old access point AP<highlight><subscript>1 </subscript></highlight>has been put into hold mode and a baseband timer expires, an event (Mode_change_event) is generated through the HCI interface between the communications units/Bluetooth modules and the host controller H, i.e. in both the old access point AP<highlight><subscript>1 </subscript></highlight>and in the mobile terminal MT. The actions resulting from this event depend on the outcome of the new connection establishment procedure, i.e. whether a new access point AP<highlight><subscript>2,3 </subscript></highlight>has been able to establish a connection with the mobile terminal MT or not. The first case is shown with particular reference to <cross-reference target="DRAWINGS">FIG. 3</cross-reference>, while the second one is depicted in <cross-reference target="DRAWINGS">FIG. 4</cross-reference>. </paragraph>
<paragraph id="P-0108" lvl="0"><number>&lsqb;0108&rsqb;</number> Referring for the moment in particular to <cross-reference target="DRAWINGS">FIG. 3, a</cross-reference> successful outcome of the handoff procedure generates a connection_complete event at both the mobile terminal MT and at the new access point AP<highlight><subscript>2 </subscript></highlight>and this is received by the host H before the return from the hold period. At this point in time, the mobile terminal MT releases the connection with the old access point AP<highlight><subscript>1 </subscript></highlight>by simply setting a short link supervision timeout &lsqb;Write_link_supervision_TO (old_ACL_connection)&rsqb; and letting it expire. The same procedure can be performed at the old access point AP<highlight><subscript>1 </subscript></highlight>as soon as an acknowledgment message from the new access point AP<highlight><subscript>2 </subscript></highlight>is received through the shared resource network <highlight><bold>10</bold></highlight>. </paragraph>
<paragraph id="P-0109" lvl="0"><number>&lsqb;0109&rsqb;</number> At the mobile terminal MT, L2CAP configuration follows the usual Bluetooth procedure. SDP transactions can be avoided, since a Bluetooth network guarantees that the same kind of services are supported by the access points AP<highlight><subscript>1-3 </subscript></highlight>involved in the handoff procedure. When the hold period finally elapses, a mode_change_event is generated at the mobile terminal MT and at the old access point AP<highlight><subscript>1</subscript></highlight>, which particular event is simply ignored by both Bluetooth modules MT, AP<highlight><subscript>1</subscript></highlight>. </paragraph>
<paragraph id="P-0110" lvl="0"><number>&lsqb;0110&rsqb;</number> Particular reference is now made to <cross-reference target="DRAWINGS">FIG. 4</cross-reference>, which comprises a sequence diagram of a case in which no new access point AP<highlight><subscript>2,3 </subscript></highlight>succeeds in establishing a new connection with the mobile terminal MT. Return from hold mode (Hold) is signaled by a Mode_change_event at both the mobile terminal MT and at the originally connected (&ldquo;old&rdquo;) access point AP<highlight><subscript>1 </subscript></highlight>and, since in this case no connection_complete_event has been generated, the mobile terminal MT can try to communicate with the old access point AP<highlight><subscript>1 </subscript></highlight>using the previous connection. If the old access point AP<highlight><subscript>1 </subscript></highlight>is no longer in range, the link supervision timeout will naturally expire and the mobile terminal MT will be responsible for searching for a different access point AP<highlight><subscript>2-4 </subscript></highlight>to connect to using, for example, the standard Bluetooth inquiry and page procedures. Under these circumstances, in order to speed up reconnection times of the mobile terminal MT, a short link supervision timeout (Write_link_supervision_TO) can be set right after the mode change event has been received. In this way, the mobile terminal MT understands more quickly if the connection with the old AP can still be used for communication. </paragraph>
<paragraph id="P-0111" lvl="0"><number>&lsqb;0111&rsqb;</number> Referring now in particular to <cross-reference target="DRAWINGS">FIG. 5, a</cross-reference> sequence diagram is provided to assist in better understanding the signaling at the network layer. The sequence diagram is similar to the sequence diagram of <cross-reference target="DRAWINGS">FIG. 2</cross-reference>, but includes the interaction between the Bluetooth modules MT, AP<highlight><subscript>1,2,3 </subscript></highlight>at Layer <highlight><bold>2</bold></highlight> and Layer <highlight><bold>3</bold></highlight>. </paragraph>
<paragraph id="P-0112" lvl="0"><number>&lsqb;0112&rsqb;</number> Messages are exchanged among access points AP<highlight><subscript>1-4 </subscript></highlight>and between the mobile terminal MT and its main access point AP<highlight><subscript>1</subscript></highlight>. The heterogeneous network architecture considered here suggests base signaling using the Internet Protocol IP. This is a useful choice, as the present invention is intended to support IP mobility protocols on a Bluetooth or other networks. Examples of IP mobility protocols include Hierarchical Mobile IP (HMIP), Cellular IP and HAWAII, for which the reader is again referred to www.ietf.org. </paragraph>
<paragraph id="P-0113" lvl="0"><number>&lsqb;0113&rsqb;</number> The access points AP<highlight><subscript>1-4 </subscript></highlight>pseudo-synchronize by exchanging messages through the shared resource network <highlight><bold>10</bold></highlight>, those messages carrying timestamps T<highlight><bold>1</bold></highlight>-T<highlight><bold>4</bold></highlight> in accordance with the NTP protocol, which is based on the User Datagram Protocol (UDP). </paragraph>
<paragraph id="P-0114" lvl="0"><number>&lsqb;0114&rsqb;</number> As soon as a new connection has been established at the link layer, the Layer <highlight><bold>3</bold></highlight> has to be notified so that a new route can be activated between the mobile terminal MT and the access gateway through the new access point AP<highlight><subscript>2</subscript></highlight>. In <cross-reference target="DRAWINGS">FIG. 5</cross-reference>, this interaction has been highlighted and in particular, right after L2CAP configuration has completed, a beacon packet (L<highlight><subscript>&mdash;</subscript></highlight>3 beacon) is sent to the mobile terminal MT by the Bluetooth mobility daemon (e.g. the software entity that manages the BT hand-over process and whose state machines are reported in Harel notation with particular reference to <cross-reference target="DRAWINGS">FIG. 7</cross-reference> for the access points AP and <cross-reference target="DRAWINGS">FIG. 8</cross-reference> for the mobile terminal MT, along with the annex. In this packet, Layer <highlight><bold>3</bold></highlight> information is included, according to the particular micromobility protocol that is being used. </paragraph>
<paragraph id="P-0115" lvl="0"><number>&lsqb;0115&rsqb;</number> When the mobile terminal MT receives the beacon, the Internet Protocol (IP) mobility daemon (i.e. the software entity that manages mobility at the network layer) sends a Route_update packet that is used in the access network to activate a path (Data) to reach the mobile terminal MT by means of the new access point AP<highlight><subscript>2</subscript></highlight>. </paragraph>
<paragraph id="P-0116" lvl="0"><number>&lsqb;0116&rsqb;</number> Particular reference is now made to <cross-reference target="DRAWINGS">FIG. 6</cross-reference>, in which an example is given of a layout in which there are six access points AP<highlight><subscript>1-6</subscript></highlight>. The access points AP<highlight><subscript>1-6 </subscript></highlight>provide a service to a plurality of mobile terminals A, B, C which are able to roam between the cell coverage of any of the access points AP<highlight><subscript>1-6</subscript></highlight>. For simplicity in the drawing, only the coverage area of one access point AP<highlight><subscript>5 </subscript></highlight>has been specifically marked. </paragraph>
<paragraph id="P-0117" lvl="0"><number>&lsqb;0117&rsqb;</number> The network access points AP<highlight><subscript>1-6 </subscript></highlight>have been placed in such a way that their coverage areas are slightly overlapped. However, access points AP<highlight><subscript>1-6 </subscript></highlight>are spaced apart in such a way that, for example, 1 and 3 do not overlap. This applies to all access points that are non-adjacent and ensures that no two access points AP<highlight><subscript>1-6 </subscript></highlight>overlap in coverage within the coverage area of any other access point AP<highlight><subscript>1-6</subscript></highlight>. This lack of overlap between neighbors within the current cell ensures that a mobile terminal MT will only receive paging signals from its closest further access point during a handoff. </paragraph>
<paragraph id="P-0118" lvl="0"><number>&lsqb;0118&rsqb;</number> Two mobile terminals A, B are both moving approximately at the same time towards the cell covered by AP<highlight><subscript>2 </subscript></highlight>and a third one C is moving to the cell covered by AP<highlight><subscript>6</subscript></highlight>. Assuming that all of them properly notice that a handoff is needed, A would send a handoff request to AP<highlight><subscript>4</subscript></highlight>, B and C to AP<highlight><subscript>3</subscript></highlight>. </paragraph>
<paragraph id="P-0119" lvl="0"><number>&lsqb;0119&rsqb;</number> Since a currently connected access point AP<highlight><subscript>3,4 </subscript></highlight>does not know where a mobile terminal A, B, C is directed, a request to page each moving mobile terminal A, B, C is sent to the or each access point neighboring each one that receives or initiates the page procedure. </paragraph>
<paragraph id="P-0120" lvl="0"><number>&lsqb;0120&rsqb;</number> In this manner, AP<highlight><subscript>3 </subscript></highlight>sends two requests (one for mobile B and another for mobile C) to both AP<highlight><subscript>2 </subscript></highlight>and AP<highlight><subscript>6</subscript></highlight>, while AP<highlight><subscript>4 </subscript></highlight>sends a request for A to AP<highlight><subscript>2 </subscript></highlight>and AP<highlight><subscript>5</subscript></highlight>. AP<highlight><subscript>2 </subscript></highlight>therefore receives requests to page all three moving mobile terminals A, B, C. It then schedules the paging procedures and actually establishes new connections with A and B. Since C has not moved into the cell covered by AP<highlight><subscript>2</subscript></highlight>, no response to page ID&apos;s will be obtained. Once C reaches the area of overlap between AP<highlight><subscript>6 </subscript></highlight>and AP<highlight><subscript>3</subscript></highlight>, however, it will be in range of AP6 and can receive paging signals from that access point. </paragraph>
<paragraph id="P-0121" lvl="0"><number>&lsqb;0121&rsqb;</number> In this case, AP<highlight><subscript>2 </subscript></highlight>can be seen to have received from two of its neighboring access points AP<highlight><subscript>3,4 </subscript></highlight>multiple requests for paging moving mobile terminals A, B, C. Those requests are scheduled so as to try and guarantee that all involved terminals A, B, C can be paged in time, i.e. before communication with their currently connected access points AP are lost. Various scheduling algorithms can be envisaged for this purpose, perhaps one of the simplest being a &ldquo;first-come-first-served&rdquo; policy, by means of which paging procedures are activated in the same order as handoff requests are received. In another embodiment, the policy used can be based on &ldquo;earliest-deadline-first&rdquo;, by means of which the paging procedures are activated in an order which privileges mobile terminals whose listening window is due to expire first. Furthermore, if the number of requests to any particular access point exceeds the available capacity of that access point to finalize scheduling procedures in time, this congestion can be reported to one or more other access points, preferably to all and by using the infrastructure of the shared resource network <highlight><bold>10</bold></highlight>. In this way, an access point which receives a handoff request which involves a temporarily congested access point can inform the requesting mobile terminal that it must wait for its handoff, by for example staying in a continuous page scan for a longer time (d<highlight><subscript>0</subscript></highlight>). </paragraph>
<paragraph id="P-0122" lvl="0"><number>&lsqb;0122&rsqb;</number> Particular consideration will now be given to the development of the network topology information which is held in the access points of each embodiment and used by the currently connected access point to determine in which further access points to activate the paging procedure by which those further access points page the mobile terminal and also to determine which access points should be contacted for exchange of clock offset information. </paragraph>
<paragraph id="P-0123" lvl="0"><number>&lsqb;0123&rsqb;</number> Referring now in particular to <cross-reference target="DRAWINGS">FIGS. 9 and 10</cross-reference>, six access points AP<highlight><subscript>1-6 </subscript></highlight>have been placed so that their overlapping coverage areas ensure network connectivity within the indoor area. All access points AP<highlight><subscript>1-6 </subscript></highlight>are networked together using the shared resource network, for example, an Ethernet LAN or a HIPERLAN. Some of them are within radio range with each other (<highlight><bold>2</bold></highlight>,<highlight><bold>3</bold></highlight> and <highlight><bold>3</bold></highlight>,<highlight><bold>4</bold></highlight>), they all use isotropic antennas, transmit using the same power level and have equal receiver sensitivity. For simplicity in the drawing, only the coverage area of one access point AP<highlight><subscript>5 </subscript></highlight>has been specifically marked. </paragraph>
<paragraph id="P-0124" lvl="0"><number>&lsqb;0124&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 9</cross-reference> shows the physical layout of the particular example under consideration, along with the coverage area of the access points AP<highlight><subscript>1-6 </subscript></highlight>involved. It will be noted that, unlike the example of <cross-reference target="DRAWINGS">FIG. 6</cross-reference>, in this case several areas of coverage of neighboring access points overlap in the coverage area of each individual access point AP<highlight><subscript>1-6</subscript></highlight>. </paragraph>
<paragraph id="P-0125" lvl="0"><number>&lsqb;0125&rsqb;</number> The neighbor relationship between the access points AP<highlight><subscript>1-6 </subscript></highlight>is held in a matrix shown in <cross-reference target="DRAWINGS">FIG. 10</cross-reference> and is stored locally to each access point, preferably being held in a memory in each access point and having the ability to implement updates, for example in the event that one of the access points AP<highlight><subscript>1-6 </subscript></highlight>moves within the indoor area. The network topology information that is of interest is represented in the matrix, in which a &lsquo;1&rsquo; in position (x,y) indicates that access point y is a neighbor of access point x, i.e. a mobile terminal that is connected to x may move towards an area covered by y. It can be noticed that the matrix is symmetrical. </paragraph>
<paragraph id="P-0126" lvl="0"><number>&lsqb;0126&rsqb;</number> By using the matrix, each access point AP<highlight><subscript>1-6 </subscript></highlight>is able to determine which further access point or points are its neighbors. It is able to obtain and store the neighboring network addresses and to use this network topology information to address all of its neighbors each time a handoff request is generated. In addition to forwarding a request for a handoff to the neighboring access points, the address of the mobile terminal MT can also be included in the request, such that the neighboring access points can target the specific mobile terminal MT. In this manner, the time consuming inquiry procedure usually performed by the mobile terminal in known systems is avoided. </paragraph>
<paragraph id="P-0127" lvl="0"><number>&lsqb;0127&rsqb;</number> If the network topology is known to a system installer, it can be programmed into the access points AP<highlight><subscript>1-6 </subscript></highlight>during installation, for example on initialization of the shared resource network. The network topology information can alternatively be gathered dynamically using a mobile probing technique. In any case, topology updates after initialization are useful so as, for example, to update initial records in order to take account of access point movements which might occur after initial installation or during network operation. An example of mobile probing will now be described with particular reference to <cross-reference target="DRAWINGS">FIGS. 11</cross-reference><highlight><italic>a </italic></highlight>to <highlight><bold>11</bold></highlight><highlight><italic>d, </italic></highlight><highlight><bold>12</bold></highlight> and <highlight><bold>13</bold></highlight>. </paragraph>
<paragraph id="P-0128" lvl="0"><number>&lsqb;0128&rsqb;</number> In order to build the network topology matrix dynamically, a Bluetooth mobile terminal with dedicated software and referred to for convenience as a mobile probe, is used by an operator after the network has been installed to build the network topology matrix in steps. Any Bluetooth device can be used for this purpose, provided the necessary software is used as described below, preferably recording the results automatically and initially in the mobile probe itself. </paragraph>
<paragraph id="P-0129" lvl="0"><number>&lsqb;0129&rsqb;</number> A Bluetooth inquiry procedure is activated in different positions within the indoor area and the mobile probe MT automatically records each inquiry response received from the network access points, i.e. it saves the MAC addresses of the access points. The position of the probe must not vary until the standard Bluetooth inquiry process is completed (e.g. about 10 seconds) for each of the test positions A to D shown by way of example in <cross-reference target="DRAWINGS">FIGS. 11</cross-reference><highlight><italic>a </italic></highlight>to <highlight><bold>11</bold></highlight><highlight><italic>d </italic></highlight>respectively. </paragraph>
<paragraph id="P-0130" lvl="0"><number>&lsqb;0130&rsqb;</number> In position A, <cross-reference target="DRAWINGS">FIG. 11</cross-reference><highlight><italic>a, </italic></highlight>the mobile probe will get responses from access points <highlight><bold>1</bold></highlight> and <highlight><bold>6</bold></highlight>. In position B, <cross-reference target="DRAWINGS">FIG. 11</cross-reference><highlight><italic>b, </italic></highlight>responses will be received from access points <highlight><bold>5</bold></highlight> and <highlight><bold>6</bold></highlight>. In position C, <cross-reference target="DRAWINGS">FIG. 11</cross-reference><highlight><italic>c, </italic></highlight>the responses will be from access points <highlight><bold>2</bold></highlight>, <highlight><bold>3</bold></highlight> and <highlight><bold>5</bold></highlight>. In position D, <cross-reference target="DRAWINGS">FIG. 11</cross-reference><highlight><italic>d, </italic></highlight>the responses will be from access points <highlight><bold>3</bold></highlight>, <highlight><bold>4</bold></highlight> and <highlight><bold>5</bold></highlight>. The mobile probing procedure should be performed as an iterative process such that, the more tests that are performed, the more accurate the resulting network topology information will be. For the four positions A to D used by way of example, a table of results can be seen in <cross-reference target="DRAWINGS">FIG. 12</cross-reference>. </paragraph>
<paragraph id="P-0131" lvl="0"><number>&lsqb;0131&rsqb;</number> The results of <cross-reference target="DRAWINGS">FIG. 12</cross-reference> can be placed in a matrix similar to that of <cross-reference target="DRAWINGS">FIG. 10</cross-reference> and such an arrangement is shown with particular reference to <cross-reference target="DRAWINGS">FIG. 13</cross-reference>. Reading the matrix of <cross-reference target="DRAWINGS">FIG. 13</cross-reference> in the same way as that of <cross-reference target="DRAWINGS">FIG. 10</cross-reference> and in comparison with the full topology represented therein, it can be seen that a reasonable approximation of the neighbor relationship has already been achieved using only four inquiry positions A to D. </paragraph>
<paragraph id="P-0132" lvl="0"><number>&lsqb;0132&rsqb;</number> Once the mobile probe has collected the measurements, it builds the network topology matrix of <cross-reference target="DRAWINGS">FIG. 13</cross-reference> and uploads it to a management station that controls all the networked access points, such as for example a host controller. This transfer can be made using the Bluetooth link itself from the mobile probe-to the management station through any of the access points, including those just probed. </paragraph>
<paragraph id="P-0133" lvl="0"><number>&lsqb;0133&rsqb;</number> Once the management station has received the topology matrix, it configures each access point with the MAC addresses of its neighbors, for example by using standard IP protocols such as the Simple Network Management Protocol (SNMP). In this way, the matrix and related network topology information such as network addresses of neighbors is loaded into each access point, where it is held locally to the access point for use during the paging procedures discussed above. </paragraph>
<paragraph id="P-0134" lvl="0"><number>&lsqb;0134&rsqb;</number> With regard to specific requirements for the communications units used as mobile terminals and access points, the following features are considered useful in implementing the present invention. </paragraph>
<paragraph id="P-0135" lvl="0"><number>&lsqb;0135&rsqb;</number> When a communications unit is used as a mobile terminal MT, it is preferably capable of monitoring radio link quality, such that it can send handoff requests to its currently connected access point AP<highlight><subscript>1</subscript></highlight>. Once a handoff has be requested, it should enter into a continuous page scan, in which it waits to be paged by one or more access points AP<highlight><subscript>2,3 </subscript></highlight>in which a paging procedure has been activated by the currently connected access point AP<highlight><subscript>1</subscript></highlight>. When operating as a mobile terminal MT, the communications unit should preferably also be configured to make a selection from a plurality of paging communications units which are, at least for the time being, acting as master units/access points AP<highlight><subscript>1-4</subscript></highlight>. </paragraph>
<paragraph id="P-0136" lvl="0"><number>&lsqb;0136&rsqb;</number> When operating as a master unit/access point AP<highlight><subscript>1-4</subscript></highlight>, a communications unit should be configured to hold the topology information for the network of which it forms a part. As discussed above, that information is preferably held locally to that communications unit, preferably in the form of a matrix and including: which master units are neighbors; what are their addresses (BD_ADDR); and what are their native clocks offsets with respect to at least that particular communications unit. </paragraph>
<paragraph id="P-0137" lvl="0"><number>&lsqb;0137&rsqb;</number> The communications unit acting as a master unit AP<highlight><subscript>1-4 </subscript></highlight>should also be capable of accepting handoff requests from slave units MT and preferably also capable of acknowledging those handoff requests. It should also be capable of forwarding received handoff requests to at least one neighboring master unit AP<highlight><subscript>1</subscript></highlight>, preferably using a fixed network <highlight><bold>12</bold></highlight> connecting them. This unit AP<highlight><subscript>1-4 </subscript></highlight>should also be able to receive requests to page at least one slave unit from the fixed network <highlight><bold>12</bold></highlight> and also be adapted to schedule paging processes used to attempt connection with a plurality of slave units MT. </paragraph>
<paragraph id="P-0138" lvl="0"><number>&lsqb;0138&rsqb;</number> If a number of requests from a plurality of slave units MT exceeds the available capacity of a communications unit acting as a master unit to finalize paging procedures before expiry of any one or more page scan windows of the requesting slave units, the affected communications unit should be adapted to communicate a signal indicative of the congestion to one or more further communications units acting as master units AP<highlight><subscript>1-6</subscript></highlight>. If a request from a slave unit involves a master unit AP<highlight><subscript>1-6 </subscript></highlight>which is congested, the slave unit should be informed by its currently connected master unit AP<highlight><subscript>1 </subscript></highlight>that it must wait for its handoff, by for example staying in a continuous page scan for an extended period. </paragraph>
<paragraph id="P-0139" lvl="0"><number>&lsqb;0139&rsqb;</number> A situation may arise in which a communications unit AP<highlight><subscript>3 </subscript></highlight>which is acting as a master unit and in which has been activated a paging procedure receives a message indicative of a successful connection between a further communications unit acting as a master unit AP<highlight><subscript>2 </subscript></highlight>and the slave unit MT which was the initiator of the hand off request. Under these circumstances, the affected master unit AP<highlight><subscript>3 </subscript></highlight>should be adapted to stop paging that particular slave unit MT. The communications unit AP<highlight><subscript>2 </subscript></highlight>which does establish a successful connection with the slave unit MT, should send an acknowledgment message indicative of successful paging to at least one further master unit, and preferably to each other master unit which is paging the same slave unit. </paragraph>
<paragraph id="P-0140" lvl="0"><number>&lsqb;0140&rsqb;</number> While the present invention has been particularly shown and described with respect to a preferred embodiment, it will be understood by those skilled in the art that changes in form and detail may be made without departing from the scope and spirit of the invention.  
<table-cwu id="TABLE-US-00002">
<number>2</number>
<table frame="none" colsep="0" rowsep="0">
<tgroup align="left" colsep="0" rowsep="0" cols="1">
<colspec colname="1" colwidth="217PT" align="center"/>
<tbody valign="top">
<row>
<entry></entry>
</row>
<row><entry namest="1" nameend="1" align="center" rowsep="1"></entry>
</row>
<row>
<entry>Glossary</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="3">
<colspec colname="OFFSET" colwidth="14PT" align="left"/>
<colspec colname="1" colwidth="42PT" align="left"/>
<colspec colname="2" colwidth="161PT" align="left"/>
<tbody valign="top">
<row>
<entry></entry>
<entry>Code</entry>
<entry>Meaning</entry>
</row>
<row>
<entry></entry>
<entry namest="OFFSET" nameend="2" align="center" rowsep="1"></entry>
</row>
<row>
<entry></entry>
<entry>AP</entry>
<entry>Access Point</entry>
</row>
<row>
<entry></entry>
<entry>BT</entry>
<entry>Bluetooth</entry>
</row>
<row>
<entry></entry>
<entry>CAN</entry>
<entry>Controller Area Network</entry>
</row>
<row>
<entry></entry>
<entry>FHS</entry>
<entry>Bluetooth Frequency Hop Synchronization packet</entry>
</row>
<row>
<entry></entry>
<entry>HCI</entry>
<entry>Host Controller Interface</entry>
</row>
<row>
<entry></entry>
<entry>IAPP</entry>
<entry>Inter Access Point Protocol</entry>
</row>
<row>
<entry></entry>
<entry>ID</entry>
<entry>Bluetooth Identity packet</entry>
</row>
<row>
<entry></entry>
<entry>LAN</entry>
<entry>Local Area Network</entry>
</row>
<row>
<entry></entry>
<entry>MT</entry>
<entry>Mobile terminal</entry>
</row>
<row>
<entry></entry>
<entry>NTP</entry>
<entry>Network Time Protocol</entry>
</row>
<row>
<entry></entry>
<entry>RFC</entry>
<entry>Request for Comments</entry>
</row>
<row>
<entry></entry>
<entry>SRN</entry>
<entry>Shared Resource Network</entry>
</row>
<row>
<entry></entry>
<entry namest="OFFSET" nameend="2" align="center" rowsep="1"></entry>
</row>
</tbody>
</tgroup>
</table>
</table-cwu>
</paragraph>
<paragraph id="P-0141" lvl="7"><number>&lsqb;0141&rsqb;</number> References useful for understanding the present invention. </paragraph>
<paragraph id="P-0142" lvl="0"><number>&lsqb;0142&rsqb;</number> The Bluetooth SIG, &ldquo;Bluetooth specification v.1.1&rdquo;, February 2001. </paragraph>
<paragraph id="P-0143" lvl="2"><number>&lsqb;0143&rsqb;</number> Cellular IP project at Columbia University: http://comet.ctr.columbia.edu/cellularip </paragraph>
<paragraph id="P-0144" lvl="2"><number>&lsqb;0144&rsqb;</number> R. Ramjee, T. La Porta, &ldquo;IP micro-mobility support using HAWAII&rdquo;, draft-ramjee-micro-mobility-hawaii-00.txt, February 1999, work in progress. </paragraph>
<paragraph id="P-0145" lvl="2"><number>&lsqb;0145&rsqb;</number> C. Castelluccia, &ldquo;An Hierarchical Mobile IPv6 Proposal&rdquo;, INRIA TR-0226, November 1998, http://www.inrialpes.fr/Planete/people/ccastel/index.html </paragraph>
<paragraph id="P-0146" lvl="7"><number>&lsqb;0146&rsqb;</number> ANNEX:  
<table-cwu id="TABLE-US-00003">
<number>3</number>
<table frame="none" colsep="0" rowsep="0">
<tgroup align="left" colsep="0" rowsep="0" cols="1">
<colspec colname="1" colwidth="217PT" align="center"/>
<thead>
<row>
<entry></entry>
</row>
<row><entry namest="1" nameend="1" align="center" rowsep="1"></entry>
</row>
<row>
<entry>Harel notation for <cross-reference target="DRAWINGS">FIG. 7</cross-reference></entry>
</row>
<row><entry namest="1" nameend="1" align="center" rowsep="1"></entry>
</row>
</thead>
<tbody valign="top">
<row>
<entry></entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="1">
<colspec colname="1" colwidth="217PT" align="left"/>
<tbody valign="top">
<row>
<entry>State name:</entry>
</row>
<row>
<entry>INIT</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="1" colwidth="77PT" align="left"/>
<colspec colname="2" colwidth="140PT" align="left"/>
<tbody valign="top">
<row>
<entry>Type:</entry>
<entry>StartState</entry>
</row>
<row>
<entry>State name:</entry>
</row>
<row>
<entry>IDLE</entry>
</row>
<row>
<entry>Type:</entry>
<entry>Normal</entry>
</row>
<row>
<entry>Documentation:</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="1">
<colspec colname="1" colwidth="217PT" align="left"/>
<tbody valign="top">
<row>
<entry>Wait for requests from either the mobile or a neighbor access point.</entry>
</row>
<row>
<entry>State name:</entry>
</row>
<row>
<entry>START_OLD_HO</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="1" colwidth="77PT" align="left"/>
<colspec colname="2" colwidth="140PT" align="left"/>
<tbody valign="top">
<row>
<entry>Type:</entry>
<entry>Normal</entry>
</row>
<row>
<entry>Documentation:</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="1">
<colspec colname="1" colwidth="217PT" align="left"/>
<tbody valign="top">
<row>
<entry>AP has received a handoff request from a mobile terminal.</entry>
</row>
<row>
<entry>After acknowledgement, the MT is put into hold mode.</entry>
</row>
<row>
<entry>Actions:</entry>
</row>
<row>
<entry>entry:{circumflex over (&emsp;)}MT_HO_ACK</entry>
</row>
<row>
<entry>do:{circumflex over (&emsp;)}btStack.HCI_HOLD_SET</entry>
</row>
<row>
<entry>State name:</entry>
</row>
<row>
<entry>OLD_HO1</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="1" colwidth="77PT" align="left"/>
<colspec colname="2" colwidth="140PT" align="left"/>
<tbody valign="top">
<row>
<entry>Type:</entry>
<entry>Normal</entry>
</row>
<row>
<entry>Documentation:</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="1">
<colspec colname="1" colwidth="217PT" align="left"/>
<tbody valign="top">
<row>
<entry>The old AP waits for the response from the new AP (who has established</entry>
</row>
<row>
<entry>a new connection with MT).</entry>
</row>
<row>
<entry>Actions:</entry>
</row>
<row>
<entry>entry:{circumflex over (&emsp;)}IAPP_PAGE_REQ</entry>
</row>
<row>
<entry>State name:</entry>
</row>
<row>
<entry>OLD_HO2</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="1" colwidth="77PT" align="left"/>
<colspec colname="2" colwidth="140PT" align="left"/>
<tbody valign="top">
<row>
<entry>Type:</entry>
<entry>Normal</entry>
</row>
<row>
<entry>Documentation:</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="1">
<colspec colname="1" colwidth="217PT" align="left"/>
<tbody valign="top">
<row>
<entry>The new AP is sent a confirmation message.</entry>
</row>
<row>
<entry>Actions:</entry>
</row>
<row>
<entry>entry:release_L2CAP_resources</entry>
</row>
<row>
<entry>do:{circumflex over (&emsp;)}btStack.HCI_DISCONNECT</entry>
</row>
<row>
<entry>State name:</entry>
</row>
<row>
<entry>START_NEW_HO</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="1" colwidth="77PT" align="left"/>
<colspec colname="2" colwidth="140PT" align="left"/>
<tbody valign="top">
<row>
<entry>Type:</entry>
<entry>Normal</entry>
</row>
<row>
<entry>Documentation:</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="1">
<colspec colname="1" colwidth="217PT" align="left"/>
<tbody valign="top">
<row>
<entry>An AP receives a request from another AP to start the page procedure to</entry>
</row>
<row>
<entry>create a new connection with the MT.</entry>
</row>
<row>
<entry>Actions:</entry>
</row>
<row>
<entry>entry:{circumflex over (&emsp;)}btclockManager.GET_CLK_OFFSET</entry>
</row>
<row>
<entry>do:{circumflex over (&emsp;)}btStack.HCI_CREATE_CONN</entry>
</row>
<row>
<entry>State name:</entry>
</row>
<row>
<entry>NEW_HO1</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="1" colwidth="77PT" align="left"/>
<colspec colname="2" colwidth="140PT" align="left"/>
<tbody valign="top">
<row>
<entry>Type:</entry>
<entry>Normal</entry>
</row>
<row>
<entry>Documentation:</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="1">
<colspec colname="1" colwidth="217PT" align="left"/>
<tbody valign="top">
<row>
<entry>OK, we&apos;ve got a new connection setup with MT. Let&apos;s put it into hold</entry>
</row>
<row>
<entry>mode.</entry>
</row>
<row>
<entry>Actions:</entry>
</row>
<row>
<entry>do:{circumflex over (&emsp;)}btStack.HCI_HOLD_SET</entry>
</row>
<row>
<entry>State name:</entry>
</row>
<row>
<entry>NEW_HO2</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="1" colwidth="77PT" align="left"/>
<colspec colname="2" colwidth="140PT" align="left"/>
<tbody valign="top">
<row>
<entry>Type:</entry>
<entry>Normal</entry>
</row>
<row>
<entry>Documentation:</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="1">
<colspec colname="1" colwidth="217PT" align="left"/>
<tbody valign="top">
<row>
<entry>We wait for the old AP to confirm.</entry>
</row>
<row>
<entry>Actions:</entry>
</row>
<row>
<entry>do:L2CAP_configuration</entry>
</row>
<row>
<entry>State name:</entry>
</row>
<row>
<entry>ABORT_PAGE</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="1" colwidth="77PT" align="left"/>
<colspec colname="2" colwidth="140PT" align="left"/>
<tbody valign="top">
<row>
<entry>Type:</entry>
<entry>Normal</entry>
</row>
<row>
<entry>Documentation:</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="1">
<colspec colname="1" colwidth="217PT" align="left"/>
<tbody valign="top">
<row>
<entry>In order to abort current paging activity, a short page timeout</entry>
</row>
<row>
<entry>is set.</entry>
</row>
<row>
<entry>Actions:</entry>
</row>
<row>
<entry>entry:{circumflex over (&emsp;)}btStack.HCI_WRITE_PAGE_TO</entry>
</row>
<row>
<entry>Transition from INIT to IDLE</entry>
</row>
<row>
<entry>Transition from IDLE to START_OLD_HO</entry>
</row>
<row>
<entry>MT_HO_REQ</entry>
</row>
<row>
<entry>Documentation:</entry>
</row>
<row>
<entry>Handover request sent by MT.</entry>
</row>
<row>
<entry>Transition from IDLE to START_NEW_HO</entry>
</row>
<row>
<entry>AP_PAGE_REQ</entry>
</row>
<row>
<entry>Documentation:</entry>
</row>
<row>
<entry>A page request is received: let&apos;s see if a MT is in range.</entry>
</row>
<row>
<entry>Transition from START_OLD_HO to OLD_HO1</entry>
</row>
<row>
<entry>HCI_MODE_CHANGE</entry>
</row>
<row>
<entry>Documentation:</entry>
</row>
<row>
<entry>The MT has been put into hold mode.</entry>
</row>
<row>
<entry>Transition from OLD_HO1 to OLD_HO2</entry>
</row>
<row>
<entry>IAPP_PAGE_ACK</entry>
</row>
<row>
<entry>Documentation:</entry>
</row>
<row>
<entry>A new AP has captured the mobile.</entry>
</row>
<row>
<entry>Transition from OLD_HO1 to IDLE</entry>
</row>
<row>
<entry>HCI_MODE_CHANGE</entry>
</row>
<row>
<entry>Documentation:</entry>
</row>
<row>
<entry>No new AP has captured the mobile.</entry>
</row>
<row>
<entry>Transition from OLD_HO2 to IDLE</entry>
</row>
<row>
<entry>HCI_DISC_COMPLETE</entry>
</row>
<row>
<entry>Documentation:</entry>
</row>
<row>
<entry>The old connection is torn down.</entry>
</row>
<row>
<entry>Transition from START_NEW_HO to IDLE</entry>
</row>
<row>
<entry>HCI_PAGE_TO</entry>
</row>
<row>
<entry>Documentation:</entry>
</row>
<row>
<entry>We haven&apos;t received any response from the MT.</entry>
</row>
<row>
<entry>Transition from START_NEW_HO to NEW_HO1</entry>
</row>
<row>
<entry>HCI_CONN_COMPLETE</entry>
</row>
<row>
<entry>Documentation:</entry>
</row>
<row>
<entry>A new connection has been successfully established</entry>
</row>
<row>
<entry>with the MT.</entry>
</row>
<row>
<entry>Transition from START_NEW_HO to ABORT_PAGE</entry>
</row>
<row>
<entry>IAPP_PAGE_ACK</entry>
</row>
<row>
<entry>Documentation:</entry>
</row>
<row>
<entry>Another AP has established the new connection with the</entry>
</row>
<row>
<entry>MT and sends an ACK message using IAPP. As a</entry>
</row>
<row>
<entry>consequence, paging is aborted.</entry>
</row>
<row>
<entry>Transition from NEW_HO1 to NEW_HO2</entry>
</row>
<row>
<entry>HCI_MODE_CHANGE {circumflex over (&emsp;)}IAPP_PAGE_ACK</entry>
</row>
<row>
<entry>Documentation:</entry>
</row>
<row>
<entry>OK MT is in hold mode, let&apos;s acknowledge the old AP.</entry>
</row>
<row>
<entry>Transition from NEW_HO2 to IDLE</entry>
</row>
<row>
<entry>Documentation:</entry>
</row>
<row>
<entry>Confirmation from the old AP has been received.</entry>
</row>
<row>
<entry>Transition from ABORT_PAGE to IDLE</entry>
</row>
<row>
<entry>PAGE_TO</entry>
</row>
<row>
<entry>Documentation:</entry>
</row>
<row>
<entry>When the page timeout expires, the page timeout value</entry>
</row>
<row>
<entry>is reset to the default (not shown in the diagram)</entry>
</row>
<row>
<entry>before returning to the IDLE state.</entry>
</row>
<row><entry namest="1" nameend="1" align="center" rowsep="1"></entry>
</row>
</tbody>
</tgroup>
</table>
</table-cwu>
</paragraph>
<paragraph id="P-0147" lvl="0"><number>&lsqb;0147&rsqb;</number>  
<table-cwu id="TABLE-US-00004">
<number>4</number>
<table frame="none" colsep="0" rowsep="0">
<tgroup align="left" colsep="0" rowsep="0" cols="1">
<colspec colname="1" colwidth="217PT" align="center"/>
<thead>
<row>
<entry></entry>
</row>
<row><entry namest="1" nameend="1" align="center" rowsep="1"></entry>
</row>
<row>
<entry>Harel notation for <cross-reference target="DRAWINGS">FIG. 8</cross-reference></entry>
</row>
<row><entry namest="1" nameend="1" align="center" rowsep="1"></entry>
</row>
</thead>
<tbody valign="top">
<row>
<entry></entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="1">
<colspec colname="1" colwidth="217PT" align="left"/>
<tbody valign="top">
<row>
<entry>State name:</entry>
</row>
<row>
<entry>INIT</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="1" colwidth="77PT" align="left"/>
<colspec colname="2" colwidth="140PT" align="left"/>
<tbody valign="top">
<row>
<entry>Type:</entry>
<entry>StartState</entry>
</row>
<row>
<entry>State name:</entry>
</row>
<row>
<entry>IDLE</entry>
</row>
<row>
<entry>Type:</entry>
<entry>Normal</entry>
</row>
<row>
<entry>Documentation:</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="1">
<colspec colname="1" colwidth="217PT" align="left"/>
<tbody valign="top">
<row>
<entry>In this state the mobile terminal is assumed to have an existing connection</entry>
</row>
<row>
<entry>with an access point, whose quality is periodically monitored.</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="1" colwidth="77PT" align="left"/>
<colspec colname="2" colwidth="140PT" align="left"/>
<tbody valign="top">
<row>
<entry>State name:</entry>
<entry></entry>
</row>
<row>
<entry>START_HO</entry>
</row>
<row>
<entry>Type:</entry>
<entry>Normal</entry>
</row>
<row>
<entry>Documentation:</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="1">
<colspec colname="1" colwidth="217PT" align="left"/>
<tbody valign="top">
<row>
<entry>The fast Bluetooth handoff procedure is started.</entry>
</row>
<row>
<entry>Actions:</entry>
</row>
<row>
<entry>entry:{circumflex over (&emsp;)}MT_HO_REQ</entry>
</row>
<row>
<entry>State name:</entry>
</row>
<row>
<entry>PAGE_SCAN</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="1" colwidth="77PT" align="left"/>
<colspec colname="2" colwidth="140PT" align="left"/>
<tbody valign="top">
<row>
<entry>Type:</entry>
<entry>Normal</entry>
</row>
<row>
<entry>Documentation:</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="1">
<colspec colname="1" colwidth="217PT" align="left"/>
<tbody valign="top">
<row>
<entry>Start the paging procedure for creating a new connection with the neighbor</entry>
</row>
<row>
<entry>AP, the second event between HCI_CONNECTION_COMPLETE</entry>
</row>
<row>
<entry>and HCI_MODE_CHANGE_EVENT is lost.</entry>
</row>
<row>
<entry>Actions:</entry>
</row>
<row>
<entry>do:{circumflex over (&emsp;)}btstack:HCI_WRITE_SCAN_ENABLE</entry>
</row>
<row>
<entry>entry:{circumflex over (&emsp;)}btstack:HCI_WRITE_PAGE</entry>
</row>
<row>
<entry>State name:</entry>
</row>
<row>
<entry>OLD_CONNECTION_DISCONNECT</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="1" colwidth="77PT" align="left"/>
<colspec colname="2" colwidth="140PT" align="left"/>
<tbody valign="top">
<row>
<entry>Type:</entry>
<entry>Normal</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="1">
<colspec colname="1" colwidth="217PT" align="left"/>
<tbody valign="top">
<row>
<entry>Documentation:</entry>
</row>
<row>
<entry>The new connection is put into hold mode.</entry>
</row>
<row>
<entry>Actions:</entry>
</row>
<row>
<entry>entry:{circumflex over (&emsp;)}btStack.HCI_HOLD_SET Transition from INIT to IDLE</entry>
</row>
<row>
<entry>Transition from IDLE to START_HO</entry>
</row>
<row>
<entry>BT_BAD_LINK</entry>
</row>
<row>
<entry>Documentation:</entry>
</row>
<row>
<entry>Link degradation event.</entry>
</row>
<row>
<entry>Transition from START_HO to PAGE_SCAN</entry>
</row>
<row>
<entry>MT_HO_ACK</entry>
</row>
<row>
<entry>Documentation:</entry>
</row>
<row>
<entry>The old AP acknowledges the handoff request. A simple case for</entry>
</row>
<row>
<entry>implementing this ack, is that AP puts the link into hold mode:</entry>
</row>
<row>
<entry>MT_HO_ACK then corresponds to a</entry>
</row>
<row>
<entry>HCI_MODE_CHANGE_EVENT.</entry>
</row>
<row>
<entry>Transition from PAGE_SCAN to (CREATE_CONNECTION)</entry>
</row>
<row>
<entry>Transition from PAGE_SCAN to IDLE</entry>
</row>
<row>
<entry>HCI_MODE_CHANGE{circumflex over (&emsp;)}MT_HO_REJ</entry>
</row>
<row>
<entry>Documentation:</entry>
</row>
<row>
<entry>If no page response arrives from neighbor AP, the connection with old AP</entry>
</row>
<row>
<entry>changes from hold_mode to active_mode. In this case,</entry>
</row>
<row>
<entry>no new connection has been established and we send a handoff reject</entry>
</row>
<row>
<entry>message to the old access point.</entry>
</row>
<row>
<entry>Transition from</entry>
</row>
<row>
<entry>PAGE_SCAN to OLD_CONNECTION_DISCONNECT</entry>
</row>
<row>
<entry>HCI_CONNECTION_COMPLETE</entry>
</row>
<row>
<entry>{circumflex over (&emsp;)}HCI_WRITE_LINK_SUPERVISOR_TO</entry>
</row>
<row>
<entry>Documentation:</entry>
</row>
<row>
<entry>This event arrives when the mobile host is connected with the new AP.</entry>
</row>
<row>
<entry>In response, the link supervisor timeout of the connection with the old AP</entry>
</row>
<row>
<entry>is set to a short value, so that it is automatically torn down when no</entry>
</row>
<row>
<entry>data activity is detected.</entry>
</row>
<row>
<entry>Transition from OLD_CONNECTION_DISCONNECT to IDLE</entry>
</row>
<row>
<entry>HCI_MODE_CHANGE</entry>
</row>
<row>
<entry>Documentation:</entry>
</row>
<row>
<entry>Old connection resuming to active state.</entry>
</row>
<row><entry namest="1" nameend="1" align="center" rowsep="1"></entry>
</row>
</tbody>
</tgroup>
</table>
</table-cwu>
</paragraph>
</detailed-description>
</subdoc-description>
<subdoc-claims>
<claim id="CLM-00001">
<claim-text><highlight><bold>1</bold></highlight>. A method of performing a handoff of a currently wireless connected slave unit (MT) from a first master unit (AP<highlight><subscript>1</subscript></highlight>) of a shared resource network to a further master unit (AP<highlight><subscript>2</subscript></highlight>) of said shared resource network, the method including: 
<claim-text>a) holding in said first master unit information about the topology of said shared resource network; and </claim-text>
<claim-text>b) activating during a said handoff a paging procedure in one or more further master units (AP<highlight><subscript>2-4</subscript></highlight>) based on said topology, in which paging procedure the or each further master unit pages said slave unit. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00002">
<claim-text><highlight><bold>2</bold></highlight>. A method according to <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, including determining in which of said master units (AP<highlight><subscript>2-4</subscript></highlight>) to activate said paging procedure on the basis of their proximity to said first master unit (AP<highlight><subscript>1</subscript></highlight>), preferably activating said paging procedure only in further master units (AP<highlight><subscript>2,3</subscript></highlight>) neighboring said first master unit (AP<highlight><subscript>1</subscript></highlight>). </claim-text>
</claim>
<claim id="CLM-00003">
<claim-text><highlight><bold>3</bold></highlight>. A method according to <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference> or <dependent-claim-reference depends_on="CLM-00002">claim 2</dependent-claim-reference>, including said first master unit (AP<highlight><subscript>1</subscript></highlight>) supplying to the or each further master unit (AP<highlight><subscript>2,3</subscript></highlight>) during a said handoff paging information relating to said slave unit (MT), which information assists the or each neighboring master unit (AP<highlight><subscript>2,3</subscript></highlight>) in paging said slave unit and includes for example an address (MAC) of said slave unit. </claim-text>
</claim>
<claim id="CLM-00004">
<claim-text><highlight><bold>4</bold></highlight>. A method according to any preceding claim, including using said network topology information to select neighboring master units (AP<highlight><subscript>1-4</subscript></highlight>) for the exchange of clock offset information, preferably deriving said clock offset or offsets by exchanging time-stamped information (T<highlight><bold>1</bold></highlight>-T<highlight><bold>4</bold></highlight>) between master units (AP<highlight><subscript>1-4</subscript></highlight>). </claim-text>
</claim>
<claim id="CLM-00005">
<claim-text><highlight><bold>5</bold></highlight>. A method according to any preceding claim, including exchanging messages between said master units (AP<highlight><subscript>1-4</subscript></highlight>) through a shared resource network connecting them and preferably including passing in said messages said network topology information. </claim-text>
</claim>
<claim id="CLM-00006">
<claim-text><highlight><bold>6</bold></highlight>. A method according to any preceding claim, including determining said network topology information substantially upon initialization of said shared resource network or after initialization so as for example to determine which of the neighboring access points (AP<highlight><subscript>1-4</subscript></highlight>) should be contacted to exchange clock offset information in order to take account of clock drifts which occur during network operation. </claim-text>
</claim>
<claim id="CLM-00007">
<claim-text><highlight><bold>7</bold></highlight>. A method according to any preceding claim, including determining said network topology by exporting the value of a master unit native clock (CLKN<highlight><subscript>1-6</subscript></highlight>) to a master unit host (H), for example by means of a vendor specific Host Controller Interface (HCI) command or by periodically sending at least one said master unit (AP<highlight><subscript>1-4</subscript></highlight>) into an inquiry mode in which it communicates with other master units (AP<highlight><subscript>1-4</subscript></highlight>) and uses their responses to update its estimate of their respective clock offsets (CLKE<highlight><subscript>1-4</subscript></highlight>). </claim-text>
</claim>
<claim id="CLM-00008">
<claim-text><highlight><bold>8</bold></highlight>. A method according to any preceding claim, including said slave unit (MT) triggering a handoff procedure by sending a handoff request to its currently connected master unit (AP<highlight><subscript>1</subscript></highlight>) and preferably substantially immediately entering into a continuous page scan, said currently connected master unit (AP<highlight><subscript>1</subscript></highlight>) preferably forwarding said handoff request to one or more substantially neighboring said master units (AP<highlight><subscript>2,3</subscript></highlight>) and preferably including a network address (MAC) of said slave unit (MT). </claim-text>
</claim>
<claim id="CLM-00009">
<claim-text><highlight><bold>9</bold></highlight>. A method according to <dependent-claim-reference depends_on="CLM-00008">claim 8</dependent-claim-reference>, including performing said handoff procedure as a hard hand-over in which resources allocated by said currently connected master unit (AP<highlight><subscript>1</subscript></highlight>) to connection with said slave unit MT are not torn down or released until a connection is at least under establishment between said slave unit and a next or target master unit (AP<highlight><subscript>2</subscript></highlight>), the original connection preferably being broken on the expiration of a preset timeout or on receipt of an acknowledgment message received from said next master unit (AP<highlight><subscript>2</subscript></highlight>) whereby, if an attempted handoff does not succeed, it is still be possible for the slave unit to return to its original connection (&num;<highlight><bold>1</bold></highlight>). </claim-text>
</claim>
<claim id="CLM-00010">
<claim-text><highlight><bold>10</bold></highlight>. A method according to any preceding claim, including, on receipt of a message indicative of connection (&num;<highlight><bold>2</bold></highlight>) of said slave unit (MT) to a next said master unit (AP<highlight><subscript>2</subscript></highlight>), canceling an attempt by a further said master unit (AP<highlight><subscript>3</subscript></highlight>) at paging or connecting with said slave unit. </claim-text>
</claim>
<claim id="CLM-00011">
<claim-text><highlight><bold>11</bold></highlight>. A method according to any preceding claim, including operating said master units (AP<highlight><subscript>1-4</subscript></highlight>) in such a manner that there is substantially no overlap in coverage area between any further master units (AP<highlight><subscript>2,3</subscript></highlight>) neighboring said currently connected master unit (AP<highlight><subscript>1</subscript></highlight>), whereby said slave unit (MT) receives identity packets from preferably only its closest further master unit (AP<highlight><subscript>2</subscript></highlight>). </claim-text>
</claim>
<claim id="CLM-00012">
<claim-text><highlight><bold>12</bold></highlight>. A method according to any preceding claim, including using said network topology information to configure one or more of a group of master units (AP<highlight><subscript>1-4</subscript></highlight>) with information about which of said master units (AP<highlight><subscript>1-4</subscript></highlight>) are neighbors and what are their network addresses (MAC), preferably holding said network topology information in the form of a matrix indicating which said master units (AP<highlight><subscript>1-6</subscript></highlight>) are neighbors, which others are in at least part of the coverage of said network, and preferably storing a said matrix locally to one or more of said master units. </claim-text>
</claim>
<claim id="CLM-00013">
<claim-text><highlight><bold>13</bold></highlight>. A method according to any preceding claim, including gathering said network topology information in an automatic manner, for example by using a mobile probe (MT) adapted to probe said master units (AP<highlight><subscript>1-6</subscript></highlight>) by activating an inquiry procedure in different positions (A-D) within the coverage of said shared resource network and preferably also adapted to make a record of the response or responses from said master units (AP<highlight><subscript>1-6</subscript></highlight>) to said inquiries. </claim-text>
</claim>
<claim id="CLM-00014">
<claim-text><highlight><bold>14</bold></highlight>. A radio communications arrangement for performing a handoff of a currently wireless connected slave unit (MT) from a first master unit (AP<highlight><subscript>1</subscript></highlight>) of a shared resource network to a further master unit (AP<highlight><subscript>2</subscript></highlight>) of said shared resource network, said shared resource network being adapted to hold in said first master unit information about the topology of said network and further adapted to activate during a said handoff a paging procedure in one or more further master units (AP<highlight><subscript>2-4</subscript></highlight>) based on said topology, in which paging procedure one or more said further master units page said slave unit. </claim-text>
</claim>
<claim id="CLM-00015">
<claim-text><highlight><bold>15</bold></highlight>. A method according to any one of <dependent-claim-reference depends_on="CLM-00001">claims 1</dependent-claim-reference> to <dependent-claim-reference depends_on="CLM-00013">13</dependent-claim-reference> or an arrangement according to <dependent-claim-reference depends_on="CLM-00011">claim 14</dependent-claim-reference>, wherein said slave and master units comprise a mobile terminal (MT) and access points (AP<highlight><subscript>1-4</subscript></highlight>) respectively of said shared resource network, which network comprises for example a Bluetooth local area network (BT LAN). </claim-text>
</claim>
<claim id="CLM-00016">
<claim-text><highlight><bold>16</bold></highlight>. A communications unit (MT) for use as a slave unit in a method or arrangement of any one of the preceding claims, said unit being adapted to send a handoff request to a master unit (AP<highlight><subscript>1-4</subscript></highlight>) and to advertise its page scan time window in said handoff request, said unit preferably being adapted to enter into a substantially continuous page scan state during said advertised page scan time window and preferably also being adapted to select from a plurality of paging master units (AP<highlight><subscript>1-4</subscript></highlight>) a particular said master unit (AP<highlight><subscript>2</subscript></highlight>) for connection therewith. </claim-text>
</claim>
<claim id="CLM-00017">
<claim-text><highlight><bold>17</bold></highlight>. A communications unit (AP<highlight><subscript>2</subscript></highlight>) for use as a master unit in a method or arrangement according to any one of <dependent-claim-reference depends_on="CLM-00001">claims 1</dependent-claim-reference> to <dependent-claim-reference depends_on="CLM-00015">15</dependent-claim-reference>, wherein said master unit (AP<highlight><subscript>2</subscript></highlight>) is adapted to page a slave unit (MT) during a handoff procedure, said master unit preferably being adapted to hold information about the topology of a shared resource network of which in use it forms a part, for example which master units (AP<highlight><subscript>1,3,4</subscript></highlight>) are neighbors and what are their addresses (MAC). </claim-text>
</claim>
<claim id="CLM-00018">
<claim-text><highlight><bold>18</bold></highlight>. A communications unit (AP<highlight><subscript>2</subscript></highlight>) according to <dependent-claim-reference depends_on="CLM-00011">claim 17</dependent-claim-reference>, adapted to accept handoff requests from slave units (MT) or from said shared resource network, preferably also adapted to acknowledge said handoff requests and to forward a received said handoff request to at least one neighboring master unit (AP<highlight><subscript>2,3</subscript></highlight>) via a shared resource network, said unit preferably being further adapted to schedule paging processes used to attempt connection with a plurality of slave units (MT). </claim-text>
</claim>
<claim id="CLM-00019">
<claim-text><highlight><bold>19</bold></highlight>. A communications unit (AP<highlight><subscript>1</subscript></highlight>) according to <dependent-claim-reference depends_on="CLM-00011">claim 18</dependent-claim-reference>, wherein, if a number of said handoff requests made from a plurality of slave units (MT) to said communications unit for connection exceeds the available capacity of said communications unit to finalize paging procedures before expiry of any one or more page scan windows of the requesting slave units, a signal indicative of congestion is communicated to one or more further communications units (AP<highlight><subscript>2-4</subscript></highlight>) acting as master units and, if said communications unit (AP<highlight><subscript>1</subscript></highlight>) receives from a slave unit (MT) a handoff request which involves a master unit (AP<highlight><subscript>2</subscript></highlight>) which is congested, said slave unit is informed that it must wait for said handoff, by staying for example in a continuous page scan for an extended period. </claim-text>
</claim>
<claim id="CLM-00020">
<claim-text><highlight><bold>20</bold></highlight>. A communications unit (AP<highlight><subscript>3</subscript></highlight>) according to any one of <dependent-claim-reference depends_on="CLM-00017">claims 17</dependent-claim-reference> to <dependent-claim-reference depends_on="CLM-00019">19</dependent-claim-reference>, wherein said communications unit is adapted to stop paging a particular said slave unit (MT) on or after a message is received indicative of a successful connection between a further communications unit acting as a master unit (AP<highlight><subscript>2</subscript></highlight>) and said slave unit, said further communications unit (AP<highlight><subscript>2</subscript></highlight>) preferably being adapted to send an acknowledgment message to at least one master unit (AP<highlight><subscript>1,3,4</subscript></highlight>) indicative of successful paging of, and preferably also of a successful connection to, a slave unit (MT).</claim-text>
</claim>
</subdoc-claims>
<subdoc-drawings id="DRAWINGS">
<heading lvl="0" align="CENTER">Drawings</heading>
<representative-figure>2</representative-figure>
<figure id="figure-D00000">
<image id="EMI-D00000" file="US20030003912A1-20030102-D00000.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00001">
<image id="EMI-D00001" file="US20030003912A1-20030102-D00001.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00002">
<image id="EMI-D00002" file="US20030003912A1-20030102-D00002.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00003">
<image id="EMI-D00003" file="US20030003912A1-20030102-D00003.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00004">
<image id="EMI-D00004" file="US20030003912A1-20030102-D00004.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00005">
<image id="EMI-D00005" file="US20030003912A1-20030102-D00005.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00006">
<image id="EMI-D00006" file="US20030003912A1-20030102-D00006.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00007">
<image id="EMI-D00007" file="US20030003912A1-20030102-D00007.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00008">
<image id="EMI-D00008" file="US20030003912A1-20030102-D00008.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00009">
<image id="EMI-D00009" file="US20030003912A1-20030102-D00009.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00010">
<image id="EMI-D00010" file="US20030003912A1-20030102-D00010.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00011">
<image id="EMI-D00011" file="US20030003912A1-20030102-D00011.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00012">
<image id="EMI-D00012" file="US20030003912A1-20030102-D00012.TIF" imf="TIFF" ti="DR"/>
</figure>
</subdoc-drawings>
</patent-application-publication>
