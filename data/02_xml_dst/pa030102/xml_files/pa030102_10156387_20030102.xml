<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE patent-application-publication SYSTEM "pap-v16-2002-01-01.dtd" [
<!ENTITY US20030002583A1-20030102-D00000.TIF SYSTEM "US20030002583A1-20030102-D00000.TIF" NDATA TIF>
<!ENTITY US20030002583A1-20030102-D00001.TIF SYSTEM "US20030002583A1-20030102-D00001.TIF" NDATA TIF>
<!ENTITY US20030002583A1-20030102-D00002.TIF SYSTEM "US20030002583A1-20030102-D00002.TIF" NDATA TIF>
<!ENTITY US20030002583A1-20030102-D00003.TIF SYSTEM "US20030002583A1-20030102-D00003.TIF" NDATA TIF>
]>
<patent-application-publication>
<subdoc-bibliographic-information>
<document-id>
<doc-number>20030002583</doc-number>
<kind-code>A1</kind-code>
<document-date>20030102</document-date>
</document-id>
<publication-filing-type>new</publication-filing-type>
<domestic-filing-data>
<application-number>
<doc-number>10156387</doc-number>
</application-number>
<application-number-series-code>10</application-number-series-code>
<filing-date>20020528</filing-date>
</domestic-filing-data>
<foreign-priority-data>
<priority-application-number>
<doc-number>0116119.9</doc-number>
</priority-application-number>
<filing-date>20010630</filing-date>
<country-code>GB</country-code>
</foreign-priority-data>
<technical-information>
<classification-ipc>
<classification-ipc-primary>
<ipc>H04N007/12</ipc>
</classification-ipc-primary>
<classification-ipc-edition>07</classification-ipc-edition>
</classification-ipc>
<classification-us>
<classification-us-primary>
<uspc>
<class>375</class>
<subclass>240120</subclass>
</uspc>
</classification-us-primary>
<classification-us-secondary>
<uspc>
<class>375</class>
<subclass>240260</subclass>
</uspc>
</classification-us-secondary>
</classification-us>
<title-of-invention>Transcoding of video data streams</title-of-invention>
</technical-information>
<inventors>
<first-named-inventor>
<name>
<given-name>Jurgen</given-name>
<middle-name>H.T.</middle-name>
<family-name>Geerlings</family-name>
</name>
<residence>
<residence-non-us>
<city>Valkenswaard</city>
<country-code>NL</country-code>
</residence-non-us>
</residence>
<authority-applicant>INV</authority-applicant>
</first-named-inventor>
</inventors>
<assignee>
<organization-name>KONINKLIJKE PHILIPS ELECTRONICS N.V.</organization-name>
<assignee-type>03</assignee-type>
</assignee>
<correspondence-address>
<name-1>Corporate Patent Counsel</name-1>
<name-2>U.S. Philips Corporation</name-2>
<address>
<address-1>580 White Plains Road</address-1>
<city>Tarrytown</city>
<state>NY</state>
<postalcode>10591</postalcode>
<country>
<country-code>US</country-code>
</country>
</address>
</correspondence-address>
</subdoc-bibliographic-information>
<subdoc-abstract>
<paragraph id="A-0001" lvl="0">MPEG video bitstreams comprising a mixture of I-, P- and B-pictures are transcoded for transfer between apparatuses (<highlight><bold>110 </bold></highlight>and <highlight><bold>112</bold></highlight>), using an intermediate bitstream format which comprise essentially I-pictures. Additional information (<highlight><bold>122</bold></highlight>) is inserted into the intermediate bitstream in user data fields, to identify which pictures were I-pictures in the original bitstream, and which were not. When transcoding again to IPB format (<highlight><bold>126</bold></highlight>), loss of picture quality can be minimised using this knowledge of the original video bitstream structure, in particular by encoding as I-pictures those pictures which were encoded as I-pictures in the original bitstream. </paragraph>
</subdoc-abstract>
<subdoc-description>
<summary-of-invention>
<paragraph id="P-0001" lvl="0"><number>&lsqb;0001&rsqb;</number> The present invention relates to methods and apparatuses for transcoding digital video bitstreams. The invention finds application in transcoding video streams between different bit rates with particular regard to the MPEG-2 Standard as defined in ITU-T Recommendation H.222.0 &verbar; ISO/IEC 13818-1. </paragraph>
<paragraph id="P-0002" lvl="0"><number>&lsqb;0002&rsqb;</number> The MPEG-2 Standard defined above specifies generic methods for multimedia multiplexing, synchronisation and timebase recovery. The MPEG-2 standard uses a variety of methods to reduce temporal redundancy and improve compression, such as estimating differences in the content between pictures. A notional group of pictures (GOP) typically comprises an intra-coded &ldquo;I&rdquo; picture which is coded only using information from itself, predictive &ldquo;P&rdquo; coded pictures which are coded using motion vectors based on a preceding I-picture; and bi-directional predicted &ldquo;B&rdquo; pictures, which are encoded by prediction from I and/or P pictures before and after them in sequence. </paragraph>
<paragraph id="P-0003" lvl="0"><number>&lsqb;0003&rsqb;</number> For certain applications it is desirable to change the format of the data streams through the use of a &ldquo;transcoder&rdquo; which can convert between bitstream formats. This may be achieved simply through, for example, the use of cascaded MPEG Decoder/Coder arrangements. Such an approach decodes the MPEG stream to obtain a video sequence then re-encodes the sequence according to requirements. However, this approach may lead to an unsatisfactory degradation in picture quality compared to the original encoded video stream, due, for example, to less than optimum re-encoding of the video stream and cumulative quantisation errors. </paragraph>
<paragraph id="P-0004" lvl="0"><number>&lsqb;0004&rsqb;</number> Known examples of transcoding schemes include WO 00/70877 which discusses converting between MPEG &ldquo;profiles&rdquo; and transcodes one format of bitstream of high quality, for example for producing &ldquo;contribution quality&rdquo; video, to another format suitable for distribution. </paragraph>
<paragraph id="P-0005" lvl="0"><number>&lsqb;0005&rsqb;</number> One example of transcoding is when a change in bitrate of the MPEG video stream is required, such as when an MPEG video stream is transmitted over a digital interface to be stored on some medium. In MPEG storage devices the video streams are typically stored at low bit rates using the MPEG I, P and B pictures for efficient storage of the compressed stream. However, not all the video pictures may have been encoded from video pictures of the highest quality. Where the stream is transmitted over a higher bitrate data link (for example IEEE 1394) it is desirable to utilise a different bitstream structure, for example consisting of I-pictures only. At the far side of the link, prior to storage for compression purposes, the stream can be re-coded as IBP picture groups. This scheme may result in pictures originally coded as B- or P-pictures being re-encoded as I-pictures, with subsequent coded B- and P-pictures accumulating compression errors leading to lossy transcoding of the original video stream. </paragraph>
<paragraph id="P-0006" lvl="0"><number>&lsqb;0006&rsqb;</number> It is an object of the present invention to provide a method of transcoding MPEG video streams which minimises loss of picture quality. It will be understood that the invention is applicable beyond the strict confines of MPEG-2 compliant streams, as similar problems will generally arise when converting similarly structured (video) data streams between any two formats. </paragraph>
<paragraph id="P-0007" lvl="0"><number>&lsqb;0007&rsqb;</number> The inventors have recognised that to enable high quality transcoding it is possible to use knowledge of the original video bitstream structure to provide optimum picture quality. In order that the transcoder can know about the functional picture structure of the original compressed video stream it is proposed that information describing the functional structure of the original MPEG video stream should be carried in the transmitted stream to be used to create a higher quality transcoded stream. </paragraph>
<paragraph id="P-0008" lvl="0"><number>&lsqb;0008&rsqb;</number> The invention in a first aspect provides a method for minimising loss in picture quality when transcoding a video bitstream comprising the steps of: </paragraph>
<paragraph id="P-0009" lvl="2"><number>&lsqb;0009&rsqb;</number> (a) receiving a first bitstream present in a first format which comprises a sequence of encoded pictures; </paragraph>
<paragraph id="P-0010" lvl="2"><number>&lsqb;0010&rsqb;</number> (b) transcoding said first bitstream to create a second bitstream; </paragraph>
<paragraph id="P-0011" lvl="2"><number>&lsqb;0011&rsqb;</number> (c) inserting additional information derived from said first bitstream into said second bitstream; </paragraph>
<paragraph id="P-0012" lvl="2"><number>&lsqb;0012&rsqb;</number> (d) transmitting said second bitstream together with said additional information in a second format; </paragraph>
<paragraph id="P-0013" lvl="2"><number>&lsqb;0013&rsqb;</number> (e) receiving the second bitstream; and </paragraph>
<paragraph id="P-0014" lvl="2"><number>&lsqb;0014&rsqb;</number> (f) transcoding the second bitstream into a third bitstream in a third format, using said additional information to define picture structure for said second bitstream. </paragraph>
<paragraph id="P-0015" lvl="0"><number>&lsqb;0015&rsqb;</number> The first and third data formats may be essentially the same, while the second format is necessary for transmission via the available data channel. </paragraph>
<paragraph id="P-0016" lvl="0"><number>&lsqb;0016&rsqb;</number> The bitrate of the second bitstream may be higher than that of the first or third bitstreams. </paragraph>
<paragraph id="P-0017" lvl="0"><number>&lsqb;0017&rsqb;</number> In step (b) the second bitstream may be encoded as intra-coded pictures only. </paragraph>
<paragraph id="P-0018" lvl="0"><number>&lsqb;0018&rsqb;</number> In step (c) the additional information derived from said first bitstream may include picture sequence structure information, or may include the picture type information of a picture or a sequence of pictures. </paragraph>
<paragraph id="P-0019" lvl="0"><number>&lsqb;0019&rsqb;</number> In step (d) the additional information may be inserted into a field of the second bitstream defined as a user data field in a standard video data format. </paragraph>
<paragraph id="P-0020" lvl="0"><number>&lsqb;0020&rsqb;</number> In step (e) the additional information derived from said first bitstream may determine the transcoded format of the third bitstream. In particular, pictures intra-coded in the first bitstream may be preferentially transcoded as intra-coded pictures in the third bitstream. </paragraph>
<paragraph id="P-0021" lvl="0"><number>&lsqb;0021&rsqb;</number> The method of encoding used for the video bitstreams may be according to the MPEG-2 format or successor formats, as defined by standards bodies. </paragraph>
<paragraph id="P-0022" lvl="0"><number>&lsqb;0022&rsqb;</number> In step (e) the selection of I-pictures in said first bitstream format may be used to influence the selection of pictures to be encoded as I-pictures in the third bitstream. </paragraph>
<paragraph id="P-0023" lvl="0"><number>&lsqb;0023&rsqb;</number> The additional information about said first bitstream may be stored in user data fields in the second bitstream. The additional information stored may include the contents of bitstream coded fields specifying the encoded format of the first bitstream. </paragraph>
<paragraph id="P-0024" lvl="0"><number>&lsqb;0024&rsqb;</number> Examples of the additional information about said first bitstream inserted into the second bitstream includes the presence of the MPEG &ldquo;group_start_code&rdquo; and the contents of the &ldquo;closed_GOP&rdquo; and &ldquo;broken_link&rdquo; fields which can be inserted into a &ldquo;user_data&rdquo; field after the &ldquo;picture_header&rdquo; field. </paragraph>
<paragraph id="P-0025" lvl="0"><number>&lsqb;0025&rsqb;</number> Further or alternative information which can be used in the method and inserted into the stream includes the contents of the MPEG &ldquo;picture_coding_type&rdquo; field inserted in a &ldquo;user_data&rdquo; field after the &ldquo;picture_header&rdquo; field. Formats other than MPEG will provide analogous information fields which can be used to implement the invention. </paragraph>
<paragraph id="P-0026" lvl="0"><number>&lsqb;0026&rsqb;</number> The steps (a)-(d) may be performed in a first video processing apparatus, while steps (e) and (f) are performed in a second apparatus connected to the first apparatus for the transmission of said second bitstream. </paragraph>
<paragraph id="P-0027" lvl="0"><number>&lsqb;0027&rsqb;</number> Accordingly, the invention further provides a method of transcoding a first bitstream in a first format to a second bitstream in a second format for transmission over a digital interface, the transcoding means including means for embedding in said second bitstream additional information regarding the structure of said first bitstream in said first format. </paragraph>
<paragraph id="P-0028" lvl="0"><number>&lsqb;0028&rsqb;</number> The bitrate of said second bitstream may be higher than the bitrate of said first bitstream. </paragraph>
<paragraph id="P-0029" lvl="0"><number>&lsqb;0029&rsqb;</number> The additional information may specify which pictures encoded as intra-coded pictures in said second bitstream were not encoded as intra-coded pictures in said first bitstream. </paragraph>
<paragraph id="P-0030" lvl="0"><number>&lsqb;0030&rsqb;</number> Similarly, the invention yet further provides a method of transcoding a second bitstream in a second format to a third bitstream in a third format wherein said second bitstream in a second format is received over a digital interface and transcoded into said third bitstream in said third format using information regarding the structure of a first bitstream in a first format embedded in said second bitstream. </paragraph>
<paragraph id="P-0031" lvl="0"><number>&lsqb;0031&rsqb;</number> The bitrate of said second bitstream may be higher than the bitrate of said third bitstream. </paragraph>
<paragraph id="P-0032" lvl="0"><number>&lsqb;0032&rsqb;</number> Where the third bitstream includes both inter-coded and intra-coded pictures, the additional information may be used to control which pictures, encoded as intra-coded pictures in said second bitstream, should be encoded as intra-coded pictures in said third bitstream in preference to other pictures also encoded as intra-coded pictures in said second bitstream. </paragraph>
<paragraph id="P-0033" lvl="0"><number>&lsqb;0033&rsqb;</number> The method may further comprise recording of said third bitstream on a record carrier implementing any of the methods set forth above. </paragraph>
<paragraph id="P-0034" lvl="0"><number>&lsqb;0034&rsqb;</number> The method of transcoding herein described may be implemented using software or hardware solutions only, or a combination of both. </paragraph>
<paragraph id="P-0035" lvl="0"><number>&lsqb;0035&rsqb;</number> In another aspect of the invention there is provided an electronic signal representing a video stream encoded in an intermediate format as a series of intra-coded pictures, the signal further comprising encoded additional historical functional information indicating the picture type and picture sequence from which said intra-coded pictures were derived. Said electronic signal may comprise historical functional information about said video stream structure including picture sequence and picture type information that would otherwise be lost in a transcoding process. </paragraph>
<paragraph id="P-0036" lvl="0"><number>&lsqb;0036&rsqb;</number> Said historical functional information may be used to control which pictures, previously encoded as intra-coded pictures in said second bitstream, should be encoded in the future as intra-coded pictures bitstream in preference to other pictures also encoded as intra-coded pictures in said second bitstream. </paragraph>
<paragraph id="P-0037" lvl="0"><number>&lsqb;0037&rsqb;</number> The invention further provides apparatus comprising means specifically adapted for implementing any of the methods according to the invention set forth above, as defined in the attached claims, to which reference should now be made, and the disclosure of which is comprised herein by reference. The method of transcoding herein described may be implemented using software or hardware solutions only, or a combination of both. </paragraph>
<paragraph id="P-0038" lvl="0"><number>&lsqb;0038&rsqb;</number> The system further provides means adapted to recording said transcoded video stream in said third format upon suitable record carrier means.</paragraph>
</summary-of-invention>
<brief-description-of-drawings>
<paragraph id="P-0039" lvl="0"><number>&lsqb;0039&rsqb;</number> Embodiments of the invention will now be described, by way of example only, by reference to the accompanying drawings, in which: </paragraph>
<paragraph id="P-0040" lvl="0"><number>&lsqb;0040&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1</cross-reference> illustrates the format of picture sequences in a MPEG-compliant bitstream; </paragraph>
<paragraph id="P-0041" lvl="0"><number>&lsqb;0041&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 2</cross-reference> illustrates an example digital video entertainment system in which an embodiment of the invention is applied; </paragraph>
<paragraph id="P-0042" lvl="0"><number>&lsqb;0042&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3</cross-reference> illustrates in more detail an example of a transcoding process in the digital video system of <cross-reference target="DRAWINGS">FIG. 2</cross-reference>; and </paragraph>
<paragraph id="P-0043" lvl="0"><number>&lsqb;0043&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 4</cross-reference> illustrates structures in the transcoding process of <cross-reference target="DRAWINGS">FIG. 3</cross-reference>.</paragraph>
</brief-description-of-drawings>
<detailed-description>
<paragraph id="P-0044" lvl="0"><number>&lsqb;0044&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1</cross-reference> illustrates the format of compressed video data in an MPEG elementary stream (ES) format showing key features and structures of the bitstream with regard to picture sequence coding and display order. In practice, the video data is packetised and interleaved with audio and other data streams. The details of this transport mechanism are not relevant for an understanding of the present invention, and will not be discussed further. Suffice it to say, within a transport stream, the payload of successive packets having a certain stream forms a continuous elementary stream of data shown schematically as ES in <cross-reference target="DRAWINGS">FIG. 1</cross-reference>. In the case of a video elementary stream ES-VIDEO, various picture sequences of video clips SEQ are present, each including at its start a sequence header SEQH. Various parameters of the decoder including quantisation matrices, buffer sizes and the like are specified in the sequence header. Accordingly, correct playback of the video stream can only be achieved by starting the decoder at the location of a sequence header. Within the data for each sequence are one or more &ldquo;access units&rdquo; of the video data, each corresponding to a picture. Each picture is preceded by a picture start code PSC. A group of pictures GOP may be preceded by a group start code GSC, all following a particular sequence header SEQH. </paragraph>
<paragraph id="P-0045" lvl="0"><number>&lsqb;0045&rsqb;</number> As is well known, pictures in MPEG-2 and other modern digital formats are generally encoded by reference to one another so as to reduce temporal redundancy and achieve data compression. Motion compensation provides an estimate of the content of one picture from the content already decoded for a neighbouring picture or pictures. Therefore a group of pictures GOP may comprise: an intra-coded &ldquo;I&rdquo; picture, which is coded without reference to other pictures; &ldquo;P&rdquo; (predictive) coded pictures which are coded using motion vectors based on a preceding I-picture; and bi-directional predicted &ldquo;B&rdquo; pictures, which are encoded by prediction from I and/or P-pictures before and after them in sequence. The amount of data required for a B picture is less than that required for a P picture, which in turn is less than that required for an I picture. On the other hand, since the P and B pictures are encoded only with reference to other pictures, it is only the I pictures which provide an actual entry point for starting playback of a given sequence. </paragraph>
<paragraph id="P-0046" lvl="0"><number>&lsqb;0046&rsqb;</number> It will be noted that the GOP data, the I and P pictures are encoded in the bitstream before the corresponding B pictures, and then re-ordered after decoding so as to achieve the correct presentation order. This ensures that the necessary neighbouring reference frames have been decoded before data arrives for a productively encoded B or P frame. Thus, to present the sequence of frames I<highlight><bold>0</bold></highlight>, B<highlight><bold>1</bold></highlight>, B<highlight><bold>2</bold></highlight>, I<highlight><bold>8</bold></highlight> in the example of <cross-reference target="DRAWINGS">FIG. 1</cross-reference>, the images are encoded in the order I<highlight><bold>0</bold></highlight>, P<highlight><bold>3</bold></highlight>, B<highlight><bold>1</bold></highlight>, B<highlight><bold>2</bold></highlight>, P<highlight><bold>6</bold></highlight>, B<highlight><bold>4</bold></highlight>, B<highlight><bold>5</bold></highlight>, I<highlight><bold>8</bold></highlight>, B<highlight><bold>7</bold></highlight> and so on. </paragraph>
<paragraph id="P-0047" lvl="0"><number>&lsqb;0047&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 2</cross-reference> illustrates an example home digital video entertainment system, including a digital TV tuner <highlight><bold>100</bold></highlight>, a set top box <highlight><bold>102</bold></highlight> for decoding digital video signals, controlling access to pay channels and so forth, a digital video playback and recording device <highlight><bold>104</bold></highlight> such as a DVD or future DVR recorder, and the storage medium itself (recordable DVD disc <highlight><bold>106</bold></highlight>). In this example, a conventional TV set <highlight><bold>108</bold></highlight> is used in this configuration for displaying pictures from a satellite, cable or terrestrial broadcast, or from a recording on disc <highlight><bold>106</bold></highlight>. Between the digital tuner <highlight><bold>100</bold></highlight> and the set top box <highlight><bold>102</bold></highlight>, MPEG transport stream (TS) format signals carry a number of digital TV channels, some of which may be scrambled for decoding with special conditional access (pay TV) arrangements. The standard digital broadcast formats, for example DVB, ATSC and B4SB, are specific applications within the MPEG-2 transport stream format. </paragraph>
<paragraph id="P-0048" lvl="0"><number>&lsqb;0048&rsqb;</number> Set top box <highlight><bold>102</bold></highlight> also decodes a desired programme from within the transport stream TS, to provide analogue audio and video signals to the TV set <highlight><bold>108</bold></highlight>. These analogue signals can of course be recorded by a conventional video recorder (VCR). On the other hand, for maximum quality and functionality, the direct digital-to-digital recorder such as DVD or DVR recorder <highlight><bold>104</bold></highlight> is preferred. This is connected to the set top box <highlight><bold>102</bold></highlight> via a digital interface <highlight><bold>109</bold></highlight> such as IEEE1394 (&ldquo;Firewire&rdquo;). This carries a &ldquo;partial TS&rdquo; in which the selected programme is separated from the larger TS multiplex, and presented still within the TS format. On the other hand, to take advantage of the improved directory structure and random-access features, the player/recorder <highlight><bold>104</bold></highlight> is arranged to convert the TS format into &ldquo;programme stream&rdquo; (PS) format for recording on the disc <highlight><bold>106</bold></highlight>, and to convert PS format streams recorded on disc <highlight><bold>106</bold></highlight> into partial TS format for playback via the digital interface <highlight><bold>109</bold></highlight> and set top box <highlight><bold>102</bold></highlight> on the TV <highlight><bold>108</bold></highlight>. </paragraph>
<paragraph id="P-0049" lvl="0"><number>&lsqb;0049&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3</cross-reference> illustrates an example of a transcoding process implemented in a digital video system such as that illustrated in <cross-reference target="DRAWINGS">FIG. 2</cross-reference>. In this generalised example there is a transmitter <highlight><bold>110</bold></highlight>, receiver <highlight><bold>112</bold></highlight> and digital interface <highlight><bold>114</bold></highlight>. Additionally there is a source encoder <highlight><bold>116</bold></highlight> supplying MPEG encoded IPB frames, such as digital TV tuner <highlight><bold>100</bold></highlight> of <cross-reference target="DRAWINGS">FIG. 2</cross-reference>. The function of transmitter <highlight><bold>110</bold></highlight> may be implemented for example by the set top box <highlight><bold>102</bold></highlight> of <cross-reference target="DRAWINGS">FIG. 2</cross-reference> and comprises an MPEG decoder <highlight><bold>118</bold></highlight> and MPEG encoder <highlight><bold>120</bold></highlight>. The receiver <highlight><bold>112</bold></highlight> in this example is analogous to the recorder <highlight><bold>104</bold></highlight> of <cross-reference target="DRAWINGS">FIG. 2</cross-reference> and comprises MPEG decoder <highlight><bold>124</bold></highlight>, MPEG encoder <highlight><bold>126</bold></highlight> and storage device <highlight><bold>128</bold></highlight>. Additional encoding means <highlight><bold>122</bold></highlight> are provided in transmitter <highlight><bold>110</bold></highlight> to analyse and encode video bitstream information into an intermediary video bitstream: similarly additional decoding means <highlight><bold>130</bold></highlight> is provided in the receiver <highlight><bold>112</bold></highlight> to extract the same encoded stream information from the intermediary video bitstream. Display means <highlight><bold>132</bold></highlight> of transmitter <highlight><bold>110</bold></highlight> may be the television of <cross-reference target="DRAWINGS">FIG. 2</cross-reference> and storage medium <highlight><bold>128</bold></highlight> in the receiver <highlight><bold>112</bold></highlight> a recordable DVD disc, magnetic hard disc, or other recordable medium. </paragraph>
<paragraph id="P-0050" lvl="0"><number>&lsqb;0050&rsqb;</number> In this example the video bitstream may be encoded in either PS or TS format, and the format of the bitstream need not remain the same across the whole system. The final video bitstream will be recorded onto storage medium <highlight><bold>128</bold></highlight> as a PS format bitstream, for example. </paragraph>
<paragraph id="P-0051" lvl="0"><number>&lsqb;0051&rsqb;</number> In MPEG storage devices such as those depicted in <cross-reference target="DRAWINGS">FIGS. 1 and 2</cross-reference> the video streams are typically stored at low bit rates using MPEG I, P and B-pictures. However, where the stream is transmitted over a higher bit rate data link, for example standard IEEE 1394 (Firewire), it is expected that in real-time a different bitstream structure will be used, typically comprising I-pictures only. </paragraph>
<paragraph id="P-0052" lvl="0"><number>&lsqb;0052&rsqb;</number> In the example of <cross-reference target="DRAWINGS">FIG. 3 a</cross-reference> video stream is originally encoded as IPB pictures at a first bitrate by source encoder <highlight><bold>116</bold></highlight>. It will be appreciated that source encoder <highlight><bold>116</bold></highlight> may be a recording or broadcast encoder external to the consumer system depicted in <cross-reference target="DRAWINGS">FIG. 2</cross-reference>. The video bitstream is wanted as I-pictures only for transmission over digital interface <highlight><bold>114</bold></highlight>. In order to do this the originally encoded video stream is decoded by MPEG decoder <highlight><bold>118</bold></highlight> and re-encoded by MPEG encoder <highlight><bold>120</bold></highlight> as I-pictures only. The I-pictures only MPEG bitstream is transmitted across digital interface <highlight><bold>114</bold></highlight> to receiver <highlight><bold>112</bold></highlight> where the I-pictures are transcoded to a lower bitrate as a series of IPB pictures decoded by decoder <highlight><bold>124</bold></highlight> and recoded by encoder <highlight><bold>126</bold></highlight>, for storage on medium <highlight><bold>128</bold></highlight>. The differences between TS and PS formats are not material to the present invention, and need not be discussed in detail. Examples of transcoding between PS and TS formats are presented in our co-pending International patent applications numbers WO 01/50761 and WO 01/50773. </paragraph>
<paragraph id="P-0053" lvl="0"><number>&lsqb;0053&rsqb;</number> In MPEG coding/decoding the coded order, or order of the coded pictures in the bitstream, is the order in which a decoder receives them in the bitstream and reconstructs them. The display order, or presentation order of the reconstructed pictures at the output of the decoding process, need not be the same as the coded order. The MPEG standard defines rules by which pictures are re-ordered. For example, when the sequence contains no coded B-pictures, the coded order is the same as the display order. When B-pictures are present in the sequence, re-ordering is performed according to certain rules. For example, if the current picture in coded order is a B-picture, the output picture is the picture reconstructed from that B-picture. If the current picture in coded order is a I-picture or P-picture, the output picture is the picture reconstructed from the previous I-picture or P-picture if one exists. If none exists, at the start of the sequence, no picture is output. The picture reconstructed from the final I-picture or P-picture is output immediately after the picture reconstructed when the last coded picture in the sequence was removed from the video buffering verifier (VBV) buffer. </paragraph>
<paragraph id="P-0054" lvl="0"><number>&lsqb;0054&rsqb;</number> MPEG encoder <highlight><bold>126</bold></highlight> will not reproduce a lossless copy of the video stream as produced by encoder <highlight><bold>116</bold></highlight> and decoded by MPEG decoder <highlight><bold>118</bold></highlight>. However, since there is no need for compression at this stage in the process, MPEG encoder <highlight><bold>120</bold></highlight> encodes all picture types as I-pictures only, including B- and P-pictures. In this way quality loss should be minimal. Subsequently, after transmission across digital interface <highlight><bold>114</bold></highlight> the I-picture only stream will be decoded into a picture stream and re-encoded by encoder <highlight><bold>126</bold></highlight> into a sequence of I P B pictures for recording at <highlight><bold>128</bold></highlight>. </paragraph>
<paragraph id="P-0055" lvl="0"><number>&lsqb;0055&rsqb;</number> It will be seen from the above that the complete process for making a recording from a digital TV broadcast in the digital home video system of <cross-reference target="DRAWINGS">FIGS. 2 and 3</cross-reference> involves receiving (from <highlight><bold>116</bold></highlight>) a first bitstream encoded in a first format, transcoding it (at <highlight><bold>118</bold></highlight> and <highlight><bold>120</bold></highlight>) into a second bitstream in a second format and finally transcoding the second bitstream (at <highlight><bold>124</bold></highlight>, <highlight><bold>126</bold></highlight>) into a third bitstream in a third format for recording at <highlight><bold>128</bold></highlight>. The first bitstream may be referred to as the source data stream and the third bitstream may be referred to as a destination data stream, while the second bitstream is an intermediate data stream of a form compatible with the interface <highlight><bold>114</bold></highlight>. In order to view the recoding via display <highlight><bold>132</bold></highlight>, it can be appreciated that further decoding and re-coding into the intermediate stream format will be required, before final decoding and display. </paragraph>
<paragraph id="P-0056" lvl="0"><number>&lsqb;0056&rsqb;</number> The recoding processes at <highlight><bold>120</bold></highlight> and <highlight><bold>126</bold></highlight> will each introduce a loss of quality in the final video picture, as it is replayed from medium <highlight><bold>128</bold></highlight> at a later date. P and B pictures are particularly of lower quality, due to their greater compression. The loss of quality is exacerbated in cases of where a frame encoded as a P or B picture in the source stream is recorded as an I-picture in the destination stream. The resulting I picture will be used as a reference for the decoding of neighbouring pictures in the playback of the destination stream at a later date, leading to a widespread degradation in the final playback image. </paragraph>
<paragraph id="P-0057" lvl="0"><number>&lsqb;0057&rsqb;</number> To improve the picture quality of the playback video in the novel system proposed here, there is provided at the transmitter <highlight><bold>110</bold></highlight> side of the system means <highlight><bold>122</bold></highlight> for retaining information from the source bitstream which would normally be discarded by decoder <highlight><bold>118</bold></highlight>, and inserting this information into the intermediate datastream when it is encoded by encoder <highlight><bold>120</bold></highlight>. Correspondingly, there is provided on the receiver <highlight><bold>112</bold></highlight> side of the system means <highlight><bold>130</bold></highlight> for recovering the information inserted into the intermediate data stream by means <highlight><bold>122</bold></highlight>. This recovered information about the originally coded bitstream can be used to ensure that MPEG encoder <highlight><bold>126</bold></highlight> encodes a video bitstream of optimum quality, as will be described. </paragraph>
<paragraph id="P-0058" lvl="0"><number>&lsqb;0058&rsqb;</number> The means <highlight><bold>122</bold></highlight> for analysing and encoding the additional information required for the tracking of the I-picture across the transcoding process can be implemented as an integral component of the set top box <highlight><bold>102</bold></highlight> of <cross-reference target="DRAWINGS">FIG. 2</cross-reference>, for example as part of the MPEG coded hardware or software. Similarly the means <highlight><bold>130</bold></highlight> for recovering the additional information can be implemented as an integral component of the player/recorder <highlight><bold>104</bold></highlight>. </paragraph>
<paragraph id="P-0059" lvl="0"><number>&lsqb;0059&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 4</cross-reference> illustrates an example of the transcoding of a source video bitstream <highlight><bold>140</bold></highlight> from a first format to a destination video bitstream <highlight><bold>142</bold></highlight> in a third format by way of intermediate video bitstream <highlight><bold>144</bold></highlight> in a second format. In this example the first and third formats are IPB sequences and the second format a sequence of I-pictures only, such as the case when a MPEG video bitstream is transmitted over digital interface <highlight><bold>114</bold></highlight>. Video streams <highlight><bold>140</bold></highlight>, <highlight><bold>142</bold></highlight>, <highlight><bold>144</bold></highlight> are shown at a level of detail showing only the GOP <highlight><bold>146</bold></highlight>, <highlight><bold>148</bold></highlight>, <highlight><bold>150</bold></highlight> structure and resultant picture presentation order <highlight><bold>150</bold></highlight>, <highlight><bold>152</bold></highlight>, <highlight><bold>154</bold></highlight>. As detailed elsewhere the GOP includes group start codes and picture start codes GSC and PSC coding. </paragraph>
<paragraph id="P-0060" lvl="0"><number>&lsqb;0060&rsqb;</number> In the scheme shown and also referring to <cross-reference target="DRAWINGS">FIG. 3, a</cross-reference> sequence of GOPs <highlight><bold>146</bold></highlight> is analysed before the stage of decoding a first video stream by decoder <highlight><bold>118</bold></highlight> in <cross-reference target="DRAWINGS">FIG. 3</cross-reference>. The required Information regarding the original stream structure is analysed for later use by receiver <highlight><bold>112</bold></highlight>. In this example, the fields containing information identifying the beginning of a group of pictures, and the picture type (I-, B- or P-picture) is identified and acquired, as is detailed later. </paragraph>
<paragraph id="P-0061" lvl="0"><number>&lsqb;0061&rsqb;</number> The decoded video bitstream is now encoded by encoder <highlight><bold>120</bold></highlight> into bitstream <highlight><bold>144</bold></highlight> comprising a sequence of I-pictures <highlight><bold>148</bold></highlight> only, for transmission across digital interface <highlight><bold>114</bold></highlight>. Each of the encoded I-pictures in this bitstream be derived from and may correspond to I-, P- or B-pictures of the original video stream <highlight><bold>140</bold></highlight>. At the stage of encoding the I-pictures the information acquired by means <highlight><bold>122</bold></highlight> regarding the original I-picture sequences of the first video bitstream <highlight><bold>140</bold></highlight> is inserted into I-picture only bitstream <highlight><bold>144</bold></highlight>. </paragraph>
<paragraph id="P-0062" lvl="0"><number>&lsqb;0062&rsqb;</number> An MPEG encoded video stream has a well defined video bitstream syntax which lists such parameters as start code values, video sequence information, header information and user data, amongst others. Combined with the MPEG video stream semantics, legal bitstreams may then be produced. By interrogation of the coding data it is possible to extract data which describes the structure of the encoded video stream. Additionally, user defined data fields can be specified. Once the required information about the original video stream has been acquired then it can be transmitted with the intermediary stream to the receiver <highlight><bold>112</bold></highlight>. This can be done by inserting the information into other fields in the encoded video Elementary Stream. </paragraph>
<paragraph id="P-0063" lvl="0"><number>&lsqb;0063&rsqb;</number> It is possible, therefore to track and store the order of the I, P and B-pictures within a GOP. This can be done by tracking the location and content of the fields &ldquo;group_start code&rdquo; and &ldquo;picture_coding_type&rdquo; fields in the MPEG bitstream. The field group_start_code identifies the beginning of a group of pictures header. The field picture_coding_type identifies whether a picture is an intra-coded picture(I), predictive-coded picture(P) or bi-directionally predictive-coded picture(B). The content of these fields can be acquired and transmitted in order to track which of the newly encoded pictures, which are now all coded as I-pictures only, were originally I-pictures in the source video stream. </paragraph>
<paragraph id="P-0064" lvl="0"><number>&lsqb;0064&rsqb;</number> The information acquired from the original bitstream <highlight><bold>140</bold></highlight> can be stored within specified user defined fields &ldquo;user data&rdquo;, here indicated by U(I), U(P) and U(B) in the I-picture only bitstream <highlight><bold>144</bold></highlight>. The MPEG standard can specify exact locations of such fields in the video bitstream. One possible location to store the required information is the user_data field of the picture_header field. Of course, the information may be stored within other suitable data fields. User data fields are defined by MPEG in the group_of pictures_header, for example. However, the structure of the second bitstream in the present example means that there will generally be too few group_of pictures_header fields. </paragraph>
<paragraph id="P-0065" lvl="0"><number>&lsqb;0065&rsqb;</number> The newly encoded I-picture only stream has been received and decoded, and the original stream structure extracted therefrom by means <highlight><bold>130</bold></highlight>. MPEG decoder <highlight><bold>124</bold></highlight> receives the I-picture only bitstream and decodes to produce a video bitstream which is subsequently re-encoded by encoder <highlight><bold>126</bold></highlight> to produce third bitstream <highlight><bold>142</bold></highlight>. The additional information (<highlight><bold>122</bold></highlight>) acquired about the structure of the original bitstream <highlight><bold>140</bold></highlight> now can be used to ensure that only I-pictures from original bitstream <highlight><bold>140</bold></highlight> are used to encode I-pictures in the final bitstream <highlight><bold>142</bold></highlight>, thus ensuring optimal quality of the encoded bitstream <highlight><bold>142</bold></highlight>. This optimal quality bitstream can now be recorded on storage medium <highlight><bold>128</bold></highlight>. </paragraph>
<paragraph id="P-0066" lvl="0"><number>&lsqb;0066&rsqb;</number> While the policy of always encoding I pictures from I-pictures is clearly the ideal in this embodiment, there may of course be other factors which cause the encoder to deviate from this rule on occasion. In particular, bitrate constraints, editing points and the like may require the encoder to encode I-pictures from frames originally encoded as P- or B-pictures. Provided that the encoder exhibits a preference for encoding I-pictures from I-pictures, however, degradation of quality can be minimised. </paragraph>
<paragraph id="P-0067" lvl="0"><number>&lsqb;0067&rsqb;</number> Those skilled in the art will appreciate that the embodiments described above are presented by way of example only, and that many further modifications and variations are possible within the spirit and scope of the invention. For example, the method of transcoding herein described may be implemented using software or hardware solutions only, or a combination of both. Also, MPEG-2 standard is cited as only one example of a compressed video format. Many other formats including proprietary video streaming formats and alternate versions of MPEG such as MPEG-4 have the same coding principles, and the skilled person will readily see how the principles of the present invention can be applied there also. </paragraph>
<paragraph id="P-0068" lvl="0"><number>&lsqb;0068&rsqb;</number> Finally, it will be understood that the home video system illustrated in <cross-reference target="DRAWINGS">FIG. 2</cross-reference> is only one example system in which the invention may be applied, and the transfer of video from MPEG source <highlight><bold>116</bold></highlight> to recording medium <highlight><bold>128</bold></highlight> is only one example application. Other components and configurations are equally possible, and the roles of each of the apparatus in the claimed process may be different times, without departing from the scope of the invention as claimed. </paragraph>
</detailed-description>
</subdoc-description>
<subdoc-claims>
<claim id="CLM-00001">
<claim-text><highlight><bold>1</bold></highlight>. A method for minimising loss in picture quality when transcoding a video bitstream, the method comprising the steps of: 
<claim-text>(a) receiving a first bitstream present in a first format which comprises a sequence of encoded pictures; </claim-text>
<claim-text>(b) transcoding said first bitstream to create a second bitstream; </claim-text>
<claim-text>(c) inserting additional information derived from said first bitstream into said second bitstream; </claim-text>
<claim-text>(d) transmitting said second bitstream together with said additional information in a second format; </claim-text>
<claim-text>(e) receiving the second bitstream; and </claim-text>
<claim-text>(f) transcoding the second bitstream into a third bitstream in a third format, using said additional information to define picture structure for said second bitstream. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00002">
<claim-text><highlight><bold>2</bold></highlight>. A method as claimed in <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein the bitrate of the second bitstream is higher than that of the first or third bitstreams. </claim-text>
</claim>
<claim id="CLM-00003">
<claim-text><highlight><bold>3</bold></highlight>. A method as claimed in <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein in step (b) the second bitstream is encoded as intra-coded pictures only. </claim-text>
</claim>
<claim id="CLM-00004">
<claim-text><highlight><bold>4</bold></highlight>. A method as claimed in <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein in step (c) the additional information derived from said first bitstream relates to picture sequence structure information. </claim-text>
</claim>
<claim id="CLM-00005">
<claim-text><highlight><bold>5</bold></highlight>. A method as claimed in <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein said additional information further includes the picture type information of a picture or a sequence of pictures. </claim-text>
</claim>
<claim id="CLM-00006">
<claim-text><highlight><bold>6</bold></highlight>. A method as claimed in <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein in step (d) the additional information is inserted into a field of the second bitstream defined as a user data field in a standard video data format. </claim-text>
</claim>
<claim id="CLM-00007">
<claim-text><highlight><bold>7</bold></highlight>. A method as claimed in <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein in step (e) pictures intra-coded in the first bitstream are preferentially transcoded as intra-coded pictures in the third bitstream. </claim-text>
</claim>
<claim id="CLM-00008">
<claim-text><highlight><bold>8</bold></highlight>. A method as claimed in <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein the additional information about said first bitstream inserted into the second bitstream includes the MPEG &ldquo;group_start_code&rdquo; and the contents of the &ldquo;closed_gop&rdquo; and &ldquo;broken_link&rdquo; fields which are inserted into a &ldquo;user_data&rdquo; field after the &ldquo;picture_header&rdquo; field. </claim-text>
</claim>
<claim id="CLM-00009">
<claim-text><highlight><bold>9</bold></highlight>. A method as claimed in <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein further information inserted into the stream includes the contents of the MPEG &ldquo;picture_coding_type&rdquo; field inserted in a &ldquo;user data&rdquo; field after the &ldquo;picture_header&rdquo; field. </claim-text>
</claim>
<claim id="CLM-00010">
<claim-text><highlight><bold>10</bold></highlight>. A method as claimed in <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein the steps (a)-(d) are performed in a first video processing apparatus, while steps (e) and (f) are performed in a second apparatus connected to the first apparatus for the transmission of said second bitstream. </claim-text>
</claim>
<claim id="CLM-00011">
<claim-text><highlight><bold>11</bold></highlight>. A method of transcoding a first bitstream in a first format to a second bitstream in a second format for transmission over a digital interface, the transcoding method including the step of embedding in said second bitstream additional information regarding the structure of said first bitstream in said first format. </claim-text>
</claim>
<claim id="CLM-00012">
<claim-text><highlight><bold>12</bold></highlight>. A method as claimed in <dependent-claim-reference depends_on="CLM-00011">claim 11</dependent-claim-reference> wherein the bitrate of said second bitstream is higher than the bitrate of said first bitstream. </claim-text>
</claim>
<claim id="CLM-00013">
<claim-text><highlight><bold>13</bold></highlight>. A method as claimed in <dependent-claim-reference depends_on="CLM-00011">claim 11</dependent-claim-reference>, wherein the additional information specifies which pictures encoded as intra-coded pictures in said second bitstream were not encoded as intra-coded pictures in said first bitstream. </claim-text>
</claim>
<claim id="CLM-00014">
<claim-text><highlight><bold>14</bold></highlight>. A method of transcoding a second bitstream in a second format to a third bitstream in a third format wherein said second bitstream in a second format is received over a digital interface and transcoded into said third bitstream in said third format using information embedded in said second bitstream, said information defining the structure of a first bitstream in a first format from which the second bitstream was previously derived. </claim-text>
</claim>
<claim id="CLM-00015">
<claim-text><highlight><bold>15</bold></highlight>. A method as claimed in <dependent-claim-reference depends_on="CLM-00011">claim 14</dependent-claim-reference> wherein the bitrate of said second bitstream is higher than the bitrate of said third bitstream. </claim-text>
</claim>
<claim id="CLM-00016">
<claim-text><highlight><bold>16</bold></highlight>. A method as claimed in <dependent-claim-reference depends_on="CLM-00011">claim 14</dependent-claim-reference>, wherein the third bitstream includes both inter-coded and intra-coded pictures and wherein the additional information is used to control which pictures, encoded as intra-coded pictures in said second bitstream, should be encoded as intra-coded pictures in said third bitstream in preference to other pictures also encoded as intra-coded pictures in said second bitstream. </claim-text>
</claim>
<claim id="CLM-00017">
<claim-text><highlight><bold>17</bold></highlight>. A method as claimed in <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein the method further comprises recording of said third bitstream on a record carrier implementing any of the methods set forth above. </claim-text>
</claim>
<claim id="CLM-00018">
<claim-text><highlight><bold>18</bold></highlight>. An electronic signal representing a video stream encoded in an intermediate format as a series of intra-coded pictures, the signal further comprising encoded additional historical functional information indicating the picture type and picture sequence from which said intra-coded pictures were derived. </claim-text>
</claim>
<claim id="CLM-00019">
<claim-text><highlight><bold>19</bold></highlight>. An electronic signal as claimed in <dependent-claim-reference depends_on="CLM-00011">claim 18</dependent-claim-reference> wherein the electronic signal encodes said historical functional information in user data fields of a standard video data format. </claim-text>
</claim>
<claim id="CLM-00020">
<claim-text><highlight><bold>20</bold></highlight>. An apparatus comprising means specifically adapted for implementing any of the methods according to any preceding claim. </claim-text>
</claim>
<claim id="CLM-00021">
<claim-text><highlight><bold>21</bold></highlight>. An apparatus for minimising loss in picture quality when transcoding a video bitstream, the apparatus comprising: 
<claim-text>(a) means for receiving a first bitstream present in a first format which comprises a sequence of encoded pictures; </claim-text>
<claim-text>(b) means for first transcoding said first bitstream to create a second bitstream; </claim-text>
<claim-text>(c) means for inserting additional information derived from said first bitstream into said second bitstream; </claim-text>
<claim-text>(d) means for transmitting said second bitstream together with said additional information in a second format; </claim-text>
<claim-text>(e) means for receiving the second bitstream; and </claim-text>
<claim-text>(f) means for transcoding the second bitstream into a third bitstream in a third format, using said additional information to define picture structure for said second bitstream. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00022">
<claim-text><highlight><bold>22</bold></highlight>. An apparatus as claimed in <dependent-claim-reference depends_on="CLM-00022">claim 21</dependent-claim-reference> wherein said means for first transcoding encodes said second bitstream as intra-coded pictures only. </claim-text>
</claim>
<claim id="CLM-00023">
<claim-text><highlight><bold>23</bold></highlight>. An apparatus as claimed in <dependent-claim-reference depends_on="CLM-00022">claim 21</dependent-claim-reference> wherein the additional information inserted by said means for inserting additional information is derived from said first bitstream related to picture sequence structure information. </claim-text>
</claim>
<claim id="CLM-00024">
<claim-text><highlight><bold>24</bold></highlight>. An apparatus as claimed in <dependent-claim-reference depends_on="CLM-00022">claim 21</dependent-claim-reference>, wherein said additional information further includes the picture type information of a picture or a sequence of pictures. </claim-text>
</claim>
<claim id="CLM-00025">
<claim-text><highlight><bold>25</bold></highlight>. An apparatus as claimed in <dependent-claim-reference depends_on="CLM-00022">claim 21</dependent-claim-reference>, wherein said means for transmitting said second bitstream inserts the additional information into a field of the second bitstream defined as a user data field in a standard video data format. </claim-text>
</claim>
<claim id="CLM-00026">
<claim-text><highlight><bold>26</bold></highlight>. An apparatus as claimed in <dependent-claim-reference depends_on="CLM-00022">claim 21</dependent-claim-reference>, wherein said means for transcoding the second bitstream preferentially transcodes pictures intra-coded in the first bitstream as intra-coded pictures in the third bitstream. </claim-text>
</claim>
<claim id="CLM-00027">
<claim-text><highlight><bold>27</bold></highlight>. An apparatus as claimed in <dependent-claim-reference depends_on="CLM-00022">claim 21</dependent-claim-reference>, wherein the additional information about said first bitstream inserted into the second bitstream includes the MPEG &ldquo;group_start_code&rdquo; and the contents of the &ldquo;closed_gop&rdquo; and &ldquo;broken_link&rdquo; fields which are inserted into a &ldquo;user_data&rdquo; field after the &ldquo;picture_header&rdquo; field. </claim-text>
</claim>
<claim id="CLM-00028">
<claim-text><highlight><bold>28</bold></highlight>. An apparatus as claimed in <dependent-claim-reference depends_on="CLM-00022">claim 21</dependent-claim-reference>, wherein further information inserted into the stream includes the contents of the MPEG &ldquo;picture_coding type&rdquo; field inserted in a &ldquo;user_data&rdquo; field after the &ldquo;picture_header&rdquo; field. </claim-text>
</claim>
<claim id="CLM-00029">
<claim-text><highlight><bold>29</bold></highlight>. An apparatus as claimed in <dependent-claim-reference depends_on="CLM-00022">claim 21</dependent-claim-reference>, wherein said means (a) (d) are comprised in a first video processing apparatus, while means (e) and (f) are comprised in a second apparatus connected to the first apparatus for the transmission of said second bitstream. </claim-text>
</claim>
<claim id="CLM-00030">
<claim-text><highlight><bold>30</bold></highlight>. An apparatus for performing steps (a)-(c) of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference> for transcoding a first bitstream in a first format to a second bitstream in a second format for transmission over a digital interface, the apparatus including means for deriving and embedding in said second bitstream additional information regarding the structure of said first bitstream in said first format. </claim-text>
</claim>
<claim id="CLM-00031">
<claim-text><highlight><bold>31</bold></highlight>. An apparatus as claimed in <dependent-claim-reference depends_on="CLM-00033">claim 30</dependent-claim-reference>, wherein the additional information specifies which pictures encoded as intra-coded pictures in said second bitstream were not encoded as intra-coded pictures in said first bitstream. </claim-text>
</claim>
<claim id="CLM-00032">
<claim-text><highlight><bold>32</bold></highlight>. An apparatus for performing steps (e) and (f) of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference> transcoding a second bitstream in a second format to a third bitstream in a third format wherein said second bitstream in a second format is received over a digital interface and transcoded into said third bitstream in said third format using information embedded in said second bitstream, said information defining the structure of a first bitstream in a first format from which the second bitstream was previously derived. </claim-text>
</claim>
<claim id="CLM-00033">
<claim-text><highlight><bold>33</bold></highlight>. An apparatus as claimed in <dependent-claim-reference depends_on="CLM-00033">claim 32</dependent-claim-reference>, wherein the third bitstream includes both inter-coded and intra-coded pictures and wherein the additional information is used to control which pictures, encoded as intra-coded pictures in said second bitstream, should be encoded as intra-coded pictures in said third bitstream in preference to other pictures also encoded as intra-coded pictures in said second bitstream. </claim-text>
</claim>
<claim id="CLM-00034">
<claim-text><highlight><bold>34</bold></highlight>. An apparatus as claimed in <dependent-claim-reference depends_on="CLM-00022">claim 21</dependent-claim-reference>, further comprising means for recording of said third bitstream on a record carrier in accordance with any of the methods set forth above. </claim-text>
</claim>
<claim id="CLM-00035">
<claim-text><highlight><bold>35</bold></highlight>. An apparatus for generating an electronic signal representing a video stream encoded in an intermediate format as a series of intra-coded pictures, the signal further comprising encoded additional historical functional information indicating the picture type and picture sequence from which said intra-coded pictures were derived. </claim-text>
</claim>
<claim id="CLM-00036">
<claim-text><highlight><bold>36</bold></highlight>. An apparatus as claimed in <dependent-claim-reference depends_on="CLM-00033">claim 35</dependent-claim-reference> wherein the electronic signal has encoded said historical functional information in user data fields of a standard video data format.</claim-text>
</claim>
</subdoc-claims>
<subdoc-drawings id="DRAWINGS">
<heading lvl="0" align="CENTER">Drawings</heading>
<representative-figure>3</representative-figure>
<figure id="figure-D00000">
<image id="EMI-D00000" file="US20030002583A1-20030102-D00000.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00001">
<image id="EMI-D00001" file="US20030002583A1-20030102-D00001.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00002">
<image id="EMI-D00002" file="US20030002583A1-20030102-D00002.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00003">
<image id="EMI-D00003" file="US20030002583A1-20030102-D00003.TIF" imf="TIFF" ti="DR"/>
</figure>
</subdoc-drawings>
</patent-application-publication>
