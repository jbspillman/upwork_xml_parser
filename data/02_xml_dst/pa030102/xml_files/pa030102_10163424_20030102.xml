<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE patent-application-publication SYSTEM "pap-v16-2002-01-01.dtd" [
<!ENTITY US20030001732A1-20030102-D00000.TIF SYSTEM "US20030001732A1-20030102-D00000.TIF" NDATA TIF>
<!ENTITY US20030001732A1-20030102-D00001.TIF SYSTEM "US20030001732A1-20030102-D00001.TIF" NDATA TIF>
<!ENTITY US20030001732A1-20030102-D00002.TIF SYSTEM "US20030001732A1-20030102-D00002.TIF" NDATA TIF>
<!ENTITY US20030001732A1-20030102-D00003.TIF SYSTEM "US20030001732A1-20030102-D00003.TIF" NDATA TIF>
<!ENTITY US20030001732A1-20030102-D00004.TIF SYSTEM "US20030001732A1-20030102-D00004.TIF" NDATA TIF>
<!ENTITY US20030001732A1-20030102-D00005.TIF SYSTEM "US20030001732A1-20030102-D00005.TIF" NDATA TIF>
<!ENTITY US20030001732A1-20030102-D00006.TIF SYSTEM "US20030001732A1-20030102-D00006.TIF" NDATA TIF>
]>
<patent-application-publication>
<subdoc-bibliographic-information>
<document-id>
<doc-number>20030001732</doc-number>
<kind-code>A1</kind-code>
<document-date>20030102</document-date>
</document-id>
<publication-filing-type>new</publication-filing-type>
<domestic-filing-data>
<application-number>
<doc-number>10163424</doc-number>
</application-number>
<application-number-series-code>10</application-number-series-code>
<filing-date>20020607</filing-date>
</domestic-filing-data>
<foreign-priority-data>
<priority-application-number>
<doc-number>2001-199959</doc-number>
</priority-application-number>
<filing-date>20010629</filing-date>
<country-code>JP</country-code>
</foreign-priority-data>
<technical-information>
<classification-ipc>
<classification-ipc-primary>
<ipc>B60Q001/00</ipc>
</classification-ipc-primary>
<classification-ipc-edition>07</classification-ipc-edition>
</classification-ipc>
<classification-us>
<classification-us-primary>
<uspc>
<class>340</class>
<subclass>435000</subclass>
</uspc>
</classification-us-primary>
<classification-us-secondary>
<uspc>
<class>348</class>
<subclass>148000</subclass>
</uspc>
</classification-us-secondary>
</classification-us>
<title-of-invention>Travel road detector</title-of-invention>
</technical-information>
<inventors>
<first-named-inventor>
<name>
<given-name>Hiroyuki</given-name>
<family-name>Furusho</family-name>
</name>
<residence>
<residence-non-us>
<city>Yokohama</city>
<country-code>JP</country-code>
</residence-non-us>
</residence>
<authority-applicant>INV</authority-applicant>
</first-named-inventor>
</inventors>
<assignee>
<organization-name>NISSAN MOTOR CO., LTD.</organization-name>
<assignee-type>03</assignee-type>
</assignee>
<correspondence-address>
<name-1>FOLEY AND LARDNER</name-1>
<name-2>SUITE 500</name-2>
<address>
<address-1>3000 K STREET NW</address-1>
<city>WASHINGTON</city>
<state>DC</state>
<postalcode>20007</postalcode>
<country>
<country-code>US</country-code>
</country>
</address>
</correspondence-address>
</subdoc-bibliographic-information>
<subdoc-abstract>
<paragraph id="A-0001" lvl="0">A travel road detector includes: an image pickup section producing a road image of a forward travel road in front of a driver&apos;s vehicle; a setting section setting small areas for lane marker detection; a lane marker detector detecting lane markers on both sides of a travel lane for the driver&apos;s vehicle; a first calculator calculating a travel road model parameter representing a shape of the forward travel road when a both-side lane marker detecting state is satisfied; a forward vehicle detector detecting a height of a predetermined part of a forward vehicle traveling ahead of the driver&apos;s vehicle when the both-side lane marker detecting state is present; and a second calculator calculating the travel road model parameter from information on the lane marker detection points, and information on the height of the predetermined part of the forward vehicle detected with the forward vehicle detector. </paragraph>
</subdoc-abstract>
<subdoc-description>
<summary-of-invention>
<section>
<heading lvl="1">BACKGROUND OF THE INVENTION </heading>
<paragraph id="P-0001" lvl="0"><number>&lsqb;0001&rsqb;</number> The present invention relates to a travel road detector for detecting a shape of a travel road for a driver&apos;s vehicle. Especially, the present invention relates to the travel road detector that is preferable for showing the shape of the travel road with a travel road model parameter. </paragraph>
<paragraph id="P-0002" lvl="0"><number>&lsqb;0002&rsqb;</number> Japanese Patent Unexamined Publication No. Heisei 6(1994)-020189 describes a road shape measuring instrument for calculating the travel road model parameter with a state estimator such as Kalman filter and the like. </paragraph>
</section>
<section>
<heading lvl="1">BRIEF SUMMARY OF THE INVENTION </heading>
<paragraph id="P-0003" lvl="0"><number>&lsqb;0003&rsqb;</number> Use of the state estimator such as Kalman filter and the like for the travel road detector is, as the case may be, incapable of accurately calculating each of the travel road model parameters when a lane marker can be detected on only one of the right side and the left side of the travel lane for the driver&apos;s vehicle, although the accurate calculation of the travel road model parameters depends on the number of parameters and types of the parameters. </paragraph>
<paragraph id="P-0004" lvl="0"><number>&lsqb;0004&rsqb;</number> It is therefore an object of the present invention to provide a travel road detector capable of accurately calculating each of travel road model parameters even when the lane marker can be detected on only one of the right side and the left side of the travel lane for the driver&apos;s vehicle. </paragraph>
<paragraph id="P-0005" lvl="0"><number>&lsqb;0005&rsqb;</number> According to a first aspect of the present invention, there is provided a travel road detector. </paragraph>
<paragraph id="P-0006" lvl="0"><number>&lsqb;0006&rsqb;</number> The travel road detector comprises: 1) an image pickup section producing a road image of a forward travel road in front of a driver&apos;s vehicle; 2) a setting section setting, on the road image, small areas for lane marker detection; 3) a lane marker detector detecting, in the small areas, lane markers on both sides of a travel lane for the driver&apos;s vehicle as lane marker detection points; 4) a first calculator determining that a both-side lane marker detecting state is present when the number of lane marker detection points of the lane marker on each side of the travel lane is greater than or equal to a first predetermined numerical quantity, and at the same time the total number of lane marker detection points of the lane markers on both sides of the travel lane is greater than or equal to a second predetermined numerical quantity, and calculating, from information on the lane marker detection points, a travel road model parameter representing a shape of the forward travel road when the both-side lane marker detecting state is satisfied; 5) a forward vehicle detector detecting a height of a predetermined part of a forward vehicle traveling ahead of the driver&apos;s vehicle when the both-side lane marker detecting state is present; and 6) a second calculator determining that a one-side lane marker detecting state is present when the both-side lane marker detecting state is not present, and at the same time the number of lane marker detection points of the lane marker on either one side of the travel lane for the driver&apos;s vehicle is greater than or equal to a third predetermined numerical quantity, and calculating the travel road model parameter from information on the lane marker detection points, and information on the height of the predetermined part of the forward vehicle detected with the forward vehicle detector. </paragraph>
<paragraph id="P-0007" lvl="0"><number>&lsqb;0007&rsqb;</number> According to a second aspect of the present invention, there is provided a process of detecting a travel road. </paragraph>
<paragraph id="P-0008" lvl="0"><number>&lsqb;0008&rsqb;</number> The process of detecting a travel road comprises the following operations: 1) producing a road image of a forward travel road in front of a driver&apos;s vehicle; 2) setting small areas for lane marker detection; 3) detecting lane markers; 4) firstly determining that a both-side lane marker detecting state is present; 5) firstly calculating a travel road model parameter representing a shape of the forward travel road when the both-side lane marker detecting state is satisfied; 6) detecting a height of a predetermined part of a forward vehicle when the both-side lane marker detecting state is present; 7) secondly determining that a one-side lane marker detecting state is present; and 8) secondly calculating the travel road model parameter from information on the lane marker detection points, and information on the height of the predetermined part of the forward vehicle detected with the forward vehicle detector. </paragraph>
<paragraph id="P-0009" lvl="0"><number>&lsqb;0009&rsqb;</number> According to a third aspect of the present invention, there is provided a travel road detecting apparatus. </paragraph>
<paragraph id="P-0010" lvl="0"><number>&lsqb;0010&rsqb;</number> The travel road detecting apparatus comprises: 1) image pickup means for picking up an image of a travel road in front of a driver&apos;s vehicle; 2) setting means for setting small areas for detecting a lane marker; 3) lane marker detecting means for detecting a part of the lane marker; 4) first calculating means for determining whether or not the lane marker detection point detected with the lane marker detecting means is in a first both-side lane marker detecting state, and for calculating a travel road model parameter when both the first both-side lane marker detecting state and the second both-side lane marker detecting state are determined to be established; 5) forward vehicle detecting means for detecting at least a height of a predetermined part of a forward vehicle traveling ahead of the driver&apos;s vehicle; and 6) second calculating means for determining whether or not the lane marker detection point detected with the lane marker detecting means is in a one-side lane marker detecting state for determining whether or not at least the height of the predetermined part of the forward vehicle is detected, and for calculating the travel road model parameter, from the following pieces of first information and second information: the first information on the thus determined lane marker detection points, and the second information on the thus determined at least the height of the predetermined part of the forward vehicle. </paragraph>
<paragraph id="P-0011" lvl="0"><number>&lsqb;0011&rsqb;</number> The other objects and features of the present invention will become understood from the following description with reference to the accompanying drawings.</paragraph>
</section>
</summary-of-invention>
<brief-description-of-drawings>
<section>
<heading lvl="1">BRIEF DESCRIPTION OF THE SEVERAL VIEWS OF THE DRAWINGS </heading>
<paragraph id="P-0012" lvl="0"><number>&lsqb;0012&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1</cross-reference> shows a schematic diagram of a travel road detector, according to an embodiment of the present invention; </paragraph>
<paragraph id="P-0013" lvl="0"><number>&lsqb;0013&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 2</cross-reference> shows small areas for detecting lane markers (lane marker detector windows); </paragraph>
<paragraph id="P-0014" lvl="0"><number>&lsqb;0014&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3</cross-reference> shows lane marker candidate points; </paragraph>
<paragraph id="P-0015" lvl="0"><number>&lsqb;0015&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 4</cross-reference> shows a lane marker candidate line; </paragraph>
<paragraph id="P-0016" lvl="0"><number>&lsqb;0016&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 5</cross-reference> shows a matrix for detecting the lane marker candidate points; </paragraph>
<paragraph id="P-0017" lvl="0"><number>&lsqb;0017&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 6</cross-reference> shows a table of the lane marker candidate line thus detected; </paragraph>
<paragraph id="P-0018" lvl="0"><number>&lsqb;0018&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 7</cross-reference> shows a lane marker detection point; </paragraph>
<paragraph id="P-0019" lvl="0"><number>&lsqb;0019&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 8</cross-reference> shows correlation between a plane coordinate system and a space coordinate system; </paragraph>
<paragraph id="P-0020" lvl="0"><number>&lsqb;0020&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 9</cross-reference> shows graphs for describing formulations, in which; </paragraph>
<paragraph id="P-0021" lvl="0"><number>&lsqb;0021&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 9A</cross-reference> shows a shape of the lane marker defining a travel lane, and </paragraph>
<paragraph id="P-0022" lvl="0"><number>&lsqb;0022&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 9B</cross-reference> shows a longitudinal profile of the travel road; </paragraph>
<paragraph id="P-0023" lvl="0"><number>&lsqb;0023&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 10</cross-reference> shows a template for detecting a number plate of a forward vehicle ahead of a driver&apos;s vehicle; </paragraph>
<paragraph id="P-0024" lvl="0"><number>&lsqb;0024&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 11</cross-reference> shows a block diagram showing an example of Kalman filter; and </paragraph>
<paragraph id="P-0025" lvl="0"><number>&lsqb;0025&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 12</cross-reference> shows a flow chart for an arithmetic processing for calculating travel road model parameters, which arithmetic processing is carried out in a control unit <highlight><bold>2</bold></highlight> shown in <cross-reference target="DRAWINGS">FIG. 1</cross-reference>.</paragraph>
</section>
</brief-description-of-drawings>
<detailed-description>
<section>
<heading lvl="1">DETAILED DESCRIPTION OF THE EMBODIMENTS </heading>
<paragraph id="P-0026" lvl="0"><number>&lsqb;0026&rsqb;</number> In the following, an embodiment of the present invention will be described in detail with reference to the accompanying drawings. </paragraph>
<paragraph id="P-0027" lvl="0"><number>&lsqb;0027&rsqb;</number> For ease of understanding, the following description will contain various directional terms, such as, left, right, upper, lower and the like. However, such directional terms are to be understood with respect to only a drawing or drawings on which the corresponding part of element is illustrated. </paragraph>
<paragraph id="P-0028" lvl="0"><number>&lsqb;0028&rsqb;</number> As is seen in <cross-reference target="DRAWINGS">FIG. 1</cross-reference>, there is provided a systematic shape of a travel road detector, according to the embodiment of the present invention. </paragraph>
<paragraph id="P-0029" lvl="0"><number>&lsqb;0029&rsqb;</number> The travel road detector according to the embodiment comprises an image pickup section <highlight><bold>1</bold></highlight> and a control unit <highlight><bold>2</bold></highlight>. </paragraph>
<paragraph id="P-0030" lvl="0"><number>&lsqb;0030&rsqb;</number> The image pickup section <highlight><bold>1</bold></highlight> is constituted of a CCD camera, a camera controller and the like. Image pickup section <highlight><bold>1</bold></highlight> can pick up an image in the forward state viewed from a driver&apos;s vehicle. </paragraph>
<paragraph id="P-0031" lvl="0"><number>&lsqb;0031&rsqb;</number> Control unit <highlight><bold>2</bold></highlight> incorporates an arithmetic processing unit such as a microcomputer. Control unit <highlight><bold>2</bold></highlight> can be so constituted as to carry out the following operations: </paragraph>
<paragraph id="P-0032" lvl="2"><number>&lsqb;0032&rsqb;</number> 1. With image pickup section <highlight><bold>1</bold></highlight>, pick up the image in the forward state viewed from the driver&apos;s vehicle. </paragraph>
<paragraph id="P-0033" lvl="2"><number>&lsqb;0033&rsqb;</number> 2. Set a small area for detecting a lane marker, corresponding to the image (picked up with image pickup section <highlight><bold>1</bold></highlight>) in the forward state viewed from the driver&apos;s vehicle. </paragraph>
<paragraph id="P-0034" lvl="2"><number>&lsqb;0034&rsqb;</number> 3. Carry out a filtering process for clarification (enhancement) of an edge of the lane marker (in other words, the edge is a boundary between the lane marker and a road surface). </paragraph>
<paragraph id="P-0035" lvl="2"><number>&lsqb;0035&rsqb;</number> 4. From each of the small areas, sample a part of the lane marker that is most likely to be the lane marker. </paragraph>
<paragraph id="P-0036" lvl="2"><number>&lsqb;0036&rsqb;</number> 5. Detect the thus sampled lane marker as a lane marker candidate point. </paragraph>
<paragraph id="P-0037" lvl="2"><number>&lsqb;0037&rsqb;</number> 6. From positional information on a picture image of the lane marker candidate point(s), calculate the following travel road model parameters and the like: </paragraph>
<paragraph id="P-0038" lvl="3"><number>&lsqb;0038&rsqb;</number> i) a lateral displacement A of the driver&apos;s vehicle, relative to a travel lane. </paragraph>
<paragraph id="P-0039" lvl="3"><number>&lsqb;0039&rsqb;</number> ii) a travel lane curvature B defined by the lane marker. </paragraph>
<paragraph id="P-0040" lvl="3"><number>&lsqb;0040&rsqb;</number> iii) a yaw angle C of the driver&apos;s vehicle, relative to the travel lane. </paragraph>
<paragraph id="P-0041" lvl="3"><number>&lsqb;0041&rsqb;</number> iv) a pitch angle D of the driver&apos;s vehicle. </paragraph>
<paragraph id="P-0042" lvl="3"><number>&lsqb;0042&rsqb;</number> v) a height H from a ground at which height image pickup section <highlight><bold>1</bold></highlight> (such as the CCD camera) is installed. </paragraph>
<paragraph id="P-0043" lvl="0"><number>&lsqb;0043&rsqb;</number> According to the embodiment, there is provided a premise that image pickup sensor <highlight><bold>1</bold></highlight> such as the CCD camera is of what is called a simple eye (to be described afterward). </paragraph>
<paragraph id="P-0044" lvl="0"><number>&lsqb;0044&rsqb;</number> Described hereinafter is a principle of calculating the travel road model parameters from the image in the forward state (viewed from the driver&apos;s vehicle) picked up with image pickup section <highlight><bold>1</bold></highlight>. </paragraph>
<paragraph id="P-0045" lvl="0"><number>&lsqb;0045&rsqb;</number> As is seen in <cross-reference target="DRAWINGS">FIG. 2</cross-reference>, there is provided a plane coordinate system on an image plane in accordance with image scanning directions defined by a television communication method such as NTSC (National Television System Committee) system. More specifically, there is set an orthogonal two-dimension coordinate system having an origin on an upper left of the image plane, an x-axis extending horizontally from left to right, and a y-axis extending vertically from upper to lower. </paragraph>
<paragraph id="P-0046" lvl="0"><number>&lsqb;0046&rsqb;</number> In a picture image of forward view from the driver&apos;s vehicle, there are set the small areas for detecting the lane marker (in other words, &ldquo;lane marker detector windows&rdquo;). </paragraph>
<paragraph id="P-0047" lvl="0"><number>&lsqb;0047&rsqb;</number> According to the embodiment, the small areas are totally ten in number. Five of the small areas are so set on each of a right side and a left side of the image plane as to correspond to one of the two lane markers disposed respectively on a right side and a left side of the travel lane for the driver&apos;s vehicle. </paragraph>
<paragraph id="P-0048" lvl="0"><number>&lsqb;0048&rsqb;</number> Position of each of the lane marker detector windows is determined by the following travel road model parameters and the like, namely, lateral displacement A (of the driver&apos;s vehicle) relative to the travel lane, travel lane curvature B defined by the lane marker, yaw angle C (of the driver&apos;s vehicle) relative to the travel lane, pitch angle D of the driver&apos;s vehicle, height H from the ground at which height image pickup section <highlight><bold>1</bold></highlight> (such as the CCD camera) is installed. Hereinabove, the travel road model parameters can be calculated through a method to be described afterward. </paragraph>
<paragraph id="P-0049" lvl="0"><number>&lsqb;0049&rsqb;</number> Next, the following operations can be taken: </paragraph>
<paragraph id="P-0050" lvl="2"><number>&lsqb;0050&rsqb;</number> 1. In each of the lane marker detector windows which are set in the picture image of the forward view from the driver&apos;s vehicle, carry out a preprocessing for detecting the lane marker. The preprocessing is to differentiate a primary space, to thereby enhance the boundary between the lane marker and the road surface (namely, the boundary is the edge of the lane marker). Hereinabove, used for the primary space differentiation is, for example, Sobel filter. </paragraph>
<paragraph id="P-0051" lvl="2"><number>&lsqb;0051&rsqb;</number> 2. Detect the lane marker candidate point for detecting the lane marker. </paragraph>
<paragraph id="P-0052" lvl="0"><number>&lsqb;0052&rsqb;</number> Of the boundaries between the lane marker and the road surface, detected is the boundary that is disposed inside the travel lane for the driver&apos;s vehicle, according to the embodiment. </paragraph>
<paragraph id="P-0053" lvl="0"><number>&lsqb;0053&rsqb;</number> More specifically, the lane marker candidate point can be determined in the following manner: </paragraph>
<paragraph id="P-0054" lvl="2"><number>&lsqb;0054&rsqb;</number> When the filter output is positive with a pixel on the left side (small value on x-coordinate) of the image more brilliant than a pixel on the right side of the image, the lane marker candidate point is a point (pixel) that features the filter output not smaller than a threshold of a predetermined positive value, for example, on the lane marker (white line in <cross-reference target="DRAWINGS">FIG. 3</cross-reference>) detector window on the left side of the travel lane. </paragraph>
<paragraph id="P-0055" lvl="0"><number>&lsqb;0055&rsqb;</number> Contrary to the above, on the lane marker detector window on the right side of the travel lane, the lane marker candidate point is a point (pixel) that features the filter output not greater than a threshold of a predetermined negative value. </paragraph>
<paragraph id="P-0056" lvl="0"><number>&lsqb;0056&rsqb;</number> All applicable points can be selected as the lane marker candidate point. </paragraph>
<paragraph id="P-0057" lvl="0"><number>&lsqb;0057&rsqb;</number> Described hereinafter is setting of a lane marker candidate line corresponding to the thus detected lane marker candidate points. The lane marker candidate line can be set from an aggregation of the lane marker candidate points. Methods of setting the lane marker candidate line may include Hough transform, least square method, and the like. Herein, Hough transform is exemplified. </paragraph>
<paragraph id="P-0058" lvl="0"><number>&lsqb;0058&rsqb;</number> At first, the following expression (1) defines a straight line (a<highlight><subscript>i</subscript></highlight>, b<highlight><subscript>i</subscript></highlight>): </paragraph>
<paragraph id="P-0059" lvl="2"><number>&lsqb;0059&rsqb;</number> &lsqb;Math 1&rsqb;</paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>y&equals;a</italic></highlight><highlight><subscript>i</subscript></highlight><highlight><italic>&middot;x&plus;b</italic></highlight><highlight><subscript>i</subscript></highlight>&emsp;&emsp;(1)</in-line-formula></paragraph>
<paragraph id="P-0060" lvl="7"><number>&lsqb;0060&rsqb;</number> where a<highlight><subscript>i </subscript></highlight>is a slope, and b<highlight><subscript>i </subscript></highlight>is an intercept (slice). Moreover, i stands for the number of the lane marker detector window. </paragraph>
<paragraph id="P-0061" lvl="0"><number>&lsqb;0061&rsqb;</number> As is seen in <cross-reference target="DRAWINGS">FIG. 4</cross-reference>, on each of the lane marker detector windows, the number of lane marker candidate points through which the straight line (a<highlight><subscript>i</subscript></highlight>, b<highlight><subscript>i</subscript></highlight>) penetrates can be detected. Then, as is seen in <cross-reference target="DRAWINGS">FIG. 5</cross-reference>, the straight line (a<highlight><subscript>i</subscript></highlight>, b<highlight><subscript>i</subscript></highlight>) and the thus detected number of lane marker candidate points (hereinafter, referred to as &ldquo;the number of through lane marker candidate points) are recorded in a matrix which is provided for each of the lane marker detector windows. Then, the lane marker candidate line is defined as a straight line satisfying the following: </paragraph>
<paragraph id="P-0062" lvl="2"><number>&lsqb;0062&rsqb;</number> The number of through lane marker candidate points is not smaller than a predetermined value, and is a maximum value &lcub;Herein, a straight line (a<highlight><subscript>x</subscript></highlight>, b<highlight><subscript>x</subscript></highlight>) is applicable to the lane marker candidate line.&rcub;. </paragraph>
<paragraph id="P-0063" lvl="0"><number>&lsqb;0063&rsqb;</number> The lane marker candidate lines can be tabulated in accordance with the lane marker detector windows, as is seen in <cross-reference target="DRAWINGS">FIG. 6</cross-reference>. The number of through lane marker candidate points smaller than the predetermined value signifies that no lane marker candidate line is provided on the applicable lane marker detector window. Furthermore, the straight line (a<highlight><subscript>i</subscript></highlight>, b<highlight><subscript>i</subscript></highlight>) &ldquo;through&rdquo; the lane marker candidate points is defined when a distance between the straight line and the candidate point of white line (pixel) is not greater than a unit pixel. </paragraph>
<paragraph id="P-0064" lvl="0"><number>&lsqb;0064&rsqb;</number> Then, a typical lane marker point is set for each of the lane marker detector windows. The thus set typical lane marker point is defined as a lane marker detection point. According to the embodiment, as is seen in <cross-reference target="DRAWINGS">FIG. 7</cross-reference>, the lane marker detection point (x<highlight><subscript>wi</subscript></highlight>, y<highlight><subscript>wi</subscript></highlight>) is an intersection defined by the lane marker candidate line and an upper side of each of the lane marker detector windows. Moreover, the lane marker candidate line on each of the lane marker detector windows is signified with (a<highlight><subscript>wi</subscript></highlight>, b<highlight><subscript>wi</subscript></highlight>). Therefore, the lane marker detection point (x<highlight><subscript>wi</subscript></highlight>, y<highlight><subscript>wi</subscript></highlight>) satisfies the following expression (2): </paragraph>
<paragraph id="P-0065" lvl="0"><number>&lsqb;0065&rsqb;</number> &lsqb;Math 2&rsqb;</paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>y</italic></highlight><highlight><subscript>wi</subscript></highlight><highlight><italic>&equals;a</italic></highlight><highlight><subscript>wi</subscript></highlight><highlight><italic>&middot;x</italic></highlight><highlight><subscript>wi</subscript></highlight><highlight><italic>&plus;b</italic></highlight><highlight><subscript>wi</subscript></highlight>&emsp;&emsp;(2)</in-line-formula></paragraph>
<paragraph id="P-0066" lvl="0"><number>&lsqb;0066&rsqb;</number> In addition, it may be regarded that the lane marker detector window without the lane marker candidate line is free from the lane marker detection point. </paragraph>
<paragraph id="P-0067" lvl="0"><number>&lsqb;0067&rsqb;</number> On the other hand, described hereinafter is a space coordinate system on the travel road. </paragraph>
<paragraph id="P-0068" lvl="0"><number>&lsqb;0068&rsqb;</number> According to the embodiment, as is seen in <cross-reference target="DRAWINGS">FIG. 8</cross-reference>, there is provided an orthogonal three-dimension coordinate system having an origin in the center of the image lens of the CCD camera, an x-axis extending horizontally from right to left in such a manner as to form an orthogonality relative to a direction toward the front of the driver&apos;s vehicle, a y-axis extending vertically upward in a direction of height of the driver&apos;s vehicle, and a z-axis extending toward the front of the driver&apos;s vehicle. </paragraph>
<paragraph id="P-0069" lvl="0"><number>&lsqb;0069&rsqb;</number> For simplification, when the origin of the plane coordinate system on the image plane is positioned on the z-axis of the space coordinate system on the travel road, the space coordinate system on the travel road can be transformed into the plane coordinate system on the image plane according to the following expression (3) and expression (4): </paragraph>
<paragraph id="P-0070" lvl="2"><number>&lsqb;0070&rsqb;</number> &lsqb;Math 3&rsqb;</paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>x&equals;&minus;f</italic></highlight><highlight><subscript>h</subscript></highlight><highlight><italic>&middot;X/Z</italic></highlight>&emsp;&emsp;(3)</in-line-formula></paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>y&equals;&minus;f</italic></highlight><highlight><subscript>v</subscript></highlight><highlight><italic>&middot;Y/Z</italic></highlight>&emsp;&emsp;(4)</in-line-formula></paragraph>
<paragraph id="P-0071" lvl="7"><number>&lsqb;0071&rsqb;</number> where each of f<highlight><subscript>h </subscript></highlight>and f<highlight><subscript>v </subscript></highlight>is a parameter which is determined by a focal length of the lens of the CCD camera. </paragraph>
<paragraph id="P-0072" lvl="0"><number>&lsqb;0072&rsqb;</number> Next, plane constitution of the travel road can be generally defined with the following and the like: </paragraph>
<paragraph id="P-0073" lvl="2"><number>&lsqb;0073&rsqb;</number> 1. a straight line. </paragraph>
<paragraph id="P-0074" lvl="2"><number>&lsqb;0074&rsqb;</number> 2. a curve having a constant curvature. </paragraph>
<paragraph id="P-0075" lvl="2"><number>&lsqb;0075&rsqb;</number> 3. a clothoid curve connecting the straight line and the curve, the clothoid curve having a constant rate of change in curvature. </paragraph>
<paragraph id="P-0076" lvl="0"><number>&lsqb;0076&rsqb;</number> Some tens of meters ahead of the driver&apos;s vehicle can be regarded as a curved road (having the constant curvature) or a straight road. The following expression (5) formulates a shape of the lane marker specifying the travel lane, as is seen in <cross-reference target="DRAWINGS">FIG. 9</cross-reference>A, and the following expression (6) formulates a shape of a longitudinal cross section (substantially a constant gradient), as is seen in <cross-reference target="DRAWINGS">FIG. 9</cross-reference>B: </paragraph>
<paragraph id="P-0077" lvl="2"><number>&lsqb;0077&rsqb;</number> &lsqb;Math 4&rsqb;</paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>X&equals;B&middot;Z</italic></highlight><highlight><superscript>2</superscript></highlight>/2&plus;<highlight><italic>C&middot;Z&plus;A&minus;j&middot;E</italic></highlight><highlight><subscript>0</subscript></highlight>&emsp;&emsp;(5)</in-line-formula></paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>Y&equals;D&middot;Z&minus;H</italic></highlight>&emsp;&emsp;(6)</in-line-formula></paragraph>
<paragraph id="P-0078" lvl="0"><number>&lsqb;0078&rsqb;</number> According to the embodiment, calculation of the various travel road model parameters described above with a lane width E<highlight><subscript>0 </subscript></highlight>of the travel lane uses Kalman filter. From the expression (3) to the expression (6), the following expression (7) is obtained: </paragraph>
<paragraph id="P-0079" lvl="2"><number>&lsqb;0079&rsqb;</number> &lsqb;Math 5&rsqb;</paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>x&equals;</italic></highlight>(&minus;<highlight><italic>A&plus;j&middot;E</italic></highlight><highlight><subscript>0</subscript></highlight>)&middot;<highlight><italic>f</italic></highlight><highlight><subscript>h</subscript></highlight>&middot;(<highlight><italic>y&plus;f</italic></highlight><highlight><subscript>v</subscript></highlight><highlight><italic>&middot;D</italic></highlight>)/(<highlight><italic>H&middot;f</italic></highlight><highlight><subscript>v</subscript></highlight>)&minus;<highlight><italic>B&middot;H&middot;f</italic></highlight><highlight><subscript>v</subscript></highlight><highlight><italic>&middot;f</italic></highlight><highlight><subscript>h</subscript></highlight>/(<highlight><italic>y&plus;f</italic></highlight><highlight><subscript>v</subscript></highlight><highlight><italic>&middot;D</italic></highlight>)&minus;<highlight><italic>C&middot;f</italic></highlight><highlight><subscript>h</subscript></highlight>&emsp;&emsp;(7)</in-line-formula></paragraph>
<paragraph id="P-0080" lvl="7"><number>&lsqb;0080&rsqb;</number> where j&equals;&ldquo;0&rdquo; for the left lane marker of the travel lane for the driver&apos;s vehicle, while j&equals;&ldquo;1&rdquo; for the right lane marker of the travel lane for the driver&apos;s vehicle. </paragraph>
<paragraph id="P-0081" lvl="0"><number>&lsqb;0081&rsqb;</number> The expression (7) may be used as an output equation constituting an extended Kalman filter. From the travel road curvature and vehicle state quantity, the expression (7) can calculate the x-coordinate corresponding to the y-coordinate defined on the picture image plane. </paragraph>
<paragraph id="P-0082" lvl="0"><number>&lsqb;0082&rsqb;</number> Hereinabove, an estimated state quantity (the travel road model parameters) by the Kalman filter include: lateral displacement A, travel lane curvature B, yaw angle C, pitch angle D of the driver&apos;s vehicle, height H from the ground at which height image pickup section <highlight><bold>1</bold></highlight> (such as the CCD camera) is installed. The parameter f<highlight><subscript>h </subscript></highlight>(determined by the focal length of the lens), the parameter f<highlight><subscript>v </subscript></highlight>(determined by the focal length of the lens), and the lane width E<highlight><subscript>0 </subscript></highlight>are set constant. Satisfying the lane marker detection point (x<highlight><subscript>wi</subscript></highlight>, y<highlight><subscript>wi</subscript></highlight>), the expression (7) can be replaced with the following expression (8): </paragraph>
<paragraph id="P-0083" lvl="2"><number>&lsqb;0083&rsqb;</number> &lsqb;Math 6&rsqb;</paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>x</italic></highlight><highlight><subscript>wi</subscript></highlight>&equals;(&minus;<highlight><italic>A&plus;j&middot;E</italic></highlight><highlight><subscript>0</subscript></highlight>)&middot;<highlight><italic>f</italic></highlight><highlight><subscript>h</subscript></highlight>&middot;(<highlight><italic>y</italic></highlight><highlight><subscript>wi</subscript></highlight><highlight><italic>&plus;f</italic></highlight><highlight><subscript>v</subscript></highlight><highlight><italic>&middot;D</italic></highlight>)/(<highlight><italic>H&middot;f</italic></highlight><highlight><subscript>v</subscript></highlight>)&minus;<highlight><italic>B&middot;H&middot;f</italic></highlight><highlight><subscript>v</subscript></highlight><highlight><italic>&middot;f</italic></highlight><highlight><subscript>h</subscript></highlight>/(<highlight><italic>y</italic></highlight><highlight><subscript>wi</subscript></highlight><highlight><italic>&plus;f</italic></highlight><highlight><subscript>v</subscript></highlight><highlight><italic>&middot;D</italic></highlight>)&minus;<highlight><italic>C&middot;f</italic></highlight><highlight><subscript>h</subscript></highlight>&emsp;&emsp;(8)</in-line-formula></paragraph>
<paragraph id="P-0084" lvl="0"><number>&lsqb;0084&rsqb;</number> Japanese Patent Unexamined Publication No. Heisei 6(1994)-020189 describes a method of calculating each of the above travel road model parameters with the Kalman filter which is constituted of a proper output equation equivalent to the above expression (8). Thus, detailed description of the expression (8) is to be omitted. </paragraph>
<paragraph id="P-0085" lvl="0"><number>&lsqb;0085&rsqb;</number> It has been proved that the expression (8) alone cannot accurately calculate all of the travel road model parameters. More specifically described as follows: </paragraph>
<paragraph id="P-0086" lvl="2"><number>&lsqb;0086&rsqb;</number> The expression (8) includes the travel road model parameters which are five in number. An accurate calculation of all the five travel road model parameters requires (image information on) at least one lane marker detection point for the lane marker on each of the right side and the left side of the travel lane for the driver&apos;s vehicle. In addition, the above calculation requires (image information on) at least five lane marker detection points in total. </paragraph>
<paragraph id="P-0087" lvl="0"><number>&lsqb;0087&rsqb;</number> Contrary to the above, in case the lane marker detection point(s) is detectable, for example, only on the left side of the travel lane for the driver&apos;s vehicle, the following expression (9) may replace the expression (8): </paragraph>
<paragraph id="P-0088" lvl="2"><number>&lsqb;0088&rsqb;</number> &lsqb;Math 7&rsqb;</paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>x</italic></highlight><highlight><subscript>wi</subscript></highlight>&equals;(&minus;<highlight><italic>A</italic></highlight>)<highlight><italic>&middot;f</italic></highlight><highlight><subscript>h</subscript></highlight>&middot;(<highlight><italic>y</italic></highlight><highlight><subscript>wi</subscript></highlight><highlight><italic>&plus;f</italic></highlight><highlight><subscript>v</subscript></highlight><highlight><italic>&middot;D</italic></highlight>)/(<highlight><italic>H&middot;f</italic></highlight><highlight><subscript>v</subscript></highlight>)&minus;<highlight><italic>B&middot;H&middot;f</italic></highlight><highlight><subscript>v</subscript></highlight><highlight><italic>&middot;f</italic></highlight><highlight><subscript>h</subscript></highlight>/(<highlight><italic>y</italic></highlight><highlight><subscript>wi</subscript></highlight><highlight><italic>&plus;f</italic></highlight><highlight><subscript>v</subscript></highlight><highlight><italic>&middot;D</italic></highlight>)&minus;<highlight><italic>C&middot;f</italic></highlight><highlight><subscript>h</subscript></highlight>&emsp;&emsp;(9)</in-line-formula></paragraph>
<paragraph id="P-0089" lvl="0"><number>&lsqb;0089&rsqb;</number> Even k times height H &lcub;from the ground at which height image pickup section <highlight><bold>1</bold></highlight> (such as the CCD camera) is installed&rcub; can satisfy the expression (9), with k times lateral displacement A and 1/k times (one kth of) travel lane curvature B. Hereinabove, lateral displacement A and travel lane curvature B cannot be determined. </paragraph>
<paragraph id="P-0090" lvl="0"><number>&lsqb;0090&rsqb;</number> On the other hand, in case the lane marker detection point(s) is detectable only on the right side of the travel lane for the driver&apos;s vehicle, the expression (9) may also replace the expression (8). In other words, the description concerning the left side as described above can hold true to the right side. </paragraph>
<paragraph id="P-0091" lvl="0"><number>&lsqb;0091&rsqb;</number> In case of a stereo method (namely, when the CCD cameras are installed both on the left side and the right side), two expressions (not equivalent to each other) corresponding to the expression (9) can be given. Therefore, even detection of one-side (left or right) lane marker can achieve accurate calculation of all the travel road model parameters. </paragraph>
<paragraph id="P-0092" lvl="0"><number>&lsqb;0092&rsqb;</number> According to the embodiment, when the lane marker on only one of the right side and the left side of the travel lane for the driver&apos;s vehicle is detectable (namely, detection of one-side lane marker) as described above, a distinctive part of a forward vehicle traveling ahead of the driver&apos;s vehicle can help calculate accurately the other parameters. For example, the distinctive part can be a back number plate of the forward vehicle. </paragraph>
<paragraph id="P-0093" lvl="0"><number>&lsqb;0093&rsqb;</number> Detection of the back number plate can be carried out, for example, in a template matching. The back number plate can be determined in terms of shape (aspect ratio). Therefore, as is seen in <cross-reference target="DRAWINGS">FIG. 10</cross-reference> for example, a plurality of the templates (having the above determined aspect ratio) are prepared in advance. Then, the plurality of the templates are moved on the image. Then, an inner product of the pixel brilliance is given. Higher inner product of the pixel brilliance signifies existence of an object having similar brilliance distribution on the image (coordinate of the template). Namely, the above existing object can be supposed to be the back number plate. Then, the coordinate (of the template) and the inner product (of the pixel brilliance) are to be stored as data. The inner product (of the pixel brilliance) greater than its previous value may require renewal of the coordinate (of the template) and the inner product (of the pixel brilliance). </paragraph>
<paragraph id="P-0094" lvl="0"><number>&lsqb;0094&rsqb;</number> As a result, the back number plate of the forward vehicle can be thus detected by the template matching. Then, a scale (longitudinal or lateral) of the template (namely, a scale on the image) and standard of an actual number plate may contribute to calculation of a height H<highlight><subscript>pc </subscript></highlight>(from the ground) of the number plate of the forward vehicle. More specifically, height H<highlight><subscript>pc </subscript></highlight>is a distance from the ground to a vertical center of the number plate of the forward vehicle. A center point of the number plate is defined as a detection point. An actual coordinate (Y<highlight><subscript>pc</subscript></highlight>, Z<highlight><subscript>pc</subscript></highlight>) of the detection point in the center of the number plate is given by the following expression (10) and expression (11): </paragraph>
<paragraph id="P-0095" lvl="2"><number>&lsqb;0095&rsqb;</number> &lsqb;Math 8&rsqb;</paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>Y</italic></highlight><highlight><subscript>pc</subscript></highlight><highlight><italic>&equals;L&middot;</italic></highlight>sin (<highlight><italic>D</italic></highlight>)&plus;(<highlight><italic>H</italic></highlight><highlight><subscript>pc</subscript></highlight><highlight><italic>&minus;H</italic></highlight>)&middot;cos (<highlight><italic>D</italic></highlight>)&emsp;&emsp;(10)</in-line-formula></paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>Z</italic></highlight><highlight><subscript>pc</subscript></highlight><highlight><italic>&equals;L&middot;</italic></highlight>cos (<highlight><italic>D</italic></highlight>)&minus;(<highlight><italic>H</italic></highlight><highlight><subscript>pc</subscript></highlight><highlight><italic>&minus;H</italic></highlight>)&middot;sin (<highlight><italic>D</italic></highlight>)&emsp;&emsp;(11)</in-line-formula></paragraph>
<paragraph id="P-0096" lvl="7"><number>&lsqb;0096&rsqb;</number> where L stands for a length from the driver&apos;s vehicle to the number plate of the forward vehicle, and H<highlight><subscript>pc </subscript></highlight>stands for the height (from the ground) of the number plate of the forward vehicle. </paragraph>
<paragraph id="P-0097" lvl="0"><number>&lsqb;0097&rsqb;</number> Since pitch angle D is minor, the expression (10) and the expression (11) can respectively be approximated to the following expression (12) and expression (13): </paragraph>
<paragraph id="P-0098" lvl="2"><number>&lsqb;0098&rsqb;</number> &lsqb;Math 9&rsqb;</paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>Y</italic></highlight><highlight><subscript>pc</subscript></highlight><highlight><italic>&equals;L&middot;D&plus;</italic></highlight>(<highlight><italic>H</italic></highlight><highlight><subscript>pc</subscript></highlight><highlight><italic>&minus;H</italic></highlight>)&emsp;&emsp;(12)</in-line-formula></paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>Z</italic></highlight><highlight><subscript>pc</subscript></highlight><highlight><italic>&equals;L&minus;</italic></highlight>(<highlight><italic>H</italic></highlight><highlight><subscript>pc</subscript></highlight><highlight><italic>&minus;H</italic></highlight>)&middot;<highlight><italic>D</italic></highlight>&emsp;&emsp;(13)</in-line-formula></paragraph>
<paragraph id="P-0099" lvl="0"><number>&lsqb;0099&rsqb;</number> An actual coordinate (X<highlight><subscript>pl</subscript></highlight>, Y<highlight><subscript>pl</subscript></highlight>, Z<highlight><subscript>pl</subscript></highlight>) at a left end of the number plate satisfies the following expression (14), expression (15), and expression (16). </paragraph>
<paragraph id="P-0100" lvl="2"><number>&lsqb;0100&rsqb;</number> &lsqb;Math 10&rsqb;</paragraph>
<paragraph lvl="0"><in-line-formula>Y<highlight><subscript>pl</subscript></highlight>&equals;Y<highlight><subscript>pc</subscript></highlight>&emsp;&emsp;(14)</in-line-formula></paragraph>
<paragraph lvl="0"><in-line-formula>Z<highlight><subscript>pl</subscript></highlight>&equals;Z<highlight><subscript>pc</subscript></highlight>&emsp;&emsp;(15)</in-line-formula></paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>X</italic></highlight><highlight><subscript>pl</subscript></highlight><highlight><italic>&equals;W</italic></highlight><highlight><subscript>p</subscript></highlight>/2&plus;<highlight><italic>X</italic></highlight><highlight><subscript>pc</subscript></highlight>&emsp;&emsp;(16)</in-line-formula></paragraph>
<paragraph id="P-0101" lvl="7"><number>&lsqb;0101&rsqb;</number> where W<highlight><subscript>p </subscript></highlight>is an actual width of the number plate, and X<highlight><subscript>pc </subscript></highlight>is an actual X-coordinate in the center of the number plate. </paragraph>
<paragraph id="P-0102" lvl="0"><number>&lsqb;0102&rsqb;</number> On the other hand, an image coordinate (x<highlight><subscript>pc</subscript></highlight>, y<highlight><subscript>pc</subscript></highlight>) in the center of the number plate can be given by the following expression (17) and expression (18), respectively, in accordance with the expression (3) and the expression (4): </paragraph>
<paragraph id="P-0103" lvl="2"><number>&lsqb;0103&rsqb;</number> &lsqb;Math 11&rsqb;</paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>x</italic></highlight><highlight><subscript>pc</subscript></highlight><highlight><italic>&equals;&minus;f</italic></highlight><highlight><subscript>h</subscript></highlight><highlight><italic>&middot;X</italic></highlight><highlight><subscript>pc</subscript></highlight><highlight><italic>/Z</italic></highlight><highlight><subscript>pc</subscript></highlight>&emsp;&emsp;(17)</in-line-formula></paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>y</italic></highlight><highlight><subscript>pc</subscript></highlight><highlight><italic>&equals;&minus;f</italic></highlight><highlight><subscript>v</subscript></highlight><highlight><italic>&middot;Y</italic></highlight><highlight><subscript>pc</subscript></highlight><highlight><italic>/Z</italic></highlight><highlight><subscript>pc</subscript></highlight>&emsp;&emsp;(18)</in-line-formula></paragraph>
<paragraph id="P-0104" lvl="0"><number>&lsqb;0104&rsqb;</number> Likewise, an image coordinate (x<highlight><subscript>pl</subscript></highlight>, y<highlight><subscript>pl</subscript></highlight>) in the center at the left end of the number plate can be given by the following expression (19) and expression (20), respectively, in accordance with the expression (3) and the expression (4): </paragraph>
<paragraph id="P-0105" lvl="2"><number>&lsqb;0105&rsqb;</number> &lsqb;Math 12&rsqb;</paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>x</italic></highlight><highlight><subscript>pl</subscript></highlight><highlight><italic>&equals;&minus;f</italic></highlight><highlight><subscript>h</subscript></highlight><highlight><italic>&middot;X</italic></highlight><highlight><subscript>pl</subscript></highlight><highlight><italic>/Z</italic></highlight><highlight><subscript>pl</subscript></highlight>&emsp;&emsp;(19)</in-line-formula></paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>y</italic></highlight><highlight><subscript>pl</subscript></highlight><highlight><italic>&equals;&minus;f</italic></highlight><highlight><subscript>v</subscript></highlight><highlight><italic>&middot;Y</italic></highlight><highlight><subscript>pl</subscript></highlight><highlight><italic>/Z</italic></highlight><highlight><subscript>pl</subscript></highlight>&emsp;&emsp;(20)</in-line-formula></paragraph>
<paragraph id="P-0106" lvl="0"><number>&lsqb;0106&rsqb;</number> Summarizing the expression (14) to expression (20) can give the following expression (21) and expression (22): </paragraph>
<paragraph id="P-0107" lvl="2"><number>&lsqb;0107&rsqb;</number> &lsqb;Math 13&rsqb;</paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>x</italic></highlight><highlight><subscript>pl</subscript></highlight><highlight><italic>&equals;&minus;f</italic></highlight><highlight><subscript>h</subscript></highlight>&middot;(<highlight><italic>W</italic></highlight><highlight><subscript>p</subscript></highlight>/2)/&lcub;<highlight><italic>L&minus;</italic></highlight>(<highlight><italic>H</italic></highlight><highlight><subscript>pc</subscript></highlight><highlight><italic>&minus;H</italic></highlight>)<highlight><italic>&middot;D&rcub;&plus;x</italic></highlight><highlight><subscript>pc</subscript></highlight>&emsp;&emsp;(21)</in-line-formula></paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>y</italic></highlight><highlight><subscript>pl</subscript></highlight><highlight><italic>&equals;&minus;f</italic></highlight><highlight><subscript>v</subscript></highlight><highlight><italic>&middot;&lcub;L&middot;D&plus;</italic></highlight>(<highlight><italic>H</italic></highlight><highlight><subscript>pc</subscript></highlight><highlight><italic>&minus;H</italic></highlight>)&rcub;/&lcub;<highlight><italic>L&minus;</italic></highlight>(<highlight><italic>H</italic></highlight><highlight><subscript>pc</subscript></highlight><highlight><italic>&minus;H</italic></highlight>)&middot;<highlight><italic>D&rcub;</italic></highlight>&emsp;&emsp;(22)</in-line-formula></paragraph>
<paragraph id="P-0108" lvl="0"><number>&lsqb;0108&rsqb;</number> Therefore, using pitch angle D and height H (of the CCD camera from the ground) which are calculated in the detection of both-side lane marker leaves only the following two unknown in the expression (21) and the expression (22): </paragraph>
<paragraph id="P-0109" lvl="2"><number>&lsqb;0109&rsqb;</number> 1. Length L from the driver&apos;s vehicle to the number plate of the forward vehicle. </paragraph>
<paragraph id="P-0110" lvl="2"><number>&lsqb;0110&rsqb;</number> 2. Height H<highlight><subscript>pc </subscript></highlight>(from the ground) of the number plate of the forward vehicle. </paragraph>
<paragraph id="P-0111" lvl="2"><number>&lsqb;0111&rsqb;</number> Calculation of length L and height H<highlight><subscript>pc </subscript></highlight>is rendered possible. </paragraph>
<paragraph id="P-0112" lvl="0"><number>&lsqb;0112&rsqb;</number> The expression (21), the expression (22), and the expression (8) can be used for the detection of the one-side lane marker. In case height H<highlight><subscript>pc </subscript></highlight>(from the ground) of the number plate of the forward vehicle is the same as height H<highlight><subscript>pc </subscript></highlight>obtained in the detection of the both-side lane marker, six quantities are left unknown. Therefore, detecting four lane marker detection points for the one-side lane marker can give six expressions in total. Namely, the expressions (8) four in number, the expression (21) one in number and the expression (22) one in number. Thereby, accurate calculation of all the above six unknown quantities becomes possible. </paragraph>
<paragraph id="P-0113" lvl="0"><number>&lsqb;0113&rsqb;</number> Then, there are defined x values on the four lane marker detection points respectively as x<highlight><subscript>d0</subscript></highlight>, x<highlight><subscript>d1</subscript></highlight>, x<highlight><subscript>d2 </subscript></highlight>and x<highlight><subscript>d3 </subscript></highlight>to be assigned to the expression (8). Then, a vector y<highlight><subscript>k </subscript></highlight>is defined by the following expression (23) having a component of the left side of each of the four expressions (8), the expression (21), and the expression (22): </paragraph>
<paragraph id="P-0114" lvl="2"><number>&lsqb;0114&rsqb;</number> &lsqb;Math 14&rsqb;</paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>y</italic></highlight><highlight><subscript>k</subscript></highlight><highlight><italic>&equals;&lsqb;x</italic></highlight><highlight><subscript>d0</subscript></highlight><highlight><italic>x</italic></highlight><highlight><subscript>d1</subscript></highlight><highlight><italic>x</italic></highlight><highlight><subscript>d2</subscript></highlight><highlight><italic>x</italic></highlight><highlight><subscript>d3</subscript></highlight><highlight><italic>x</italic></highlight><highlight><subscript>pl</subscript></highlight><highlight><italic>y</italic></highlight><highlight><subscript>pl</subscript></highlight>&rsqb;&prime;&emsp;&emsp;(23)</in-line-formula></paragraph>
<paragraph id="P-0115" lvl="0"><number>&lsqb;0115&rsqb;</number> On the other hand, the travel road model parameter is designated as x<highlight><subscript>k </subscript></highlight>and defined by the following expression (24): </paragraph>
<paragraph id="P-0116" lvl="2"><number>&lsqb;0116&rsqb;</number> &lsqb;Math 15&rsqb;</paragraph>
<paragraph lvl="0"><in-line-formula>x<highlight><subscript>k</subscript></highlight>&equals;&lsqb;ABCDHL&rsqb;&prime;&emsp;&emsp;(24)</in-line-formula></paragraph>
<paragraph id="P-0117" lvl="0"><number>&lsqb;0117&rsqb;</number> Thereby, the vector y<highlight><subscript>k</subscript></highlight>, the travel road model parameter x<highlight><subscript>k </subscript></highlight>can be correlated by the following expression (25): </paragraph>
<paragraph id="P-0118" lvl="2"><number>&lsqb;0118&rsqb;</number> &lsqb;Math 16&rsqb;</paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>y</italic></highlight><highlight><subscript>k</subscript></highlight><highlight><italic>&equals;f</italic></highlight>(<highlight><italic>x</italic></highlight><highlight><subscript>k</subscript></highlight>)&plus;<highlight><italic>n</italic></highlight><highlight><subscript>k</subscript></highlight>&emsp;&emsp;(25)</in-line-formula></paragraph>
<paragraph id="P-0119" lvl="7"><number>&lsqb;0119&rsqb;</number> where f stands for a nonlinear function given by the expression (8), the expression (21) and the expression (22), while n<highlight><subscript>k </subscript></highlight>stands for an observation noise. </paragraph>
<paragraph id="P-0120" lvl="0"><number>&lsqb;0120&rsqb;</number> Since the Kalman filter is linear, the expression (25) needs to be linearized. Therefore, the expression (25) is partially differentiated, to thereby obtain the following expression (26) featuring linearity: </paragraph>
<paragraph id="P-0121" lvl="2"><number>&lsqb;0121&rsqb;</number> &lsqb;Math 17&rsqb;</paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>y</italic></highlight><highlight><subscript>k</subscript></highlight><highlight><italic>&equals;Df</italic></highlight>(<highlight><italic>x</italic></highlight><highlight><subscript>k</subscript></highlight>)/<highlight><italic>Dx</italic></highlight><highlight><subscript>k</subscript></highlight><highlight><italic>&verbar;x</italic></highlight><highlight><subscript>k</subscript></highlight><highlight><italic>&equals;x</italic></highlight><highlight><subscript>k</subscript></highlight>(<highlight><italic>n</italic></highlight>)<highlight><italic>&plus;n</italic></highlight><highlight><subscript>k</subscript></highlight>&emsp;&emsp;(26)</in-line-formula></paragraph>
<paragraph id="P-0122" lvl="7"><number>&lsqb;0122&rsqb;</number> where Df/Dx&verbar;x&equals;x<highlight><subscript>0 </subscript></highlight>is a partial differential coefficient of the nonlinear function f when x&equals;x<highlight><subscript>0</subscript></highlight>. </paragraph>
<paragraph id="P-0123" lvl="0"><number>&lsqb;0123&rsqb;</number> The partial differential coefficient can be a matrix with a column having dimension of the vector y<highlight><subscript>k </subscript></highlight>and a row having dimension of the travel road model parameter x<highlight><subscript>k</subscript></highlight>. The partial differential coefficient (matrix) is designated by Ck. <cross-reference target="DRAWINGS">FIG. 11</cross-reference> is a constitution of the Kalman filter described above. Ke is referred to as Kalman gain. The Kalman gain Ke can be determined based on variance in the observation noise n<highlight><subscript>k </subscript></highlight>described in the expression (25) and the expression (26), and variance in a process noise w<highlight><subscript>k </subscript></highlight>to be described afterward &lcub;see the following expression (28)&rcub;. Details of the Kalman gain Ke are omitted from the specification since it is known as Kalman filter theory. </paragraph>
<paragraph id="P-0124" lvl="0"><number>&lsqb;0124&rsqb;</number> The following expression (27) is a random walk model which approximates a behavior of the travel road model parameter x: </paragraph>
<paragraph id="P-0125" lvl="2"><number>&lsqb;0125&rsqb;</number> &lsqb;Math 18&rsqb;</paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>x</italic></highlight><highlight><subscript>k</subscript></highlight>(<highlight><italic>n</italic></highlight>)&equals;<highlight><italic>x</italic></highlight><highlight><subscript>k</subscript></highlight>(<highlight><italic>n&minus;</italic></highlight>1)&plus;<highlight><italic>w</italic></highlight><highlight><subscript>k</subscript></highlight>(<highlight><italic>n</italic></highlight>)&emsp;&emsp;(27)</in-line-formula></paragraph>
<paragraph id="P-0126" lvl="7"><number>&lsqb;0126&rsqb;</number> where &ldquo;n&rdquo; signifies a datum of an &ldquo;n-th&rdquo; sample, and w<highlight><subscript>k </subscript></highlight>is referred to as &ldquo;process noise&rdquo; which can be approximated on a white Gaussian noise row. </paragraph>
<paragraph id="P-0127" lvl="0"><number>&lsqb;0127&rsqb;</number> The variance in the process noise w<highlight><subscript>k </subscript></highlight>can determine the behavior. It is estimated that the greater the variance is, the more easily the variable can vary. The process noise w<highlight><subscript>k </subscript></highlight>can be defined by the following expression (28): </paragraph>
<paragraph id="P-0128" lvl="2"><number>&lsqb;0128&rsqb;</number> &lsqb;Math 19&rsqb;</paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>w</italic></highlight><highlight><subscript>k</subscript></highlight><highlight><italic>&equals;&lsqb;w</italic></highlight><highlight><subscript>k&mdash;</subscript></highlight><highlight><italic>A w</italic></highlight><highlight><subscript>k&mdash;</subscript></highlight><highlight><italic>B w</italic></highlight><highlight><subscript>k&mdash;</subscript></highlight><highlight><italic>C w</italic></highlight><highlight><subscript>k&mdash;</subscript></highlight><highlight><italic>D w</italic></highlight><highlight><subscript>k&mdash;</subscript></highlight><highlight><italic>H w</italic></highlight><highlight><subscript>k&mdash;</subscript></highlight><highlight><italic>L&rsqb;&prime;</italic></highlight>&emsp;&emsp;(28)</in-line-formula></paragraph>
<paragraph id="P-0129" lvl="0"><number>&lsqb;0129&rsqb;</number> The variance in each component of the process noise w<highlight><subscript>k </subscript></highlight>is a tuning constant of the Kalman filter. The variance is described with &ldquo;var( )&rdquo; on the right side of each of the following expression (29) to expression (34): </paragraph>
<paragraph id="P-0130" lvl="2"><number>&lsqb;0130&rsqb;</number> &lsqb;Math 20&rsqb;</paragraph>
<paragraph lvl="0"><in-line-formula>var(w<highlight><subscript>k&mdash;</subscript></highlight>A)&equals;var_A&emsp;&emsp;(29)</in-line-formula></paragraph>
<paragraph lvl="0"><in-line-formula>var(w<highlight><subscript>k&mdash;</subscript></highlight>B)&equals;var_B&emsp;&emsp;(30)</in-line-formula></paragraph>
<paragraph lvl="0"><in-line-formula>var(w<highlight><subscript>k&mdash;</subscript></highlight>C)&equals;var_C&emsp;&emsp;(31)</in-line-formula></paragraph>
<paragraph lvl="0"><in-line-formula>var(w<highlight><subscript>k&mdash;</subscript></highlight>D)&equals;var_D&emsp;&emsp;(32)</in-line-formula></paragraph>
<paragraph lvl="0"><in-line-formula>var(w<highlight><subscript>k&mdash;</subscript></highlight>H)&equals;var_H&emsp;&emsp;(33)</in-line-formula></paragraph>
<paragraph lvl="0"><in-line-formula>var(w<highlight><subscript>k&mdash;</subscript></highlight>L)&equals;var_L&emsp;&emsp;(34)</in-line-formula></paragraph>
<paragraph id="P-0131" lvl="0"><number>&lsqb;0131&rsqb;</number> The above values are to be predetermined based on the behaviors of the driver&apos;s vehicle and the forward vehicle. Of the above values, variance in length L (from the driver&apos;s vehicle to the number plate of the forward vehicle) may be further improved with an actual value (measured value). In other words, the variance in length L is attributable to its sensitivity to tendency of acceleration/deceleration of the driver&apos;s vehicle and the forward vehicle. Therefore, the measured value may improve performance of the Kalman filter. </paragraph>
<paragraph id="P-0132" lvl="0"><number>&lsqb;0132&rsqb;</number> On the other hand, the variance in the observation noise n<highlight><subscript>k </subscript></highlight>can determine amount of the noise of signal. More specifically, it is regarded that the greater the variance in the observation noise n<highlight><subscript>k </subscript></highlight>is, the more the noise is included in variable. As a result, the variance observation noise n<highlight><subscript>k </subscript></highlight>can be estimated in the above manner. The observation noise n<highlight><subscript>k </subscript></highlight>can be defined by the following expression (35): </paragraph>
<paragraph id="P-0133" lvl="2"><number>&lsqb;0133&rsqb;</number> &lsqb;Math 21&rsqb;</paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>n</italic></highlight><highlight><subscript>k</subscript></highlight><highlight><italic>&equals;&lsqb;n</italic></highlight><highlight><subscript>k&mdash;</subscript></highlight><highlight><italic>x</italic></highlight><highlight><subscript>d0 </subscript></highlight><highlight><italic>n</italic></highlight><highlight><subscript>k&mdash;</subscript></highlight><highlight><italic>x</italic></highlight><highlight><subscript>d1 </subscript></highlight><highlight><italic>n</italic></highlight><highlight><subscript>k&mdash;</subscript></highlight><highlight><italic>x</italic></highlight><highlight><subscript>d2 </subscript></highlight><highlight><italic>n</italic></highlight><highlight><subscript>k&mdash;</subscript></highlight><highlight><italic>x</italic></highlight><highlight><subscript>d3 </subscript></highlight><highlight><italic>n</italic></highlight><highlight><subscript>k&mdash;</subscript></highlight><highlight><italic>x</italic></highlight><highlight><subscript>pl </subscript></highlight>n<highlight><subscript>k&mdash;</subscript></highlight>y<highlight><subscript>pl</subscript></highlight>&rsqb;&prime;&emsp;&emsp;(35)</in-line-formula></paragraph>
<paragraph id="P-0134" lvl="0"><number>&lsqb;0134&rsqb;</number> The variance in each component of observation noise n<highlight><subscript>k </subscript></highlight>is a tuning constant of the Kalman filter. Each component of observation noise n<highlight><subscript>k </subscript></highlight>is given by one of the respective right sides of the following expression (36) to expression (41): </paragraph>
<paragraph id="P-0135" lvl="2"><number>&lsqb;0135&rsqb;</number> &lsqb;Math 22&rsqb;</paragraph>
<paragraph lvl="0"><in-line-formula>var(n<highlight><subscript>k&mdash;</subscript></highlight>x<highlight><subscript>d0</subscript></highlight>)&equals;var_x<highlight><subscript>d0</subscript></highlight>&emsp;&emsp;(36)</in-line-formula></paragraph>
<paragraph lvl="0"><in-line-formula>var(n<highlight><subscript>k&mdash;</subscript></highlight>x<highlight><subscript>d1</subscript></highlight>)&equals;var_x<highlight><subscript>d1</subscript></highlight>&emsp;&emsp;(37)</in-line-formula></paragraph>
<paragraph lvl="0"><in-line-formula>var(n<highlight><subscript>k&mdash;</subscript></highlight>x<highlight><subscript>d2</subscript></highlight>)&equals;var_x<highlight><subscript>d2</subscript></highlight>&emsp;&emsp;(38)</in-line-formula></paragraph>
<paragraph lvl="0"><in-line-formula>var(n<highlight><subscript>k&mdash;</subscript></highlight>x<highlight><subscript>d3</subscript></highlight>)&equals;var_x<highlight><subscript>d3</subscript></highlight>&emsp;&emsp;(39)</in-line-formula></paragraph>
<paragraph lvl="0"><in-line-formula>var(n<highlight><subscript>k&mdash;</subscript></highlight>x<highlight><subscript>pl</subscript></highlight>)&equals;var_x<highlight><subscript>pl</subscript></highlight>&emsp;&emsp;(40)</in-line-formula></paragraph>
<paragraph lvl="0"><in-line-formula>var(n<highlight><subscript>k&mdash;</subscript></highlight>y<highlight><subscript>pl</subscript></highlight>)&equals;var_y<highlight><subscript>pl</subscript></highlight>&emsp;&emsp;(41)</in-line-formula></paragraph>
<paragraph id="P-0136" lvl="0"><number>&lsqb;0136&rsqb;</number> Hereinabove, diminishing the variance in image coordinate y<highlight><subscript>pl </subscript></highlight>in the center at the left end of the number plate of the forward vehicle, in other words, diminishing the upward and downward variance of the number plate as length L (from the driver&apos;s vehicle to the number plate of the forward vehicle) becomes greater may further improve performance of the Kalman filter. Herein, height H<highlight><subscript>pc </subscript></highlight>(from the ground) of the number plate of the forward vehicle is presumed to be constant. As a matter of fact, height H<highlight><subscript>pc</subscript></highlight>, however, may vary according to a bounce of the forward vehicle. Herein, great length L (from the driver&apos;s vehicle to the number plate of the forward vehicle) allows the expression (22) to be approximated to the following expression (42): </paragraph>
<paragraph id="P-0137" lvl="2"><number>&lsqb;0137&rsqb;</number> &lsqb;Math 23&rsqb;</paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>y</italic></highlight><highlight><subscript>pl</subscript></highlight><highlight><italic>&equals;&minus;f</italic></highlight><highlight><subscript>v</subscript></highlight><highlight><italic>&middot;&lcub;D&plus;</italic></highlight>(<highlight><italic>&minus;H</italic></highlight>)/<highlight><italic>L&rcub;/&lcub;</italic></highlight>1&minus;(&minus;<highlight><italic>H</italic></highlight>)/<highlight><italic>L&middot;D&rcub;</italic></highlight>&emsp;&emsp;(42)</in-line-formula></paragraph>
<paragraph id="P-0138" lvl="0"><number>&lsqb;0138&rsqb;</number> Thereby, when length L (from the driver&apos;s vehicle to the number plate of the forward vehicle) is great, variance in height H<highlight><subscript>pc </subscript></highlight>(from the ground) of the number plate of the forward vehicle may cause smaller effect on the variance in image coordinate y<highlight><subscript>pl </subscript></highlight>in the center at the left end of the number plate of the forward vehicle (namely, the upward and downward variance of the number plate of the forward vehicle). </paragraph>
<paragraph id="P-0139" lvl="0"><number>&lsqb;0139&rsqb;</number> In other words, the closer the number plate of the forward vehicle is to the driver&apos;s vehicle (or the smaller the length L is), the lower the approximation accuracy becomes. Therefore, the noise can be supposed to be great. </paragraph>
<paragraph id="P-0140" lvl="0"><number>&lsqb;0140&rsqb;</number> Summarizing the above, great length L (from the driver&apos;s vehicle to the number plate of the forward vehicle) can contribute to a highly accurate estimation. On the other hand, small length L (from the driver&apos;s vehicle to the number plate of the forward vehicle) can reduce influence which may be caused by the bounce of the forward vehicle. </paragraph>
<paragraph id="P-0141" lvl="0"><number>&lsqb;0141&rsqb;</number> Length L (from the driver&apos;s vehicle to the number plate of the forward vehicle) is, in many cases, far greater than height H of the CCD camera from the ground or height H<highlight><subscript>pc </subscript></highlight>(from the ground) of the number plate of the forward vehicle. Therefore, the approximation given by the expression (42) is, in most cases, highly accurate. In other words, the expression (42) is highly effective. </paragraph>
<paragraph id="P-0142" lvl="0"><number>&lsqb;0142&rsqb;</number> Moreover, setting the variance in the following manner may further improve performance of the Kalman filter: </paragraph>
<paragraph id="P-0143" lvl="2"><number>&lsqb;0143&rsqb;</number> The greater the variance in height H<highlight><subscript>pc </subscript></highlight>(from the ground) of the number plate of the forward vehicle is, the greater the variance in image coordinate y<highlight><subscript>pl </subscript></highlight>in the center at the left end of the number plate of the forward vehicle (namely, the upward and downward variance of the number plate of the forward vehicle) can become. </paragraph>
<paragraph id="P-0144" lvl="0"><number>&lsqb;0144&rsqb;</number> Namely, the less likely the forward vehicle is to cause the bounce, the higher the accuracy can become when height H<highlight><subscript>pc </subscript></highlight>(from the ground) of the number plate of the forward vehicle is fixed. In other words, the forward vehicle that is likely to cause the bounce may decrease approximation accuracy. In this case, the noise can be supposed to be great. </paragraph>
<paragraph id="P-0145" lvl="0"><number>&lsqb;0145&rsqb;</number> With this, the forward vehicle that is unlikely to cause the bounce can contribute to highly accurate estimation, while the forward vehicle that is likely to cause the bounce can decrease the influence which may be caused by the bounce of the forward vehicle. </paragraph>
<paragraph id="P-0146" lvl="0"><number>&lsqb;0146&rsqb;</number> The above summarizes that the closer the forward vehicle is to the driver&apos;s vehicle, the more decreased the approximation accuracy is. Moreover, the approximation accuracy may decrease with the following two combined: </paragraph>
<paragraph id="P-0147" lvl="2"><number>&lsqb;0147&rsqb;</number> 1. the forward vehicle is likely to cause the bounce, and </paragraph>
<paragraph id="P-0148" lvl="2"><number>&lsqb;0148&rsqb;</number> 2. vehicle-to-vehicle distance is small </paragraph>
<paragraph id="P-0149" lvl="0"><number>&lsqb;0149&rsqb;</number> Thus, an upper limit of the variance in height H of the CCD camera from the ground is to be set. In case the calculated variance in height H of the CCD camera from the ground is greater than the upper limit, height H of the CCD camera from the ground may be fixed at a predetermined value for calculation of each of the travel road model parameters. </paragraph>
<paragraph id="P-0150" lvl="0"><number>&lsqb;0150&rsqb;</number> Hereinafter described in accordance with a flow chart is an arithmetic processing for calculating the travel road model parameters with control unit <highlight><bold>2</bold></highlight>, as is seen in <cross-reference target="DRAWINGS">FIG. 12</cross-reference>. </paragraph>
<paragraph id="P-0151" lvl="0"><number>&lsqb;0151&rsqb;</number> In the arithmetic processing unit such as the microcomputer, the arithmetic processing may be carried out, as timer interrupt, at a predetermined sampling time &Dgr;T, for example, about 10 msec. The arithmetic processing can take the following steps: </paragraph>
<paragraph id="P-0152" lvl="2"><number>&lsqb;0152&rsqb;</number> &lt;Step 1&gt;:The routine reads in the picture image of the forward view from the driver&apos;s vehicle, which forward view is the one that is picked up with image pickup section <highlight><bold>1</bold></highlight>. </paragraph>
<paragraph id="P-0153" lvl="0"><number>&lsqb;0153&rsqb;</number> Then, the routine proceeds to the subsequent step 2. </paragraph>
<paragraph id="P-0154" lvl="2"><number>&lsqb;0154&rsqb;</number> &lt;Step 2&gt;:As is seen in <cross-reference target="DRAWINGS">FIG. 2</cross-reference>, the routine sets the small areas (lane marker detector windows) in the picture image (read in at step 1) of the forward view from the driver&apos;s vehicle, so as to detect the lane marker. </paragraph>
<paragraph id="P-0155" lvl="0"><number>&lsqb;0155&rsqb;</number> Then, the routine proceeds to the subsequent step 3. </paragraph>
<paragraph id="P-0156" lvl="2"><number>&lsqb;0156&rsqb;</number> &lt;Step 3&gt;:In the lane marker detector windows which were set at step 2, the routine carries out the primary space differentiation with the filtering, for example, Sobel filter, to thereby enhance the boundary (namely, edge) between the lane marker and the road surface. Then, as is seen in <cross-reference target="DRAWINGS">FIG. 3</cross-reference>, the routine detects the lane marker candidate points in the lane marker detector windows (after the filtering for enhancing the edge) in the picture image of the forward view from the driver&apos;s vehicle. </paragraph>
<paragraph id="P-0157" lvl="0"><number>&lsqb;0157&rsqb;</number> Then, the routine proceeds to the subsequent step 4. </paragraph>
<paragraph id="P-0158" lvl="2"><number>&lsqb;0158&rsqb;</number> &lt;Step 4&gt;:The routine detects the lane marker candidate line that most penetrates through the lane marker candidate points (in other words, through the greatest number of lane marker candidate points) in each of the lane marker detector windows detected at step 3, as is seen in <cross-reference target="DRAWINGS">FIG. 4</cross-reference> to <cross-reference target="DRAWINGS">FIG. 6</cross-reference>. </paragraph>
<paragraph id="P-0159" lvl="0"><number>&lsqb;0159&rsqb;</number> Then, the routine proceeds to the subsequent step 5. </paragraph>
<paragraph id="P-0160" lvl="2"><number>&lsqb;0160&rsqb;</number> &lt;Step 5&gt;:For each of the lane marker detector windows, the routine detects the lane marker detection point from the lane marker candidate line that is detected at step 4, as is seen in <cross-reference target="DRAWINGS">FIG. 7</cross-reference>. Then, the routine reads in the coordinate information on the lane marker detection point. </paragraph>
<paragraph id="P-0161" lvl="0"><number>&lsqb;0161&rsqb;</number> Then, the routine proceeds to the subsequent step 6. </paragraph>
<paragraph id="P-0162" lvl="2"><number>&lsqb;0162&rsqb;</number> &lt;Step 6&gt;:With the template as is seen in <cross-reference target="DRAWINGS">FIG. 10</cross-reference>, the routine detects the number plate of the forward vehicle. </paragraph>
<paragraph id="P-0163" lvl="0"><number>&lsqb;0163&rsqb;</number> Then, the routine proceeds to the subsequent step 7. </paragraph>
<paragraph id="P-0164" lvl="2"><number>&lsqb;0164&rsqb;</number> &lt;Step 7&gt;:The routine at step 7 determines whether or not the lane marker detection point detected at step 5 is at least one in number for the lane marker on each of the right side and the left side of the travel lane for the driver&apos;s vehicle; and whether or not the lane marker detection points detected at step 5 are totally at least five in number for the lane markers on both the right side and the left side of the travel lane for the driver&apos;s vehicle. With the determinations on the above two &ldquo;whethers,&rdquo; the routine determines whether or not the lane markers are in a state for detection on both the right side and the left side of the travel lane for the driver&apos;s vehicle. </paragraph>
<paragraph id="P-0165" lvl="0"><number>&lsqb;0165&rsqb;</number> In case the lane markers are in the state for detection on both the right side and the left side of the travel lane for the driver&apos;s vehicle, the routine proceeds to step 8. </paragraph>
<paragraph id="P-0166" lvl="0"><number>&lsqb;0166&rsqb;</number> Contrary to this, in case the lane markers are not in the state for detection on both the right side and the left side of the travel lane for the driver&apos;s vehicle, the routine proceeds to step 9. </paragraph>
<paragraph id="P-0167" lvl="2"><number>&lsqb;0167&rsqb;</number> &lt;Step 8&gt;:The routine may use Kalman filter described in Japanese Patent Unexamined Publication No. Heisei 6(1994)-020189 so as to calculate the following travel road model parameters and the like (which parameters correspond to the lane markers detected on both the right side and the left side of the travel lane for the driver&apos;s vehicle): </paragraph>
<paragraph id="P-0168" lvl="2"><number>&lsqb;0168&rsqb;</number> 1. lateral displacement A. </paragraph>
<paragraph id="P-0169" lvl="2"><number>&lsqb;0169&rsqb;</number> 2. travel lane curvature B. </paragraph>
<paragraph id="P-0170" lvl="2"><number>&lsqb;0170&rsqb;</number> 3. yaw angle C. </paragraph>
<paragraph id="P-0171" lvl="2"><number>&lsqb;0171&rsqb;</number> 4. pitch angle D. </paragraph>
<paragraph id="P-0172" lvl="2"><number>&lsqb;0172&rsqb;</number> 5. height H of the CCD camera from the ground. </paragraph>
<paragraph id="P-0173" lvl="0"><number>&lsqb;0173&rsqb;</number> Then, the routine proceeds to the subsequent step 10. </paragraph>
<paragraph id="P-0174" lvl="2"><number>&lsqb;0174&rsqb;</number> &lt;Step 10&gt;: The routine at step 10 determines whether or not the number plate of the forward vehicle is detected. </paragraph>
<paragraph id="P-0175" lvl="0"><number>&lsqb;0175&rsqb;</number> In case the number plate of the forward vehicle is detected, the routine proceeds to step 11. </paragraph>
<paragraph id="P-0176" lvl="0"><number>&lsqb;0176&rsqb;</number> Contrary to this, in case the number plate of the forward vehicle is not detected, the routine returns to a main program. </paragraph>
<paragraph id="P-0177" lvl="2"><number>&lsqb;0177&rsqb;</number> &lt;Step 11&gt;: With the coordinate information on the detected number plate of the forward vehicle as well as height H (of the CCD camera from the ground) and pitch angle D which latter two parameters are calculated at step 8, the routine at step 11 calculates height H<highlight><subscript>p </subscript></highlight>&lcub;(from the ground) of the number plate of the forward vehicle&rcub; and length L (from the driver&apos;s vehicle to the number plate of the forward vehicle), in accordance with the expression (21) and the expression (22). </paragraph>
<paragraph id="P-0178" lvl="0"><number>&lsqb;0178&rsqb;</number> Then, the routine returns to the main program. </paragraph>
<paragraph id="P-0179" lvl="2"><number>&lsqb;0179&rsqb;</number> &lt;Step 9&gt;:On the other hand, the routine at step 9 makes a determination that the lane markers are in a state other than the state for detection on both the right side and the left side of the travel lane for the driver&apos;s vehicle. More specifically, the routine determines whether or not the lane marker detection point detected at step 5 is zero in number for the lane marker on one of the right side and the left side of the travel lane for the driver&apos;s vehicle; and whether or not the lane marker detection point(s) detected at step 5 is(are) totally less than five in number. In addition, the routine determines whether or not the lane marker on one of the right side and the left side of the travel lane for the driver&apos;s vehicle has at least four lane marker detection points. As a result, the routine can determine whether or not the lane marker is in the state for detection on only one of the right side and the left side of the travel lane for the driver&apos;s vehicle. </paragraph>
<paragraph id="P-0180" lvl="0"><number>&lsqb;0180&rsqb;</number> In case the lane marker is in the state for detection on only one of the right side and the left side of the travel lane for the driver&apos;s vehicle, the routine proceeds to step 12. </paragraph>
<paragraph id="P-0181" lvl="0"><number>&lsqb;0181&rsqb;</number> Contrary to this, in case the lane marker is not in the state for detection on only one of the right side and the left side of the travel lane for the driver&apos;s vehicle, the routine returns to the main program. </paragraph>
<paragraph id="P-0182" lvl="2"><number>&lsqb;0182&rsqb;</number> &lt;Step 12&gt;: The routine at step 12 determines whether or not the number plate of the forward vehicle is detected. </paragraph>
<paragraph id="P-0183" lvl="0"><number>&lsqb;0183&rsqb;</number> In case the number plate of the forward vehicle is detected, the routine proceeds to step 13. </paragraph>
<paragraph id="P-0184" lvl="0"><number>&lsqb;0184&rsqb;</number> Contrary to this, in case the number plate of the forward vehicle is not detected, the routine returns to the main program. </paragraph>
<paragraph id="P-0185" lvl="2"><number>&lsqb;0185&rsqb;</number> &lt;Step 13&gt;: The routine at step 13 may use the Kalman filter given by the expression (26) and shown in <cross-reference target="DRAWINGS">FIG. 11</cross-reference>, so as to calculate length L (from the driver&apos;s vehicle to the number plate of the forward vehicle) as well as the following travel road model parameters and the like (which parameters correspond to the lane marker detected on only one of the right side and the left side of the travel lane for the driver&apos;s vehicle): </paragraph>
<paragraph id="P-0186" lvl="2"><number>&lsqb;0186&rsqb;</number> 1. lateral displacement A. </paragraph>
<paragraph id="P-0187" lvl="2"><number>&lsqb;0187&rsqb;</number> 2. travel lane curvature B. </paragraph>
<paragraph id="P-0188" lvl="2"><number>&lsqb;0188&rsqb;</number> 3. yaw angle C. </paragraph>
<paragraph id="P-0189" lvl="2"><number>&lsqb;0189&rsqb;</number> 4. pitch angle D. </paragraph>
<paragraph id="P-0190" lvl="2"><number>&lsqb;0190&rsqb;</number> 5. height H of the CCD camera from the ground. </paragraph>
<paragraph id="P-0191" lvl="0"><number>&lsqb;0191&rsqb;</number> Hereinabove, the calculation at step 13 can be carried out based on a recognition that height H<highlight><subscript>pc </subscript></highlight>(from the ground) of the number plate of the forward vehicle calculated at step 11 is the same at step 13. </paragraph>
<paragraph id="P-0192" lvl="0"><number>&lsqb;0192&rsqb;</number> Then, the routine returns to the main program. </paragraph>
<paragraph id="P-0193" lvl="0"><number>&lsqb;0193&rsqb;</number> According to the embodiment, when the lane markers on both the right side and the left side of the travel lane for the driver&apos;s vehicle are detected, the Kalman filter and the like can calculate the travel road model parameters including height H of the CCD camera from the ground. Also calculated in the same detection period include: height H<highlight><subscript>pc </subscript></highlight>(from the ground) of the number plate of the forward vehicle, and length L from the driver&apos;s vehicle to the number plate of the forward vehicle. Hereinabove, the number plate is calculated as a predetermined distinctive part of the forward vehicle. </paragraph>
<paragraph id="P-0194" lvl="0"><number>&lsqb;0194&rsqb;</number> Then, when it comes to the state in which the lane marker on only one of the right side and the left side of the travel lane for the driver&apos;s vehicle is detectable, the individual Kalman filter and the like with height H<highlight><subscript>pc </subscript></highlight>(from the ground) of the number plate of the forward vehicle can continue the calculation of the travel road model parameters. As a result, the travel road model parameters can be calculated accurately even when only one-side lane marker is detectable. </paragraph>
<paragraph id="P-0195" lvl="0"><number>&lsqb;0195&rsqb;</number> In the state of detection of one-side lane marker, the calculation accuracy of the travel road model parameters calculated with the Kalman filter can be properly adjusted in accordance with length L (from the driver&apos;s vehicle to the number plate of the forward vehicle) in the following manner: </paragraph>
<paragraph id="P-0196" lvl="2"><number>&lsqb;0196&rsqb;</number> Setting the Kalman gain Ke of the Kalman filter with a recognition that the smaller the detected length L (from the driver&apos;s vehicle to the number plate of the forward vehicle detected) is, the greater the upward and downward noise of the predetermined part of the forward vehicle is. </paragraph>
<paragraph id="P-0197" lvl="0"><number>&lsqb;0197&rsqb;</number> Likewise, in the state of detection of one-side lane marker, the calculation accuracy of the travel road model parameters calculated with the Kalman filter can be properly adjusted in accordance with the scale of upward and downward movement of the forward vehicle in the following manner: </paragraph>
<paragraph id="P-0198" lvl="2"><number>&lsqb;0198&rsqb;</number> Setting the Kalman gain Ke of the Kalman filter with a recognition that the greater the detected variance in the height H<highlight><subscript>pc </subscript></highlight>(from the ground) of the number plate of the forward vehicle is, the greater the upward and downward variance (noise) of the predetermined part of the forward vehicle is. </paragraph>
<paragraph id="P-0199" lvl="0"><number>&lsqb;0199&rsqb;</number> Furthermore, likewise, in the state of detection of one-side lane marker, the calculation accuracy of the travel road model parameters calculated with the Kalman filter can be properly adjusted in accordance with the variance in length L (from the driver&apos;s vehicle to the number plate of the forward vehicle) in the following manner: </paragraph>
<paragraph id="P-0200" lvl="2"><number>&lsqb;0200&rsqb;</number> Setting the Kalman gain Ke of the Kalman filter with a recognition that the greater the detected variance in the length L (from the driver&apos;s vehicle to the number plate of the forward vehicle) is, the greater the upward and downward variance (noise) of the predetermined part of the forward vehicle is. </paragraph>
<paragraph id="P-0201" lvl="0"><number>&lsqb;0201&rsqb;</number> Moreover, when the travel road model parameters are allowed for calculation during the calculation of height H (of the CCD camera from the ground), taking the following measure, may prevent the calculation accuracy of the travel road model parameters from being decreased by the variance in height H (of the CCD camera from the ground): </paragraph>
<paragraph id="P-0202" lvl="2"><number>&lsqb;0202&rsqb;</number> Allowing calculation of the travel road model parameters with height H (of the CCD camera from the ground) fixed at the predetermined value, when the calculated variance in height H (of the CCD camera from the ground) is greater than the predetermined upper limit. </paragraph>
<paragraph id="P-0203" lvl="0"><number>&lsqb;0203&rsqb;</number> Step 1 to step 13 can be summarized below: </paragraph>
<paragraph id="P-0204" lvl="2"><number>&lsqb;0204&rsqb;</number> i) Image pickup section <highlight><bold>1</bold></highlight> in <cross-reference target="DRAWINGS">FIG. 1</cross-reference> and step <highlight><bold>1</bold></highlight> of the arithmetic processing in <cross-reference target="DRAWINGS">FIG. 12</cross-reference> constitute a means for picking up the image according to the embodiment. </paragraph>
<paragraph id="P-0205" lvl="2"><number>&lsqb;0205&rsqb;</number> ii) Step 2 of the arithmetic processing in <cross-reference target="DRAWINGS">FIG. 12</cross-reference> constitutes a means for determining the lane marker detection area. </paragraph>
<paragraph id="P-0206" lvl="2"><number>&lsqb;0206&rsqb;</number> iii) Step 3 to step 5 of the arithmetic processing in <cross-reference target="DRAWINGS">FIG. 12</cross-reference> constitute a means for detecting the lane marker. </paragraph>
<paragraph id="P-0207" lvl="2"><number>&lsqb;0207&rsqb;</number> iv) Step 7 and step 8 of the arithmetic processing in <cross-reference target="DRAWINGS">FIG. 12</cross-reference> constitute a means for calculating the travel road model parameters in the detection of the lane markers on both sides. </paragraph>
<paragraph id="P-0208" lvl="2"><number>&lsqb;0208&rsqb;</number> v) Step 6, step 10 and step 11 of the arithmetic processing in <cross-reference target="DRAWINGS">FIG. 12</cross-reference> constitute a means for detecting the number plate of the forward vehicle. </paragraph>
<paragraph id="P-0209" lvl="2"><number>&lsqb;0209&rsqb;</number> vi) Step 9, step 12, and step 13 of the arithmetic processing in <cross-reference target="DRAWINGS">FIG. 12</cross-reference> as well as the Kalman filter in <cross-reference target="DRAWINGS">FIG. 11</cross-reference> constitute a means for calculating the travel road model parameters in the detection of the lane marker on one side. </paragraph>
<paragraph id="P-0210" lvl="2"><number>&lsqb;0210&rsqb;</number> vii) Step 13 of the arithmetic processing in <cross-reference target="DRAWINGS">FIG. 12</cross-reference> and the Kalman filter in <cross-reference target="DRAWINGS">FIG. 11</cross-reference> constitute a means for calculating height (from the ground) of the means for picking up the image. </paragraph>
<paragraph id="P-0211" lvl="0"><number>&lsqb;0211&rsqb;</number> Although the present invention has been described above by reference to a certain embodiment, the present invention is not limited to the embodiment described above. Modifications and variations of the embodiment described above will occur to those skilled in the art, in light of the above teachings. </paragraph>
<paragraph id="P-0212" lvl="0"><number>&lsqb;0212&rsqb;</number> For example, according to the embodiment, the Kalman filter is used for calculating the travel road model parameters. Other methods such as estimation system and least square method can be used for calculating the travel road model parameters. </paragraph>
<paragraph id="P-0213" lvl="0"><number>&lsqb;0213&rsqb;</number> The entire contents of basic Japanese Patent Application No. P2001-199959 (filed on Jun. 29, 2001 in Japan) of which priority is claimed is incorporated herein by reference, in order to take some protection against mis-translation or omitted portions. </paragraph>
<paragraph id="P-0214" lvl="0"><number>&lsqb;0214&rsqb;</number> The scope of the present invention is defined with reference to the following claims. </paragraph>
</section>
</detailed-description>
</subdoc-description>
<subdoc-claims>
<heading lvl="1">What is claimed is: </heading>
<claim id="CLM-00001">
<claim-text><highlight><bold>1</bold></highlight>. A travel road detector, comprising: 
<claim-text>1) an image pickup section producing a road image of a forward travel road in front of a driver&apos;s vehicle; </claim-text>
<claim-text>2) a setting section setting, on the road image, small areas for lane marker detection; </claim-text>
<claim-text>3) a lane marker detector detecting, in the small areas, lane markers on both sides of a travel lane for the driver&apos;s vehicle as lane marker detection points; </claim-text>
<claim-text>4) a first calculator 
<claim-text>determining that a both-side lane marker detecting state is present when the number of lane marker detection points of the lane marker on each side of the travel lane is greater than or equal to a first predetermined numerical quantity, and at the same time the total number of lane marker detection points of the lane markers on both sides of the travel lane is greater than or equal to a second predetermined numerical quantity, and </claim-text>
<claim-text>calculating, from information on the lane marker detection points, a travel road model parameter representing a shape of the forward travel road when the both-side lane marker detecting state is satisfied; </claim-text>
</claim-text>
<claim-text>5) a forward vehicle detector detecting a height of a predetermined part of a forward vehicle traveling ahead of the driver&apos;s vehicle when the both-side lane marker detecting state is present; and </claim-text>
<claim-text>6) a second calculator 
<claim-text>determining that a one-side lane marker detecting state is present when the both-side lane marker detecting state is not present, and at the same time the number of lane marker detection points of the lane marker on either one side of the travel lane for the driver&apos;s vehicle is greater than or equal to a third predetermined numerical quantity, and </claim-text>
<claim-text>calculating the travel road model parameter from information on the lane marker detection points, and information on the height of the predetermined part of the forward vehicle detected with the forward vehicle detector. </claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002">
<claim-text><highlight><bold>2</bold></highlight>. The travel road detector as claimed in <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein 
<claim-text>the forward vehicle detector detects a length from the driver&apos;s vehicle to the predetermined part of the forward vehicle, </claim-text>
<claim-text>the second calculator calculates the travel road model parameter with Kalman filter, and </claim-text>
<claim-text>the second calculator sets Kalman gain of the Kalman filter with a recognition that the smaller the detected length from the driver&apos;s vehicle to the predetermined part of the forward vehicle is, the greater an upward and downward noise of the predetermined part of the forward vehicle is. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00003">
<claim-text><highlight><bold>3</bold></highlight>. The travel road detector as claimed in <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein 
<claim-text>the forward vehicle detector detects a variance in the height of the predetermined part of the forward vehicle, </claim-text>
<claim-text>the second calculator calculates the travel road model parameter with Kalman filter, and </claim-text>
<claim-text>the second calculator sets Kalman gain of the Kalman filter with a recognition that the greater the detected variance in the height of the predetermined part of the forward vehicle is, the greater an upward and downward noise of the predetermined part of the forward vehicle is. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00004">
<claim-text><highlight><bold>4</bold></highlight>. The travel road detector as claimed in <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein 
<claim-text>the forward vehicle detector detects a variance in a length from the driver&apos;s vehicle to the predetermined part of the forward vehicle, </claim-text>
<claim-text>the second calculator calculates the travel road model parameter with Kalman filter, and </claim-text>
<claim-text>the second calculator sets Kalman gain of the Kalman filter with a recognition that the greater the detected variance in the length from the driver&apos;s vehicle to the predetermined part of the forward vehicle is, the greater an upward and downward noise of the predetermined part of the forward vehicle is. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00005">
<claim-text><highlight><bold>5</bold></highlight>. The travel road detector as claimed in <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein the first predetermined numerical quantity is one. </claim-text>
</claim>
<claim id="CLM-00006">
<claim-text><highlight><bold>6</bold></highlight>. The travel road detector as claimed in <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein 
<claim-text>when the number of travel road model parameters calculated with the first calculator calculating the travel road model parameter in the detection of the lane markers on the both sides of the travel lane is &ldquo;m&rdquo;, the second predetermined numerical quantity is &ldquo;m&rdquo;. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00007">
<claim-text><highlight><bold>7</bold></highlight>. The travel road detector as claimed in <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein 
<claim-text>when the number of travel road model parameters calculated with the first calculator calculating the travel road model parameter in the detection of the lane markers on the both sides of the travel lane is &ldquo;m&rdquo;, the third predetermined numerical quantity is &ldquo;m&minus;1&rdquo;. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00008">
<claim-text><highlight><bold>8</bold></highlight>. The travel road detector as claimed in <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein the predetermined part of the forward vehicle is a number plate. </claim-text>
</claim>
<claim id="CLM-00009">
<claim-text><highlight><bold>9</bold></highlight>. The travel road detector as claimed in <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein 
<claim-text>the travel road detector further comprises a third calculator calculating a height of the image pickup section from a ground, and </claim-text>
<claim-text>when the height of the image pickup section from the ground calculated with the third calculator has a variance which is greater than a predetermined upper limit, the second calculator calculates the travel road model parameter by fixing, at a predetermined value, the height of the image pickup section from the ground. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00010">
<claim-text><highlight><bold>10</bold></highlight>. A process of detecting a travel road, the process comprising the following operations: 
<claim-text>1) producing a road image of a forward travel road in front of a driver&apos;s vehicle; </claim-text>
<claim-text>2) setting, on the road image, small areas for lane marker detection; </claim-text>
<claim-text>3) detecting, in the small areas, lane markers on both sides of a travel lane for the driver&apos;s vehicle as lane marker detection points; </claim-text>
<claim-text>4) firstly determining that a both-side lane marker detecting state is present when the number of lane marker detection points of the lane marker on each side of the travel lane is greater than or equal to a first predetermined numerical quantity, and at the same time the total number of lane marker detection points of the lane markers on both sides of the travel lane is greater than or equal to a second predetermined numerical quantity; </claim-text>
<claim-text>5) after the first determining operation, firstly calculating, from information on the lane marker detection points, a travel road model parameter representing a shape of the forward travel road when the both-side lane marker detecting state is satisfied; </claim-text>
<claim-text>6) detecting a height of a predetermined part of a forward vehicle traveling ahead of the driver&apos;s vehicle when the both-side lane marker detecting state is present; </claim-text>
<claim-text>7) secondly determining that a one-side lane marker detecting state is present when the both-side lane marker detecting state is not present, and at the same time the number of lane marker detection points of the lane marker on either one side of the travel lane for the driver&apos;s vehicle is greater than or equal to a third predetermined numerical quantity; and </claim-text>
<claim-text>8) after the second determining operation, secondly calculating the travel road model parameter from information on the lane marker detection points, and information on the height of the predetermined part of the forward vehicle detected with the forward vehicle detector. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00011">
<claim-text><highlight><bold>11</bold></highlight>. The process of detecting the travel road as claimed in <dependent-claim-reference depends_on="CLM-00011">claim 10</dependent-claim-reference>, wherein 
<claim-text>the process further comprises an operation of thirdly calculating a height of an image pickup section from a ground, the image pickup section being used for the producing operation, and </claim-text>
<claim-text>when the height of the image pickup section from the ground calculated at the third calculating operation has a variance which is greater than a predetermined upper limit, the second calculating operation (S13, Kalman filter) calculates the travel road model parameter by fixing, at a predetermined value, the height of the image pickup section from the ground. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00012">
<claim-text><highlight><bold>12</bold></highlight>. A travel road detecting apparatus, comprising: 
<claim-text>1) image pickup means for picking up an image of a travel road in front of a driver&apos;s vehicle; </claim-text>
<claim-text>2) setting means for setting small areas for detecting a lane marker, on the travel road which is picked with the image pickup means; </claim-text>
<claim-text>3) lane marker detecting means for detecting a part of the lane marker as a lane marker detection point, in the small areas which are set with the setting means; </claim-text>
<claim-text>4) first calculating means 
<claim-text>for determining whether or not the lane marker detection point detected with the lane marker detecting means is in a first both-side lane marker detecting state which is established when the number of lane marker detection points of the lane marker on each of both sides of the travel lane for the driver&apos;s vehicle is greater than or equal to a first predetermined numerical quantity, and at the same time for determining whether or not the lane marker detection point detected with the lane marker detecting means is in a second both-side lane marker detecting state which is established when the number of lane marker detection points of the lane markers on the both sides of the travel lane for the driver&apos;s vehicle is in total at least a second predetermined numerical quantity, and </claim-text>
<claim-text>for calculating from a piece of information on the thus determined lane marker detection point a travel road model parameter for showing a shape of the travel road in front of the driver&apos;s vehicle, when both the first both-side lane marker detecting state and the second both-side lane marker detecting state are determined to be established; </claim-text>
</claim-text>
<claim-text>5) forward vehicle detecting means for detecting at least a height of a predetermined part of a forward vehicle traveling ahead of the driver&apos;s vehicle, when both the first both-side lane marker detecting state and the second both-side lane marker detecting state are determined to be established; and </claim-text>
<claim-text>6) second calculating means 
<claim-text>for determining whether or not the lane marker detection point detected with the lane marker detecting means is in a one-side lane marker detecting state which is established as a state other than the first and second both-side lane marker detecting states and is established when the number of lane marker detection points of the lane marker on either one side of the travel lane for the driver&apos;s vehicle is greater than or equal to a third predetermined numerical quantity, </claim-text>
<claim-text>for determining whether or not at least the height of the predetermined part of the forward vehicle is detected with the forward vehicle detecting means, and </claim-text>
<claim-text>for calculating the travel road model parameter for showing the shape of the travel road in front of the driver&apos;s vehicle, from the following pieces of first information and second information: 
<claim-text>the first information on the thus determined lane marker detection points, and </claim-text>
<claim-text>the second information on the thus determined at least the height of the predetermined part of the forward vehicle.</claim-text>
</claim-text>
</claim-text>
</claim-text>
</claim>
</subdoc-claims>
<subdoc-drawings id="DRAWINGS">
<heading lvl="0" align="CENTER">Drawings</heading>
<representative-figure>12</representative-figure>
<figure id="figure-D00000">
<image id="EMI-D00000" file="US20030001732A1-20030102-D00000.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00001">
<image id="EMI-D00001" file="US20030001732A1-20030102-D00001.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00002">
<image id="EMI-D00002" file="US20030001732A1-20030102-D00002.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00003">
<image id="EMI-D00003" file="US20030001732A1-20030102-D00003.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00004">
<image id="EMI-D00004" file="US20030001732A1-20030102-D00004.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00005">
<image id="EMI-D00005" file="US20030001732A1-20030102-D00005.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00006">
<image id="EMI-D00006" file="US20030001732A1-20030102-D00006.TIF" imf="TIFF" ti="DR"/>
</figure>
</subdoc-drawings>
</patent-application-publication>
