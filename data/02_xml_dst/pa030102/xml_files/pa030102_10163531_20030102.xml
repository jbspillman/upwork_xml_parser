<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE patent-application-publication SYSTEM "pap-v16-2002-01-01.dtd" [
<!ENTITY US20030005310A1-20030102-D00000.TIF SYSTEM "US20030005310A1-20030102-D00000.TIF" NDATA TIF>
<!ENTITY US20030005310A1-20030102-D00001.TIF SYSTEM "US20030005310A1-20030102-D00001.TIF" NDATA TIF>
<!ENTITY US20030005310A1-20030102-D00002.TIF SYSTEM "US20030005310A1-20030102-D00002.TIF" NDATA TIF>
<!ENTITY US20030005310A1-20030102-D00003.TIF SYSTEM "US20030005310A1-20030102-D00003.TIF" NDATA TIF>
<!ENTITY US20030005310A1-20030102-D00004.TIF SYSTEM "US20030005310A1-20030102-D00004.TIF" NDATA TIF>
<!ENTITY US20030005310A1-20030102-D00005.TIF SYSTEM "US20030005310A1-20030102-D00005.TIF" NDATA TIF>
<!ENTITY US20030005310A1-20030102-D00006.TIF SYSTEM "US20030005310A1-20030102-D00006.TIF" NDATA TIF>
<!ENTITY US20030005310A1-20030102-D00007.TIF SYSTEM "US20030005310A1-20030102-D00007.TIF" NDATA TIF>
<!ENTITY US20030005310A1-20030102-D00008.TIF SYSTEM "US20030005310A1-20030102-D00008.TIF" NDATA TIF>
<!ENTITY US20030005310A1-20030102-D00009.TIF SYSTEM "US20030005310A1-20030102-D00009.TIF" NDATA TIF>
<!ENTITY US20030005310A1-20030102-D00010.TIF SYSTEM "US20030005310A1-20030102-D00010.TIF" NDATA TIF>
<!ENTITY US20030005310A1-20030102-D00011.TIF SYSTEM "US20030005310A1-20030102-D00011.TIF" NDATA TIF>
<!ENTITY US20030005310A1-20030102-D00012.TIF SYSTEM "US20030005310A1-20030102-D00012.TIF" NDATA TIF>
<!ENTITY US20030005310A1-20030102-D00013.TIF SYSTEM "US20030005310A1-20030102-D00013.TIF" NDATA TIF>
<!ENTITY US20030005310A1-20030102-D00014.TIF SYSTEM "US20030005310A1-20030102-D00014.TIF" NDATA TIF>
<!ENTITY US20030005310A1-20030102-D00015.TIF SYSTEM "US20030005310A1-20030102-D00015.TIF" NDATA TIF>
<!ENTITY US20030005310A1-20030102-D00016.TIF SYSTEM "US20030005310A1-20030102-D00016.TIF" NDATA TIF>
]>
<patent-application-publication>
<subdoc-bibliographic-information>
<document-id>
<doc-number>20030005310</doc-number>
<kind-code>A1</kind-code>
<document-date>20030102</document-date>
</document-id>
<publication-filing-type>new</publication-filing-type>
<domestic-filing-data>
<application-number>
<doc-number>10163531</doc-number>
</application-number>
<application-number-series-code>10</application-number-series-code>
<filing-date>20020607</filing-date>
</domestic-filing-data>
<technical-information>
<classification-ipc>
<classification-ipc-primary>
<ipc>H04L009/00</ipc>
</classification-ipc-primary>
<classification-ipc-edition>07</classification-ipc-edition>
</classification-ipc>
<classification-us>
<classification-us-primary>
<uspc>
<class>713</class>
<subclass>186000</subclass>
</uspc>
</classification-us-primary>
</classification-us>
<title-of-invention>User verification system, and portable electronic device with user verification function utilizing biometric information</title-of-invention>
</technical-information>
<continuity-data>
<continuations>
<continuation-of>
<parent-child>
<child>
<document-id>
<doc-number>10163531</doc-number>
<kind-code>A1</kind-code>
<document-date>20020607</document-date>
</document-id>
</child>
<parent>
<document-id>
<doc-number>PCT/JP99/06961</doc-number>
<document-date>19991210</document-date>
<country-code>US</country-code>
</document-id>
</parent>
<parent-status>UNKNOWN</parent-status>
</parent-child>
</continuation-of>
</continuations>
</continuity-data>
<inventors>
<first-named-inventor>
<name>
<given-name>Takashi</given-name>
<family-name>Shinzaki</family-name>
</name>
<residence>
<residence-non-us>
<city>Kawasaki</city>
<country-code>JP</country-code>
</residence-non-us>
</residence>
<authority-applicant>INV</authority-applicant>
</first-named-inventor>
</inventors>
<assignee>
<organization-name>FUJITSU LIMITED</organization-name>
<address>
<city>Kawasaki</city>
<country>
<country-code>JP</country-code>
</country>
</address>
<assignee-type>03</assignee-type>
</assignee>
<correspondence-address>
<name-1>STAAS &amp; HALSEY LLP</name-1>
<name-2></name-2>
<address>
<address-1>700 11TH STREET, NW</address-1>
<address-2>SUITE 500</address-2>
<city>WASHINGTON</city>
<state>DC</state>
<postalcode>20001</postalcode>
<country>
<country-code>US</country-code>
</country>
</address>
</correspondence-address>
</subdoc-bibliographic-information>
<subdoc-abstract>
<paragraph id="A-0001" lvl="0">In a system (e.g., debit card) where a PIN is entered as verification, the PIN and biometric information, which is free of being stolen or faked, are combined to realize secure user verification. The leakage and the theft of a PIN is reliably prevented, thereby realizing a high security ability. To-be-verified biometric feature data is transmitted from first transceiving interface (<highlight><bold>205</bold></highlight>) of data processing device (<highlight><bold>200</bold></highlight>) to portable electronic device (<highlight><bold>300</bold></highlight>). Biometric feature data verifying section (<highlight><bold>306</bold></highlight>) of portable electronic device (<highlight><bold>300</bold></highlight>) compares the to-be-verified biometric feature data, which has been received by second transceiving interface (<highlight><bold>301</bold></highlight>), with valid biometric feature data. If a predetermined matching condition between the to-be-verified biometric feature data and the valid biometric feature data is satisfied, a PIN stored in portable electronic device (<highlight><bold>300</bold></highlight>) is transmitted from second transceiving interface (<highlight><bold>301</bold></highlight>) to management device (<highlight><bold>400</bold></highlight>) via first transceiving interface (<highlight><bold>205</bold></highlight>) of data processing device (<highlight><bold>200</bold></highlight>). </paragraph>
</subdoc-abstract>
<subdoc-description>
<summary-of-invention>
<section>
<heading lvl="1">FIELD OF THE INVENTION </heading>
<paragraph id="P-0001" lvl="0"><number>&lsqb;0001&rsqb;</number> The present invention relates to a portable electronic device, such as an IC (Integrated Circuit) card, having a function for verifying a user utilizing biometric information (for example, fingerprints, voice, iris patterns, facial patterns, retina patterns, blood vessel patterns, hand shapes, signatures, voice, keystrokes, signature dynamics, and so on). </paragraph>
<paragraph id="P-0002" lvl="0"><number>&lsqb;0002&rsqb;</number> Electronic commerce using portable electronic devices, such as IC cards, promises to flourish in the near future, and to accompany this, tamper-resistant (tamperproof) IC cards are already in use. However, user verification still has a problem of poor security. A password (personal identification number; PIN) is requested as verification, and there is a danger of &ldquo;spoofing&rdquo; or &ldquo;identity fraud&rdquo; if the password is stolen. </paragraph>
<paragraph id="P-0003" lvl="0"><number>&lsqb;0003&rsqb;</number> In particular, when debit cards are used at merchant locations, users are requested to directly input 4-digit PINs through a keypad. Since such places are poor in security in comparison with financial institution, there is a high risk that PINs maybe stolen at merchant locations and afterward used fraudulently. </paragraph>
<paragraph id="P-0004" lvl="0"><number>&lsqb;0004&rsqb;</number> Therefore, it is expected that biometric information, such as fingerprints and iris patterns, will be employed, in association with encryption and a public key &lcub;PKI (Public Key Identification)&rcub; system, in user verification for IC cards and debit cards. </paragraph>
<paragraph id="P-0005" lvl="0"><number>&lsqb;0005&rsqb;</number> Here, a debit card denotes a magnetic bankcard which is issued by a financial institution, and which can be used to shop at merchant locations. The purchase amount is deducted automatically from the cardholder&apos;s bank account. </paragraph>
</section>
<section>
<heading lvl="1">BACKGROUND OF THE INVENTION </heading>
<paragraph id="P-0006" lvl="0"><number>&lsqb;0006&rsqb;</number> Until now, electronic commerce utilizing IC cards and debit cards have assumed user verification associated with a PKI system. In most cases an IC card or a debit card is used, however, a user is verified with a password (PIN), and there is thus a danger of fraudulent use (spoofing or identity fraud) as in the case of a conventional bankcard. </paragraph>
<paragraph id="P-0007" lvl="0"><number>&lsqb;0007&rsqb;</number> More precisely, users who are not accustomed to using a password tend to choose easy-to-remember strings of characters or digits as passwords or PINs; for example, the user&apos;s or a family member&apos;s name or birthday, telephone number, favorite word, etc. Passwords or PINs can easily be leaked or stolen, if they are noted down, or if they are &ldquo;shoulder surfed&rdquo;&mdash;someone watches you from a nearby location as you punch in your password through a ten-key pad&mdash;at the time debit cards are used at merchandise locations. </paragraph>
<paragraph id="P-0008" lvl="0"><number>&lsqb;0008&rsqb;</number> Such identity theft commonly occurs, which is evident from the frequency of cases in which money is easily stolen from a victim&apos;s accounts by using a stolen bankcard. This proves that user verification with a password is insufficient in for security purposes. </paragraph>
<paragraph id="P-0009" lvl="0"><number>&lsqb;0009&rsqb;</number> Employing passwords in user verification simplifies systems and reduces manufacturing costs, but the user should be security-conscious. For example, a password should not be the user&apos;s or a family member&apos;s name or birthday, telephone number, or favorite word. Taking a note of a password should of course be prohibited. Further, the user must always be cautious about the theft of a password whenever he uses that password, because third parties can read passwords from the movement of a user&apos;s fingers while he is punching in his password. </paragraph>
<paragraph id="P-0010" lvl="0"><number>&lsqb;0010&rsqb;</number> Further, as in the case of a password, the user must be careful with an encryption key. Generally speaking, memorizing an encryption/decryption key is troublesome because its character string is exceedingly long. Hence, the key is normally stored in a computer or in a flexible disc, and it is read therefrom as necessary. At the time the key is read out, a password is often used to retain the security of the key. At that time, a short, easy-to-memorize character string should not be used because a lengthy character string is difficult to memorize. Such a short character string will significantly diminish the security of the key. </paragraph>
<paragraph id="P-0011" lvl="0"><number>&lsqb;0011&rsqb;</number> The forgoing problems are found also in IC cards and debit cards. No matter how the tamper-resistant properties of IC cards are improved to protect the encryption key (secret key) stored therein from theft, all the efforts come to nothing without the users&apos; awareness of the security of passwords. </paragraph>
<paragraph id="P-0012" lvl="0"><number>&lsqb;0012&rsqb;</number> Hence, in electronic commerce utilizing IC cards or debit cards, it is required to combine the PIN verification with biometric user verification (for example, fingerprints, voice, iris patterns, facial patterns, retina patterns, blood vessel patterns, hand shapes, signatures, voice, keystrokes, signature dynamics, and so on), in which user-independent security setting is realized. </paragraph>
<paragraph id="P-0013" lvl="0"><number>&lsqb;0013&rsqb;</number> Biometric information utilizes characteristics of the human body that are unique to a user. It avoids the necessity of memorizing or writing down passwords, and it cannot be surmised by third parties. Further, biometric information utilizes difficult to counterfeit, and thus, even if a user is watched as he is undergoing biometric verification, it is impossible to fake the biometric information. Hence, biometric user verification is the optimum choice in a case where user verification is of great importance. </paragraph>
<paragraph id="P-0014" lvl="0"><number>&lsqb;0014&rsqb;</number> A debit card is a bankcard that can be used to shop at merchandise locations. Thus, if a password (PIN) for a debit card is stolen, a lot of harm will be caused. For this reason, in a system (for example, debit cards) where a PIN is requested as verification, it is strongly expected that the input of a PIN will be associated with biometric user verification. </paragraph>
<paragraph id="P-0015" lvl="0"><number>&lsqb;0015&rsqb;</number> On the other hand, with recent increases in the storage capacity of IC cards, it is now possible to store/register from hundreds of bytes to 2 kilobytes of biometric feature data in an IC card. A small-sized processor (CPU) built in an IC card allows the IC card to serve as a data processor. </paragraph>
<paragraph id="P-0016" lvl="0"><number>&lsqb;0016&rsqb;</number> Existing processors for IC cards, however, do not have the ability to execute all the processing of biometric feature data. Thus, an IC card terminal (external data processing device) for accessing IC cards samples an object user&apos;s biometric information, and it also extracts therefrom biometric feature data (hereinafter called &ldquo;to-be-verified biometric feature data&rdquo;) for use in user verification, and IC cards are devoted to the verification of the extracted biometric feature data (for example, see Japanese Patent Application Publication No. HEI 10-312459). More precisely, an IC card previously stores its authorized user&apos;s biometric feature data as valid biometric feature data. Upon receipt of to-be-verified biometric feature data from the IC card terminal, the IC card compares the to-be-verified biometric feature data with the valid biometric feature data, and then returns the comparison/verification result to the IC card terminal. </paragraph>
<paragraph id="P-0017" lvl="0"><number>&lsqb;0017&rsqb;</number> Applying the relationship between the IC card and the IC card terminal to a client-server fingerprint verification method, the IC card terminal corresponds to a client which extracts fingerprint features, and the IC card corresponds to a server which verifies the fingerprint feature data. The foregoing verification method using an IC card, however, differs from the client-server fingerprint verification method in that, in the former method, the IC card, which meets the server of the latter method, is carried by a user as a highly tamper-resistant portable electronic device. Since biometric feature data verification and its subsequent processing are executed on the IC card which is carried by a user, not on a server which is managed by a third party, the former offers an advantage of ensuring user privacy. </paragraph>
<paragraph id="P-0018" lvl="0"><number>&lsqb;0018&rsqb;</number> However, the foregoing combination between biometric information and an IC card still has problems to be solved. The problems are that to-be-verified biometric feature data is sent, as it is, from the IC card terminal to the IC card, and that a verification result is sent out from the IC card as an OK/NG signal (0/1 signal). As a result, no matter how the IC card is superior in tamper-resistant properties, there still remains the possibility that the data transmitted/received between the IC card and the IC card terminal may be wrongfully obtained and used by third parties. In other words, the existing combination between an IC card and biometric information has not taken full advantage of the high tamper-resistant property of a recent IC card. </paragraph>
<paragraph id="P-0019" lvl="0"><number>&lsqb;0019&rsqb;</number> Accordingly, it has been expected that high security ability will be guaranteed when to-be-verified biometric feature data is input to an IC card, and also when a verification result obtained within an IC card is sent out to an external apparatus. </paragraph>
<paragraph id="P-0020" lvl="0"><number>&lsqb;0020&rsqb;</number> With the foregoing problems in view, one object of the present invention is to realize secure user verification. The present invention is applied to a system (for example, debit cards) where the input of a PIN is requested as verification, making it possible to use PIN verification in association with biometric feature data, which is free of having been stolen or faked. The leakage and theft of the PIN are thus reliably prevented, so that a high level of security can be guaranteed. </paragraph>
<paragraph id="P-0021" lvl="0"><number>&lsqb;0021&rsqb;</number> Another object of the invention is to guarantee high security ability when to-be-verified biometric feature data is input to portable electronic device, such as an IC card, and also when a verification result obtained within an IC card is sent out to an external apparatus, so that secure user verification is realized. </paragraph>
</section>
<section>
<heading lvl="1">DISCLOSURE OF THE INVENTION </heading>
<paragraph id="P-0022" lvl="0"><number>&lsqb;0022&rsqb;</number> (1-1) In order to accomplish the above object, according to the present invention, there is provided a user verification system, comprising: a portable electronic device, which is adapted to be carried by a user; a data processing device for directly accessing such portable electronic device which is temporarily installed therein; and a management device which accesses the portable electronic device via the data processing device and verifies the user utilizing a personal identification number (PIN). </paragraph>
<paragraph id="P-0023" lvl="0"><number>&lsqb;0023&rsqb;</number> The data processing device includes: a biometric information measuring unit for measuring biometric information of the user; a biometric feature data extracting section for extracting to-be-verified biometric feature data from the biometric information, which has been measured by biometric information measuring unit; and a first transceiving interface for transmitting/receiving data to/from the portable electronic device and the management device. </paragraph>
<paragraph id="P-0024" lvl="0"><number>&lsqb;0024&rsqb;</number> The portable electronic device includes: a biometric feature data register section having pre-stored valid biometric feature data of an authorized user of the portable electronic device; a second transceiving interface for transmitting/receiving data to/from the data processing device; a biometric feature data verifying section for comparing to-be-verified biometric feature data, which is received from an external device via the second transceiving interface, with the valid biometric feature data; and a PIN register section having a pre-stored PIN of the authorized user of the portable electronic device. </paragraph>
<paragraph id="P-0025" lvl="0"><number>&lsqb;0025&rsqb;</number> The to-be-verified biometric feature data is transmitted from the first transceiving interface of the data processing device to the portable electronic device, and the biometric feature data verifying section of the portable electronic device compares the to-be-verified biometric feature data, which has been received via the second transceiving interface, with the valid biometric feature data. As the result of the comparison, if the to-be-verified biometric feature data matches the valid biometric feature data in terms of a predetermined matching condition, the PIN is transmitted from the second transceiving interface of the portable electronic device to the management device via the first transceiving interface of the data processing device. </paragraph>
<paragraph id="P-0026" lvl="0"><number>&lsqb;0026&rsqb;</number> (1-2) The data processing device further includes a first encryption section for encoding the to-be-verified biometric feature data with a public key, and the portable electronic device further includes: a secret key register section having a pre-stored valid secret key corresponding to the public key; and a decryption section for decoding encoded data, which is received from an external device via the second transceiving interface, with the valid secret key. The to-be-verified biometric feature data encoded by the first encryption section is transmitted from the first transceiving interface to the portable electronic device, as the aforementioned encoded data, and the decryption section decodes the encoded data, which has been received via the second transceiving interface, into the original to-be-verified biometric feature data, which is then compared with the valid biometric feature data by the biometric feature data verifying section. </paragraph>
<paragraph id="P-0027" lvl="0"><number>&lsqb;0027&rsqb;</number> (1-3) The portable electronic device further includes: a made-for-management-device public key register section having a pre-stored public key dedicated to the management device; and a second encryption section for encoding the PIN with the made-for-management-device public key before the PIN is sent out to the management device. </paragraph>
<paragraph id="P-0028" lvl="0"><number>&lsqb;0028&rsqb;</number> (1-4) The portable electronic device further includes a recording unit provided on its surface, which recording unit stores magnetic data of information for use in processing carried out by the management device. The data processing device further includes a magnetic data read-out unit for reading out the magnetic data stored in the recording unit, and the magnetic data, which has been readout by the magnetic data read-out unit, is sent out, together with the PIN, from the first transceiving interface to the management device. </paragraph>
<paragraph id="P-0029" lvl="0"><number>&lsqb;0029&rsqb;</number> (1-5) The data processing device further includes a time stamp generating section for generating a time stamp as the date and time when the biometric feature data extracting section has extracted the to-be-verified biometric feature data. The time stamp is encoded, together with the to-be-verified biometric feature data, by the first encryption section, and the encoded time stamp is then sent out from the first transceiving interface to the portable electronic device. The portable electronic device further includes: a clock function section for calculating the current time; and a time stamp verifying section for comparing the original time stamp, which has been restored by the decryption section, with the current time, which has been calculated by the clock function section. If it is found, as the comparison result by the biometric feature data verifying section, that the to-be-verified biometric feature data matches the valid biometric feature data in terms of a predetermined matching condition, and also if it is found, as the comparison result by the time stamp verifying section, that a difference between the time stamp and the current time falls within a predetermined range, the user is identified as the authorized user of the portable electronic device. </paragraph>
<paragraph id="P-0030" lvl="0"><number>&lsqb;0030&rsqb;</number> (1-6) If the user is identified as the authorized user of the portable electronic device, as the comparison result by the biometric feature data verifying section and the time stamp verifying section, the second encryption section encodes both the PIN and the date and time the comparison was performed, which date and time is obtained by the clock function section, and the encoded PIN and the encoded date and time of the comparison are then sent out from the second transceiving interface of the portable electronic device to an external apparatus. </paragraph>
<paragraph id="P-0031" lvl="0"><number>&lsqb;0031&rsqb;</number> (1-7) Upon receipt of a predetermined signal via the second transceiving interface, the portable electronic device transmits public key information of the authorized user, which public key information is registered in the portable electronic device, from the second transceiving interface to an external device. </paragraph>
<paragraph id="P-0032" lvl="0"><number>&lsqb;0032&rsqb;</number> (1-8) The user verification system further comprises a lock function section which is operable to prohibit input of biometric feature information to the portable electronic device, if the evaluation is made a predetermined number of times successively, as a result of the comparison by the feature data verifying section of the portable electronic device, that the to-be-verified biometric feature data never matches the valid biometric feature data in terms of the predetermined matching condition. </paragraph>
<paragraph id="P-0033" lvl="0"><number>&lsqb;0033&rsqb;</number> (1-9) The portable electronic device further includes a management log recording section storing a management log of the PIN, which management log accumulates the dates and times when the PIN has been transmitted, or the descriptions of transactions performed, or both of these. </paragraph>
<paragraph id="P-0034" lvl="0"><number>&lsqb;0034&rsqb;</number> In the user verification system of the above item (1-1), the biometric information measuring unit measures biometric information of an object user to be verified, and the biometric feature data extracting section extracts to-be-verified biometric feature data from the biometric information. These processes are performed in the data processing device, and the thus obtained to-be-verified biometric feature data is then transmitted from the first transceiving interface to the portable electronic device. In the portable electronic device, upon receipt of the to-be-verified biometric feature data via the second transceiving interface, biometric feature data verifying section compares/verifies the to-be-verified biometric feature data with valid biometric feature data. As the result of the comparison, if the to-be-verified biometric feature data satisfies a predetermined matching condition with the valid biometric feature data, a PIN is transmitted to the management device. </paragraph>
<paragraph id="P-0035" lvl="0"><number>&lsqb;0035&rsqb;</number> As aforementioned, according to the user verification system of the item (1-1), after a predetermined matching between the to-be-verified biometric feature data and the valid biometric feature data is confirmed, the PIN stored in the portable electronic device is transmitted to the management device. Thus, it is no longer necessary to directly input a PIN to the data processing device with a ten-key pad, and the PIN only passes through the data processing device, so that the risk of a PIN being stolen at its input can be minimized. Accordingly, with the present invention applied to a system (for example, debit cards) where a PIN is requested to be input as verification, it is possible to associate PIN verification with biometric user verification using biometric feature data, which is free of being stolen or faked. The leakage and the theft of PINs are thus prevented with reliability, so that a high level of security can be guaranteed, thereby realizing secure user verification. </paragraph>
<paragraph id="P-0036" lvl="0"><number>&lsqb;0036&rsqb;</number> According to the user verification system of the foregoing item (1-2), the first encryption section of the data processing device encodes the to-be-verified biometric feature data using a public key, and the encoded data is transmitted to the portable electronic device. Upon receipt of the encoded data, the decryption section of the portable electronic device decodes the data with a valid secret key to restore the original to-be-verified biometric feature data, and the biometric feature data verifying section performs comparison/verification. That is, the to-be-verified biometric feature data is encoded by a public key system before it is sent out from the data processing device to the portable device, and all the data that was entered in the portable electronic device for user verification is decoded in the portable electronic device. It is thus possible to prevent the inputting of any tampered to-be-verified biometric feature data, making it difficult for wicked persons to commit spoofing or identity fraud, so that a high level of security is guaranteed. Further, even if the to-be-verified biometric feature data should be intercepted using a false portable electronic device (a false IC card, or the like), it is still difficult to wrongfully use such stolen biometric feature data in another system because the stolen biometric feature data is encoded data. Accordingly, a high level of security is guaranteed, and user verification can be performed with secure. </paragraph>
<paragraph id="P-0037" lvl="0"><number>&lsqb;0037&rsqb;</number> According to the user verification system of the foregoing item (1-3), all the data transmitted from the portable device to an external apparatus is encoded in the portable electronic device. More precisely, the second encryption section encodes a PIN using a public key for the management device before the PIN is transmitted from the portable electronic device to the management device. Accordingly, even if a PIN should be intercepted during its transmission from the portable device to an external apparatus, it is still difficult to falsely use the stolen PIN in another system because the thus wrongfully obtained PIN has been encoded, so that a higher level of security is guaranteed. </paragraph>
<paragraph id="P-0038" lvl="0"><number>&lsqb;0038&rsqb;</number> According to the user verification system of the foregoing item (1-4), the magnetic data read-out unit reads out the information stored in the recording unit provided on the surface of the portable electronic device, and the read-out information is transmitted to the management device along with a PIN. Accordingly, the user verification system of the forgoing item (1-4) is applicable in a case where a type of IC card having a function (magnetic stripes) of an existing magnetic card serves as a portable electronic device. </paragraph>
<paragraph id="P-0039" lvl="0"><number>&lsqb;0039&rsqb;</number> According to the user verification system of the foregoing item (1-5), in the data processing device, a time stamp is generated as the date and time the to-be-verified biometric feature data was extracted, and the generated time stamp is attached to the to-be-verified biometric feature data, and is then transmitted to the portable electronic device. In the portable electronic device, the user is authenticated if a predetermined matching condition is satisfied between the to-be-verified biometric feature data and valid biometric feature data, and also if the difference between the time stamp (the extraction date-and-time) and the current time falls within a predetermined range. Accordingly, even if to-be-verified biometric feature data should be intercepted during its transmission from the date processing device to the portable electronic device, and even if the stolen feature data should be falsely used in a replay attack against the portable device, the difference between the time stamp (the extraction date-and-time) and the current time becomes significant. On the basis of such significant difference, it is possible to reject access attempts using such stolen to-be-verified biometric feature data, so that the security level of the system is significantly improved. </paragraph>
<paragraph id="P-0040" lvl="0"><number>&lsqb;0040&rsqb;</number> According to the user verification system of the forgoing item (1-6), in the portable electronic device, if an object user is identified as the owner of the portable device, the PIN, together with the verification date-and-time (time stamp) obtained by the clock function section, is encoded by the second encryption section, and is then sent out to the management device. Thus, even if the PIN should be intercepted during its transmission from the portable device to the management device and then be wrongfully used, the management device, which monitors the verification date-and-time attached to the PIN, can recognize that a wrongfully obtained PIN is used, based on the difference between the verification date-and-time (time stamp) and the current time. Accordingly, it is possible to reject access attempts using such a stolen PIN, so that the security level of the system is significantly improved. </paragraph>
<paragraph id="P-0041" lvl="0"><number>&lsqb;0041&rsqb;</number> According to the user verification system of the forgoing item (1-7), when the portable electronic device receives a predetermined signal via the second transceiving interface, the authorized user&apos;s public key information stored in the portable electronic device is sent out to an external apparatus. It is thus possible for the data processing device to use the public key stored in the portable electronic device, without the necessity for the data processing device itself to hold a pre-stored public key. </paragraph>
<paragraph id="P-0042" lvl="0"><number>&lsqb;0042&rsqb;</number> According to the user verification system of the forgoing item (1-8), if the biometric feature data verifying section obtains the comparison result a predetermined times consecutively that the matching requirements between the to-be-verified biometric feature data and the valid biometric feature data are not satisfied, the lock function section locks the portable electronic device to prohibit the inputting of biometric feature data to the portable electronic device, thereby preventing unauthorized accessing with reliability. </paragraph>
<paragraph id="P-0043" lvl="0"><number>&lsqb;0043&rsqb;</number> According to the user verification system of the forgoing item (1-9), the management log recording section stores the date and time the PIN was sent out, or the content of the transaction performed, or the both of these. It is thus possible for the authorized user of the portable electronic device to keep a management log for himself, separate from the one made for the system. Such a user&apos;s log will serve as a safeguard against a low-reliability system. </paragraph>
<paragraph id="P-0044" lvl="0"><number>&lsqb;0044&rsqb;</number> (2-1) A portable electronic device of the present invention receives/transmits data from/to a management device that uses a personal identification number (PIN) to verify a user. The portable electronic device comprises: a biometric feature data register section having pre-stored valid biometric feature data of an authorized user of the portable electronic device; a transceiving interface for transmitting/receiving data to/from an external device; a biometric feature data verifying section for comparing to-be-verified biometric feature data, which is received from an external device via the transceiving interface, with the valid biometric feature data; and a PIN register section having a pre-stored PIN of the authorized user of the portable electronic device. The biometric feature data verifying section compares the to-be-verified biometric feature data, which has been received via the transceiving interface, with the valid biometric feature data. As the result of the comparison, if the to-be-verified biometric feature data matches the valid biometric feature data in terms of a predetermined matching condition, the PIN is transmitted from the transceiving interface to the management device. </paragraph>
<paragraph id="P-0045" lvl="0"><number>&lsqb;0045&rsqb;</number> (2-2) The portable electronic device further comprises: a secret key register section having a pre-stored valid secret key corresponding to the public key; and a decryption section for decoding encoded data, which is received from an external device via the second transceiving interface, with the valid secret key. The decryption section decodes the encoded data, which has been received via the transceiving interface, into the original to-be-verified biometric feature data, and the biometric feature data verifying section compares the original to-be-verified biometric feature data, which has been restored by the decryption section, with valid biometric feature data. </paragraph>
<paragraph id="P-0046" lvl="0"><number>&lsqb;0046&rsqb;</number> (2-3) The portable electronic device further comprises: a made-for-management-device public key register section having a pre-stored public key dedicated to the management device; and an encryption section for encoding the PIN with the made-for-management-device public key before the PIN is sent out to the management device. </paragraph>
<paragraph id="P-0047" lvl="0"><number>&lsqb;0047&rsqb;</number> (2-4) The portable electronic device further comprises a recording unit provided on its surface, which recording unit stores magnetic data of information for use in processing which is carried out by the management device. </paragraph>
<paragraph id="P-0048" lvl="0"><number>&lsqb;0048&rsqb;</number> (2-5) The portable electronic device further comprises: a clock function section for calculating the current time; and a time stamp verifying section for comparing a time stamp, if any, attached to the original to-be-verified biometric feature data restored by the decryption section, with the current time, which has been calculated by the clock function section. The time stamp indicates the date and time when the to-be-verified biometric feature data was extracted. If it is found, as the comparison result by the biometric feature data verifying section, that the to-be-verified biometric feature data matches the valid biometric feature data in terms of a predetermined matching condition, and also if it is found, as the comparison result by the time stamp verifying section, that a difference between the time stamp and the current time falls within a predetermined range, the user is identified as the authorized user of the portable electronic device. </paragraph>
<paragraph id="P-0049" lvl="0"><number>&lsqb;0049&rsqb;</number> (2-6) If the user is identified as the authorized user of the portable electronic device, as the comparison result by the biometric feature data verifying section and the time stamp verifying section, the encryption section encodes both the PIN and the date and time the comparison was performed, which date and time is obtained by the clock function section, and the encoded PIN and the encoded comparison date-and-time are then sent out from the transceiving interface to an external apparatus. </paragraph>
<paragraph id="P-0050" lvl="0"><number>&lsqb;0050&rsqb;</number> (2-7) Upon receipt of a predetermined signal via the transceiving interface, the portable electronic device transmits the authorized user&apos;s public key information, which is registered in the portable electronic device, from the transceiving interface to an external device. </paragraph>
<paragraph id="P-0051" lvl="0"><number>&lsqb;0051&rsqb;</number> (2-8) The portable electronic device further comprises a lock function section which is operable to prohibit the input of biometric feature information to the portable electronic device, if the evaluation is made a predetermined number of times successively, as a result of the comparison by the feature data verifying section, that the to-be-verified biometric feature data never matches the valid biometric feature data in terms of the predetermined matching condition. </paragraph>
<paragraph id="P-0052" lvl="0"><number>&lsqb;0052&rsqb;</number> (2-9) The portable electronic device further comprises a management log recording section storing a management log of the PIN, which management log accumulates the dates and times when the PIN was transmitted, or the descriptions of transactions performed, or both of these. </paragraph>
<paragraph id="P-0053" lvl="0"><number>&lsqb;0053&rsqb;</number> According to the portable electronic device of the foregoing item (2-1) with a user verification function utilizing biometric information, upon receipt of the to-be-verified biometric feature data via the transceiving interface, biometric feature data verifying section compares/verifies the to-be-verified biometric feature data with valid biometric feature data. As the result of the comparison, if predetermined matching requirements between the to-be-verified biometric feature data and the valid biometric feature data are satisfied, a PIN is transmitted to the management device. </paragraph>
<paragraph id="P-0054" lvl="0"><number>&lsqb;0054&rsqb;</number> In this manner, according to the portable electronic device of the item (2-1), after a predetermined matching between the to-be-verified biometric feature data and the valid biometric feature data is confirmed, the PIN stored in the portable electronic device is transmitted to the management device. Thus, it is no longer necessary to directly input the PIN with a ten-key pad, so that the risk of a PIN being stolen at its input can be minimized. Accordingly, with the present invention applied to a system (for example, debit cards) where input of a PIN is requested as verification, it is possible to associate PIN verification with biometric user verification using biometric feature data, which is free of being stolen or faked. The leakage and the theft of the PIN are thus prevented with reliability, so that a high level of security can be guaranteed, thereby realizing secure user verification. </paragraph>
<paragraph id="P-0055" lvl="0"><number>&lsqb;0055&rsqb;</number> According to the portable electronic device of the foregoing item (2-2), after the decryption section restores the original to-be-verified biometric feature data using a valid secret key, the biometric feature data verification section carries out a comparison/verification operation. In other words, the to-be-verified biometric feature data is encoded by a public key system, and is then input to the portable electronic device. All the data that was input to the portable device at the user verification performed, is decoded in the portable electronic device. It is thus possible to prevent any counterfeit to-be-verified biometric feature data from being entered, making it difficult for wicked persons to commit spoofing or identity fraud, so that a high level of security is guaranteed. Further, even if the to-be-verified biometric feature data should be intercepted using a false portable electronic device (a false IC card, or the like), it is still difficult to wrongfully use such stolen biometric feature data in another system because the stolen biometric feature data is encoded data. Accordingly, a high level of security is guaranteed, and user verification can be performed with secure. </paragraph>
<paragraph id="P-0056" lvl="0"><number>&lsqb;0056&rsqb;</number> According to the portable electronic device of the item (2-3), all the data transmitted from the portable device to an external apparatus is encoded in the portable electronic device. More precisely, the encryption section encodes a PIN using a public key for the management device before the PIN is transmitted from the portable electronic device to the management device. Accordingly, even if a PIN should be intercepted during its transmission from the portable device to an external apparatus, it is still difficult to falsely use the stolen PIN in another system because the thus wrongfully obtained PIN has been encoded, so that a higher level of security is guaranteed. </paragraph>
<paragraph id="P-0057" lvl="0"><number>&lsqb;0057&rsqb;</number> According to the portable electronic device of the foregoing item (2-4), there is provided on the surface of the portable electronic device a recording unit storing magnetic data of the information which is for use in the processing made on the management device. Accordingly, the portable electronic device of the forgoing item (1-4) is applicable in a case where an IC card equipped with a function (magnetic stripes) of an existing magnetic card serves as a portable electronic device. </paragraph>
<paragraph id="P-0058" lvl="0"><number>&lsqb;0058&rsqb;</number> According to the portable electronic device of the foregoing item (2-5), as a result of the comparison by biometric feature data verification section, if the to-be-verified biometric feature data satisfies a predetermined matching condition with the valid biometric feature data, and also if the difference between the time stamp (the extraction date-and-time) and the current time falls within a predetermined range, the object person is judged to be the authorized user of the portable electronic device. Accordingly, even if the to-be-verified biometric feature data should be intercepted during its transmission to the portable electronic device, and even if the stolen feature data should be falsely used in a replay attack against the portable device, the difference between the time stamp (the extraction date-and-time) and the current time becomes significant. On the basis of such significant difference, it is possible to reject access attempts using such stolen to-be-verified biometric feature data, so that the security level of the system is significantly improved. </paragraph>
<paragraph id="P-0059" lvl="0"><number>&lsqb;0059&rsqb;</number> According to the portable electronic device of the foregoing item (2-6), after the object user is judged to be the authorized user of the portable electronic device, the PIN, together with the verification date-and-time (time stamp) obtained by the clock function section, is encoded by the encryption section, and is then transmitted to the management device. Thus, even if the PIN should be intercepted during its transmission from the portable device to the management device and then be wrongfully used, the management device, which monitors the verification date-and-time attached to the PIN, can recognize the use of the wrongfully obtained PIN, based on the difference between the verification date-and-time (time stamp) and the current time. Accordingly, it is possible to reject access attempts using such a stolen PIN, so that the security level of the system is significantly improved. </paragraph>
<paragraph id="P-0060" lvl="0"><number>&lsqb;0060&rsqb;</number> According to the user verification system of the forgoing item (2-7), when the portable electronic device receives a predetermined signal, the authorized user&apos;s valid public key information stored in the portable electronic device is sent out to an external apparatus. It is thus possible for the external apparatus to use the public key stored in the portable electronic device, without the necessity for the external apparatus itself to hold a pre-stored public key. </paragraph>
<paragraph id="P-0061" lvl="0"><number>&lsqb;0061&rsqb;</number> According to the user verification system of the forgoing item (2-8), if the biometric feature data verifying section obtains the comparison result a predetermined times consecutively that the matching condition between the to-be-verified biometric feature data and the valid biometric feature data is not satisfied, the lock function section locks the portable electronic device to prohibit the biometric feature data from being input to the portable electronic device, thereby preventing unauthorized accessing with reliability. </paragraph>
<paragraph id="P-0062" lvl="0"><number>&lsqb;0062&rsqb;</number> According to the user verification system of the forgoing item (2-9), the management log recording section has the date and time the PIN was sent out, or the content of the transaction performed, or the both of these. It is thus possible for the authorized user of the portable electronic device to keep a management log for himself, separate from the one that is made for the system. The user&apos;s log will serve as a safeguard against a low-reliability system. </paragraph>
<paragraph id="P-0063" lvl="0"><number>&lsqb;0063&rsqb;</number> (3-1) A user verification system of the present invention comprises: a portable electronic device, which is adapted to be carried by a user; and a data processing device for directly accessing such a portable electronic device which is temporarily installed therein. </paragraph>
<paragraph id="P-0064" lvl="0"><number>&lsqb;0064&rsqb;</number> The data processing device includes: a biometric information measuring unit for measuring biometric information of the user; a biometric feature data extracting section for extracting to-be-verified biometric feature data from the biometric information, which has been measured by biometric information measuring unit; a first encryption section for encoding the to-be-verified biometric feature data with a public key; and a first transceiving interface for transmitting/receiving data to/from the portable electronic device. </paragraph>
<paragraph id="P-0065" lvl="0"><number>&lsqb;0065&rsqb;</number> The portable electronic device includes: a biometric feature data register section having pre-stored valid biometric feature data of an authorized user of the portable electronic device; a second transceiving interface for transmitting/receiving data to/from the data processing device; a biometric feature data verifying section for comparing to-be-verified biometric feature data, which is received from an external device via the second transceiving interface, with the valid biometric feature data; a secret key register section having a pre-stored valid secret key corresponding to the public key; and a decryption section for decoding encoded data, which has been encoded with the public key, with the valid secret key. </paragraph>
<paragraph id="P-0066" lvl="0"><number>&lsqb;0066&rsqb;</number> The encoded to-be-verified biometric feature data, which has been encoded by the first encryption section, is transmitted from the first transceiving interface to the portable electronic device, and the decryption section decodes the encoded data, which has been received via the second transceiving interface, into the original to-be-verified biometric feature data, and the biometric feature data verifying section compares the original to-be-verified biometric feature data with the valid biometric feature data. </paragraph>
<paragraph id="P-0067" lvl="0"><number>&lsqb;0067&rsqb;</number> (3-2) The data processing device further includes a time stamp generating section for generating a time stamp as the date and time when the biometric feature data extracting section extracted the to-be-verified biometric feature data, and the time stamp is encoded, together with the to-be-verified biometric feature data, by the first encryption section, and the encoded time stamp is then sent out from the first transceiving interface to the portable electronic device. </paragraph>
<paragraph id="P-0068" lvl="0"><number>&lsqb;0068&rsqb;</number> The portable electronic device further includes: a clock function section for calculating the current time; and a time stamp verifying section for comparing the original time stamp, which has been restored by the decryption section, with the current time, which has been calculated by the clock function section. If it is found, as the comparison result by the biometric feature data verifying section, that the to-be-verified biometric feature data matches the valid biometric feature data in terms of a predetermined matching condition, and also if it is found, as the comparison result by the time stamp verifying section, that a difference between the time stamp and the current time falls within a predetermined range, the user is identified as the authorized user of the portable electronic device. </paragraph>
<paragraph id="P-0069" lvl="0"><number>&lsqb;0069&rsqb;</number> (3-3) The portable electronic device further includes: a user information register section having pre-stored user information about the authorized user of the portable electronic device; and a second encryption section for encoding data, which is to be transmitted from the second transceiving interface to the data processing device, with the valid secret key. As a result of comparison by the biometric feature data verifying section and the time stamp verifying section, if the user is identified as the authorized user of the portable electronic device, the second encryption section encodes at least one of the following items: the user information; the level of correlation between the to-be-verified biometric feature data and the valid biometric feature data, which correlation level is obtained at the comparison; and the date and time of the comparison performed, which is provided by the clock function section, and the encoded item is sent out from the second transceiving interface to the data processing device as a verification result. </paragraph>
<paragraph id="P-0070" lvl="0"><number>&lsqb;0070&rsqb;</number> (3-4) The data processing section further includes a message digest creating section for creating a message digest as a value obtained by inputting data to be transferred to the portable electronic device to a predetermined one-way function. The message digest and the to-be-verified biometric feature data are both encoded by the first encryption section, and are then sent out from the first transceiving interface to the portable electronic device. If the user is identified as the authorized user of the portable electronic device, as the comparison result by the biometric feature data verifying section and the time stamp verifying section, the second encryption section encodes the message digest which has been restored by the decryption section, and the encoded message digest is sent out from the second transceiving interface to the data processing device, as a verification result. </paragraph>
<paragraph id="P-0071" lvl="0"><number>&lsqb;0071&rsqb;</number> (3-5) The portable electronic device further includes a verification log recording section storing the verification result as a verification log for a predetermined time period. </paragraph>
<paragraph id="P-0072" lvl="0"><number>&lsqb;0072&rsqb;</number> (3-6) Upon receipt of a predetermined signal via the second transceiving interface, the portable electronic device transmits public key information of the authorized user, which public key information is registered in the portable electronic device, from the second transceiving interface to an external device. </paragraph>
<paragraph id="P-0073" lvl="0"><number>&lsqb;0073&rsqb;</number> (3-7) The user verification system further comprises a lock function section which is operable to prohibit input of biometric feature information to the portable electronic device, if the evaluation is made a predetermined number of times successively, as a result of the comparison by the feature data verifying section of the portable electronic device, that the to-be-verified biometric feature data never matches the valid biometric feature data in terms of the predetermined matching condition. </paragraph>
<paragraph id="P-0074" lvl="0"><number>&lsqb;0074&rsqb;</number> According to the user verification system of the foregoing item (3-1), in the data processing device, the biometric information measuring unit measures biometric information of an object user to be verified, and the biometric feature data extracting section extracts to-be-verified biometric feature data from the biometric information. The thus extracted to-be-verified biometric feature data is encoded by the first encryption section using a public key, and is then transmitted from the first transceiving interface to the portable electronic device. In the portable electronic device, upon receipt of the encoded data via the second transceiving interface, the decryption section restores the original to-be-verified biometric feature data, and then, the biometric feature data verifying section compares/verifies the to-be-verified biometric feature data with valid biometric feature data. </paragraph>
<paragraph id="P-0075" lvl="0"><number>&lsqb;0075&rsqb;</number> In this manner, according to the user verification system of the foregoing item (3-1), the to-be-verified biometric feature data is encoded using a public key before being transmitted from the data processing device to the portable electronic device. Thus, even if the to-be-verified biometric feature data should be intercepted using a false portable electronic device (a false IC card, or the like), it is still difficult to falsely use such encoded biometric feature data in another system. Thus, a high level of security is guaranteed, and user verification can be carried out with secure. </paragraph>
<paragraph id="P-0076" lvl="0"><number>&lsqb;0076&rsqb;</number> According to the user verification system of the foregoing item (3-2), in the data processing device, a time stamp is generated as the date and time the to-be-verified biometric feature data was extracted, and the generated time stamp is attached to the to-be-verified biometric feature data, and is then transmitted to the portable electronic device. In the portable electronic device, the user is authenticated if a predetermined matching condition is satisfied between the to-be-verified biometric feature data and the valid biometric feature data, and also if the difference between the time stamp (the extraction date-and-time) and the current time falls within a predetermined range. Accordingly, even if to-be-verified biometric feature data should be intercepted during its transmission from the data processing device to the portable electronic device, and even if the stolen feature data should be falsely used in a replay attack against the portable device, the difference between the time stamp (the extraction date-and-time) and the current time becomes significant. On the basis of such significant difference, it is possible to reject access attempts using such stolen to-be-verified biometric feature data, so that the security level of the system is significantly improved. </paragraph>
<paragraph id="P-0077" lvl="0"><number>&lsqb;0077&rsqb;</number> According to the user verification system of the foregoing item (3-3), in the portable electronic device, if the object person is judged to be the authorized user of the portable device, the second encryption section encodes at least one of the following items using a secret key: user information (e.g., account number); the level of correlation between the to-be-verified biometric feature data and the valid biometric feature data; and the verification date-and-time (time stamp). The encoded item is then sent out to the data processing device as a verification result. That is, since the information about the verification result is encoded using a secret key, the issuer of the verification result can be certified. At that time, since the verification date-and-time (time stamp) is inserted into the verification result, it is possible to prevent the verification result of the biometric feature data from being tempered or falsified. Hence, even when the result of the verification of the biometric feature data, obtained within the portable electronic device, is sent out to an external apparatus, a high level of security can still be guaranteed, thus realizing secure user verification. At that time, since the level of correlation between the to-be-verified biometric feature data and the valid biometric feature data is provided as a verification result, it is possible to manage the record of with what degree of certainty the user is verified. </paragraph>
<paragraph id="P-0078" lvl="0"><number>&lsqb;0078&rsqb;</number> According to the user verification system of the foregoing item (3-4), in the data processing device, a message digest about data which is transferred to the portable electronic device is created. The message digest and the to-be-verified biometric feature data are both encoded by the first encryption section, and are then sent out from the first transceiving interface to the portable electronic device. On the portable electronic device, if the user is identified as the authorized user of the portable electronic device, the message digest (e.g., an electronic bill), which has been restored by the decryption section, is encoded once again by the second encryption section with a secret key, and is sent to the data processing device as a verification result. Resulting from this, similar effects and benefits to those already described in the user verification system of the foregoing item (3-3) are guaranteed. Additionally, since a message digest is output as a verification result, it is possible to manage a record of which transaction the verification was made for. </paragraph>
<paragraph id="P-0079" lvl="0"><number>&lsqb;0079&rsqb;</number> According to the user verification system of the foregoing item (3-5), the verification log recording section of the portable electronic device stores the verification result, as a verification log, for a predetermined time period. That is, a record of user verification is stored in the portable electronic device. </paragraph>
<paragraph id="P-0080" lvl="0"><number>&lsqb;0080&rsqb;</number> According to the user verification system of the foregoing item (3-6), upon receipt of a predetermined signal via the second transceiving interface, the portable electronic device transmits the authorized user&apos;s public key information, registered in the portable electronic device, to an external device. It is thus possible for the data processing device to use the public key stored in the portable electronic device, without the necessity for the data processing device itself to hold a pre-stored public key. </paragraph>
<paragraph id="P-0081" lvl="0"><number>&lsqb;0081&rsqb;</number> According to the user verification system of the foregoing item (3-7), as a result of the comparison by the feature data verifying section of the portable electronic device, if the evaluation is made a predetermined number of times successively, that the predetermined matching condition between the to-be-verified biometric feature data and the valid biometric feature data is not satisfied, a lock function section prohibits the inputting of biometric feature information to the portable electronic device, so that any false access attempts can be reliably rejected. </paragraph>
<paragraph id="P-0082" lvl="0"><number>&lsqb;0082&rsqb;</number> (4-1) A portable electronic device of the present invention has a user verification function utilizing biometric information. The portable electronic device comprises: a biometric feature data register section having pre-stored valid biometric feature data of an authorized user of the portable electronic device; a transceiving interface for transmitting/receiving data to/from an external device; a biometric feature data verifying section for comparing to-be-verified biometric feature data, which is received from an external device via the transceiving interface, with the valid biometric feature data; a secret key register section having a pre-stored valid secret key corresponding to the public key; and a decryption section for decoding encoded data, which has been encoded with the public key, with the valid secret key. The decryption section decodes the encoded data, which has been received via the transceiving interface, into the original to-be-verified biometric feature data, and the biometric feature data verifying section compares the original to-be-verified biometric feature data with the valid biometric feature data. </paragraph>
<paragraph id="P-0083" lvl="0"><number>&lsqb;0083&rsqb;</number> (4-2) The portable electronic device further comprises: a clock function section for calculating the current time; and a time stamp verifying section for comparing a time stamp, if any, attached to the original to-be-verified biometric feature data restored by the decryption section, with the current time, which has been calculated by the clock function section. The time stamp indicates the date and time when the to-be-verified biometric feature data has been extracted. If it is found, as the comparison result by the biometric feature data verifying section, that the to-be-verified biometric feature data matches the valid biometric feature data in terms of a predetermined matching condition, and also if it is found, as the comparison result by the time stamp verifying section, that a difference between the time stamp and the current time falls within a predetermined range, the user is identified as the authorized user of the portable electronic device. </paragraph>
<paragraph id="P-0084" lvl="0"><number>&lsqb;0084&rsqb;</number> (4-3) The portable electronic device further comprises: a user information register section having pre-stored user information about the authorized user of the portable electronic device; and an encryption section for encoding data, which is to be transmitted from the transceiving interface to the data processing device, with the valid secret key. As a result of comparison by the biometric feature data verifying section and the time stamp verifying section, if the user is identified as the authorized user of the portable electronic device, the encryption section encodes at least one of the following items: the user information; the level of correlation between the to-be-verified biometric feature data and the valid biometric feature data, which correlation level is obtained at the comparison; and the date and time of the comparison performed, which is provided by the clock function section, the encoded item is sent out from the transceiving interface to the data processing device as a verification result. </paragraph>
<paragraph id="P-0085" lvl="0"><number>&lsqb;0085&rsqb;</number> (4-4) If the user is identified as the authorized user of the portable electronic device, as the comparison result by the biometric feature data verifying section and the time stamp verifying section, and also if a message digest, which is obtained by inputting data to be transferred to the portable electronic device to a predetermined one-way function, is attached to the original to-be-verified biometric feature data restored by the decryption section, the encoding section encodes the message digest, and the encoded message digest is then sent out from the transceiving interface to the data processing device as a verification result. </paragraph>
<paragraph id="P-0086" lvl="0"><number>&lsqb;0086&rsqb;</number> (4-5) The portable electronic device further includes a verification log recording section storing the aforementioned verification results as a verification log for a predetermined time period. </paragraph>
<paragraph id="P-0087" lvl="0"><number>&lsqb;0087&rsqb;</number> (4-6) Upon receipt of a predetermined signal via the transceiving interface, the portable electronic device transmits public key information of the authorized user, which public key information is registered in the portable electronic device, from the transceiving interface to an external apparatus. </paragraph>
<paragraph id="P-0088" lvl="0"><number>&lsqb;0088&rsqb;</number> (4-7) The portable electronic device further comprises a lock function section which is operable to prohibit biometric feature information from being input to the portable electronic device, if the evaluation is made a predetermined number of times successively, as the result of the comparison by the featured at a verifying section, that the to-be-verified biometric feature data never matches the valid biometric feature data in terms of a predetermined matching condition. </paragraph>
<paragraph id="P-0089" lvl="0"><number>&lsqb;0089&rsqb;</number> According to the portable electronic device with a user verification function utilizing biometric information of the foregoing item (4-1), upon receipt of encoded data via the transceiving interface, the decryption section restores the original to-be-verified biometric feature data, and then, the biometric feature data verifying section compares/verifies the to-be-verified biometric feature data with valid biometric feature data. </paragraph>
<paragraph id="P-0090" lvl="0"><number>&lsqb;0090&rsqb;</number> In this manner, according to the portable electronic device of the foregoing item (4-1), the to-be-verified biometric feature data is encoded using a public key before it is transmitted from the data processing device to the portable electronic device. Thus, even if the to-be-verified biometric feature data should be intercepted using a false portable electronic device (a false IC card, or the like), it is still difficult to wrongfully use such to-be-verified biometric feature data (encoded data) in another system. Thus, a high level of security is guaranteed, and user verification can be performed with secure. </paragraph>
<paragraph id="P-0091" lvl="0"><number>&lsqb;0091&rsqb;</number> According to the portable electronic device of the foregoing item (4-2), in a case where a time stamp, which indicates the date and time to-be-verified biometric feature data was extracted, is attached to the to-be-verified biometric feature data, the object person is judged to be the authorized user of the portable electronic device, if predetermined matching requirements between the to-be-verified biometric feature data and valid biometric feature data are met, and also if the difference between the time stamp (extraction date-and-time) and the current time falls within a predetermined range. Accordingly, even if to-be-verified biometric feature data to be input to the portable electronic device should be intercepted, and even if the stolen feature data should be falsely used in a replay attack against the portable device, the difference between the time stamp (extraction date-and-time) and the current time becomes significant. On the basis of such significant difference, it is possible to reject access attempts using such stolen to-be-verified biometric feature data, so that the security level of the system is significantly improved. </paragraph>
<paragraph id="P-0092" lvl="0"><number>&lsqb;0092&rsqb;</number> According to the portable electronic device of the foregoing item (4-3), after the object user is verified, the encryption section encodes at least one of the following items using a secret key: user information (e.g., account number); the level of correlation between the to-be-verified biometric feature data and the valid biometric feature data; and the verification date-and-time (time stamp). The encoded item is then sent out to the data processing device as a verification result. That is, since the information about the verification result is encoded using a secret key, the issuer of the verification result can be certified. At that time, since the verification date-and-time (time stamp) is inserted into the verification result, it is possible to prevent the verification result of the biometric feature data from being tempered or falsified. Accordingly, even when the result of the verification of biometric feature data, obtained within the portable electronic device, is sent out to an external apparatus, a high level of security is guaranteed, thus realizing secure user verification. At that time, since the level of correlation between the to-be-verified biometric feature data and the valid biometric feature data is provided as a verification result, it is possible to manage a record of likelihood of the matches. </paragraph>
<paragraph id="P-0093" lvl="0"><number>&lsqb;0093&rsqb;</number> According to the portable electronic device of the foregoing item (4-4), if the object user is judged to be the authorized user of the portable device, and also if a message digest is attached to the to-be-verified biometric feature data, the massage digest is encoded by the encryption section using a secret key, before it is sent out to an external apparatus as a verification result. Resulting from this, similar effects and benefits to those already described in the portable electronic device of the foregoing item (4-3) are guaranteed. Additionally, since a message digest is output as a verification result, it is possible to manage a record of which transaction the verification was made for. </paragraph>
<paragraph id="P-0094" lvl="0"><number>&lsqb;0094&rsqb;</number> According to the portable electronic device of the foregoing item (4-5), the verification log recording section stores the verification result, as a verification log, for a predetermined time period. That is, a record of user verification is stored in the portable electronic device. </paragraph>
<paragraph id="P-0095" lvl="0"><number>&lsqb;0095&rsqb;</number> According to the portable electronic device of the foregoing item (4-6), upon receipt of a predetermined signal, the authorized user&apos;s public key information, registered in the portable electronic device, is sent out to an external device. It is thus possible for the external apparatus to use the public key stored in the portable electronic device, without the necessity for the external apparatus to hold a pre-stored public key. </paragraph>
<paragraph id="P-0096" lvl="0"><number>&lsqb;0096&rsqb;</number> According to the portable electronic device of the foregoing item (4-7), as a result of the comparison by the feature data verifying section, if the evaluation is made a predetermined number of times successively, that the predetermined matching condition between the to-be-verified biometric feature data and the valid biometric feature data is not satisfied, a lock function section prohibits the inputting of biometric feature information to the portable electronic device, so that any false access attempts can be reliably rejected.</paragraph>
</section>
</summary-of-invention>
<brief-description-of-drawings>
<section>
<heading lvl="1">BRIEF DESCRIPTION OF THE DRAWINGS </heading>
<paragraph id="P-0097" lvl="0"><number>&lsqb;0097&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1</cross-reference> is a block diagram schematically showing a structure of a user verification system of a first embodiment of the present invention; </paragraph>
<paragraph id="P-0098" lvl="0"><number>&lsqb;0098&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 2</cross-reference> is a flowchart indicating an operation of the first embodiment; </paragraph>
<paragraph id="P-0099" lvl="0"><number>&lsqb;0099&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3</cross-reference> is a block diagram schematically showing a structure of a user verification system of a first modified example of the first embodiment; </paragraph>
<paragraph id="P-0100" lvl="0"><number>&lsqb;0100&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 4</cross-reference> is a flowchart indicating an operation of the first modified example of the first embodiment; </paragraph>
<paragraph id="P-0101" lvl="0"><number>&lsqb;0101&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 5</cross-reference> is a block diagram schematically showing a structure of a user verification system of a second modified example of the first embodiment; </paragraph>
<paragraph id="P-0102" lvl="0"><number>&lsqb;0102&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 6</cross-reference> is a flowchart indicating an operation of the second modified example of the first embodiment; </paragraph>
<paragraph id="P-0103" lvl="0"><number>&lsqb;0103&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 7</cross-reference> is a block diagram schematically showing a structure of a user verification system of a third modified example of the first embodiment; </paragraph>
<paragraph id="P-0104" lvl="0"><number>&lsqb;0104&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 8</cross-reference> is a flowchart indicating an operation of the third modified example of the first embodiment; </paragraph>
<paragraph id="P-0105" lvl="0"><number>&lsqb;0105&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 9</cross-reference> is a block diagram schematically showing a structure of a user verification system of a second embodiment of the present invention; </paragraph>
<paragraph id="P-0106" lvl="0"><number>&lsqb;0106&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 10</cross-reference> is a flowchart indicating an operation of the second embodiment; </paragraph>
<paragraph id="P-0107" lvl="0"><number>&lsqb;0107&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 11</cross-reference> is a block diagram schematically showing a structure of a user verification system of a first modified example of the second embodiment; </paragraph>
<paragraph id="P-0108" lvl="0"><number>&lsqb;0108&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 12</cross-reference> is a flowchart indicating an operation of the first modified example of the second embodiment; </paragraph>
<paragraph id="P-0109" lvl="0"><number>&lsqb;0109&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 13</cross-reference> is a block diagram schematically showing a structure of a user verification system of a second modified example of the second embodiment; </paragraph>
<paragraph id="P-0110" lvl="0"><number>&lsqb;0110&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 14</cross-reference> is a flowchart indicating an operation of the second modified example of the second embodiment; </paragraph>
<paragraph id="P-0111" lvl="0"><number>&lsqb;0111&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 15</cross-reference> is a block diagram schematically showing a structure of a user verification system of a third modified example of the second embodiment; and </paragraph>
<paragraph id="P-0112" lvl="0"><number>&lsqb;0112&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 16</cross-reference> is a flowchart indicating an operation of the third modified example of the second embodiment.</paragraph>
</section>
</brief-description-of-drawings>
<detailed-description>
<section>
<heading lvl="1">BEST MODE FOR CARRYING OUT THE INVENTION </heading>
<paragraph id="P-0113" lvl="0"><number>&lsqb;0113&rsqb;</number> Preferred embodiments of the present invention will be described hereinbelow with reference to the relevant accompanying drawings. </paragraph>
<paragraph id="P-0114" lvl="0"><number>&lsqb;0114&rsqb;</number> &lsqb;0&rsqb; Brief Description of Embodiments of the Present Invention: </paragraph>
<paragraph id="P-0115" lvl="0"><number>&lsqb;0115&rsqb;</number> In a first embodiment of the present invention, a description will be made hereinbelow of a case where a portable electronic device is an IC card which serves as, for example, a debit card. Precisely, in a user verification system of the first embodiment, a personal identification number (PIN) has to be entered as verification. Additionally, the first embodiment combines another verification technique that employs biometric information, which is rarely stolen or duplicated, with PIN verification, so that leakage and theft of the PIN can be surely prevented, thereby guaranteeing high security with secure user identification. </paragraph>
<paragraph id="P-0116" lvl="0"><number>&lsqb;0116&rsqb;</number> More precisely, an IC card has pre-stored valid biometric feature data, which has been extracted from biometric information of the authorized user of the IC card. If predetermined matching requirements are satisfied between the valid biometric feature data and object biometric feature data to be verified (hereinafter called to-be-verified biometric feature data), indicating that the to-be-verified biometric feature data matches the valid biometric feature data, a PIN stored in the IC card is output to a host computer (management device) via an interface. </paragraph>
<paragraph id="P-0117" lvl="0"><number>&lsqb;0117&rsqb;</number> Accordingly, in a case where an IC card of the present invention serves as a debit card, after a user is verified in the IC card utilizing biometric information, the PIN stored in the IC card is directly transmitted from the IC card to a host computer, which will eliminate the necessity for the user to input his PIN in sight of a shop clerk, thereby preventing the possibility of the PIN being seen. At that time, since the PIN is encoded using a public key for the host computer, the security of the PIN during transmission is thoroughly improved. Further, a time stamp (the date and time the user verification was performed) is encoded together with the PIN. Thus, even if the PIN should be stolen during transmission, it is still possible to prevent the stolen PIN from being used to access other systems later. </paragraph>
<paragraph id="P-0118" lvl="0"><number>&lsqb;0118&rsqb;</number> In a second embodiment of the present invention, since a public key system is employed in data communication between a portable electronic device (an IC card in the present embodiment) and an external data processing device (an IC card terminal in the present embodiment), a high level of security ability is guaranteed at inputting to-be-verified biometric feature data to the portable electronic device and at outputting the result of biometric feature data verification, which has been performed in the portable electronic device, to the portable electronic device, thereby realizing secure user verification. </paragraph>
<paragraph id="P-0119" lvl="0"><number>&lsqb;0119&rsqb;</number> More precisely, in the second embodiment, the IC card also has pre-stored valid biometric feature data, which has been extracted from biometric information of the authorized user of the IC card. The user (authorized user) of the IC card inputs biometric information of his own to the IC card terminal, which then processes the input biometric information to extract biometric feature data. The thus extracted to-be-verified biometric feature data is input from the IC card terminal to the IC card. At that time, the to-be-verified biometric feature data is encoded using a public key before it is sent out to the IC card. </paragraph>
<paragraph id="P-0120" lvl="0"><number>&lsqb;0120&rsqb;</number> Then, if predetermined matching requirements are satisfied between the to-be-verified biometric feature data and the valid biometric feature data, indicating that the to-be-verified biometric feature data matches the valid biometric feature data, the IC card merges a message digest which is attached to the to-be-verified biometric feature data, the biometric feature data verification result (the degree of correlation), the date and time the verification was performed, and user information about the authorized user of the IC card. Those merged items are encoded with a valid secret key for the IC card, and the encoded data is then sent out to the IC card terminal as a verification result. </paragraph>
<paragraph id="P-0121" lvl="0"><number>&lsqb;0121&rsqb;</number> In this manner, since the second embodiment employs biometric user verification, without relying on a password, it is possible to provide a user verification technique suited to a tamper-resistant IC card. Further, since the biometric feature data is encoded using a public key system before the data is transmitted to the IC card, it is possible to protect the IC card from counterfeit biometric feature data. </paragraph>
<paragraph id="P-0122" lvl="0"><number>&lsqb;0122&rsqb;</number> Further, in the second embodiment, the result of the verification performed on the IC card is encoded using the valid secret key stored in the IC card before it is sent out to an external apparatus, and the user verification is performed within the IC card, so that the valid biometric feature stored the IC card is never sent out to an external apparatus, and that a verification result is never entered from an external apparatus to the IC card. It is thus possible to reduce with certainty the possibility of fraudulent use. </paragraph>
<paragraph id="P-0123" lvl="0"><number>&lsqb;0123&rsqb;</number> At that time, if a verification result undergoes PKI (public key infrastructure) processing before it is output from the IC card to an external apparatus, or if a message digest is created and attached to the verification result, it is possible to lower the possibility of the verification result being tampered with or counterfeited with further certainty. </paragraph>
<paragraph id="P-0124" lvl="0"><number>&lsqb;0124&rsqb;</number> &lsqb;1&rsqb; First Embodiment: </paragraph>
<paragraph id="P-0125" lvl="0"><number>&lsqb;0125&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1</cross-reference> is a block diagram showing a user verification system of a first embodiment of the present invention. As shown in <cross-reference target="DRAWINGS">FIG. 1</cross-reference>, user verification system <highlight><bold>100</bold></highlight> includes IC card (portable electronic device) <highlight><bold>300</bold></highlight> serving as a debit card, IC card terminal (external data processing device) <highlight><bold>200</bold></highlight> which receives IC card <highlight><bold>300</bold></highlight> and makes a direct access to the IC card <highlight><bold>300</bold></highlight>, and host computer (management device) <highlight><bold>400</bold></highlight> which accesses the IC card <highlight><bold>300</bold></highlight> via the IC card terminal <highlight><bold>200</bold></highlight> to carry out user verification utilizing a personal identification number (PIN) as to the authorized user of the IC card <highlight><bold>300</bold></highlight>. </paragraph>
<paragraph id="P-0126" lvl="0"><number>&lsqb;0126&rsqb;</number> Host computer <highlight><bold>400</bold></highlight> belongs to a bank. The authorized user has a bank account in the bank, and when he uses IC card <highlight><bold>300</bold></highlight> as a debit card, his money is subtracted from the bank account. In practical use, such a debit card is used in combination with an external data processing device such as a debit card terminal (IC card terminal <highlight><bold>200</bold></highlight>, here). This external data processing device is connected with host computer <highlight><bold>400</bold></highlight>, which manages the balances of bank accounts, via a communications network. </paragraph>
<paragraph id="P-0127" lvl="0"><number>&lsqb;0127&rsqb;</number> IC card terminal <highlight><bold>200</bold></highlight> has a slot (not shown) into which IC card <highlight><bold>300</bold></highlight> is to be inserted. IC card <highlight><bold>300</bold></highlight> is inserted into the slot, whereupon transceiving interface <highlight><bold>205</bold></highlight> (first transceiving interface) of the IC card terminal <highlight><bold>200</bold></highlight> comes into contact with transceiving interface (second transceiving interface) <highlight><bold>301</bold></highlight> of the IC card <highlight><bold>300</bold></highlight>, thereby allowing the IC card terminal <highlight><bold>200</bold></highlight> and the IC card <highlight><bold>300</bold></highlight> to send/receive data therebetween. In the first embodiment, transceiving interfaces <highlight><bold>205</bold></highlight> and <highlight><bold>301</bold></highlight> are contact-type interfaces. The present invention should by no means be limited to the above, and it is also possible to use contactless interfaces. </paragraph>
<paragraph id="P-0128" lvl="0"><number>&lsqb;0128&rsqb;</number> IC card terminal <highlight><bold>200</bold></highlight> has biometric information measuring unit <highlight><bold>201</bold></highlight>, biometric feature data extracting section <highlight><bold>202</bold></highlight>, time stamp generating section <highlight><bold>203</bold></highlight>, data encryption section (first encryption section) <highlight><bold>204</bold></highlight>, and transceiving interface <highlight><bold>205</bold></highlight>. </paragraph>
<paragraph id="P-0129" lvl="0"><number>&lsqb;0129&rsqb;</number> Biometric information measuring unit <highlight><bold>201</bold></highlight> measures and samples biometric information of an object user, for example, a person who inserted the IC card <highlight><bold>300</bold></highlight> into the IC card terminal <highlight><bold>200</bold></highlight> (this is normally the authorized user of the IC card <highlight><bold>300</bold></highlight>) The biometric information to be sampled may be image data such as a fingerprint, iris pattern, facial pattern, retina pattern, blood vessel pattern, hand shape, signature, and ear shape. It may otherwise be time-series data such as voice, keystrokes, and signature dynamics. For example, in a case of sampling the object user&apos;s fingerprint, biometric information measuring unit <highlight><bold>201</bold></highlight> should include a fingerprint input screen. The object user presses his fingertip against the screen, thereby allowing the biometric information measuring unit <highlight><bold>201</bold></highlight> to sample the fingerprint. </paragraph>
<paragraph id="P-0130" lvl="0"><number>&lsqb;0130&rsqb;</number> Biometric feature data extracting section <highlight><bold>202</bold></highlight> extracts biometric feature data (hereinafter called to-be-verified biometric feature data), which is for use in user verification, from the biometric information sampled by biometric information measuring unit <highlight><bold>201</bold></highlight>. Here, if the sampled biometric information is fingerprint image data, the feature data to be extracted from the sampled fingerprint image data will include the coordinates of ridge dividing points (minutiae), the coordinates of ridge end points (minutiae), the coordinates of ridge crossing points, the coordinates of the fingerprint core, the coordinates of deltas, ridge directions, distances between minutiae, the number of ridges between minutiae, and so on. </paragraph>
<paragraph id="P-0131" lvl="0"><number>&lsqb;0131&rsqb;</number> Time stamp generating section <highlight><bold>203</bold></highlight> generates the date and time biometric feature data extracting section <highlight><bold>202</bold></highlight> extracted the to-be-verified biometric feature data, as a time stamp. </paragraph>
<paragraph id="P-0132" lvl="0"><number>&lsqb;0132&rsqb;</number> Data encryption section <highlight><bold>204</bold></highlight> encodes the to-be-verified biometric feature data, which has been extracted by biometric feature data extracting section <highlight><bold>202</bold></highlight>, along with the time stamp (the date and time the to-be-verified biometric feature data was extracted; hereinafter called the &ldquo;verification date-and-time&rdquo;), which has been generated by time stamp generating section <highlight><bold>203</bold></highlight>, using a public key for IC card <highlight><bold>300</bold></highlight>. The public key for IC card <highlight><bold>300</bold></highlight> is given in response to the issuance of a certain command (predetermined signal) to a host computer (not shown; the one separate from host computer <highlight><bold>400</bold></highlight>) or to IC card <highlight><bold>300</bold></highlight>. In the first embodiment, as will be described later, the public key for IC card <highlight><bold>300</bold></highlight> is stored in the IC card <highlight><bold>300</bold></highlight> itself. IC card terminal <highlight><bold>200</bold></highlight> issues a certain command to the IC card <highlight><bold>300</bold></highlight>, thereby obtaining the public key. </paragraph>
<paragraph id="P-0133" lvl="0"><number>&lsqb;0133&rsqb;</number> Transceiving interface <highlight><bold>205</bold></highlight>, as described above, comes into contact with transceiving interface <highlight><bold>301</bold></highlight> of IC card <highlight><bold>300</bold></highlight>, thereby realizing data communication not only between IC card terminal <highlight><bold>200</bold></highlight> and IC card <highlight><bold>300</bold></highlight> but also between IC card terminal <highlight><bold>200</bold></highlight> and host computer <highlight><bold>400</bold></highlight>. </paragraph>
<paragraph id="P-0134" lvl="0"><number>&lsqb;0134&rsqb;</number> IC card <highlight><bold>300</bold></highlight> of the first embodiment has a built-in storage unit such as a ROM and a RAM, and also contains a CPU (Central Processing Unit) which carries out processing based on the data stored in the storage unit and signals received from an external apparatus. IC card <highlight><bold>300</bold></highlight> includes transceiving interface <highlight><bold>301</bold></highlight>, biometric feature data register section <highlight><bold>302</bold></highlight>, secret key register section <highlight><bold>303</bold></highlight>, clock function section <highlight><bold>304</bold></highlight>, data encryption/decryption section (serving both as a second encryption section and as a decryption section) <highlight><bold>305</bold></highlight>, biometric feature data verifying section <highlight><bold>306</bold></highlight>, time stamp verifying section <highlight><bold>307</bold></highlight>, PIN register section <highlight><bold>308</bold></highlight>, user information register section <highlight><bold>309</bold></highlight>, verification log recording section <highlight><bold>310</bold></highlight>, IC card-dedicated public key register section <highlight><bold>312</bold></highlight>, and management log recording section <highlight><bold>317</bold></highlight>. </paragraph>
<paragraph id="P-0135" lvl="0"><number>&lsqb;0135&rsqb;</number> Transceiving interface <highlight><bold>301</bold></highlight>, as described above, comes into contact with transceiving interface <highlight><bold>205</bold></highlight> of IC card terminal <highlight><bold>200</bold></highlight>, thereby realizing data communication between the IC card terminal <highlight><bold>200</bold></highlight> and IC card <highlight><bold>300</bold></highlight>. </paragraph>
<paragraph id="P-0136" lvl="0"><number>&lsqb;0136&rsqb;</number> Biometric feature data register section <highlight><bold>302</bold></highlight> has pre-stored valid biometric feature data of the authorized user of IC card <highlight><bold>300</bold></highlight>. This valid biometric feature data is sampled, for example, upon issuance of IC card <highlight><bold>300</bold></highlight>. While the IC card <highlight><bold>300</bold></highlight> is being inserted into the slot of IC card terminal <highlight><bold>200</bold></highlight>, biometric information (fingerprint image data, and so on) of the authorized user of IC card <highlight><bold>300</bold></highlight> is sampled through IC card terminal <highlight><bold>200</bold></highlight>, and biometric feature data is extracted from the sample data. The thus extracted biometric feature data is written in biometric feature data register section <highlight><bold>302</bold></highlight> of IC card <highlight><bold>300</bold></highlight>, through IC card terminal <highlight><bold>200</bold></highlight>, as valid biometric feature data. </paragraph>
<paragraph id="P-0137" lvl="0"><number>&lsqb;0137&rsqb;</number> Secret key register section <highlight><bold>303</bold></highlight> has a pre-stored valid secret key corresponding to the public key for IC card <highlight><bold>300</bold></highlight>. Clock function section <highlight><bold>304</bold></highlight> calculates the current time. </paragraph>
<paragraph id="P-0138" lvl="0"><number>&lsqb;0138&rsqb;</number> Data encryption/decryption section <highlight><bold>305</bold></highlight> serves both as a decryption section and as an encryption section (second encryption section). Serving as the former, data encryption/decryption section <highlight><bold>305</bold></highlight> decodes data received from an external apparatus through transceiving interface <highlight><bold>301</bold></highlight>, using the valid secret key registered in secret key register section <highlight><bold>303</bold></highlight>. Serving as the latter, data encryption/decryption section <highlight><bold>305</bold></highlight> encodes data to be transmitted to host computer <highlight><bold>400</bold></highlight>, using the public key for the host computer <highlight><bold>400</bold></highlight>. In the first embodiment, however, data encryption/decryption section <highlight><bold>305</bold></highlight> functions only as a decryption section, and its function as an encryption section is used in the first through third modified examples of the first embodiment. Here, as will be described later, original data restored by data encryption/decryption section <highlight><bold>305</bold></highlight> is to-be-verified biometric feature data and time stamp (the date and time of extraction), which have been received from IC card terminal <highlight><bold>200</bold></highlight>. </paragraph>
<paragraph id="P-0139" lvl="0"><number>&lsqb;0139&rsqb;</number> Biometric feature data verifying section <highlight><bold>306</bold></highlight> compares the to-be-verified biometric feature data, which has been received from an external apparatus through transceiving interface <highlight><bold>301</bold></highlight>, with the valid biometric feature data registered in biometric feature data register section <highlight><bold>302</bold></highlight> to evaluate whether or not the to-be-verified biometric feature data satisfies a predetermined matching condition, which is the measure of the matching between the to-be-verified biometric feature data and the valid biometric feature data. An example of the matching condition is, for example, that the correlation between (the degree of resemblance) the to-be-verified biometric feature data and the valid biometric feature data is a predetermined value or greater. </paragraph>
<paragraph id="P-0140" lvl="0"><number>&lsqb;0140&rsqb;</number> Time stamp verifying section <highlight><bold>307</bold></highlight> compares the original time stamp, which has been restored by data encryption/decryption section <highlight><bold>305</bold></highlight>, with the current time, which has been calculated by clock function section <highlight><bold>304</bold></highlight>, and evaluates whether or not the difference between them is within a predetermined range (for example, a predetermined value or lower). </paragraph>
<paragraph id="P-0141" lvl="0"><number>&lsqb;0141&rsqb;</number> PIN register section <highlight><bold>308</bold></highlight> and user information register section <highlight><bold>309</bold></highlight> serve as a user information storage unit. PIN register section <highlight><bold>308</bold></highlight> has a pre-stored personal identification number (password), which is requested to be input when IC card <highlight><bold>300</bold></highlight> attempts to access host computer <highlight><bold>400</bold></highlight>. With a conventional debit card, a user has to manually input such a personal identification number (PIN) with a ten-key pad. User information register section <highlight><bold>309</bold></highlight> has a pre-stored account number (bank account number, user number) of a bank account from which the amount spent should be subtracted, when IC card <highlight><bold>300</bold></highlight> is used as a debit card. </paragraph>
<paragraph id="P-0142" lvl="0"><number>&lsqb;0142&rsqb;</number> Verification log recording section <highlight><bold>310</bold></highlight> holds a verification log for a limited time period. The verification log contains the results of the verification carried out by biometric feature data verifying section <highlight><bold>302</bold></highlight> and by time stamp verifying section <highlight><bold>307</bold></highlight>, and also contains the date and time the verification was performed (hereinafter called the &ldquo;verification date-and-time&rdquo;), which date and time has been obtained by clock function section <highlight><bold>304</bold></highlight>. </paragraph>
<paragraph id="P-0143" lvl="0"><number>&lsqb;0143&rsqb;</number> IC card-dedicated public key register section <highlight><bold>312</bold></highlight>, as described above, has a pre-stored public key (predetermined public key information) for an IC card <highlight><bold>300</bold></highlight>, with which public key data encryption section <highlight><bold>204</bold></highlight> of IC card terminal <highlight><bold>200</bold></highlight> encodes to-be-verified biometric feature data and a time stamp. Upon receipt of a predetermined signal (certain command) through transceiving interface <highlight><bold>301</bold></highlight>, IC card <highlight><bold>300</bold></highlight> transmits the public key stored in IC card-dedicated public key register section <highlight><bold>312</bold></highlight>, from transceiving interface <highlight><bold>301</bold></highlight> to IC card terminal <highlight><bold>200</bold></highlight> (or host computer <highlight><bold>400</bold></highlight>). </paragraph>
<paragraph id="P-0144" lvl="0"><number>&lsqb;0144&rsqb;</number> When the PIN is transmitted to host computer <highlight><bold>400</bold></highlight> as a verification result (will be described later), management log recording section <highlight><bold>317</bold></highlight> records, as a management log, the date and time the PIN was sent out, or the content of the transaction performed, or both of these. </paragraph>
<paragraph id="P-0145" lvl="0"><number>&lsqb;0145&rsqb;</number> At that time, the foregoing biometric feature data register section <highlight><bold>302</bold></highlight>, secret key register section <highlight><bold>303</bold></highlight>, PIN register section <highlight><bold>308</bold></highlight>, user information register section <highlight><bold>309</bold></highlight>, verification log recording section <highlight><bold>310</bold></highlight>, IC card-dedicated public key register section <highlight><bold>312</bold></highlight>, and management log recording section <highlight><bold>317</bold></highlight> are realized, in practical use, by a storage unit such as a ROM and a RAM internally equipped in IC card <highlight><bold>300</bold></highlight>. </paragraph>
<paragraph id="P-0146" lvl="0"><number>&lsqb;0146&rsqb;</number> The foregoing clock function section <highlight><bold>304</bold></highlight>, data encryption/decryption section <highlight><bold>305</bold></highlight>, biometric feature data verifying section <highlight><bold>306</bold></highlight>, and time stamp verifying section <highlight><bold>307</bold></highlight> are realized, in practical use, by a CPU built in IC card <highlight><bold>300</bold></highlight>. </paragraph>
<paragraph id="P-0147" lvl="0"><number>&lsqb;0147&rsqb;</number> Next, an operation of user verification system <highlight><bold>100</bold></highlight> of the first embodiment will be described hereinbelow, with reference to the flowchart of <cross-reference target="DRAWINGS">FIG. 2</cross-reference>. </paragraph>
<paragraph id="P-0148" lvl="0"><number>&lsqb;0148&rsqb;</number> When using IC card <highlight><bold>300</bold></highlight> as a debit card, a user (object person to be verified) puts the IC card <highlight><bold>300</bold></highlight> into the slot of IC card terminal <highlight><bold>200</bold></highlight>, and then presses his fingertip to a fingerprint input screen, if his fingerprint image data is requested to be entered as the biometric information for use in user verification. </paragraph>
<paragraph id="P-0149" lvl="0"><number>&lsqb;0149&rsqb;</number> Biometric information measuring unit <highlight><bold>201</bold></highlight> of IC card terminal <highlight><bold>200</bold></highlight> measures the user&apos;s biometric information (fingerprint image data) (step S<highlight><bold>11</bold></highlight>). From the biometric information, biometric feature data extracting section <highlight><bold>202</bold></highlight> extracts to-be-verified biometric feature data, and time stamp generating section <highlight><bold>203</bold></highlight> generates the date and time (time stamp) the to-be-verified biometric feature data was extracted, and the time stamp is attached to the to-be-verified biometric feature data (step S<highlight><bold>12</bold></highlight>). </paragraph>
<paragraph id="P-0150" lvl="0"><number>&lsqb;0150&rsqb;</number> The to-be-verified biometric feature data, along with the time stamp attached thereto, is encoded by data encryption section <highlight><bold>204</bold></highlight> using a public key for IC card <highlight><bold>300</bold></highlight> (step S<highlight><bold>13</bold></highlight>). The public key for IC card <highlight><bold>300</bold></highlight>, as described above, is read out from IC card-dedicated public key register section <highlight><bold>312</bold></highlight> of IC card <highlight><bold>300</bold></highlight>. Upon receipt of a specific command (predetermined signal), the IC card-dedicated public key register section <highlight><bold>312</bold></highlight> allows the public key to be read out therefrom, and the read-out public key is sent out from IC card <highlight><bold>300</bold></highlight> to IC card terminal <highlight><bold>200</bold></highlight>. Since this key for use in encryption, which is sent out from IC card <highlight><bold>300</bold></highlight> to IC card terminal <highlight><bold>200</bold></highlight>, is a public key, it does not matter if the key is sent out in response to a simple command. </paragraph>
<paragraph id="P-0151" lvl="0"><number>&lsqb;0151&rsqb;</number> After that, the to-be-verified biometric feature data encoded by data encryption section <highlight><bold>204</bold></highlight> using the public key, is transferred/transmitted, along with the time stamp attached thereto, from transceiving interface <highlight><bold>205</bold></highlight> to IC card <highlight><bold>300</bold></highlight> (step S<highlight><bold>14</bold></highlight>). </paragraph>
<paragraph id="P-0152" lvl="0"><number>&lsqb;0152&rsqb;</number> When IC card <highlight><bold>300</bold></highlight> receives encoded data via transceiving interface <highlight><bold>301</bold></highlight>, data encryption/decryption section <highlight><bold>305</bold></highlight> restores the encoded data, using a valid secret key, into the original to-be-verified biometric feature data and time stamp (step S<highlight><bold>15</bold></highlight>). Biometric feature data verifying section <highlight><bold>306</bold></highlight> first compares the to-be-verified biometric feature data with the valid biometric feature data (step S<highlight><bold>16</bold></highlight>) As a result of the comparison, if the level of correlation (the degree of the matching) between the to-be-verified biometric feature data and the valid biometric feature data is below a predetermined value (NO route of step S<highlight><bold>17</bold></highlight>), the object person is judged not to be the authorized user of the IC card <highlight><bold>300</bold></highlight> (step S<highlight><bold>22</bold></highlight>), and a predetermined action (for example, locking the card) is taken. </paragraph>
<paragraph id="P-0153" lvl="0"><number>&lsqb;0153&rsqb;</number> Otherwise, if the level of correlation (the degree of the matching) between the to-be-verified biometric feature data and the valid biometric feature data is a predetermined value or higher (YES route of step S<highlight><bold>17</bold></highlight>), time stamp verifying section <highlight><bold>307</bold></highlight> compares the time stamp restored by data encryption/decryption section <highlight><bold>305</bold></highlight> with the current time calculated by clock function section <highlight><bold>304</bold></highlight> (step S<highlight><bold>18</bold></highlight>). </paragraph>
<paragraph id="P-0154" lvl="0"><number>&lsqb;0154&rsqb;</number> As a result of the comparison, if the difference between the time stamp (the extraction date-and-time) and the current time exceeds a predetermined value (NO route of step S<highlight><bold>19</bold></highlight>), the object person is judged not to be the authorized user of the IC card <highlight><bold>300</bold></highlight> (step S<highlight><bold>23</bold></highlight>), and a predetermined action (for example, locking the card) is taken. </paragraph>
<paragraph id="P-0155" lvl="0"><number>&lsqb;0155&rsqb;</number> Otherwise, if the difference between the time stamp (the extraction date-and-time) and the current time is a predetermined value or lower (YES route of step S<highlight><bold>19</bold></highlight>), the object person is judged to be the authorized user of the IC card <highlight><bold>300</bold></highlight> (step S<highlight><bold>20</bold></highlight>), the PIN and the account number (user number) are read out from PIN register section <highlight><bold>308</bold></highlight> and user information register section <highlight><bold>309</bold></highlight>, respectively, and then output/transmitted, as the verification result (&ldquo;OK&rdquo;), from transceiving interface <highlight><bold>301</bold></highlight> to host computer <highlight><bold>400</bold></highlight> via transceiving interface <highlight><bold>205</bold></highlight> of IC card terminal <highlight><bold>200</bold></highlight> (step S<highlight><bold>21</bold></highlight>). </paragraph>
<paragraph id="P-0156" lvl="0"><number>&lsqb;0156&rsqb;</number> After that, IC card <highlight><bold>300</bold></highlight> transmits/receives data to/from host computer <highlight><bold>400</bold></highlight> in accordance with a predetermined protocol, and similar processing to that which is carried out to a common debit card is performed between host computer <highlight><bold>400</bold></highlight> and IC card <highlight><bold>300</bold></highlight>. At that time, transceiving interface <highlight><bold>205</bold></highlight> of IC card terminal <highlight><bold>200</bold></highlight> only transfers (allows the data pass therethrough) the data transmitted/received between host computer <highlight><bold>400</bold></highlight> and IC card <highlight><bold>300</bold></highlight>, without taking the data in itself. Host computer <highlight><bold>400</bold></highlight> receives the account number and the PIN, and then moves a specified amount of money from that account to another account. The result of the transaction may be printed out by IC card terminal <highlight><bold>200</bold></highlight>, or may be written in IC card <highlight><bold>300</bold></highlight> as a log. </paragraph>
<paragraph id="P-0157" lvl="0"><number>&lsqb;0157&rsqb;</number> In IC card <highlight><bold>300</bold></highlight> of the first embodiment, verification results (&ldquo;OK&rdquo;/&ldquo;NG&rdquo;) obtained by biometric feature data verifying section <highlight><bold>306</bold></highlight> and time stamp verifying section <highlight><bold>307</bold></highlight> are held, together with the verification date-and-time obtained by clock function section <highlight><bold>304</bold></highlight>, in verification log recording section <highlight><bold>310</bold></highlight> for a predetermined time period. If the PIN and the account number are transmitted as a positive user verification result, the date and time of their transmission and the content of the transaction performed are stored in management log recording section <highlight><bold>317</bold></highlight> of IC card <highlight><bold>300</bold></highlight>. </paragraph>
<paragraph id="P-0158" lvl="0"><number>&lsqb;0158&rsqb;</number> In this manner, with user verification system <highlight><bold>100</bold></highlight> of the first embodiment, after the matching between the to-be-verified biometric feature data and the-valid biometric feature data is confirmed, the PIN and the account number stored in IC card <highlight><bold>300</bold></highlight> are transmitted to host computer <highlight><bold>400</bold></highlight>. The necessity for directly inputting PIN with a ten-key pad is thus eliminated, and the PIN only passes through IC card terminal <highlight><bold>200</bold></highlight>. It is thus possible to minimize the risk of the PIN being stolen when it is input. </paragraph>
<paragraph id="P-0159" lvl="0"><number>&lsqb;0159&rsqb;</number> Therefore, since PIN verification is associated with biometric user verification utilizing biometric information, which is free of being stolen or faked, it is possible to surely prevent the leakage and the theft of the PIN, so that a high level of security can be guaranteed, thereby realizing secure user verification. </paragraph>
<paragraph id="P-0160" lvl="0"><number>&lsqb;0160&rsqb;</number> Further, in user verification system <highlight><bold>100</bold></highlight> of the first embodiment, the to-be-verified biometric feature data is encoded by a public key system before the data is transmitted from IC card terminal <highlight><bold>200</bold></highlight> to IC card <highlight><bold>300</bold></highlight>, and all the data having been input to IC card <highlight><bold>300</bold></highlight> for use in user verification is decoded within IC card <highlight><bold>300</bold></highlight>. Accordingly, the present system prevents the inputting of falsified to-be-verified biometric feature data, so that fraud can be effectively prevented, thereby guaranteeing a high level of security. </paragraph>
<paragraph id="P-0161" lvl="0"><number>&lsqb;0161&rsqb;</number> Even if to-be-verified biometric feature data should be stolen, with a false IC card being inserted into the slot of IC card terminal <highlight><bold>200</bold></highlight>, it is still difficult to wrongfully use the stolen public key in another system, because the key is encoded by a public key system. It is thus possible to guarantee a high level of security, realizing secure user verification. </paragraph>
<paragraph id="P-0162" lvl="0"><number>&lsqb;0162&rsqb;</number> Further, if the stolen to-be-verified biometric feature data is used in a replay attack against IC card <highlight><bold>300</bold></highlight>, the difference between the date and time the to-be-verified biometric feature data was extracted and the current time inevitably becomes significant. Taking advantage of this fact, user verification system <highlight><bold>100</bold></highlight> of the first embodiment compares the date and time the to-be-verified biometric feature data was extracted (time stamp) with the current time. Access attempts made by using the to-be-verified biometric feature data are rejected if the difference between the time stamp (extraction date-and-time) and the current time is significantly great. It is thus difficult to use the stolen to-be-verified biometric feature data in a replay attack, thereby guaranteeing a higher level of security. </paragraph>
<paragraph id="P-0163" lvl="0"><number>&lsqb;0163&rsqb;</number> Further, in user verification system <highlight><bold>100</bold></highlight> of the first embodiment, when IC card <highlight><bold>300</bold></highlight> receives a predetermined signal (command) via transceiving interface <highlight><bold>301</bold></highlight>, the public key stored in IC card-dedicated public key register section <highlight><bold>312</bold></highlight> is read out and is then sent out to an external apparatus. Thus, even if IC card terminal <highlight><bold>200</bold></highlight> (or host computer <highlight><bold>400</bold></highlight>) stores no public key for IC card <highlight><bold>300</bold></highlight>, it is still possible to use the public key stored in IC card <highlight><bold>300</bold></highlight>. </paragraph>
<paragraph id="P-0164" lvl="0"><number>&lsqb;0164&rsqb;</number> Still further, in user verification system <highlight><bold>100</bold></highlight> of the first embodiment, since management log recording section <highlight><bold>317</bold></highlight> stores the date and time the PIN and the account number were transmitted and the content of the transaction performed, it is possible for the user of IC card <highlight><bold>300</bold></highlight> to keep a management log for himself, separate from the one for the system. The user log will serve as a safeguard against a low-reliability system. </paragraph>
<paragraph id="P-0165" lvl="0"><number>&lsqb;0165&rsqb;</number> Furthermore, in user verification system <highlight><bold>100</bold></highlight> of the first embodiment, verification log recording section <highlight><bold>310</bold></highlight> of IC card <highlight><bold>300</bold></highlight> stores verification results (&ldquo;OK&rdquo;/&ldquo;NG&rdquo;) obtained by biometric feature data verifying section <highlight><bold>306</bold></highlight> and time stamp verifying section <highlight><bold>307</bold></highlight>, as a verification log, for a predetermined time period. That is, a history of user verification is stored in IC card <highlight><bold>300</bold></highlight>. </paragraph>
<paragraph id="P-0166" lvl="0"><number>&lsqb;0166&rsqb;</number> In the foregoing first embodiment, the present invention is applied to IC card <highlight><bold>300</bold></highlight> that serves as a debit card. The present invention should by no means be limited to the above, and IC card terminal <highlight><bold>200</bold></highlight> can be replaced with an IC card reader, and host computer <highlight><bold>400</bold></highlight> can be replaced with a personal computer (PC), thereby enabling the application of the present invention to a system for controlling access to the PC. </paragraph>
<paragraph id="P-0167" lvl="0"><number>&lsqb;0167&rsqb;</number> &lsqb;1-1&rsqb; First Modified Example of the First Embodiment: </paragraph>
<paragraph id="P-0168" lvl="0"><number>&lsqb;0168&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3</cross-reference> is a block diagram showing a structure of a user verification system according to a first modification of the first embodiment of the present invention. Like reference numbers designate similar parts or elements throughout several views of the present embodiment, so their detailed description is omitted here. </paragraph>
<paragraph id="P-0169" lvl="0"><number>&lsqb;0169&rsqb;</number> As shown in <cross-reference target="DRAWINGS">FIG. 3</cross-reference>, in user verification system <highlight><bold>100</bold></highlight>A of the first modification of the first embodiment, the following functions are added to IC card <highlight><bold>300</bold></highlight> of user verification system <highlight><bold>100</bold></highlight> of <cross-reference target="DRAWINGS">FIG. 1</cross-reference>. </paragraph>
<paragraph id="P-0170" lvl="0"><number>&lsqb;0170&rsqb;</number> In other words, user verification system <highlight><bold>100</bold></highlight>A is an advanced version of user verification system <highlight><bold>100</bold></highlight>. In user verification system <highlight><bold>100</bold></highlight>A, a PIN and an account number are encoded using a public key for host computer <highlight><bold>400</bold></highlight>, before they are transmitted to host computer <highlight><bold>400</bold></highlight>. At the time the PIN and the account number are encoded, a time stamp (verification date-and-time) is added to them. </paragraph>
<paragraph id="P-0171" lvl="0"><number>&lsqb;0171&rsqb;</number> For this purpose, IC card <highlight><bold>300</bold></highlight> of user verification system <highlight><bold>100</bold></highlight>A includes host computer-dedicated public key register section (management device-dedicated public key register section) <highlight><bold>311</bold></highlight>, which has a pre-stored public key for host computer <highlight><bold>400</bold></highlight>. Such a host computer-dedicated public key register section <highlight><bold>311</bold></highlight> is, in practical use, realized by an internal storage unit, such as a ROM and a RAM, of IC card <highlight><bold>300</bold></highlight>. </paragraph>
<paragraph id="P-0172" lvl="0"><number>&lsqb;0172&rsqb;</number> In IC card <highlight><bold>300</bold></highlight> of user verification system <highlight><bold>100</bold></highlight>A, if an object person is judged to be the authorized user of portable electronic device <highlight><bold>300</bold></highlight>, as a result of the verification carried out by biometric feature data verifying section <highlight><bold>306</bold></highlight> and time stamp verifying section <highlight><bold>307</bold></highlight>, the date and time the verification was performed is obtained by clock function section <highlight><bold>304</bold></highlight>, and the verification date-and-time is added to the PIN and the account number to be transmitted to host computer <highlight><bold>400</bold></highlight>, as a time stamp. </paragraph>
<paragraph id="P-0173" lvl="0"><number>&lsqb;0173&rsqb;</number> The foregoing data encryption/decryption section <highlight><bold>305</bold></highlight> encodes the PIN and the account number to be transmitted to host computer <highlight><bold>400</bold></highlight>, along with the time stamp (the verification date-and-time), using a public key for host computer <highlight><bold>400</bold></highlight>. </paragraph>
<paragraph id="P-0174" lvl="0"><number>&lsqb;0174&rsqb;</number> Referring now to the flowchart of <cross-reference target="DRAWINGS">FIG. 4, a</cross-reference> description will be made hereinbelow of an operation of user verification system <highlight><bold>100</bold></highlight>A of the first modification to the first embodiment. Like step numbers designate the same processing as in <cross-reference target="DRAWINGS">FIG. 2</cross-reference>, so their detailed description is omitted here. </paragraph>
<paragraph id="P-0175" lvl="0"><number>&lsqb;0175&rsqb;</number> If the object person is judged to be the authorized user of portable electronic device <highlight><bold>300</bold></highlight> in step S<highlight><bold>20</bold></highlight>, clock function section <highlight><bold>304</bold></highlight> obtains the date and time when the verification was performed, and the verification date-and-time is attached, as a time stamp, to the PIN and the account number to be transmitted to host computer <highlight><bold>400</bold></highlight> (step S<highlight><bold>31</bold></highlight>). </paragraph>
<paragraph id="P-0176" lvl="0"><number>&lsqb;0176&rsqb;</number> After that, the PIN and the account number are encoded by data encryption/decryption section <highlight><bold>305</bold></highlight> with a public key for host computer <highlight><bold>400</bold></highlight> (step S<highlight><bold>32</bold></highlight>), and then transmitted/transferred from transceiving interface <highlight><bold>301</bold></highlight> to host computer <highlight><bold>400</bold></highlight> via transceiving interface <highlight><bold>205</bold></highlight> of IC card terminal <highlight><bold>200</bold></highlight> (step S<highlight><bold>33</bold></highlight>). </paragraph>
<paragraph id="P-0177" lvl="0"><number>&lsqb;0177&rsqb;</number> User verification system <highlight><bold>100</bold></highlight>A of the first modification of the first embodiment guarantees similar effects and benefits to those already described in the first embodiment. Additionally, even if the verification results, including the PIN, are intercepted by undesirable parties during their transmission to an external apparatus, it is still difficult for those third parties to wrongfully use the stolen PIN in another system, because the verification results (a PIN, an account number, the verification date-and-time, and so on) have been encoded using the public key for host computer <highlight><bold>400</bold></highlight> before they are sent out from IC card <highlight><bold>300</bold></highlight> to host computer <highlight><bold>400</bold></highlight>. Thus the security level of the system is significantly improved. </paragraph>
<paragraph id="P-0178" lvl="0"><number>&lsqb;0178&rsqb;</number> As to a verification result transmitted to host computer <highlight><bold>400</bold></highlight> in user verification system <highlight><bold>100</bold></highlight>A, the result contains the date and time the verification was performed, which has been attached to the verification result as a time stamp. As a result, even if the verification result (PIN) should be intercepted and then wrongfully used, host computer <highlight><bold>400</bold></highlight>, which monitors the verification date-and-time attached to the PIN, can recognize that a wrongfully obtained PIN is used, based on the difference between the verification date-and-time (time stamp) and the current time. </paragraph>
<paragraph id="P-0179" lvl="0"><number>&lsqb;0179&rsqb;</number> More precisely, if such a stolen PIN is used to access host computer <highlight><bold>400</bold></highlight>, the difference between the verification date-and-time (timestamp) and the current time inevitably becomes great. Host computer <highlight><bold>400</bold></highlight> uses this trait to evaluate whether or not the object PIN is an intercepted one, and upon recognition of the stolen PIN, host computer <highlight><bold>400</bold></highlight> rejects the access attempt. It is thus difficult to reuse the stolen PIN, so that a higher level of security is guaranteed. It is difficult to reuse the same data. </paragraph>
<paragraph id="P-0180" lvl="0"><number>&lsqb;0180&rsqb;</number> &lsqb;1-2&rsqb; Second Modified Example of the First embodiment: </paragraph>
<paragraph id="P-0181" lvl="0"><number>&lsqb;0181&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 5</cross-reference> is a block diagram showing a structure of a user verification system according to a second modification to the first embodiment of the present invention. Like reference numbers designate similar parts or elements throughout several views of the present embodiment, so their detailed description is omitted here. </paragraph>
<paragraph id="P-0182" lvl="0"><number>&lsqb;0182&rsqb;</number> As shown in <cross-reference target="DRAWINGS">FIG. 5</cross-reference>, in user verification system <highlight><bold>100</bold></highlight>B of the second modification of the first embodiment, the following functions (of magnetic data read-out unit <highlight><bold>206</bold></highlight>) are added to IC card terminal <highlight><bold>200</bold></highlight> of user verification system <highlight><bold>100</bold></highlight>A of <cross-reference target="DRAWINGS">FIG. 3</cross-reference>. </paragraph>
<paragraph id="P-0183" lvl="0"><number>&lsqb;0183&rsqb;</number> More precisely, in the second modification to the first embodiment, user information including an account number (bank account number, user number) is previously recorded, as magnetic data, in magnetic stripes (recording unit; not shown) prepared on the surface of IC card <highlight><bold>300</bold></highlight>, as in the case of a magnetic card. IC card terminal <highlight><bold>200</bold></highlight> has magnetic data read-out unit <highlight><bold>206</bold></highlight> for reading-out magnetic data stored in the magnetic stripes on the surface of IC card <highlight><bold>300</bold></highlight>. </paragraph>
<paragraph id="P-0184" lvl="0"><number>&lsqb;0184&rsqb;</number> Referring now to the flowchart of <cross-reference target="DRAWINGS">FIG. 6, a</cross-reference> description will be made hereinbelow of an operation of user verification system <highlight><bold>100</bold></highlight>B of the second modification to the first embodiment. Like step numbers designate the same processing throughout <cross-reference target="DRAWINGS">FIG. 2</cross-reference>, <cross-reference target="DRAWINGS">FIG. 4</cross-reference>, and <cross-reference target="DRAWINGS">FIG. 6</cross-reference>, so their detailed description is omitted here. </paragraph>
<paragraph id="P-0185" lvl="0"><number>&lsqb;0185&rsqb;</number> In user verification system <highlight><bold>100</bold></highlight>B, when IC card <highlight><bold>300</bold></highlight> is used as a debit car, a user (object person to be verified) first inserts IC card <highlight><bold>300</bold></highlight> into the slot of IC card terminal <highlight><bold>200</bold></highlight>. Magnetic data read-out unit <highlight><bold>206</bold></highlight> reads out magnetic data, that is, user information such as an account number (bank account number, user number), from magnetic stripes prepared on the surface of IC card <highlight><bold>300</bold></highlight> (step S<highlight><bold>10</bold></highlight>). </paragraph>
<paragraph id="P-0186" lvl="0"><number>&lsqb;0186&rsqb;</number> After that, if the object user is judged to be the authorized user of IC card <highlight><bold>300</bold></highlight> in step S<highlight><bold>20</bold></highlight>, clock function section <highlight><bold>304</bold></highlight> obtains the date and time when the verification was performed, and the verification date-and-time is attached, as a time stamp, to the PIN to be transmitted to host computer <highlight><bold>400</bold></highlight> (step S<highlight><bold>31</bold></highlight>&prime;). </paragraph>
<paragraph id="P-0187" lvl="0"><number>&lsqb;0187&rsqb;</number> The PIN is encoded, along with the time stamp (the verification date-and-time), by data encryption/decryption section <highlight><bold>305</bold></highlight> using a public key for host computer <highlight><bold>400</bold></highlight> (step S<highlight><bold>32</bold></highlight>&prime;), and then passes through transceiving interface <highlight><bold>301</bold></highlight> and transceiving interface <highlight><bold>205</bold></highlight> of IC card terminal <highlight><bold>200</bold></highlight>. The encoded PIN, together with the account number (bank account number, user number) read out from the magnetic stripes, is transmitted/transferred from transceiving interface <highlight><bold>205</bold></highlight> to host computer <highlight><bold>400</bold></highlight> (step S<highlight><bold>33</bold></highlight>&prime;). </paragraph>
<paragraph id="P-0188" lvl="0"><number>&lsqb;0188&rsqb;</number> In this modification, since user information such as the account number (bank account number, user number) is recorded in the magnetic stripes on the surface of IC card <highlight><bold>300</bold></highlight>, user information register section <highlight><bold>309</bold></highlight> built in IC card <highlight><bold>300</bold></highlight> may be optional. </paragraph>
<paragraph id="P-0189" lvl="0"><number>&lsqb;0189&rsqb;</number> In this manner, user verification system <highlight><bold>100</bold></highlight>B of the second modification of the first embodiment guarantees similar effects and benefits to those already described in the first modification to the first embodiment. Additionally, user verification system <highlight><bold>100</bold></highlight>B is applicable in a case where a portable electronic device is an IC card that is equipped with a function (magnetic stripes) of a magnetic card. Moreover, since IC card terminal <highlight><bold>200</bold></highlight> is capable of coping with both of existing magnetic cards and IC cards, those two different types of cards can be used in user verification system <highlight><bold>100</bold></highlight>B. </paragraph>
<paragraph id="P-0190" lvl="0"><number>&lsqb;0190&rsqb;</number> &lsqb;1-3&rsqb; Third Modified Example of the First Embodiment: </paragraph>
<paragraph id="P-0191" lvl="0"><number>&lsqb;0191&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 7</cross-reference> is a block diagram showing a structure of a user verification system according to a third modification to the first embodiment of the present invention. Like reference numbers designate similar parts or elements throughout several views of the present embodiment, so their detailed description is omitted here. </paragraph>
<paragraph id="P-0192" lvl="0"><number>&lsqb;0192&rsqb;</number> As shown in <cross-reference target="DRAWINGS">FIG. 7</cross-reference>, in user verification system <highlight><bold>100</bold></highlight>C of the third modification to the first embodiment, the following functions (of verification counter section <highlight><bold>313</bold></highlight> and IC card lock section <highlight><bold>314</bold></highlight>) are added to IC card <highlight><bold>300</bold></highlight> of user verification system <highlight><bold>100</bold></highlight>B of <cross-reference target="DRAWINGS">FIG. 5</cross-reference>. </paragraph>
<paragraph id="P-0193" lvl="0"><number>&lsqb;0193&rsqb;</number> More precisely, biometric feature data verifying section <highlight><bold>306</bold></highlight> compares to-be-verified biometric feature data with valid biometric feature data, and if the comparison result drops below a predetermined level of correlation a predetermined times consecutively, IC card <highlight><bold>300</bold></highlight> is locked. A function for locking IC card <highlight><bold>300</bold></highlight> is equipped to IC card <highlight><bold>300</bold></highlight> itself. </paragraph>
<paragraph id="P-0194" lvl="0"><number>&lsqb;0194&rsqb;</number> Thus IC card <highlight><bold>300</bold></highlight> of user verification system <highlight><bold>100</bold></highlight>A is equipped with the functions of verification counter section <highlight><bold>313</bold></highlight> and IC card lock section <highlight><bold>314</bold></highlight>. These verification counter section <highlight><bold>313</bold></highlight> and IC card lock section (lock function section) <highlight><bold>314</bold></highlight> are, in practical use, realized by a CPU built in IC card <highlight><bold>300</bold></highlight>. </paragraph>
<paragraph id="P-0195" lvl="0"><number>&lsqb;0195&rsqb;</number> Here, if biometric feature data verifying section <highlight><bold>306</bold></highlight> obtains a comparison result below a predetermined correlation level more than one time consecutively, verification counter section <highlight><bold>313</bold></highlight> counts the occurrence of such comparison results. </paragraph>
<paragraph id="P-0196" lvl="0"><number>&lsqb;0196&rsqb;</number> When the count value obtained by verification counter section <highlight><bold>313</bold></highlight> reaches the predetermined value, IC card lock section <highlight><bold>314</bold></highlight> locks IC card <highlight><bold>300</bold></highlight> to prohibit the inputting of biometric feature data to IC card <highlight><bold>300</bold></highlight>. </paragraph>
<paragraph id="P-0197" lvl="0"><number>&lsqb;0197&rsqb;</number> Referring now to the flowchart of <cross-reference target="DRAWINGS">FIG. 8, a</cross-reference> description will be made hereinbelow of an operation of user verification system <highlight><bold>100</bold></highlight>C of the third modification to the first embodiment. Like step numbers designate the same processing throughout FIG. <highlight><bold>2</bold></highlight>, <cross-reference target="DRAWINGS">FIG. 4</cross-reference>, and <cross-reference target="DRAWINGS">FIG. 6</cross-reference>, so their detailed description is omitted here. If it is judged that the correlation (the degree of a matching) between the to-be-verified biometric feature data and the valid biometric feature data drops below a predetermined value (NO route of step S<highlight><bold>17</bold></highlight>), verification counter section <highlight><bold>313</bold></highlight> increments its count value by one (step S<highlight><bold>41</bold></highlight>), and it is then evaluated whether or not the count value reaches a predetermined value (step S<highlight><bold>42</bold></highlight>). </paragraph>
<paragraph id="P-0198" lvl="0"><number>&lsqb;0198&rsqb;</number> If the evaluation yields a negative result (NO route of step S<highlight><bold>42</bold></highlight>), a signal (command) for instructing IC card terminal <highlight><bold>200</bold></highlight> to carry out the measurement of biometric information is transmitted from IC card <highlight><bold>300</bold></highlight> to IC card terminal <highlight><bold>200</bold></highlight> once again, and the processing of step S<highlight><bold>11</bold></highlight> through step S<highlight><bold>17</bold></highlight> is then repeated once again. </paragraph>
<paragraph id="P-0199" lvl="0"><number>&lsqb;0199&rsqb;</number> Otherwise, if the evaluation result is positive (YES route of step S<highlight><bold>42</bold></highlight>), IC card lock section <highlight><bold>314</bold></highlight> locks IC card <highlight><bold>300</bold></highlight> to prohibit the inputting of biometric feature data to IC card <highlight><bold>300</bold></highlight> (step S<highlight><bold>43</bold></highlight>). </paragraph>
<paragraph id="P-0200" lvl="0"><number>&lsqb;0200&rsqb;</number> In this manner, user verification system <highlight><bold>100</bold></highlight>C of the third modification of the first embodiment guarantees similar effects and benefits to those already described in the second modification to the first embodiment. Additionally, if biometric feature data verifying section <highlight><bold>306</bold></highlight> obtains the comparison result a predetermined times consecutively that the matching condition between the to-be-verified biometric feature data and the valid biometric feature data is not satisfied, IC card lock section <highlight><bold>314</bold></highlight> locks IC card <highlight><bold>300</bold></highlight> to prohibit the inputting of biometric feature data to IC card <highlight><bold>300</bold></highlight>, thereby preventing unauthorized accessing with reliability. </paragraph>
<paragraph id="P-0201" lvl="0"><number>&lsqb;0201&rsqb;</number> &lsqb;2&rsqb; Second Embodiment: </paragraph>
<paragraph id="P-0202" lvl="0"><number>&lsqb;0202&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 9</cross-reference> is a block diagram showing a structure of a user verification system according to a second embodiment of the present invention. Like reference numbers designate similar parts or elements throughout several views of the present embodiment, so their detailed description is omitted here. </paragraph>
<paragraph id="P-0203" lvl="0"><number>&lsqb;0203&rsqb;</number> As shown in <cross-reference target="DRAWINGS">FIG. 9</cross-reference>, user verification system <highlight><bold>500</bold></highlight> of the second embodiment includes IC card (portable electronic device) <highlight><bold>300</bold></highlight>, IC card terminal (external data processing device) <highlight><bold>200</bold></highlight> which receives IC card <highlight><bold>300</bold></highlight> and makes a direct access to the IC card <highlight><bold>300</bold></highlight>. IC card <highlight><bold>300</bold></highlight> of the second embodiment may optionally have a function of a debit card, as in the case of the first embodiment. </paragraph>
<paragraph id="P-0204" lvl="0"><number>&lsqb;0204&rsqb;</number> IC card terminal <highlight><bold>200</bold></highlight> of the second embodiment, as in the case of the first embodiment, has a slot (not shown) for receiving IC card <highlight><bold>300</bold></highlight>. At an instant IC card <highlight><bold>300</bold></highlight> is inserted into this slot, transceiving interface (first transceiving interface) <highlight><bold>205</bold></highlight> of IC card terminal <highlight><bold>200</bold></highlight> comes into contact with transceiving interface (second transceiving interface) <highlight><bold>301</bold></highlight> of IC card <highlight><bold>300</bold></highlight>, so that data can be transmitted/received between IC card terminal <highlight><bold>200</bold></highlight> and IC card <highlight><bold>300</bold></highlight>. In the second embodiment, also, transceiving interfaces <highlight><bold>205</bold></highlight>, <highlight><bold>301</bold></highlight> are contact-type interfaces. The present invention, however, should by no means be limited to this, contactless interfaces can also be available. </paragraph>
<paragraph id="P-0205" lvl="0"><number>&lsqb;0205&rsqb;</number> IC card terminal <highlight><bold>200</bold></highlight> has biometric information measuring unit <highlight><bold>201</bold></highlight>, biometric feature data extracting section <highlight><bold>202</bold></highlight>, data encryption section (first encryption section) <highlight><bold>204</bold></highlight>, and transceiving interface <highlight><bold>205</bold></highlight>. </paragraph>
<paragraph id="P-0206" lvl="0"><number>&lsqb;0206&rsqb;</number> Biometric information measuring unit <highlight><bold>201</bold></highlight>, as in the case of the first embodiment, measures/samples biometric information of an object user, a person who inserted IC card <highlight><bold>300</bold></highlight> into the slot of IC card terminal <highlight><bold>200</bold></highlight> (probably the authorized user of IC card <highlight><bold>300</bold></highlight>). Biometric feature data extracting section <highlight><bold>202</bold></highlight>, as in the case of the first embodiment, extracts to-be-verified biometric feature data from the biometric information measured by biometric information measuring unit <highlight><bold>201</bold></highlight>. As to biometric information and biometric feature data to be extracted from the biometric feature data, similar kinds of biometric data to those described in the first embodiment are used, so their detailed description is omitted here. </paragraph>
<paragraph id="P-0207" lvl="0"><number>&lsqb;0207&rsqb;</number> Data encryption section <highlight><bold>204</bold></highlight> encodes the to-be-verified biometric feature data extracted by biometric feature data extracting section <highlight><bold>202</bold></highlight>, using a public key for IC card <highlight><bold>300</bold></highlight>. At that time, as in the first embodiment, the public key for IC card <highlight><bold>300</bold></highlight> is provided by a host computer (not shown; the one separate from host computer <highlight><bold>400</bold></highlight>) connected with IC card terminal <highlight><bold>200</bold></highlight>, or it is provided by IC card <highlight><bold>300</bold></highlight> in response to a specific command (predetermined signal) issued to IC card <highlight><bold>300</bold></highlight>. In the second embodiment, also, IC card-dedicated public key register section <highlight><bold>312</bold></highlight> of IC card <highlight><bold>300</bold></highlight> has a public key for IC card <highlight><bold>300</bold></highlight>, and IC card terminal <highlight><bold>200</bold></highlight> issues the specific command to IC card <highlight><bold>300</bold></highlight> to obtain the public key. </paragraph>
<paragraph id="P-0208" lvl="0"><number>&lsqb;0208&rsqb;</number> As in the foregoing description, transceiving interface <highlight><bold>205</bold></highlight> comes into contact with transceiving interface <highlight><bold>301</bold></highlight> of IC card <highlight><bold>300</bold></highlight>, thereby enabling data communication between IC card terminal <highlight><bold>200</bold></highlight> and IC card <highlight><bold>300</bold></highlight>. </paragraph>
<paragraph id="P-0209" lvl="0"><number>&lsqb;0209&rsqb;</number> IC card <highlight><bold>300</bold></highlight> of the second embodiment, as of the first embodiment, has a built-in storage unit such as a ROM and a RAM, and also contains a CPU which carries out processing based on the data stored in the storage unit and signals received from an external apparatus. IC card <highlight><bold>300</bold></highlight> includes transceiving interface <highlight><bold>301</bold></highlight>, biometric feature data register section <highlight><bold>302</bold></highlight>, secret key register section <highlight><bold>303</bold></highlight>, data encryption/decryption section (serving both as a second encryption section and as a decryption section) <highlight><bold>305</bold></highlight>, biometric feature data verifying section <highlight><bold>306</bold></highlight>, and IC card-dedicated public key register section <highlight><bold>312</bold></highlight>. </paragraph>
<paragraph id="P-0210" lvl="0"><number>&lsqb;0210&rsqb;</number> Transceiving interface <highlight><bold>301</bold></highlight>, as in the foregoing description, comes into contact with transceiving interface <highlight><bold>205</bold></highlight> of IC card terminal <highlight><bold>200</bold></highlight>, thereby enabling data communication between IC card terminal <highlight><bold>200</bold></highlight> and IC card <highlight><bold>300</bold></highlight>. </paragraph>
<paragraph id="P-0211" lvl="0"><number>&lsqb;0211&rsqb;</number> Biometric feature data register section <highlight><bold>302</bold></highlight> has pre-stored valid biometric feature data of the authorized user of IC card <highlight><bold>300</bold></highlight>. This valid biometric feature data is registered, for example, when IC card <highlight><bold>300</bold></highlight> is initially issued, in the similar way to that described in the first embodiment. </paragraph>
<paragraph id="P-0212" lvl="0"><number>&lsqb;0212&rsqb;</number> As in the first embodiment, secret key register section <highlight><bold>303</bold></highlight> has a pre-stored registered secret key corresponding to the public key for IC card <highlight><bold>300</bold></highlight>. </paragraph>
<paragraph id="P-0213" lvl="0"><number>&lsqb;0213&rsqb;</number> Data encryption/decryption section <highlight><bold>305</bold></highlight> serves both as a decryption section and as an encryption section (second encryption section). Serving as the former, data encryption/decryption section <highlight><bold>305</bold></highlight> decodes the data received from an external apparatus through transceiving interface <highlight><bold>301</bold></highlight>, using the valid secret key registered in secret key register section <highlight><bold>303</bold></highlight>. Serving as the latter, data encryption/decryption section <highlight><bold>305</bold></highlight> encodes data to be transmitted to host computer <highlight><bold>400</bold></highlight>, using the public key for the host computer <highlight><bold>400</bold></highlight>. In the second embodiment, however, data encryption/decryption section <highlight><bold>305</bold></highlight> functions only as a decryption section, and its function as an encryption section is used in first through third modified examples of the second embodiment. Here, as will be described later, original data restored by data encryption/decryption section <highlight><bold>305</bold></highlight> is to-be-verified biometric feature data which has been sent out from IC card terminal <highlight><bold>200</bold></highlight>. </paragraph>
<paragraph id="P-0214" lvl="0"><number>&lsqb;0214&rsqb;</number> Biometric feature data verifying section <highlight><bold>306</bold></highlight> compares the to-be-verified biometric feature data, which has been received from an external apparatus through transceiving interface <highlight><bold>301</bold></highlight>, with the valid biometric feature data registered in biometric feature data register section <highlight><bold>302</bold></highlight> to evaluate whether or not the to-be-verified biometric feature data satisfies a predetermined matching condition, which is the measure of the matching between the to-be-verified biometric feature data and the valid biometric feature data. That is, it is evaluated whether or not the correlation (the degree of resemblance) between the to-be-verified biometric feature data and the valid biometric feature data takes a predetermined value or greater. </paragraph>
<paragraph id="P-0215" lvl="0"><number>&lsqb;0215&rsqb;</number> IC card-dedicated public key register section <highlight><bold>312</bold></highlight>, as described above, has a pre-stored public key (predetermined public key information) for an IC card <highlight><bold>300</bold></highlight>, which is used by public key data encryption section <highlight><bold>204</bold></highlight> of IC card terminal <highlight><bold>200</bold></highlight> to encode to-be-verified biometric feature data and a time stamp. Upon receipt of a predetermined signal (certain command) through transceiving interface <highlight><bold>301</bold></highlight>, IC card <highlight><bold>300</bold></highlight> transmits the public key stored in IC card-dedicated public key register section <highlight><bold>312</bold></highlight>, from transceiving interface <highlight><bold>301</bold></highlight> to IC card terminal <highlight><bold>200</bold></highlight>. </paragraph>
<paragraph id="P-0216" lvl="0"><number>&lsqb;0216&rsqb;</number> At that time, the foregoing biometric feature data register section <highlight><bold>302</bold></highlight>, secret key register section <highlight><bold>303</bold></highlight>, and IC card-dedicated public key register section <highlight><bold>312</bold></highlight> are realized, in practical use, by a storage unit such as a ROM an a RAM internally equipped in IC card <highlight><bold>300</bold></highlight>. </paragraph>
<paragraph id="P-0217" lvl="0"><number>&lsqb;0217&rsqb;</number> The foregoing data encryption/decryption section <highlight><bold>305</bold></highlight> and biometric feature data verifying section <highlight><bold>306</bold></highlight> are realized, in practical use, by a CPU built in IC card <highlight><bold>300</bold></highlight>. </paragraph>
<paragraph id="P-0218" lvl="0"><number>&lsqb;0218&rsqb;</number> Next, an operation of user verification system <highlight><bold>500</bold></highlight> of the second embodiment will be described hereinbelow, with reference to the flowchart of <cross-reference target="DRAWINGS">FIG. 10</cross-reference>. Like step numbers designate the same processing throughout <cross-reference target="DRAWINGS">FIG. 2</cross-reference>, <cross-reference target="DRAWINGS">FIG. 4</cross-reference>, and <cross-reference target="DRAWINGS">FIG. 6</cross-reference>, so their detailed description is omitted here. </paragraph>
<paragraph id="P-0219" lvl="0"><number>&lsqb;0219&rsqb;</number> When using IC card <highlight><bold>300</bold></highlight> as a debit card, a user (object person to be verified) puts the IC card <highlight><bold>300</bold></highlight> into the slot of IC card terminal <highlight><bold>200</bold></highlight>, and then presses his fingertip to a fingerprint input screen, if his fingerprint image data is requested to be input as the biometric information for use in user verification. </paragraph>
<paragraph id="P-0220" lvl="0"><number>&lsqb;0220&rsqb;</number> Biometric information measuring unit <highlight><bold>201</bold></highlight> of IC card terminal <highlight><bold>200</bold></highlight> measures the user&apos;s biometric information (fingerprint image data) (step S<highlight><bold>11</bold></highlight>). From the biometric information, biometric feature data extracting section <highlight><bold>202</bold></highlight> extracts to-be-verified biometric feature data (step S<highlight><bold>121</bold></highlight>). </paragraph>
<paragraph id="P-0221" lvl="0"><number>&lsqb;0221&rsqb;</number> The to-be-verified biometric feature data is encoded by data encryption section <highlight><bold>204</bold></highlight> using a public key for IC card <highlight><bold>300</bold></highlight> (step S<highlight><bold>131</bold></highlight>). The public key for IC card <highlight><bold>300</bold></highlight>, as described above, is read out from IC card-dedicated public key register section <highlight><bold>312</bold></highlight> of IC card <highlight><bold>300</bold></highlight>. Upon receipt of a specific command (predetermined signal), the IC card-dedicated public key register section <highlight><bold>312</bold></highlight> allows the public key to be read out therefrom, and the read-out public key is sent out from IC card <highlight><bold>300</bold></highlight> to IC card terminal <highlight><bold>200</bold></highlight>. Since this key for use in encryption, which is sent out from IC card <highlight><bold>300</bold></highlight> to IC card terminal <highlight><bold>200</bold></highlight>, is a public key, it does not matter if the key is sent out in response to a simple command. </paragraph>
<paragraph id="P-0222" lvl="0"><number>&lsqb;0222&rsqb;</number> After that, the to-be-verified biometric feature data encoded by data encryption section <highlight><bold>204</bold></highlight> using the public key is transferred/transmitted from transceiving interface <highlight><bold>205</bold></highlight> to IC card <highlight><bold>300</bold></highlight> (step S<highlight><bold>141</bold></highlight>). </paragraph>
<paragraph id="P-0223" lvl="0"><number>&lsqb;0223&rsqb;</number> When IC card <highlight><bold>300</bold></highlight> receives encoded data via transceiving interface <highlight><bold>301</bold></highlight>, data encryption/decryption section <highlight><bold>305</bold></highlight> restores the encoded data, using a valid secret key, into the original to-be-verified biometric feature data (step S<highlight><bold>151</bold></highlight>). Biometric feature data verifying section <highlight><bold>306</bold></highlight> first compares the to-be-verified biometric feature data with the valid biometric feature data (step S<highlight><bold>16</bold></highlight>). </paragraph>
<paragraph id="P-0224" lvl="0"><number>&lsqb;0224&rsqb;</number> As a result of the comparison, if the level of correlation (the degree of the matching) between the to-be-verified biometric feature data and the valid biometric feature data is below a predetermined value (NO route of step S<highlight><bold>17</bold></highlight>), the object person is judged not to be the authorized user of the IC card <highlight><bold>300</bold></highlight> (step S<highlight><bold>22</bold></highlight>), and a predetermined action (for example, locking the card) is taken. </paragraph>
<paragraph id="P-0225" lvl="0"><number>&lsqb;0225&rsqb;</number> Otherwise, if the level of correlation (the degree of a matching) between the to-be-verified biometric feature data and the valid biometric feature data is a predetermined value or higher (YES route of step S<highlight><bold>17</bold></highlight>), the object person is judged to be the authorized user of the IC card <highlight><bold>300</bold></highlight> (step S<highlight><bold>24</bold></highlight>). After that, IC card <highlight><bold>300</bold></highlight> transmits/receives data to/from IC card terminal <highlight><bold>200</bold></highlight> in accordance with a predetermined protocol. </paragraph>
<paragraph id="P-0226" lvl="0"><number>&lsqb;0226&rsqb;</number> In this manner, with user verification system <highlight><bold>500</bold></highlight> of the second embodiment, the to-be-verified biometric feature data is encoded by a public key system before the data is transmitted from IC card terminal <highlight><bold>200</bold></highlight> to IC card <highlight><bold>300</bold></highlight>, and all the data having been input to IC card <highlight><bold>300</bold></highlight> for use in user verification is decoded within IC card <highlight><bold>300</bold></highlight>. Accordingly, the present system prevents the inputting of falsified to-be-verified biometric feature data, so that fraud can be effectively prevented, thereby guaranteeing a high level of security. </paragraph>
<paragraph id="P-0227" lvl="0"><number>&lsqb;0227&rsqb;</number> Even if to-be-verified biometric feature data should be stolen, with a false IC card being inserted into the slot of IC card terminal <highlight><bold>300</bold></highlight>, it is still difficult to wrongfully use the stolen public key in another system, because the key is encoded by a public key system. It is thus possible to guarantee a high level of security, realizing secure user verification. </paragraph>
<paragraph id="P-0228" lvl="0"><number>&lsqb;0228&rsqb;</number> Further, in user verification system <highlight><bold>500</bold></highlight> of the second embodiment, when IC card <highlight><bold>300</bold></highlight> receives a predetermined signal (command) via transceiving interface <highlight><bold>301</bold></highlight>, the public key stored in IC card-dedicated public key register section <highlight><bold>312</bold></highlight> is read out and is then sent out to an external apparatus. Thus, it is possible for IC card terminal <highlight><bold>200</bold></highlight> to use the public key stored in IC card <highlight><bold>300</bold></highlight> in encryption, with no necessity for IC card terminal <highlight><bold>200</bold></highlight> to store any public key for IC card <highlight><bold>300</bold></highlight>. </paragraph>
<paragraph id="P-0229" lvl="0"><number>&lsqb;0229&rsqb;</number> The foregoing description of the first embodiment was made on a case where a portable electronic device is an IC card, and a data processing device is an IC card terminal. The present invention should by no means be limited to this, and it is also applicable to other technical fields, such as automatic teller machines (ATMs), credit card terminals, and PC access-managing systems. </paragraph>
<paragraph id="P-0230" lvl="0"><number>&lsqb;0230&rsqb;</number> &lsqb;2-1&rsqb; First Modified Example of the Second Embodiment: </paragraph>
<paragraph id="P-0231" lvl="0"><number>&lsqb;0231&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 11</cross-reference> is a block diagram showing a structure of a user verification system according to a first modification to the second embodiment of the present invention. Like reference numbers designate similar parts or elements throughout several views of the present embodiment, so their detailed description is omitted here. </paragraph>
<paragraph id="P-0232" lvl="0"><number>&lsqb;0232&rsqb;</number> As shown in <cross-reference target="DRAWINGS">FIG. 11</cross-reference>, in user verification system <highlight><bold>500</bold></highlight>A of the first modification of the second embodiment, the following functions are added to IC card terminal <highlight><bold>200</bold></highlight> and IC card <highlight><bold>300</bold></highlight> of user verification system <highlight><bold>500</bold></highlight> of <cross-reference target="DRAWINGS">FIG. 9</cross-reference>. </paragraph>
<paragraph id="P-0233" lvl="0"><number>&lsqb;0233&rsqb;</number> IC card terminal <highlight><bold>200</bold></highlight> has time stamp generating section <highlight><bold>203</bold></highlight> which generates a time stamp as the date and time biometric feature data extracting section <highlight><bold>202</bold></highlight> extracted the to-be-verified biometric feature data. Data encryption section <highlight><bold>204</bold></highlight> then encodes the to-be-verified biometric feature data, which has been extracted by biometric feature data extracting section <highlight><bold>202</bold></highlight>, along with the time stamp (the date and time the to-be-verified biometric feature data was extracted; herein after called the &ldquo;verification date-and-time&rdquo;) which has been generated by time stamp generating section <highlight><bold>203</bold></highlight>, using a public key for IC card <highlight><bold>300</bold></highlight>. Transceiving interface <highlight><bold>205</bold></highlight> sends out the to-be-verified biometric feature data, which has been encoded in a state that a time stamp is attached thereto. </paragraph>
<paragraph id="P-0234" lvl="0"><number>&lsqb;0234&rsqb;</number> IC card <highlight><bold>300</bold></highlight> has clock function section <highlight><bold>304</bold></highlight> and time stamp verifying section <highlight><bold>307</bold></highlight>. The functions of these clock function section <highlight><bold>304</bold></highlight> and time stamp verifying section <highlight><bold>307</bold></highlight> are, in practical use, realized by a CPU built in IC card <highlight><bold>300</bold></highlight>. </paragraph>
<paragraph id="P-0235" lvl="0"><number>&lsqb;0235&rsqb;</number> Clock function section <highlight><bold>304</bold></highlight> calculates the current time. Time stamp verifying section <highlight><bold>307</bold></highlight> compares the time stamp restored by data encryption/decryption section <highlight><bold>305</bold></highlight> with the current time calculated by clock function section <highlight><bold>304</bold></highlight>, and then evaluates whether or not the difference therebetween falls within a predetermined range (e.g., a predetermined value or smaller). </paragraph>
<paragraph id="P-0236" lvl="0"><number>&lsqb;0236&rsqb;</number> Referring now to the flowchart of <cross-reference target="DRAWINGS">FIG. 12, a</cross-reference> description will be made hereinbelow of an operation of user verification system <highlight><bold>500</bold></highlight>A of the first modification to the second embodiment. Like step numbers designate the same processing as in <cross-reference target="DRAWINGS">FIG. 2</cross-reference>, so their detailed description is omitted here. As is apparent from the comparison between <cross-reference target="DRAWINGS">FIG. 2</cross-reference> and <cross-reference target="DRAWINGS">FIG. 12</cross-reference>, the operation in the first modification of the second embodiment is nearly the same as the operation in the first embodiment, except that the outputting of the verification results (user number and PIN) (step S<highlight><bold>21</bold></highlight>) is not executed in the first modification of the second embodiment. </paragraph>
<paragraph id="P-0237" lvl="0"><number>&lsqb;0237&rsqb;</number> A user (object person to be verified) puts the IC card <highlight><bold>300</bold></highlight> into the slot of IC card terminal <highlight><bold>200</bold></highlight>, and then presses his fingertip to a fingerprint input screen, if his fingerprint image data is requested to be input as biometric information for use in user verification. </paragraph>
<paragraph id="P-0238" lvl="0"><number>&lsqb;0238&rsqb;</number> Biometric information measuring unit <highlight><bold>201</bold></highlight> of IC card terminal <highlight><bold>200</bold></highlight> measures the user&apos;s biometric information (fingerprint image data) (step S<highlight><bold>1</bold></highlight>). From the biometric information, biometric feature data extracting section <highlight><bold>202</bold></highlight> extracts to-be-verified biometric feature data, and time stamp generating section <highlight><bold>203</bold></highlight> generates the date and time (time stamp) the to-be-verified biometric feature data was extracted, and the time stamp is attached to the to-be-verified biometric feature data (step S<highlight><bold>12</bold></highlight>). </paragraph>
<paragraph id="P-0239" lvl="0"><number>&lsqb;0239&rsqb;</number> The to-be-verified biometric feature data, along with the time stamp attached thereto, is encoded by data encryption section <highlight><bold>204</bold></highlight> using a public key for IC card <highlight><bold>300</bold></highlight> (step S<highlight><bold>13</bold></highlight>), and is then transferred/transmitted from transceiving interface <highlight><bold>205</bold></highlight> to IC card <highlight><bold>300</bold></highlight> (step S<highlight><bold>14</bold></highlight>). </paragraph>
<paragraph id="P-0240" lvl="0"><number>&lsqb;0240&rsqb;</number> When IC card <highlight><bold>300</bold></highlight> receives encoded data via transceiving interface <highlight><bold>301</bold></highlight>, data encryption/decryption section <highlight><bold>305</bold></highlight> restores the encoded data, using a valid secret key, into the original to-be-verified biometric feature data and time stamp (step S<highlight><bold>15</bold></highlight>). Biometric feature data verifying section <highlight><bold>306</bold></highlight> first compares the to-be-verified biometric feature data with the valid biometric feature data (step S<highlight><bold>16</bold></highlight>). </paragraph>
<paragraph id="P-0241" lvl="0"><number>&lsqb;0241&rsqb;</number> As a result of the comparison, if the level of correlation (the degree of the matching) between the to-be-verified biometric feature data and the valid biometric feature data is below a predetermined value (NO route of step S<highlight><bold>17</bold></highlight>), the object person is judged not to be the authorized user of the IC card <highlight><bold>300</bold></highlight> (step S<highlight><bold>22</bold></highlight>), and a predetermined action (for example, locking the card) is taken. </paragraph>
<paragraph id="P-0242" lvl="0"><number>&lsqb;0242&rsqb;</number> Otherwise, if the level of correlation (the degree of the matching) between the to-be-verified biometric feature data and the valid biometric feature data is a predetermined value or higher (YES route of step S<highlight><bold>17</bold></highlight>), time stamp verifying section <highlight><bold>307</bold></highlight> compares the time stamp restored by data encryption/decryption section <highlight><bold>305</bold></highlight> with the current time calculated by clock function section <highlight><bold>304</bold></highlight> (step S<highlight><bold>18</bold></highlight>). </paragraph>
<paragraph id="P-0243" lvl="0"><number>&lsqb;0243&rsqb;</number> As a result of the comparison, if the difference between the time stamp (the extraction date-and-time) and the current time exceeds a predetermined value (NO route of step S<highlight><bold>19</bold></highlight>), the object person is judged not to be the authorized user of the IC card <highlight><bold>300</bold></highlight> (step S<highlight><bold>23</bold></highlight>) and a predetermined action (for example, locking the card) is taken. </paragraph>
<paragraph id="P-0244" lvl="0"><number>&lsqb;0244&rsqb;</number> Otherwise, if the difference between the time stamp (the extraction date-and-time) and the current time is a predetermined value or lower (YES route of step S<highlight><bold>19</bold></highlight>), the object person is judged to be the authorized user of the IC card <highlight><bold>300</bold></highlight> (step S<highlight><bold>20</bold></highlight>). After that, IC card <highlight><bold>300</bold></highlight> transmits/receives data to/from IC card terminal <highlight><bold>200</bold></highlight> in accordance with a predetermined protocol. </paragraph>
<paragraph id="P-0245" lvl="0"><number>&lsqb;0245&rsqb;</number> In this manner, user verification system <highlight><bold>500</bold></highlight>A of the first modification to the second embodiment guarantees similar effects and benefits to those already described in the second embodiment. Additionally, even if to-be-verified biometric feature data should be intercepted during its transmission from IC card terminal <highlight><bold>200</bold></highlight> to IC card <highlight><bold>300</bold></highlight>, and even if the stolen feature data should be utilized in a replay attack against IC card <highlight><bold>300</bold></highlight>, the difference between the time stamp (the extraction date-and-time) and the current time becomes significant. On the basis of such significant difference, it is possible to reject access attempts using such stolen to-be-verified biometric feature data, so that the security level of the system is significantly improved. </paragraph>
<paragraph id="P-0246" lvl="0"><number>&lsqb;0246&rsqb;</number> Hence, as described in the first embodiment, if the stolen to-be-verified biometric feature data is used in a replay attack against IC card <highlight><bold>300</bold></highlight>, the difference between the date and time the to-be-verified biometric feature data was extracted and the current time inevitably becomes significant. Taking advantage of this fact, user verification system <highlight><bold>500</bold></highlight>A of the first modification to the second embodiment compares the date and time the to-be-verified biometric feature data was extracted (time stamp) with the current time. Access attempts made by using the to-be-verified biometric feature data are rejected if the difference between the time stamp (extraction date-and-time) and the current time is significantly great. It is thus difficult to use the stolen to-be-verified biometric feature data in a replay attack, thereby guaranteeing a high level of security. </paragraph>
<paragraph id="P-0247" lvl="0"><number>&lsqb;0247&rsqb;</number> &lsqb;2-2&rsqb; Second Modified Example of the Second Embodiment: </paragraph>
<paragraph id="P-0248" lvl="0"><number>&lsqb;0248&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 13</cross-reference> is a block diagram showing a structure of a user verification system according to a second modification to the second embodiment of the present invention. Like reference numbers designate similar parts or elements throughout several views of the present embodiment, so their detailed description is omitted here. </paragraph>
<paragraph id="P-0249" lvl="0"><number>&lsqb;0249&rsqb;</number> As shown in <cross-reference target="DRAWINGS">FIG. 13</cross-reference>, in user verification system <highlight><bold>500</bold></highlight>B of the second modification of the second embodiment, the following functions are added to IC card <highlight><bold>300</bold></highlight> of user verification system <highlight><bold>500</bold></highlight>A of <cross-reference target="DRAWINGS">FIG. 11</cross-reference>. </paragraph>
<paragraph id="P-0250" lvl="0"><number>&lsqb;0250&rsqb;</number> In user verification system <highlight><bold>500</bold></highlight>B, some contrivance is made in the transmission of the verification results from IC card <highlight><bold>300</bold></highlight> to IC card terminal <highlight><bold>200</bold></highlight>, which transmission is carried out after the object user is judged to be the authorized user of IC card <highlight><bold>300</bold></highlight> (following step S<highlight><bold>20</bold></highlight>) in the foregoing user verification system <highlight><bold>500</bold></highlight>, <highlight><bold>500</bold></highlight>A. </paragraph>
<paragraph id="P-0251" lvl="0"><number>&lsqb;0251&rsqb;</number> IC card <highlight><bold>300</bold></highlight> of the second modification to the second embodiment thus includes user information register section <highlight><bold>309</bold></highlight> and verification log recording section <highlight><bold>310</bold></highlight>. These user information register section <highlight><bold>309</bold></highlight> and verification log recording section <highlight><bold>310</bold></highlight> are, in practical use, realized by a storage unit, such as a ROM and a RAM, built in IC card <highlight><bold>300</bold></highlight>. </paragraph>
<paragraph id="P-0252" lvl="0"><number>&lsqb;0252&rsqb;</number> Here, user information register section <highlight><bold>309</bold></highlight> has pre-stored user information such as an account number, a bank account number, and a user number. </paragraph>
<paragraph id="P-0253" lvl="0"><number>&lsqb;0253&rsqb;</number> As in the case of the first embodiment, verification log recording section <highlight><bold>310</bold></highlight> holds a verification log for a limited time period. The verification log contains the results of the verification carried out by biometric feature data verifying section <highlight><bold>302</bold></highlight> and time stamp verifying section <highlight><bold>307</bold></highlight>, and also the verification date-and-time obtained by clock function section <highlight><bold>304</bold></highlight>. </paragraph>
<paragraph id="P-0254" lvl="0"><number>&lsqb;0254&rsqb;</number> Data encryption/decryption section <highlight><bold>305</bold></highlight> of user verification system <highlight><bold>500</bold></highlight>B encodes the data to be transmitted to IC card terminal <highlight><bold>200</bold></highlight>, along with the time stamp (the verification date-and-time), using a valid secret key for IC card terminal <highlight><bold>200</bold></highlight> stored in secret key register section <highlight><bold>303</bold></highlight>. </paragraph>
<paragraph id="P-0255" lvl="0"><number>&lsqb;0255&rsqb;</number> Referring now to the flowchart of <cross-reference target="DRAWINGS">FIG. 14, a</cross-reference> description will be made hereinbelow of an operation of user verification system <highlight><bold>500</bold></highlight>B of the second modification to the second embodiment. </paragraph>
<paragraph id="P-0256" lvl="0"><number>&lsqb;0256&rsqb;</number> In user verification system <highlight><bold>500</bold></highlight>B, after the object user is judged to be the authorized user of IC card <highlight><bold>300</bold></highlight>, following the flowchart of <cross-reference target="DRAWINGS">FIG. 10</cross-reference> or <cross-reference target="DRAWINGS">FIG. 12</cross-reference>, that is, after step S<highlight><bold>20</bold></highlight>, the following are merged as verification data (verification results) (step S<highlight><bold>51</bold></highlight>) (1) user information, such as user number, stored in user information register section <highlight><bold>309</bold></highlight>; (2) the level of correlation between to-be-verified biometric feature data and valid biometric feature data, which correlation level has been obtained by biometric feature data verifying section <highlight><bold>306</bold></highlight>; and (3) the verification date-and-time obtained by clock function section <highlight><bold>304</bold></highlight>. </paragraph>
<paragraph id="P-0257" lvl="0"><number>&lsqb;0257&rsqb;</number> After that, data encryption/decryption section <highlight><bold>305</bold></highlight> encodes the verification data using the valid secret key stored in secret key register section <highlight><bold>303</bold></highlight> (step S<highlight><bold>52</bold></highlight>), and the encoded data is then sent out from transceiving interface <highlight><bold>301</bold></highlight> to IC card terminal <highlight><bold>200</bold></highlight> (step S<highlight><bold>53</bold></highlight>). </paragraph>
<paragraph id="P-0258" lvl="0"><number>&lsqb;0258&rsqb;</number> Also in the second embodiment, verification log recording section <highlight><bold>310</bold></highlight> of IC card <highlight><bold>300</bold></highlight> stores a verification log for a predetermined time period. The verification log involves the verification results (&ldquo;OK&rdquo;/&ldquo;NG&rdquo;) obtained by biometric feature data verifying section <highlight><bold>306</bold></highlight> and time stamp verifying section <highlight><bold>307</bold></highlight>, and the verification date-and-time obtained by clock function section <highlight><bold>304</bold></highlight>. As such a verification log, the verification data which has been generated (merged) in step S<highlight><bold>51</bold></highlight> may be stored in verification log recording section <highlight><bold>310</bold></highlight>. </paragraph>
<paragraph id="P-0259" lvl="0"><number>&lsqb;0259&rsqb;</number> In this manner, user verification system <highlight><bold>500</bold></highlight>B of the second modification of the second embodiment guarantees similar effects and benefits to those already described in the first modification of the second embodiment. Additionally, the verification result to be provided is not a simple &ldquo;OK&rdquo; or &ldquo;NG&rdquo; signal, but the following are provided after their being encoded with the valid secret key stored within IC card <highlight><bold>300</bold></highlight>: user information; the level of correlation between to-be-verified biometric feature data and valid biometric feature data; and the verification date-and-time. The encoded data is sent out to IC card terminal <highlight><bold>200</bold></highlight> via transceiving interface <highlight><bold>301</bold></highlight>. </paragraph>
<paragraph id="P-0260" lvl="0"><number>&lsqb;0260&rsqb;</number> In other words, the verification result to be sent out is the information more complicated than the simple &ldquo;OK&rdquo;/&ldquo;NG&rdquo; signal, and the information is encoded using the secret key before it is sent out. It thus becomes difficult to tamper with such complicated information, in comparison with the simple &ldquo;OK&rdquo;/&ldquo;NG&rdquo; signal. In addition, the issuer of the verification result can be certified. Further, the verification date-and-time (time stamp) is inserted into the verification result, making it difficult to use the verification result in another system. It is thus possible to surely prevent the result of verification of biometric feature data from being tampered with or falsified. </paragraph>
<paragraph id="P-0261" lvl="0"><number>&lsqb;0261&rsqb;</number> Accordingly, even when the result of the verification of biometric feature data, obtained within IC card <highlight><bold>300</bold></highlight>, is sent out to an external apparatus, a high level of security can be guaranteed, thus realizing safe user verification. At that time, since the level of correlation between the to-be-verified biometric feature data and the valid biometric feature data is provided as a verification result, it is possible to manage the record of with what degree of certainty the user authentication was established. </paragraph>
<paragraph id="P-0262" lvl="0"><number>&lsqb;0262&rsqb;</number> Further, in user verification system SOOB, verification log recording section <highlight><bold>310</bold></highlight> of IC card <highlight><bold>300</bold></highlight> stores the verification results (OK/NG) obtained by biometric feature data verifying section <highlight><bold>306</bold></highlight> and time stamp verifying section <highlight><bold>307</bold></highlight>, and it also holds the result of the merging in step S<highlight><bold>51</bold></highlight> for a predetermined time period. Thus, a record of the user verification performed is stored in IC card <highlight><bold>300</bold></highlight>. </paragraph>
<paragraph id="P-0263" lvl="0"><number>&lsqb;0263&rsqb;</number> &lsqb;2-3&rsqb; Third Modified Example of the Second Embodiment: </paragraph>
<paragraph id="P-0264" lvl="0"><number>&lsqb;0264&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 15</cross-reference> is a block diagram showing a structure of a user verification system according to a third modification to the second embodiment of the present invention. Like reference numbers designate similar parts or elements throughout several views of the present embodiment, so their detailed description is omitted here. </paragraph>
<paragraph id="P-0265" lvl="0"><number>&lsqb;0265&rsqb;</number> As shown in <cross-reference target="DRAWINGS">FIG. 15</cross-reference>, in user verification system <highlight><bold>500</bold></highlight>C of the third modification to the second embodiment, the following functions are added to IC card terminal <highlight><bold>200</bold></highlight> and IC card <highlight><bold>300</bold></highlight> of user verification system <highlight><bold>500</bold></highlight>B of <cross-reference target="DRAWINGS">FIG. 13</cross-reference>. </paragraph>
<paragraph id="P-0266" lvl="0"><number>&lsqb;0266&rsqb;</number> More precisely, IC card terminal <highlight><bold>200</bold></highlight> includes electronic billing section <highlight><bold>207</bold></highlight> and message digest creating section <highlight><bold>208</bold></highlight>. </paragraph>
<paragraph id="P-0267" lvl="0"><number>&lsqb;0267&rsqb;</number> Electronic billing section <highlight><bold>207</bold></highlight> creates an electronic bill (transfer data) to be attached to to-be-verified biometric feature data, when the to-be-verified biometric feature data is sent out to IC card <highlight><bold>300</bold></highlight>. Message digest creating section <highlight><bold>208</bold></highlight> generates a message digest, a value which is obtained by inputting the electronic bill (transfer data) created by electronic billing section <highlight><bold>207</bold></highlight> into a predetermined one-way function. </paragraph>
<paragraph id="P-0268" lvl="0"><number>&lsqb;0268&rsqb;</number> The message digest, which has been created by message digest creating section <highlight><bold>208</bold></highlight>, is encoded by data encryption section <highlight><bold>204</bold></highlight> together with the to-be-verified biometric feature data, and is then transmitted from transceiving interface <highlight><bold>205</bold></highlight> to IC card <highlight><bold>300</bold></highlight>. </paragraph>
<paragraph id="P-0269" lvl="0"><number>&lsqb;0269&rsqb;</number> Further, IC card <highlight><bold>300</bold></highlight> has a function of message digest receiving section <highlight><bold>316</bold></highlight>. Message digest receiving section <highlight><bold>316</bold></highlight> receives a message digest that is restored by data encryption/decryption section <highlight><bold>305</bold></highlight>. </paragraph>
<paragraph id="P-0270" lvl="0"><number>&lsqb;0270&rsqb;</number> Referring now to the flowchart of <cross-reference target="DRAWINGS">FIG. 16, a</cross-reference> description will be made hereinbelow of an operation of user verification system <highlight><bold>500</bold></highlight>B of the third modification to the second embodiment. </paragraph>
<paragraph id="P-0271" lvl="0"><number>&lsqb;0271&rsqb;</number> In user verification system <highlight><bold>500</bold></highlight>C, after an object user is verified following the flowchart of <cross-reference target="DRAWINGS">FIG. 10</cross-reference> or <cross-reference target="DRAWINGS">FIG. 12</cross-reference>, that is, after step S<highlight><bold>20</bold></highlight>, the following are merged as verification data (verification results) (step S<highlight><bold>61</bold></highlight>): (1) user information, such as user number, stored in user information register section <highlight><bold>309</bold></highlight>; (2) the level of correlation between to-be-verified biometric feature data and valid biometric feature data, which correlation level has been obtained by biometric feature data verifying section <highlight><bold>306</bold></highlight>; (3) verification date-and-time obtained by clock function section <highlight><bold>304</bold></highlight>; and (4) a message digest received by message digest receiving section <highlight><bold>316</bold></highlight>. </paragraph>
<paragraph id="P-0272" lvl="0"><number>&lsqb;0272&rsqb;</number> After that, data encryption/decryption section <highlight><bold>305</bold></highlight> encodes the verification data using the valid secret key stored in secret key register section <highlight><bold>303</bold></highlight> (step S<highlight><bold>62</bold></highlight>), and the encoded data is then sent out from transceiving interface <highlight><bold>301</bold></highlight> to IC card terminal <highlight><bold>200</bold></highlight> (step S<highlight><bold>63</bold></highlight>). </paragraph>
<paragraph id="P-0273" lvl="0"><number>&lsqb;0273&rsqb;</number> Here, in step S<highlight><bold>61</bold></highlight>, the foregoing data of (1) through (4) may further be merged with another message digest newly generated within IC card <highlight><bold>300</bold></highlight> and with the date and time the transaction permission was given to this message digest. </paragraph>
<paragraph id="P-0274" lvl="0"><number>&lsqb;0274&rsqb;</number> In this manner, user verification system <highlight><bold>500</bold></highlight>C of the third modification of the second embodiment guarantees similar effects and benefits to those already described in the second modification of the second embodiment. Additionally, since a message digest is transmitted to IC card terminal <highlight><bold>200</bold></highlight> as a verification result, it is possible to manage a record of which transaction the verification was made for. </paragraph>
<paragraph id="P-0275" lvl="0"><number>&lsqb;0275&rsqb;</number> In step S<highlight><bold>61</bold></highlight>, the foregoing data of (1) through (4) may further be merged with another message digest newly generated within IC card <highlight><bold>300</bold></highlight> and with the date and time the transaction permission was given to this message digest. In this case, it is possible to reduce the possibility with further reliability that verification results are tampered with or falsified. </paragraph>
<paragraph id="P-0276" lvl="0"><number>&lsqb;0276&rsqb;</number> &lsqb;3&rsqb; Other Modifications: </paragraph>
<paragraph id="P-0277" lvl="0"><number>&lsqb;0277&rsqb;</number> The second embodiment, as in the third modification of the first embodiment, may include verification counter section <highlight><bold>313</bold></highlight> and IC card lock section <highlight><bold>314</bold></highlight>. If biometric feature data verifying section <highlight><bold>306</bold></highlight> obtains the comparison result a predetermined times consecutively that a matching condition between the to-be-verified biometric feature data and the valid biometric feature data is not satisfied, IC card lock section <highlight><bold>314</bold></highlight> locks IC card <highlight><bold>300</bold></highlight> to prohibit the inputting of biometric feature data to IC card <highlight><bold>300</bold></highlight>, thereby preventing unauthorized accessing with reliability. </paragraph>
<paragraph id="P-0278" lvl="0"><number>&lsqb;0278&rsqb;</number> In the foregoing embodiments, the description was made on the cases where a portable electronic device is an IC card. The present invention should by no means be limited to the above-illustrated embodiments, and various changes or modifications may be suggested without departing from the gist of the invention. For example, any other type of portable electronic device (optical cards, radio communication cards, and so on) is also applicable which has a built-in storage unit and CPU, and which has a function for performing biometric user verification/authentication. With such an electronic device, like effects and benefits to those which have already been described above are also guaranteed. </paragraph>
</section>
<section>
<heading lvl="1">INDUSTRIAL APPLICABILITY </heading>
<paragraph id="P-0279" lvl="0"><number>&lsqb;0279&rsqb;</number> According to the present invention, user verification with biometric feature data is performed on a portable electronic device. If the user is judged to be the authorized user of the portable electronic device, a PIN is transmitted from the portable electronic device to a management device. In this manner, since PIN verification is associated with biometric user verification utilizing biometric information, which is free of being stolen or faked, it is possible to surely prevent the leakage and the theft of the PIN, so that a high level of security can be guaranteed, thereby realizing secure user verification. </paragraph>
<paragraph id="P-0280" lvl="0"><number>&lsqb;0280&rsqb;</number> Consequently, the present invention is suitable for use in a system where a PIN should be input as verification, such as a debit card system, and the usefulness of the present invention is extremely high. </paragraph>
</section>
</detailed-description>
</subdoc-description>
<subdoc-claims>
<heading lvl="1">What is claimed is: </heading>
<claim id="CLM-00001">
<claim-text><highlight><bold>1</bold></highlight>. A user verification system, comprising: 
<claim-text>a portable electronic device (<highlight><bold>300</bold></highlight>), which is adapted to be carried by a user; </claim-text>
<claim-text>a data processing device (<highlight><bold>200</bold></highlight>) for directly accessing such portable electronic device (<highlight><bold>300</bold></highlight>) which is temporarily installed therein; and </claim-text>
<claim-text>a management device (<highlight><bold>400</bold></highlight>) which accesses said portable electronic device (<highlight><bold>300</bold></highlight>) via said data processing device (<highlight><bold>200</bold></highlight>) and verifies said user utilizing a personal identification number (PIN), </claim-text>
<claim-text>said data processing device (<highlight><bold>200</bold></highlight>) including: 
<claim-text>a biometric information measuring unit (<highlight><bold>201</bold></highlight>) for measuring biometric information of said user; </claim-text>
<claim-text>a biometric feature data extracting section (<highlight><bold>202</bold></highlight>) for extracting to-be-verified biometric feature data from said biometric information, which has been measured by biometric information measuring unit (<highlight><bold>201</bold></highlight>); and </claim-text>
<claim-text>a first transceiving interface (<highlight><bold>205</bold></highlight>) for transmitting/receiving data to/from said portable electronic device (<highlight><bold>300</bold></highlight>) and said management device (<highlight><bold>400</bold></highlight>), </claim-text>
</claim-text>
<claim-text>said portable electronic device (<highlight><bold>300</bold></highlight>) including: 
<claim-text>a biometric feature data register section (<highlight><bold>302</bold></highlight>) having pre-stored valid biometric feature data of an authorized user of said portable electronic device (<highlight><bold>300</bold></highlight>); </claim-text>
<claim-text>a second transceiving interface (<highlight><bold>301</bold></highlight>) for transmitting/receiving data to/from said data processing device (<highlight><bold>200</bold></highlight>); </claim-text>
<claim-text>a biometric feature data verifying section (<highlight><bold>306</bold></highlight>) for comparing to-be-verified biometric feature data, which is received from an external device via said second transceiving interface (<highlight><bold>301</bold></highlight>), with said valid biometric feature data; and </claim-text>
<claim-text>a PIN register section (<highlight><bold>308</bold></highlight>) having a pre-stored PIN of said authorized user of said portable electronic device (<highlight><bold>300</bold></highlight>), </claim-text>
</claim-text>
<claim-text>said to-be-verified biometric feature data being transmitted from said first transceiving interface (<highlight><bold>205</bold></highlight>) of said data processing device (<highlight><bold>200</bold></highlight>) to said portable electronic device (<highlight><bold>300</bold></highlight>), </claim-text>
<claim-text>said biometric feature data verifying section (<highlight><bold>306</bold></highlight>) of said portable electronic device (<highlight><bold>300</bold></highlight>) comparing said to-be-verified biometric feature data, which has been received via said second transceiving interface (<highlight><bold>301</bold></highlight>), with said valid biometric feature data, and </claim-text>
<claim-text>as the result of the comparison, if said to-be-verified biometric feature data matches said valid biometric feature data in terms of a predetermined matching condition, said PIN being transmitted from said second transceiving interface (<highlight><bold>301</bold></highlight>) of said portable electronic device (<highlight><bold>300</bold></highlight>) to said management device (<highlight><bold>400</bold></highlight>) via said first transceiving interface (<highlight><bold>205</bold></highlight>) of said data processing device (<highlight><bold>200</bold></highlight>). </claim-text>
</claim-text>
</claim>
<claim id="CLM-00002">
<claim-text><highlight><bold>2</bold></highlight>. A user verification system according to <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, 
<claim-text>wherein said data processing device (<highlight><bold>200</bold></highlight>) further includes a first encryption section (<highlight><bold>204</bold></highlight>) for encoding said to-be-verified biometric feature data with a public key, </claim-text>
<claim-text>wherein said portable electronic device (<highlight><bold>300</bold></highlight>) further includes: 
<claim-text>a secret key register section (<highlight><bold>303</bold></highlight>) having a pre-stored valid secret key corresponding to said public key; and </claim-text>
<claim-text>a decryption section (<highlight><bold>305</bold></highlight>) for decoding encoded data, which is received from an external device via said second transceiving interface (<highlight><bold>301</bold></highlight>), with said valid secret key, </claim-text>
</claim-text>
<claim-text>wherein said to-be-verified biometric feature data encoded by said first encryption section (<highlight><bold>204</bold></highlight>) is transmitted from said first transceiving interface (<highlight><bold>205</bold></highlight>) to said portable electronic device (<highlight><bold>300</bold></highlight>), as said encoded data, and </claim-text>
<claim-text>wherein said decryption section (<highlight><bold>305</bold></highlight>) decodes said encoded data, which has been received via said second transceiving interface (<highlight><bold>301</bold></highlight>), into the original to-be-verified biometric feature data, which is then compared with said valid biometric feature data by said biometric feature data verifying section (<highlight><bold>306</bold></highlight>). </claim-text>
</claim-text>
</claim>
<claim id="CLM-00003">
<claim-text><highlight><bold>3</bold></highlight>. A user verification system according to <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein said portable electronic device (<highlight><bold>300</bold></highlight>) further includes: 
<claim-text>a made-for-management-device public key register section (<highlight><bold>311</bold></highlight>) having a pre-stored public key dedicated to said management device (<highlight><bold>400</bold></highlight>); and </claim-text>
<claim-text>a second encryption section (<highlight><bold>305</bold></highlight>) for encoding said PIN with said made-for-management-device public key before said PIN is sent out to said management device (<highlight><bold>400</bold></highlight>). </claim-text>
</claim-text>
</claim>
<claim id="CLM-00004">
<claim-text><highlight><bold>4</bold></highlight>. A user verification system according to <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, 
<claim-text>wherein said portable electronic device (<highlight><bold>300</bold></highlight>) further includes a recording unit provided on its surface, said recording unit storing magnetic data on information for use in processing carried out by said management device (<highlight><bold>400</bold></highlight>), </claim-text>
<claim-text>wherein said data processing device (<highlight><bold>200</bold></highlight>) further includes a magnetic data read-out unit (<highlight><bold>206</bold></highlight>) for reading out said magnetic data stored in said recording unit, and </claim-text>
<claim-text>wherein said magnetic data, which has been readout by said magnetic data read-out unit (<highlight><bold>206</bold></highlight>), is sent out, together with said PIN, from said first transceiving interface (<highlight><bold>205</bold></highlight>) to said management device (<highlight><bold>400</bold></highlight>). </claim-text>
</claim-text>
</claim>
<claim id="CLM-00005">
<claim-text><highlight><bold>5</bold></highlight>. A user verification system according to <dependent-claim-reference depends_on="CLM-00003">claim 3</dependent-claim-reference>, 
<claim-text>wherein said data processing device (<highlight><bold>200</bold></highlight>) further includes a time stamp generating section (<highlight><bold>203</bold></highlight>) for generating a time stamp as the date and time when said biometric feature data extracting section (<highlight><bold>202</bold></highlight>) has extracted said to-be-verified biometric feature data, </claim-text>
<claim-text>wherein, said time stamp is encoded, together with said to-be-verified biometric feature data, by said first encryption section (<highlight><bold>204</bold></highlight>), and the encoded time stamp is then sent out from said first transceiving interface (<highlight><bold>205</bold></highlight>) to said portable electronic device (<highlight><bold>300</bold></highlight>), </claim-text>
<claim-text>wherein said portable electronic device (<highlight><bold>300</bold></highlight>) further includes: 
<claim-text>a clock function section (<highlight><bold>304</bold></highlight>) for calculating the current time; and </claim-text>
<claim-text>a time stamp verifying section (<highlight><bold>307</bold></highlight>) for comparing the original time stamp, which has been restored by said decryption section (<highlight><bold>305</bold></highlight>), with said current time, which has been calculated by said clock function section (<highlight><bold>304</bold></highlight>), and </claim-text>
</claim-text>
<claim-text>wherein, if it is found, as the comparison result by said biometric feature data verifying section (<highlight><bold>306</bold></highlight>), that said to-be-verified biometric feature data matches said valid biometric feature data in terms of a predetermined matching condition, and also if it is found, as the comparison result by said time stamp verifying section (<highlight><bold>307</bold></highlight>), that a difference between said time stamp and said current time falls within a predetermined range, said user is identified as said authorized user of said portable electronic device (<highlight><bold>300</bold></highlight>). </claim-text>
</claim-text>
</claim>
<claim id="CLM-00006">
<claim-text><highlight><bold>6</bold></highlight>. A user verification system according to <dependent-claim-reference depends_on="CLM-00005">claim 5</dependent-claim-reference>, wherein if said user is identified as said authorized user of said portable electronic device (<highlight><bold>300</bold></highlight>), as the comparison result by said biometric feature data verifying section (<highlight><bold>306</bold></highlight>) and said time stamp verifying section (<highlight><bold>307</bold></highlight>), said second encryption section (<highlight><bold>305</bold></highlight>) encodes both said PIN and the date and time of the comparison performed, which date and time is obtained by said clock function section (<highlight><bold>304</bold></highlight>), and the encoded PIN and the encoded date and time of the comparison are then sent out from said second transceiving interface (<highlight><bold>301</bold></highlight>) of said portable electronic device (<highlight><bold>300</bold></highlight>) to said management device (<highlight><bold>400</bold></highlight>) via said first transceiving interface (<highlight><bold>205</bold></highlight>) of said data processing device (<highlight><bold>200</bold></highlight>). </claim-text>
</claim>
<claim id="CLM-00007">
<claim-text><highlight><bold>7</bold></highlight>. A user verification system according to <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein upon receipt of a predetermined signal via said second transceiving interface (<highlight><bold>301</bold></highlight>), said portable electronic device (<highlight><bold>300</bold></highlight>) transmits public key information of said authorized user, which public key information is registered in said portable electronic device (<highlight><bold>300</bold></highlight>), from said second transceiving interface (<highlight><bold>301</bold></highlight>) to an external device. </claim-text>
</claim>
<claim id="CLM-00008">
<claim-text><highlight><bold>8</bold></highlight>. A user verification system according to <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, further comprising a lock function section (<highlight><bold>314</bold></highlight>) which is operable to prohibit input of biometric feature information to said portable electronic device (<highlight><bold>300</bold></highlight>), if the evaluation is made a predetermined number of times successively, as a result of the comparison by said feature data verifying section (<highlight><bold>306</bold></highlight>) of said portable electronic device (<highlight><bold>300</bold></highlight>), that said to-be-verified biometric feature data never matches said valid biometric feature data in terms of said predetermined matching condition. </claim-text>
</claim>
<claim id="CLM-00009">
<claim-text><highlight><bold>9</bold></highlight>. A user verification system according to <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein said portable electronic device (<highlight><bold>300</bold></highlight>) further includes a management log recording section (<highlight><bold>317</bold></highlight>) storing a management log of said PIN, said management log accumulating the dates and times when said PIN has been transmitted, or the descriptions of transactions performed, or both of these. </claim-text>
</claim>
<claim id="CLM-00010">
<claim-text><highlight><bold>10</bold></highlight>. A portable electronic device with a user verification function utilizing biometric information, which portable electronic device receives/transmits data from/to a management device (<highlight><bold>400</bold></highlight>) that uses a personal identification number (PIN) to verify a user, said portable electronic device comprising: 
<claim-text>a biometric feature data register section (<highlight><bold>302</bold></highlight>) having pre-stored valid biometric feature data of an authorized user of said portable electronic device (<highlight><bold>300</bold></highlight>); </claim-text>
<claim-text>a transceiving interface (<highlight><bold>301</bold></highlight>) for transmitting/receiving data to/from an external device; 
<claim-text>a biometric feature data verifying section (<highlight><bold>306</bold></highlight>) for comparing to-be-verified biometric feature data, which is received from an external device via said transceiving interface, with said valid biometric feature data; and </claim-text>
<claim-text>a PIN register section (<highlight><bold>308</bold></highlight>) having a pre-stored PIN of said authorized user of said portable electronic device (<highlight><bold>300</bold></highlight>), </claim-text>
</claim-text>
<claim-text>said biometric feature data verifying section (<highlight><bold>306</bold></highlight>) comparing said to-be-verified biometric feature data, which has been received via said transceiving interface (<highlight><bold>301</bold></highlight>), with said valid biometric feature data, and </claim-text>
<claim-text>as the result of the comparison, if said to-be-verified biometric feature data matches said valid biometric feature data in terms of a predetermined matching condition, said PIN being transmitted from said transceiving interface (<highlight><bold>301</bold></highlight>) to said management device (<highlight><bold>400</bold></highlight>). </claim-text>
</claim-text>
</claim>
<claim id="CLM-00011">
<claim-text><highlight><bold>11</bold></highlight>. A portable electronic device according to <dependent-claim-reference depends_on="CLM-00011">claim 10</dependent-claim-reference>, further comprising: 
<claim-text>a secret key register section (<highlight><bold>303</bold></highlight>) having a pre-stored valid secret key corresponding to said public key; and </claim-text>
<claim-text>a decryption section (<highlight><bold>305</bold></highlight>) for decoding encoded data, which is received from an external device via said second transceiving interface (<highlight><bold>301</bold></highlight>), with said valid secret key, </claim-text>
<claim-text>said decryption section (<highlight><bold>305</bold></highlight>) decoding said encoded data, which has been received via said transceiving interface (<highlight><bold>301</bold></highlight>), into the original to-be-verified biometric feature data, and </claim-text>
<claim-text>said biometric feature data verifying section (<highlight><bold>306</bold></highlight>) comparing the original to-be-verified biometric feature data, which has been restored by said decryption section (<highlight><bold>305</bold></highlight>), with said valid biometric feature data. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00012">
<claim-text><highlight><bold>12</bold></highlight>. A portable electronic device according to <dependent-claim-reference depends_on="CLM-00011">claim 10</dependent-claim-reference>, further comprising: 
<claim-text>a made-for-management-device public key register section (<highlight><bold>311</bold></highlight>) having a pre-stored public key dedicated to said management device (<highlight><bold>400</bold></highlight>); and </claim-text>
<claim-text>an encryption section (<highlight><bold>305</bold></highlight>) for encoding said PIN with said made-for-management-device public key before said PIN is sent out to said management device (<highlight><bold>400</bold></highlight>). </claim-text>
</claim-text>
</claim>
<claim id="CLM-00013">
<claim-text><highlight><bold>13</bold></highlight>. A portable electronic device according to <dependent-claim-reference depends_on="CLM-00011">claim 10</dependent-claim-reference>, further comprising a recording unit provided on its surface, said recording unit storing magnetic data on information for use in processing which is carried out by said management device (<highlight><bold>400</bold></highlight>). </claim-text>
</claim>
<claim id="CLM-00014">
<claim-text><highlight><bold>14</bold></highlight>. A portable electronic device according to <dependent-claim-reference depends_on="CLM-00011">claim 12</dependent-claim-reference>, further comprising: 
<claim-text>a clock function section (<highlight><bold>304</bold></highlight>) for calculating the current time; and 
<claim-text>a time stamp verifying section (<highlight><bold>307</bold></highlight>) for comparing a time stamp, if any, attached to the original to-be-verified biometric feature data restored by said decryption section (<highlight><bold>305</bold></highlight>), with said current time, which has been calculated by said clock function section (<highlight><bold>304</bold></highlight>), said time stamp indicating the date and time when said to-be-verified biometric feature data has been extracted, </claim-text>
</claim-text>
<claim-text>if it is found, as the comparison result by said biometric feature data verifying section (<highlight><bold>306</bold></highlight>), that said to-be-verified biometric feature data matches said valid biometric feature data in terms of a predetermined matching condition, and also if it is found, as the comparison result by said time stamp verifying section (<highlight><bold>307</bold></highlight>), that a difference between said time stamp and said current time falls within a predetermined range, said user being identified as said authorized user of said portable electronic device (<highlight><bold>300</bold></highlight>). </claim-text>
</claim-text>
</claim>
<claim id="CLM-00015">
<claim-text><highlight><bold>15</bold></highlight>. A portable electronic device according to <dependent-claim-reference depends_on="CLM-00011">claim 14</dependent-claim-reference>, wherein if said user is identified as said authorized user of said portable electronic device (<highlight><bold>300</bold></highlight>), as the comparison result by said biometric feature data verifying section (<highlight><bold>306</bold></highlight>) and said time stamp verifying section (<highlight><bold>307</bold></highlight>), said encryption section (<highlight><bold>305</bold></highlight>) encodes both said PIN and the date and time of the comparison performed, which date and time is obtained by said clock function section (<highlight><bold>304</bold></highlight>), and the encoded PIN and the encoded date and time of the comparison are then sent out from said transceiving interface (<highlight><bold>301</bold></highlight>) to said management device (<highlight><bold>400</bold></highlight>). </claim-text>
</claim>
<claim id="CLM-00016">
<claim-text><highlight><bold>16</bold></highlight>. A portable electronic device according to <dependent-claim-reference depends_on="CLM-00011">claim 10</dependent-claim-reference>, wherein upon receipt of a predetermined signal via said transceiving interface (<highlight><bold>301</bold></highlight>), said portable electronic device (<highlight><bold>300</bold></highlight>) transmits public key information of said authorized user, which public key information is registered in said portable electronic device (<highlight><bold>300</bold></highlight>), from said transceiving interface (<highlight><bold>301</bold></highlight>) to an external device. </claim-text>
</claim>
<claim id="CLM-00017">
<claim-text><highlight><bold>17</bold></highlight>. A portable electronic device according to <dependent-claim-reference depends_on="CLM-00011">claim 10</dependent-claim-reference>, further comprising a lock function section (<highlight><bold>314</bold></highlight>) which is operable to prohibit input of biometric feature information to said portable electronic device (<highlight><bold>300</bold></highlight>), if the evaluation is made a predetermined number of times successively, as a result of the comparison by said feature data verifying section (<highlight><bold>306</bold></highlight>), that said to-be-verified biometric feature data never matches said valid biometric feature data in terms of said predetermined matching condition. </claim-text>
</claim>
<claim id="CLM-00018">
<claim-text><highlight><bold>18</bold></highlight>. A portable electronic device according to <dependent-claim-reference depends_on="CLM-00011">claim 10</dependent-claim-reference>, further comprising a management log recording section (<highlight><bold>317</bold></highlight>) storing a management log of said PIN, said management log accumulating the dates and times when said PIN has been transmitted, or descriptions of transactions performed, or both of these. </claim-text>
</claim>
<claim id="CLM-00019">
<claim-text><highlight><bold>19</bold></highlight>. A user verification system, comprising: 
<claim-text>a portable electronic device (<highlight><bold>300</bold></highlight>), which is adapted to be carried by a user; and </claim-text>
<claim-text>a data processing device (<highlight><bold>200</bold></highlight>) for directly accessing such portable electronic device (<highlight><bold>300</bold></highlight>) which is temporarily installed therein, </claim-text>
<claim-text>said data processing device (<highlight><bold>200</bold></highlight>) including: 
<claim-text>a biometric information measuring unit (<highlight><bold>201</bold></highlight>) for measuring biometric information of said user; </claim-text>
<claim-text>a biometric feature data extracting section (<highlight><bold>202</bold></highlight>) for extracting to-be-verified biometric feature data from said biometric information, which has been measured by biometric information measuring unit (<highlight><bold>201</bold></highlight>); </claim-text>
<claim-text>a first encryption section (<highlight><bold>204</bold></highlight>) for encoding said to-be-verified biometric feature data with a public key; and </claim-text>
<claim-text>a first transceiving interface (<highlight><bold>205</bold></highlight>) for transmitting/receiving data to/from said portable electronic device (<highlight><bold>300</bold></highlight>), </claim-text>
</claim-text>
<claim-text>said portable electronic device (<highlight><bold>300</bold></highlight>) including: 
<claim-text>a biometric feature data register section (<highlight><bold>302</bold></highlight>) having pre-stored valid biometric feature data of an authorized user of said portable electronic device (<highlight><bold>300</bold></highlight>); </claim-text>
<claim-text>a second transceiving interface (<highlight><bold>301</bold></highlight>) for transmitting/receiving data to/from said data processing device (<highlight><bold>200</bold></highlight>); </claim-text>
<claim-text>a biometric feature data verifying section (<highlight><bold>306</bold></highlight>) for comparing to-be-verified biometric feature data, which is received from an external device via said second transceiving interface (<highlight><bold>301</bold></highlight>), with said valid biometric feature data; </claim-text>
<claim-text>a secret key register section (<highlight><bold>303</bold></highlight>) having a pre-stored valid secret key corresponding to said public key; and </claim-text>
<claim-text>a decryption section (<highlight><bold>305</bold></highlight>) for decoding encoded data, which has been encoded with said public key, with said valid secret key, </claim-text>
</claim-text>
<claim-text>the encoded to-be-verified biometric feature data, which has been encoded by said first encryption section (<highlight><bold>204</bold></highlight>), being transmitted from said first transceiving interface (<highlight><bold>205</bold></highlight>) to said portable electronic device (<highlight><bold>300</bold></highlight>), </claim-text>
<claim-text>said decryption section (<highlight><bold>305</bold></highlight>) decoding said encoded data, which has been received via said second transceiving interface (<highlight><bold>301</bold></highlight>), into the original to-be-verified biometric feature data, and </claim-text>
<claim-text>said biometric feature data verifying section (<highlight><bold>306</bold></highlight>) comparing the original to-be-verified biometric feature data with said valid biometric feature data. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00020">
<claim-text><highlight><bold>20</bold></highlight>. A user verification system according to <dependent-claim-reference depends_on="CLM-00011">claim 19</dependent-claim-reference>, 
<claim-text>wherein said data processing device (<highlight><bold>200</bold></highlight>) further includes a time stamp generating section (<highlight><bold>203</bold></highlight>) for generating a time stamp as the date and time when said biometric feature data extracting section (<highlight><bold>202</bold></highlight>) has extracted said to-be-verified biometric feature data, </claim-text>
<claim-text>wherein, said time stamp is encoded, together with said to-be-verified biometric feature data, by said first encryption section (<highlight><bold>204</bold></highlight>), and the encoded time stamp is then sent out from said first transceiving interface (<highlight><bold>205</bold></highlight>) to said portable electronic device (<highlight><bold>300</bold></highlight>), </claim-text>
<claim-text>wherein said portable electronic device (<highlight><bold>300</bold></highlight>) further includes: 
<claim-text>a clock function section (<highlight><bold>304</bold></highlight>) for calculating the current time; and </claim-text>
<claim-text>a time stamp verifying section (<highlight><bold>307</bold></highlight>) for comparing the original time stamp, which has been restored by said decryption section (<highlight><bold>305</bold></highlight>), with said current time, which has been calculated by said clock function section (<highlight><bold>304</bold></highlight>), and </claim-text>
</claim-text>
<claim-text>wherein, if it is found, as the comparison result by said biometric feature data verifying section (<highlight><bold>306</bold></highlight>), that said to-be-verified biometric feature data matches said valid biometric feature data in terms of a predetermined matching condition, and also if it is found, as the comparison result by said time stamp verifying section (<highlight><bold>307</bold></highlight>), that a difference between said time stamp and said current time falls within a predetermined range, said user is identified as said authorized user of said portable electronic device (<highlight><bold>300</bold></highlight>). </claim-text>
</claim-text>
</claim>
<claim id="CLM-00021">
<claim-text><highlight><bold>21</bold></highlight>. A user verification system according to <dependent-claim-reference depends_on="CLM-00022">claim 20</dependent-claim-reference>, 
<claim-text>wherein said portable electronic device (<highlight><bold>300</bold></highlight>) further includes: 
<claim-text>a user information register section (<highlight><bold>309</bold></highlight>) having pre-stored user information about said authorized user of said portable electronic device (<highlight><bold>300</bold></highlight>); and </claim-text>
<claim-text>a second encryption section (<highlight><bold>305</bold></highlight>) for encoding data, which is to be transmitted from said second transceiving interface (<highlight><bold>301</bold></highlight>) to said data processing device (<highlight><bold>200</bold></highlight>), with said valid secret key, and </claim-text>
</claim-text>
<claim-text>wherein as a result of comparison by said biometric feature data verifying section (<highlight><bold>306</bold></highlight>) and said time stamp verifying section (<highlight><bold>307</bold></highlight>), if said user is identified as said authorized user of said portable electronic device (<highlight><bold>300</bold></highlight>), said second encryption section (<highlight><bold>305</bold></highlight>) encodes at least one of the following items: said user information; the level of correlation between said to-be-verified biometric feature data and said valid biometric feature data, which correlation level is obtained at the comparison; and the date and time of said comparison performed, which is provided by said clock function section (<highlight><bold>304</bold></highlight>), and the encoded item is sent out from said second transceiving interface (<highlight><bold>301</bold></highlight>) to said data processing device (<highlight><bold>200</bold></highlight>) as a verification result. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00022">
<claim-text><highlight><bold>22</bold></highlight>. A user verification system according to <dependent-claim-reference depends_on="CLM-00022">claim 21</dependent-claim-reference>, 
<claim-text>wherein said data processing section (<highlight><bold>200</bold></highlight>) further includes a message digest creating section (<highlight><bold>208</bold></highlight>) for creating a message digest as a value obtained by inputting data to be transferred to said portable electronic device (<highlight><bold>300</bold></highlight>) to a predetermined one-way function, </claim-text>
<claim-text>wherein said message digest and said to-be-verified biometric feature data are both encoded by said first encryption section (<highlight><bold>204</bold></highlight>), and are then sent out from said first transceiving interface (<highlight><bold>205</bold></highlight>) to said portable electronic device (<highlight><bold>300</bold></highlight>), </claim-text>
<claim-text>wherein if said user is identified as said authorized user of said portable electronic device (<highlight><bold>300</bold></highlight>), as the comparison result by said biometric feature data verifying section (<highlight><bold>306</bold></highlight>) and said time stamp verifying section (<highlight><bold>307</bold></highlight>), said second encryption section (<highlight><bold>305</bold></highlight>) encodes the message digest which has been restored by said decryption section (<highlight><bold>305</bold></highlight>), and the encoded message digest is sent out from said second transceiving interface (<highlight><bold>301</bold></highlight>) to said data processing device (<highlight><bold>200</bold></highlight>) as a verification result. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00023">
<claim-text><highlight><bold>23</bold></highlight>. A user verification system according to <dependent-claim-reference depends_on="CLM-00022">claim 21</dependent-claim-reference>, wherein said portable electronic device (<highlight><bold>300</bold></highlight>) further includes a verification log recording section (<highlight><bold>310</bold></highlight>) storing said verification result as a verification log for a predetermined time period. </claim-text>
</claim>
<claim id="CLM-00024">
<claim-text><highlight><bold>24</bold></highlight>. A user verification system according to <dependent-claim-reference depends_on="CLM-00011">claim 19</dependent-claim-reference>, wherein upon receipt of a predetermined signal via said second transceiving interface (<highlight><bold>301</bold></highlight>), said portable electronic device (<highlight><bold>300</bold></highlight>) transmits public key information of said authorized user, which public key information is registered in said portable electronic device (<highlight><bold>300</bold></highlight>), from said second transceiving interface (<highlight><bold>301</bold></highlight>) to an external device. </claim-text>
</claim>
<claim id="CLM-00025">
<claim-text><highlight><bold>25</bold></highlight>. A user verification system according to <dependent-claim-reference depends_on="CLM-00011">claim 19</dependent-claim-reference>, further comprising a lock function section (<highlight><bold>314</bold></highlight>) which is operable to prohibit input of biometric feature information to said portable electronic device (<highlight><bold>300</bold></highlight>), if the evaluation is made a predetermined number of times successively, as a result of the comparison by said feature data verifying section (<highlight><bold>306</bold></highlight>) of said portable electronic device (<highlight><bold>300</bold></highlight>), that said to-be-verified biometric feature data never matches said valid biometric feature data in terms of said predetermined matching condition. </claim-text>
</claim>
<claim id="CLM-00026">
<claim-text><highlight><bold>26</bold></highlight>. A portable electronic device with a user verification function utilizing biometric information, said portable electronic device, comprising: 
<claim-text>a biometric feature data register section (<highlight><bold>302</bold></highlight>) having pre-stored valid biometric feature data of an authorized user of said portable electronic device (<highlight><bold>300</bold></highlight>); 
<claim-text>a transceiving interface (<highlight><bold>301</bold></highlight>) for transmitting/receiving data to/from an external device; </claim-text>
<claim-text>a biometric feature data verifying section (<highlight><bold>306</bold></highlight>) for comparing to-be-verified biometric feature data, which is received from an external device via said transceiving interface (<highlight><bold>301</bold></highlight>), with said valid biometric feature data; </claim-text>
<claim-text>a secret key register section (<highlight><bold>303</bold></highlight>) having a pre-stored valid secret key corresponding to said public key; and </claim-text>
<claim-text>a decryption section (<highlight><bold>305</bold></highlight>) for decoding encoded data, which has been encoded with said public key, with said valid secret key, </claim-text>
</claim-text>
<claim-text>said decryption section (<highlight><bold>305</bold></highlight>) decoding said encoded data, which has been received via said transceiving interface (<highlight><bold>301</bold></highlight>), into the original to-be-verified biometric feature data, and </claim-text>
<claim-text>said biometric feature data verifying section (<highlight><bold>306</bold></highlight>) comparing the original to-be-verified biometric feature data with said valid biometric feature data. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00027">
<claim-text><highlight><bold>27</bold></highlight>. A portable electronic device according to <dependent-claim-reference depends_on="CLM-00022">claim 26</dependent-claim-reference>, further comprising: 
<claim-text>a clock function section (<highlight><bold>304</bold></highlight>) for calculating the current time; and 
<claim-text>a time stamp verifying section (<highlight><bold>307</bold></highlight>) for comparing a time stamp, if any, attached to the original to-be-verified biometric feature data restored by said decryption section (<highlight><bold>305</bold></highlight>), with said current time, which has been calculated by said clock function section (<highlight><bold>304</bold></highlight>), said time stamp indicating the date and time when said to-be-verified biometric feature data has been extracted, </claim-text>
</claim-text>
<claim-text>if it is found, as the comparison result by said biometric feature data verifying section (<highlight><bold>306</bold></highlight>), that said to-be-verified biometric feature data matches said valid biometric feature data in terms of a predetermined matching condition, and also if it is found, as the comparison result by said time stamp verifying section (<highlight><bold>307</bold></highlight>), that a difference between said time stamp and said current time falls within a predetermined range, said user being identified as said authorized user of said portable electronic device (<highlight><bold>300</bold></highlight>). </claim-text>
</claim-text>
</claim>
<claim id="CLM-00028">
<claim-text><highlight><bold>28</bold></highlight>. A portable electronic device according to <dependent-claim-reference depends_on="CLM-00022">claim 27</dependent-claim-reference>, further comprising: 
<claim-text>a user information register section (<highlight><bold>309</bold></highlight>) having pre-stored user information about said authorized user of said portable electronic device (<highlight><bold>300</bold></highlight>); and </claim-text>
<claim-text>an encryption section (<highlight><bold>305</bold></highlight>) for encoding data, which is to be transmitted from said transceiving interface (<highlight><bold>301</bold></highlight>) to said data processing device (<highlight><bold>200</bold></highlight>) with said valid secret key, </claim-text>
<claim-text>as a result of comparison by said biometric feature data verifying section (<highlight><bold>306</bold></highlight>) and said time stamp verifying section (<highlight><bold>307</bold></highlight>), if said user is identified as said authorized user of said portable electronic device (<highlight><bold>300</bold></highlight>), said encryption section (<highlight><bold>305</bold></highlight>) encoding at least one of the following items: said user information; the level of correlation between said to-be-verified biometric feature data and said valid biometric feature data, which correlation level is obtained at the comparison; and the date and time of said comparison performed, which is provided by said clock function section (<highlight><bold>304</bold></highlight>), and the encoded item being sent out from said transceiving interface (<highlight><bold>301</bold></highlight>) to said data processing device (<highlight><bold>200</bold></highlight>) as a verification result. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00029">
<claim-text><highlight><bold>29</bold></highlight>. A portable electronic device according to <dependent-claim-reference depends_on="CLM-00022">claim 28</dependent-claim-reference>, wherein if said user is identified as said authorized user of said portable electronic device (<highlight><bold>300</bold></highlight>), as the comparison result by said biometric feature data verifying section(<highlight><bold>306</bold></highlight>) and said time stamp verifying section (<highlight><bold>307</bold></highlight>), and also if a message digest, which is obtained by inputting data to be transferred to said portable electronic device (<highlight><bold>300</bold></highlight>) to a predetermined one-way function, is attached to the original to-be-verified biometric feature data restored by said decryption section (<highlight><bold>305</bold></highlight>), said encoding section (<highlight><bold>305</bold></highlight>) encodes said message digest, and the encoded message digest is then sent out from said transceiving interface (<highlight><bold>301</bold></highlight>) to said data processing device (<highlight><bold>200</bold></highlight>) as a verification result. </claim-text>
</claim>
<claim id="CLM-00030">
<claim-text><highlight><bold>30</bold></highlight>. A portable electronic device according to <dependent-claim-reference depends_on="CLM-00022">claim 28</dependent-claim-reference>, further including a verification log recording section (<highlight><bold>310</bold></highlight>) storing said verification results as a verification log for a predetermined time period. </claim-text>
</claim>
<claim id="CLM-00031">
<claim-text><highlight><bold>31</bold></highlight>. A portable electronic device according to <dependent-claim-reference depends_on="CLM-00022">claim 26</dependent-claim-reference>, wherein upon receipt of a predetermined signal via said transceiving interface (<highlight><bold>301</bold></highlight>), said portable electronic device (<highlight><bold>300</bold></highlight>) transmits public key information of said authorized user, which public key information is registered in said portable electronic device (<highlight><bold>300</bold></highlight>), from said transceiving interface (<highlight><bold>301</bold></highlight>) to an external device. </claim-text>
</claim>
<claim id="CLM-00032">
<claim-text><highlight><bold>32</bold></highlight>. A portable electronic device according to <dependent-claim-reference depends_on="CLM-00022">claim 26</dependent-claim-reference>, further comprising a lock function section (<highlight><bold>314</bold></highlight>) which is operable to prohibit input of biometric feature information to said portable electronic device (<highlight><bold>300</bold></highlight>), if the evaluation is made a predetermined number of times successively, as the result of the comparison by said feature data verifying section (<highlight><bold>306</bold></highlight>), that said to-be-verified biometric feature data never matches said valid biometric feature data in terms of said predetermined matching condition.</claim-text>
</claim>
</subdoc-claims>
<subdoc-drawings id="DRAWINGS">
<heading lvl="0" align="CENTER">Drawings</heading>
<representative-figure>1</representative-figure>
<figure id="figure-D00000">
<image id="EMI-D00000" file="US20030005310A1-20030102-D00000.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00001">
<image id="EMI-D00001" file="US20030005310A1-20030102-D00001.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00002">
<image id="EMI-D00002" file="US20030005310A1-20030102-D00002.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00003">
<image id="EMI-D00003" file="US20030005310A1-20030102-D00003.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00004">
<image id="EMI-D00004" file="US20030005310A1-20030102-D00004.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00005">
<image id="EMI-D00005" file="US20030005310A1-20030102-D00005.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00006">
<image id="EMI-D00006" file="US20030005310A1-20030102-D00006.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00007">
<image id="EMI-D00007" file="US20030005310A1-20030102-D00007.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00008">
<image id="EMI-D00008" file="US20030005310A1-20030102-D00008.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00009">
<image id="EMI-D00009" file="US20030005310A1-20030102-D00009.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00010">
<image id="EMI-D00010" file="US20030005310A1-20030102-D00010.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00011">
<image id="EMI-D00011" file="US20030005310A1-20030102-D00011.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00012">
<image id="EMI-D00012" file="US20030005310A1-20030102-D00012.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00013">
<image id="EMI-D00013" file="US20030005310A1-20030102-D00013.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00014">
<image id="EMI-D00014" file="US20030005310A1-20030102-D00014.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00015">
<image id="EMI-D00015" file="US20030005310A1-20030102-D00015.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00016">
<image id="EMI-D00016" file="US20030005310A1-20030102-D00016.TIF" imf="TIFF" ti="DR"/>
</figure>
</subdoc-drawings>
</patent-application-publication>
