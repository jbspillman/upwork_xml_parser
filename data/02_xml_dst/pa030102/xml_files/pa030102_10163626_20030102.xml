<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE patent-application-publication SYSTEM "pap-v16-2002-01-01.dtd" [
<!ENTITY US20030004610A1-20030102-D00000.TIF SYSTEM "US20030004610A1-20030102-D00000.TIF" NDATA TIF>
<!ENTITY US20030004610A1-20030102-D00001.TIF SYSTEM "US20030004610A1-20030102-D00001.TIF" NDATA TIF>
<!ENTITY US20030004610A1-20030102-D00002.TIF SYSTEM "US20030004610A1-20030102-D00002.TIF" NDATA TIF>
<!ENTITY US20030004610A1-20030102-D00003.TIF SYSTEM "US20030004610A1-20030102-D00003.TIF" NDATA TIF>
<!ENTITY US20030004610A1-20030102-D00004.TIF SYSTEM "US20030004610A1-20030102-D00004.TIF" NDATA TIF>
<!ENTITY US20030004610A1-20030102-D00005.TIF SYSTEM "US20030004610A1-20030102-D00005.TIF" NDATA TIF>
<!ENTITY US20030004610A1-20030102-D00006.TIF SYSTEM "US20030004610A1-20030102-D00006.TIF" NDATA TIF>
<!ENTITY US20030004610A1-20030102-D00007.TIF SYSTEM "US20030004610A1-20030102-D00007.TIF" NDATA TIF>
<!ENTITY US20030004610A1-20030102-D00008.TIF SYSTEM "US20030004610A1-20030102-D00008.TIF" NDATA TIF>
<!ENTITY US20030004610A1-20030102-D00009.TIF SYSTEM "US20030004610A1-20030102-D00009.TIF" NDATA TIF>
<!ENTITY US20030004610A1-20030102-D00010.TIF SYSTEM "US20030004610A1-20030102-D00010.TIF" NDATA TIF>
<!ENTITY US20030004610A1-20030102-D00011.TIF SYSTEM "US20030004610A1-20030102-D00011.TIF" NDATA TIF>
<!ENTITY US20030004610A1-20030102-D00012.TIF SYSTEM "US20030004610A1-20030102-D00012.TIF" NDATA TIF>
<!ENTITY US20030004610A1-20030102-D00013.TIF SYSTEM "US20030004610A1-20030102-D00013.TIF" NDATA TIF>
<!ENTITY US20030004610A1-20030102-D00014.TIF SYSTEM "US20030004610A1-20030102-D00014.TIF" NDATA TIF>
<!ENTITY US20030004610A1-20030102-D00015.TIF SYSTEM "US20030004610A1-20030102-D00015.TIF" NDATA TIF>
<!ENTITY US20030004610A1-20030102-D00016.TIF SYSTEM "US20030004610A1-20030102-D00016.TIF" NDATA TIF>
<!ENTITY US20030004610A1-20030102-D00017.TIF SYSTEM "US20030004610A1-20030102-D00017.TIF" NDATA TIF>
<!ENTITY US20030004610A1-20030102-D00018.TIF SYSTEM "US20030004610A1-20030102-D00018.TIF" NDATA TIF>
<!ENTITY US20030004610A1-20030102-D00019.TIF SYSTEM "US20030004610A1-20030102-D00019.TIF" NDATA TIF>
<!ENTITY US20030004610A1-20030102-D00020.TIF SYSTEM "US20030004610A1-20030102-D00020.TIF" NDATA TIF>
<!ENTITY US20030004610A1-20030102-D00021.TIF SYSTEM "US20030004610A1-20030102-D00021.TIF" NDATA TIF>
<!ENTITY US20030004610A1-20030102-D00022.TIF SYSTEM "US20030004610A1-20030102-D00022.TIF" NDATA TIF>
<!ENTITY US20030004610A1-20030102-D00023.TIF SYSTEM "US20030004610A1-20030102-D00023.TIF" NDATA TIF>
<!ENTITY US20030004610A1-20030102-D00024.TIF SYSTEM "US20030004610A1-20030102-D00024.TIF" NDATA TIF>
<!ENTITY US20030004610A1-20030102-D00025.TIF SYSTEM "US20030004610A1-20030102-D00025.TIF" NDATA TIF>
<!ENTITY US20030004610A1-20030102-D00026.TIF SYSTEM "US20030004610A1-20030102-D00026.TIF" NDATA TIF>
<!ENTITY US20030004610A1-20030102-D00027.TIF SYSTEM "US20030004610A1-20030102-D00027.TIF" NDATA TIF>
]>
<patent-application-publication>
<subdoc-bibliographic-information>
<document-id>
<doc-number>20030004610</doc-number>
<kind-code>A1</kind-code>
<document-date>20030102</document-date>
</document-id>
<publication-filing-type>new</publication-filing-type>
<domestic-filing-data>
<application-number>
<doc-number>10163626</doc-number>
</application-number>
<application-number-series-code>10</application-number-series-code>
<filing-date>20020605</filing-date>
</domestic-filing-data>
<technical-information>
<classification-ipc>
<classification-ipc-primary>
<ipc>G06F019/00</ipc>
</classification-ipc-primary>
<classification-ipc-edition>07</classification-ipc-edition>
</classification-ipc>
<classification-us>
<classification-us-primary>
<uspc>
<class>700</class>
<subclass>245000</subclass>
</uspc>
</classification-us-primary>
</classification-us>
<title-of-invention>Camera referenced control in a minimally invasive surgical apparatus</title-of-invention>
</technical-information>
<continuity-data>
<continuations>
<continuation-of>
<parent-child>
<child>
<document-id>
<doc-number>10163626</doc-number>
<kind-code>A1</kind-code>
<document-date>20020605</document-date>
</document-id>
</child>
<parent>
<document-id>
<doc-number>09373678</doc-number>
<document-date>19990813</document-date>
<country-code>US</country-code>
</document-id>
</parent>
<parent-status>GRANTED</parent-status>
<parent-patent>
<document-id>
<doc-number>6424885</doc-number>
<country-code>US</country-code>
</document-id>
</parent-patent>
</parent-child>
</continuation-of>
</continuations>
<non-provisional-of-provisional>
<document-id>
<doc-number>60128160</doc-number>
<document-date>19990407</document-date>
<country-code>US</country-code>
</document-id>
</non-provisional-of-provisional>
</continuity-data>
<inventors>
<first-named-inventor>
<name>
<given-name>Gunter</given-name>
<middle-name>D.</middle-name>
<family-name>Niemeyer</family-name>
</name>
<residence>
<residence-us>
<city>Mountain View</city>
<state>CA</state>
<country-code>US</country-code>
</residence-us>
</residence>
<authority-applicant>INV</authority-applicant>
</first-named-inventor>
<inventor>
<name>
<given-name>Gary</given-name>
<middle-name>S.</middle-name>
<family-name>Guthart</family-name>
</name>
<residence>
<residence-us>
<city>Foster City</city>
<state>CA</state>
<country-code>US</country-code>
</residence-us>
</residence>
<authority-applicant>INV</authority-applicant>
</inventor>
<inventor>
<name>
<given-name>William</given-name>
<middle-name>C.</middle-name>
<family-name>Nowlin</family-name>
</name>
<residence>
<residence-us>
<city>Los Altos</city>
<state>CA</state>
<country-code>US</country-code>
</residence-us>
</residence>
<authority-applicant>INV</authority-applicant>
</inventor>
<inventor>
<name>
<given-name>Nitish</given-name>
<family-name>Swarup</family-name>
</name>
<residence>
<residence-us>
<city>Sunnyvale</city>
<state>CA</state>
<country-code>US</country-code>
</residence-us>
</residence>
<authority-applicant>INV</authority-applicant>
</inventor>
<inventor>
<name>
<given-name>Gregory</given-name>
<middle-name>K.</middle-name>
<family-name>Toth</family-name>
</name>
<residence>
<residence-us>
<city>Sunnyvale</city>
<state>CA</state>
<country-code>US</country-code>
</residence-us>
</residence>
<authority-applicant>INV</authority-applicant>
</inventor>
<inventor>
<name>
<given-name>Robert</given-name>
<middle-name>G.</middle-name>
<family-name>Younge</family-name>
</name>
<residence>
<residence-us>
<city>Portola Valley</city>
<state>CA</state>
<country-code>US</country-code>
</residence-us>
</residence>
<authority-applicant>INV</authority-applicant>
</inventor>
</inventors>
<assignee>
<organization-name>Intuitive Surgical, Inc.</organization-name>
<address>
<address-1>950 Kifer Road</address-1>
<city>Sunnyvale</city>
<state>CA</state>
<postalcode>94086</postalcode>
<country>
<country-code>US</country-code>
</country>
</address>
<assignee-type>02</assignee-type>
</assignee>
<correspondence-address>
<name-1>TOWNSEND AND TOWNSEND AND CREW, LLP</name-1>
<name-2></name-2>
<address>
<address-1>TWO EMBARCADERO CENTER</address-1>
<address-2>EIGHTH FLOOR</address-2>
<city>SAN FRANCISCO</city>
<state>CA</state>
<postalcode>94111-3834</postalcode>
<country>
<country-code>US</country-code>
</country>
</address>
</correspondence-address>
</subdoc-bibliographic-information>
<subdoc-abstract>
<paragraph id="A-0001" lvl="0">Enhanced telepresence and telesurgery systems automatically update coordinate transformations so as to retain alignment between movement of an input device and movement of an end effector as displayed adjacent the input device. A processor maps a controller workspace with an end effector workspace, and effects movement of the end effector in response to the movement of the input device. This allows the use of kinematically dissimilar master and slave linkages. Gripping an input member near a gimbal point and appropriate input member to end effector mapping points enhance the operator&apos;s control. Dexterity is enhanced by accurately tracking orientational and/or angles of movement, even if linear movement distances of the end effector do not correspond to those of the input device. </paragraph>
</subdoc-abstract>
<subdoc-description>
<cross-reference-to-related-applications>
<heading lvl="1">CROSS-REFERENCE TO RELATED APPLICATIONS </heading>
<paragraph id="P-0001" lvl="0"><number>&lsqb;0001&rsqb;</number> The present application is a Continuation Application of U.S. Non-Provisional application Ser. No. 09/373,678, filed Aug. 13, 1999, which claims the benefit of priority from U.S. Provisional Patent Application Serial No. 60/128,160, filed Apr. 7, 1999, the full disclosures of which are incorporated herein by reference.</paragraph>
</cross-reference-to-related-applications>
<summary-of-invention>
<section>
<heading lvl="1">BACKGROUND OF THE INVENTION </heading>
<paragraph id="P-0002" lvl="0"><number>&lsqb;0002&rsqb;</number> Minimally invasive medical techniques are aimed at reducing the amount of extraneous tissue which is damaged during diagnostic or surgical procedures, thereby reducing patient recovery time, discomfort, and deleterious side effects. Millions of surgeries are performed each year in the United States. Many of these surgeries can potentially be performed in a minimally invasive manner. However, only a relatively small number of surgeries currently use these techniques due to limitations in minimally invasive surgical instruments and techniques and the additional surgical training required to master them. </paragraph>
<paragraph id="P-0003" lvl="0"><number>&lsqb;0003&rsqb;</number> Advances in minimally invasive surgical technology could dramatically increase the number of surgeries performed in a minimally invasive manner. The average length of a hospital stay for a standard surgery is significantly larger than the average length for the equivalent surgery performed in a minimally invasive surgical manner. Thus, the complete adoption of minimally invasive techniques could save millions of hospital days, and consequently millions of dollars annually in hospital residency costs alone. Patient recovery times, patient discomfort, surgical side effects, and time away from work are also reduced with minimally invasive surgery. </paragraph>
<paragraph id="P-0004" lvl="0"><number>&lsqb;0004&rsqb;</number> The most common form of minimally invasive surgery may be endoscopy. Probably the most common form of endoscopy is laparoscopy, which is minimally invasive inspection and surgery inside the abdominal cavity. In standard laparoscopic surgery, a patient&apos;s abdomen is insufflated with gas, and cannula sleeves are passed through small (approximately &frac12; inch) incisions to provide entry ports for laparoscopic surgical instruments. </paragraph>
<paragraph id="P-0005" lvl="0"><number>&lsqb;0005&rsqb;</number> The laparoscopic surgical instruments generally include a laparoscope for viewing the surgical field, and working tools defining end effectors. Typical surgical end effectors include clamps, graspers, scissors, staplers, or needle holders, for example. The working tools are similar to those used in conventional (open) surgery, except that the working end or end effector of each tool is separated from its handle by, e.g., an approximately 12-inch long, extension tube. </paragraph>
<paragraph id="P-0006" lvl="0"><number>&lsqb;0006&rsqb;</number> To perform surgical procedures, the surgeon passes these working tools or instruments through the cannula sleeves to a required internal surgical site and manipulates them from outside the abdomen by sliding them in and out through the cannula sleeves, rotating them in the cannula sleeves, levering (i.e., pivoting) the instruments against the abdominal wall and actuating end effectors on the distal ends of the instruments from outside the abdomen. The instruments pivot around centers defined by the incisions which extend through muscles of the abdominal wall. The surgeon monitors the procedure by means of a television monitor which displays an image of the surgical site via a laparoscopic camera. The laparoscopic camera is also introduced through the abdominal wall and into the surgical site. Similar endoscopic techniques are employed in, e.g., arthroscopy, retroperitoneoscopy, pelviscopy, nephroscopy, cystoscopy, cistemoscopy, sinoscopy, hysteroscopy, urethroscopy and the like. </paragraph>
<paragraph id="P-0007" lvl="0"><number>&lsqb;0007&rsqb;</number> There are many disadvantages relating to current minimally invasive surgical (MIS) technology. For example, existing MIS instruments deny the surgeon the flexibility of tool placement found in open surgery. Most current laparoscopic tools have rigid shafts and difficulty is experienced in approaching the surgical site through the small incision. Additionally, the length and construction of many surgical instruments reduces the surgeon&apos;s ability to feel forces exerted by tissues and organs on the end effector of the associated tool. The lack of dexterity and sensitivity of surgical tools is a major impediment to the expansion of minimally invasive surgery. </paragraph>
<paragraph id="P-0008" lvl="0"><number>&lsqb;0008&rsqb;</number> Minimally invasive telesurgical systems for use in surgery are being developed to increase a surgeon&apos;s dexterity as well as to allow a surgeon to operate on a patient from a remote location. Telesurgery is a general term for surgical systems where the surgeon uses some form of remote control, e.g., a servomechanism, or the like, to manipulate surgical instrument movements rather than directly holding and moving the instruments by hand. In such a telesurgery system, the surgeon is provided with an image of the surgical site at the remote location. While viewing typically a three-dimensional image of the surgical site on a suitable viewer or display, the surgeon performs the surgical procedures on the patient by manipulating master control devices, at the remote location, which control the motion of servomechanically operated instruments. </paragraph>
<paragraph id="P-0009" lvl="0"><number>&lsqb;0009&rsqb;</number> The servomechanism used for telesurgery will often accept input from two master controllers (one for each of the surgeon&apos;s hands), and may include two robotic arms. Operative communication between each master control and an associated arm and instrument assembly is achieved through a control system. The control system includes at least one processor which relays input commands from a master controller to an associated arm and instrument assembly and from the arm and instrument assembly to the associated master controller in the case of, e.g., force feedback. </paragraph>
<paragraph id="P-0010" lvl="0"><number>&lsqb;0010&rsqb;</number> It would be advantageous if the position of the image capturing device could be changed during the course of a surgical procedure so as to enable the surgeon to view the surgical site from another position. It will be appreciated that, should the image capturing device position change, the orientation and position of the end effectors in the viewed image could also change. It would further be advantageous if the relationship in which end effector movement is mapped onto hand movement could again be established after such an image capturing device positional change. </paragraph>
<paragraph id="P-0011" lvl="0"><number>&lsqb;0011&rsqb;</number> It is an object of the invention to provide a method and control system for a minimally invasive surgical apparatus which maps end effector movement onto hand movement. It is further an object of the invention to provide a method and control system for a minimally invasive surgical apparatus which permits the mapping of end effector movement onto hand movement to be reestablished after having been interrupted, for example, by an image capturing device positional change. </paragraph>
<paragraph id="P-0012" lvl="0"><number>&lsqb;0012&rsqb;</number> It is to be appreciated that although the method and control system of the invention is described with reference to a minimally invasive surgical apparatus in this specification, the application of the invention is not to be limited to this application only, but can be used in any type of apparatus where an input is entered at one location and a corresponding movement is required at a remote location and in which it is required, or merely beneficial, to map end effector orientational and positional movement onto hand movement through an associated master control device. </paragraph>
</section>
<section>
<heading lvl="1">SUMMARY OF THE INVENTION </heading>
<paragraph id="P-0013" lvl="0"><number>&lsqb;0013&rsqb;</number> The invention provides enhanced telepresence and telesurgery systems which automatically update coordinate transformations so as to retain coordination between movement of an input device and movement of an end effector as displayed adjacent the input device. The invention generally maps a controller workspace (in which the input device moves) with an end effector workspace (in which the end effector moves), and effects movement of the end effector in response to the movement of the input device. This allows the use of kinematically dissimilar master and slave linkages having, for example, different degrees of freedom. Using an image capture device coupled to the end effector linkage allows calculation of the desired mapping coordinate transformations automatically. Input member pivot to end effector jaw pivot mapping enhances the operator&apos;s control, while the use of intermediate transformations allows portions of the kinematic train to be removed and replaced. Dexterity is enhanced by accurately tracking orientation and/or angles of movement, even if linear movement distances of the end effector do not correspond to those of the input device. </paragraph>
<paragraph id="P-0014" lvl="0"><number>&lsqb;0014&rsqb;</number> In a first aspect, the invention provides a surgical robotic system comprising a master controller having an input device moveable in a controller workspace. A slave has a surgical end effector and actuator, the actuator moving the end effector in a surgical workspace in response to slave actuator signals. An imaging system includes an image capture device with a field of view moveable in the surgical workspace. The imaging system generates state variable signals indicating the field of view. A processor couples the master controller to the slave arm. The processor generates the slave actuator signals by mapping the input device in the controller workspace with the end effector in the surgical workspace according to a transformation. The processor derives the transformation in response to the state variable signals of the imaging system. </paragraph>
<paragraph id="P-0015" lvl="0"><number>&lsqb;0015&rsqb;</number> The processor will generally derive the transformation so that an image of the end effector in the display appears substantially connected to the input device in the controller workspace. The processor can determine a position and orientation of the input device in the master controller space from state variable signals generated by the master controller. Similarly, the processor will often determine a position and orientation of the end effector in the surgical workspace from the state variable signals of the slave. The processor can then generate the slave actuator signals by comparing the position and orientation of the input device and the end effector in the mapped space. Advantageously, this end-to-end mapping allows the use of very different kinematic trains for the master and slave systems, greatly facilitating specialized linkages such as those used in minimally invasive surgery. </paragraph>
<paragraph id="P-0016" lvl="0"><number>&lsqb;0016&rsqb;</number> In many embodiments, the slave and imaging system will be coupled to facilitate derivation of the transformation by the processor from state variable signals provided from these two structures. For example, the imaging system may comprise a linkage moveably supporting the image capture device, and the slave may also comprise a linkage moveably supporting the end effector. The linkages may comprise joints having joint configurations indicated by the state variable signals. The linkages may be coupled in a variety of ways to facilitate derivation of the transformation by the processor. The coupling of the slave and imaging systems may be mechanical, electromagnetic (such as infrared), or the like. In the exemplary embodiment, the slave and imaging system linkages are mounted to a common base. This base may comprise a wheeled cart for transportation, a ceiling or wall mounted structure, an operating table, or the like. The state variable signals from the imaging system and/or slave need not necessarily comprise joint configuration or position signals, as the transformation may instead be derived from magnetic sensors (including those which can direct both location and orientation), image recognition-derived information, or the like. Regardless, the processor will preferably derive the transformation in real time, thereby allowing enhanced dexterity during and after image capture device movement, changes of association between masters and slaves, tool changes, repositioning of either the master or slave relative to the other, or the like. </paragraph>
<paragraph id="P-0017" lvl="0"><number>&lsqb;0017&rsqb;</number> In another aspect, the invention provides a surgical robotic system comprising a master controller having an input device moveable in a controller workspace. A slave has a surgical end effector and at least one actuator coupled to the end effector. The actuator moves the end effector in a surgical workspace in response to slave actuator signals. An imaging system includes an image capture device with a field of view moveable in the surgical workspace. The imaging system transmits an image to a display. A processor couples the master controller to the slave arm. The processor generates the slave actuator signals by mapping the input device in the controller workspace with the end effector in the surgical workspace according to a transformation. The processor derives the transformation so that an image of the end effector in the display appears substantially connected to the input device in the workspace. </paragraph>
<paragraph id="P-0018" lvl="0"><number>&lsqb;0018&rsqb;</number> Often times, the master controller will comprise a linkage supporting the input device, while the slave comprises a linkage supporting the end effector, with the master linkage and the slave linkage being kinematically dissimilar. More specifically, joints of the master linkage and joints of the slave linkage will have different degrees of freedom, and/or the joints will define different locations in the mapped space. End-to-end mapping of the input device and end effector allow the processor to accurately generate the desired slave actuation signals despite these kinematic dissimilarities, which can be quite pronounced in specialized slave mechanisms such as those used in minimally invasive robotic surgery. </paragraph>
<paragraph id="P-0019" lvl="0"><number>&lsqb;0019&rsqb;</number> In the exemplary embodiment, the processor will derive the transformation indirectly using an intermediate reference frame located at a detachable connection along a linkage supporting the master, end effector, and/or image capture device. This indirect transformation calculation significantly facilitates replacement or modification of a portion of the subsystem. </paragraph>
<paragraph id="P-0020" lvl="0"><number>&lsqb;0020&rsqb;</number> The substantial connection presented to the system operator between the input device and the end effector can be enhanced by directing non-visual sensory information to the operator corresponding with the image on the display. The non-visual information will preferably indicate force and/or torque applied to the slave. While the information may be presented in a variety of forms, including audio, thermal, smell, or the like, the non-visual information will preferably be in the form of loads, forces, and/or torques applied via the input device to the hand of the operator, ideally with orientations substantially corresponding to the orientations of the forces and torques applied to the slave (according to the image of the slave shown in the display). As described above regarding movement, correlation between orientations and torques on the input device in the slave may be revised by the controller (often when the transformation is revised) using end-to-end mapping. Optionally, the force and torque information presented to the operator indicates contact information (for example, engagement between an end effector and a tissue), disturbance information (for example, where one slave arm engages another slave arm outside a patient body), and/or synthetic information (including limitations on movements or &ldquo;virtual walls&rdquo; calculated in a simulated domain to prevent movement of an end effector in a restricted direction). Hence, the force and torque information may be derived from slave motor signals, sensors (including force sensors, pressure sensors, acceleration sensors, velocity sensors, or the like), simulation (including computed constraints), and other sources. </paragraph>
<paragraph id="P-0021" lvl="0"><number>&lsqb;0021&rsqb;</number> In another aspect, the invention provides a surgical robotic system comprising a master controller having an input device supported by a linkage so that the input device can move in a controller workspace with a first number of degrees of freedom. A slave has a surgical end effector and a plurality of actuators coupled thereto so that the end effector can move in a surgical workspace with a second number of degrees of freedom in response to slave actuator signals, the second number being less than the first number. A processor couples the master controller to the slave. The processor generates the slave actuator signals by mapping the input device in the controller workspace with the end effector in the surgical workspace. This allows, for example, the use of masters having at least one redundant degree of freedom, or the use of a full six degree of freedom master with a slave having a more limited motion capability. Such masters can give a wide range of motion to a surgeon without constraining slave design, size, complexity, and/or end effector interchangeability. </paragraph>
<paragraph id="P-0022" lvl="0"><number>&lsqb;0022&rsqb;</number> In yet another aspect, the invention provides a surgical robotic system comprising a master controller having an input device moveable in a controller workspace. A slave comprises a slave arm and a first tool releasably mountable on the arm. The first tool has a first end effector which moves in a surgical workspace in response to slave actuator signals. A second tool is releasably mounted on the slave in place of the first tool. The second tool has a second end effector moveable in the surgical workspace in response to the slave actuator signals. The second tool is kinematically dissimilar to the first tool. The processor couples the master controller to the slave arm. The processor generates the slave actuator signals by mapping the input device in the controller workspace with the end effector of the mounted tool in the surgical workspace. </paragraph>
<paragraph id="P-0023" lvl="0"><number>&lsqb;0023&rsqb;</number> In a still further aspect, the invention provides a surgical robotic system with a master controller moveable in a master controller space. The input device has a grip sensor for squeezing with a hand of an operator. The grip sensor defines a grip pivot. The slave arm has an end effector supported by a linkage so that the end effector is moveable in an end effector workspace. The slave arm has actuators coupled to the linkage for moving the end effector in response to slave actuator signals. The end effector comprises jaws with a jaw pivot. An image capture device has a field of view within the end effector workspace and transmits an image to a display. A processor couples the master controller to the slave arm, the processor generating the slave actuator signals in response to movement of the input device so that the jaw pivot in the display appears substantially connected with the grip pivot. </paragraph>
<paragraph id="P-0024" lvl="0"><number>&lsqb;0024&rsqb;</number> A still further aspect of the present invention provides a surgical robotic system comprising a master controller having an input device moveable with a plurality of degrees of freedom in a master controller space. The movement of the input device defines at least one angle selected from the group comprising a change in angular orientation and an angle of translation. A slave arm has an end effector supported by a linkage with a plurality of joints so that the slave is moveable in an end effector workspace. The slave arm has actuators coupled to the joints for moving the end effector in response to slave actuator signals. An image capture device transmits an image to a display adjacent to the master controller. A processor couples the master controller to the slave ann. The processor generates the slave actuator signals in response to the movement of the input device so that at least one angle selected from the group comprising a change in angular orientation and an angle of translation of the end effector is within five degrees of the at least one angle of the input device. Advantageously, such angular accuracy can enhance the substantial connectedness of the input device and the end effector despite significant differences in movement distances perceived by the system operator. </paragraph>
<paragraph id="P-0025" lvl="0"><number>&lsqb;0025&rsqb;</number> In a method aspect, the invention provides a surgical robotic method comprising moving a master input device in a controller workspace by articulating a plurality of master joints. A surgical end effector is moved in a surgical workspace by articulating a plurality of slave joints in response to slave motor signals. An image of an arbitrary field of view within the surgical workspace is displayed on a display adjacent the master controller. The slave motor signals are automatically generated in response to moving the master so that an image of the end effector in the display appears substantially connected with the input device in the master controller space. </paragraph>
<paragraph id="P-0026" lvl="0"><number>&lsqb;0026&rsqb;</number> In yet another system aspect, the invention provides a surgical robotic system comprising a master controller having an input device moveable in a master controller space. The input device includes first and second grip members for actuating with first and second digits of a hand of an operator. A slave has a surgical end effector that moves in a surgical workspace in response to slave actuator signals. The end effector includes first and second end effector elements. A processor couples the master to the slave. The processor generates the slave actuator signals so that movement of the first grip member substantially maps movement of the first end effector element, and so that movement of the second end effector element substantially maps movement of the second end effector element. </paragraph>
<paragraph id="P-0027" lvl="0"><number>&lsqb;0027&rsqb;</number> The grip members and end effector elements shown in the display may optionally be substantially connected at the pivotal joints between the grip members and end effector elements. Alternatively, the point of substantial connectedness may be disposed at midpoints between the tips of the grip members and end effector elements, particularly when using tools having relatively long end effector element lengths between the pivot point and the tip. </paragraph>
<paragraph id="P-0028" lvl="0"><number>&lsqb;0028&rsqb;</number> In yet another aspect, the invention provides a surgical robotic system comprising a master controller having a surgical handle supported by a plurality of joints so that the handle is moveable in a master controller space. The joints define a gimbal point of rotation about a plurality of axes, and the handle is adjacent the gimbal point. A slave has a surgical end effector which moves in a surgical workspace in response to movement of the handle. This can reduce the inertia of the master system when the surgeon changes orientation, particularly when the handle is substantially coincident with the gimbal point. Often times, a processor couples the master to the slave, and generates slave actuator signals so that the gimbal point of the master is substantially connected to a last joint of the slave adjacent the end effector. </paragraph>
<paragraph id="P-0029" lvl="0"><number>&lsqb;0029&rsqb;</number> In yet another system aspect, the invention provides a surgical robotic system comprising a master controller having a handle which moves in a master controller workspace. A slave supports a surgical end effector and moves the end effector within a surgical workspace in response to slave actuation signals. A processor couples the master to the slave. The processor generates the slave actuation signals so that movement of a mapping point along the handle of the master controller substantially maps movement of a mapping point along the end effector. The processor is capable of changing at least one of the handle mapping point and the end effector mapping point. </paragraph>
<paragraph id="P-0030" lvl="0"><number>&lsqb;0030&rsqb;</number> In general, the actuators may comprise a variety of motors (including electric, hydraulic, pneumatic, and the like). In other embodiments, the actuators may comprise brakes, clutches, vibrating devices which apply cycling loads using inertia, or the like. Still other actuators may used, particularly those which provide tactile stimulation in the form of heat, or the like. The tools of the present invention may include a variety of surgical tools and/or end effectors including forceps, grips, clamps, scissors, electrosurgical and mechanical scalpels, and the like. Still further end effectors may provide irrigation, aspiration or suction, air jets, lights, and/or imaging devices. General robotic systems are also provided (analogous to those described above), and both general and surgical robotic methods. </paragraph>
<paragraph id="P-0031" lvl="0"><number>&lsqb;0031&rsqb;</number> While these systems, methods, and devices are particularly advantageous for robotic surgery, the present invention also encompasses similar robotic systems, methods, and devices for telemanipulation and telepresence in other fields and for general robotic applications.</paragraph>
</section>
</summary-of-invention>
<brief-description-of-drawings>
<section>
<heading lvl="1">BRIEF DESCRIPTION OF THE DRAWINGS </heading>
<paragraph id="P-0032" lvl="0"><number>&lsqb;0032&rsqb;</number> The invention will now be described, by way of example, and with reference to the accompanying diagrammatic drawings, in which: </paragraph>
<paragraph id="P-0033" lvl="0"><number>&lsqb;0033&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1A</cross-reference> shows a three-dimensional view of an operator station of a telesurgical system in accordance with the invention; </paragraph>
<paragraph id="P-0034" lvl="0"><number>&lsqb;0034&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1B</cross-reference> shows a three-dimensional view of a cart or surgical station of the telesurgical system, the cart carrying three robotically controlled arms, the movement of the arms being remotely controllable from the operator station shown in <cross-reference target="DRAWINGS">FIG. 1A</cross-reference>; </paragraph>
<paragraph id="P-0035" lvl="0"><number>&lsqb;0035&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 2A</cross-reference> shows a side view of a robotic arm and surgical instrument assembly; </paragraph>
<paragraph id="P-0036" lvl="0"><number>&lsqb;0036&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 2B</cross-reference> shows a three-dimensional view corresponding to <cross-reference target="DRAWINGS">FIG. 2A</cross-reference>; </paragraph>
<paragraph id="P-0037" lvl="0"><number>&lsqb;0037&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3</cross-reference> shows a three-dimensional view of a surgical instrument; </paragraph>
<paragraph id="P-0038" lvl="0"><number>&lsqb;0038&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 4</cross-reference> shows a schematic kinematic diagram corresponding to the side view of the robotic arm shown in <cross-reference target="DRAWINGS">FIG. 2</cross-reference>A, and indicates the arm having been displaced from one position into another position; </paragraph>
<paragraph id="P-0039" lvl="0"><number>&lsqb;0039&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 5</cross-reference> shows, at an enlarged scale, a wrist member and end effector of the surgical instrument shown in <cross-reference target="DRAWINGS">FIG. 3</cross-reference>, the wrist member and end effector being movably mounted on a working end of a shaft of the surgical instrument; </paragraph>
<paragraph id="P-0040" lvl="0"><number>&lsqb;0040&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 6A</cross-reference> shows a three-dimensional view of a hand held part or wrist gimbal of a master control device of the telesurgical system; </paragraph>
<paragraph id="P-0041" lvl="0"><number>&lsqb;0041&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 6B</cross-reference> shows a three-dimensional view of an articulated arm portion of the master control device of the telesurgical system on which the wrist gimbal of <cross-reference target="DRAWINGS">FIG. 6A</cross-reference> is mounted in use; </paragraph>
<paragraph id="P-0042" lvl="0"><number>&lsqb;0042&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 6C</cross-reference> shows a three-dimensional view of the master control device showing the wrist gimbal of <cross-reference target="DRAWINGS">FIG. 6A</cross-reference> mounted on the articulated arm portion of <cross-reference target="DRAWINGS">FIG. 6B</cross-reference>; </paragraph>
<paragraph id="P-0043" lvl="0"><number>&lsqb;0043&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 7</cross-reference> shows a schematic three-dimensional drawing indicating the positions of the end effectors relative to a viewing end of an endoscope and the corresponding positions of master control devices relative to the eyes of an operator, typically a surgeon; </paragraph>
<paragraph id="P-0044" lvl="0"><number>&lsqb;0044&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 8</cross-reference> shows a schematic three-dimensional drawing indicating the position and orientation of an end effector relative to a camera Cartesian coordinate reference system; </paragraph>
<paragraph id="P-0045" lvl="0"><number>&lsqb;0045&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 9</cross-reference> shows a schematic three-dimensional drawing indicating the position and orientation of a pincher formation of the master control device relative to an eye Cartesian coordinate reference system; </paragraph>
<paragraph id="P-0046" lvl="0"><number>&lsqb;0046&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 10</cross-reference> shows a schematic side view of part of the surgical station of the minimally invasive surgical apparatus indicating the location of Cartesian reference coordinate systems used by a control system of the minimally invasive surgical apparatus to determine the position and orientation of an end effector relative to a Cartesian reference coordinate system at the viewing end of an image capturing device; </paragraph>
<paragraph id="P-0047" lvl="0"><number>&lsqb;0047&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 11</cross-reference> shows a schematic side view of part of the operator station of the minimally invasive surgical apparatus indicating the location of Cartesian reference coordinate systems used by the control system of the minimally invasive surgical apparatus to determine the position and orientation of the pincher formation of the master control device relative to an eye Cartesian reference coordinate system; </paragraph>
<paragraph id="P-0048" lvl="0"><number>&lsqb;0048&rsqb;</number> FIGS. <highlight><bold>11</bold></highlight>A-C schematically illustrates corresponding mapping locations on the surgeon&apos;s hand, on the master controller, and on the end effector and methods for their selection; </paragraph>
<paragraph id="P-0049" lvl="0"><number>&lsqb;0049&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 12</cross-reference> schematically illustrates a high level control architecture model of a master/slave surgical robotic system; </paragraph>
<paragraph id="P-0050" lvl="0"><number>&lsqb;0050&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 12A</cross-reference> shows a schematic block diagram indicating steps followed by the control system of the minimally invasive surgical apparatus in determining end effector position and orientation relative to the Cartesian reference coordinate system at the viewing end of the image capturing device; </paragraph>
<paragraph id="P-0051" lvl="0"><number>&lsqb;0051&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 13</cross-reference> shows a schematic block diagram indicating steps followed by the control system of the minimally invasive surgical apparatus in determining pincher formation position and orientation relative to the eye Cartesian reference coordinate system; </paragraph>
<paragraph id="P-0052" lvl="0"><number>&lsqb;0052&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 14</cross-reference> shows a block diagram representing control steps followed by the control system of the minimally invasive surgical apparatus in effecting control between pincher formation positional and orientational movement and end effector positional and orientational movement; </paragraph>
<paragraph id="P-0053" lvl="0"><number>&lsqb;0053&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 15</cross-reference> shows further detail of a &ldquo;simulated domain&rdquo; of the control system shown in <cross-reference target="DRAWINGS">FIG. 14</cross-reference>; </paragraph>
<paragraph id="P-0054" lvl="0"><number>&lsqb;0054&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 16</cross-reference> shows one embodiment of a simulation block shown in <cross-reference target="DRAWINGS">FIG. 15</cross-reference>; </paragraph>
<paragraph id="P-0055" lvl="0"><number>&lsqb;0055&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 17</cross-reference> shows a relationship between L and <highlight><bold>1</bold></highlight>/L; </paragraph>
<paragraph id="P-0056" lvl="0"><number>&lsqb;0056&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 18</cross-reference> shows another embodiment of the simulation block shown in <cross-reference target="DRAWINGS">FIG. 15</cross-reference>; </paragraph>
<paragraph id="P-0057" lvl="0"><number>&lsqb;0057&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 19</cross-reference> shows a block diagram indicating the imposition of simulated velocity and position limits; </paragraph>
<paragraph id="P-0058" lvl="0"><number>&lsqb;0058&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 20</cross-reference> shows a preferred embodiment of the simulation block shown in <cross-reference target="DRAWINGS">FIG. 15</cross-reference>; and </paragraph>
<paragraph id="P-0059" lvl="0"><number>&lsqb;0059&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 21</cross-reference> shows a block diagram indicating the imposition of simulated velocity and position limits relating to orientational slave movement. </paragraph>
</section>
</brief-description-of-drawings>
<detailed-description>
<section>
<heading lvl="1">DESCRIPTION OF THE SPECIFIC EMBODIMENTS </heading>
<paragraph id="P-0060" lvl="0"><number>&lsqb;0060&rsqb;</number> This application is related to the following patents and patent applications, the full disclosures of which are incorporated herein by reference: PCT International Application No. PCT/US98/19508, entitled &ldquo;Robotic Apparatus&rdquo;, filed on Sep. 18, 1998, U.S. Application Serial No. 60/111,713, entitled &ldquo;Surgical Robotic Tools, Data Architecture, and Use&rdquo;, filed on Dec. 8, 1998; U.S. Application Serial No. 60/111,711, entitled &ldquo;Image Shifting for a Telerobotic System&rdquo;, filed on Dec. 8, 1998; U.S. Application Serial No. 60/111,714, entitled &ldquo;Stereo Viewer System for Use in Telerobotic System&rdquo;, filed on Dec. 8, 1998; U.S. Application Serial No. 60/111,710, entitled &ldquo;Master Having Redundant Degrees of Freedom&rdquo;, filed on Dec. 8, 1998, U.S. Application No. 60/116,891, entitled &ldquo;Dynamic Association of Master and Slave in a Minimally Invasive Telesurgery System&rdquo;, filed on Jan. 22, 1999; and U.S. Pat. No. 5,808,665, entitled &ldquo;Endoscopic Surgical Instrument and Method for Use&rdquo;, issued on Sep. 15, 1998. </paragraph>
<paragraph id="P-0061" lvl="0"><number>&lsqb;0061&rsqb;</number> As used herein, objects (and/or images) appear &ldquo;substantially connected&rdquo; if a direction of an incremental positional movement of a first object matches the direction of an incremental positional movement of the second object (often as seen in an image). Matching directions need not be exactly equal, as the objects (or the object and the image) may be perceived as being connected if the angular deviation between the movements remains less than about ten degrees, preferably being less than about five degrees. Similarly, objects and/or images may be perceived as being &ldquo;substantially and orientationally connected&rdquo; if they are substantially connected and if the direction of an incremental orientational movement of the first object is matched by the direction of an incremental orientational movement of the second object (often as seen in an image displayed near the first object). </paragraph>
<paragraph id="P-0062" lvl="0"><number>&lsqb;0062&rsqb;</number> Additional levels of connectedness may, but need not, be provided. &ldquo;Magnitude connection&rdquo; indicates substantial connection and that the magnitude of orientational and/or positional movements of the first object and second object (typically as seen in an image) are directly related. The magnitudes need not be equal, so that it is possible to accommodate scaling and/or warping within a substantially magnitude connected robotic system. Orientational magnitude connection will imply substantial and orientational connection as well as related orientational movement magnitudes, while substantial and magnitude connection means substantial connection with positional magnitudes being related. </paragraph>
<paragraph id="P-0063" lvl="0"><number>&lsqb;0063&rsqb;</number> As used herein, a first object appears absolutely positionally connected with an image of a second object if the objects are substantially connected and the position of the first object and the position of the image of the second object appear to match, i.e., to be at the same location, during movement. A first object appears absolutely orientationally connected with an image of the second object if they are substantially connected and the orientation of the first object and the second object appear to match during movement. </paragraph>
<paragraph id="P-0064" lvl="0"><number>&lsqb;0064&rsqb;</number> Referring to <cross-reference target="DRAWINGS">FIG. 1A</cross-reference> of the drawings, an operator station or surgeon&apos;s console of a minimally invasive telesurgical system is generally indicated by reference numeral <highlight><bold>200</bold></highlight>. The station <highlight><bold>200</bold></highlight> includes a viewer <highlight><bold>202</bold></highlight> where an image of a surgical site is displayed in use. A support <highlight><bold>204</bold></highlight> is provided on which an operator, typically a surgeon, can rest his or her forearms while gripping two master controls (not shown in <cross-reference target="DRAWINGS">FIG. 1A</cross-reference>), one in each hand. The master controls are positioned in a space <highlight><bold>206</bold></highlight> inwardly beyond the support <highlight><bold>204</bold></highlight>. When using the control station <highlight><bold>200</bold></highlight>, the surgeon typically sits in a chair in front of the control station <highlight><bold>200</bold></highlight>, positions his or her eyes in front of the viewer <highlight><bold>202</bold></highlight> and grips the master controls one in each hand while resting his or her forearms on the support <highlight><bold>204</bold></highlight>. </paragraph>
<paragraph id="P-0065" lvl="0"><number>&lsqb;0065&rsqb;</number> In <cross-reference target="DRAWINGS">FIG. 1B</cross-reference> of the drawings, a cart or surgical station of the telesurgical system is generally indicated by reference numeral <highlight><bold>300</bold></highlight>. In use, the cart <highlight><bold>300</bold></highlight> is positioned close to a patient requiring surgery and is then normally caused to remain stationary until a surgical procedure to be performed has been completed. The cart <highlight><bold>300</bold></highlight> typically has wheels or castors to render it mobile. The station <highlight><bold>200</bold></highlight> is typically positioned remote from the cart <highlight><bold>300</bold></highlight> and can be separated from the cart <highlight><bold>300</bold></highlight> by a great distance, even miles away, but will typically be used within an operating room with the cart <highlight><bold>300</bold></highlight>. </paragraph>
<paragraph id="P-0066" lvl="0"><number>&lsqb;0066&rsqb;</number> The cart <highlight><bold>300</bold></highlight> typically carries three robotic arm assemblies. One of the robotic arm assemblies, indicated by reference numeral <highlight><bold>302</bold></highlight>, is arranged to hold an image capturing device <highlight><bold>304</bold></highlight>, e.g., an endoscope, or the like. Each of the two other arm assemblies <highlight><bold>10</bold></highlight>, <highlight><bold>10</bold></highlight> respectively, includes a surgical instrument <highlight><bold>14</bold></highlight>. The endoscope <highlight><bold>304</bold></highlight> has a viewing end <highlight><bold>306</bold></highlight> at a remote end of an elongate shaft thereof. It will be appreciated that the endoscope <highlight><bold>304</bold></highlight> has an elongate shaft to permit its viewing end <highlight><bold>306</bold></highlight> to be inserted through an entry port into an internal surgical site of a patient&apos;s body. The endoscope <highlight><bold>304</bold></highlight> is operatively connected to the viewer <highlight><bold>202</bold></highlight> to display an image captured at its viewing end <highlight><bold>306</bold></highlight> on the viewer <highlight><bold>202</bold></highlight>. Each robotic arm assembly <highlight><bold>10</bold></highlight>, <highlight><bold>10</bold></highlight> is normally operatively connected to one of the master controls. Thus, the movement of the robotic arm assemblies <highlight><bold>10</bold></highlight>, <highlight><bold>10</bold></highlight> is controlled by manipulation of the master controls. The instruments <highlight><bold>14</bold></highlight> of the robotic arm assemblies <highlight><bold>10</bold></highlight>, <highlight><bold>10</bold></highlight> have end effectors which are mounted on wrist members which are pivotally mounted on distal ends of elongate shafts of the instruments <highlight><bold>14</bold></highlight>, as is described in greater detail hereinbelow. It will be appreciated that the instruments <highlight><bold>14</bold></highlight> have elongate shafts to permit the end effectors to be inserted through entry ports into the internal surgical site of a patient&apos;s body. Movement of the end effectors relative to the ends of the shafts of the instruments <highlight><bold>14</bold></highlight> is also controlled by the master controls. </paragraph>
<paragraph id="P-0067" lvl="0"><number>&lsqb;0067&rsqb;</number> The robotic arms <highlight><bold>10</bold></highlight>, <highlight><bold>10</bold></highlight>, <highlight><bold>302</bold></highlight> are mounted on a carriage <highlight><bold>97</bold></highlight> by means of setup joint arms <highlight><bold>95</bold></highlight>. The carriage <highlight><bold>97</bold></highlight> can be adjusted selectively to vary its height relative to a base <highlight><bold>99</bold></highlight> of the cart <highlight><bold>300</bold></highlight>, as indicated by arrows K. The setup joint arms <highlight><bold>95</bold></highlight> are arranged to enable the lateral positions and orientations of the arms <highlight><bold>10</bold></highlight>, <highlight><bold>10</bold></highlight>, <highlight><bold>302</bold></highlight> to be varied relative to a vertically extending column <highlight><bold>93</bold></highlight> of the cart <highlight><bold>300</bold></highlight>. Accordingly, the positions, orientations and heights of the arms <highlight><bold>10</bold></highlight>, <highlight><bold>10</bold></highlight>, <highlight><bold>302</bold></highlight> can be adjusted to facilitate passing the elongate shafts of the instruments <highlight><bold>14</bold></highlight> and the endoscope <highlight><bold>304</bold></highlight> through the entry ports to desired positions relative to the surgical site. When the surgical instruments <highlight><bold>14</bold></highlight> and endoscope <highlight><bold>304</bold></highlight> are so positioned, the setup joint arms <highlight><bold>95</bold></highlight> and carriage <highlight><bold>97</bold></highlight> are typically locked in position. </paragraph>
<paragraph id="P-0068" lvl="0"><number>&lsqb;0068&rsqb;</number> In FIGS. <highlight><bold>2</bold></highlight>A and-<highlight><bold>2</bold></highlight>B of the drawings, one of the robotic arm assemblies <highlight><bold>10</bold></highlight> is shown in greater detail. Each assembly <highlight><bold>10</bold></highlight> includes an articulated robotic arm <highlight><bold>12</bold></highlight>, and a surgical instrument, schematically and generally indicated by reference numeral <highlight><bold>14</bold></highlight>, mounted thereon. <cross-reference target="DRAWINGS">FIG. 3</cross-reference> indicates the general appearance of the surgical instrument <highlight><bold>14</bold></highlight> in greater detail. </paragraph>
<paragraph id="P-0069" lvl="0"><number>&lsqb;0069&rsqb;</number> The surgical instrument <highlight><bold>14</bold></highlight> includes an elongate shaft <highlight><bold>14</bold></highlight>.<highlight><bold>1</bold></highlight>. The wrist-like mechanism, generally indicated by reference numeral <highlight><bold>50</bold></highlight>, is located at a working end of the shaft <highlight><bold>14</bold></highlight>.<highlight><bold>1</bold></highlight>. A housing <highlight><bold>53</bold></highlight>, arranged releasably to couple the instrument <highlight><bold>14</bold></highlight> to the robotic arm <highlight><bold>12</bold></highlight>, is located at an opposed end of the shaft <highlight><bold>14</bold></highlight>.<highlight><bold>1</bold></highlight>. In <cross-reference target="DRAWINGS">FIG. 2</cross-reference>A, and when the instrument <highlight><bold>14</bold></highlight> is coupled or mounted on the robotic arm <highlight><bold>12</bold></highlight>, the shaft <highlight><bold>14</bold></highlight>.<highlight><bold>1</bold></highlight> extends along an axis indicated at <highlight><bold>14</bold></highlight>.<highlight><bold>2</bold></highlight>. The instrument <highlight><bold>14</bold></highlight> is typically releasably mounted on a carriage <highlight><bold>11</bold></highlight>, which can be driven to translate along a linear guide formation <highlight><bold>24</bold></highlight> of the arm <highlight><bold>12</bold></highlight> in the direction of arrows P. </paragraph>
<paragraph id="P-0070" lvl="0"><number>&lsqb;0070&rsqb;</number> The robotic arm <highlight><bold>12</bold></highlight> is typically mounted on a base or platform at an end of its associated setup joint arm <highlight><bold>95</bold></highlight> by means of a bracket or mounting plate <highlight><bold>16</bold></highlight>. </paragraph>
<paragraph id="P-0071" lvl="0"><number>&lsqb;0071&rsqb;</number> The robotic arm <highlight><bold>12</bold></highlight> includes a cradle, generally indicated at <highlight><bold>18</bold></highlight>, an upper arm portion <highlight><bold>20</bold></highlight>, a forearm portion <highlight><bold>22</bold></highlight> and the guide formation <highlight><bold>24</bold></highlight>. The cradle <highlight><bold>18</bold></highlight> is pivotally mounted on the plate <highlight><bold>16</bold></highlight> in a gimbaled fashion to permit rocking movement of the cradle <highlight><bold>18</bold></highlight> in the direction of arrows <highlight><bold>26</bold></highlight> as shown in <cross-reference target="DRAWINGS">FIG. 2</cross-reference>B, about a pivot axis <highlight><bold>28</bold></highlight>. The upper arm portion <highlight><bold>20</bold></highlight> includes link members <highlight><bold>30</bold></highlight>, <highlight><bold>32</bold></highlight> and the forearm portion <highlight><bold>22</bold></highlight> includes link members <highlight><bold>34</bold></highlight>, <highlight><bold>36</bold></highlight>. The link members <highlight><bold>30</bold></highlight>, <highlight><bold>32</bold></highlight> are pivotally mounted on the cradle <highlight><bold>18</bold></highlight> and are pivotally connected to the link members <highlight><bold>34</bold></highlight>, <highlight><bold>36</bold></highlight>. The link members <highlight><bold>34</bold></highlight>, <highlight><bold>36</bold></highlight> are pivotally connected to the guide formation <highlight><bold>24</bold></highlight>. The pivotal connections between the link members <highlight><bold>30</bold></highlight>, <highlight><bold>32</bold></highlight>, <highlight><bold>34</bold></highlight>, <highlight><bold>36</bold></highlight>, the cradle <highlight><bold>18</bold></highlight>, and the guide formation <highlight><bold>24</bold></highlight> are arranged to constrain the robotic arm <highlight><bold>12</bold></highlight> to move in a specific manner. The movement of the robotic arm <highlight><bold>12</bold></highlight> is illustrated schematically in <cross-reference target="DRAWINGS">FIG. 4</cross-reference>. </paragraph>
<paragraph id="P-0072" lvl="0"><number>&lsqb;0072&rsqb;</number> With reference to <cross-reference target="DRAWINGS">FIG. 4</cross-reference>, the solid lines schematically indicate one position of the robotic arm and the dashed lines indicate another possible position into which the arm can be displaced from the position indicated in solid lines. </paragraph>
<paragraph id="P-0073" lvl="0"><number>&lsqb;0073&rsqb;</number> It will be understood that the axis <highlight><bold>14</bold></highlight>.<highlight><bold>2</bold></highlight> along which the shaft <highlight><bold>14</bold></highlight>.<highlight><bold>1</bold></highlight> of the instrument <highlight><bold>14</bold></highlight> extends when mounted on the robotic arm <highlight><bold>12</bold></highlight> pivots about a pivot center or fulcrum <highlight><bold>49</bold></highlight>. Thus, irrespective of the movement of the robotic arm <highlight><bold>12</bold></highlight>, the pivot center <highlight><bold>49</bold></highlight> normally remains in the same position relative to the stationary cart <highlight><bold>300</bold></highlight> on which the arm <highlight><bold>12</bold></highlight> is mounted. In use, the pivot center <highlight><bold>49</bold></highlight> is positioned at a port of entry into a patient&apos;s body when an internal surgical procedure is to be performed. It will be appreciated that the shaft <highlight><bold>14</bold></highlight>.<highlight><bold>1</bold></highlight> extends through such a port of entry, the wrist-like mechanism <highlight><bold>50</bold></highlight> then being positioned inside the patient&apos;s body. Thus, the general position of the mechanism <highlight><bold>50</bold></highlight> relative to the surgical site in a patient&apos;s body can be changed by movement of the arm <highlight><bold>12</bold></highlight>. Since the pivot center <highlight><bold>49</bold></highlight> is coincident with the port of entry, such movement of the arm does not excessively effect the surrounding tissue at the port of entry. </paragraph>
<paragraph id="P-0074" lvl="0"><number>&lsqb;0074&rsqb;</number> As can best be seen with reference to <cross-reference target="DRAWINGS">FIG. 4</cross-reference>, the robotic arm <highlight><bold>12</bold></highlight> provides three degrees of freedom of movement to the surgical instrument <highlight><bold>14</bold></highlight> when mounted thereon. These degrees of freedom of movement are firstly the gimbaled motion indicated by arrows <highlight><bold>26</bold></highlight>, pivoting or pitching movement as indicated by arrows <highlight><bold>27</bold></highlight> and the linear displacement in the direction of arrows P. Movement of the arm as indicated by arrows <highlight><bold>26</bold></highlight>, <highlight><bold>27</bold></highlight> and P is controlled by appropriately positioned actuators, e.g., electrical motors, or the like, which respond to inputs from its associated master control to drive the arm <highlight><bold>12</bold></highlight> to a desired position as dictated by movement of the master control. Appropriately positioned sensors, e.g., potentiometers, encoders, or the like, are provided on the arm and its associated setup joint arm <highlight><bold>95</bold></highlight> to enable a control system of the minimally invasive telesurgical system to determine joint positions, as described in greater detail hereinbelow. It will be appreciated that whenever &ldquo;sensors&rdquo; are referred to in this specification, the term is to be interpreted widely to include any appropriate sensors such as positional sensors, velocity sensors, or the like. It will be appreciated that by causing the robotic arm <highlight><bold>12</bold></highlight> selectively to displace from one position to another, the general position of the wrist-like mechanism <highlight><bold>50</bold></highlight> at the surgical site can be varied during the performance of a surgical procedure. </paragraph>
<paragraph id="P-0075" lvl="0"><number>&lsqb;0075&rsqb;</number> Referring now to <cross-reference target="DRAWINGS">FIG. 5</cross-reference> of the drawings, the wrist-like mechanism <highlight><bold>50</bold></highlight> will now be described in greater detail. In <cross-reference target="DRAWINGS">FIG. 5</cross-reference>, the working end of the shaft <highlight><bold>14</bold></highlight>.<highlight><bold>1</bold></highlight> is indicated at <highlight><bold>14</bold></highlight>.<highlight><bold>3</bold></highlight>. The wrist-like mechanism <highlight><bold>50</bold></highlight> includes a wrist member <highlight><bold>52</bold></highlight>. One end portion of the wrist member <highlight><bold>52</bold></highlight> is pivotally mounted in a clevis, generally indicated at <highlight><bold>17</bold></highlight>, on the end <highlight><bold>14</bold></highlight>.<highlight><bold>3</bold></highlight> of the shaft <highlight><bold>14</bold></highlight>.<highlight><bold>1</bold></highlight> by means of a pivotal connection <highlight><bold>54</bold></highlight>. The wrist member <highlight><bold>52</bold></highlight> can pivot in the direction of arrows <highlight><bold>56</bold></highlight> about the pivotal connection <highlight><bold>54</bold></highlight>. An end effector, generally indicated by reference numeral <highlight><bold>58</bold></highlight>, is pivotally mounted on an opposed end of the wrist member <highlight><bold>52</bold></highlight>. The end effector <highlight><bold>58</bold></highlight> is in the form of, e.g., a clip applier for anchoring clips during a surgical procedure. Accordingly, the end effector <highlight><bold>58</bold></highlight> has two parts <highlight><bold>58</bold></highlight>.<highlight><bold>1</bold></highlight>, <highlight><bold>58</bold></highlight>.<highlight><bold>2</bold></highlight> together defining a jaw-like arrangement. </paragraph>
<paragraph id="P-0076" lvl="0"><number>&lsqb;0076&rsqb;</number> It will be appreciated that the end effector can be in the form of any desired surgical tool, e.g., having two members or fingers which pivot relative to each other, such as scissors, pliers for use as needle drivers, or the like. Instead, it can include a single working member, e.g., a scalpel, cautery electrode, or the like. When a tool other than a clip applier is desired during the surgical procedure, the tool <highlight><bold>14</bold></highlight> is simply removed from its associated arm and replaced with an instrument bearing the desired end effector, e.g., a scissors, or pliers, or the like. </paragraph>
<paragraph id="P-0077" lvl="0"><number>&lsqb;0077&rsqb;</number> The end effector <highlight><bold>58</bold></highlight> is pivotally mounted in a clevis, generally indicated by reference numeral <highlight><bold>19</bold></highlight>, on an opposed end of the wrist member <highlight><bold>52</bold></highlight>, by means of a pivotal connection <highlight><bold>60</bold></highlight>. It will be appreciated that free ends <highlight><bold>11</bold></highlight>, <highlight><bold>13</bold></highlight> of the parts <highlight><bold>58</bold></highlight>.<highlight><bold>1</bold></highlight>, <highlight><bold>58</bold></highlight>.<highlight><bold>2</bold></highlight> are angularly displaceable about the pivotal connection <highlight><bold>60</bold></highlight> toward and away from each other as indicated by arrows <highlight><bold>62</bold></highlight>, <highlight><bold>63</bold></highlight>. It will further be appreciated that the members <highlight><bold>58</bold></highlight>.<highlight><bold>1</bold></highlight>, <highlight><bold>58</bold></highlight>.<highlight><bold>2</bold></highlight> can be displaced angularly about the pivotal connection <highlight><bold>60</bold></highlight> to change the orientation of the end effector <highlight><bold>58</bold></highlight> as a whole, relative to the wrist member <highlight><bold>52</bold></highlight>. Thus, each part <highlight><bold>58</bold></highlight>.<highlight><bold>1</bold></highlight>, <highlight><bold>58</bold></highlight>.<highlight><bold>2</bold></highlight> is angularly displaceable about the pivotal connection <highlight><bold>60</bold></highlight> independently of the other, so that the end effector <highlight><bold>58</bold></highlight>, as a whole, is angularly displaceable about the pivotal connection <highlight><bold>60</bold></highlight> as indicated in dashed lines in <cross-reference target="DRAWINGS">FIG. 5</cross-reference>. Furthermore, the shaft <highlight><bold>14</bold></highlight>.<highlight><bold>1</bold></highlight> is rotatably mounted on the housing <highlight><bold>53</bold></highlight> for rotation as indicated by the arrows <highlight><bold>59</bold></highlight>. Thus, the end effector <highlight><bold>58</bold></highlight> has three degrees of freedom of movement relative to the arm <highlight><bold>12</bold></highlight>, namely, rotation about the axis <highlight><bold>14</bold></highlight>.<highlight><bold>2</bold></highlight> as indicated by arrows <highlight><bold>59</bold></highlight>, angular displacement as a whole about the pivot <highlight><bold>60</bold></highlight> and angular displacement about the pivot <highlight><bold>54</bold></highlight> as indicated by arrows <highlight><bold>56</bold></highlight>. By moving the end effector within its three degrees of freedom of movement, its orientation relative to the end <highlight><bold>14</bold></highlight>.<highlight><bold>3</bold></highlight> of the shaft <highlight><bold>14</bold></highlight>.<highlight><bold>1</bold></highlight> can selectively be varied. It will be appreciated that movement of the end effector relative to the end <highlight><bold>14</bold></highlight>.<highlight><bold>3</bold></highlight> of the shaft <highlight><bold>14</bold></highlight>.<highlight><bold>1</bold></highlight> is controlled by appropriately positioned actuators, e.g., electrical motors, or the like, which respond to inputs from the associated master control to drive the end effector <highlight><bold>58</bold></highlight> to a desired orientation as dictated by movement of the master control. Furthermore, appropriately positioned sensors, e.g., encoders, or potentiometers, or the like, are provided to permit the control system of the minimally invasive telesurgical system to determine joint positions as described in greater detail hereinbelow. </paragraph>
<paragraph id="P-0078" lvl="0"><number>&lsqb;0078&rsqb;</number> One of the master controls <highlight><bold>700</bold></highlight>, <highlight><bold>700</bold></highlight> is indicated in <cross-reference target="DRAWINGS">FIG. 6C</cross-reference> of the drawings. A hand held part or wrist gimbal of the master control device <highlight><bold>700</bold></highlight> is indicated in <cross-reference target="DRAWINGS">FIG. 6</cross-reference>A and is generally indicated by reference numeral <highlight><bold>699</bold></highlight>. Part <highlight><bold>699</bold></highlight> has an articulated arm portion including a plurality of members or links <highlight><bold>702</bold></highlight> connected together by pivotal connections or joints <highlight><bold>704</bold></highlight>. The surgeon grips the part <highlight><bold>699</bold></highlight> by positioning his or her thumb and index finger over a pincher formation <highlight><bold>706</bold></highlight>. The surgeon&apos;s thumb and index finger are typically held on the pincher formation <highlight><bold>706</bold></highlight> by straps (not shown) threaded through slots <highlight><bold>710</bold></highlight>. When the pincher formation <highlight><bold>706</bold></highlight> is squeezed between the thumb and index finger, the fingers or end effector elements of the end effector <highlight><bold>58</bold></highlight> close. When the thumb and index finger are moved apart the fingers of the end effector <highlight><bold>58</bold></highlight> move apart in sympathy with the moving apart of the pincher formation <highlight><bold>706</bold></highlight>. The joints of the part <highlight><bold>699</bold></highlight> are operatively connected to actuators, e.g., electric motors, or the like, to provide for, e.g., force feedback, gravity compensation, and/or the like, as described in greater detail hereinbelow. Furthermore, appropriately positioned sensors, e.g., encoders, or potentiometers, or the like, are positioned on each joint <highlight><bold>704</bold></highlight> of the part <highlight><bold>699</bold></highlight>, so as to enable joint positions of the part <highlight><bold>699</bold></highlight> to be determined by the control system. </paragraph>
<paragraph id="P-0079" lvl="0"><number>&lsqb;0079&rsqb;</number> The part <highlight><bold>699</bold></highlight> is typically mounted on an articulated arm <highlight><bold>712</bold></highlight> as indicated in <cross-reference target="DRAWINGS">FIG. 6B</cross-reference>. Reference numeral <highlight><bold>4</bold></highlight> in <cross-reference target="DRAWINGS">FIGS. 6A and 6B</cross-reference> indicates the positions at which the part <highlight><bold>699</bold></highlight> and the articulated arm <highlight><bold>712</bold></highlight> are connected together. When connected together, the part <highlight><bold>699</bold></highlight> can displace angularly about an axis at <highlight><bold>4</bold></highlight>. </paragraph>
<paragraph id="P-0080" lvl="0"><number>&lsqb;0080&rsqb;</number> The articulated arm <highlight><bold>712</bold></highlight> includes a plurality of links <highlight><bold>714</bold></highlight> connected together at pivotal connections or joints <highlight><bold>716</bold></highlight>. It will be appreciated that also the articulated arm <highlight><bold>712</bold></highlight> has appropriately positioned actuators, e.g., electric motors, or the like, to provide for, e.g., force feedback, gravity compensation, and/or the like. Furthermore, appropriately positioned sensors, e.g., encoders, or potentiometers, or the like, are positioned on the joints <highlight><bold>716</bold></highlight> so as to enable joint positions of the articulated arm <highlight><bold>712</bold></highlight> to be determined by the control system as described in greater detail hereinbelow. </paragraph>
<paragraph id="P-0081" lvl="0"><number>&lsqb;0081&rsqb;</number> To move the orientation of the end effector <highlight><bold>58</bold></highlight> and/or its position along a translational path, the surgeon simply moves the pincher formation <highlight><bold>706</bold></highlight> to cause the end effector <highlight><bold>58</bold></highlight> to move to where he wants the end effector <highlight><bold>58</bold></highlight> to be in the image viewed in the viewer <highlight><bold>202</bold></highlight>. Thus, the end effector position and/or orientation is caused to follow that of the pincher formation <highlight><bold>706</bold></highlight>. </paragraph>
<paragraph id="P-0082" lvl="0"><number>&lsqb;0082&rsqb;</number> The master control devices <highlight><bold>700</bold></highlight>, <highlight><bold>700</bold></highlight> are typically mounted on the station <highlight><bold>200</bold></highlight> through pivotal connections at <highlight><bold>717</bold></highlight> as indicated in <cross-reference target="DRAWINGS">FIG. 6B</cross-reference>. As mentioned hereinbefore, to manipulate each master control device <highlight><bold>700</bold></highlight>, the surgeon positions his or her thumb and index finger over the pincher formation <highlight><bold>706</bold></highlight>. The pincher formation <highlight><bold>706</bold></highlight> is positioned at a free end of the part <highlight><bold>699</bold></highlight> which in turn is mounted on a free end of the articulated arm portion <highlight><bold>712</bold></highlight>. </paragraph>
<paragraph id="P-0083" lvl="0"><number>&lsqb;0083&rsqb;</number> The electric motors and sensors associated with the robotic arms <highlight><bold>12</bold></highlight> and the surgical instruments <highlight><bold>14</bold></highlight> mounted thereon, and the electric motors and sensors associated with the master control devices <highlight><bold>700</bold></highlight> are operatively linked in the control system. The control system typically includes at least one processor, typically a plurality of processors, for effecting control between master control device input and responsive robotic arm and surgical instrument output and for effecting control between robotic arm and surgical instrument input and responsive master control output in the case of, e.g., force feedback. </paragraph>
<paragraph id="P-0084" lvl="0"><number>&lsqb;0084&rsqb;</number> In use, and as schematically indicated in <cross-reference target="DRAWINGS">FIG. 7</cross-reference> of the drawings, the surgeon views the surgical site through the viewer <highlight><bold>202</bold></highlight>. The end effector <highlight><bold>58</bold></highlight> carried on each arm <highlight><bold>12</bold></highlight> is caused to perform positional and orientational movements in response to movement and action inputs on its associated master controls. The master controls are indicated schematically at <highlight><bold>700</bold></highlight>, <highlight><bold>700</bold></highlight>. It will be appreciated that during a surgical procedure images of the end effectors <highlight><bold>58</bold></highlight> are captured by the endoscope <highlight><bold>304</bold></highlight> together with the surgical site and are displayed on the viewer <highlight><bold>202</bold></highlight> so that the surgeon sees the responsive movements and actions of the end effectors <highlight><bold>58</bold></highlight> as he or she controls such movements and actions by means of the master control devices <highlight><bold>700</bold></highlight>, <highlight><bold>700</bold></highlight>. The control system is arranged to cause end effector orientational and positional movement as viewed in the image at the viewer <highlight><bold>202</bold></highlight> to be mapped onto orientational and positional movement of a pincher formation of the master control as will be described in greater detail hereinbelow. </paragraph>
<paragraph id="P-0085" lvl="0"><number>&lsqb;0085&rsqb;</number> The operation of the control system of the minimally invasive surgical apparatus will now be described in greater detail. In the description which follows, the control system will be described with reference to a single master control <highlight><bold>700</bold></highlight> and its associated robotic arm <highlight><bold>12</bold></highlight> and surgical instrument <highlight><bold>14</bold></highlight>. The master control <highlight><bold>700</bold></highlight> will be referred to simply as &ldquo;master&rdquo; and its associated robotic arm <highlight><bold>12</bold></highlight> and surgical instrument <highlight><bold>14</bold></highlight> will be referred to simply as &ldquo;slave.&rdquo;</paragraph>
<paragraph id="P-0086" lvl="0"><number>&lsqb;0086&rsqb;</number> The method whereby control between master movement and corresponding slave movement is achieved by the control system of the minimally invasive surgical apparatus will now be described with reference to FIGS. <highlight><bold>7</bold></highlight> to <highlight><bold>9</bold></highlight> of the drawings in overview fashion. The method will then be described in greater detail with reference to FIGS. <highlight><bold>10</bold></highlight> to <highlight><bold>21</bold></highlight> of the drawings. </paragraph>
<paragraph id="P-0087" lvl="0"><number>&lsqb;0087&rsqb;</number> Control between master and slave movement is achieved by comparing master position and orientation in an eye Cartesian coordinate reference system with slave position and orientation in a camera Cartesian coordinate reference system. For ease of understanding and economy of words, the term &ldquo;Cartesian coordinate reference system&rdquo; will simply be referred to as &ldquo;frame&rdquo; in the rest of this specification. Accordingly, when the master is stationary, the slave position and orientation within the camera frame is compared with the master position and orientation in the eye frame, and should the position and/or orientation of the slave in the camera frame not correspond with the position and/or orientation of the master in the eye frame, the slave is caused to move to a position and/or orientation in the camera frame at which its position and/or orientation in the camera frame does correspond with the position and/or orientation of the master in the eye frame. In <cross-reference target="DRAWINGS">FIG. 8</cross-reference>, the camera frame is generally indicated by reference numeral <highlight><bold>610</bold></highlight> and the eye frame is generally indicated by reference numeral <highlight><bold>612</bold></highlight> in <cross-reference target="DRAWINGS">FIG. 9</cross-reference>. </paragraph>
<paragraph id="P-0088" lvl="0"><number>&lsqb;0088&rsqb;</number> When the master is moved into a new position and/or orientation in the eye frame <highlight><bold>612</bold></highlight>, the new master position and/or orientation does not correspond with the previously corresponding slave position and/or orientation in the camera frame <highlight><bold>610</bold></highlight>. The control system then causes the slave to move into a new position and/or orientation in the camera frame <highlight><bold>610</bold></highlight> at which new position and/or orientation, its position and orientation in the camera frame <highlight><bold>610</bold></highlight> does correspond with the new position and/or orientation of the master in the eye frame <highlight><bold>612</bold></highlight>. </paragraph>
<paragraph id="P-0089" lvl="0"><number>&lsqb;0089&rsqb;</number> It will be appreciated that the control system includes at least one, and typically a plurality, of processors which compute new corresponding positions and orientations of the slave in response to master movement input commands on a continual basis determined by the processing cycle rate of the control system. A typical processing cycle rate of the control system under discussion is about 1300 Hz. Thus, when the master is moved from one position to a next position, the corresponding movement desired by the stave to respond is computed at about 1300 Hz. Naturally, the control system can have any appropriate processing cycle rate depending on the processor or processors used in the control system. All real-time servocycle processing is preferably conducted on a DSP (Digital Signal Processor) chip. DSPs are preferable because of their constant calculation predictability and reproducibility. A Sharc DSP from Analog Devices, Inc. of Massachusetts is an acceptable example of such a processor for performing the functions described herein. </paragraph>
<paragraph id="P-0090" lvl="0"><number>&lsqb;0090&rsqb;</number> The camera frame <highlight><bold>610</bold></highlight> is positioned such that its origin <highlight><bold>614</bold></highlight> is positioned at the viewing end <highlight><bold>306</bold></highlight> of the endoscope <highlight><bold>304</bold></highlight>. Conveniently, the z axis of the camera frame <highlight><bold>610</bold></highlight> extends axially along a viewing axis <highlight><bold>616</bold></highlight> of the endoscope <highlight><bold>304</bold></highlight>. Although in <cross-reference target="DRAWINGS">FIG. 8</cross-reference>, the viewing axis <highlight><bold>616</bold></highlight> is shown in coaxial alignment with a shaft axis of the endoscope <highlight><bold>304</bold></highlight>, it is to be appreciated that the viewing axis <highlight><bold>616</bold></highlight> can be angled relative thereto. Thus, the endoscope can be in the form of an angled scope. Naturally, the x and y axes are positioned in a plane perpendicular to the z axis. The endoscope is typically angularly displaceable about its shaft axis. The x, y and z axes are fixed relative to the viewing axis of the endoscope <highlight><bold>304</bold></highlight> so as to displace angularly about the shaft axis in sympathy with angular displacement of the endoscope <highlight><bold>304</bold></highlight> about its shaft axis. </paragraph>
<paragraph id="P-0091" lvl="0"><number>&lsqb;0091&rsqb;</number> To enable the control system to determine slave position and orientation, a frame is defined on or attached to the end effector <highlight><bold>58</bold></highlight>. This frame is referred to as an end effector frame or slave tip frame, in the rest of this specification, and is generally indicated by reference numeral <highlight><bold>618</bold></highlight>. The end effector frame <highlight><bold>618</bold></highlight> has its origin at the pivotal connection <highlight><bold>60</bold></highlight>. Conveniently, one of the axes e.g. the z axis, of the frame <highlight><bold>618</bold></highlight> is defined to extend along an axis of symmetry, or the like, of the end effector <highlight><bold>58</bold></highlight>. Naturally, the x and y axes then extend perpendicularly to the z axis. It will appreciated that the orientation of the slave is then defined by the orientation of the frame <highlight><bold>618</bold></highlight> having its origin at the pivotal connection <highlight><bold>60</bold></highlight>, relative to the camera frame <highlight><bold>610</bold></highlight>. Similarly, the position of the slave is then defined by the position of the origin of the frame at <highlight><bold>60</bold></highlight> relative to the camera frame <highlight><bold>610</bold></highlight>. </paragraph>
<paragraph id="P-0092" lvl="0"><number>&lsqb;0092&rsqb;</number> Referring now to <cross-reference target="DRAWINGS">FIG. 9</cross-reference> of the drawings, the eye frame <highlight><bold>612</bold></highlight> is chosen such that its origin corresponds with a position <highlight><bold>201</bold></highlight> where the surgeon&apos;s eyes are normally located when he or she is viewing the surgical site at the viewer <highlight><bold>202</bold></highlight>. The z axis extends along a line of sight of the surgeon, indicated by axis <highlight><bold>620</bold></highlight>, when viewing the surgical site through the viewer <highlight><bold>202</bold></highlight>. Naturally, the x and y axes extend perpendicularly from the z axis at the origin <highlight><bold>201</bold></highlight>. Conveniently, the y axis is chosen to extend generally vertically relative to the viewer <highlight><bold>202</bold></highlight> and the x axis is chosen to extend generally horizontally relative to the viewer <highlight><bold>202</bold></highlight>. </paragraph>
<paragraph id="P-0093" lvl="0"><number>&lsqb;0093&rsqb;</number> To enable the control system to determine master position and orientation within the viewer frame <highlight><bold>612</bold></highlight>, a point on the master is chosen which defines an origin of a master or master tip frame, indicated by reference numeral <highlight><bold>622</bold></highlight>. This point is chosen at a point of intersection indicated by reference numeral <highlight><bold>3</bold></highlight>A between axes of rotation <highlight><bold>1</bold></highlight> and <highlight><bold>3</bold></highlight> of the master, as can best be seen in <cross-reference target="DRAWINGS">FIG. 6A</cross-reference> of the drawings. Conveniently, the z axis of the master frame <highlight><bold>622</bold></highlight> on the master extends along an axis of symmetry of the pincher formation <highlight><bold>706</bold></highlight> which extends coaxially along the rotational axis <highlight><bold>1</bold></highlight>. The x and y axes then extend perpendicularly from the axis of symmetry <highlight><bold>1</bold></highlight> at the origin <highlight><bold>3</bold></highlight>A. Accordingly, orientation of the master within the eye frame <highlight><bold>612</bold></highlight> is defined by the orientation of the master frame <highlight><bold>622</bold></highlight> relative to the eye frame <highlight><bold>612</bold></highlight>. The position of the master in the eye frame <highlight><bold>612</bold></highlight> is defined by the position of the origin <highlight><bold>3</bold></highlight>A relative to the eye frame <highlight><bold>612</bold></highlight>. </paragraph>
<paragraph id="P-0094" lvl="0"><number>&lsqb;0094&rsqb;</number> How the position and orientation of the slave within the camera frame <highlight><bold>610</bold></highlight> is determined by the control system will now be described with reference to <cross-reference target="DRAWINGS">FIG. 10</cross-reference> of the drawings. <cross-reference target="DRAWINGS">FIG. 10</cross-reference> shows a schematic diagram of one of the robotic arm <highlight><bold>12</bold></highlight> and surgical instrument <highlight><bold>14</bold></highlight> assemblies mounted on the cart <highlight><bold>300</bold></highlight>. However, before commencing with a description of <cross-reference target="DRAWINGS">FIG. 10</cross-reference>, it is appropriate to describe certain previously mentioned aspects of the surgical station <highlight><bold>300</bold></highlight> which impact on the determination of the orientation and position of the slave relative to the camera frame <highlight><bold>610</bold></highlight>. </paragraph>
<paragraph id="P-0095" lvl="0"><number>&lsqb;0095&rsqb;</number> In use, when it is desired to perform a surgical procedure by means of the minimally invasive surgical apparatus, the surgical station <highlight><bold>300</bold></highlight> is moved into close proximity to a patient requiring the surgical procedure. The patient is normally supported on a surface such as an operating table, or the like. To make allowance for support surfaces of varying height, and to make allowance for different positions of the surgical station <highlight><bold>300</bold></highlight> relative to the surgical site at which the surgical procedure is to be performed, the surgical station <highlight><bold>300</bold></highlight> is provided with the ability to have varying initial setup configurations. Accordingly, the robotic arms <highlight><bold>12</bold></highlight>, <highlight><bold>12</bold></highlight>, and the endoscope arm <highlight><bold>302</bold></highlight> are mounted on the carriage <highlight><bold>97</bold></highlight> which is height-wise adjustable, as indicated by arrows K, relative to the base <highlight><bold>99</bold></highlight> of the cart <highlight><bold>300</bold></highlight>, as can best be seen in <cross-reference target="DRAWINGS">FIGS. 1B and 10</cross-reference> of the drawings. Furthermore, the robotic arms <highlight><bold>12</bold></highlight>, <highlight><bold>12</bold></highlight> and the endoscope arm <highlight><bold>302</bold></highlight> are mounted on the carriage <highlight><bold>97</bold></highlight> by means of the setup joint arms <highlight><bold>95</bold></highlight>. Thus, the lateral position and orientation of the arms <highlight><bold>12</bold></highlight>, <highlight><bold>12</bold></highlight>, <highlight><bold>302</bold></highlight> can be selected by moving the setup joint arms <highlight><bold>95</bold></highlight>. Thus, at the commencement of the surgical procedure, the cart <highlight><bold>300</bold></highlight> is moved into the position in close proximity to the patient, an appropriate height of the carriage <highlight><bold>97</bold></highlight> is selected by moving it to an appropriate height relative to the base <highlight><bold>99</bold></highlight> and the surgical instruments <highlight><bold>14</bold></highlight> are moved relative to the carriage <highlight><bold>97</bold></highlight> so as to introduce the shafts of the instruments <highlight><bold>14</bold></highlight> and the endoscope <highlight><bold>304</bold></highlight> through the ports of entry and into positions in which the end effectors <highlight><bold>58</bold></highlight> and the viewing end <highlight><bold>306</bold></highlight> of the endoscope <highlight><bold>304</bold></highlight> are appropriately positioned at the surgical site and the fulcrums are coincident with the ports of entry. Once the height and positions are selected, the carriage <highlight><bold>97</bold></highlight> is locked at its appropriate height and the setup joint arms <highlight><bold>95</bold></highlight> are locked in their positions and orientations. Normally, throughout the surgical procedure, the carriage <highlight><bold>97</bold></highlight> is maintained at the selected height and similarly the setup joint arms <highlight><bold>95</bold></highlight> are maintained in their selected positions. However, if desired, either the endoscope or one or both of the instruments can be introduced through other ports of entry during the surgical procedure. </paragraph>
<paragraph id="P-0096" lvl="0"><number>&lsqb;0096&rsqb;</number> Returning now to <cross-reference target="DRAWINGS">FIG. 10</cross-reference>, the determination by the control system of the position and orientation of the slave within the camera frame <highlight><bold>610</bold></highlight> will now be described. It will be appreciated that this is achieved by means of one or more processors having a specific processing cycle rate. Thus, where appropriate, whenever position and orientation are referred to in this specification, it should be borne in mind that a corresponding velocity is also readily determined. The control system determines the position and orientation of the slave within the camera frame <highlight><bold>610</bold></highlight> by determining the position and orientation of the slave relative to a cart frame <highlight><bold>624</bold></highlight> and by determining the orientation and position of the endoscope <highlight><bold>304</bold></highlight> with reference to the same cart frame <highlight><bold>624</bold></highlight>. The cart frame <highlight><bold>624</bold></highlight> has an origin indicated by reference numeral <highlight><bold>626</bold></highlight> in <cross-reference target="DRAWINGS">FIG. 10</cross-reference>. </paragraph>
<paragraph id="P-0097" lvl="0"><number>&lsqb;0097&rsqb;</number> To determine the position and orientation of the slave relative to the cart frame <highlight><bold>624</bold></highlight>, the position of a fulcrum frame <highlight><bold>630</bold></highlight> having its origin at the fulcrum <highlight><bold>49</bold></highlight> is determined within the cart frame <highlight><bold>624</bold></highlight> as indicated by the arrow <highlight><bold>628</bold></highlight> in dashed lines. It will be appreciated that the position of the fulcrum <highlight><bold>49</bold></highlight> normally remains at the same location, coincident with a port of entry into the surgical site, throughout the surgical procedure. The position of the end effector frame <highlight><bold>618</bold></highlight> on the slave, having its origin at the pivotal connection <highlight><bold>60</bold></highlight>, is then determined relative to the fulcrum frame <highlight><bold>630</bold></highlight> and the orientation of the end effector frame <highlight><bold>618</bold></highlight> on the slave is also determined relative to the fulcrum frame <highlight><bold>630</bold></highlight>. The position and orientation of the end effector frame <highlight><bold>618</bold></highlight> relative to the cart frame is then determined by means of routine calculation using trigonometric relationships. </paragraph>
<paragraph id="P-0098" lvl="0"><number>&lsqb;0098&rsqb;</number> It will be appreciated that the robotic arm <highlight><bold>302</bold></highlight> of the endoscope <highlight><bold>304</bold></highlight> is constrained to move in similar fashion to the robotic arm <highlight><bold>10</bold></highlight>, as indicated schematically in <cross-reference target="DRAWINGS">FIG. 4</cross-reference> of the drawings. Thus, the endoscope <highlight><bold>304</bold></highlight> when positioned with its viewing end <highlight><bold>306</bold></highlight> directed at the surgical site, also defines a fulcrum coincident with its associated port of entry into the surgical site. The endoscope arm <highlight><bold>302</bold></highlight> can be driven to cause the endoscope <highlight><bold>304</bold></highlight> to move into a different position during a surgical procedure, to enable the surgeon to view the surgical site from a different position in the course of performing the surgical procedure. It will be appreciated that movement of the viewing end <highlight><bold>306</bold></highlight> of the endoscope <highlight><bold>304</bold></highlight> is performed by varying the orientation of the endoscope <highlight><bold>304</bold></highlight> relative to its pivot center or fulcrum. The position and orientation of the camera frame <highlight><bold>610</bold></highlight> within the cart frame <highlight><bold>624</bold></highlight> is determined in similar fashion to the position and orientation of the slave within the cart frame <highlight><bold>624</bold></highlight>. When the position and orientation of the camera frame <highlight><bold>610</bold></highlight> relative to the cart frame <highlight><bold>624</bold></highlight>, and the position and orientation of the slave relative to the cart frame <highlight><bold>624</bold></highlight> have been determined in this manner, the position and the orientation of the slave relative to the camera frame <highlight><bold>610</bold></highlight> is readily determinable through routine calculation using trigonometric relationships. </paragraph>
<paragraph id="P-0099" lvl="0"><number>&lsqb;0099&rsqb;</number> How the position and orientation of the master within the viewer frame <highlight><bold>612</bold></highlight> is determined by the control system will now be described with reference to <cross-reference target="DRAWINGS">FIG. 11</cross-reference> of the drawings. <cross-reference target="DRAWINGS">FIG. 11</cross-reference> shows a schematic diagram of one of the master controls <highlight><bold>700</bold></highlight> at the operator station <highlight><bold>200</bold></highlight>. </paragraph>
<paragraph id="P-0100" lvl="0"><number>&lsqb;0100&rsqb;</number> The operator station <highlight><bold>200</bold></highlight> optionally also includes setup joint arms, as indicated at <highlight><bold>632</bold></highlight>, to enable the general location of the masters <highlight><bold>700</bold></highlight>, <highlight><bold>700</bold></highlight> to be varied to suit the surgeon. Thus, the general position of the masters <highlight><bold>700</bold></highlight>, <highlight><bold>700</bold></highlight> can be selectively varied to bring the masters <highlight><bold>700</bold></highlight>, <highlight><bold>700</bold></highlight> into a general position at which they are comfortably positioned for the surgeon. When the masters <highlight><bold>700</bold></highlight>, <highlight><bold>700</bold></highlight> are thus comfortably positioned, the setup joint arms <highlight><bold>632</bold></highlight> are locked in position and are normally maintained in that position throughout the surgical procedure. </paragraph>
<paragraph id="P-0101" lvl="0"><number>&lsqb;0101&rsqb;</number> To determine the position and orientation of the master <highlight><bold>700</bold></highlight>, as indicated in <cross-reference target="DRAWINGS">FIG. 11</cross-reference>, within the eye frame <highlight><bold>612</bold></highlight>, the position and orientation of the eye frame <highlight><bold>612</bold></highlight> relative to a surgeon&apos;s station frame <highlight><bold>634</bold></highlight>, and the position and orientation of the master <highlight><bold>700</bold></highlight> relative to the surgeon&apos;s frame <highlight><bold>634</bold></highlight> is determined. The surgeon&apos;s station frame <highlight><bold>634</bold></highlight> has its origin at a location which is normally stationary during the surgical procedure, and is indicated at <highlight><bold>636</bold></highlight>. </paragraph>
<paragraph id="P-0102" lvl="0"><number>&lsqb;0102&rsqb;</number> To determine the position and orientation of the master <highlight><bold>700</bold></highlight> relative to the station frame <highlight><bold>634</bold></highlight>, a position of a master setup frame <highlight><bold>640</bold></highlight> at an end of the setup joint arms <highlight><bold>632</bold></highlight> on which the master <highlight><bold>700</bold></highlight> is mounted, relative to the station frame <highlight><bold>636</bold></highlight>, is determined, as indicated by the arrow <highlight><bold>638</bold></highlight> in dashed lines. The position and orientation of the master frame <highlight><bold>622</bold></highlight> on the master <highlight><bold>700</bold></highlight> having its origin at <highlight><bold>3</bold></highlight>A is then determined relative to the master setup frame <highlight><bold>640</bold></highlight>. In this manner, the position and orientation of the master frame <highlight><bold>622</bold></highlight> relative to the frame <highlight><bold>634</bold></highlight> can be determined by means of routine calculation using trigonometric relationships. The position and orientation of the eye frame <highlight><bold>612</bold></highlight> relative to the station frame <highlight><bold>634</bold></highlight> is determined in similar fashion. It will be appreciated that the position of the viewer <highlight><bold>202</bold></highlight> relative to the rest of the surgeon&apos;s console <highlight><bold>200</bold></highlight> can selectively be varied to suit the surgeon. The position and orientation of the master frame <highlight><bold>622</bold></highlight> relative to the eye frame <highlight><bold>612</bold></highlight> can then be determined from the position and orientation of the master frame <highlight><bold>622</bold></highlight> and the eye frame <highlight><bold>612</bold></highlight> relative to the surgeon station frame <highlight><bold>634</bold></highlight> by means of routine calculation using trigonometric relationships. </paragraph>
<paragraph id="P-0103" lvl="0"><number>&lsqb;0103&rsqb;</number> In the manner described above, the control system of the minimally invasive surgical apparatus determines the position and orientation of the end effector <highlight><bold>58</bold></highlight> by means of the end effector frame <highlight><bold>618</bold></highlight> in the camera frame <highlight><bold>610</bold></highlight>, and, likewise, determines the position and orientation of the master by means of the master frame <highlight><bold>622</bold></highlight> relative to the eye frame <highlight><bold>612</bold></highlight>. </paragraph>
<paragraph id="P-0104" lvl="0"><number>&lsqb;0104&rsqb;</number> As mentioned, the surgeon grips the master by locating his or her thumb and index finger over the pincher formation <highlight><bold>706</bold></highlight>. When the surgeon&apos;s thumb and index finger are located on the pincher formation, the point of intersection <highlight><bold>3</bold></highlight>A is positioned inwardly of the thumb and index finger tips. The master frame having its origin at <highlight><bold>3</bold></highlight>A is effectively mapped onto the end effector frame <highlight><bold>618</bold></highlight>, having its origin at the pivotal connection <highlight><bold>60</bold></highlight> of the end effector <highlight><bold>58</bold></highlight> as viewed by the surgeon in the viewer <highlight><bold>202</bold></highlight>. Thus, when performing the surgical procedure, and the surgeon manipulates the position and orientation of the pincher formation <highlight><bold>706</bold></highlight> to cause the position and orientation of the end effector <highlight><bold>58</bold></highlight> to follow, it appears to the surgeon that his or her thumb and index finger are mapped onto the fingers of the end effector <highlight><bold>58</bold></highlight> and that the pivotal connection <highlight><bold>60</bold></highlight> of the end effector <highlight><bold>58</bold></highlight> corresponds with a virtual pivot point of the surgeon&apos;s thumb and index finger inwardly from the tips of the thumb and index finger. It will be appreciated that depending upon the actual configuration of the pincher formation, in particular the point of intersection of the axes <highlight><bold>1</bold></highlight> and <highlight><bold>3</bold></highlight> relative to the position of the pincher formation <highlight><bold>706</bold></highlight>, the frame <highlight><bold>622</bold></highlight> on the master <highlight><bold>700</bold></highlight> can be offset from the intersection <highlight><bold>3</bold></highlight>A so as to approach a point relative to the surgeon&apos;s hand at which point the pivotal connection <highlight><bold>60</bold></highlight> approximately corresponds. </paragraph>
<paragraph id="P-0105" lvl="0"><number>&lsqb;0105&rsqb;</number> Accordingly, as the surgical procedure is being performed the position and orientation of the fingers of the end effector tracks orientation and position changes of the surgeon&apos;s thumb and index finger in a natural intuitive or superimposed fashion. Furthermore, actuation of the end effector <highlight><bold>58</bold></highlight>, namely causing the end effector fingers selectively to open and close, corresponds intuitively to the opening and closing of the surgeon&apos;s thumb and index finger. Thus, actuation of the end effector <highlight><bold>58</bold></highlight> as viewed in the viewer <highlight><bold>302</bold></highlight> is performed by the surgeon in a natural intuitive manner, since the pivot point <highlight><bold>60</bold></highlight> of the end effector <highlight><bold>58</bold></highlight> is appropriately mapped onto a virtual pivot point between the surgeon&apos;s thumb and index finger. </paragraph>
<paragraph id="P-0106" lvl="0"><number>&lsqb;0106&rsqb;</number> It will be appreciated that the end effector frame <highlight><bold>618</bold></highlight> can, where appropriate, be offset relative to the pivotal connection <highlight><bold>60</bold></highlight>. Thus, for example, should the end effector (as shown in the display) have fingers of a relatively long length, the origin of the end effector frame can be offset in a direction toward the end effector finger tips. It will also be appreciated that using positional and/or orientational offsets between the master frame <highlight><bold>622</bold></highlight> and the intersection <highlight><bold>3</bold></highlight>A, as well as between the end effector frame <highlight><bold>618</bold></highlight> and the pivotal connection <highlight><bold>60</bold></highlight>, the mapping of the pincher formation <highlight><bold>706</bold></highlight> onto the end effector <highlight><bold>58</bold></highlight> may be shifted, for example to map the tips of the pincher formation onto the tips of the end effector. These alternative mappings are illustrated in <cross-reference target="DRAWINGS">FIG. 11A</cross-reference>. </paragraph>
<paragraph id="P-0107" lvl="0"><number>&lsqb;0107&rsqb;</number> Generally, a first pincher element <highlight><bold>706</bold></highlight>A will preferably be substantially connected to a first end effector element <highlight><bold>58</bold></highlight>.<highlight><bold>1</bold></highlight>, while a second pincher element <highlight><bold>706</bold></highlight>B is substantially connected to a second end effector element <highlight><bold>58</bold></highlight>.<highlight><bold>2</bold></highlight>. Optionally, point <highlight><bold>3</bold></highlight>A (which is ideally near the center of rotation of the gimbal structure of master <highlight><bold>700</bold></highlight>, <highlight><bold>706</bold></highlight>A, and <highlight><bold>706</bold></highlight>B), adjacent the pivotal connection between the pincher elements, may be substantially connected with pivotal connection <highlight><bold>60</bold></highlight> on the slave. This also effectively provides a substantial connection between the pivot point on the surgeon&apos;s hand H and pivotal connection <highlight><bold>60</bold></highlight>, as the surgeon will often grip the master with the hand&apos;s pivot point (at the base of the surgeon&apos;s finger and thumb) disposed along the pivot point of the pincher. Alternatively, midpoint MP<highlight><bold>1</bold></highlight> disposed between the tips of the pincher elements may be substantially connected to midpoint MP<highlight><bold>2</bold></highlight> disposed between the tips of the end effector elements. Each of the higher levels of connection described herein may optionally be provided by this mapping. </paragraph>
<paragraph id="P-0108" lvl="0"><number>&lsqb;0108&rsqb;</number> <cross-reference target="DRAWINGS">FIGS. 11B and C</cross-reference> more clearly illustrate corresponding mapping points between the handle of the master controller and end effector of the slave, while <cross-reference target="DRAWINGS">FIG. 11C</cross-reference> schematically illustrates method steps for selecting these corresponding mapping points. In general, interchangeable end effectors having different end effector element lengths may be accommodated by varying the mapping point of the handle or the end effector. Such variation in mapping points may also be used when the magnification of the image shown at the display changes significantly. For example, substantial connection of pivotal connection <highlight><bold>60</bold></highlight> of the end effector and intersection <highlight><bold>3</bold></highlight>A of the handle may be appropriate when the end effector is shown at a first magnification, but may be inappropriate when magnification of the end effector is increased significantly, or when an alternative end effector having longer end effector elements is attached to the slave. In either circumstance, it may be appropriate to alter the master/slave interaction to substantially connect midpoint MP<highlight><bold>2</bold></highlight> of the master to midpoint MP<highlight><bold>1</bold></highlight>&prime; of the end effector, as illustrated in <cross-reference target="DRAWINGS">FIG. 11B</cross-reference>. </paragraph>
<paragraph id="P-0109" lvl="0"><number>&lsqb;0109&rsqb;</number> As a preliminary matter, it is beneficial in robotic surgery systems to provide a master controller having a gimbal point GP adjacent the handle to be gripped by the surgeon. This avoids large master inertia when the surgeon rapidly rotates the handle, as often occurs during surgical procedures. By having a master which has multiple degrees of freedom intersecting at the gimbal point GP (ideally having three orientational degrees of freedom intersecting at the gimbal point), and by having the gimbal point coincident with the handle, inertia of rapid rotational movements at the master can be quite low. </paragraph>
<paragraph id="P-0110" lvl="0"><number>&lsqb;0110&rsqb;</number> As described above, it is often beneficial to coordinate movements of the slave so that an image of pivotal connection <highlight><bold>60</bold></highlight> of the slave appears substantially connected to pincher formation pivot point <highlight><bold>3</bold></highlight>A between the pincher or grip elements <highlight><bold>706</bold></highlight>A, <highlight><bold>706</bold></highlight>B. However, when end effector elements <highlight><bold>58</bold></highlight>.<highlight><bold>1</bold></highlight>, <highlight><bold>58</bold></highlight>.<highlight><bold>2</bold></highlight> extend a considerable distance beyond pivotal connection <highlight><bold>60</bold></highlight> (as shown in the display adjacent the master controller), the surgeon may feel that manipulation of these long end effector elements from the distant pivotal connection becomes awkward. Similarly, when manipulating a single end effector element such as a scalpel which is much longer (as displayed at the master control station) than the master handle, the surgeon may be given the impression of cutting with a long-handled sword, rather than an easily controlled scalpel. As described above, one alternative to overcome an awkward disparity in grip/end effector lengths is to map the surgical workspace and master controller workspace together so that the midpoints MP<highlight><bold>1</bold></highlight>, MP<highlight><bold>2</bold></highlight> between the end effector jaw ends and the handle grip member ends are substantially connected. By mapping the surgical and master workspace so that these midpoints are substantially connected, the surgeon can coordinate movement using the end effector despite significant differences in length between the end effector elements and the grip elements. </paragraph>
<paragraph id="P-0111" lvl="0"><number>&lsqb;0111&rsqb;</number> The mapping point need not be limited to any particular point. In the exemplary embodiment, a middle axis of the grip members MAG is generally defined midway between pincher elements <highlight><bold>706</bold></highlight>A, <highlight><bold>706</bold></highlight>B, while a similar middle axis of the end effector MAE is defined midway between the end effector elements <highlight><bold>58</bold></highlight>.<highlight><bold>1</bold></highlight>, <highlight><bold>58</bold></highlight>.<highlight><bold>2</bold></highlight>. The mapping point (or point of substantial connection) of the master will preferably be disposed along gripping middle axis MAG, ideally in a range from intersection <highlight><bold>3</bold></highlight>A to midpoint MP<highlight><bold>2</bold></highlight>. Similarly, the mapping or substantial connection point of the end effector will preferably be disposed along middle axis MAE, ideally in a range from pivotal connection <highlight><bold>60</bold></highlight> to midpoint MP<highlight><bold>1</bold></highlight>. </paragraph>
<paragraph id="P-0112" lvl="0"><number>&lsqb;0112&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 11C</cross-reference> schematically illustrates a method for determining the location of the substantially connected mapping points along the handle and end effector. First, the location of the surgeon&apos;s hand along the master handle is reviewed to determine the position of the surgeon&apos;s fingers relative to the gimbal point GP. In one embodiment, the offset distance between a location of the surgeon&apos;s fingertips and the gimbal point GP defines an offset distance. This offset distance is scaled using a scaling factor, typically using a ratio between a length of the grip members and the length of the end effector elements, a magnification of the display, or the like. For example, using numbers typical of the exemplary robotic surgery system, the offset distance is scaled by multiplying it by one-third, as the grip members typically have a length of about three times the end effector element lengths. This scaling factor may change with tool changes (when end effectors having longer or shorter end effector elements are used), or the like. The location of the mapping points on the slave can then be calculated, for example, at a position offset from midpoint MP<highlight><bold>1</bold></highlight> toward pivotal connection <highlight><bold>60</bold></highlight> along the end effector middle axis MAE by the scaled offset distance. This mapping point of the end effector may then be substantially connected to gimbal point GP of the master. </paragraph>
<paragraph id="P-0113" lvl="0"><number>&lsqb;0113&rsqb;</number> It will be appreciated that the cart frame <highlight><bold>624</bold></highlight> can be chosen at any convenient location in which its origin corresponds with a location on the cart <highlight><bold>300</bold></highlight> which does not vary relative to its base <highlight><bold>99</bold></highlight>. The surgeon&apos;s station frame <highlight><bold>634</bold></highlight> can likewise be chosen at any convenient location such that its origin is located at a position which does not vary relative to a base <highlight><bold>642</bold></highlight> thereof. Furthermore, to determine the position and orientation of the camera frame <highlight><bold>610</bold></highlight> relative to the cart frame <highlight><bold>624</bold></highlight>, use can be made of a plurality of different intermediate frame paths. To determine the position and orientation of the end effector frame <highlight><bold>618</bold></highlight> relative to the cart frame <highlight><bold>624</bold></highlight> use can also be made of a plurality of different intermediate frame paths. </paragraph>
<paragraph id="P-0114" lvl="0"><number>&lsqb;0114&rsqb;</number> However, it has been found that should the intermediate frame paths be appropriately selected, the control system is then arranged to be readily adaptable to accommodate modular replacement of modular parts having different characteristics than the modular parts being replaced. It will be appreciated that selecting intermediate frames also eases the computational process involved in determining master and slave position and orientation. </paragraph>
<paragraph id="P-0115" lvl="0"><number>&lsqb;0115&rsqb;</number> Referring again to <cross-reference target="DRAWINGS">FIG. 10</cross-reference> of the drawings, the cart frame is chosen at <highlight><bold>624</bold></highlight>, as already mentioned. It will be appreciated that determining the position of the fulcrum frame <highlight><bold>630</bold></highlight> relative to the cart frame <highlight><bold>624</bold></highlight> is achieved through appropriately positioned sensors, such as potentiometers, encoders, or the like. Conveniently, the fulcrum frame position <highlight><bold>630</bold></highlight> relative to the cart frame <highlight><bold>624</bold></highlight> is determined through two intermediate frames. One of the frames is a carriage guide frame <highlight><bold>644</bold></highlight> which has its origin at a convenient location on a guide along which the carriage <highlight><bold>97</bold></highlight> is guided. The other frame, an arm platform frame indicated at <highlight><bold>646</bold></highlight> is positioned at an end of the setup joint arm <highlight><bold>95</bold></highlight> on which the robotic arm <highlight><bold>12</bold></highlight> is mounted. Thus, when slave position and orientation is determined relative to the cart frame <highlight><bold>624</bold></highlight>, the carriage guide frame <highlight><bold>644</bold></highlight> position relative to the cart frame <highlight><bold>624</bold></highlight> is determined, then the platform frame <highlight><bold>646</bold></highlight> position relative to the carriage guide frame <highlight><bold>644</bold></highlight>, then the fulcrum frame <highlight><bold>630</bold></highlight> relative to the platform frame <highlight><bold>646</bold></highlight>, and then the slave orientation and position relative to the fulcrum frame <highlight><bold>630</bold></highlight>, thereby to determine the slave position and orientation relative to the cart frame <highlight><bold>624</bold></highlight>. It will be appreciated that the slave position and orientation relative to the cart frame <highlight><bold>624</bold></highlight> is determined in this manner for each arm <highlight><bold>10</bold></highlight> and in similar fashion for the camera frame <highlight><bold>610</bold></highlight>, through its arm <highlight><bold>302</bold></highlight>, relative to the cart frame <highlight><bold>624</bold></highlight>. </paragraph>
<paragraph id="P-0116" lvl="0"><number>&lsqb;0116&rsqb;</number> Referring to <cross-reference target="DRAWINGS">FIG. 11</cross-reference>, the position and orientation of the master control is determined by determining the position of a base frame <highlight><bold>648</bold></highlight> relative to the surgeon&apos;s station frame <highlight><bold>634</bold></highlight>, then determining the position of the platform frame <highlight><bold>640</bold></highlight> relative to the base frame <highlight><bold>648</bold></highlight>, and then determining master position and orientation relative to the platform frame <highlight><bold>640</bold></highlight>. The position and orientation of the master frame <highlight><bold>622</bold></highlight> relative to the surgeon&apos;s station frame <highlight><bold>634</bold></highlight> is then readily determined through routine calculation using trigonometric relationships. It will be appreciated that the position and orientation of the other master frame relative to the surgeon console frame <highlight><bold>634</bold></highlight> is determined in a similar fashion. </paragraph>
<paragraph id="P-0117" lvl="0"><number>&lsqb;0117&rsqb;</number> Referring to <cross-reference target="DRAWINGS">FIG. 10</cross-reference>, by choosing the frames as described, the setup joint <highlight><bold>95</bold></highlight> can be replaced with another setup joint while the same robotic arm is used. The control system can then be programmed with information, e.g., arm lengths and/or the like, relating to the new setup joint only. Similarly, the robotic arm <highlight><bold>10</bold></highlight> can be replaced with another arm, the control system then requiring programming with information, e.g., fulcrum position and/or the like, relating to the new robotic arm only. It will be appreciated that in this way the endoscope arm <highlight><bold>302</bold></highlight> and its associated setup joint can also be independently replaced, the control system then requiring programming of information relating only to the part being replaced. Furthermore, referring to <cross-reference target="DRAWINGS">FIG. 11</cross-reference>, the setup joint and master control can also independently be replaced, the control system requiring programming of information relating to the characteristics of the new part only. </paragraph>
<paragraph id="P-0118" lvl="0"><number>&lsqb;0118&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 12</cross-reference> schematically illustrates a high level control architecture for a master/slave robotic system <highlight><bold>1000</bold></highlight>. Beginning at the operator input, a surgeon <highlight><bold>1002</bold></highlight> moves an input device of a master manipulator <highlight><bold>1004</bold></highlight> by applying manual or human forces &fnof;<highlight><subscript>h </subscript></highlight>against the input device. Encoders of master manipulator <highlight><bold>1004</bold></highlight> generate master encoder signals e<highlight><subscript>m </subscript></highlight>which are interpreted by a master input/output processor <highlight><bold>1006</bold></highlight> to determine the master joint positions &thgr;<highlight><subscript>m</subscript></highlight>. The master joint positions are used to generate Cartesian positions of the input device of the master x<highlight><subscript>m </subscript></highlight>using a master kinematics model <highlight><bold>1008</bold></highlight>. </paragraph>
<paragraph id="P-0119" lvl="0"><number>&lsqb;0119&rsqb;</number> Starting now with the input from the surgical environment <highlight><bold>1018</bold></highlight>, the tissue structures in the surgical workspace will impose forces &fnof;<highlight><subscript>e </subscript></highlight>against a surgical end effector (and possibly against other elements of the tool and/or manipulator). Environmental forces &fnof;<highlight><subscript>e </subscript></highlight>from the surgical environment <highlight><bold>1018</bold></highlight> alter position of the slave <highlight><bold>1016</bold></highlight>, thereby altering slave encoder values e<highlight><subscript>s </subscript></highlight>transmitted to the slave input/output processor <highlight><bold>1014</bold></highlight>. Slave input/output processor <highlight><bold>1014</bold></highlight> interprets the slave encoder values to determine joint positions &thgr;<highlight><subscript>s</subscript></highlight>, which are then used to generate Cartesian slave position signals x<highlight><subscript>s </subscript></highlight>according to the slave kinematics processing block <highlight><bold>1012</bold></highlight>. </paragraph>
<paragraph id="P-0120" lvl="0"><number>&lsqb;0120&rsqb;</number> The master and slave Cartesian positions x<highlight><subscript>m</subscript></highlight>, x<highlight><subscript>s </subscript></highlight>are input into bilateral controller <highlight><bold>1010</bold></highlight>, which uses these inputs to generate the desired Cartesian forces to be applied by the slave &fnof;<highlight><subscript>s </subscript></highlight>so that the surgeon can manipulate the salve as desired to perform a surgical procedure. Additionally, bilateral controller <highlight><bold>1010</bold></highlight> uses the Cartesian master and slave positions x<highlight><subscript>m</subscript></highlight>, x<highlight><subscript>s </subscript></highlight>to generate the desired Cartesian forces to be applied by the master &fnof;<highlight><subscript>m </subscript></highlight>so as to provide force feedback to the surgeon. </paragraph>
<paragraph id="P-0121" lvl="0"><number>&lsqb;0121&rsqb;</number> In general, bilateral controller <highlight><bold>1010</bold></highlight> will generate the slave and master forces &fnof;<highlight><subscript>s</subscript></highlight>,&fnof;<highlight><subscript>m </subscript></highlight>by mapping the Cartesian position of the master in the master controller workspace with the Cartesian position of the end effector in the surgical workspace according to a transformation. Preferably, the control system <highlight><bold>1000</bold></highlight> will derive the transformation in response to state variable signals provided from the imaging system so that an image of the end effector in a display appears substantially connected to the input device. These state variables will generally indicate the Cartesian position of the field of view from the image capture device, as supplied by the slave manipulators supporting the image capture device. Hence, coupling of the image capture manipulator and slave end effector manipulator is beneficial for deriving this transformation. Clearly, bilateral controller <highlight><bold>1010</bold></highlight> may be used to control more than one slave arm, and/or may be provided with additional inputs. </paragraph>
<paragraph id="P-0122" lvl="0"><number>&lsqb;0122&rsqb;</number> Based generally on the difference in position between the master and the slave in the mapped workspace, bilateral controller <highlight><bold>1010</bold></highlight> generates Cartesian slave force &fnof;<highlight><subscript>s </subscript></highlight>to urge the slave to follow the position of the master. The slave kinematics <highlight><bold>1012</bold></highlight> are used to interpret the Cartesian slave forces &fnof;<highlight><subscript>s </subscript></highlight>to generate joint torques of the slave &tgr;<highlight><subscript>s </subscript></highlight>which will result in the desired forces at the end effector. Slave input/output processor <highlight><bold>1014</bold></highlight> uses these joint torques to calculate slave motor currents i<highlight><subscript>s</subscript></highlight>, which reposition the slave x<highlight><subscript>e </subscript></highlight>within the surgical worksite. </paragraph>
<paragraph id="P-0123" lvl="0"><number>&lsqb;0123&rsqb;</number> The desired feedback forces from bilateral controller are similarly interpreted from Cartesian force on the master &fnof;<highlight><subscript>m </subscript></highlight>based on the master kinematics <highlight><bold>1008</bold></highlight> to generate master joint torques &tgr;<highlight><subscript>s</subscript></highlight>. The master joint torques are interpreted by the master input/output controller <highlight><bold>1006</bold></highlight> to provide master motor current i<highlight><subscript>m </subscript></highlight>to the master manipulator <highlight><bold>1004</bold></highlight>, which changes the position of the hand held input device x<highlight><subscript>h </subscript></highlight>in the surgeon&apos;s hand. </paragraph>
<paragraph id="P-0124" lvl="0"><number>&lsqb;0124&rsqb;</number> It will be recognized that the control system <highlight><bold>1000</bold></highlight> illustrated in <cross-reference target="DRAWINGS">FIG. 12</cross-reference> is a simplification. For example, the surgeon does not only apply forces against the master input device, but also moves the handle within the master workspace. Similarly, the motor current supplied to the motors of the master manipulator may not result in movement if the surgeon maintains the position of the master controller. Nonetheless, the motor currents do result in tactile force feedback to the surgeon based on the forces applied to the slave by the surgical environment. Additionally, while Cartesian coordinate mapping is preferred, the use of spherical, cylindrical, or other reference frames may provide at least some of the advantages of the invention. </paragraph>
<paragraph id="P-0125" lvl="0"><number>&lsqb;0125&rsqb;</number> Further aspects of the control system of the minimally invasive surgical apparatus will now be described with reference to <cross-reference target="DRAWINGS">FIG. 12A</cross-reference>. </paragraph>
<paragraph id="P-0126" lvl="0"><number>&lsqb;0126&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 12A</cross-reference> indicates the control steps whereby the control system of the minimally invasive surgical apparatus determines slave position and orientation, namely the position and orientation of the end effector frame <highlight><bold>618</bold></highlight> in the camera frame <highlight><bold>610</bold></highlight>. </paragraph>
<paragraph id="P-0127" lvl="0"><number>&lsqb;0127&rsqb;</number> The position or offsets of the carriage guide frame <highlight><bold>644</bold></highlight> relative to the cart frame <highlight><bold>624</bold></highlight> is indicated at <highlight><bold>621</bold></highlight>. The offsets at <highlight><bold>621</bold></highlight> are fed through a forward kinematics block (FKIN) at <highlight><bold>623</bold></highlight> to yield corresponding Cartesian coordinates of the frame <highlight><bold>644</bold></highlight> relative to the cart frame <highlight><bold>624</bold></highlight>. </paragraph>
<paragraph id="P-0128" lvl="0"><number>&lsqb;0128&rsqb;</number> Sensors <highlight><bold>625</bold></highlight> operatively associated with the setup joint arm <highlight><bold>95</bold></highlight> and sensors determining the height of the carriage <highlight><bold>97</bold></highlight>, are read by a processor <highlight><bold>627</bold></highlight> to determine translational and joint positions. The translational and joint positions are then input to an FKIN block <highlight><bold>629</bold></highlight> to determine corresponding Cartesian coordinates. At <highlight><bold>631</bold></highlight>, the Cartesian coordinates of the carriage guide frame <highlight><bold>644</bold></highlight> relative to the cart frame <highlight><bold>624</bold></highlight> and the Cartesian coordinates of the platform frame <highlight><bold>646</bold></highlight> relative to the carriage frame <highlight><bold>644</bold></highlight> are used to determine the Cartesian coordinates of the platform frame <highlight><bold>646</bold></highlight> relative to the cart frame <highlight><bold>624</bold></highlight>. </paragraph>
<paragraph id="P-0129" lvl="0"><number>&lsqb;0129&rsqb;</number> Since the position of the fulcrum <highlight><bold>49</bold></highlight> relative to the platform frame <highlight><bold>646</bold></highlight> does not change, an offset relative to the platform frame <highlight><bold>646</bold></highlight>, indicated at <highlight><bold>633</bold></highlight>, is input to an FKIN controller at <highlight><bold>635</bold></highlight> to yield Cartesian coordinates of the fulcrum frame <highlight><bold>630</bold></highlight> relative to the platform frame <highlight><bold>646</bold></highlight>. It will be appreciated that, where appropriate, the term FKIN controller is to be interpreted to include an appropriate conversion matrix and kinematic relationships. At <highlight><bold>637</bold></highlight>, the Cartesian coordinates of the fulcrum frame <highlight><bold>630</bold></highlight> relative to the cart frame <highlight><bold>624</bold></highlight> are determined by means of the values determined at <highlight><bold>631</bold></highlight> and <highlight><bold>635</bold></highlight> respectively. </paragraph>
<paragraph id="P-0130" lvl="0"><number>&lsqb;0130&rsqb;</number> It will be appreciated that, in similar fashion, the Cartesian coordinates of the fulcrum of the endoscope is determined relative to the cart frame <highlight><bold>624</bold></highlight>. This is indicated at <highlight><bold>639</bold></highlight>. </paragraph>
<paragraph id="P-0131" lvl="0"><number>&lsqb;0131&rsqb;</number> As mentioned, the position and orientation of the endoscope <highlight><bold>304</bold></highlight> can be varied. The position and orientation of the endoscope <highlight><bold>304</bold></highlight> can be varied during set up of the cart <highlight><bold>300</bold></highlight> before the surgical procedure commences or during the performance of a surgical procedure should the surgeon wish to view the surgical site from a different location. </paragraph>
<paragraph id="P-0132" lvl="0"><number>&lsqb;0132&rsqb;</number> To enable the control system to determine endoscope position and orientation relative to the cart frame <highlight><bold>624</bold></highlight>, sensors are provided on its associated arm <highlight><bold>302</bold></highlight>. These sensors, indicated at <highlight><bold>641</bold></highlight>, are read by a processor at <highlight><bold>643</bold></highlight> to determine joint positions. The joint positions thus determined are fed to an FKIN controller at <highlight><bold>645</bold></highlight>, together with the Cartesian coordinates determined at <highlight><bold>639</bold></highlight> to determine endoscope orientation and position relative to the cart frame <highlight><bold>624</bold></highlight>. These values are then input to <highlight><bold>647</bold></highlight> together with the values determined at <highlight><bold>637</bold></highlight>, so as to enable the fulcrum frame <highlight><bold>630</bold></highlight> of the slave to be determined relative to the camera frame <highlight><bold>610</bold></highlight>. </paragraph>
<paragraph id="P-0133" lvl="0"><number>&lsqb;0133&rsqb;</number> During the course of the surgical procedure, the slave orientation and position is normally constantly changing. Varying joint positions and velocities are fed into an FKIN controller at <highlight><bold>653</bold></highlight>, together with the Cartesian coordinate values of the slave position relative to the camera frame determined at <highlight><bold>647</bold></highlight> to yield Cartesian position and velocity of the slave, namely the end effector frame <highlight><bold>618</bold></highlight>, relative to the camera frame <highlight><bold>610</bold></highlight>, as indicated by arrows <highlight><bold>655</bold></highlight>, <highlight><bold>657</bold></highlight> respectively. For economy of words, Cartesian position is to be interpreted to include Cartesian orientation in the rest of this specification where appropriate. The varying joint positions and velocities are fed into the FKIN block <highlight><bold>653</bold></highlight> from a simulation domain as described in greater detail hereinbelow. </paragraph>
<paragraph id="P-0134" lvl="0"><number>&lsqb;0134&rsqb;</number> Referring now to <cross-reference target="DRAWINGS">FIG. 13</cross-reference>, master position and orientation relative to the viewer frame <highlight><bold>612</bold></highlight> will now be described. </paragraph>
<paragraph id="P-0135" lvl="0"><number>&lsqb;0135&rsqb;</number> The base frame <highlight><bold>648</bold></highlight> normally does not change relative to the surgeon station frame <highlight><bold>634</bold></highlight>. Similarly, the frame at <highlight><bold>640</bold></highlight> normally does not change relative to the base frame <highlight><bold>648</bold></highlight>. As mentioned, setup joints can optionally be provided at <highlight><bold>632</bold></highlight> if desired. For the sake of the description which follows, the position of the frame at <highlight><bold>640</bold></highlight> relative to the base frame <highlight><bold>648</bold></highlight> is assumed to be unchangeable. Naturally, if setup joint arms are provided at <highlight><bold>632</bold></highlight>, appropriate sensors would then be provided to enable the position of the frame at <highlight><bold>640</bold></highlight> to be determined relative to the frame at <highlight><bold>648</bold></highlight>. </paragraph>
<paragraph id="P-0136" lvl="0"><number>&lsqb;0136&rsqb;</number> Referring now to <cross-reference target="DRAWINGS">FIG. 13</cross-reference>, offsets determining the frame <highlight><bold>648</bold></highlight> position relative to the surgeon station frame <highlight><bold>634</bold></highlight>, as indicated at <highlight><bold>659</bold></highlight>, are fed through an FKIN controller <highlight><bold>665</bold></highlight> to yield Cartesian coordinates of the base frame <highlight><bold>648</bold></highlight> relative to the surgeon station frame <highlight><bold>634</bold></highlight>. Similarly, offsets relating to frame <highlight><bold>640</bold></highlight> position relative to base frame <highlight><bold>648</bold></highlight> position, as indicated at <highlight><bold>661</bold></highlight>, are fed through an FKIN controller at <highlight><bold>663</bold></highlight> to yield Cartesian coordinates of the frame <highlight><bold>640</bold></highlight> relative to the base frame <highlight><bold>648</bold></highlight>. From the values derived at <highlight><bold>665</bold></highlight>, <highlight><bold>663</bold></highlight>, the Cartesian coordinates of the frame <highlight><bold>640</bold></highlight> relative to the surgeon station frame <highlight><bold>634</bold></highlight> are determined at <highlight><bold>667</bold></highlight>. </paragraph>
<paragraph id="P-0137" lvl="0"><number>&lsqb;0137&rsqb;</number> Offsets at <highlight><bold>697</bold></highlight> relating to a viewer base frame, not indicated in <cross-reference target="DRAWINGS">FIG. 11</cross-reference>, are fed through an FKIN controller at <highlight><bold>669</bold></highlight> to yield corresponding Cartesian coordinates of the base frame relative to the frame <highlight><bold>634</bold></highlight>. The viewer <highlight><bold>202</bold></highlight> can be positionally adjustable relative to the rest of the operator station <highlight><bold>200</bold></highlight>. To enable a viewer position relative to the viewer base frame to be determined, appropriately positioned sensors <highlight><bold>671</bold></highlight> are provided. Sensor readings from these sensors at <highlight><bold>671</bold></highlight> are processed at <highlight><bold>673</bold></highlight> to determine joint or translational positions which are then fed through an FKIN controller at <highlight><bold>675</bold></highlight> to yield Cartesian coordinates of the viewer frame relative to the viewer base frame. At <highlight><bold>677</bold></highlight>, the viewer frame position in Cartesian coordinates relative to the surgeon station frame <highlight><bold>634</bold></highlight> are determined from the values derived at <highlight><bold>669</bold></highlight> and <highlight><bold>675</bold></highlight> respectively. </paragraph>
<paragraph id="P-0138" lvl="0"><number>&lsqb;0138&rsqb;</number> Offsets corresponding to the position of the surgeon&apos;s eyes relative to the viewer frame at <highlight><bold>679</bold></highlight> are fed through an FKIN controller at <highlight><bold>681</bold></highlight> to yield Cartesian coordinates of the position of the surgeon&apos;s eyes relative to the viewer frame. At <highlight><bold>683</bold></highlight>, the values from <highlight><bold>677</bold></highlight> and <highlight><bold>681</bold></highlight> are used to determine the surgeon&apos;s eye frame <highlight><bold>612</bold></highlight> relative to the surgeon station frame <highlight><bold>634</bold></highlight>. </paragraph>
<paragraph id="P-0139" lvl="0"><number>&lsqb;0139&rsqb;</number> At <highlight><bold>685</bold></highlight>, the values from <highlight><bold>667</bold></highlight> and <highlight><bold>683</bold></highlight> are used to determine the position of the frame <highlight><bold>640</bold></highlight> relative to the eye frame <highlight><bold>612</bold></highlight>. </paragraph>
<paragraph id="P-0140" lvl="0"><number>&lsqb;0140&rsqb;</number> Naturally, master position and orientation relative to the eye frame <highlight><bold>612</bold></highlight> is continually changing during the course of a surgical procedure. The sensors on the master <highlight><bold>700</bold></highlight>, indicated at <highlight><bold>687</bold></highlight>, are read by a processor at <highlight><bold>689</bold></highlight> to determine master joint position and velocity. These joint position and velocity values are then fed through an FKIN controller at <highlight><bold>691</bold></highlight>, together with the value derived at <highlight><bold>685</bold></highlight> to yield master Cartesian position and velocity values <highlight><bold>693</bold></highlight>, <highlight><bold>695</bold></highlight> relating to Cartesian position and velocity of master frame <highlight><bold>622</bold></highlight>, relative to the eye frame <highlight><bold>612</bold></highlight>. </paragraph>
<paragraph id="P-0141" lvl="0"><number>&lsqb;0141&rsqb;</number> At the commencement of a surgical procedure, an initial position of the master <highlight><bold>700</bold></highlight> is set to correspond with an initial position of the slave. Thereafter, as the master <highlight><bold>700</bold></highlight> is moved, the control system monitors such movement and commands the slave to track the master movement. Thus, at the commencement of a surgical procedure, the frame <highlight><bold>618</bold></highlight> on the slave at the pivotal connection <highlight><bold>60</bold></highlight>, relative to its reference frame <highlight><bold>610</bold></highlight> at the viewing end <highlight><bold>306</bold></highlight> of the endoscope <highlight><bold>304</bold></highlight>, at the initial position, is mapped onto the master frame <highlight><bold>622</bold></highlight> relative to its reference eye frame <highlight><bold>612</bold></highlight> at its initial position. Similarly, the system maps an initial orientation of the pincher formation frame <highlight><bold>622</bold></highlight> with an initial orientation of the end effector frame <highlight><bold>618</bold></highlight>. Thus, the orientation of the end effector frame <highlight><bold>618</bold></highlight> is also caused to track the orientation of the master frame <highlight><bold>622</bold></highlight>. The position and orientation of the slave in the camera frame <highlight><bold>610</bold></highlight> need not correspond identically with the position and orientation of the master in the eye frame <highlight><bold>612</bold></highlight>. Accordingly, offsets can be introduced relating to the orientation and the position of the end effector frame <highlight><bold>618</bold></highlight> relative to the camera frame <highlight><bold>610</bold></highlight> to define an arbitrary end effector frame position and orientation which corresponds to a master frame <highlight><bold>622</bold></highlight> position and orientation in the eye frame <highlight><bold>612</bold></highlight>. It will be appreciated that the control system can readily determine the orientation and the position of the end effector frame <highlight><bold>618</bold></highlight> relative to the camera frame <highlight><bold>610</bold></highlight> at which it is to correspond with that of the master frame relative to the eye frame by means of the frames and offsets discussed above. Thus, even during the course of a surgical procedure, if the control between master and slave is interrupted and the endoscope is moved, or one or both of the surgical instruments are repositioned through different ports of entry, or the master positions are changed at the surgeon&apos;s console, or the like, re-mapping of slave relative to master in their respective camera and eye frames can readily be achieved by the control system. </paragraph>
<paragraph id="P-0142" lvl="0"><number>&lsqb;0142&rsqb;</number> The control system, generally indicated by reference numeral <highlight><bold>810</bold></highlight>, will now be described in greater detail with reference to <cross-reference target="DRAWINGS">FIG. 14</cross-reference> of the drawings, in which like reference numerals are used to designate similar parts or aspects, unless otherwise stated. </paragraph>
<paragraph id="P-0143" lvl="0"><number>&lsqb;0143&rsqb;</number> As mentioned earlier, the master control <highlight><bold>700</bold></highlight> has sensors, e.g., encoders, or potentiometers, or the like, associated therewith to enable the control system <highlight><bold>810</bold></highlight> to determine the position of the master control <highlight><bold>700</bold></highlight> in joint space as it is moved from one position to a next position on a continual basis during the course of performing a surgical procedure. In <cross-reference target="DRAWINGS">FIG. 14</cross-reference>, signals from these positional sensors are indicated by arrow <highlight><bold>814</bold></highlight>. Positional readings measured by the sensors at <highlight><bold>687</bold></highlight> are read by the processor indicated at <highlight><bold>689</bold></highlight> (refer to <cross-reference target="DRAWINGS">FIG. 13</cross-reference>). It will be appreciated that since the master control <highlight><bold>700</bold></highlight> includes a plurality of joints connecting one arm member thereof to the next, sufficient positional sensors are provided on the master <highlight><bold>700</bold></highlight> to enable the angular position of each arm member relative to the arm member to which it is joined to be determined thereby to enable the position and orientation of the master frame <highlight><bold>622</bold></highlight> on the master to be determined. As the angular positions of one arm member relative to the arm member to which it is joined is read cyclically by the processor <highlight><bold>689</bold></highlight> in response to movements induced on the master control <highlight><bold>700</bold></highlight> by the surgeon, the angular positions are continuously changing. The processor at <highlight><bold>689</bold></highlight> reads these angular positions and computes the rate at which these angular positions are changing. Thus, the processor <highlight><bold>689</bold></highlight> reads angular positions and computes the rate of angular change, or joint velocity, on a continual basis corresponding to the system processing cycle time, i.e., 1300 Hz. Joint position and joint velocity commands thus computed at <highlight><bold>689</bold></highlight> are then input to the Forward Kinematics (FKIN) controller at <highlight><bold>691</bold></highlight>, as already described hereinabove. </paragraph>
<paragraph id="P-0144" lvl="0"><number>&lsqb;0144&rsqb;</number> At the FKIN controller <highlight><bold>691</bold></highlight>, the positions and velocities in joint space are transformed into corresponding positions and velocities in Cartesian space, relative to the eye frame <highlight><bold>612</bold></highlight> (refer to <cross-reference target="DRAWINGS">FIGS. 11 and 13</cross-reference>). The FKIN controller <highlight><bold>691</bold></highlight> is a processor which typically employs a Jacobian (J) matrix to accomplish this. It will be appreciated that the Jacobian matrix transforms angular positions and velocities into corresponding positions and velocities in Cartesian space by means of conventional trigonometric relationships. Thus, corresponding positions and velocities in Cartesian space, or Cartesian velocity and position commands, are computed by the FKIN controller <highlight><bold>691</bold></highlight> which correspond to Cartesian position and velocity changes of the master frame <highlight><bold>622</bold></highlight> in the eye frame <highlight><bold>612</bold></highlight>. </paragraph>
<paragraph id="P-0145" lvl="0"><number>&lsqb;0145&rsqb;</number> The velocity and the position in Cartesian space is input into a Cartesian controller, indicated at <highlight><bold>820</bold></highlight>, and into a scale and offset converter, indicated at <highlight><bold>822</bold></highlight>. </paragraph>
<paragraph id="P-0146" lvl="0"><number>&lsqb;0146&rsqb;</number> The minimally invasive surgical apparatus provides for a scale change between master control input movement and responsive slave output movement. Thus, a scale can be selected where, for example, a 1-inch movement of the master control <highlight><bold>700</bold></highlight> is transformed into a corresponding responsive &frac15;-inch movement on the slave. At the scale and offset step <highlight><bold>822</bold></highlight>, the Cartesian position and velocity values are scaled in accordance with the scale selected to perform the surgical procedure. Naturally, if a scale of 1:1 has been selected, no change in scale is effected at <highlight><bold>822</bold></highlight>. Similarly, offsets are taken into account which determine the corresponding position and/or orientation of the end effector frame <highlight><bold>618</bold></highlight> in the camera frame <highlight><bold>610</bold></highlight> relative to the position and orientation of the master frame <highlight><bold>622</bold></highlight> in the eye frame <highlight><bold>612</bold></highlight>. </paragraph>
<paragraph id="P-0147" lvl="0"><number>&lsqb;0147&rsqb;</number> After a scale and offset step is performed at <highlight><bold>822</bold></highlight>, a resultant desired slave position and desired slave velocity in Cartesian space is input to a simulated or virtual domain at <highlight><bold>812</bold></highlight>, as indicated by arrows <highlight><bold>811</bold></highlight>. It will be appreciated that the labeling of the block <highlight><bold>812</bold></highlight> as a simulated or virtual domain is for identification only. Accordingly, the simulated control described hereinbelow is performed by elements outside the block <highlight><bold>812</bold></highlight> also. </paragraph>
<paragraph id="P-0148" lvl="0"><number>&lsqb;0148&rsqb;</number> The simulated domain <highlight><bold>812</bold></highlight> will be described in greater detail hereinbelow. However, the steps imposed on the desired slave velocity and position in the virtual domain <highlight><bold>812</bold></highlight> will now be described broadly for ease of understanding of the description which follows. A current slave position and velocity is continually monitored in the virtual or simulated domain <highlight><bold>812</bold></highlight>. The desired slave position and velocity is compared with the current slave position and velocity. Should the desired slave position and/or velocity as input from <highlight><bold>822</bold></highlight> not cause transgression of limitations, e.g., velocity and/or position and/or singularity, and/or the like, as set in the virtual domain <highlight><bold>812</bold></highlight>, a similar Cartesian slave velocity and position is output from the virtual domain <highlight><bold>812</bold></highlight> and input into an inverse scale and offset converter as indicated at <highlight><bold>826</bold></highlight>. The similar velocity and position output in Cartesian space from the virtual domain <highlight><bold>812</bold></highlight> is indicated by arrows <highlight><bold>813</bold></highlight> and corresponds with actual commands in joint space output from the virtual domain <highlight><bold>812</bold></highlight> as indicated by arrows <highlight><bold>815</bold></highlight> as will be described in greater detail hereinbelow. From the inverse scale and offset converter <highlight><bold>826</bold></highlight>, which performs the scale and offset step of <highlight><bold>822</bold></highlight> in reverse, the reverted Cartesian position and velocity is input into the Cartesian controller at <highlight><bold>820</bold></highlight>. At the Cartesian controller <highlight><bold>820</bold></highlight>, the original Cartesian position and velocities as output from the FKIN controller <highlight><bold>691</bold></highlight> is compared with the Cartesian position and velocity input from the simulated domain <highlight><bold>812</bold></highlight>. If no limitations were transgressed in the simulated domain <highlight><bold>812</bold></highlight> the velocity and position values input from the FKIN controller <highlight><bold>691</bold></highlight> would be the same as the velocity and position values input from the simulated domain <highlight><bold>812</bold></highlight>. In such a case, a zero error signal is generated by the Cartesian controller <highlight><bold>820</bold></highlight>. </paragraph>
<paragraph id="P-0149" lvl="0"><number>&lsqb;0149&rsqb;</number> In the event that the desired Cartesian slave position and velocity input at <highlight><bold>811</bold></highlight> would transgress one or more set limitations, the desired values are restricted to stay within the bounds of the limitations. Consequently, the Cartesian velocity and position forwarded from the simulated domain <highlight><bold>812</bold></highlight> to the Cartesian controller <highlight><bold>820</bold></highlight> would then not be the same as the values from the FKIN controller <highlight><bold>691</bold></highlight>. In such a case, when the values are compared by the Cartesian controller <highlight><bold>820</bold></highlight>, an error signal is generated. </paragraph>
<paragraph id="P-0150" lvl="0"><number>&lsqb;0150&rsqb;</number> The type of limitations imposed on the desired slave Cartesian position and velocity will be described in greater detail hereinbelow. </paragraph>
<paragraph id="P-0151" lvl="0"><number>&lsqb;0151&rsqb;</number> Assuming that a zero error is generated at the Cartesian controller <highlight><bold>820</bold></highlight> no signal is passed from the Cartesian controller or converter <highlight><bold>820</bold></highlight>. In the case that an error signal is generated the signal is passed through a summation junction <highlight><bold>827</bold></highlight> to a master transpose kinematics controller <highlight><bold>828</bold></highlight>. </paragraph>
<paragraph id="P-0152" lvl="0"><number>&lsqb;0152&rsqb;</number> The error signal is typically used to calculate a Cartesian force. The Cartesian force is typically calculated, by way of example, in accordance with the following formula: </paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>F</italic></highlight><highlight><subscript>CART</subscript></highlight><highlight><italic>&equals;K</italic></highlight>(&Dgr;<highlight><italic>x</italic></highlight>)&plus;<highlight><italic>B</italic></highlight>(&Dgr;<highlight><italic>{dot over (x)}) </italic></highlight></in-line-formula></paragraph>
<paragraph id="P-0153" lvl="0"><number>&lsqb;0153&rsqb;</number> where K is a spring constant, B is a damping constant, &Dgr;{dot over (x)} is the difference between the Cartesian velocity inputs to the Cartesian controller <highlight><bold>820</bold></highlight> and &Dgr;x is the difference between the Cartesian position inputs to the Cartesian controller <highlight><bold>820</bold></highlight>. It will be appreciated that for an orientational error, a corresponding torque in Cartesian space is determined in accordance with conventional methods. </paragraph>
<paragraph id="P-0154" lvl="0"><number>&lsqb;0154&rsqb;</number> The Cartesian force corresponds to an amount by which the desired slave position and/or velocity extends beyond the limitations imposed in the simulated domain <highlight><bold>812</bold></highlight>. The Cartesian force, which could result from a velocity limitation, a positional limitation, and/or a singularity limitation, as described in greater detail below, is then converted into a corresponding torque signal by means of the master transpose kinematics controller <highlight><bold>828</bold></highlight> which typically includes a processor employing a Jacobian Transpose (JT) matrix and kinematic relationships to convert the Cartesian force to a corresponding torque in joint space. The torque thus determined is then input to a processor at <highlight><bold>830</bold></highlight> whereby appropriate electrical currents to the motors associated with the master <highlight><bold>700</bold></highlight> are computed and supplied to the motors. These torques are then applied on the motors operatively associated with the master control <highlight><bold>700</bold></highlight>. The effect of this is that the surgeon experiences a resistance on the master control to either move it at the rate at which he or she is urging the master control to move, or to move it into the position into which he or she is urging the master control to move. The resistance to movement on the master control is due to the torque on the motors operatively associated therewith. Accordingly, the higher the force applied on the master control to urge the master control to move to a position beyond the imposed limitation, the higher the magnitude of the error signal and the higher an opposing torque on the motors resisting displacement of the master control in the direction of that force. Similarly, the higher the velocity imposed on the master beyond the velocity limitation, the higher the error signal and the higher the opposing torque on the motors associated with the master. </paragraph>
<paragraph id="P-0155" lvl="0"><number>&lsqb;0155&rsqb;</number> The imposition of the limitations in the simulated domain <highlight><bold>812</bold></highlight> will now be described in greater detail with reference to <cross-reference target="DRAWINGS">FIG. 15</cross-reference> of the drawings. In <cross-reference target="DRAWINGS">FIG. 15</cross-reference>, like reference numerals are used to designate similar parts or aspects, unless otherwise stated. </paragraph>
<paragraph id="P-0156" lvl="0"><number>&lsqb;0156&rsqb;</number> The slave desired Cartesian velocity is passed from the scale and offset converter <highlight><bold>822</bold></highlight> through a summation junction at <highlight><bold>832</bold></highlight>. It will be appreciated that the slave desired Cartesian velocity is passed through the summation junction <highlight><bold>832</bold></highlight> sequentially at the rate of the control system processing cycle, namely 1300 Hz. At the junction <highlight><bold>832</bold></highlight>, an error signal is imparted on the slave desired Cartesian velocity when the desired velocity of a prior desired Cartesian velocity signal would have instructed the simulated slave to transgress one or more limitations. This will be described in greater detail hereinbelow. If the prior desired slave velocity would not have caused a transgression, no error signal would have been generated and the desired slave velocity would then pass through the summation junction <highlight><bold>832</bold></highlight> unchanged. The velocity signal passed from the summation junction <highlight><bold>832</bold></highlight> is referred to as Cartesian reference velocity as indicated by arrow <highlight><bold>833</bold></highlight>. </paragraph>
<paragraph id="P-0157" lvl="0"><number>&lsqb;0157&rsqb;</number> From the summation junction <highlight><bold>832</bold></highlight>, the Cartesian reference velocity is fed to a simulation block <highlight><bold>834</bold></highlight>. The reference velocity is then compared with the limitations in the simulation block <highlight><bold>834</bold></highlight>, as will be described in greater detail hereinbelow with reference to FIGS. <highlight><bold>16</bold></highlight> to <highlight><bold>21</bold></highlight> of the drawings. </paragraph>
<paragraph id="P-0158" lvl="0"><number>&lsqb;0158&rsqb;</number> In the case where the slave reference velocity does not transgress a limitation, the slave reference velocity passes through the simulation block <highlight><bold>834</bold></highlight> unchanged. However, a corresponding simulated slave joint velocity is computed in the simulation block <highlight><bold>834</bold></highlight>. </paragraph>
<paragraph id="P-0159" lvl="0"><number>&lsqb;0159&rsqb;</number> The simulated joint velocity is integrated in the simulation block <highlight><bold>834</bold></highlight> to yield a corresponding simulated joint position. The simulated joint velocity and position is output from the simulation block <highlight><bold>834</bold></highlight> as indicated by arrows <highlight><bold>835</bold></highlight>. </paragraph>
<paragraph id="P-0160" lvl="0"><number>&lsqb;0160&rsqb;</number> The simulated joint velocity and position is then passed through a filter at <highlight><bold>838</bold></highlight>. The filter <highlight><bold>838</bold></highlight> is arranged to separate tremors from the velocity and position signals. It will be appreciated that such tremors could result from inadvertent shaking of the master control which can be induced on the master control by the surgeon. Since it would be desirable to remove such tremor movements from the actual slave velocity and position signals so as to enhance slave precisional movement in response to master input, these tremors are filtered from the velocity and position signals by means of the filter <highlight><bold>838</bold></highlight>. After the filtering step at <highlight><bold>838</bold></highlight>, resultant slave joint velocity and position signals are passed to the slave as indicated by arrows <highlight><bold>815</bold></highlight> and as will be described in greater detail hereinbelow. It will be appreciated that the simulated slave joint position and/or velocity signal can be modified in any desired manner at <highlight><bold>838</bold></highlight>. Typically, modifications not requiring feedback to the master can be implemented at <highlight><bold>838</bold></highlight>. Thus, the filtering step <highlight><bold>838</bold></highlight> is not necessarily limited to filtering tremors from the signal only. In addition, or instead, the frequency of the position and/or velocity signals may be modified to inhibit resonance in the slave, for example. </paragraph>
<paragraph id="P-0161" lvl="0"><number>&lsqb;0161&rsqb;</number> Still referring to <cross-reference target="DRAWINGS">FIG. 15</cross-reference> of the drawings, the simulated joint velocity and position, after passing through the simulation block <highlight><bold>834</bold></highlight>, is routed through an FKIN controller at <highlight><bold>653</bold></highlight> to compute corresponding velocities and positions in Cartesian space, as described with reference to <cross-reference target="DRAWINGS">FIG. 12A</cross-reference> of the drawings. The signals are then passed to the Cartesian controller <highlight><bold>820</bold></highlight> as already described with reference to <cross-reference target="DRAWINGS">FIG. 14</cross-reference>. </paragraph>
<paragraph id="P-0162" lvl="0"><number>&lsqb;0162&rsqb;</number> Still referring to <cross-reference target="DRAWINGS">FIG. 15</cross-reference>, the position signal from the FKIN controller <highlight><bold>653</bold></highlight> is routed into a Cartesian scaled error block at <highlight><bold>844</bold></highlight>. The desired Cartesian slave position derived from the scale and offset block <highlight><bold>822</bold></highlight> is also routed into the Cartesian scaled error block <highlight><bold>844</bold></highlight>. The two signals are compared at <highlight><bold>844</bold></highlight> to compute an error signal should they not correspond. Should the two signals be equal, namely where the desired slave velocity signal was not restricted in the simulated domain <highlight><bold>834</bold></highlight>, no error signal is generated. </paragraph>
<paragraph id="P-0163" lvl="0"><number>&lsqb;0163&rsqb;</number> In the case where the desired slave velocity was restricted in the simulation block <highlight><bold>834</bold></highlight>, the simulated joint velocity output would not correspond with the reference Cartesian slave velocity input to the simulation block <highlight><bold>834</bold></highlight>. Accordingly, after integration in the simulation block <highlight><bold>834</bold></highlight>, and conversion to Cartesian space by the FKIN controller <highlight><bold>653</bold></highlight>, the resultant corresponding Cartesian position would not correspond with the original desired Cartesian slave position input to the Cartesian scaled error block <highlight><bold>844</bold></highlight>. Accordingly, an error signal of a magnitude determined typically by subtraction of the resultant Cartesian position from the original desired position and multiplication with an appropriate constant, is generated by the Cartesian scaled error block <highlight><bold>844</bold></highlight>. This error signal is imposed on the next desired slave velocity signal at the summation junction <highlight><bold>832</bold></highlight>. </paragraph>
<paragraph id="P-0164" lvl="0"><number>&lsqb;0164&rsqb;</number> It will be appreciated that only the velocity signal is input to the simulation block <highlight><bold>834</bold></highlight>. Thus, limitations are imposed in a dynamic fashion in the simulation block. The simulated slave position does not necessarily track the master position simultaneously. This is particularly the case where a limitation has been imposed in the simulation block <highlight><bold>834</bold></highlight>. For example, should a velocity limit have been imposed where the master was moved too quickly, a degree of lagging of the simulated slave position to catch up with the master position results. Accordingly, a discrepancy between the master and the slave positions ensues. By means of the positional error generated at <highlight><bold>844</bold></highlight>, an appropriate velocity signal change is effected at the junction <highlight><bold>852</bold></highlight> to effect a positional &ldquo;catch up&rdquo; function on the velocity signal. Thus, should the master be brought to rest where a positional error is generated, the velocity signal input to <highlight><bold>832</bold></highlight> would be zero, but a Cartesian reference velocity would still be input to the simulation block <highlight><bold>834</bold></highlight> to effect the catching up of the simulated slave position with that of the master. </paragraph>
<paragraph id="P-0165" lvl="0"><number>&lsqb;0165&rsqb;</number> Referring once again to <cross-reference target="DRAWINGS">FIG. 14</cross-reference> of the drawings, the resultant slave joint velocity and position signal is passed from the simulated domain <highlight><bold>812</bold></highlight> to a joint controller <highlight><bold>848</bold></highlight>. At the joint controller <highlight><bold>848</bold></highlight>, the resultant joint velocity and position signal is compared with the current joint position and velocity. The current joint position and velocity is derived through the sensors on the slave as indicated at <highlight><bold>849</bold></highlight> after having been processed at an input processor <highlight><bold>851</bold></highlight> to yield slave current position and velocity in joint space. </paragraph>
<paragraph id="P-0166" lvl="0"><number>&lsqb;0166&rsqb;</number> The joint controller <highlight><bold>848</bold></highlight> computes the torques desired on the slave motors to cause the slave to follow the resultant joint position and velocity signal taking its current joint position and velocity into account. The joint torques so determined are then routed to a feedback processor at <highlight><bold>852</bold></highlight> and to an output processor at <highlight><bold>854</bold></highlight>. </paragraph>
<paragraph id="P-0167" lvl="0"><number>&lsqb;0167&rsqb;</number> The joint torques are typically computed, by way of example, by means of the following formula: </paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>T&equals;K</italic></highlight>(&Dgr;&thgr;)&plus;<highlight><italic>B</italic></highlight>(&Dgr;{dot over (&thgr;)}) </in-line-formula></paragraph>
<paragraph id="P-0168" lvl="0"><number>&lsqb;0168&rsqb;</number> where K is a spring constant, B is a damping constant, &Dgr;{dot over (&thgr;)} is the difference between the joint velocity inputs to the joint controller <highlight><bold>851</bold></highlight>, and &Dgr;&thgr; is the difference between the joint position inputs to the joint controller <highlight><bold>851</bold></highlight>. </paragraph>
<paragraph id="P-0169" lvl="0"><number>&lsqb;0169&rsqb;</number> The output processor <highlight><bold>854</bold></highlight> determines the electrical currents to be supplied to the motors associated with the slave to yield the commanded torques and causes the currents to be supplied to the motors as indicated by arrow <highlight><bold>855</bold></highlight>. </paragraph>
<paragraph id="P-0170" lvl="0"><number>&lsqb;0170&rsqb;</number> From the feedback processor <highlight><bold>852</bold></highlight> force feedback is supplied to the master. As mentioned earlier, force feedback is provided on the master <highlight><bold>700</bold></highlight> whenever a limitation is induced in the simulated domain <highlight><bold>812</bold></highlight>. Through the feedback processor <highlight><bold>852</bold></highlight> force feedback is provided directly from the slave <highlight><bold>798</bold></highlight>, in other words, not through a virtual or simulated domain but through direct slave movement. This will be described in greater detail hereinbelow. </paragraph>
<paragraph id="P-0171" lvl="0"><number>&lsqb;0171&rsqb;</number> As mentioned earlier, the slave indicated at <highlight><bold>798</bold></highlight> is provided with a plurality of sensors. These sensors are typically operatively connected to pivotal joints on the robotic arm <highlight><bold>10</bold></highlight> and on the instrument <highlight><bold>14</bold></highlight>. </paragraph>
<paragraph id="P-0172" lvl="0"><number>&lsqb;0172&rsqb;</number> These sensors are operatively linked to the processor at <highlight><bold>851</bold></highlight>. It will be appreciated that these sensors determine current slave position. Should the slave <highlight><bold>798</bold></highlight> be subjected to an external force great enough to induce reactive movement on the slave <highlight><bold>798</bold></highlight>, the sensors will naturally detect such movement. Such an external force could originate from a variety of sources such as when the robotic arm <highlight><bold>10</bold></highlight> is accidentally knocked, or knocks into the other robotic arm <highlight><bold>10</bold></highlight> or the endoscope arm <highlight><bold>302</bold></highlight>, or the like. As mentioned, the joint controller <highlight><bold>848</bold></highlight> computes torques desired to cause the slave <highlight><bold>798</bold></highlight> to follow the master <highlight><bold>700</bold></highlight>. An external force on the slave <highlight><bold>798</bold></highlight> which causes its current position to vary also causes the desired slave movement to follow the master to vary. Thus a compounded joint torque is generated by the joint controller <highlight><bold>848</bold></highlight>, which torque includes the torque desired to move the slave to follow the master and the torque desired to compensate for the reactive motion induced on the slave by the external force. The torque generated by the joint controller <highlight><bold>848</bold></highlight> is routed to the feedback processor at <highlight><bold>852</bold></highlight>, as already mentioned. The feedback processor <highlight><bold>852</bold></highlight> analyzes the torque signal from the joint controller <highlight><bold>848</bold></highlight> and accentuates that part of the torque signal resulting from the extraneous force on the slave <highlight><bold>798</bold></highlight>. The part of the torque signal accentuated can be chosen depending on requirements. In this case, only the part of the torque signal relating to the robotic arm <highlight><bold>12</bold></highlight>, <highlight><bold>12</bold></highlight>, <highlight><bold>302</bold></highlight> joints are accentuated. The torque signal, after having been processed in this way is routed to a kinematic mapping block <highlight><bold>860</bold></highlight> from which a corresponding Cartesian force is determined. At the kinematic block <highlight><bold>860</bold></highlight>, the information determining slave fulcrum position relative to the camera frame is input from <highlight><bold>647</bold></highlight> as indicated. In this regard refer to <cross-reference target="DRAWINGS">FIG. 12A</cross-reference> of the drawings. Thus, the Cartesian force is readily determined relative to the camera frame. This Cartesian force is then passed through a gain step at <highlight><bold>862</bold></highlight> appropriately to vary the magnitude of the Cartesian force. The resultant force in Cartesian space is then passed to the summation junction at <highlight><bold>827</bold></highlight> and is then communicated to the master control <highlight><bold>700</bold></highlight> as described earlier. </paragraph>
<paragraph id="P-0173" lvl="0"><number>&lsqb;0173&rsqb;</number> Reference numeral <highlight><bold>866</bold></highlight> generally indicates another direct force feedback path of the control system <highlight><bold>810</bold></highlight>, whereby direct force feedback is supplied to the master control <highlight><bold>700</bold></highlight>. The path <highlight><bold>866</bold></highlight> includes one or more sensors which are not necessarily operatively connected to slave joints. These sensors can typically be in the form of force or pressure sensors appropriately positioned on the surgical instrument <highlight><bold>14</bold></highlight>, typically on the end effector <highlight><bold>58</bold></highlight>. Thus, should the end effector <highlight><bold>58</bold></highlight> contact an extraneous body, such as body tissue at the surgical site, it generates a corresponding signal proportionate to the force of contact. This signal is processed by a processor at <highlight><bold>868</bold></highlight> to yield a corresponding torque. This torque is passed to a kinematic mapping block <highlight><bold>864</bold></highlight>, together with information from <highlight><bold>647</bold></highlight> to yield a corresponding Cartesian force relative to the camera frame. From <highlight><bold>864</bold></highlight>, the resultant force is passed through a gain block at <highlight><bold>870</bold></highlight> and then forwarded to the summation junction <highlight><bold>827</bold></highlight>. Feedback is imparted on the master control <highlight><bold>700</bold></highlight> by means of torque supplied to the motors operatively associated with the master control <highlight><bold>700</bold></highlight> as described earlier. It will be appreciated that this can be achieved by means of any appropriate sensors such as current sensors, pressure sensors, accelerometers, proximity detecting sensors, or the like. </paragraph>
<paragraph id="P-0174" lvl="0"><number>&lsqb;0174&rsqb;</number> In some embodiments, resultant forces from kinematic mapping <highlight><bold>864</bold></highlight> may be transmitted to an alternative presentation block <highlight><bold>864</bold></highlight>.<highlight><bold>1</bold></highlight> so as to indicate the applied forces in an alternative format to the surgeon. For example, the total force may be presented in the form of a bar graph shown on the display, typically beyond a border of the displayed image from the image capture device. Alternatively, the resulting forces applied against the slave may be graphically shown as a force vector, either outside the image border on the display, or overlaid over the slave structure in the displayed image. Still further presentation alternatives are possible, including the use of false colors (for example, changing the color of a slave component to yellow and then red as the component approaches and then reaches its maximum force capability), or audibly indicating the force on the slave structure with a tone which increases in pitch and/or volume as forces increase. Additional tactile representations of force may be employed, for example, using heat to indicate force or an inertial actuator which, for example, vibrates with increasing speed or amplitude as forces increase. Such inertial actuators may apply apparent forces to an input device where no linkage supports the input device relative to a fixed frame of reference, for example, when using exoskeletal gloves supported by the surgeon&apos;s arm. </paragraph>
<paragraph id="P-0175" lvl="0"><number>&lsqb;0175&rsqb;</number> In general, non-visual information such as force which is sensed by the slave may be presented in corresponding non-visual formats (i.e., force reflecting master/slave arrangements), or in an alternative non-visual form (for example, force presented as sounds or heat). Non-visual information sensed by the slave may also be displayed to the surgeon in a visual format, such as using a bar graph or force vector, as described above. As used herein, non-visual information includes tactile sense information (including force, pressure, vibration, texture, heat, and the like), sound information (which may be sensed using a microphone of the slave), smell/taste (as may be sensed using a chemical or biochemical sensor of the slave), and the like. </paragraph>
<paragraph id="P-0176" lvl="0"><number>&lsqb;0176&rsqb;</number> It should also be understood that traditionally graphical information (including optical images taken from an image capture device, ultrasound images, fluoroscopic images, tomographic images, and the like) may be presented both in a visual format (in the stereo viewer or other display mechanisms) and in non-visual formats (for example, using information sensed by ultrasound to identify, track, and avoid contact with selected tissues by imposing haptic walls in the simulated domain). Hence, non-visual information sensed by the slave and the non-visual information presented by the master may include a variety of information that is either sensed by and/or presented in a form for senses other than vision, including the sense of smell, the sense of taste, the sense of touch, the sense of hearing, and the like. </paragraph>
<paragraph id="P-0177" lvl="0"><number>&lsqb;0177&rsqb;</number> As mentioned, the control system <highlight><bold>810</bold></highlight> enables limitations to be set in the simulation block <highlight><bold>834</bold></highlight>. These limitations can be chosen to conform with mechanical system limitations or constraints and/or can be preset to correspond with environmentally-sensitive movement limitations at the surgical site as will be described in greater detail hereinbelow. Thus, the limitations imposed in the simulated domain <highlight><bold>812</bold></highlight>, in one instance, can be regarded as virtual limitations corresponding with actual physical system limitations. The limitations at the simulated domain <highlight><bold>812</bold></highlight> are not derived from actual slave movement but from simulated or virtual slave movement. Thus, the slave is prevented from actually transgressing a limitation by simulating its movement and velocity and restricting the simulated movement and velocity before instructing the actual slave to respond. One typical limitation set in the simulated domain <highlight><bold>812</bold></highlight> concerns singularities of the system. </paragraph>
<paragraph id="P-0178" lvl="0"><number>&lsqb;0178&rsqb;</number> What is meant by the term singularity will now be described by way of an example of a singularity in the mechanical structure of the minimally invasive surgical apparatus. Referring to <cross-reference target="DRAWINGS">FIG. 2A</cross-reference> of the drawings, and as already mentioned, the instrument <highlight><bold>14</bold></highlight> when mounted on the robotic arm <highlight><bold>10</bold></highlight> is linearly displaceable in the direction of arrow P. If the instrument <highlight><bold>14</bold></highlight> is positioned such that the end effector <highlight><bold>58</bold></highlight> is relatively far removed from the fulcrum <highlight><bold>49</bold></highlight> and the master control is manipulated to command responsive movements, the responsive movement of the slave can normally readily be performed. At a specific fixed distance from the fulcrum <highlight><bold>49</bold></highlight>, the end effector has a range of lateral movement constrained within bounds dictated by constraints in the mechanical structure of the arm <highlight><bold>12</bold></highlight>. It will be appreciated that the closer the end effector <highlight><bold>58</bold></highlight> is displaced toward the fulcrum <highlight><bold>49</bold></highlight>, the smaller the possible range of lateral movement becomes. This can be visualized by picturing a cone having its apex at the fulcrum <highlight><bold>49</bold></highlight> and extending from the fulcrum <highlight><bold>49</bold></highlight> in a downward direction in <cross-reference target="DRAWINGS">FIG. 2A</cross-reference>. The range of lateral movement of the end effector <highlight><bold>58</bold></highlight> being limited to within the visualized cone. It will thus be appreciated that toward the base of the visualized cone, e.g., a 1-inch lateral movement of the end effector, can normally readily be achieved by the mechanical structure of the arm <highlight><bold>12</bold></highlight>. However, toward the apex of the cone, in other words toward the fulcrum <highlight><bold>49</bold></highlight>, a point is reached where a 1-inch lateral movement of the end effector <highlight><bold>58</bold></highlight> is simply not achievable due to the mechanical constraints of arm <highlight><bold>12</bold></highlight>. Furthermore, the movement by the robotic arm <highlight><bold>12</bold></highlight> to induce lateral movement of the end effector <highlight><bold>58</bold></highlight> becomes more radical the closer the end effector <highlight><bold>58</bold></highlight> is displaced toward the fulcrum <highlight><bold>49</bold></highlight>. </paragraph>
<paragraph id="P-0179" lvl="0"><number>&lsqb;0179&rsqb;</number> When a surgeon is performing a surgical procedure by means of the minimally invasive surgical apparatus, he or she is normally unaware of the robotic arm <highlight><bold>12</bold></highlight> movements since he or she is viewing the surgical site through the viewer <highlight><bold>202</bold></highlight>. Accordingly, unless provision is made to the contrary, it could happen that in the course of a surgical procedure the end effector <highlight><bold>58</bold></highlight> is displaced too near the fulcrum <highlight><bold>49</bold></highlight> so that master input causes the robotic arm <highlight><bold>12</bold></highlight> to move too quickly over corresponding long distances in responding to the commanded end effector movements. The control system <highlight><bold>810</bold></highlight> is arranged to provide a method of inhibiting the robotic arm from making too rapid or large a movement in response to master input because of the singularity described above. </paragraph>
<paragraph id="P-0180" lvl="0"><number>&lsqb;0180&rsqb;</number> Another singularity of the mechanical structure of the slave, in particular of the surgical instrument <highlight><bold>14</bold></highlight>, will now be described with reference to <cross-reference target="DRAWINGS">FIG. 5</cross-reference> of the drawings. </paragraph>
<paragraph id="P-0181" lvl="0"><number>&lsqb;0181&rsqb;</number> As mentioned, the end effector <highlight><bold>58</bold></highlight> is angularly displaceable about axis <highlight><bold>14</bold></highlight>.<highlight><bold>2</bold></highlight> as indicated by arrows <highlight><bold>59</bold></highlight>. Should the axis of symmetry <highlight><bold>60</bold></highlight>A of the end effector be positioned along the axis <highlight><bold>14</bold></highlight>.<highlight><bold>2</bold></highlight>, angular displacement of the end effector about axis <highlight><bold>60</bold></highlight>A is readily induced. However, should the axis <highlight><bold>60</bold></highlight>A be positioned perpendicular to the axis <highlight><bold>14</bold></highlight>.<highlight><bold>2</bold></highlight>, angular displacement of the end effector <highlight><bold>58</bold></highlight> about axis <highlight><bold>60</bold></highlight>A is not possible. Thus, a singularity is approached as the axis <highlight><bold>60</bold></highlight>A approaches a position perpendicular to the axis <highlight><bold>14</bold></highlight>.<highlight><bold>2</bold></highlight>. </paragraph>
<paragraph id="P-0182" lvl="0"><number>&lsqb;0182&rsqb;</number> A further singularity of the robotic arm <highlight><bold>10</bold></highlight>, can be understood with reference to <cross-reference target="DRAWINGS">FIG. 4</cross-reference> of the drawings. As already mentioned, the robotic arm is angularly displaceable about axis <highlight><bold>28</bold></highlight> as indicated by arrows <highlight><bold>26</bold></highlight>. When the axis <highlight><bold>14</bold></highlight>.<highlight><bold>2</bold></highlight> is perpendicular to the axis <highlight><bold>28</bold></highlight>, movement of the arm <highlight><bold>10</bold></highlight> in the direction of arrows <highlight><bold>26</bold></highlight> is readily induced on the end effector <highlight><bold>58</bold></highlight>. As will readily be observed in <cross-reference target="DRAWINGS">FIG. 4, a</cross-reference> singularity is approached the closer the axis <highlight><bold>14</bold></highlight>.<highlight><bold>2</bold></highlight> is moved toward a position parallel to the axis <highlight><bold>28</bold></highlight>. </paragraph>
<paragraph id="P-0183" lvl="0"><number>&lsqb;0183&rsqb;</number> Another typical limitation imposed in the simulated domain <highlight><bold>812</bold></highlight> relates to positional constraints of the various joints. </paragraph>
<paragraph id="P-0184" lvl="0"><number>&lsqb;0184&rsqb;</number> Another typical limitation imposed in the simulated domain is a velocity limitation corresponding to practicably mechanically achievable slave velocity. Naturally, the slave has greater mass and moments of inertia than the master. Thus, should the surgeon move the master too quickly, or should the master accidentally be knocked to induce rapid movement thereon, the slave would be commanded to move in sympathy with the master but at a rate not practicably achievable by the arm <highlight><bold>10</bold></highlight> due to mechanical constraints. </paragraph>
<paragraph id="P-0185" lvl="0"><number>&lsqb;0185&rsqb;</number> Another limitation that may be imposed on movement of the master is for slaves and/or tools having limited degrees of freedom. While many tools will be provided with a full six degrees of freedom plus actuation (for grip, electrosurgical power on, etc.), other tools may have a more limited range of movement. For example, when an unarticulated tool (such as an endoscope or the like) is mounted to a manipulator so as to provide an end effector with five or fewer degrees of freedom, the processor may inhibit movement of the master to five or fewer corresponding degrees of freedom within the master controller workspace. As the master and slave will often be kinematically dissimilar, this may involve multiple coordinated master actuation torques to simulate a single &ldquo;locked-out&rdquo; degree of freedom of the slave. </paragraph>
<paragraph id="P-0186" lvl="0"><number>&lsqb;0186&rsqb;</number> As mentioned, optionally, limitations relating to surgical environmental constraints can also be effected as described in greater detail hereinbelow. </paragraph>
<paragraph id="P-0187" lvl="0"><number>&lsqb;0187&rsqb;</number> Referring now to <cross-reference target="DRAWINGS">FIG. 16</cross-reference> of the drawings, one embodiment of the simulation block <highlight><bold>834</bold></highlight> includes a modified Jacobian inverse controller indicated by J<highlight><superscript>&minus;1</superscript></highlight>* at <highlight><bold>870</bold></highlight>. The modified Jacobian inverse controller is arranged to inhibit the detrimental effects which result when a singularity is approached. This is achieved by modifying a Jacobian inverse matrix of the controller J<highlight><superscript>&minus;1</superscript></highlight>*. The modification to the matrix will now be described by way of example and with reference to <cross-reference target="DRAWINGS">FIGS. 2A and 17</cross-reference> of the drawings. </paragraph>
<paragraph id="P-0188" lvl="0"><number>&lsqb;0188&rsqb;</number> In <cross-reference target="DRAWINGS">FIGS. 2A and 17</cross-reference>, the length of the arm portion of the shaft <highlight><bold>14</bold></highlight>.<highlight><bold>1</bold></highlight> of the instrument <highlight><bold>14</bold></highlight> which extends beyond the fulcrum <highlight><bold>49</bold></highlight> is indicated by L. </paragraph>
<paragraph id="P-0189" lvl="0"><number>&lsqb;0189&rsqb;</number> The relationship between velocity {dot over (x)} in Cartesian space relative to angular velocity {dot over (&thgr;)} in joint space is typically expressed by the relationship </paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>{dot over (x)}&equals;J&middot;{dot over (&thgr;)}</italic></highlight></in-line-formula></paragraph>
<paragraph id="P-0190" lvl="0"><number>&lsqb;0190&rsqb;</number> For the minimally invasive surgical apparatus, the Jacobian matrix is typically in the form of a 6&times;6 term matrix for converting joint space coordinates to corresponding Cartesian coordinates. Naturally, some of the terms in the matrix include a multiplication factor equal to L. Accordingly, when it is desired to determine positions in joint space corresponding to Cartesian coordinates, the following relationship is used: </paragraph>
<paragraph lvl="0"><in-line-formula>{dot over (&thgr;)}&equals;<highlight><italic>J</italic></highlight><highlight><superscript>&minus;1</superscript></highlight><highlight><italic>&middot;{dot over (x)}</italic></highlight></in-line-formula></paragraph>
<paragraph id="P-0191" lvl="0"><number>&lsqb;0191&rsqb;</number> When the inverse Jacobian matrix is used in this fashion, the terms including the multiplication factor of L become terms having a multiplication factor of 1/L. </paragraph>
<paragraph id="P-0192" lvl="0"><number>&lsqb;0192&rsqb;</number> It will be appreciated that as L decreases the term 1/L approaches infinity. This characteristic associated with a singularity is schematically illustrated in <cross-reference target="DRAWINGS">FIG. 17</cross-reference>. The length L is indicated along the horizontally extending axis and the corresponding factor 1/L is indicated along the vertically extending axis. The parabolic lines indicate the relationship between L and 1/L. It is clear that when the desired joint velocity is determined by means of the Cartesian velocity {dot over (x)} and a term includes the multiplication factor 1/L, the joint velocity approaches infinity as the value of L decreases, thus as the end effector is moved closer to the fulcrum <highlight><bold>49</bold></highlight>. </paragraph>
<paragraph id="P-0193" lvl="0"><number>&lsqb;0193&rsqb;</number> To compensate for these detrimental effects when a singularity is approached, the 1/L term in the Jacobian Inverse matrix is replaced with a function of L which yields a resultant relationship between L and 1/L as indicated in dashed lines in <cross-reference target="DRAWINGS">FIG. 17</cross-reference>. Two dashed lines are indicated to show different possible functions of L. In similar fashion the Jacobian Inverse matrix is modified to cater for all the singularities of the system already described. </paragraph>
<paragraph id="P-0194" lvl="0"><number>&lsqb;0194&rsqb;</number> Referring again to <cross-reference target="DRAWINGS">FIG. 16</cross-reference> of the drawings, the simulation block <highlight><bold>834</bold></highlight> will now be described in further detail. </paragraph>
<paragraph id="P-0195" lvl="0"><number>&lsqb;0195&rsqb;</number> The modified Jacobian Inverse controller which makes allowance for singularities as hereinbefore described is indicated by the reference numeral <highlight><bold>870</bold></highlight>. The Cartesian space reference velocity is input as indicated by arrow <highlight><bold>833</bold></highlight>. After conversion to a resulting joint velocity by the controller <highlight><bold>870</bold></highlight>, the resultant joint velocity is output at <highlight><bold>874</bold></highlight>. The resultant joint velocity <highlight><bold>874</bold></highlight> is then input to a joint velocity limitation step at <highlight><bold>876</bold></highlight>. At this step the resultant joint velocity is limited to remain within a range between a predetermined maximum velocity V<highlight><subscript>max</subscript></highlight>, and a predetermined minimum velocity V<highlight><subscript>min</subscript></highlight>. These maximum and minimum values are typically selected to constrain the joint velocity within limitations corresponding to constraints of the mechanical structure of the system. Accordingly, at <highlight><bold>876</bold></highlight>, should the joint velocity input <highlight><bold>874</bold></highlight> have a magnitude greater than the maximum and minimum values, the joint velocity magnitude <highlight><bold>874</bold></highlight> is decreased to within the set range. Thus: </paragraph>
<paragraph lvl="0"><in-line-formula>if {dot over (&thgr;)}&gt;max {dot over (&thgr;)}&equals;max </in-line-formula></paragraph>
<paragraph lvl="0"><in-line-formula>if {dot over (&thgr;)}&lt;(min){dot over (&thgr;)}&equals;(min) </in-line-formula></paragraph>
<paragraph id="P-0196" lvl="7"><number>&lsqb;0196&rsqb;</number> where {dot over (&thgr;)} represents joint velocity, and max denotes a positive magnitude and min denotes a negative magnitude. </paragraph>
<paragraph id="P-0197" lvl="0"><number>&lsqb;0197&rsqb;</number> After the joint velocity is limited in this manner, the joint velocity is integrated at <highlight><bold>878</bold></highlight> to yield a corresponding position in joint space. In similar fashion to the joint velocity limitation step at <highlight><bold>876</bold></highlight>, the position is limited at <highlight><bold>880</bold></highlight> to remain within a set positional range. </paragraph>
<paragraph id="P-0198" lvl="0"><number>&lsqb;0198&rsqb;</number> From <highlight><bold>880</bold></highlight>, the resultant joint positional signal is routed to the filter <highlight><bold>838</bold></highlight> as indicated by one of the arrows <highlight><bold>835</bold></highlight> and as already described herein with reference to <cross-reference target="DRAWINGS">FIG. 14</cross-reference>. The resultant velocity signal as output from <highlight><bold>876</bold></highlight> is routed to the filter <highlight><bold>838</bold></highlight> as indicated by the other arrow <highlight><bold>835</bold></highlight>. The resultant velocity signal is linked to the positional control step <highlight><bold>880</bold></highlight>, as indicated at <highlight><bold>881</bold></highlight>, so that in the event that the position is limited, the velocity signal is rendered zero. </paragraph>
<paragraph id="P-0199" lvl="0"><number>&lsqb;0199&rsqb;</number> As mentioned, velocity, position and singularity limitations or constraints are applied to the Cartesian reference velocity in the simulation block <highlight><bold>834</bold></highlight> indicated in <cross-reference target="DRAWINGS">FIG. 14</cross-reference> to yield a simulated slave joint position and velocity. Naturally, should the Cartesian reference velocity input to the simulation block <highlight><bold>834</bold></highlight> not result in a transgression of any of the limitations set for the slave, the Cartesian reference velocity input to the simulation block <highlight><bold>834</bold></highlight> is then simply transferred into corresponding slave joint position and velocity signals without any imposition of limitations. The corresponding slave joint position and velocity is then forwarded to the slave after the filtering step at <highlight><bold>838</bold></highlight>. </paragraph>
<paragraph id="P-0200" lvl="0"><number>&lsqb;0200&rsqb;</number> An alternative simulation block <highlight><bold>834</bold></highlight>B and another method of imposing limitations will now be described with reference to <cross-reference target="DRAWINGS">FIG. 18</cross-reference> of the drawings in which like reference numerals are used to designate similar parts unless otherwise indicated. </paragraph>
<paragraph id="P-0201" lvl="0"><number>&lsqb;0201&rsqb;</number> Referring now to <cross-reference target="DRAWINGS">FIG. 18</cross-reference>, and in the simulation block <highlight><bold>834</bold></highlight>B, the Cartesian reference velocity is initially input into a Cartesian position and velocity limit block at <highlight><bold>902</bold></highlight>. At <highlight><bold>902</bold></highlight>, any desired limitations to position and velocity in Cartesian space can be set. This can be achieved in similar fashion to the manner in which the joint velocity and position limitations were imposed in <cross-reference target="DRAWINGS">FIG. 16</cross-reference>. Such limitations can be chosen to suit the specific surgical procedure to be performed. Thus, for example, should the surgical procedure to be performed be at a sensitive location, such as close to the brain, or heart, or the like, limitations can be set to constrain end effector movement within a space so as not to be able to contact the area of sensitivity. Thus, at <highlight><bold>902</bold></highlight>, limitations can be tailored to meet specific environmental limitations defined by the specific surgical procedure to be performed so as to avoid accidental damage to a sensitive organ, or the like. Thus, at <highlight><bold>902</bold></highlight>, slave position and velocity can be restricted to remain within preset limitations dictated by the surgical procedure to be performed. It will be appreciated that such surgical environment dependent limitations can be imposed in the simulation block <highlight><bold>834</bold></highlight> in <cross-reference target="DRAWINGS">FIG. 16</cross-reference>, and also in the preferred simulation block <highlight><bold>834</bold></highlight>A to be discussed with reference to <cross-reference target="DRAWINGS">FIG. 20</cross-reference>. </paragraph>
<paragraph id="P-0202" lvl="0"><number>&lsqb;0202&rsqb;</number> After the limitation step at <highlight><bold>902</bold></highlight>, the resultant Cartesian velocity is input to a modified Jacobian Inverse controller at <highlight><bold>904</bold></highlight>. The modified controller <highlight><bold>904</bold></highlight> imposes limitations on the Cartesian velocity input during conversion of the Cartesian velocity input into a corresponding joint space velocity to make allowance for singularities as already described. </paragraph>
<paragraph id="P-0203" lvl="0"><number>&lsqb;0203&rsqb;</number> From the modified Jacobian Inverse controller <highlight><bold>904</bold></highlight>, the resultant joint velocity is input into a joint position and velocity block at <highlight><bold>906</bold></highlight>. At the joint position and velocity block <highlight><bold>906</bold></highlight>, the joint velocity input is monitored to ensure that corresponding velocity and position commands to each specific joint would not transgress set limitations corresponding to actual angular position and velocity limitations of that joint. After the joint velocity has been monitored at <highlight><bold>906</bold></highlight>, and any limitations imposed, the resultant simulated slave joint velocity is output as indicated by arrow <highlight><bold>835</bold></highlight>. The simulated slave joint velocity is also fed through an integration step at <highlight><bold>910</bold></highlight> to yield the corresponding simulated slave joint position. </paragraph>
<paragraph id="P-0204" lvl="0"><number>&lsqb;0204&rsqb;</number> The simulated joint position for each specific joint is routed to the joint position and velocity block <highlight><bold>906</bold></highlight>, and the modified Jacobian Inverse block <highlight><bold>904</bold></highlight> as indicated in dashed lines. The position signal <highlight><bold>835</bold></highlight> is routed to the modified Jacobian Inverse block <highlight><bold>904</bold></highlight> to enable transformation from Cartesian to joint space. The position signal <highlight><bold>835</bold></highlight> is routed to the position and velocity block <highlight><bold>906</bold></highlight> in order that joint position and velocity limits can be imposed at <highlight><bold>906</bold></highlight>. This will now be described with reference to <cross-reference target="DRAWINGS">FIG. 19</cross-reference> in which like reference numerals are used to designate similar parts unless otherwise indicated. It will be appreciated that <cross-reference target="DRAWINGS">FIG. 19</cross-reference> exemplifies the imposition of positional and velocity limits on a single joint. The same method of imposing such positional and velocity limits is employed for each joint at <highlight><bold>906</bold></highlight>. </paragraph>
<paragraph id="P-0205" lvl="0"><number>&lsqb;0205&rsqb;</number> In <cross-reference target="DRAWINGS">FIG. 19</cross-reference>, the joint velocity input from the modified Jacobian Inverse controller at <highlight><bold>904</bold></highlight> is indicated by arrow <highlight><bold>912</bold></highlight>. The resultant velocity after having passed through the joint position and velocity block is indicated by arrow <highlight><bold>914</bold></highlight> and the joint position input is indicated by arrow <highlight><bold>835</bold></highlight> and is shown in dashed lines. The joint for which position and velocity limits are to be imposed by the block diagram shown in <cross-reference target="DRAWINGS">FIG. 19</cross-reference> normally has physical limitations. Thus, the joint has a maximum position in which the arm members which are pivotally connected thereby are at a maximum angular position relative to each other. Similarly, the joint has a minimum position in which the arm members which are connected one to another thereby are at a minimum angular position relative to each other. Accordingly, the joint has an angular displacement range extending between its minimum and its maximum position. The angular limits of the joint are indicated by blocks <highlight><bold>918</bold></highlight> and <highlight><bold>920</bold></highlight>, respectively, block <highlight><bold>918</bold></highlight> indicating the minimum position and block <highlight><bold>920</bold></highlight> the maximum position. Naturally, since we are dealing with a simulated domain, the limits can be chosen to suit. Accordingly, the minimum and maximum angular positions <highlight><bold>918</bold></highlight>, <highlight><bold>920</bold></highlight> need not necessarily correspond with the actual physical positional limits of the joint, but can be chosen at any appropriate angular positions within the angular positional range capabilities of the joint. </paragraph>
<paragraph id="P-0206" lvl="0"><number>&lsqb;0206&rsqb;</number> The position input at <highlight><bold>835</bold></highlight> is normally varying continually as the surgeon manipulates the master during the course of a surgical procedure. The positional input <highlight><bold>835</bold></highlight> is fed to the summation junctions <highlight><bold>922</bold></highlight>, <highlight><bold>924</bold></highlight>. At the junction <highlight><bold>922</bold></highlight>, the angular position as input at <highlight><bold>835</bold></highlight> is compared with the positional minimum or lower limit to yield an angular value corresponding to the angular deviation of the position input <highlight><bold>835</bold></highlight> relative to the limit <highlight><bold>918</bold></highlight>. Thus, at <highlight><bold>922</bold></highlight>, an angular value equal to the difference between the angular limit and the angular position input <highlight><bold>835</bold></highlight> is determined. The angular deviation from the lower limit <highlight><bold>918</bold></highlight> thus determined, is then fed to a velocity determination block at <highlight><bold>926</bold></highlight>. The processing cycle rate of the control system is known. In this case, it is typically 1300 Hz. At <highlight><bold>926</bold></highlight>, the velocity which the joint needs to have to cause its position to coincide with the lower joint limit <highlight><bold>918</bold></highlight> at the next processing cycle is determined. This velocity value is then routed to a decision block at <highlight><bold>928</bold></highlight>. Naturally, if the angular position as input at <highlight><bold>835</bold></highlight> is far removed from the lower limit <highlight><bold>918</bold></highlight>, the resultant velocity value derived at <highlight><bold>926</bold></highlight> will be very large, and typically physically unattainable. However, as the angular deviation approaches zero, namely, where the angular position <highlight><bold>835</bold></highlight> approaches the lower limit <highlight><bold>918</bold></highlight>, the velocity output from <highlight><bold>926</bold></highlight> becomes less than the attainable joint velocity and becomes zero where the angular position <highlight><bold>835</bold></highlight> is at the lower limit <highlight><bold>918</bold></highlight>. </paragraph>
<paragraph id="P-0207" lvl="0"><number>&lsqb;0207&rsqb;</number> Reference numeral <highlight><bold>930</bold></highlight> represents a set joint velocity limit. This limit is typically chosen in accordance with the acceptable joint velocity limit of that joint. This set velocity lower limit is also fed into the decision block <highlight><bold>928</bold></highlight>. At <highlight><bold>928</bold></highlight> the two joint velocities are compared and the largest of the two selected. It will be appreciated that the largest value is selected because we are regarding a velocity limit in a negative direction. Thus, the largest value is the same as the smallest absolute value. The selected velocity value thus determined defines the lower velocity limit as indicated at <highlight><bold>932</bold></highlight>. </paragraph>
<paragraph id="P-0208" lvl="0"><number>&lsqb;0208&rsqb;</number> It could happen that the joint is positioned beyond the positional lower limit <highlight><bold>918</bold></highlight>. This can occur when the minimally invasive surgical apparatus is initially setup, or where the positional limits are selectively changed, for example. In such a case, it is desirable to cause the joint position to return to within the range set by the upper and lower limits at <highlight><bold>918</bold></highlight> and <highlight><bold>920</bold></highlight>, respectively. For the lower angular position limit, this is achieved by the block <highlight><bold>934</bold></highlight>. What is achieved by the block <highlight><bold>934</bold></highlight>, is a constant curbing of positional movement beyond the lower limit. Thus, as the surgeon manipulates the master, movements causing the angular position of the joint to move toward the limit are permitted, but once such movement has taken place, the joint is restricted to its new position closer to the limit. The process is maintained until the joint position is within the range set by the values at <highlight><bold>918</bold></highlight>, <highlight><bold>920</bold></highlight>, respectively. </paragraph>
<paragraph id="P-0209" lvl="0"><number>&lsqb;0209&rsqb;</number> It will be appreciated that a maximum velocity, as indicated by reference numeral <highlight><bold>935</bold></highlight> is determined in similar fashion as the minimum velocity, as can be seen in <cross-reference target="DRAWINGS">FIG. 19</cross-reference> of the drawings. </paragraph>
<paragraph id="P-0210" lvl="0"><number>&lsqb;0210&rsqb;</number> Referring now to <cross-reference target="DRAWINGS">FIG. 20</cross-reference> of the drawings, a preferred simulation block <highlight><bold>834</bold></highlight>A will now be described. In <cross-reference target="DRAWINGS">FIG. 20</cross-reference> the same reference numerals are used to designate similar parts or aspects unless otherwise stated. </paragraph>
<paragraph id="P-0211" lvl="0"><number>&lsqb;0211&rsqb;</number> In <cross-reference target="DRAWINGS">FIG. 20</cross-reference>, the Cartesian reference velocity is input as indicated by arrow <highlight><bold>833</bold></highlight>. The simulated joint positions and velocities are output at <highlight><bold>835</bold></highlight>. The Cartesian reference velocity <highlight><bold>833</bold></highlight> is routed to a modified full Jacobian Inverse block at <highlight><bold>942</bold></highlight> and to an isolation block at <highlight><bold>944</bold></highlight>. </paragraph>
<paragraph id="P-0212" lvl="0"><number>&lsqb;0212&rsqb;</number> At <highlight><bold>942</bold></highlight>, the Cartesian reference velocity signal <highlight><bold>833</bold></highlight> is transformed into a corresponding joint velocity signal <highlight><bold>946</bold></highlight>. The modified full Jacobian Inverse block <highlight><bold>942</bold></highlight> makes allowance for singularities as already described with reference to <highlight><bold>904</bold></highlight> in <cross-reference target="DRAWINGS">FIG. 18</cross-reference>. </paragraph>
<paragraph id="P-0213" lvl="0"><number>&lsqb;0213&rsqb;</number> In the minimally invasive surgical apparatus under discussion, the modified full Jacobian Inverse block typically includes a six by six term matrix. After transformation at the block <highlight><bold>942</bold></highlight>, the resultant joint velocity signal is passed to an isolation block <highlight><bold>948</bold></highlight>. At the isolation block <highlight><bold>948</bold></highlight>, the terms relating to the wrist joints, as indicated in <cross-reference target="DRAWINGS">FIG. 5</cross-reference> of the drawings, are isolated from the terms relating to the joints on the robotic arm <highlight><bold>12</bold></highlight>, as indicated in <cross-reference target="DRAWINGS">FIGS. 2A and 2B</cross-reference>. After isolation at <highlight><bold>948</bold></highlight>, the wrist joint velocities are forwarded to a wrist joint velocity and position limitation block at <highlight><bold>950</bold></highlight>. </paragraph>
<paragraph id="P-0214" lvl="0"><number>&lsqb;0214&rsqb;</number> At <highlight><bold>950</bold></highlight> wrist joint velocity limits are imposed on each wrist joint in similar fashion to the method described above with reference to <cross-reference target="DRAWINGS">FIG. 19</cross-reference>. However, for the wrist joints, namely the joints providing the three degree of freedom of movements to the end effector <highlight><bold>58</bold></highlight>, the limitations are imposed simultaneously rather than on a joint by joint basis. This will now be described with reference to <cross-reference target="DRAWINGS">FIG. 21</cross-reference>. </paragraph>
<paragraph id="P-0215" lvl="0"><number>&lsqb;0215&rsqb;</number> Referring to <cross-reference target="DRAWINGS">FIG. 21</cross-reference>, the limits for each joint are determined in similar fashion to that described with reference to <cross-reference target="DRAWINGS">FIG. 19</cross-reference>. But, as indicated at <highlight><bold>970</bold></highlight>, the limitations are used to define a corresponding velocity limitation for the three joints together as indicated by the box <highlight><bold>972</bold></highlight>. Accordingly, a multidimensional joint velocity limitation, in this case a three-dimensional joint velocity limitation, is provided. </paragraph>
<paragraph id="P-0216" lvl="0"><number>&lsqb;0216&rsqb;</number> The input joint velocity signal at <highlight><bold>951</bold></highlight> is compared to the multidimensional joint velocity limitation, at <highlight><bold>970</bold></highlight>. Should the input velocity signal <highlight><bold>951</bold></highlight> fall entirely inside the limitation, it is unchanged by the limitation. In such a case the output velocity signal <highlight><bold>952</bold></highlight> is the same as the input velocity signal <highlight><bold>951</bold></highlight>. However, should the input velocity signal <highlight><bold>951</bold></highlight> fall outside the limitation, the limitation block at <highlight><bold>970</bold></highlight> will select the output velocity <highlight><bold>952</bold></highlight> according to a criterion, which will now be described. </paragraph>
<paragraph id="P-0217" lvl="0"><number>&lsqb;0217&rsqb;</number> A joint velocity error between the input velocity signal <highlight><bold>951</bold></highlight> and the selected output velocity <highlight><bold>952</bold></highlight> is defined as illustrated at <highlight><bold>974</bold></highlight>. The joint velocity error is transformed into a Cartesian velocity error using a Jacobian matrix at <highlight><bold>976</bold></highlight>. It will be appreciated that the Jacobian matrix at <highlight><bold>976</bold></highlight> describes the kinematics of the wrist joints, which includes pivots <highlight><bold>54</bold></highlight>, <highlight><bold>60</bold></highlight> and axis <highlight><bold>14</bold></highlight>.<highlight><bold>2</bold></highlight>, with reference to <cross-reference target="DRAWINGS">FIG. 5</cross-reference>. The magnitude of the Cartesian velocity error is then determined at <highlight><bold>978</bold></highlight>. </paragraph>
<paragraph id="P-0218" lvl="0"><number>&lsqb;0218&rsqb;</number> The criterion for selection of the output velocity <highlight><bold>952</bold></highlight> by the limitation block <highlight><bold>970</bold></highlight> is the obedience of the multidimensional limitation and the minimization of the Cartesian velocity error magnitude. </paragraph>
<paragraph id="P-0219" lvl="0"><number>&lsqb;0219&rsqb;</number> Returning now to <cross-reference target="DRAWINGS">FIG. 20</cross-reference> the drawings, the output <highlight><bold>952</bold></highlight> from the limitation block <highlight><bold>950</bold></highlight> represents a combined joint velocity signal including joint velocities at the joints or pivots <highlight><bold>54</bold></highlight>, <highlight><bold>60</bold></highlight> and joint velocity about axis <highlight><bold>14</bold></highlight>.<highlight><bold>2</bold></highlight>, with reference to <cross-reference target="DRAWINGS">FIG. 5</cross-reference> of the drawings, after any limitations relating to velocity, position and singularities have been imposed. </paragraph>
<paragraph id="P-0220" lvl="0"><number>&lsqb;0220&rsqb;</number> At the isolation block <highlight><bold>944</bold></highlight>, the translational Cartesian velocity terms are isolated from the Cartesian reference velocity signal <highlight><bold>833</bold></highlight>. The isolated terms correspond to the Cartesian velocity commands addressing the joints on the robotic arm <highlight><bold>12</bold></highlight>. After isolation, the Cartesian reference velocity signal for the outer joints only is forwarded to an adjustment block at <highlight><bold>954</bold></highlight>. </paragraph>
<paragraph id="P-0221" lvl="0"><number>&lsqb;0221&rsqb;</number> In the event that the wrist joint velocity signal was restricted at one or both of the blocks <highlight><bold>942</bold></highlight>, <highlight><bold>950</bold></highlight>, the outer joint velocity can be adapted at <highlight><bold>954</bold></highlight>. This will now be described in greater detail and with reference to <cross-reference target="DRAWINGS">FIG. 5</cross-reference> of the drawings. </paragraph>
<paragraph id="P-0222" lvl="0"><number>&lsqb;0222&rsqb;</number> It will be appreciated that a command at the master control <highlight><bold>700</bold></highlight> relating to only an orientation change of the end effector <highlight><bold>58</bold></highlight> can result in not only responsive angular movement about pivots <highlight><bold>54</bold></highlight>, <highlight><bold>60</bold></highlight> and about axis <highlight><bold>14</bold></highlight>.<highlight><bold>2</bold></highlight> but also responsive outer joint movement. This is so because of structural dissimilarities between master and slave. Thus, for the slave to perform an orientational movement corresponding to a master orientational movement, it is sometimes desired for the slave outer joints to move also. </paragraph>
<paragraph id="P-0223" lvl="0"><number>&lsqb;0223&rsqb;</number> Accordingly, in the event that wrist joint velocity limits were imposed, it is desired to adapt outer joint, or translational, velocity to the extent to which the outer joint velocity formed part of the orientational wrist limitation. This is achieved at <highlight><bold>954</bold></highlight>. </paragraph>
<paragraph id="P-0224" lvl="0"><number>&lsqb;0224&rsqb;</number> The resultant, possibly adapted, translational Cartesian velocity signal is then forwarded to a modified translation Jacobian Inverse block at <highlight><bold>956</bold></highlight>. At <highlight><bold>956</bold></highlight>, the signal is converted into a corresponding joint space velocity signal. The modified Jacobian Inverse matrix at <highlight><bold>956</bold></highlight> makes allowance for the fulcrum <highlight><bold>49</bold></highlight> singularity and the maximum robotic arm pitch singularity as already described with reference to <cross-reference target="DRAWINGS">FIG. 4</cross-reference>. The joint space velocity signal from <highlight><bold>956</bold></highlight> is then passed to a limitation block at <highlight><bold>958</bold></highlight>. At <highlight><bold>958</bold></highlight> positional and velocity limitations are imposed on the signal in a manner similar to that already described with reference to <cross-reference target="DRAWINGS">FIG. 19</cross-reference> of the drawings, and for each outer joint. </paragraph>
<paragraph id="P-0225" lvl="0"><number>&lsqb;0225&rsqb;</number> The final wrist joint velocity signal and the final outer joint velocity signal are then combined at <highlight><bold>960</bold></highlight> to yield the simulated joint velocity <highlight><bold>835</bold></highlight>. The simulated joint velocity <highlight><bold>835</bold></highlight> is integrated at <highlight><bold>962</bold></highlight> to yield a corresponding simulated joint position, indicated by the other of the arrows <highlight><bold>835</bold></highlight>. </paragraph>
<paragraph id="P-0226" lvl="0"><number>&lsqb;0226&rsqb;</number> The simulated joint position is fed to the blocks <highlight><bold>942</bold></highlight>, <highlight><bold>950</bold></highlight>, <highlight><bold>954</bold></highlight>, <highlight><bold>956</bold></highlight> and <highlight><bold>958</bold></highlight> to enable the desired computations. </paragraph>
<paragraph id="P-0227" lvl="0"><number>&lsqb;0227&rsqb;</number> While this invention has been particularly shown and described with references to preferred embodiments thereof, it will be understood by those skilled in the art that various changes in form and details may be made thereto without departing from the spirit and scope of the invention as defined in the accompanying claims. For example, while the invention describes the use of Cartesian coordinate systems, the invention may also find applications taking advantage of polar coordinate systems, cylindrical coordinate systems, or the like. Hence, the scope of the present invention is limited solely by the following claims. </paragraph>
</section>
</detailed-description>
</subdoc-description>
<subdoc-claims>
<heading lvl="1">What is claimed is: </heading>
<claim id="CLM-00001">
<claim-text><highlight><bold>1</bold></highlight>. A robotic system comprising: 
<claim-text>a master controller having an input device movable in a controller workspace; </claim-text>
<claim-text>a slave having an end effector, a linkage movably supporting the end effector, and at least one actuator operatively coupled to the end effector, the actuator moving the end effector in a workspace in response to slave actuator signals; </claim-text>
<claim-text>an imaging system including an image capture device with a field of view movable in the workspace and a linkage movably supporting the image capture device, the imaging system generating state variable signals indicating the field of view; and </claim-text>
<claim-text>a processor coupling the master controller to the slave arm, the processor generating the slave actuator signals by mapping the input device in the controller workspace with the end effector in the workspace according to a transformation, the processor deriving the transformation in response to the state of variable signals of the imaging system, the linkages comprising joints and the state variable signals comprising joint configuration signals, the linkages coupled so that the processor derives the transformation in response to the joint configuration signals such that movement of an image of the end effector in a display appears substantially connected to the input device in the workspace; </claim-text>
<claim-text>wherein if the image capture device is moved the state variables of the imaging system change and the input device is re-mapped with the end effector according to another transformation, the other transformation derived in response to the changed state variables of the imaging system. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00002">
<claim-text><highlight><bold>2</bold></highlight>. The surgical robotic system of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein the image capture device moves independently of the slave. </claim-text>
</claim>
<claim id="CLM-00003">
<claim-text><highlight><bold>3</bold></highlight>. The surgical robotic system of <dependent-claim-reference depends_on="CLM-00002">claim 2</dependent-claim-reference>, wherein the processor derives the transformation so that an image of the end effector in the display appears substantially connected to the input device in the controller workspace. </claim-text>
</claim>
<claim id="CLM-00004">
<claim-text><highlight><bold>4</bold></highlight>. The surgical robotic system of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein the slave generates state variable signals responsive to a position of the end effector in the workspace, the processor deriving the transformation using the state variable signals of the slave. </claim-text>
</claim>
<claim id="CLM-00005">
<claim-text><highlight><bold>5</bold></highlight>. The robotic system of <dependent-claim-reference depends_on="CLM-00004">claim 4</dependent-claim-reference>, wherein the processor determines a position and orientation of the input device in the master controller space from state variable signals of the master controller, wherein the processor determines a position and orientation of the end effector in the workspace from the state variable signals of the slave, and wherein the processor generates the slave actuator signals by comparing the position and orientation of the input device and the end effector in a mapped space. </claim-text>
</claim>
<claim id="CLM-00006">
<claim-text><highlight><bold>6</bold></highlight>. The robotic system of <dependent-claim-reference depends_on="CLM-00004">claim 4</dependent-claim-reference>, wherein the slave comprises an elongate shaft supporting the end effector, wherein the image capture device comprises an endoscope having a distal end, and wherein the processor derives the transformation when the shaft and endoscope are inserted into the surgical site through arbitrary minimally invasive access sites so that the end effector and the distal end of the endoscope move by pivoting the shaft and the endoscope about the access sites. </claim-text>
</claim>
<claim id="CLM-00007">
<claim-text><highlight><bold>7</bold></highlight>. The robotic system of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein the slave linkage is mounted to a slave base, and wherein the imaging system linkage is mechanically coupled to the slave base. </claim-text>
</claim>
<claim id="CLM-00008">
<claim-text><highlight><bold>8</bold></highlight>. The robotic system of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein the imaging system linkage is mounted to a base of the slave, and wherein the slave base has wheels for transporting the end effector linkage and the image capture device. </claim-text>
</claim>
<claim id="CLM-00009">
<claim-text><highlight><bold>9</bold></highlight>. The robotic system of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein the slave comprises a tool holder and a tool detachably mounted in the tool holder, the tool including the end effector and at least one joint, the robotic system further comprising a plurality of alternative kinematically dissimilar tools having alternative end effectors, the alternative tools mountable to the at least one tool holder in place of the tool, the processor capable of changing the transformation in response to a tool change signal. </claim-text>
</claim>
<claim id="CLM-00010">
<claim-text><highlight><bold>10</bold></highlight>. A robotic system comprising: 
<claim-text>a master controller having an input device movable in a controller workspace; </claim-text>
<claim-text>a plurality of slaves having an end effector and at least one actuator operatively coupled to the end effector, the actuator moving the end effector in a workspace in response to slave actuator signals; </claim-text>
<claim-text>an imaging system including an image capture device with a field of view movable in the workspace, the imaging system generating state variable signals indicating the field of view; and </claim-text>
<claim-text>a processor coupling the master controller to the slave arm, the processor generating the slave actuator signals by mapping the input device in the controller workspace with the end effector in the workspace according to a transformation, the processor deriving the transformation in response to the state of variable signals of the imaging system; </claim-text>
<claim-text>wherein if the image capture device is moved the state variables of the imaging system change and the input device is re-mapped with the end effector according to another transformation, the other transformation derived in response to the changed state variables of the imaging system, the master controller selectively associatable with the slaves in response to a slave selection signal, wherein the processor changes the transformation in response to the slave selection signal so that movement of an image of the end effector of the selected slave as shown in a display substantially corresponds to movement of the input device in the workspace. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00011">
<claim-text><highlight><bold>11</bold></highlight>. The robotic system of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein the processor derives the transformation in real time. </claim-text>
</claim>
<claim id="CLM-00012">
<claim-text><highlight><bold>12</bold></highlight>. A robotic system comprising: 
<claim-text>a master controller having an input device movable in a controller workspace; </claim-text>
<claim-text>a slave having an end effector and at least one actuator operatively coupled to the end effector, the actuator moving the end effector in a workspace in response to slave actuator signals; </claim-text>
<claim-text>an imaging system including an image capture device with a field of view movable in the workspace, the imaging system transmitting an image to a display; and </claim-text>
<claim-text>a processor coupling the master controller to an arm of the slave, the processor generating the slave actuator signals by mapping the input device in the controller workspace with the end effector in the workspace according to a transformation, the processor deriving the transformation so that an image of the end effector in the display appears substantially connected to the input device in the workspace; </claim-text>
<claim-text>wherein if the image capture device is moved the state variables of the imaging system change and the input device is re-mapped with the end effector according to another transformation, the other transformation derived in response to the changed state variables of the imaging system; and </claim-text>
<claim-text>wherein at least one of the slave, the master controller, and the imaging system comprise a linkage having a detachable connection disposed between joints so as to define a first linkage portion attached to a base and a second linkage portion attached to the first linkage portion, the linkage portions defining first and second coordinate reference systems, wherein the processor derives the transformation indirectly from a first relationship of the first coordinate system to the base of the first linkage system and from a second relationship of the second coordinate system to the first coordinate system. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00013">
<claim-text><highlight><bold>13</bold></highlight>. The robotic system of <dependent-claim-reference depends_on="CLM-00011">claim 12</dependent-claim-reference>, wherein the master controller comprises a linkage supporting the input device and the slave comprises a linkage supporting the end effector, the master linkage and the slave linkage being kinematically dissimilar. </claim-text>
</claim>
<claim id="CLM-00014">
<claim-text><highlight><bold>14</bold></highlight>. The robotic system of <dependent-claim-reference depends_on="CLM-00011">claim 13</dependent-claim-reference>, wherein joints of the master linkage and joints of the slave linkage have different degrees of freedom. </claim-text>
</claim>
<claim id="CLM-00015">
<claim-text><highlight><bold>15</bold></highlight>. The robotic system of <dependent-claim-reference depends_on="CLM-00011">claim 12</dependent-claim-reference>, wherein joints of the master linkage and joints of the slave linkage define different locations in the mapped space. </claim-text>
</claim>
<claim id="CLM-00016">
<claim-text><highlight><bold>16</bold></highlight>. The robotic system of <dependent-claim-reference depends_on="CLM-00011">claim 12</dependent-claim-reference>, wherein the processor calculates the transformation in response to a signal indicating at least one member of the group consisting of a movement of a camera, a decoupling and repositioning of one of the master and the slave relative to the other, a tool change mounting a different end effector on the slave, a change in scale of the mapping, manual movement of a passive joint of the master or slave, and association of the master with an alternative slave. </claim-text>
</claim>
<claim id="CLM-00017">
<claim-text><highlight><bold>17</bold></highlight>. The robotic system of <dependent-claim-reference depends_on="CLM-00011">claim 12</dependent-claim-reference>, wherein the slave senses non-visual sensory information at the workspace, the master controller presenting the non-visual information to an operator manipulating the input device. </claim-text>
</claim>
<claim id="CLM-00018">
<claim-text><highlight><bold>18</bold></highlight>. The robotic system of <dependent-claim-reference depends_on="CLM-00011">claim 17</dependent-claim-reference>, wherein the master controller presents the non-visual information to an operator by showing a graphical representation of the non-visual information with the display. </claim-text>
</claim>
<claim id="CLM-00019">
<claim-text><highlight><bold>19</bold></highlight>. The robotic system of <dependent-claim-reference depends_on="CLM-00011">claim 18</dependent-claim-reference>, wherein the non-visual information comprises force applied at the end effector. </claim-text>
</claim>
<claim id="CLM-00020">
<claim-text><highlight><bold>20</bold></highlight>. The robotic system of <dependent-claim-reference depends_on="CLM-00011">claim 19</dependent-claim-reference>, wherein the display represents the force as a member selected from the group consisting of a bar graph, a force vector, and an end effector color. </claim-text>
</claim>
<claim id="CLM-00021">
<claim-text><highlight><bold>21</bold></highlight>. A robotic system comprising: 
<claim-text>a master controller having an input device movable in a controller workspace; </claim-text>
<claim-text>a slave having an end effector and at least one actuator operatively coupled to the end effector, the actuator moving the end effector in a workspace in response to slave actuator signals; </claim-text>
<claim-text>an imaging system including an image capture device with a field of view movable in the workspace, the imaging system transmitting an image to a display; and </claim-text>
<claim-text>a processor coupling the master controller to an arm of the slave, the processor generating the slave actuator signals by mapping the input device in the controller workspace with the end effector in the workspace according to a transformation, the processor deriving the transformation so that an image of the end effector in the display appears substantially connected to the input device in the workspace; </claim-text>
<claim-text>wherein if the image capture device is moved the state variables of the imaging system change and the input device is re-mapped with the end effector according to another transformation, the other transformation derived in response to the changed state variables of the imaging system; and </claim-text>
<claim-text>wherein the slave senses non-visual sensory information at the workspace, the master controller presenting the non-visual information to an operator manipulating the input device, wherein the non-visual information comprises force applied at the end effector, and wherein the master controller comprises a sound generator, the sound generator producing a sound varying in response to the force. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00022">
<claim-text><highlight><bold>22</bold></highlight>. The robotic system of <dependent-claim-reference depends_on="CLM-00011">claim 12</dependent-claim-reference>, wherein the master controller presents the non-visual information with an orientation correlating to the image. </claim-text>
</claim>
<claim id="CLM-00023">
<claim-text><highlight><bold>23</bold></highlight>. The robotic system of <dependent-claim-reference depends_on="CLM-00022">claim 22</dependent-claim-reference>, wherein the master controller comprises a plurality of actuators, the actuators providing tactile feedback to the operator manipulating the input device in response to master actuator signals generated by the processor. </claim-text>
</claim>
<claim id="CLM-00024">
<claim-text><highlight><bold>24</bold></highlight>. The robotic system of <dependent-claim-reference depends_on="CLM-00022">claim 23</dependent-claim-reference>, wherein the actuators apply loads against the input device in response to the master actuator signals, and wherein the processor generates the master actuator signals in response to a comparison between a position and orientation of the end effector and a position and orientation of the input device in the mapped space. </claim-text>
</claim>
<claim id="CLM-00025">
<claim-text><highlight><bold>25</bold></highlight>. The robotic system of <dependent-claim-reference depends_on="CLM-00022">claim 22</dependent-claim-reference>, wherein the non-visual information indicates forces and torques applied to the slave. </claim-text>
</claim>
<claim id="CLM-00026">
<claim-text><highlight><bold>26</bold></highlight>. The robotic system of <dependent-claim-reference depends_on="CLM-00022">claim 25</dependent-claim-reference>, wherein the non-visual information comprises forces and torques applied via the input device to the hand of the surgeon so that the input device forces and torques substantially correspond to the slave forces and torques according to the image of the slave shown in the display. </claim-text>
</claim>
<claim id="CLM-00027">
<claim-text><highlight><bold>27</bold></highlight>. A robotic system comprising: 
<claim-text>a master controller having an input device movable in a controller workspace; </claim-text>
<claim-text>a slave having an end effector and at least one actuator operatively coupled to the end effector, the actuator moving the end effector in a workspace in response to slave actuator signals; </claim-text>
<claim-text>an imaging system including an image capture device with a field of view movable in the workspace, the imaging system transmitting an image to a display; and </claim-text>
<claim-text>a processor coupling the master controller to an arm of the slave, the processor generating the slave actuator signals by mapping the input device in the controller workspace with the end effector in the workspace according to a transformation, the processor deriving the transformation so that an image of the end effector in the display appears substantially connected to the input device in the workspace; </claim-text>
<claim-text>wherein if the image capture device is moved the state variables of the imaging system change and the input device is re-mapped with the end effector according to another transformation, the other transformation derived in response to the changed state variables of the imaging system; and </claim-text>
<claim-text>wherein the master controller presents non-visual sensory information to a surgeon manipulating the input device, wherein the master controller presents the non-visual information with an orientation correlating to the image, wherein the non-visual information indicates forces and torques applied to the slave, and wherein a correlation between the non-visual information and the image is revised by the controller when the transformation is revised. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00028">
<claim-text><highlight><bold>28</bold></highlight>. The robotic system of <dependent-claim-reference depends_on="CLM-00011">claim 12</dependent-claim-reference>, wherein the processor generates the slave actuation signals so that at least one angle selected from the group comprising a change in angular orientation and an angle of translation of the end effector remains within 5 degrees of the at least one angle of the input device. </claim-text>
</claim>
<claim id="CLM-00029">
<claim-text><highlight><bold>29</bold></highlight>. A robotic system as claimed in <dependent-claim-reference depends_on="CLM-00022">claim 28</dependent-claim-reference>, wherein an input device movement defines an input movement distance, and wherein the image of the end effector moves an output movement distance in response to the input movement distance, the output movement distance being significantly different than the input movement distance. </claim-text>
</claim>
<claim id="CLM-00030">
<claim-text><highlight><bold>30</bold></highlight>. A robotic method comprising: 
<claim-text>moving a master input device in a controller workspace by articulating a plurality of master joints; </claim-text>
<claim-text>generating master joint signals responsive to the master joint configuration; </claim-text>
<claim-text>moving an end effector in an end effector workspace by articulating a plurality of slave joints in response to slave motor signals; </claim-text>
<claim-text>generating slave joint signals responsive to the slave joint configuration; </claim-text>
<claim-text>calculating a position of the input device in the master controller space from the master joint signals; </claim-text>
<claim-text>calculating the end effector position in the end effector workspace from the slave joint signals; </claim-text>
<claim-text>mapping the end effector workspace with the controller workspace according to a transformation; </claim-text>
<claim-text>generating the slave motor signals in response to a difference between the input device position and the end effector position in the mapped space; </claim-text>
<claim-text>moving a field of view of an image capture device in the end effector workspace by articulating a plurality of image device joints; </claim-text>
<claim-text>displaying an image of the field of view adjacent the master controller and generating image device signals responsive to the image device joint configuration; and </claim-text>
<claim-text>revising the mapping in response to the image device signals so that movement of an image of the end effector shown in the display remains aligned with the movement of the input device in the master controller space. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00031">
<claim-text><highlight><bold>31</bold></highlight>. A robotic system comprising: 
<claim-text>a master controller having an input device movable in a master controller space, the input device including first and second grip members for actuating with first and second digits of a hand of an operator; </claim-text>
<claim-text>a slave having an end effector, the end effector moving in a workspace in response to slave actuator signals and including first and second end effector elements; and </claim-text>
<claim-text>a processor coupling the master to the slave, the processor generating the slave actuator signals so that movement of the first and second grip members substantially map movement of the first and second end effector elements; </claim-text>
<claim-text>wherein if a re-map signal is generated state variables of an imaging system change and the input device is re-mapped with the end effector according to another transformation, the other transformation derived in response to the changed state variables of the imaging system; and </claim-text>
<claim-text>wherein a midpoint disposed between tips of the first and second grip members is substantially connected to a midpoint between tips of the end effector elements. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00032">
<claim-text><highlight><bold>32</bold></highlight>. The robotic system of <dependent-claim-reference depends_on="CLM-00022">claim 21</dependent-claim-reference>, wherein a pivotal joint between the first and second grip members is substantially connected to a pivotal joint between the end effector elements. </claim-text>
</claim>
<claim id="CLM-00033">
<claim-text><highlight><bold>33</bold></highlight>. A robotic system comprising: 
<claim-text>a master controller having a handle supported by a plurality of joints so that the handle is movable in a master controller space, the joints defining a gimbal point of rotation about a plurality of axes, the handle disposed adjacent the gimbal point; and </claim-text>
<claim-text>a slave having an end effector, the end effector moving in a workspace in response to movement of the handle; </claim-text>
<claim-text>wherein if a re-map signal is generated state variables of an imaging system change and the input device is re-mapped with the end effector according to another transformation, the other transformation derived in response to the changed state variables of the imaging system. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00034">
<claim-text><highlight><bold>34</bold></highlight>. The robotic system of <dependent-claim-reference depends_on="CLM-00033">claim 33</dependent-claim-reference>, wherein the end effector is supported by a plurality of joints, a last joint being disposed adjacent the end effector, and further comprising a processor coupling the master to the slave, the processor generating slave actuator signals so that the gimbal point of the master is substantially connected to the last joint of the slave. </claim-text>
</claim>
<claim id="CLM-00035">
<claim-text><highlight><bold>35</bold></highlight>. A robotic system comprising: 
<claim-text>a master controller having a handle, the handle moving in a master controller workspace; </claim-text>
<claim-text>a slave supporting an end effector, the slave moving the end effector within a workspace in response to slave actuation signals; and </claim-text>
<claim-text>a processor coupling the master to the slave, the processor generating the slave actuation signals so that movement of a mapping point along the handle of the master controller substantially maps movement of a mapping point along the end effector, the processor capable of changing at least one of the handle mapping point and the end effector mapping point. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00036">
<claim-text><highlight><bold>36</bold></highlight>. The robotic system of <dependent-claim-reference depends_on="CLM-00033">claim 35</dependent-claim-reference>, further comprising a display disposed adjacent the master, the display showing an image of the end effector with a magnification, wherein the at least one mapping point moves with changes in the magnification of the display. </claim-text>
</claim>
<claim id="CLM-00037">
<claim-text><highlight><bold>37</bold></highlight>. A robotic method comprising: 
<claim-text>moving a master input device in a controller workspace by articulating a plurality of master joints; </claim-text>
<claim-text>generating master joint signals responsive to the master joint configuration; </claim-text>
<claim-text>moving an end effector in an end effector workspace by articulating a plurality of slave joints in response to slave motor signals; </claim-text>
<claim-text>generating slave joint signals responsive to the slave joint configuration; </claim-text>
<claim-text>calculating a position of the input device in the master controller space from the master joint signals; </claim-text>
<claim-text>calculating the end effector position in the end effector workspace from the slave joint signals; </claim-text>
<claim-text>mapping the end effector workspace with the controller workspace according to a transformation; and </claim-text>
<claim-text>generating the slave motor signals in response to a difference between the input device position and the end effector position in the mapped space. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00038">
<claim-text><highlight><bold>38</bold></highlight>. A robotic system comprising: 
<claim-text>a master controller having an input device movable in a controller workspace; </claim-text>
<claim-text>a slave having an end effector and at least one actuator operatively coupled to the end effector, the actuator moving the end effector in a workspace in response to slave actuator signals; </claim-text>
<claim-text>an imaging system including an image capture device with a field of view movable in the workspace, the imaging system generating state variable signals indicating the field of view; and </claim-text>
<claim-text>a processor coupling the master controller to the slave arm, the processor generating the slave actuator signals by mapping the input device in the controller workspace with the end effector in the workspace according to a transformation, the processor deriving the transformation in response to the state of variable signals of the imaging system; </claim-text>
<claim-text>wherein the slave comprises a tool holder and a tool detachably mounted in the tool holder, the tool including the end effector and at least one joint, the robotic system further comprising a plurality of alternative kinematically dissimilar tools having alternative end effectors, the alternative tools mountable to the at least one tool holder in place of the tool, the processor capable of changing the transformation in response to a tool change signal. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00039">
<claim-text><highlight><bold>39</bold></highlight>. A robotic system comprising: 
<claim-text>a master controller having an input device supported by a linkage so that the input device can move in a controller workspace with a first number of degrees of freedom; </claim-text>
<claim-text>a slave having an end effector and a plurality of actuators operatively coupled thereto so that the end effector can move in a workspace with a second number of degrees of freedom in response to slave actuator signals, the second number being less than the first number; and </claim-text>
<claim-text>a processor coupling the master controller to the slave, the processor generating the slave actuator signals by mapping the input device in the controller workspace with the end effector in the workspace; </claim-text>
<claim-text>wherein the slave comprises a manipulator arm releasably supporting the end effector and further comprising an alternative end effector mountable to the arm in place of the end effector, the alternative end effector having at least one more degree of freedom than the end effector, wherein the processor inhibits movement of the input device in the controller workspace when the end effector is in use so that the input device is movable in the second number of degrees of freedom.</claim-text>
</claim-text>
</claim>
</subdoc-claims>
<subdoc-drawings id="DRAWINGS">
<heading lvl="0" align="CENTER">Drawings</heading>
<representative-figure>12</representative-figure>
<figure id="figure-D00000">
<image id="EMI-D00000" file="US20030004610A1-20030102-D00000.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00001">
<image id="EMI-D00001" file="US20030004610A1-20030102-D00001.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00002">
<image id="EMI-D00002" file="US20030004610A1-20030102-D00002.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00003">
<image id="EMI-D00003" file="US20030004610A1-20030102-D00003.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00004">
<image id="EMI-D00004" file="US20030004610A1-20030102-D00004.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00005">
<image id="EMI-D00005" file="US20030004610A1-20030102-D00005.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00006">
<image id="EMI-D00006" file="US20030004610A1-20030102-D00006.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00007">
<image id="EMI-D00007" file="US20030004610A1-20030102-D00007.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00008">
<image id="EMI-D00008" file="US20030004610A1-20030102-D00008.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00009">
<image id="EMI-D00009" file="US20030004610A1-20030102-D00009.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00010">
<image id="EMI-D00010" file="US20030004610A1-20030102-D00010.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00011">
<image id="EMI-D00011" file="US20030004610A1-20030102-D00011.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00012">
<image id="EMI-D00012" file="US20030004610A1-20030102-D00012.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00013">
<image id="EMI-D00013" file="US20030004610A1-20030102-D00013.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00014">
<image id="EMI-D00014" file="US20030004610A1-20030102-D00014.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00015">
<image id="EMI-D00015" file="US20030004610A1-20030102-D00015.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00016">
<image id="EMI-D00016" file="US20030004610A1-20030102-D00016.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00017">
<image id="EMI-D00017" file="US20030004610A1-20030102-D00017.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00018">
<image id="EMI-D00018" file="US20030004610A1-20030102-D00018.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00019">
<image id="EMI-D00019" file="US20030004610A1-20030102-D00019.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00020">
<image id="EMI-D00020" file="US20030004610A1-20030102-D00020.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00021">
<image id="EMI-D00021" file="US20030004610A1-20030102-D00021.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00022">
<image id="EMI-D00022" file="US20030004610A1-20030102-D00022.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00023">
<image id="EMI-D00023" file="US20030004610A1-20030102-D00023.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00024">
<image id="EMI-D00024" file="US20030004610A1-20030102-D00024.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00025">
<image id="EMI-D00025" file="US20030004610A1-20030102-D00025.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00026">
<image id="EMI-D00026" file="US20030004610A1-20030102-D00026.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00027">
<image id="EMI-D00027" file="US20030004610A1-20030102-D00027.TIF" imf="TIFF" ti="DR"/>
</figure>
</subdoc-drawings>
</patent-application-publication>
