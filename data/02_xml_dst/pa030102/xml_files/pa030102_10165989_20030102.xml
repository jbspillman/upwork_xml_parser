<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE patent-application-publication SYSTEM "pap-v16-2002-01-01.dtd" [
<!ENTITY US20030001952A1-20030102-D00000.TIF SYSTEM "US20030001952A1-20030102-D00000.TIF" NDATA TIF>
<!ENTITY US20030001952A1-20030102-D00001.TIF SYSTEM "US20030001952A1-20030102-D00001.TIF" NDATA TIF>
<!ENTITY US20030001952A1-20030102-D00002.TIF SYSTEM "US20030001952A1-20030102-D00002.TIF" NDATA TIF>
<!ENTITY US20030001952A1-20030102-D00003.TIF SYSTEM "US20030001952A1-20030102-D00003.TIF" NDATA TIF>
<!ENTITY US20030001952A1-20030102-D00004.TIF SYSTEM "US20030001952A1-20030102-D00004.TIF" NDATA TIF>
<!ENTITY US20030001952A1-20030102-D00005.TIF SYSTEM "US20030001952A1-20030102-D00005.TIF" NDATA TIF>
]>
<patent-application-publication>
<subdoc-bibliographic-information>
<document-id>
<doc-number>20030001952</doc-number>
<kind-code>A1</kind-code>
<document-date>20030102</document-date>
</document-id>
<publication-filing-type>new</publication-filing-type>
<domestic-filing-data>
<application-number>
<doc-number>10165989</doc-number>
</application-number>
<application-number-series-code>10</application-number-series-code>
<filing-date>20020611</filing-date>
</domestic-filing-data>
<foreign-priority-data>
<priority-application-number>
<doc-number>P2001-181249</doc-number>
</priority-application-number>
<filing-date>20010615</filing-date>
<country-code>JP</country-code>
</foreign-priority-data>
<technical-information>
<classification-ipc>
<classification-ipc-primary>
<ipc>H04N007/18</ipc>
</classification-ipc-primary>
<classification-ipc-edition>07</classification-ipc-edition>
</classification-ipc>
<classification-us>
<classification-us-primary>
<uspc>
<class>348</class>
<subclass>069000</subclass>
</uspc>
</classification-us-primary>
<classification-us-secondary>
<uspc>
<class>348</class>
<subclass>061000</subclass>
</uspc>
</classification-us-secondary>
<classification-us-secondary>
<uspc>
<class>348</class>
<subclass>065000</subclass>
</uspc>
</classification-us-secondary>
<classification-us-secondary>
<uspc>
<class>348</class>
<subclass>070000</subclass>
</uspc>
</classification-us-secondary>
</classification-us>
<title-of-invention>Electronic endoscope with color adjustment function</title-of-invention>
</technical-information>
<inventors>
<first-named-inventor>
<name>
<given-name>Mitsuru</given-name>
<family-name>Iida</family-name>
</name>
<residence>
<residence-non-us>
<city>Saitama</city>
<country-code>JP</country-code>
</residence-non-us>
</residence>
<authority-applicant>INV</authority-applicant>
</first-named-inventor>
<inventor>
<name>
<given-name>Haruhiko</given-name>
<family-name>Hibi</family-name>
</name>
<residence>
<residence-non-us>
<city>Tokyo</city>
<country-code>JP</country-code>
</residence-non-us>
</residence>
<authority-applicant>INV</authority-applicant>
</inventor>
<inventor>
<name>
<given-name>Kenichi</given-name>
<family-name>Iriyama</family-name>
</name>
<residence>
<residence-non-us>
<city>Tokyo</city>
<country-code>JP</country-code>
</residence-non-us>
</residence>
<authority-applicant>INV</authority-applicant>
</inventor>
</inventors>
<assignee>
<organization-name>Asahi Kogaku Kogyo Kabushiki Kaisha</organization-name>
<address>
<city>Tokyo</city>
<country>
<country-code>JP</country-code>
</country>
</address>
<assignee-type>03</assignee-type>
</assignee>
<correspondence-address>
<name-1>GREENBLUM &amp; BERNSTEIN, P.L.C.</name-1>
<name-2></name-2>
<address>
<address-1>1941 ROLAND CLARKE PLACE</address-1>
<city>RESTON</city>
<state>VA</state>
<postalcode>20191</postalcode>
<country>
<country-code>US</country-code>
</country>
</address>
</correspondence-address>
</subdoc-bibliographic-information>
<subdoc-abstract>
<paragraph id="A-0001" lvl="0">An electronic endoscope includes a video-scope with an image sensor and a video-processor, to which the video-scope is detachably connected. The electronic endoscope has a light source that emits illuminating light for illuminating a subject, a color adjuster that performs a color adjustment process for color image signals read from the image sensor, which include a plurality of color signal components corresponding to a plurality of color elements, and a light source detector that detects the type of the light source. The color adjuster performs the color adjustment process in accordance with the type of the light source such that color in displayed subject image is properly reproduced. </paragraph>
</subdoc-abstract>
<subdoc-description>
<summary-of-invention>
<section>
<heading lvl="1">BACKGROUND OF THE INVENTION </heading>
<paragraph id="P-0001" lvl="0"><number>&lsqb;0001&rsqb;</number> 1. Field of the Invention </paragraph>
<paragraph id="P-0002" lvl="0"><number>&lsqb;0002&rsqb;</number> The present invention relates to an electronic endoscope for observing an internal organ, especially, it relates to a color-adjustment process for image signals read from an image sensor. </paragraph>
<paragraph id="P-0003" lvl="0"><number>&lsqb;0003&rsqb;</number> 2. Description of the Related Art </paragraph>
<paragraph id="P-0004" lvl="0"><number>&lsqb;0004&rsqb;</number> A lamp for illuminating a subject is provided in an electronic endoscope. Light emitted from the lamp passes through a fiber-optic bundle provided in a video-scope, and is directed to the distal end of the video-scope. The light emitted from the distal end of the video-scope is reflected on a subject, thus a subject image is formed on an image sensor (for example, CCD (Charge-Coupled Device)) provided at the distal end of the video-scope. </paragraph>
<paragraph id="P-0005" lvl="0"><number>&lsqb;0005&rsqb;</number> Generally, to display a color subject image on a monitor, an R, G, B sequential system using a rotating color filter or an on-chip color filter method using an on-chip color filter is used in the imaging process. Thus, image signals corresponding to the primary colors (R, G, B) or image signals corresponding to the complementary colors are generated and then read from the image sensor. A color adjustment process including a white balance adjustment, and so on, is performed to the read image signals, so that the subject image is reproduced on the monitor with proper color. </paragraph>
<paragraph id="P-0006" lvl="0"><number>&lsqb;0006&rsqb;</number> For the lamp, generally, a xenon lamp, a metal halide lamp, or a halogen lamp is used, and each lamp has a particular spectrum distribution. For example, light emitted from the halogen lamp includes a lot of light-components with wavelength corresponding to the color yellow. Consequently, the light with a color close to yellow color is emitted. On the other hand, the xenon lamp emits light close to daylight. Accordingly, color signal components in the image signals vary with different spectrum distributions, in other words, the difference of the type of lamp. To adjust the color balance of the subject image displayed on a monitor, a color adjustment process is performed in accordance with the spectrum distribution. </paragraph>
<paragraph id="P-0007" lvl="0"><number>&lsqb;0007&rsqb;</number> However, when a signal processing circuit is manufactured in accordance with a particular lamp, the lamp cannot be exchanged for an other type of lamp without modifying the signal processing circuit. When using other types of lamps, an improper color adjustment process is performed, so that color in the subject image cannot be properly reproduced. Accordingly, an electronic endoscope should be designed and manufactured for each type of lamp. </paragraph>
</section>
<section>
<heading lvl="1">SUMMARY OF THE INVENTION </heading>
<paragraph id="P-0008" lvl="0"><number>&lsqb;0008&rsqb;</number> Therefore, an object of the present invention is to provide an electronic endoscope that is capable of adjusting a color adjustment process in accordance with the type of lamp. </paragraph>
<paragraph id="P-0009" lvl="0"><number>&lsqb;0009&rsqb;</number> An electronic endoscope of the present invention includes a video-scope with an image sensor and a video-processor. The video-scope is detachably connected to the video-processor. The electronic endoscope has a light source, a color adjuster, and a light source detector. The light source emits illuminating light for illuminating a subject, thus a subject image is formed on the image sensor. To display a color subject image on a monitor, for example, a color filter is provided between the light source and the image sensor. The color filter has a plurality of color elements (for example, primary color elements, or complementary color elements) to generate color image signals including a plurality of color signal components, which correspond to the plurality of color elements. The color image signals, generated in the image sensor, are read, and the color adjuster performs a color adjustment process on the color image signals to generate video signals. In accordance with the video signals, the color image is displayed on the monitor. </paragraph>
<paragraph id="P-0010" lvl="0"><number>&lsqb;0010&rsqb;</number> For the light source, for example, an electronic discharge lamp (gas lamp), such as a xenon lamp, a metal halide lamp, or a halogen lamp, and so on, is applied. Each lamp has a particular spectrum distribution. The light source detector detects the type of the light source, and then the color adjuster performs the color adjustment process in accordance with the type of the light source such that color in displayed subject image is properly reproduced. As the color adjustment process is performed in accordance with the type of light source, proper color is always reproduced in the displayed subject image for any type of light source, without modifying the signal circuit. </paragraph>
<paragraph id="P-0011" lvl="0"><number>&lsqb;0011&rsqb;</number> Preferably, the color adjuster is provided in the video-scope. In this case, a common video-scope can be used for a plurality of video-processors, each of which has different light source. </paragraph>
<paragraph id="P-0012" lvl="0"><number>&lsqb;0012&rsqb;</number> In the color adjustment process, at least a white balance process is performed. Namely, the color adjuster includes a white balance adjuster that uses gain control to adjust the relative ratio of R, G, and B signal components generated from the color image signals. In this case, the color adjustment process is performed in accordance with the gain data. Therefore, preferably, the video-scope includes a color-adjustment-data memory for storing a series of color adjustment data corresponding to plural types of light sources. The set of color adjustment data corresponding to the type of the light source is selected from the series of color adjustment data and is read from the color-adjustment-data memory. The color adjuster performs the color adjustment process in accordance with the set of color adjustment data. </paragraph>
<paragraph id="P-0013" lvl="7"><number>&lsqb;0013&rsqb;</number> For example, when the light source is provided in the video-processor, the color adjuster has a memory area for loading and storing the set of color adjustment data, and the video-processor has a light source memory for storing light source data. Further, the video-scope includes a data setter that sets the set of color adjustment data, namely, stores the set of color adjustment data in the memory area. The light source detector detects the type of the light source in accordance with the light source data and the data setter sets the set of color adjustment data corresponding to the light source data when the video-scope is connected to the video-processor. </paragraph>
<paragraph id="P-0014" lvl="0"><number>&lsqb;0014&rsqb;</number> In addition to the white balance adjustment, the color adjuster has, for example, a primary color signal generator, a gamma corrector, and a video signal generator. The primary color signal generator generates primary color image signals composed of R signal components corresponding to the color Red, G signal components corresponding to the color Green, and B signal components corresponding to the color Blue, on the basis of the color image signals read from the image sensor. The gamma corrector performs a gamma correction for the white balance adjusted primary color image signals. The video signal generator generates the video signals including luminance signals and color difference signals on the basis of the gamma corrected primary color image signals. </paragraph>
<paragraph id="P-0015" lvl="0"><number>&lsqb;0015&rsqb;</number> A video-scope of the present invention is provided in an electronic endoscope having a light source for illuminating a subject. The video-scope has an image sensor and is detachably connected to the video-processor. The video-scope has a color adjuster that performs a color adjustment process for color image signals read from the image sensor, and a light source detector that detects the type of the light source. The color image signals include a plurality of color signal components corresponding to a plurality of color elements, video signals being generated on the basis of the color image signals. The color adjuster performs the color adjustment process in accordance with the type of the light source such that color in displayed subject image is properly reproduced.</paragraph>
</section>
</summary-of-invention>
<brief-description-of-drawings>
<section>
<heading lvl="1">BRIEF DESCRIPTION OF THE DRAWINGS </heading>
<paragraph id="P-0016" lvl="0"><number>&lsqb;0016&rsqb;</number> The present invention will be better understood from the description of the preferred embodiment of the invention set fourth below together with the accompanying drawings, in which: </paragraph>
<paragraph id="P-0017" lvl="0"><number>&lsqb;0017&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1</cross-reference> is a block diagram of an electronic endoscope according to an embodiment. </paragraph>
<paragraph id="P-0018" lvl="0"><number>&lsqb;0018&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 2</cross-reference> is a view showing an initial signal processing circuit in detail. </paragraph>
<paragraph id="P-0019" lvl="0"><number>&lsqb;0019&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3</cross-reference> is a view showing a table associated with color adjustment data stored in an EEPROM. </paragraph>
<paragraph id="P-0020" lvl="0"><number>&lsqb;0020&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 4</cross-reference> is a view showing a flowchart of the data transmission process, which is performed at a system control circuit in the video-processor. </paragraph>
<paragraph id="P-0021" lvl="0"><number>&lsqb;0021&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 5</cross-reference> is a view showing a flowchart of a data setting process performed at a scope-controller in the video-scope.</paragraph>
</section>
</brief-description-of-drawings>
<detailed-description>
<section>
<heading lvl="1">DESCRIPTION OF THE PREFERRED EMBODIMENTS </heading>
<paragraph id="P-0022" lvl="0"><number>&lsqb;0022&rsqb;</number> Hereinafter, the preferred embodiment of the present invention is described with reference to the attached drawings. </paragraph>
<paragraph id="P-0023" lvl="0"><number>&lsqb;0023&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1</cross-reference> is a block diagram of an electronic endoscope according to an embodiment. </paragraph>
<paragraph id="P-0024" lvl="0"><number>&lsqb;0024&rsqb;</number> In the electronic endoscope, a video-scope <highlight><bold>50</bold></highlight> with an image sensor CCD (Charge-Coupled Device) <highlight><bold>54</bold></highlight>, and a video-processor <highlight><bold>10</bold></highlight> that processes signals fed from the video-scope <highlight><bold>50</bold></highlight> is provided. A keyboard <highlight><bold>34</bold></highlight> and a monitor <highlight><bold>32</bold></highlight> for displaying a subject image are connected to the video-processor <highlight><bold>10</bold></highlight>, and the video-scope <highlight><bold>50</bold></highlight> is detachably connected to the video-processor <highlight><bold>10</bold></highlight>. </paragraph>
<paragraph id="P-0025" lvl="0"><number>&lsqb;0025&rsqb;</number> In the video-processor <highlight><bold>10</bold></highlight>, a lamp <highlight><bold>12</bold></highlight> for illuminating a subject S is provided as a light source. When a lamp switch provided on the video-processor <highlight><bold>10</bold></highlight> (not shown) is turned ON, electric power is supplied from the lamp power source <highlight><bold>11</bold></highlight> including a lamp controller <highlight><bold>11</bold></highlight>A to a lamp <highlight><bold>12</bold></highlight>. Thus, the lamp <highlight><bold>12</bold></highlight> is turned ON. Light emitted from the lamp <highlight><bold>12</bold></highlight> is directed toward an incident surface <highlight><bold>51</bold></highlight>A of a fiber-optic bundle <highlight><bold>51</bold></highlight> via a condenser lens <highlight><bold>14</bold></highlight>. The fiber-optic bundle <highlight><bold>51</bold></highlight>, provided through the video-scope <highlight><bold>50</bold></highlight>, further directs the light to the distal end of the video-scope <highlight><bold>50</bold></highlight>, the light passing through the fiber-optic bundle <highlight><bold>51</bold></highlight> exits from an end surface <highlight><bold>51</bold></highlight>B of the fiber-optic bundle <highlight><bold>51</bold></highlight>, and is emitted toward the subject S via a diffusion lens <highlight><bold>52</bold></highlight>, so that the subject S is illuminated. In this embodiment, the lamp <highlight><bold>12</bold></highlight> is one of a halogen lamp, a xenon lamp, and a metal halide lamp. </paragraph>
<paragraph id="P-0026" lvl="0"><number>&lsqb;0026&rsqb;</number> The light reflected on the subject S passes through the objective lens <highlight><bold>53</bold></highlight> and reaches the CCD <highlight><bold>54</bold></highlight>, so that the subject image S is formed on the light-receiving area of the CCD <highlight><bold>54</bold></highlight>. For the color imaging process, in this embodiment, an on-chip color filter method using an on-chip color filter is applied. On a photo-sensor area of the CCD <highlight><bold>54</bold></highlight>, a color filter <highlight><bold>59</bold></highlight>, checkered by four color elements of Yellow (Y), Magenta (Mg), Cyan (Cy) and Green (G), is arranged such that four color elements are opposite the pixels arranged in the light-receiving area. In the CCD <highlight><bold>54</bold></highlight>, color image signals, corresponding to light passing through the color filter <highlight><bold>59</bold></highlight>, are generated by the photoelectric transform effect. The generated color image signals are composed of plural color signal components. Then, one field worth of image signals is read from the CCD <highlight><bold>54</bold></highlight> at regular time intervals in accordance with the so called &ldquo;color difference line sequential system&rdquo;. In this embodiment, the NTSC standard is used as the color TV standard, accordingly, one field worth of image signals is read from the CCD <highlight><bold>54</bold></highlight> at {fraction (1/60)} seconds time intervals, and then fed to an initial signal processing circuit <highlight><bold>55</bold></highlight>. </paragraph>
<paragraph id="P-0027" lvl="0"><number>&lsqb;0027&rsqb;</number> In the initial signal processing circuit <highlight><bold>55</bold></highlight>, as described below, various processes are performed for the image signals, so that video signals including luminance signals and color difference signals are generated. Further, a CCD driver (not shown) for driving the CCD <highlight><bold>54</bold></highlight> is provided in the initial signal processing circuit <highlight><bold>55</bold></highlight>, driving signals fed to the CCD <highlight><bold>54</bold></highlight>. The generated luminance signals and the color difference signals are fed to a latter signal processing circuit <highlight><bold>28</bold></highlight> and the luminance signals are further fed to a light-control circuit <highlight><bold>23</bold></highlight>. Synchronizing signals are fed from the initial signal processing circuit <highlight><bold>55</bold></highlight> to the light-control circuit <highlight><bold>23</bold></highlight> in accordance with the output-timing of the luminance signals. In the latter signal processing circuit <highlight><bold>28</bold></highlight>, a given process is performed for the input video signals, and the processed video signals are output to the monitor <highlight><bold>32</bold></highlight> as NTSC composite signals, S-video signals, and R, G, B component signals. Thus, the subject image is displayed on the monitor <highlight><bold>32</bold></highlight>. </paragraph>
<paragraph id="P-0028" lvl="0"><number>&lsqb;0028&rsqb;</number> A system control circuit <highlight><bold>22</bold></highlight> including a CPU <highlight><bold>24</bold></highlight> (Central Processing Unit) controls the video-processor <highlight><bold>10</bold></highlight> and outputs control signals to the light-control circuit <highlight><bold>23</bold></highlight>, the lamp controller <highlight><bold>11</bold></highlight>A, the latter signal processing circuit <highlight><bold>28</bold></highlight>, and soon. In a timing control circuit <highlight><bold>30</bold></highlight>, clock pulses are output to each circuit in the video-processor <highlight><bold>10</bold></highlight>, and synchronizing signals to be interleaved in the video signals are fed to the latter signal processing circuit <highlight><bold>28</bold></highlight>. In a ROM (Read Only Memory) <highlight><bold>25</bold></highlight>, lamp data associated with three types of lamp, halogen lamps, metal halide lamps and xenon lamps, is stored in advance. </paragraph>
<paragraph id="P-0029" lvl="0"><number>&lsqb;0029&rsqb;</number> A stop <highlight><bold>16</bold></highlight> is provided between the incident surface <highlight><bold>51</bold></highlight>A and the condenser lens <highlight><bold>14</bold></highlight> to adjust an amount of light illuminating the subject S, and it opens and closes by using a motor <highlight><bold>18</bold></highlight>. The light-control circuit <highlight><bold>23</bold></highlight> is constructed of a DSP (Digital Signal Processor), and controls the stop <highlight><bold>16</bold></highlight> such that the brightness of the subject image on the monitor <highlight><bold>32</bold></highlight> is maintained at a proper brightness. The light-control circuit <highlight><bold>23</bold></highlight> outputs control signals to a motor-driver <highlight><bold>20</bold></highlight> in accordance with the input luminance signals, and then the motor <highlight><bold>18</bold></highlight> is driven by the motor driver <highlight><bold>20</bold></highlight>, so that the stop <highlight><bold>16</bold></highlight> opens or closes by a given amount. </paragraph>
<paragraph id="P-0030" lvl="0"><number>&lsqb;0030&rsqb;</number> In this embodiment, a scope-controller <highlight><bold>56</bold></highlight>, which controls the video-scope <highlight><bold>50</bold></highlight>, and an EEPROM (Electronic Erasable Programmable ROM) <highlight><bold>57</bold></highlight> are provided in the video-scope <highlight><bold>50</bold></highlight>. In the EEPROM <highlight><bold>57</bold></highlight>, in addition to data associated with the characteristics of the video-scope <highlight><bold>50</bold></highlight> (for example, pixel number), color adjustment data associated with the color adjustment process are stored. </paragraph>
<paragraph id="P-0031" lvl="0"><number>&lsqb;0031&rsqb;</number> The scope controller <highlight><bold>56</bold></highlight> controls the initial signal processing circuit <highlight><bold>55</bold></highlight> having a register <highlight><bold>55</bold></highlight>A and accesses the data in the EEPROM <highlight><bold>57</bold></highlight>. When the video-scope <highlight><bold>50</bold></highlight> is connected to the video-processor <highlight><bold>10</bold></highlight>, various data is transmitted between the scope-controller <highlight><bold>56</bold></highlight> and the system control circuit <highlight><bold>22</bold></highlight>. Namely, the data associated with the characteristics of the video-scope <highlight><bold>50</bold></highlight> is fed to the system control circuit <highlight><bold>22</bold></highlight>, whereas the lamp data associated with the kind of the lamp <highlight><bold>12</bold></highlight> is fed to the scope-controller <highlight><bold>56</bold></highlight>. Then, specific data corresponding to the lamp data is read from the EEPROM <highlight><bold>57</bold></highlight>, and written in the register <highlight><bold>55</bold></highlight>A. The initial signal processing circuit <highlight><bold>55</bold></highlight> processes the image signals in accordance with the written data. </paragraph>
<paragraph id="P-0032" lvl="0"><number>&lsqb;0032&rsqb;</number> A setting switch (not shown) for setting a base luminance level is provided on the front panel <highlight><bold>96</bold></highlight> of the video-processor <highlight><bold>10</bold></highlight>. When the user operates the setting switch, an operational signal is fed to the system control circuit <highlight><bold>22</bold></highlight>. The base luminance level data is temporarily stored in a RAM (Random Access Memory) <highlight><bold>26</bold></highlight>, and is fed to the light-control circuit <highlight><bold>23</bold></highlight> when required. When the keyboard <highlight><bold>34</bold></highlight> is operated by the user to display character information, such as patient&apos;s information, the operational signal is fed to the system control circuit <highlight><bold>22</bold></highlight>. Character signals are generated on the basis of the operational signal and are superimposed into the video signals at the latter signal processing circuit <highlight><bold>28</bold></highlight>, so that the character information is displayed on the monitor <highlight><bold>32</bold></highlight> with the subject image. </paragraph>
<paragraph id="P-0033" lvl="0"><number>&lsqb;0033&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 2</cross-reference> is a detailed view showing the initial signal processing circuit <highlight><bold>55</bold></highlight>. <cross-reference target="DRAWINGS">FIG. 3</cross-reference> is a view showing a table associated with color adjustment data stored in the EEPROM <highlight><bold>57</bold></highlight>. </paragraph>
<paragraph id="P-0034" lvl="0"><number>&lsqb;0034&rsqb;</number> The image signals read from the CCD <highlight><bold>54</bold></highlight> are amplified at an amplifier (not shown) in the initial signal processing circuit <highlight><bold>55</bold></highlight> and are then fed to a signal separating circuit <highlight><bold>60</bold></highlight>. In the signal separating circuit <highlight><bold>60</bold></highlight>, the color image signals are separated into initial luminance signals Ya and initial chrominance signals C&prime;, which are fed to an R, G, B matrix circuit <highlight><bold>62</bold></highlight>. As is well known, the initial luminance signals Ya(&equals;2R&plus;3G&plus;2B) are signals corresponding to the luminance signals Y. On the other hand, the initial chrominance signals C&prime; includes initial color difference signals C&prime;r(&equals;2R&minus;G) and C&prime;b(&equals;2B&minus;G), which respectively correspond to color difference signals Cr(&equals;R&minus;Y) and color difference signals Cb(&equals;B&minus;Y). </paragraph>
<paragraph id="P-0035" lvl="0"><number>&lsqb;0035&rsqb;</number> In the R, G, B matrix circuit <highlight><bold>62</bold></highlight>, primary color signals composed of &ldquo;Red (R), Green (G), and Blue (B)&rdquo; signal components are generated by following formula, on the basis of the initial luminance signals Ya and the initial chrominance signals C&prime;. Note that, &ldquo;&agr; and &bgr;&rdquo; indicates values of data &ldquo;R MATX&rdquo; and &ldquo;B MTX&rdquo; respectively, which are fed from the scope-controller <highlight><bold>56</bold></highlight>. </paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>R&equals;C&prime;r&plus;&agr;&times;Ya</italic></highlight>&emsp;&emsp;(1) </in-line-formula></paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>B&equals;&minus;C&prime;b&plus;&bgr;&times;</italic></highlight>(<highlight><italic>Ya&minus;C&prime;r</italic></highlight>)&emsp;&emsp;(2) </in-line-formula></paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>G&equals;Ya&minus;C&prime;r&plus;C&prime;b</italic></highlight>&emsp;&emsp;(3) </in-line-formula></paragraph>
<paragraph id="P-0036" lvl="7"><number>&lsqb;0036&rsqb;</number> The generated primary color signals &ldquo;R, G, and B&rdquo; are fed to a white balance circuit <highlight><bold>64</bold></highlight>. </paragraph>
<paragraph id="P-0037" lvl="0"><number>&lsqb;0037&rsqb;</number> In the white balance circuit <highlight><bold>64</bold></highlight>, a gain control is performed for the R, and B signal components of the primary color signals (R, G, B), in accordance with R and B gain values. The R and B gain values are respectively defined as the value of initial gain data &ldquo;R GAIN&rdquo;, and the value of the initial gain data &ldquo;B GAIN&rdquo; at an initial setting of the electronic endoscope. The initial gain data &ldquo;R GAIN and B GAIN&rdquo;, which are included in the color-adjustment data, are read from the EEPROM <highlight><bold>57</bold></highlight> by the scope-controller <highlight><bold>56</bold></highlight> and are then fed to the white balance circuit <highlight><bold>64</bold></highlight>. On the other hand, while operating the electronic endoscope, the gain control is performed in accordance with gain data &ldquo;R CONT and B CONT&rdquo;. The gain data &ldquo;R CONT and B CONT&rdquo; are read from the EEPROM <highlight><bold>57</bold></highlight> by the scope-controller <highlight><bold>56</bold></highlight> and are fed to the white balance circuit <highlight><bold>64</bold></highlight>. Note that, the primary color signal &ldquo;G&rdquo; may be adjusted in accordance with a chrominance gain value, which is a value of gain data &ldquo;C LEVEL&rdquo; fed from the scope-controller <highlight><bold>56</bold></highlight>. The processed primary color signals are fed to a gamma correcting circuit <highlight><bold>66</bold></highlight>. </paragraph>
<paragraph id="P-0038" lvl="0"><number>&lsqb;0038&rsqb;</number> In the gamma correcting circuit <highlight><bold>66</bold></highlight>, a gamma correction is performed for the primary color signals. The gamma characteristic curve depends upon a value of gamma characteristic data &ldquo;C-&ggr;CON&rdquo;. The corrected signals are fed to a color matrix circuit <highlight><bold>68</bold></highlight>. In the color matrix circuit <highlight><bold>68</bold></highlight>, luminance signals Y and color difference signals Cb(&equals;B&minus;Y) and Cr(&equals;R&minus;Y) are generated on the basis of the primary color signals. The color difference signals Cb and Cr, constructing chrominance signals, are subjected to a phase adjustment in accordance with phase control data &ldquo;Cb HUE&rdquo; and &ldquo;Cr HUE&rdquo; fed from the scope-controller <highlight><bold>56</bold></highlight>. Further, the output level of the color difference signals Cb and Cr are adjusted in accordance with the output level adjusting data &ldquo;Cb GAIN and Cr GAIN&rdquo; fed from the scope-controller <highlight><bold>56</bold></highlight>. The luminance signals Y and the color difference signals Cb and Cr are fed to the processor <highlight><bold>10</bold></highlight>. </paragraph>
<paragraph id="P-0039" lvl="0"><number>&lsqb;0039&rsqb;</number> The data used in the color adjustment process, described above, is stored in the EEPROM <highlight><bold>57</bold></highlight> in advance, and is stored at a given addresses in the EEPROM <highlight><bold>57</bold></highlight>, as shown in <cross-reference target="DRAWINGS">FIG. 3</cross-reference>. In this embodiment, color adjustment data are prepared for each of the three types of lamps <highlight><bold>12</bold></highlight>, which are composed of a set of color adjustment data for the xenon lamp &ldquo;KD&rdquo;, a set of color adjustment data for the metal halide lamp &ldquo;MD&rdquo;, and a set of color adjustment data for the halogen lamp &ldquo;HD&rdquo;. For example, when the lamp <highlight><bold>12</bold></highlight> in the processor <highlight><bold>10</bold></highlight> is a xenon lamp, the set of color adjustment data &ldquo;KD&rdquo; is read from the EEPROM <highlight><bold>57</bold></highlight> by the scope-controller <highlight><bold>56</bold></highlight>, and initial R, B gain data &ldquo;R GAIN and B GAIN&rdquo;, phase control data &ldquo;Cb HUE&rdquo; and so on are loaded to the register <highlight><bold>55</bold></highlight>A in the initial signal processing circuit <highlight><bold>55</bold></highlight>. Note that, the set of color adjustment data output from the scope-controller <highlight><bold>56</bold></highlight> is converted from analog data to digital data and is then fed to the initial signal processing circuit <highlight><bold>55</bold></highlight>. </paragraph>
<paragraph id="P-0040" lvl="0"><number>&lsqb;0040&rsqb;</number> As each lamp has a particular spectrum characteristic, the value of data in a given set of color adjustment data is different from the value of corresponding data in another set of color adjustment data. For example, R initial gain data &ldquo;R GAIN&rdquo; and B initial gain data &ldquo;B GAIN&rdquo; in the set of color adjustment data &ldquo;KD&rdquo; for the xenon lamp, are substantially the same value, as light emitted from the xenon lamp is close to white-color light. On the other hand, as light emitted from the halogen lamp is close to yellow-color light, for the set of color adjustment data &ldquo;HD&rdquo; for the halogen lamp, the initial R gain data &ldquo;R GAIN&rdquo; is smaller than the initial B gain data &ldquo;B GAIN&rdquo;. </paragraph>
<paragraph id="P-0041" lvl="0"><number>&lsqb;0041&rsqb;</number> With reference to <cross-reference target="DRAWINGS">FIG. 4</cross-reference> and <cross-reference target="DRAWINGS">FIG. 5</cross-reference>, the data setting process with color adjustment data is explained. <cross-reference target="DRAWINGS">FIG. 4</cross-reference> is a view showing a flowchart of the data transmission process, which is performed at the system control circuit <highlight><bold>22</bold></highlight>. The process is performed as a subroutine of a main-routine (not shown). <cross-reference target="DRAWINGS">FIG. 5</cross-reference> is a view showing a flowchart of a data setting process performed at the scope-controller <highlight><bold>56</bold></highlight> in the video-scope <highlight><bold>50</bold></highlight>. </paragraph>
<paragraph id="P-0042" lvl="0"><number>&lsqb;0042&rsqb;</number> In Step <highlight><bold>101</bold></highlight>, a detecting signal associated with connection of the video-scope <highlight><bold>50</bold></highlight> is fed to the system control circuit <highlight><bold>22</bold></highlight>. In Step <highlight><bold>102</bold></highlight>, it is determined whether the video-scope <highlight><bold>50</bold></highlight> is connected to the video-processor <highlight><bold>10</bold></highlight>. When it is determined that the video-scope <highlight><bold>50</bold></highlight> is not connected to the video-processor <highlight><bold>10</bold></highlight>, the process returns to Step <highlight><bold>101</bold></highlight>. On the other hand, when it is determined that the video-scope <highlight><bold>50</bold></highlight> is connected to the video-processor <highlight><bold>10</bold></highlight>, the process goes to Step <highlight><bold>103</bold></highlight>. In Step <highlight><bold>103</bold></highlight>, the preparation for a data communication with the video-scope <highlight><bold>50</bold></highlight> is performed. Then, in Step <highlight><bold>104</bold></highlight>, lamp data associated with the type of lamp <highlight><bold>12</bold></highlight> is fed from the system control circuit <highlight><bold>22</bold></highlight> to the scope-controller <highlight><bold>56</bold></highlight>. After Step <highlight><bold>104</bold></highlight> is performed, the process goes to Step <highlight><bold>105</bold></highlight>. </paragraph>
<paragraph id="P-0043" lvl="0"><number>&lsqb;0043&rsqb;</number> In Step <highlight><bold>105</bold></highlight>, it is determined whether acknowledgment data, indicating that the video-scope <highlight><bold>50</bold></highlight> has received the lamp data, is fed from the scope-controller <highlight><bold>56</bold></highlight>. When it is determined that the acknowledgment data has not been fed from the scope-controller <highlight><bold>56</bold></highlight>, the process returns to Step <highlight><bold>104</bold></highlight>. On the other hand, when it is determined that the acknowledgment data has been fed from the scope-controller <highlight><bold>56</bold></highlight>, the process goes to Step <highlight><bold>106</bold></highlight> and communication with the video-scope <highlight><bold>50</bold></highlight> is terminated. After communication is terminated, the process returns to the main routine. </paragraph>
<paragraph id="P-0044" lvl="0"><number>&lsqb;0044&rsqb;</number> The process shown in <cross-reference target="DRAWINGS">FIG. 5</cross-reference> is started when the video-scope <highlight><bold>50</bold></highlight> is connected to the video-processor <highlight><bold>10</bold></highlight>. In Step <highlight><bold>201</bold></highlight>, a process that requires the transmission of lamp data is performed. Then, in Step <highlight><bold>202</bold></highlight>, it is determined whether the lamp data can be received at the scope-controller <highlight><bold>56</bold></highlight>. When it is determined that the lamp data cannot be received, the process returns to Step <highlight><bold>201</bold></highlight>. On the other hand, when it is determined that the lamp data can be received, the process goes to Step <highlight><bold>203</bold></highlight>. </paragraph>
<paragraph id="P-0045" lvl="0"><number>&lsqb;0045&rsqb;</number> In Step <highlight><bold>203</bold></highlight>, data is received at the scope-controller <highlight><bold>56</bold></highlight>. Then, in Step <highlight><bold>204</bold></highlight>, it is determined whether the data fed from the system control circuit <highlight><bold>22</bold></highlight> is proper, namely, whether data fed from the system control circuit <highlight><bold>22</bold></highlight> is the lamp data. When it is determined that the data fed from the system control circuit <highlight><bold>22</bold></highlight> is not proper, namely, other data has been fed to the scope-controller <highlight><bold>56</bold></highlight>, the process goes to Step <highlight><bold>205</bold></highlight>, wherein retransmission of the lamp data is required. On the other hand, when it is determined that the data fed from the system control circuit <highlight><bold>22</bold></highlight> is proper lamp data, the process goes to Step <highlight><bold>206</bold></highlight>. </paragraph>
<paragraph id="P-0046" lvl="0"><number>&lsqb;0046&rsqb;</number> In Step <highlight><bold>206</bold></highlight>, the acknowledge data is fed to the system control circuit <highlight><bold>22</bold></highlight>. Then, in Step <highlight><bold>207</bold></highlight>, the type of the lamp <highlight><bold>12</bold></highlight> is determined in accordance with the received lamp data. In Step <highlight><bold>208</bold></highlight>, a set of color adjustment data corresponding to the received lamp data, is read from the EEPROM <highlight><bold>57</bold></highlight> and is fed to the initial signal processing circuit <highlight><bold>55</bold></highlight>. For example, if the lamp <highlight><bold>12</bold></highlight> is the xenon lamp, the color-adjustment data &ldquo;KD&rdquo; is read from the EEPROM <highlight><bold>57</bold></highlight>. </paragraph>
<paragraph id="P-0047" lvl="0"><number>&lsqb;0047&rsqb;</number> In this way, in this embodiment, a series of color adjustment data composed of the data for a halogen lamp &ldquo;HD&rdquo;, a xenon lamp &ldquo;KD&rdquo;, and a metal halide lamp &ldquo;MD&rdquo;, is stored in the EEPROM <highlight><bold>57</bold></highlight> in the video-scope <highlight><bold>50</bold></highlight>. When the video-scope <highlight><bold>50</bold></highlight> is connected to the video-processor <highlight><bold>10</bold></highlight>, the lamp data is fed to the video-scope <highlight><bold>50</bold></highlight> and then the kind of lamp <highlight><bold>12</bold></highlight> is detected. The set of color adjustment data corresponding to the lamp data is read from the EEPROM <highlight><bold>57</bold></highlight> and is then fed to the initial signal processing circuit <highlight><bold>55</bold></highlight>. The initial signal processing circuit <highlight><bold>55</bold></highlight> performs the color adjustment process, which includes the signal separating process, the primary color signal generating process, the white balance process, the gamma correcting process, and the video signal generating process, for the image signals read from the CCD <highlight><bold>54</bold></highlight> in accordance with the set of color adjustment data fed from the EEPROM <highlight><bold>57</bold></highlight>. </paragraph>
<paragraph id="P-0048" lvl="0"><number>&lsqb;0048&rsqb;</number> In this embodiment, the complementary filter is used at the CCD <highlight><bold>54</bold></highlight> and the color difference line sequential system is applied as a signal reading method, however, a primary color (R, G, B) filter and a Bayer method may be applied. In this case, the initial signal processing circuit <highlight><bold>55</bold></highlight> is constructed in accordance with the primary color (R, G, B) filter and the Bayer method. </paragraph>
<paragraph id="P-0049" lvl="0"><number>&lsqb;0049&rsqb;</number> For the imaging process, an R, G, B sequential system using a rotating color filter may be used in place of the on-chip color filer method. Further, for the TV standard, other methods, such as a PAL method, may be applied in place of the NTSC method. </paragraph>
<paragraph id="P-0050" lvl="0"><number>&lsqb;0050&rsqb;</number> For the lamp <highlight><bold>12</bold></highlight>, an LED may be applied in place of the gas lamp (electric discharge lamp). In this case, a set of color adjustment data corresponding to the spectrum distribution of the LED is prepared. </paragraph>
<paragraph id="P-0051" lvl="0"><number>&lsqb;0051&rsqb;</number> For the series of color adjustment data, common data may be used. For example, a value of the gamma correcting data &ldquo;C-&ggr;CON&rdquo; may be set to the same value for each lamp. </paragraph>
<paragraph id="P-0052" lvl="0"><number>&lsqb;0052&rsqb;</number> The color adjustment process may be performed in the video-processor <highlight><bold>10</bold></highlight>. Further, the video-processor <highlight><bold>10</bold></highlight> may be composed of a light source apparatus including the lamp <highlight><bold>12</bold></highlight> and a signal processing apparatus, which are prepared separately. In this case, when the light source apparatus is changed, the video-scope can be used directly without being changed. </paragraph>
<paragraph id="P-0053" lvl="0"><number>&lsqb;0053&rsqb;</number> Finally, it will be understood by those skilled in the art that the foregoing description is of preferred embodiments of the device, and that various changes and modifications may be made to the present invention without departing from the spirit and scope thereof. </paragraph>
<paragraph id="P-0054" lvl="0"><number>&lsqb;0054&rsqb;</number> The present disclosure relates to subject matters contained in Japanese Patent Application No.P2001-181249 (filed on Jun. 15, 2001) which is expressly incorporated herein, by reference, in its entirety. </paragraph>
</section>
</detailed-description>
</subdoc-description>
<subdoc-claims>
<claim id="CLM-00001">
<claim-text><highlight><bold>1</bold></highlight>. An electronic endoscope including a video-scope with an image sensor and a video-processor, to which said video-scope is detachably connected, said electronic endoscope comprising: 
<claim-text>a light source that emits illuminating light for illuminating a subject, color image signals corresponding to the subject, which include a plurality of color signal components corresponding to a plurality of color elements, being read from said image sensor; </claim-text>
<claim-text>a color adjuster that performs a color adjustment process for the color image signals to generate video signals; and </claim-text>
<claim-text>a light source detector that detects the type of said light source, </claim-text>
<claim-text>wherein said color adjuster performs the color adjustment process in accordance with the type of said light source such that color in a displayed subject image is properly reproduced. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00002">
<claim-text><highlight><bold>2</bold></highlight>. The electronic endoscope of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein said color adjuster is provided in said video-scope. </claim-text>
</claim>
<claim id="CLM-00003">
<claim-text><highlight><bold>3</bold></highlight>. The electronic endoscope of <dependent-claim-reference depends_on="CLM-00002">claim 2</dependent-claim-reference>, wherein said video-scope includes a color adjustment data memory for storing a series of color adjustment data corresponding to plural types of light source, and 
<claim-text>wherein a set of color adjustment data corresponding to the type of said light source is selected from the series of color adjustment data memory and read from said color adjustment data memory, and said color adjuster performs the color adjustment process in accordance with the set of color adjustment data. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00004">
<claim-text><highlight><bold>4</bold></highlight>. The electronic endoscope of <dependent-claim-reference depends_on="CLM-00003">claim 3</dependent-claim-reference>, wherein said light source is provided in said video-processor, said color adjuster has a memory area for loading and storing the set of color adjustment data, said video-processor has a light source memory for storing light source data, and said video-scope includes a data setter that sets the set of color adjustment data to said memory area, 
<claim-text>wherein said light source detector detects the type of said light source in accordance with the light source data and said data setter sets the set of color adjustment data corresponding to the light source data when said video-scope is connected to said video-processor. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00005">
<claim-text><highlight><bold>5</bold></highlight>. The electronic endoscope of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein said light source is one of a xenon lamp, a metal halide lamp, and a halogen lamp, said lamp detector detects the type of said lamp by detecting which lamp among said xenon lamp, said metal halide lamp, and said halogen lamp is being used. </claim-text>
</claim>
<claim id="CLM-00006">
<claim-text><highlight><bold>6</bold></highlight>. The electronic endoscope of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein said color adjuster includes a white balance adjuster that adjusts a relative ratio of R, G, B signal components generated from the color image signals, by gain-control. </claim-text>
</claim>
<claim id="CLM-00007">
<claim-text><highlight><bold>7</bold></highlight>. The electronic endoscope of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein said color adjuster includes: 
<claim-text>a primary color signal generator that generates primary color image signals composed of R signal components corresponding to the color Red, G signal components corresponding to the color Green, and B signal components corresponding to the color Blue, on the basis of the color image signals read from said image sensor; </claim-text>
<claim-text>a white balance adjuster that adjusts a relative ratio of the R, G, B signal components in the primary color signals, by gain-control; </claim-text>
<claim-text>a gamma corrector that performs a gamma correction for the white balance adjusted primary color image signals; and </claim-text>
<claim-text>a video signal generator that generates the video signals including luminance signals and color difference signals on the basis of said gamma corrected primary color image signals. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00008">
<claim-text><highlight><bold>8</bold></highlight>. A video-scope provided in an electronic endoscope having a light source for illuminating a subject, said video-scope having an image sensor and being detachably connected to said video-processor, color image signals corresponding to the subject, which include a plurality of color signal components corresponding to a plurality of color elements, said video-scope comprising: 
<claim-text>a color adjuster that performs a color adjustment process for the color image signals to generate video signals; and </claim-text>
<claim-text>a light source detector that detects the type of said light source, </claim-text>
<claim-text>wherein said color adjuster performs the color adjustment process in accordance with the type of said light source such that color in a displayed subject image is properly reproduced.</claim-text>
</claim-text>
</claim>
</subdoc-claims>
<subdoc-drawings id="DRAWINGS">
<heading lvl="0" align="CENTER">Drawings</heading>
<representative-figure>1</representative-figure>
<figure id="figure-D00000">
<image id="EMI-D00000" file="US20030001952A1-20030102-D00000.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00001">
<image id="EMI-D00001" file="US20030001952A1-20030102-D00001.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00002">
<image id="EMI-D00002" file="US20030001952A1-20030102-D00002.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00003">
<image id="EMI-D00003" file="US20030001952A1-20030102-D00003.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00004">
<image id="EMI-D00004" file="US20030001952A1-20030102-D00004.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00005">
<image id="EMI-D00005" file="US20030001952A1-20030102-D00005.TIF" imf="TIFF" ti="DR"/>
</figure>
</subdoc-drawings>
</patent-application-publication>
