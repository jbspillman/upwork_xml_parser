<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE patent-application-publication SYSTEM "pap-v16-2002-01-01.dtd" [
<!ENTITY US20030001978A1-20030102-D00000.TIF SYSTEM "US20030001978A1-20030102-D00000.TIF" NDATA TIF>
<!ENTITY US20030001978A1-20030102-D00001.TIF SYSTEM "US20030001978A1-20030102-D00001.TIF" NDATA TIF>
<!ENTITY US20030001978A1-20030102-D00002.TIF SYSTEM "US20030001978A1-20030102-D00002.TIF" NDATA TIF>
<!ENTITY US20030001978A1-20030102-D00003.TIF SYSTEM "US20030001978A1-20030102-D00003.TIF" NDATA TIF>
<!ENTITY US20030001978A1-20030102-D00004.TIF SYSTEM "US20030001978A1-20030102-D00004.TIF" NDATA TIF>
<!ENTITY US20030001978A1-20030102-D00005.TIF SYSTEM "US20030001978A1-20030102-D00005.TIF" NDATA TIF>
<!ENTITY US20030001978A1-20030102-D00006.TIF SYSTEM "US20030001978A1-20030102-D00006.TIF" NDATA TIF>
<!ENTITY US20030001978A1-20030102-D00007.TIF SYSTEM "US20030001978A1-20030102-D00007.TIF" NDATA TIF>
<!ENTITY US20030001978A1-20030102-D00008.TIF SYSTEM "US20030001978A1-20030102-D00008.TIF" NDATA TIF>
<!ENTITY US20030001978A1-20030102-D00009.TIF SYSTEM "US20030001978A1-20030102-D00009.TIF" NDATA TIF>
<!ENTITY US20030001978A1-20030102-D00010.TIF SYSTEM "US20030001978A1-20030102-D00010.TIF" NDATA TIF>
]>
<patent-application-publication>
<subdoc-bibliographic-information>
<document-id>
<doc-number>20030001978</doc-number>
<kind-code>A1</kind-code>
<document-date>20030102</document-date>
</document-id>
<publication-filing-type>new</publication-filing-type>
<domestic-filing-data>
<application-number>
<doc-number>10167760</doc-number>
</application-number>
<application-number-series-code>10</application-number-series-code>
<filing-date>20020612</filing-date>
</domestic-filing-data>
<technical-information>
<classification-ipc>
<classification-ipc-primary>
<ipc>H04N007/173</ipc>
</classification-ipc-primary>
<classification-ipc-secondary>
<ipc>H04N007/18</ipc>
</classification-ipc-secondary>
<classification-ipc-secondary>
<ipc>H04N009/47</ipc>
</classification-ipc-secondary>
<classification-ipc-secondary>
<ipc>H04N009/64</ipc>
</classification-ipc-secondary>
<classification-ipc-edition>07</classification-ipc-edition>
</classification-ipc>
<classification-us>
<classification-us-primary>
<uspc>
<class>348</class>
<subclass>714000</subclass>
</uspc>
</classification-us-primary>
<classification-us-secondary>
<uspc>
<class>348</class>
<subclass>715000</subclass>
</uspc>
</classification-us-secondary>
<classification-us-secondary>
<uspc>
<class>725</class>
<subclass>134000</subclass>
</uspc>
</classification-us-secondary>
<classification-us-secondary>
<uspc>
<class>348</class>
<subclass>142000</subclass>
</uspc>
</classification-us-secondary>
</classification-us>
<title-of-invention>Method and system for enhancing display functionality in a set-top box environment</title-of-invention>
</technical-information>
<continuity-data>
<non-provisional-of-provisional>
<document-id>
<doc-number>60297843</doc-number>
<document-date>20010612</document-date>
<country-code>US</country-code>
</document-id>
</non-provisional-of-provisional>
</continuity-data>
<inventors>
<first-named-inventor>
<name>
<given-name>Jason</given-name>
<middle-name>M.</middle-name>
<family-name>Smith</family-name>
</name>
<residence>
<residence-us>
<city>Redmond</city>
<state>WA</state>
<country-code>US</country-code>
</residence-us>
</residence>
<authority-applicant>INV</authority-applicant>
</first-named-inventor>
<inventor>
<name>
<given-name>D.</given-name>
<middle-name>David</middle-name>
<family-name>Nason</family-name>
</name>
<residence>
<residence-us>
<city>Bainbridge Island</city>
<state>WA</state>
<country-code>US</country-code>
</residence-us>
</residence>
<authority-applicant>INV</authority-applicant>
</inventor>
<inventor>
<name>
<given-name>John</given-name>
<middle-name>A.</middle-name>
<family-name>Painter</family-name>
</name>
<residence>
<residence-us>
<city>Everett</city>
<state>WA</state>
<country-code>US</country-code>
</residence-us>
</residence>
<authority-applicant>INV</authority-applicant>
</inventor>
<inventor>
<name>
<given-name>William</given-name>
<middle-name>J.</middle-name>
<family-name>Heaton</family-name>
</name>
<residence>
<residence-us>
<city>Everett</city>
<state>WA</state>
<country-code>US</country-code>
</residence-us>
</residence>
<authority-applicant>INV</authority-applicant>
</inventor>
</inventors>
<assignee>
<organization-name>xSides Corporation</organization-name>
<address>
<city>Seattle</city>
<state>WA</state>
</address>
<assignee-type>02</assignee-type>
</assignee>
<correspondence-address>
<name-1>SEED INTELLECTUAL PROPERTY LAW GROUP PLLC</name-1>
<name-2></name-2>
<address>
<address-1>701 FIFTH AVE</address-1>
<address-2>SUITE 6300</address-2>
<city>SEATTLE</city>
<state>WA</state>
<postalcode>98104-7092</postalcode>
<country>
<country-code>US</country-code>
</country>
</address>
</correspondence-address>
</subdoc-bibliographic-information>
<subdoc-abstract>
<paragraph id="A-0001" lvl="0">Methods and systems for enhancing the storage and display of video data and other digital content in a set-top box or other television environment so that such data is securely stored and displayed are provided. Example embodiments provide an enhanced display controller (EDC) that executes in an electronic device, such as a set-top box, to provide secure storage and playback of streamed digital content. The EDC creates or identifies a secure storage location and stores the data stream in that secure location in a secure manner, thereby minimizing unauthorized access. In addition, the EDC supports the secure display of the data stream using standard (or proprietary) encryption techniques, and/or obfuscation techniques. The EDC also optionally supports various requirements for complying with the usage limitations typically associated with DRM data content. In one embodiment, the enhanced display controller is a modified set-top display (device) driver that includes a VBI decoder, mechanisms (e.g., code) for securely storing and retrieving digital content, a display obfuscation/encryption mechanism, and a secure data repository. Methods and systems for displaying dynamic, floating graphics using an EDC are also provided. These graphics may be used to as interfaces to invoke the secure storage and playback mechanisms of the EDC and to navigate through display spaces presented on the television display. </paragraph>
</subdoc-abstract>
<subdoc-description>
<summary-of-invention>
<section>
<heading lvl="1">BACKGROUND OF THE INVENTION </heading>
<paragraph id="P-0001" lvl="0"><number>&lsqb;0001&rsqb;</number> 1. Field of the Invention </paragraph>
<paragraph id="P-0002" lvl="0"><number>&lsqb;0002&rsqb;</number> The present invention relates to methods and systems for enhancing display functionality in a television set-top box environment and in particular, to methods and systems for the secure storage and display of digital data content, and the creation and display of dynamic floating navigational graphics. </paragraph>
<paragraph id="P-0003" lvl="0"><number>&lsqb;0003&rsqb;</number> 2. Background Information </paragraph>
<paragraph id="P-0004" lvl="0"><number>&lsqb;0004&rsqb;</number> Set-top boxes, as commonly used with television systems (TVs), are electronic devices that provide a means for decoding and tuning digital (broadcast) signals and formatting them for display on conventional television screens. As used today, set-top boxes often provide support for both digital and analog broadcasts, as digital television has not yet completely replaced analog broadcasting. Digital broadcasting has enabled more sophisticated record and playback mechanisms above and beyond traditional approaches that use videocassette recorders (VCRs) to record TV shows on video tapes for delayed or archived playback. In particular, a television set-top box may be manufactured as a Personal Video Recorder (PVR) (example companies include TIVO and Replay TV), which allows a user to store (record) and later replay (playback) digital broadcast data as it is being transmitted to a television display. PVRs are also referred to by other terms such as digital video recorders or smart TV. </paragraph>
<paragraph id="P-0005" lvl="0"><number>&lsqb;0005&rsqb;</number> The functionality of a PVR differs from that of a VCR in that the PVR stores digital content and the PVR may be able to store more than one stream of digital content at one time (multiple simultaneous broadcasts). In addition, each stream may be separately accessed, and one stream of data may be stored while another separate stream is being received and displayed. PVRs potentially also have greater storage capacity without requiring human intervention (for example, to change tapes) and have the ability to control viewing (pause, rewind, fast-forward etc.) of a live broadcast. </paragraph>
<paragraph id="P-0006" lvl="0"><number>&lsqb;0006&rsqb;</number> Although PVR capability is commonly implemented in set-top box form, PVRs can also be implemented in a computing system that enables the display of digital broadcast content on a TV screen, such as in conjunction with a personal computer. Examples of these PVRs include advanced TV-tuner cards that are placed in such computers (e.g., ATI All-in-Wonder Radeon graphics card) and software-based solutions (e.g., Intervideo&apos;s WinDVR) which work with existing TV-tuner cards to give a PC PVR features. </paragraph>
<paragraph id="P-0007" lvl="0"><number>&lsqb;0007&rsqb;</number> Digital broadcasting and associated electronic devices have also encouraged new payment and marketing models such as pay-per-view and subscription based television viewing. Digital rights management is used in conjunction with such models to limit and define authorized use of content. Digital rights management generally refers to technology and services for automatically managing access rights to content (typically digital) via electronic means. DRM schemes protect content from unauthorized use by associating time limits (such as by duration or frequency) and authorization with particular content. For the new payment and marketing models to operate effectively, the digital rights associated with content need to be determined and followed. </paragraph>
</section>
<section>
<heading lvl="1">BRIEF SUMMARY OF THE INVENTION </heading>
<paragraph id="P-0008" lvl="0"><number>&lsqb;0008&rsqb;</number> Embodiments of the present invention provide computer-based methods and systems for enhancing the storage and display of video data and other digital content in a set-top box or other television environment so that such data is securely stored and displayed. Example embodiments provide an enhanced display controller (EDC) that executes in an electronic device, such as a set-top box or PVR, to provide secure storage and playback of digital content, such as streamed video data. The EDC creates or identifies a secure storage location on a local or networked storage device and stores the data content in that secure location in a secure manner, thereby minimizing unauthorized access. In addition, the EDC supports the secure display of the data content using standard (or proprietary) encryption techniques, and/or obfuscation techniques. </paragraph>
<paragraph id="P-0009" lvl="0"><number>&lsqb;0009&rsqb;</number> In one embodiment, a secure storage location is created from storage known only to the EDC. In one such embodiment, this storage is on a local storage device; in another embodiment this storage is on a remote storage device. In yet another embodiment, the storage is located over a network. </paragraph>
<paragraph id="P-0010" lvl="0"><number>&lsqb;0010&rsqb;</number> In another embodiment, a secure display area that is not obscured by output from other applications is allocated and used by the EDC for the secure playback of digital content. In one embodiment, a flag is inserted in the digital content to indicate secure storage requirements. </paragraph>
<paragraph id="P-0011" lvl="0"><number>&lsqb;0011&rsqb;</number> In one embodiment, the enhanced display controller is a modified set-top box display (device) driver that includes a VBI decoder, mechanisms (e.g., code) for securely storing and retrieving digital content, a display obfuscation/encryption mechanism, and a secure data repository. In some embodiments, the EDC is implemented as software code, in others, the EDC is implemented in hardware or firmware. </paragraph>
<paragraph id="P-0012" lvl="0"><number>&lsqb;0012&rsqb;</number> In one embodiment, the EDC detects digital content that is protected using Digital Rights Management (DRM) and coordinates the secure storage and playback procedures with usage limits specified by associated DRM data. Upon detection that usage limits have been exceeded, the EDC can cause a renewal process to be initiated if one is available. In addition, the EDC can destroy (e.g., erase) the data when appropriate, because the EDC controls its storage and display. In one embodiment, a flag is inserted into the digital content to indicate DRM protection. In another embodiment, the head-end or server encodes the content according to the DRM scheme, and the encoded content is automatically recognized by the EDC. </paragraph>
<paragraph id="P-0013" lvl="0"><number>&lsqb;0013&rsqb;</number> In one embodiment, the EDC implements dynamic, floating graphics on a television display. The EDC detects a request to display a floating graphic, retrieve the indicated or appropriate graphic, and causes a process associated with the graphic to be executed. In one of these embodiments the graphic is used to control storage and/or playback of digital content streams. In another embodiment, a floating graphic is used to implement a navigational tool. In one of these embodiments, a floating graphic is used to control what portion of the content is displayed in an available area on the television display. In another one of these embodiments, a floating graphic is used to control movement and manipulation of data within an alternate display area, such as that provided in U.S. Pat. No. 6,337,717, entitled &ldquo;Alternate Display Content Controller,&rdquo; issued on Jan. 8, 2002; and U.S. patent application Ser. No. 09/960,852, entitled &ldquo;Alternate Display Content Controller,&rdquo; filed on Sep. 21, 2001. </paragraph>
<paragraph id="P-0014" lvl="0"><number>&lsqb;0014&rsqb;</number> In yet another embodiment, the floating graphic is used to inform the user of priority information, such as a late-breaking news flash.</paragraph>
</section>
</summary-of-invention>
<brief-description-of-drawings>
<section>
<heading lvl="1">BRIEF DESCRIPTION OF THE DRAWINGS </heading>
<paragraph id="P-0015" lvl="0"><number>&lsqb;0015&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1</cross-reference> is a block diagram of a typical set-top box environment used as a PVR with techniques of the present invention. </paragraph>
<paragraph id="P-0016" lvl="0"><number>&lsqb;0016&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 2A</cross-reference> is an example block diagram of a set-top box environment that contains an enhanced display controller that uses the enhanced security techniques of the present invention. </paragraph>
<paragraph id="P-0017" lvl="0"><number>&lsqb;0017&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 2B</cross-reference> is an example block diagram of data flow in an example enhanced display controller. </paragraph>
<paragraph id="P-0018" lvl="0"><number>&lsqb;0018&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3</cross-reference> is an example flow diagram of a secure storage routine of an example enhanced display controller. </paragraph>
<paragraph id="P-0019" lvl="0"><number>&lsqb;0019&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 4</cross-reference> is an example block diagram of a video stream containing vertical blanking intervals used for security and DRM flags. </paragraph>
<paragraph id="P-0020" lvl="0"><number>&lsqb;0020&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 5</cross-reference> is an example flow diagram of a secure playback routine of an example enhanced display controller. </paragraph>
<paragraph id="P-0021" lvl="0"><number>&lsqb;0021&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 6</cross-reference> is an example flow diagram of DRM compatibility enhancements to an example secure storage routine of an enhanced display controller. </paragraph>
<paragraph id="P-0022" lvl="0"><number>&lsqb;0022&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 7</cross-reference> is an example flow diagram of DRM compatibility enhancements to an example secure playback routine of an enhanced display controller. </paragraph>
<paragraph id="P-0023" lvl="0"><number>&lsqb;0023&rsqb;</number> FIGS. <highlight><bold>8</bold></highlight>A-<highlight><bold>8</bold></highlight>C illustrate several examples of displayable floating navigational graphics. </paragraph>
<paragraph id="P-0024" lvl="0"><number>&lsqb;0024&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 9</cross-reference> is an example illustration of display windows separated by application constructed boundaries.</paragraph>
</section>
</brief-description-of-drawings>
<detailed-description>
<section>
<heading lvl="1">DETAILED DESCRIPTION OF THE INVENTION </heading>
<paragraph id="P-0025" lvl="7"><number>&lsqb;0025&rsqb;</number> Secure Storage and Display of Digital Video Content </paragraph>
<paragraph id="P-0026" lvl="0"><number>&lsqb;0026&rsqb;</number> Embodiments of the present invention provide computer-based methods and systems for enhancing the storage and display of video data and other digital content in a set-top box or other television environment so that such data is securely stored and displayed. Television set-top boxes are manufactured with hardware and/or software that provide a variety of functionality, including for example, PVR capabilities that allow a user to store and later replay digital data as it is being transmitted to a television display. <cross-reference target="DRAWINGS">FIG. 1</cross-reference> is a block diagram of a typical set-top box environment used as a PVR with techniques of the present invention. Set-top box <highlight><bold>101</bold></highlight> receives input from one or more (heterogeneous or homogeneous) input sources <highlight><bold>110</bold></highlight>, such as analog broadcast data <highlight><bold>110</bold></highlight>A, digital data via (wireless) satellite <highlight><bold>110</bold></highlight>B, or digital data via (wired) cable <highlight><bold>110</bold></highlight>C, and displays such data on television display <highlight><bold>120</bold></highlight>. The data may include a broadcast program <highlight><bold>120</bold></highlight>A and other data, such as dynamic floating graphics (DFG) <highlight><bold>120</bold></highlight>B, as will be discussed further below. </paragraph>
<paragraph id="P-0027" lvl="0"><number>&lsqb;0027&rsqb;</number> Using PVRs, one stream of data may be stored while another separate stream is being received and displayed, providing functionality similar to that of a videocassette recorder (VCR). In addition, multiple digital content streams may be stored at once. Also, the data stream may contain content that is legally managed under a Digital Rights Management (DRM) scheme. Current PVR implementations are not able to manage or display content pursuant to specific DRM presentation terms and conditions, because as the data is being streamed to the display, it can be intercepted by unauthorized programs or devices. In addition, when each content stream is stored, it can be intercepted Thus, there is an increasing need to manage both the secure storage and retrieval of digital data in these environments, especially in accordance with DRM requirements. </paragraph>
<paragraph id="P-0028" lvl="0"><number>&lsqb;0028&rsqb;</number> Example embodiments provide an enhanced display controller (EDC) that executes in an electronic device, such as a set-top box, to provide secure storage and playback of digital content, such as streamed video data. The EDC creates or identifies a secure storage location on a local, remote, or networked storage device and stores the data stream in that secure location in a secure manner, thereby minimizing unauthorized access. In addition, the EDC supports the secure display of the data stream using standard (or proprietary) encryption techniques, and/or obfuscation techniques, such as those described in co-owned U.S. Patent Application No.______ , entitled &ldquo;Method and System for Maintaining Secure Data Input and Output,&rdquo; filed on Jun. 10, 2002. The EDC also optionally supports various requirements for complying with the usage terms and conditions typically associated with DRM data content. Thus, unauthorized access is minimized because the EDC controls all aspects of storing the data securely, including any de-obfuscation or compliance processing, thus minimizing any transfer of data to other processes/code. In one embodiment, the enhanced display controller is a modified set-top box display (device) driver that includes a VBI decoder, mechanisms (e.g., code) for securely storing and retrieving digital content, a display obfuscation/encryption mechanism, and a secure data repository. Although discussed primarily with respect to software, one skilled in the art will recognize that embodiments of the EDC may be equivalently implemented as hardware or software. </paragraph>
<paragraph id="P-0029" lvl="0"><number>&lsqb;0029&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 2A</cross-reference> is an example block diagram of a set-top box environment that contains an enhanced display controller that uses the enhanced security techniques of the present invention. In <cross-reference target="DRAWINGS">FIG. 2</cross-reference>A, the enhanced display controller is shown as a device driver <highlight><bold>230</bold></highlight> executing the memory <highlight><bold>203</bold></highlight> in set-top box <highlight><bold>201</bold></highlight>. The device driver <highlight><bold>230</bold></highlight> interacts with a persistent storage device <highlight><bold>205</bold></highlight> (for example, flash memory) through a storage device hardware interface <highlight><bold>240</bold></highlight>, to store the digital content and to retrieve such content for display. The device driver <highlight><bold>230</bold></highlight> interacts with the television display <highlight><bold>206</bold></highlight> through a display hardware interface <highlight><bold>240</bold></highlight>. The device driver <highlight><bold>230</bold></highlight> uses secure storage locations and secure display areas that are known only to the device driver when storing and displaying the data. </paragraph>
<paragraph id="P-0030" lvl="0"><number>&lsqb;0030&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 2B</cross-reference> is an example block diagram of dataflow in an example enhanced display controller. In typical operation, the device driver <highlight><bold>230</bold></highlight> decodes instructions from the input source (digital) content streams <highlight><bold>235</bold></highlight> coming through input sources <highlight><bold>204</bold></highlight>, such as using VBI decoder <highlight><bold>231</bold></highlight> and DRM service <highlight><bold>233</bold></highlight>, and determines whether (and what kind of) secure storage is needed. The device driver <highlight><bold>230</bold></highlight> then assigns, using the storage allocation and retrieval facility <highlight><bold>232</bold></highlight>, a secure storage area (for example, secure buffer <highlight><bold>214</bold></highlight> in storage repository <highlight><bold>205</bold></highlight>) to the stream and stores the data in the assigned area. When replaying the stream, the device driver <highlight><bold>230</bold></highlight> determines the secure storage that corresponds to the requested data and retrieves the digital content streaming it to the display <highlight><bold>206</bold></highlight>. When obfuscation and/or encryption techniques are employed, the device driver <highlight><bold>230</bold></highlight> uses the display encryption and obfuscation service <highlight><bold>234</bold></highlight> and retrieves and applies as necessary authentication keys that are stored in a secure repository (known only to the driver <highlight><bold>230</bold></highlight>). </paragraph>
<paragraph id="P-0031" lvl="0"><number>&lsqb;0031&rsqb;</number> One skilled in the art will recognize that the techniques of the present invention as described with reference to an example enhanced display controller are also applicable to any piece of hardware, software, or firmware that controls a persistent storage device, and also that the storage device may comprise anything capable of persistent storage. For example, the storage device may comprise a local medium such as a hard disk or flash memory, or a networked storage medium such as a personal computer, server computer, or any such data repository. Also, one skilled in the art will recognize that other steps could be implemented for each routine described below, and in different orders, and in different routines, yet still equivalently achieve the functions of the enhanced display controller. </paragraph>
<paragraph id="P-0032" lvl="0"><number>&lsqb;0032&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3</cross-reference> is an example flow diagram of a secure storage routine of an example enhanced display controller. In step <highlight><bold>301</bold></highlight>, the controller (EDC) determines whether the input source coming in requires or is requesting secure digital storage. One mechanism for requesting secure storage or levels of security is through the use of flags embedded in the digital content stream itself. For example, in current set-top box systems, digital content streams, such as video streams, typically include a vertical blanking interval (VBI) between each frame of data in the stream. The VBI was originally designed to overcome technical limitations in television display hardware that existed at the time. Specifically, the blanking interval was typically used to &ldquo;sync&rdquo; up a program that wasn&apos;t displaying properly on a particular television display. Such limitations have been since overcome with advances in digital TV technology, but the VBI standard has remained. Thus, blank intervals still exist in streamed television content and can by used by the network or head-end of a digital content stream to encode additional data to be recognized by hardware or software at the receiving end of the video stream. Existing examples of such use of data encoded within the VBI include the transmission of closed-captioning data and secondary audio program (SAP) data, such as an alternate &ldquo;soundtrack&rdquo; for a movie in a secondary language. </paragraph>
<paragraph id="P-0033" lvl="0"><number>&lsqb;0033&rsqb;</number> In an example embodiment of the present invention, the VBI is used to set secure storage flags at the network or head-end of the video stream, which can be decoded and recognized by the VBI decoding mechanism of the EDC to recognize a request for secure storage and, optionally, parameters associated with that request. <cross-reference target="DRAWINGS">FIG. 4</cross-reference> is an example block diagram of a video stream containing vertical blanking intervals used for security and DRM flags. Frames <highlight><bold>402</bold></highlight> of the data stream <highlight><bold>401</bold></highlight> are separated by an interval of time (VBls) <highlight><bold>403</bold></highlight>. Each VBI <highlight><bold>403</bold></highlight> may contain one or more flags such as secure storage flag <highlight><bold>404</bold></highlight>. </paragraph>
<paragraph id="P-0034" lvl="0"><number>&lsqb;0034&rsqb;</number> In step <highlight><bold>302</bold></highlight>, when the controller recognizes that the input source has designated secure storage, then in step <highlight><bold>303</bold></highlight> the EDC to determines and assigns a secure space, otherwise continues its normal stream buffering strategy (without secure storage). The secure space may be newly created or may be assigned from an already used pool of spaces, depending upon the storage allocation technique used. In step <highlight><bold>304</bold></highlight>, the EDC associates the storage with the digital content stream for later retrieval. In step <highlight><bold>305</bold></highlight>, if the instructions have indicated that an authentication key is to be used, then an appropriate authentication key is retrieved and associated with the secure storage. Depending on the flag being recognized (or, upon the receipt of specific other instructions that indicate the location of the authentication key), the key may be dynamically created, retrieved from local storage, or retrieved from an appropriate remote server. In step <highlight><bold>306</bold></highlight>, an identifier for the digital content stream is generated or retrieved. Preferably, the name of the content is decoded from the VBI (Line <highlight><bold>21</bold></highlight> Field <highlight><bold>2</bold></highlight> EDS/XDS, or from other VBI lines determined by the head-end and the application on the display device). The identifier, the location of the secure storage space, and the authentication key may be stored external to the secure space that is associated with the content stream, and in a location known only to the display driver. Such external storage further enhances the ability for the data to be maintained securely. In step <highlight><bold>307</bold></highlight>, the EDC writes the digital content stream to the secure storage space using the determined authentication key to encrypt or otherwise obfuscate the video stream, and then returns. </paragraph>
<paragraph id="P-0035" lvl="0"><number>&lsqb;0035&rsqb;</number> As with a typical PVR, the digital content stream can be retrieved for playback at a later time. When an authentication key is used to store the data, the same key is used to retrieve the data from the secure storage space for playback. One skilled in the art will also appreciate that, if other obfuscation techniques are employed, then these techniques are applied in reverse for playback. <cross-reference target="DRAWINGS">FIG. 5</cross-reference> is an example flow diagram of a secure playback routine of an example enhanced display controller. This routine is invoked by an application running on the set-top box, for example, through an application programming interface (API) call implemented by the EDC to play back previously stored content. Typically, in such a scenario, the application has access to the identifier of the stored content or the EDC implements a mechanism for mapping the content identifier to the associated secure storage location. In step <highlight><bold>501</bold></highlight>, the enhanced display controller (EDC) determines whether an authentication key is required to decrypt or de-obfuscate the data, and if so then, continues in step <highlight><bold>502</bold></highlight>, otherwise continues in step <highlight><bold>503</bold></highlight>. (If authentication is not performed when there is no obfuscation or encryption used, then the controller can continue with step <highlight><bold>505</bold></highlight> instead.) When obfuscation or encryption techniques are available for use with playback, the application requesting obfuscated/encrypted playback preferably indicates this desire through, for example, a flag in the controller API that was used to initiate the playback. The obfuscation techniques essentially block an unauthorized program from viewing the data while it is stored prior to or during playback (display) of the data. In step <highlight><bold>502</bold></highlight>, the routine retrieves the key from secure storage. In step <highlight><bold>503</bold></highlight>, an authentication process may be performed. In step <highlight><bold>504</bold></highlight>, if authentication has been granted, the routine continues in step <highlight><bold>505</bold></highlight>, otherwise returns an error. In step <highlight><bold>505</bold></highlight>, the content is read by the enhanced display controller from memory, obfuscated and/or encrypted if indicated, and displayed to the display device. </paragraph>
<paragraph id="P-0036" lvl="0"><number>&lsqb;0036&rsqb;</number> In another example embodiment, an enhanced display controller is provided that alters the creation of display areas on the display device itself, creating a secure display space on the display device that is unknown to the native operating system of the electronic device (e.g., personal computer, set-top box, PVR, etc.) that is controlling the display device. Once the secure display area has been created, the enhanced display controller assigns the playback of the (securely) stored digital content to the created secure display space when secure playback is requested (for example, through a playback API call). Methods and systems for creating a secure display space in this manner are described in U.S. patent application Ser. No. 09/726,202, entitled &ldquo;Method and System for Controlling a complementary user interface on a Display Surface,&rdquo; filed Nov. 28, 2000, and in U.S. Pat. No. 6,337,717, entitled &ldquo;Alternate Display Content Controller,&rdquo; issued on Jan. 8, 2002; and U.S. patent application Ser. No. 09/960,852, entitled &ldquo;Alternate Display Content Controller,&rdquo; filed on Sep. 21, 2001. </paragraph>
<paragraph id="P-0037" lvl="0"><number>&lsqb;0037&rsqb;</number> Additional enhancements are used by techniques of the present invention to support data content that is protected under Digital Rights Management (&ldquo;DRM&rdquo;) schemes. Data protected under DRM typically has limits (frequency or duration limits) associated with it that indicate whether a user is authorized to store or play back the data. <cross-reference target="DRAWINGS">FIG. 6</cross-reference> is an example flow diagram of DRM compatibility enhancements to an example secure storage routine of an enhanced display controller. In step <highlight><bold>601</bold></highlight>, the routine determines whether the input source requires or is requesting secure storage (see <cross-reference target="DRAWINGS">FIG. 3</cross-reference>, step <highlight><bold>301</bold></highlight>) and whether the data is under DRM protection. One mechanism is to encode a DRM flag in an appropriate VBI of the content stream to indicate that the stream contains data that is under DRM protection. The DRM flag can be included in addition to or in place of the secure storage flags described above. The DRM flag may be set in the video stream such that it can be decoded and recognized by a VBI decoding mechanism of the EDC. Alternatively, the network or head-end may encode the entire digital content in a manner that assigns a defined flag in the content stream allowing the EDC to automatically recognize the existence of DRM content being transmitted without using the vertical blanking intervals. If, in step <highlight><bold>602</bold></highlight>, DRM content is identified, then the routine continues in step <highlight><bold>603</bold></highlight>, otherwise continues with the secure storage techniques described with respect to <cross-reference target="DRAWINGS">FIG. 3</cross-reference>. </paragraph>
<paragraph id="P-0038" lvl="0"><number>&lsqb;0038&rsqb;</number> In step <highlight><bold>603</bold></highlight>, limitation information associated with the DRM scheme is decoded from the DRM data transmitted with the content or by some mapping within the EDC. For example, information that specifies time duration or usage count limits may be associated with the DRM data. In step <highlight><bold>604</bold></highlight>, the routine &ldquo;authenticates&rdquo; the requested usage, determining whether the specified limits have been exceeded. In step <highlight><bold>605</bold></highlight>, if the limits have not been exceeded, the routine continues in step <highlight><bold>609</bold></highlight>, else continues in step <highlight><bold>606</bold></highlight>. In step <highlight><bold>606</bold></highlight>, when the limits have been exceeded, the routine determines if a renewal process is available. If a renewal process is available, then in step <highlight><bold>607</bold></highlight> the routine preferably allows the user to renew access to the digital content. Otherwise, if the limits have been exceeded and no renewal is available, then in step <highlight><bold>608</bold></highlight> the EDC preferably disables the ability for the data to be used in the receiving environment. One mechanism is for the EDC to destroy its copies of the content. In step <highlight><bold>609</bold></highlight>, once the usage request is deemed authorized, the routine continues with securely storing the input data stream as described with reference to <cross-reference target="DRAWINGS">FIG. 3</cross-reference>. </paragraph>
<paragraph id="P-0039" lvl="0"><number>&lsqb;0039&rsqb;</number> To implement DRM protected data, the EDC preferably also checks for authorized usage during the playback (and/or display) of securely stored digital content. <cross-reference target="DRAWINGS">FIG. 7</cross-reference> is an example flow diagram of DRM compatibility enhancements to an example secure playback routine of an enhanced display controller. In step <highlight><bold>701</bold></highlight>, the routine retrieves the DRM duration and usage count limits associated with a particular stored stream. In an embodiment in which the network or head-end assigns the appropriate timer or counter values to the digital content stream, the EDC decodes the timer or counter values (step <highlight><bold>602</bold></highlight> in <cross-reference target="DRAWINGS">FIG. 6</cross-reference>) and assigns these values to the stored content in a manner that is readable by the playback mechanism. As noted earlier, the EDC tracks the location of stored content streams in conjunction with data identifying information in order to process requests to play back the stored content. When a playback mechanism requests particular content, the EDC locates the stored stream and retrieves the DRM limit information. </paragraph>
<paragraph id="P-0040" lvl="0"><number>&lsqb;0040&rsqb;</number> In an alternate embodiment, while encoding the content stream, the network or head-end also encodes (in a particular location in the VBI, data stream, or location known to the EDC) a timer or counter &ldquo;key&rdquo; based on a client application request or appropriate number that the head-end can allot. The EDC upon playback decodes this &ldquo;key&rdquo; to retrieve the timer or counter values for the appropriate playback mechanism so that the appropriate playback mechanism, when invoked, can refer to these values during playback. </paragraph>
<paragraph id="P-0041" lvl="0"><number>&lsqb;0041&rsqb;</number> In step <highlight><bold>702</bold></highlight>, the routine determines whether the retrieved limits have been exceeded and, if so, continues in step <highlight><bold>703</bold></highlight>, else continues in step <highlight><bold>705</bold></highlight> with the with secure playback of the data stream as described with reference to <cross-reference target="DRAWINGS">FIG. 5</cross-reference>. In step <highlight><bold>703</bold></highlight>, the routine enforces the DRM limits. </paragraph>
<paragraph id="P-0042" lvl="0"><number>&lsqb;0042&rsqb;</number> There are several mechanisms for enforcing the DRM limits, one of which was described with reference to <cross-reference target="DRAWINGS">FIG. 6</cross-reference>. In one embodiment, the playback application (or other playback mechanism) notifies the EDC driver (or the EDC driver detects) when the content playback time or usage count limit has been reached. Upon receipt of an indication that this limit has been reached, the controller calls a delete function to delete the content from the secure storage location. Alternatively, the playback application (or the EDC playback routine) may request a renewal or extension of time or of usage count limits, providing a renewal procedure has been specified and is available (see, for example, steps <highlight><bold>606</bold></highlight>-<highlight><bold>608</bold></highlight> in <cross-reference target="DRAWINGS">FIG. 6</cross-reference>). This renewal may be accomplished for example, by obtaining input from the user or by contacting the head-end automatically, if an automatic process is defined. To achieve such functionality, as indicated during secure storage (<cross-reference target="DRAWINGS">FIG. 6</cross-reference>), an additional flag may be included with the transmission of the digital content stream from the head-end to indicate the ability to request a renewal or extension of the time or of usage count limits. This indication is received and stored by the EDC, and the EDC indicates to the playback application that a renewal or extension request may be sent to the head-end when the indicated timer or usage count limit is reached. In addition, a user may submit a self-initiated request for renewal or extension to the playback application. The new playback time allotted in response to the request for renewal may be the same as the originally allotted time, or a new value may be sent from the head-end, decoded by the EDC playback or storage routine, and stored in a location accessible to the mechanism for playback. Variations of these techniques may also be applied to the secure storage techniques described with reference to <cross-reference target="DRAWINGS">FIG. 6</cross-reference>, if the EDC does not attempt renewal automatically. </paragraph>
<paragraph id="P-0043" lvl="0"><number>&lsqb;0043&rsqb;</number> In step <highlight><bold>704</bold></highlight>, if the use is authorized (the DRM limits are no longer exceeded), the routine continues in step <highlight><bold>705</bold></highlight> with the playback of the data stream as described with reference to <cross-reference target="DRAWINGS">FIG. 5</cross-reference>. Otherwise, the routine returns an error. </paragraph>
<paragraph id="P-0044" lvl="7"><number>&lsqb;0044&rsqb;</number> Dynamic Floating Graphics </paragraph>
<paragraph id="P-0045" lvl="0"><number>&lsqb;0045&rsqb;</number> As described with respect to <cross-reference target="DRAWINGS">FIG. 1</cross-reference>, the data displayed in the television environment may include a broadcast program <highlight><bold>120</bold></highlight>A and/or other data, such as a dynamic floating graphics (DFG) <highlight><bold>120</bold></highlight>B. Embodiments of the present invention also provide computer-based methods and systems for displaying dynamic, floating graphics using an enhanced display controller. </paragraph>
<paragraph id="P-0046" lvl="0"><number>&lsqb;0046&rsqb;</number> A floating graphic is, for example, any data content that is &ldquo;overlayed&rdquo; to float somewhere relative to an existing object being displayed. FIGS. <highlight><bold>8</bold></highlight>A-<highlight><bold>8</bold></highlight>C illustrate several examples of displayable floating graphics. <cross-reference target="DRAWINGS">FIGS. 8A, 8B</cross-reference>, and <highlight><bold>8</bold></highlight>C illustrate examples of floating graphics used for navigation-floating navigational graphics. Although referred to as a &ldquo;navigational&rdquo; graphic, one skilled in the art will recognize that techniques of the present invention can be used to display any type of floating data, including data that is not necessarily involved or used with the process of navigating. </paragraph>
<paragraph id="P-0047" lvl="0"><number>&lsqb;0047&rsqb;</number> Upon recognition that a displayable floating graphic is being requested, the enhanced display controller retrieves and displays the designated graphic using well-known technique. Any graphical plane may be used to display the floating graphic on a television display, including the cursor graphic plane, the low-resolution graphic plane, unused high-resolution graphic plane, or the alpha channel to the display device. The display of the floating graphic does not interfere with the display of a digital content stream (e.g., a video stream). Instead, the display driver displays the graphic as an overlay on the content stream display. The floating graphic may have one or more functional processes associated with it. Once displayed, the graphic maintains the focus (e.g., cursor focus) until the graphic&apos;s associated process is ended. For example, the graphic may incorporate the functionality of a menu system, cursor, or other means of navigating through the content and applications available through the system. In one embodiment, the graphic is used to navigate content that is displayed in alternate display spaces such as those described with reference to U.S. Pat. No. 6,337,717 and U.S. patent application Ser. No. 09/960,852, which describe creation of such display spaces in a set-top box environment. </paragraph>
<paragraph id="P-0048" lvl="0"><number>&lsqb;0048&rsqb;</number> There are several ways to indicate a request to display a dynamic floating graphic including data triggered, event triggered, or user triggered. In one embodiment, the display driver decodes and recognizes a flag, e.g., encoded in the VBI of the digital content stream, that indicates an instruction to display a floating graphic. In response, the display driver displays the graphic that corresponds to the recognized flag. For example, a network may broadcast a movie or other regular program and embed a flag in the VBI of the movie transmission to indicate (to the display driver) that a particular floating graphic is to be displayed. The graphic may be useful, for example, to indicate that late breaking news is available. The user then has the ability, depending upon the functionality supported by the code (process) associated with the displayed graphic, to, for example, ignore the news feed and continue viewing the movie, start saving the movie and view the news feed, or save the news feed and continue viewing the movie. </paragraph>
<paragraph id="P-0049" lvl="0"><number>&lsqb;0049&rsqb;</number> Floating graphics also may be displayed based on event triggers other than VBI encoded flags. In another embodiment, a floating graphic is displayed when a system pointer (similar to a mouse or cursor in a Windows-based computer environment) is moved over a &ldquo;hot-spot&rdquo; within the display area. &ldquo;Hot-spots&rdquo; are defined areas with pixel outlines or boundaries defined at runtime by an application or defined with consistent hard coded values, which apply to all boundary conditions and settings. <cross-reference target="DRAWINGS">FIG. 9</cross-reference> is an example illustration of display windows separated by application constructed boundaries. When the native cursor crosses or touches a defined pixel outline or boundary (such as boundary <highlight><bold>901</bold></highlight> or <highlight><bold>902</bold></highlight>), an event is triggered, spawning a task that displays a floating graphic at the current position of the native cursor. Such a technique may be used, for example, to initiate the display of data on the display device that was not previously visible, to expand (zoom into) an area displayed within, or other similar functionality. For example, if greater content is available in one or more &ldquo;directions&rdquo; outside of the content currently being displayed in a display area, the floating graphic can be used to &ldquo;scroll&rdquo; the display area in a direction such that different content is displayed. In addition, in display areas (such as the alternate display areas mentioned above) that are not controlled by the operating system with support for cursor control, the floating graphic may be used as a floating navigational graphic to implement a type of &ldquo;cursor&rdquo; control. </paragraph>
<paragraph id="P-0050" lvl="0"><number>&lsqb;0050&rsqb;</number> In another example embodiment, the hotspot (or boundary) is associated with a software &ldquo;callback&rdquo; function, as opposed to a hardware/native cursor function. In this embodiment, when the cursor or other indication of user input crosses over into the hotspot defined are, the callback function that was previously registered (associated) with that hotspot is invoked. In this case, the callback function is used to display an associated or indicated floating (navigational) graphic. For example, each hotspot can be associated with a different callback function, or cause an identifying value to be sent to the callback function, thereby identifying which graphic to display. Such hotspots can be associated with irregular or regular shaped boundaries, as appropriate, using techniques well known in the art. Moreover, this type of hotspot with callback function invocation mechanism can be combined with other types of event triggering to integrate the use of floating graphics into general event handling for the application. </paragraph>
<paragraph id="P-0051" lvl="0"><number>&lsqb;0051&rsqb;</number> In yet another example embodiment, a floating graphic is displayed upon user request through a remote controller device signal. These signals may be of the form of an infrared signal, an RF signal, a signal from a wired control device (e.g., Sony PlayStation game controller), or other signal emitted by an input device that is recognized by the set-top box. The user input signal is interpreted by the set-top box, which determines whether the signal is a standard set-top box control signal (e.g., volume or channel change signals) or whether the signal is a pre-defined user-input signal indicating that a particular floating navigational graphic is to be displayed. For example, pressing 0-0-0-0 on an infrared remote control device may be programmed to be interpreted by the set-top box as a command to display a floating graphic allowing the user to request playback of a previously saved digital content stream as stored via the secure storage mechanisms described above. </paragraph>
<paragraph id="P-0052" lvl="0"><number>&lsqb;0052&rsqb;</number> All of the above U.S. patents, U.S. patent application publications, U.S. patent applications, foreign patents, foreign patent applications and non-patent publications referred to in this specification and/or listed in the Application Data Sheet, including but not limited to, U.S. Provisional Patent Application No. 60/297,843 filed Jun. 12, 2001, U.S. patent application Ser. No. 09/726,202 filed Nov. 28, 2000, U.S. Pat. No. 6,337,717, issued on Jan. 8, 2002; and U.S. patent application Ser. No. 09/960,852, filed on Sep. 21, 2001, and co-owned U.S. Patent Application No. ______, entitled &ldquo;Method and System for Maintaining Secure Data Input and Output, filed Jun. 10, 2002 are incorporated herein by reference, in their entirety. </paragraph>
<paragraph id="P-0053" lvl="0"><number>&lsqb;0053&rsqb;</number> From the foregoing it will be appreciated that, although specific embodiments of the invention have been described herein for purposes of illustration, various modifications may be made without deviating from the spirit and scope of the invention. For example, one skilled in the art will recognize that the methods and systems for secure storage and display of video stream data and other digital content discussed herein are applicable to other types of storage devices and data streams, other than in a set-top box environment. For example, software or hardware on a typical desktop or networked computer system can be enhanced using these techniques to store data stream content to a secure storage area and to securely play back data stream content. One skilled in the art will also recognize that the methods and systems for displaying floating graphics discussed herein are applicable to the display of any other type of pop-up or floating text or graphic within a set-top box environment. One skilled in the art will also recognize that the floating graphics need not be navigational in nature, but may have other associated functionality, such as informational. </paragraph>
</section>
</detailed-description>
</subdoc-description>
<subdoc-claims>
<claim id="CLM-00001">
<claim-text><highlight><bold>1</bold></highlight>. A method in an electronic device associated with a television display comprising: 
<claim-text>upon determining a request to securely store digital content from an input stream associated with the device, 
<claim-text>assigning a secure storage area and associating the area with an identifier of the content stream; and </claim-text>
<claim-text>streaming the content to the assigned storage area in a secure manner; and </claim-text>
</claim-text>
<claim-text>upon determining a request to securely play back previously stored digital content, 
<claim-text>determining the storage area associated with the previously stored digital content; and </claim-text>
<claim-text>securely playing back the previously stored digital content from the determined area. </claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002">
<claim-text><highlight><bold>2</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, further comprising obfuscation of the data while the data is streamed to the assigned storage area. </claim-text>
</claim>
<claim id="CLM-00003">
<claim-text><highlight><bold>3</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00002">claim 2</dependent-claim-reference>, further comprising obfuscation of the digital content while the data is securely played back from the determined area. </claim-text>
</claim>
<claim id="CLM-00004">
<claim-text><highlight><bold>4</bold></highlight>. A method in an electronic device associated with a television display, the television display having a plurality of display regions, each with content controlled by a separate processing task, one or more of the tasks controlling a region without communicating with a display interface provided by middleware, comprising: 
<claim-text>displaying a floating graphic on the television display, in response to an indication of a boundary on an edge of a display region, such that the graphic can be used to navigate through content displayed in a display region.</claim-text>
</claim-text>
</claim>
</subdoc-claims>
<subdoc-drawings id="DRAWINGS">
<heading lvl="0" align="CENTER">Drawings</heading>
<representative-figure>1</representative-figure>
<figure id="figure-D00000">
<image id="EMI-D00000" file="US20030001978A1-20030102-D00000.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00001">
<image id="EMI-D00001" file="US20030001978A1-20030102-D00001.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00002">
<image id="EMI-D00002" file="US20030001978A1-20030102-D00002.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00003">
<image id="EMI-D00003" file="US20030001978A1-20030102-D00003.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00004">
<image id="EMI-D00004" file="US20030001978A1-20030102-D00004.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00005">
<image id="EMI-D00005" file="US20030001978A1-20030102-D00005.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00006">
<image id="EMI-D00006" file="US20030001978A1-20030102-D00006.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00007">
<image id="EMI-D00007" file="US20030001978A1-20030102-D00007.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00008">
<image id="EMI-D00008" file="US20030001978A1-20030102-D00008.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00009">
<image id="EMI-D00009" file="US20030001978A1-20030102-D00009.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00010">
<image id="EMI-D00010" file="US20030001978A1-20030102-D00010.TIF" imf="TIFF" ti="DR"/>
</figure>
</subdoc-drawings>
</patent-application-publication>
