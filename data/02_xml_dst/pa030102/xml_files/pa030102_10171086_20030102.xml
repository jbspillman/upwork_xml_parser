<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE patent-application-publication SYSTEM "pap-v16-2002-01-01.dtd" [
<!ENTITY US20030001594A1-20030102-D00000.TIF SYSTEM "US20030001594A1-20030102-D00000.TIF" NDATA TIF>
<!ENTITY US20030001594A1-20030102-D00001.TIF SYSTEM "US20030001594A1-20030102-D00001.TIF" NDATA TIF>
<!ENTITY US20030001594A1-20030102-D00002.TIF SYSTEM "US20030001594A1-20030102-D00002.TIF" NDATA TIF>
<!ENTITY US20030001594A1-20030102-D00003.TIF SYSTEM "US20030001594A1-20030102-D00003.TIF" NDATA TIF>
]>
<patent-application-publication>
<subdoc-bibliographic-information>
<document-id>
<doc-number>20030001594</doc-number>
<kind-code>A1</kind-code>
<document-date>20030102</document-date>
</document-id>
<publication-filing-type>new</publication-filing-type>
<domestic-filing-data>
<application-number>
<doc-number>10171086</doc-number>
</application-number>
<application-number-series-code>10</application-number-series-code>
<filing-date>20020612</filing-date>
</domestic-filing-data>
<foreign-priority-data>
<priority-application-number>
<doc-number>0107666</doc-number>
</priority-application-number>
<filing-date>20010612</filing-date>
<country-code>FR</country-code>
</foreign-priority-data>
<technical-information>
<classification-ipc>
<classification-ipc-primary>
<ipc>G01R027/08</ipc>
</classification-ipc-primary>
<classification-ipc-edition>07</classification-ipc-edition>
</classification-ipc>
<classification-us>
<classification-us-primary>
<uspc>
<class>324</class>
<subclass>704000</subclass>
</uspc>
</classification-us-primary>
</classification-us>
<title-of-invention>Device for the comparison of two resistors, and integrated resistor compensation system incorporating this device</title-of-invention>
</technical-information>
<inventors>
<first-named-inventor>
<name>
<given-name>Frederic</given-name>
<family-name>Hasbani</family-name>
</name>
<residence>
<residence-non-us>
<city>Crolles</city>
<country-code>FR</country-code>
</residence-non-us>
</residence>
<authority-applicant>INV</authority-applicant>
</first-named-inventor>
</inventors>
<assignee>
<organization-name>STMicroelectronics S.A.</organization-name>
<address>
<city>Montrouge</city>
<country>
<country-code>FR</country-code>
</country>
</address>
<assignee-type>03</assignee-type>
</assignee>
<correspondence-address>
<name-1>ALLEN, DYER, DOPPELT, MILBRATH &amp; GILCHRIST P.A.</name-1>
<name-2></name-2>
<address>
<address-1>1401 CITRUS CENTER 255 SOUTH ORANGE AVENUE</address-1>
<address-2>P.O. BOX 3791</address-2>
<city>ORLANDO</city>
<state>FL</state>
<postalcode>32802-3791</postalcode>
<country>
<country-code>US</country-code>
</country>
</address>
</correspondence-address>
</subdoc-bibliographic-information>
<subdoc-abstract>
<paragraph id="A-0001" lvl="0">A device for the comparison of two resistors is based upon analog information carried by currents. The device includes a measurement circuit for extracting the currents from the two resistors to be compared, and copies the currents to a parallel analog-digital converter that carries out the division of the extracted currents. The device converts the ratio of the extracted currents into a digital code that is the image of the ratio of the two resistors. The ratio is constantly re-updated as a function of environmental parameters of the circuit, such as the operating temperature. Also disclosed is a system for correcting the value of integrated compensated resistors. The system implements a device of this kind that does not use a reference voltage generator. </paragraph>
</subdoc-abstract>
<subdoc-description>
<summary-of-invention>
<section>
<heading lvl="1">FIELD OF THE INVENTION </heading>
<paragraph id="P-0001" lvl="0"><number>&lsqb;0001&rsqb;</number> The present invention relates to a device for comparing the value of two resistors as well as to a system for the compensation of integrated resistors whose operating values may vary as a function of their environmental parameters, such as temperature and manufacturing quality. </paragraph>
</section>
<section>
<heading lvl="1">BACKGROUND OF THE INVENTION </heading>
<paragraph id="P-0002" lvl="0"><number>&lsqb;0002&rsqb;</number> Integrated resistors on silicon are often required in the field of analog integrated circuits. These resistors may be manufactured by different methods using standard CMOS (Complementary Metal Oxide Semiconductor) technology. However, these integrated resistors have the drawback of being imprecise because of manufacturing variations between semiconductor wafers to be etched, and because of variations in the operating temperature of the circuit. These variations significantly affect the resistance value of the resistors. </paragraph>
<paragraph id="P-0003" lvl="0"><number>&lsqb;0003&rsqb;</number> In most cases, these integrated resistors cannot be replaced by resistors external to the integrated circuit encapsulation package because of the additional constraints imposed by these external resistors. </paragraph>
<paragraph id="P-0004" lvl="0"><number>&lsqb;0004&rsqb;</number> To begin with, a first constraint relates to the availability of circuit pins. Planning for a resistor outside the circuit means that one or even two pins of the circuit have to be monopolized for each external resistor. Furthermore, in radio frequency applications, it is not possible to consider implementing resistors external to the package because of the substantial parasitic self-inductive effects that occur at the pins of the package. These radio frequency termination constraints prevent the signal from being output to the external resistor and then from being input again into the package. </paragraph>
<paragraph id="P-0005" lvl="0"><number>&lsqb;0005&rsqb;</number> In general, the resistors must be placed as close as possible to the circuits that use them in order to minimize the capacitive and self-inductive parasitic effects which prove to be large at the silicon-package connections, and at the package-card connections. In addition, external resistors impose cost constraints. </paragraph>
<paragraph id="P-0006" lvl="0"><number>&lsqb;0006&rsqb;</number> One prior art approach for the precise adjustment of the value of an integrated resistor relative to its environmental parameters, especially in order to resolve the above-mentioned problem of dispersion due to manufacturing, includes making a resistor and then destroying part of it in an electrical testing environment by sandblasting or by laser, for example, so as to remove resistive material until the desired resistance value of the resistor is obtained. </paragraph>
<paragraph id="P-0007" lvl="0"><number>&lsqb;0007&rsqb;</number> However, this method of adjusting the value of the integrated resistor, although very precise, is both slow and costly. It is therefore not advantageous in a mass production environment. Furthermore, this approach only partially resolves the problem of achieving perfect control over the value of the integrated resistors used in a given circuit. Indeed, it in no way overcomes the problem of dispersion under temperature that occurs during operation of the circuit. This is another major cause of the variations in the value of the integrated resistors. This approach is therefore not entirely satisfactory in the context of the invention which seeks to obtain very high precision in the use of the integrated circuits. </paragraph>
</section>
<section>
<heading lvl="1">SUMMARY OF THE INVENTION </heading>
<paragraph id="P-0008" lvl="0"><number>&lsqb;0008&rsqb;</number> In view of the foregoing background, an object of the present invention is to enable the precise adjustment of the value of an integrated resistor while mitigating the drawbacks of the prior art by overcoming variations in the manufacturing quality and variations in the temperature during operation of the circuit. </paragraph>
<paragraph id="P-0009" lvl="0"><number>&lsqb;0009&rsqb;</number> This and other objects, advantages and features according to the present invention are provided by the integration of several compensated resistors. Each compensated resistor comprises a nominal part and several parallel-connected correction resistors (known as compensation resistors). Their use, totally or partially, is as a function of the quality of manufacture of this type of resistor and of the operating temperature of the circuit into which they are integrated. The value of these compensated resistors are adjusted in comparison with a reference resistor external to the circuit. </paragraph>
<paragraph id="P-0010" lvl="0"><number>&lsqb;0010&rsqb;</number> The choice of the number of compensation resistors to be implemented to attain the desired value is thus constantly re-updated advantageously during the operation of the circuit by a cell integrated into the circuit. This cell is known as a compensation cell and it operates as a resistor comparison device. </paragraph>
<paragraph id="P-0011" lvl="0"><number>&lsqb;0011&rsqb;</number> The role of this comparison device is to give a digital code to all the compensated integrated resistors. This digital code is the image or reflection of a measurement of comparison between a measurement resistor integrated into the circuit and a reference resistor external to the circuit. </paragraph>
<paragraph id="P-0012" lvl="0"><number>&lsqb;0012&rsqb;</number> The invention therefore relates to a device for the comparison of two resistors, wherein no voltage reference is implemented and wherein the device uses only analog information carried by currents until they are digitized. The device comprises a measurement circuit that extracts the currents from the two resistors to be compared and copies them to a parallel analog-digital converter. The analog-digital converter performs the division of the extracted currents and converts the ratio of the extracted currents into a digital code. The digital code is the image of the ratio of the two resistors and is constantly re-updated as a function of environmental parameters of the circuit, such as the operating temperature. </paragraph>
<paragraph id="P-0013" lvl="0"><number>&lsqb;0013&rsqb;</number> The invention also relates to a system for the active correction of the value of compensated resistors integrated into a package based upon an external reference resistor. The values of the compensated resistors may be deliberately different, and moreover, subject to variations caused by the operating temperature and by the quality of manufacture of resistors of this type. Each compensated resistor comprises a nominal resistor and a plurality of parallel-connected correction resistors. </paragraph>
<paragraph id="P-0014" lvl="0"><number>&lsqb;0014&rsqb;</number> The system implements the comparison device according to the present invention for making a comparison between the value of the reference resistor and the value of a measurement resistor internal to the package. The measurement resistor is designed identically to the nominal part of each of the compensated resistors. The correction resistors are put individually into operation or into the off state as a function of the compensation digital code given by the comparison device so as to obtain the value of the desired compensated resistor.</paragraph>
</section>
</summary-of-invention>
<brief-description-of-drawings>
<section>
<heading lvl="1">BRIEF DESCRIPTION OF THE DRAWINGS </heading>
<paragraph id="P-0015" lvl="0"><number>&lsqb;0015&rsqb;</number> Other features and advantages of the present invention shall appear more clearly from the following description of an exemplary embodiment made with reference to the appended figures and given by way of a non-restrictive example. Of these figures: </paragraph>
<paragraph id="P-0016" lvl="0"><number>&lsqb;0016&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1</cross-reference> is a diagram of an integrated resistor compensation system according to the present invention; </paragraph>
<paragraph id="P-0017" lvl="0"><number>&lsqb;0017&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 2</cross-reference> is a schematic diagram illustrating all the connections and components forming the compensation cell illustrated in <cross-reference target="DRAWINGS">FIG. 1</cross-reference>; </paragraph>
<paragraph id="P-0018" lvl="0"><number>&lsqb;0018&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3</cross-reference> is a schematic diagram of the two arms of the measurement circuit implemented in the compensation cell according to the present invention; and </paragraph>
<paragraph id="P-0019" lvl="0"><number>&lsqb;0019&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 4</cross-reference> is a block diagram of the compensation cell according to the present invention.</paragraph>
</section>
</brief-description-of-drawings>
<detailed-description>
<section>
<heading lvl="1">DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENTS </heading>
<paragraph id="P-0020" lvl="0"><number>&lsqb;0020&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1</cross-reference> shows a package <highlight><bold>1</bold></highlight> into which a compensation cell <highlight><bold>2</bold></highlight> is integrated. A resistor known as a reference resistor <highlight><bold>3</bold></highlight> is external to the package <highlight><bold>1</bold></highlight> and is connected to the two input terminals of the compensation cell <highlight><bold>2</bold></highlight>. A resistor known as a measurement resistor <highlight><bold>4</bold></highlight> is integrated into the package and is connected to two additional input terminals of the compensation cell <highlight><bold>2</bold></highlight>. The compensation cell <highlight><bold>2</bold></highlight> acts as a device for comparing the two resistors. </paragraph>
<paragraph id="P-0021" lvl="0"><number>&lsqb;0021&rsqb;</number> The compensation cell <highlight><bold>2</bold></highlight> is connected by its single output terminal, which is formed by a bus of several bits, to a set of compensated resistors integrated into the package <highlight><bold>1</bold></highlight>. By way of an example, these resistors are shown in <cross-reference target="DRAWINGS">FIG. 1</cross-reference> as being three in number, respectively resistors <highlight><bold>5</bold></highlight><highlight><italic>a, </italic></highlight><highlight><bold>5</bold></highlight><highlight><italic>b </italic></highlight>and <highlight><bold>5</bold></highlight><highlight><italic>c. </italic></highlight></paragraph>
<paragraph id="P-0022" lvl="0"><number>&lsqb;0022&rsqb;</number> The compensation cell <highlight><bold>2</bold></highlight> carries out a comparison measurement between the value of the measurement resistor <highlight><bold>4</bold></highlight> internal to the package and that of the reference resistor <highlight><bold>3</bold></highlight> external to the package. The ratio of the values measured by the compensation cell <highlight><bold>2</bold></highlight> is then digitized and sent in binary code form to the different compensated resistors <highlight><bold>5</bold></highlight><highlight><italic>a, </italic></highlight><highlight><bold>5</bold></highlight><highlight><italic>b, </italic></highlight><highlight><bold>5</bold></highlight><highlight><italic>c </italic></highlight>integrated into the circuit. </paragraph>
<paragraph id="P-0023" lvl="0"><number>&lsqb;0023&rsqb;</number> The compensation cell <highlight><bold>2</bold></highlight> is sensitive only to the variations in resistance values, regardless of the cause. The comparison device <highlight><bold>2</bold></highlight> uses only analog information carried by the currents, as shall be seen further below with reference to the following figures. Thus, there is no need to provide for voltage references to make the comparison between the two resistors. </paragraph>
<paragraph id="P-0024" lvl="0"><number>&lsqb;0024&rsqb;</number> Each integrated compensated resistor <highlight><bold>5</bold></highlight><highlight><italic>a, </italic></highlight><highlight><bold>5</bold></highlight><highlight><italic>b, </italic></highlight><highlight><bold>5</bold></highlight><highlight><italic>c </italic></highlight>is formed by a nominal resistor and several parallel resistors that are individually put into operation or into an off state as a function of the compensation code given by the comparison cell <highlight><bold>2</bold></highlight>. These different switchable resistors therefore act as corrective terms of the nominal resistance of each of the compensated resistors. </paragraph>
<paragraph id="P-0025" lvl="0"><number>&lsqb;0025&rsqb;</number> Each of the correction resistors is in fact designed to be switched at a known and predetermined level of temperature and for a known and predetermined quality of manufacture. Thus, in simulation, for a given ratio between the internal resistor known as a measurement resistor, and the external resistor known as a reference resistor, a compensation code is generated which then makes it possible to put at least one correction resistor into operation to obtain the total value of the desired compensated resistor. </paragraph>
<paragraph id="P-0026" lvl="0"><number>&lsqb;0026&rsqb;</number> Each compensated resistor has as many parallel-connected resistors as there are bits forming the compensation code. In the example of <cross-reference target="DRAWINGS">FIG. 2</cross-reference> developed further below in the description, the compensation code has seven bits. A compensated resistor according to this example therefore includes a nominal resistor and seven parallel-connected resistors. Nevertheless, depending on the desired precision, the compensation code may comprise a smaller or greater number of bits. </paragraph>
<paragraph id="P-0027" lvl="0"><number>&lsqb;0027&rsqb;</number> Advantageously, the nominal resistor is oversized with respect to the expected value of the resistor so that, in the worst case, this nominal resistor has a value of resistivity equal to what is expected. In all the other cases, all or part of the parallel resistors are made conductive to lower the value of the total resistance to the expected value. </paragraph>
<paragraph id="P-0028" lvl="0"><number>&lsqb;0028&rsqb;</number> The measurement resistor <highlight><bold>4</bold></highlight> must have the same value as the reference resistor <highlight><bold>3</bold></highlight>. According to another major characteristic of the invention, the measurement resistor <highlight><bold>4</bold></highlight> must also be designed identically to the nominal part of each of the compensated resistors <highlight><bold>5</bold></highlight><highlight><italic>a, </italic></highlight><highlight><bold>5</bold></highlight><highlight><italic>b </italic></highlight>and <highlight><bold>5</bold></highlight><highlight><italic>c. </italic></highlight>Thus, a variation in the value of resistance on the nominal part of an integrated resistor of the circuit will recur in the same way at the measurement resistor. In other words, the measurement resistor is the image of the resistors of the circuit. </paragraph>
<paragraph id="P-0029" lvl="0"><number>&lsqb;0029&rsqb;</number> However, in one particular embodiment, a ratio between the nominal part of compensated resistor and the measurement resistor may be applied. The measurement resistor is then designed in a form where the ratio between it and the nominal part of the compensation resistor is equal to an integer number n, with n&gt;1. There is then the same ratio between the nominal part of the compensated resistor and the reference resistor. </paragraph>
<paragraph id="P-0030" lvl="0"><number>&lsqb;0030&rsqb;</number> Thus, the variations in resistance of the nominal part, relative to this nominal value, will be the same as the variations in the value of the measurement resistor relative to the reference resistor. Rational and differing ratios may therefore be applied between the measurement resistor and the nominal part of each compensated resistor. </paragraph>
<paragraph id="P-0031" lvl="0"><number>&lsqb;0031&rsqb;</number> Introducing a ratio between the nominal part of the compensated resistor and the measurement resistor gives compensated resistors of relatively low resistance, for example, 50 ohms or 100 ohms, while limiting the consumption of current that will flow through the reference and measurement resistors. </paragraph>
<paragraph id="P-0032" lvl="0"><number>&lsqb;0032&rsqb;</number> It is furthermore necessary that, in each compensated resistor <highlight><bold>5</bold></highlight><highlight><italic>a, </italic></highlight><highlight><bold>5</bold></highlight><highlight><italic>b </italic></highlight>and <highlight><bold>5</bold></highlight><highlight><italic>c, </italic></highlight>the correction resistors added to or deducted from the nominal part are adapted to the value of the nominal part. In each compensated resistor, the ratio between a given corrective term associated with a given bit of the compensation code and the nominal resistor should therefore be the same from one compensated resistor to another. This should be the case for each corrective term. The overall value of a compensated resistor may vary from one to another but the ratios between the corrective terms and then nominal resistance should be constant. </paragraph>
<paragraph id="P-0033" lvl="0"><number>&lsqb;0033&rsqb;</number> Thus, the same compensation code may be used with the same relative precision for several compensated resistor values. Furthermore, the system according to the invention compensates for the variations in the value of the nominal resistor using non-ideal resistors. It is therefore relatively necessary to keep a high ratio between the values of the correction resistors and the value of the nominal resistor. In this case, the value of the nominal resistor must be far below those of the correction resistors. </paragraph>
<paragraph id="P-0034" lvl="0"><number>&lsqb;0034&rsqb;</number> An example to illustrate the above-described recommendations relating to the constraints of the ratio between the measurement resistor, the reference resistor and the compensated resistors will now be described. Two integrated resistors R<highlight><bold>1</bold></highlight> and R<highlight><bold>2</bold></highlight> are to be used in this example. Their nominal value is respectively Rn<highlight><bold>1</bold></highlight> and Rn<highlight><bold>2</bold></highlight>, with Rn<highlight><bold>2</bold></highlight>&equals;k*Rn<highlight><bold>1</bold></highlight>. Their real values are R<highlight><bold>1</bold></highlight> and R<highlight><bold>2</bold></highlight>. </paragraph>
<paragraph id="P-0035" lvl="0"><number>&lsqb;0035&rsqb;</number> For reasons of power consumption, the value of the measurement resistor and of the reference resistor must be far higher than the nominal values Rn<highlight><bold>1</bold></highlight> or Rn<highlight><bold>2</bold></highlight>. The following value is then chosen: </paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>Rmeasurement&equals;Rreference&equals;K*Rn</italic></highlight><highlight><bold>1</bold></highlight>.</in-line-formula></paragraph>
<paragraph id="P-0036" lvl="0"><number>&lsqb;0036&rsqb;</number> In this case, the compensation code delivered by the compensation cell <highlight><bold>2</bold></highlight> is always the image of the ratio of the value of the measurement resistor to the value of the reference resistor and is equal to: </paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>Rmeasurement/Rreference&equals;</italic></highlight>1 </in-line-formula></paragraph>
<paragraph id="P-0037" lvl="0"><number>&lsqb;0037&rsqb;</number> A variation of resistance &Dgr;r in the nominal value Rn<highlight><bold>1</bold></highlight> has repercussions in the form of k*&Dgr;r on the value Rn<highlight><bold>2</bold></highlight> and K*&Dgr;r on the value Rmeasurement of the measurement resistor. Thus, the compensation code is equal to 1&plus;(K*&Dgr;r/Rmeasurement), or else equal to 1&plus;(k*&Dgr;r/Rn<highlight><bold>2</bold></highlight>), or else again equal to 1&plus;(&Dgr;r/Rn<highlight><bold>1</bold></highlight>). </paragraph>
<paragraph id="P-0038" lvl="0"><number>&lsqb;0038&rsqb;</number> This value of the compensation code may lead, for example, to the determination of a corrective term (among n available terms) from each of the compensated resistors. This means that, to keep the first value of the compensated resistor R<highlight><bold>1</bold></highlight> equal to its nominal value Rn<highlight><bold>1</bold></highlight>, it is necessary to deduct the corrective term Rc<highlight><bold>11</bold></highlight>, so that: </paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>R</italic></highlight><highlight><bold>1</bold></highlight>&minus;<highlight><italic>Rc</italic></highlight><highlight><bold>11</bold></highlight>&equals;<highlight><italic>Rn</italic></highlight><highlight><bold>1</bold></highlight>, namely Rc<highlight><bold>11</bold></highlight>&equals;&Dgr;r </in-line-formula></paragraph>
<paragraph id="P-0039" lvl="0"><number>&lsqb;0039&rsqb;</number> Since the compensation code is distributed identically to all the resistors, a same-order corrective term is also removed from R<highlight><bold>2</bold></highlight>. Thus, we have to apply this corrective term Rc<highlight><bold>21</bold></highlight>, so that: </paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>R</italic></highlight><highlight><bold>2</bold></highlight>&minus;<highlight><italic>Rc</italic></highlight><highlight><bold>21</bold></highlight>&equals;<highlight><italic>Rn</italic></highlight><highlight><bold>2</bold></highlight>, which amounts to writing: </in-line-formula></paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>Rc</italic></highlight><highlight><bold>21</bold></highlight>&equals;<highlight><italic>k*&Dgr;r </italic></highlight></in-line-formula></paragraph>
<paragraph id="P-0040" lvl="0"><number>&lsqb;0040&rsqb;</number> We thus find the same ratio k between the same-order corrective terms of the compensated resistors: </paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>Rc</italic></highlight><highlight><bold>21</bold></highlight>&equals;<highlight><italic>k*Rc</italic></highlight><highlight><bold>11</bold></highlight> </in-line-formula></paragraph>
<paragraph id="P-0041" lvl="0"><number>&lsqb;0041&rsqb;</number> The same principle can be applied to all the corrective terms so that: </paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>Rc</italic></highlight><highlight><bold>22</bold></highlight>&equals;<highlight><italic>k*Rc</italic></highlight><highlight><bold>12</bold></highlight> </in-line-formula></paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>Rc</italic></highlight><highlight><bold>23</bold></highlight>&equals;<highlight><italic>k*Rc</italic></highlight><highlight><bold>13</bold></highlight>, and to generalize: </in-line-formula></paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>Rc</italic></highlight><highlight><bold>2</bold></highlight><highlight><italic>i&equals;k*Rc</italic></highlight><highlight><bold>1</bold></highlight><highlight><italic>i </italic></highlight></in-line-formula></paragraph>
<paragraph id="P-0042" lvl="0"><number>&lsqb;0042&rsqb;</number> By way of a conclusion of this example, it is clear that the same compensation code can be used for different values of compensated resistors, provided that an equal ratio is kept between the nominal parts of each integrated resistor and between the same-order corrective terms. </paragraph>
<paragraph id="P-0043" lvl="0"><number>&lsqb;0043&rsqb;</number> The circuitry used by the compensation cell <highlight><bold>2</bold></highlight> therefore has the role of fabricating the compensation code, conveying it and using it without disturbing the ratios of magnitude. <cross-reference target="DRAWINGS">FIG. 2</cross-reference> illustrates the circuitry implemented in the compensation cell <highlight><bold>2</bold></highlight> of <cross-reference target="DRAWINGS">FIG. 1</cross-reference> acting as a comparison device between two resistors. </paragraph>
<paragraph id="P-0044" lvl="0"><number>&lsqb;0044&rsqb;</number> The compensation cell <highlight><bold>2</bold></highlight> according to the invention is designed to generate a seven-bit code in the example shown herein. The number of bits implemented in the compensation code depends on the desired precision. The code generated by the cell reflects the ratio of the values of the resistors Rmeasurement and Rreference. The reference resistor is a resistor external to the package, while the measurement resistor is an internal resistor that is a close reflection of the integrated resistors to be compensated for. The digital compensation code is constantly re-updated, i.e., it progresses in time, for example, because of a change in temperature. </paragraph>
<paragraph id="P-0045" lvl="0"><number>&lsqb;0045&rsqb;</number> The part to the left of the dashed line in the circuit of <cross-reference target="DRAWINGS">FIG. 2</cross-reference>, hereinafter called a measurement circuit MES, makes a purely analog comparison between the measurement resistor referenced Rint and the reference resistor referenced Rext. The two resistors Rint and Rext are powered by the power supply Vdd. </paragraph>
<paragraph id="P-0046" lvl="0"><number>&lsqb;0046&rsqb;</number> As we have already seen above, the comparison device uses only analog information carried by currents. The comparison between the two resistors Rint and Rext is therefore expressed in the form of a ratio of currents that is the image of the ratio of the resistors Rext and Rint. </paragraph>
<paragraph id="P-0047" lvl="0"><number>&lsqb;0047&rsqb;</number> The left-hand part of the drawing, labeled MES, is used to tap a current Iint from the resistor Rint by the diode-mounted N-type MOS transistor M<highlight><bold>1</bold></highlight>, and a current Iext from the resistor Rext by the diode-mounted N-type MOS transistor M<highlight><bold>0</bold></highlight>. The diode-mounted transistors M<highlight><bold>0</bold></highlight> and M<highlight><bold>1</bold></highlight> respectively enable the extraction of these two currents from the resistors Rext and Rint. These transistors also make it possible to copy these two currents to the right-hand part of the compensation cell. For this purpose, the transistors M<highlight><bold>0</bold></highlight> and M<highlight><bold>1</bold></highlight> have the same dimensions, and are also designed side by side and with the same orientation. </paragraph>
<paragraph id="P-0048" lvl="0"><number>&lsqb;0048&rsqb;</number> The temperature variation especially modifies the characteristics of the diodes M<highlight><bold>0</bold></highlight> and M<highlight><bold>1</bold></highlight> enabling the recovery of the currents Iint and Iext, and therefore the values of the currents recovered Iint and Iext also vary with the temperature. It is therefore important that the diodes M<highlight><bold>0</bold></highlight> and M<highlight><bold>1</bold></highlight> should each have the same characteristic so as to copy the currents with a same ratio. </paragraph>
<paragraph id="P-0049" lvl="0"><number>&lsqb;0049&rsqb;</number> Similarly, passive parasitic elements (not shown), for example, electrostatic discharge (ESD) protection resistors may also be planned in a series connection with the resistors Rint and Rext, provided that they are identical. </paragraph>
<paragraph id="P-0050" lvl="0"><number>&lsqb;0050&rsqb;</number> As for the part of the circuit located to the right of the dashed line, hereinafter called a parallel ADC converter, its role is to convert the current ratio Iint/Iext into a seven-bit digital code which is the image of the ratio between the values of the resistors Rext and Rint, corresponding to a known level of temperature and of manufacturing quality that has been predetermined in simulation for a ratio such as this between the values of Rext and Rint. </paragraph>
<paragraph id="P-0051" lvl="0"><number>&lsqb;0051&rsqb;</number> The parallel analog-digital converter ADC comprises a first group of P-channel MOS transistors, respectively M<highlight><bold>10</bold></highlight> to M<highlight><bold>16</bold></highlight>, parallel-connected between a power supply terminal Vdd and the output terminals, respectively B<highlight><bold>0</bold></highlight> to B<highlight><bold>6</bold></highlight>, and a second group of N-channel MOS transistors M<highlight><bold>20</bold></highlight> to M<highlight><bold>26</bold></highlight> parallel-connected between ground and the output terminals, respectively B<highlight><bold>0</bold></highlight> to B<highlight><bold>6</bold></highlight>. Iext is directed towards the N-type transistors M<highlight><bold>20</bold></highlight> to M<highlight><bold>26</bold></highlight> by the N-type transistor M<highlight><bold>0</bold></highlight>, while Iint is directed towards the P-type transistors by the N-type transistor M<highlight><bold>1</bold></highlight> and by the P-type transistors M<highlight><bold>2</bold></highlight> and M<highlight><bold>3</bold></highlight>. </paragraph>
<paragraph id="P-0052" lvl="0"><number>&lsqb;0052&rsqb;</number> The transistors M<highlight><bold>10</bold></highlight> and M<highlight><bold>20</bold></highlight> are respectively associated with the node B<highlight><bold>0</bold></highlight>, the transistors M<highlight><bold>11</bold></highlight> and M<highlight><bold>21</bold></highlight> are respectively associated with the node B<highlight><bold>1</bold></highlight>, etc. The transistor M<highlight><bold>10</bold></highlight> tries to copy the current Iint downwards while the transistor M<highlight><bold>20</bold></highlight> tries to copy the current Iext upwards. </paragraph>
<paragraph id="P-0053" lvl="0"><number>&lsqb;0053&rsqb;</number> As soon as the transistor M<highlight><bold>10</bold></highlight> tries to copy a current stronger than what the transistor M<highlight><bold>20</bold></highlight> associated with it is trying to copy, the node B<highlight><bold>0</bold></highlight> switches from 0 to 1. The ratio between the strengths of the currents are therefore converted into voltage levels at the node. This operation is then repeated for each of the following nodes B<highlight><bold>1</bold></highlight> to B<highlight><bold>6</bold></highlight>. </paragraph>
<paragraph id="P-0054" lvl="0"><number>&lsqb;0054&rsqb;</number> The digital code produced is therefore a thermometer type code, namely 0000000, then 0000001,then 0000011, then 0000111 . . . up to 1111111. The function that links this digital code to the ratio of the value of the currents Iint/Iext is defined by the dimensions of the P-type copies M<highlight><bold>10</bold></highlight> to M<highlight><bold>16</bold></highlight>. </paragraph>
<paragraph id="P-0055" lvl="0"><number>&lsqb;0055&rsqb;</number> Thus, for a given current ratio, which is the image of the ratio between the respective value of the resistors Rext and Rint, it is decided, for example, to produce a digital code equal to 5. The setting of the P-type transistor corresponding to the bit <highlight><bold>5</bold></highlight>, namely M<highlight><bold>15</bold></highlight>, is then looked at and this setting is increased or reduced so as to modify its copying ratio with the P-type transistor M<highlight><bold>3</bold></highlight> which gives the current Iint to the P-type copies M<highlight><bold>10</bold></highlight> to M<highlight><bold>16</bold></highlight>. In this way, for each bit, by bringing into play the relation between (a) the dimensions of the P-type transistors M<highlight><bold>10</bold></highlight> to M<highlight><bold>16</bold></highlight> active in the copy of the upper part of the circuit as seen in the drawing, and (b) the dimension of the transistor M<highlight><bold>3</bold></highlight>, the function that relates the digital code to the ratio of the values of the resistors Rext and Rint is precisely determined. </paragraph>
<paragraph id="P-0056" lvl="0"><number>&lsqb;0056&rsqb;</number> The value of the ADC therefore is based upon its capacity for current division and digitization in the same operation. It will be seen below that another function is necessary. The left-hand part of the MES circuit, which has the task of giving the converter a current ratio that is the image of the ratio of the values of the resistors Rext/Rint, operates as follows with reference to <cross-reference target="DRAWINGS">FIG. 3</cross-reference>. </paragraph>
<paragraph id="P-0057" lvl="0"><number>&lsqb;0057&rsqb;</number> There is a constant-value resistor Rext available that must be compared with the resistor Rint. The values of the voltages to which the resistors are subjected are not controlled, and especially the voltage Uint is subjected to variation. In other words, no voltage reference is implemented. However, the structure to the right of the circuit overcomes the imprecision introduced by the voltage difference. Thus, it is known that an error is committed in making a comparison with non-identical voltages, but this error is corrected subsequently in the analog-digital conversion circuit. </paragraph>
<paragraph id="P-0058" lvl="0"><number>&lsqb;0058&rsqb;</number> In the two arms shown in <cross-reference target="DRAWINGS">FIG. 3</cross-reference>, only the value of the resistor Rext is a constant and known magnitude. We have: </paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>Iint/Iext</italic></highlight>&equals;(<highlight><italic>Rext/Rint</italic></highlight>)*(<highlight><italic>Uint/Uext</italic></highlight>), or again: </in-line-formula></paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>Iint/Iext</italic></highlight>&equals;(<highlight><italic>Rext/Rint</italic></highlight>)*(1&plus;/&minus;&Dgr;<highlight><italic>U/U</italic></highlight>) &emsp;&emsp;(1) </in-line-formula></paragraph>
<paragraph id="P-0059" lvl="7"><number>&lsqb;0059&rsqb;</number> In the ideal case, with a voltage reference and where Uint is equal to Uext, the ratio of the currents is directly equal to the ratio of the resistors. The information given by the left-hand part of the circuit is then exact. </paragraph>
<paragraph id="P-0060" lvl="0"><number>&lsqb;0060&rsqb;</number> However, in the present case, where the values of the voltages Uint and Uext are not controlled, the coefficient Uint/Uext is not constant. This has the consequence of introducing an error into the function linking the ratio of the resistors to the ratio of the currents. </paragraph>
<paragraph id="P-0061" lvl="0"><number>&lsqb;0061&rsqb;</number> The current Iint is taken in order to be copied by the diode-mounted transistor M<highlight><bold>1</bold></highlight>. A variation in the value of the internal resistor Rint (due to the quality of manufacture of the integrated resistor or due to the temperature) therefore gives rise to a variation in the current Int. This prompts a variation in the voltage Vd<highlight><bold>1</bold></highlight> of the diode crossed by this current. A variation in the diode voltage Vd<highlight><bold>1</bold></highlight> is now expressed by the opposite variation in the voltage Uint. Any variation in the ratio of Uint to Uext is therefore due to a variation in the ratio Iint/Iext. The expression (1) can therefore be written as follows: </paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>Iint/Iext&equals;Rext/Rint*f</italic></highlight>(<highlight><italic>Iint/Iext</italic></highlight>) &emsp;&emsp;(2) </in-line-formula></paragraph>
<paragraph id="P-0062" lvl="0"><number>&lsqb;0062&rsqb;</number> The function f(Iint/Iext) depends solely on the ratio Iint/Iext, regardless of the cause of the variation in the ratio Iint/Iext. That is, the function is due either to the quality of manufacture of the integrated resistor or to the variation in temperature of the circuit in operation. Thus, it matters little whether the error is due to the quality of manufacture or to the temperature. The same correction system will be applied once information is available on the ratio of the currents Iint/Iext. </paragraph>
<paragraph id="P-0063" lvl="0"><number>&lsqb;0063&rsqb;</number> Nonetheless, simulation results of the variation of the ratio Iint/Iext with respect to the variation of the ratio Rext/Rint show a slight deviation of the curve plotted at a variable temperature (not shown). This slight deviation is eliminated by increasing the dimensions of the transistors M<highlight><bold>0</bold></highlight> and M<highlight><bold>1</bold></highlight>, so as to make them work far from the flexion point or bend of the diode characteristic. </paragraph>
<paragraph id="P-0064" lvl="0"><number>&lsqb;0064&rsqb;</number> The error in the function linking the ratio of the resistors to the ratio of the currents is therefore itself a function that depends on the ratio of currents, as can be seen in the expression (2). The ratio of currents Iint/Iext is precisely the information extracted from the measurement circuit located to the left of the dashed line of the compensation cell. </paragraph>
<paragraph id="P-0065" lvl="0"><number>&lsqb;0065&rsqb;</number> This information will be used to subsequently generate an error correction coefficient by which the error can be cancelled. The idea therefore is to generate, further down in the circuitry of the compensation cell, the inverse function of the function f(Iint/Iext) enabling the cancellation of the error on the measurement of the ratio Iint/Iext which must be the most exact image of the ratio of the values of the resistors Rext/Rint. </paragraph>
<paragraph id="P-0066" lvl="0"><number>&lsqb;0066&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 4</cross-reference> shows a block diagram of the compensation cell illustrating the main functions that it implements. Thus, at a first stage, the measurement circuit in the compensation cell fulfils a function <highlight><bold>6</bold></highlight> of tapping the currents Iint and Iext that flow respectively through the resistors Rint and Rext. </paragraph>
<paragraph id="P-0067" lvl="0"><number>&lsqb;0067&rsqb;</number> The parallel converter of the compensation cell is provided with a division function <highlight><bold>7</bold></highlight> which is then used to divide the incoming currents and gives the ratio Iint/Iext, which is the image of the ratio of the value of the resistors Rext/Rint, with the addition of an error (Iint/Iext) also depending on the ratio of the currents Iint/Iext, as explained above. </paragraph>
<paragraph id="P-0068" lvl="0"><number>&lsqb;0068&rsqb;</number> Then, the means with which the parallel converter is provided implement an error correction function <highlight><bold>8</bold></highlight> whose aim is to give a coefficient Q such that: </paragraph>
<paragraph lvl="0"><in-line-formula><highlight><italic>Q&equals;f</italic></highlight><highlight><superscript>&minus;1</superscript></highlight>(<highlight><italic>Iint/Iext</italic></highlight>) </in-line-formula></paragraph>
<paragraph id="P-0069" lvl="0"><number>&lsqb;0069&rsqb;</number> Thus, a new ratio of currents (Iint/Iext)<highlight><subscript>2 </subscript></highlight>is obtained, and this new ratio of currents is corrected this time: </paragraph>
<paragraph lvl="0"><in-line-formula>(<highlight><italic>Iint/Iext</italic></highlight>)<highlight><subscript>2</subscript></highlight><highlight><italic>&equals;Rext/Rint*f</italic></highlight>(<highlight><italic>Iint/Iext</italic></highlight>)*<highlight><italic>Q&equals;Rext/Rint </italic></highlight></in-line-formula></paragraph>
<paragraph id="P-0070" lvl="0"><number>&lsqb;0070&rsqb;</number> The information (Iint/Iext)<highlight><subscript>2 </subscript></highlight>is therefore the direct image of the ratio of resistors. What remains is to digitize this information to obtain the output code. To do this, a digitization function <highlight><bold>9</bold></highlight> is implemented in the parallel converter. The digitization function linking this input ratio of currents (Iint/Iext)<highlight><subscript>2 </subscript></highlight>to the output code as well as the correction function f<highlight><superscript>&minus;1</superscript></highlight>(Iint/Iext) are defined in the parallel converter by working on the dimensions of the PMOS type transistors M<highlight><bold>10</bold></highlight> to M<highlight><bold>16</bold></highlight>, as seen above with reference to <cross-reference target="DRAWINGS">FIG. 2</cross-reference>. </paragraph>
<paragraph id="P-0071" lvl="0"><number>&lsqb;0071&rsqb;</number> The parallel converter of the compensation cell therefore provides for three distinct functions brought together in the same circuit part: the division of the currents, the application of a corrective function to an error generated previously in the circuitry and the digitization of the information obtained. All these three functions are fulfilled by the present invention in a straightforward and precise way with very little space requirement and with low power consumption. </paragraph>
<paragraph id="P-0072" lvl="0"><number>&lsqb;0072&rsqb;</number> The resistor comparison device according to the invention can thus be used to implement a system for the active correction of the value of integrated resistors on the basis of a precise external resistor used as a reference. The system therefore uses a single control circuit that is valid for several compensated resistors which may have different values. Furthermore, since the compensation information is conveyed in digital form to the different compensated resistors, it is made insensitive to the different noises. </paragraph>
</section>
</detailed-description>
</subdoc-description>
<subdoc-claims>
<heading lvl="1">That which is claimed is: </heading>
<claim id="CLM-00001">
<claim-text><highlight><bold>1</bold></highlight>. A device for the comparison of two resistors, wherein no voltage reference is implemented and wherein the device uses only analog information carried by currents until they are digitized, said device comprising a measurement circuit provided with means to extract the currents from the two resistors to be compared and to copy them to a parallel analog-digital converter provided with means to carry out the division of said extracted currents and convert the ratio of the extracted currents into a digital code, which is the image of the ratio of said two resistors, constantly re-updated as a function of environmental parameters of the circuit such as the working temperature. </claim-text>
</claim>
<claim id="CLM-00002">
<claim-text><highlight><bold>2</bold></highlight>. A device according to <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein the means for extracting and copying the currents of the two resistors to be compared comprise a first MOS transistor and a second MOS transistor, with a same type of conductivity, that are diode-mounted, said two transistors having to have strictly the same dimensions so that each of them has the same diode characteristic as the other. </claim-text>
</claim>
<claim id="CLM-00003">
<claim-text><highlight><bold>3</bold></highlight>. A comparison device according to <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference> or <highlight><bold>2</bold></highlight>, wherein the means to divide the currents extracted from the resistors to be compared and convert the ratio of the extracted currents into a digital code that is the image of the ratio of each of said resistors to be compared comprise a first group of P channel MOS transistors parallel-connected between a first power supply terminal and output terminals, and a second group of N channel MOS transistors parallel-connected between ground and said output terminals. </claim-text>
</claim>
<claim id="CLM-00004">
<claim-text><highlight><bold>4</bold></highlight>. A comparison device according to <dependent-claim-reference depends_on="CLM-00003">claim 3</dependent-claim-reference>, wherein the function linking the digital code to the ratio of the extracted currents is defied by the dimensions of the PMOS type copies. </claim-text>
</claim>
<claim id="CLM-00005">
<claim-text><highlight><bold>5</bold></highlight>. A comparison device according to one of the above claims, wherein the means with which the parallel converter are provided also implement an error correction function to generate a coefficient for the correction of the error occurring in the function that links the ratio of the extracted currents to the ratio of the resistors to be compared due to the absence of a voltage reference, so that the ratio of the currents is directly and precisely the image of the ratio of the resistors to be compared. </claim-text>
</claim>
<claim id="CLM-00006">
<claim-text><highlight><bold>6</bold></highlight>. A comparison device according to one of the above claims, wherein said device furthermore comprises passive parasitic elements series-connected with each of the two resistors to be compared, said elements having to be strictly identical in each arm. </claim-text>
</claim>
<claim id="CLM-00007">
<claim-text><highlight><bold>7</bold></highlight>. A comparison device according to <dependent-claim-reference depends_on="CLM-00005">claim 5</dependent-claim-reference>, wherein the passive parasitic elements are constituted by ESD or electrostatic discharge protection resistors. </claim-text>
</claim>
<claim id="CLM-00008">
<claim-text><highlight><bold>8</bold></highlight>. A system for the active correction of the value of compensated resistors integrated into a package, using an external reference resistor, where the values of said compensated resistors may be deliberately different and, moreover, subject to variations caused by the working temperature and by the quality of manufacture of resistors of this type, each compensated resistor comprising a nominal resistor and a plurality of parallel-connected correction resistors, wherein said system implements the comparison device of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference> for making a comparison between the value of said reference resistor and the value of a measurement resistor internal to the package, said measurement resistor being designed either identically to the nominal part of each of the compensated resistors or in the form of an integer number of times the nominal part of the compensated resistors, said correction resistors being put individually into operation or into the off state as a function of the compensation digital code given by said comparison device so as to obtain the value of the desired compensated resistor. </claim-text>
</claim>
<claim id="CLM-00009">
<claim-text><highlight><bold>9</bold></highlight>. A system according to <dependent-claim-reference depends_on="CLM-00008">claim 8</dependent-claim-reference>, wherein each integrated resistor comprises as many parallel-connected correction resistors as their are bits forming the digital compensation code.</claim-text>
</claim>
</subdoc-claims>
<subdoc-drawings id="DRAWINGS">
<heading lvl="0" align="CENTER">Drawings</heading>
<representative-figure>1</representative-figure>
<figure id="figure-D00000">
<image id="EMI-D00000" file="US20030001594A1-20030102-D00000.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00001">
<image id="EMI-D00001" file="US20030001594A1-20030102-D00001.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00002">
<image id="EMI-D00002" file="US20030001594A1-20030102-D00002.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00003">
<image id="EMI-D00003" file="US20030001594A1-20030102-D00003.TIF" imf="TIFF" ti="DR"/>
</figure>
</subdoc-drawings>
</patent-application-publication>
