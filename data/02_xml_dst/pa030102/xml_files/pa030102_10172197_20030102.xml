<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE patent-application-publication SYSTEM "pap-v16-2002-01-01.dtd" [
<!ENTITY US20030001544A1-20030102-D00000.TIF SYSTEM "US20030001544A1-20030102-D00000.TIF" NDATA TIF>
<!ENTITY US20030001544A1-20030102-D00001.TIF SYSTEM "US20030001544A1-20030102-D00001.TIF" NDATA TIF>
<!ENTITY US20030001544A1-20030102-D00002.TIF SYSTEM "US20030001544A1-20030102-D00002.TIF" NDATA TIF>
<!ENTITY US20030001544A1-20030102-D00003.TIF SYSTEM "US20030001544A1-20030102-D00003.TIF" NDATA TIF>
<!ENTITY US20030001544A1-20030102-D00004.TIF SYSTEM "US20030001544A1-20030102-D00004.TIF" NDATA TIF>
<!ENTITY US20030001544A1-20030102-D00005.TIF SYSTEM "US20030001544A1-20030102-D00005.TIF" NDATA TIF>
<!ENTITY US20030001544A1-20030102-D00006.TIF SYSTEM "US20030001544A1-20030102-D00006.TIF" NDATA TIF>
<!ENTITY US20030001544A1-20030102-D00007.TIF SYSTEM "US20030001544A1-20030102-D00007.TIF" NDATA TIF>
]>
<patent-application-publication>
<subdoc-bibliographic-information>
<document-id>
<doc-number>20030001544</doc-number>
<kind-code>A1</kind-code>
<document-date>20030102</document-date>
</document-id>
<publication-filing-type>new</publication-filing-type>
<domestic-filing-data>
<application-number>
<doc-number>10172197</doc-number>
</application-number>
<application-number-series-code>10</application-number-series-code>
<filing-date>20020614</filing-date>
</domestic-filing-data>
<foreign-priority-data>
<priority-application-number>
<doc-number>2001-182375</doc-number>
</priority-application-number>
<filing-date>20010615</filing-date>
<country-code>JP</country-code>
</foreign-priority-data>
<technical-information>
<classification-ipc>
<classification-ipc-primary>
<ipc>H02J007/16</ipc>
</classification-ipc-primary>
<classification-ipc-edition>07</classification-ipc-edition>
</classification-ipc>
<classification-us>
<classification-us-primary>
<uspc>
<class>320</class>
<subclass>162000</subclass>
</uspc>
</classification-us-primary>
</classification-us>
<title-of-invention>Battery power source device</title-of-invention>
</technical-information>
<inventors>
<first-named-inventor>
<name>
<given-name>Toshiaki</given-name>
<family-name>Nakanishi</family-name>
</name>
<residence>
<residence-non-us>
<city>Toyohashi</city>
<country-code>JP</country-code>
</residence-non-us>
</residence>
<authority-applicant>INV</authority-applicant>
</first-named-inventor>
</inventors>
<assignee>
<organization-name>Matsushita Electric Industrial Co., Ltd.</organization-name>
<address>
<city>Kadoma</city>
<country>
<country-code>JP</country-code>
</country>
</address>
<assignee-type>03</assignee-type>
</assignee>
<correspondence-address>
<name-1>MERCHANT &amp; GOULD PC</name-1>
<name-2></name-2>
<address>
<address-1>P.O. BOX 2903</address-1>
<city>MINNEAPOLIS</city>
<state>MN</state>
<postalcode>55402-0903</postalcode>
<country>
<country-code>US</country-code>
</country>
</address>
</correspondence-address>
</subdoc-bibliographic-information>
<subdoc-abstract>
<paragraph id="A-0001" lvl="0">A battery power source device is provided, capable of detecting a charge/discharge current flowing through a secondary battery mounted on an electric vehicle, etc., at low cost, with high reliability, and with high precision. A voltage signal generated across a current detection resistor connected to an assembled battery in series is transmitted to a battery ECU via a transmission means. At the time of discharge from the assembled battery, the voltage signal is detected as a pulse signal using a discharge current detection unit, a first capacitor, and a pulse generation unit during discharge. At the time of discharge, the voltage signal is detected as a pulse signal using a charge current detection unit, a second capacitor, and a pulse generation unit during charge. Event counters calculate this pulse signal at the time of discharge and charge as a current flowing through the assembled battery. </paragraph>
</subdoc-abstract>
<subdoc-description>
<summary-of-invention>
<section>
<heading lvl="1">BACKGROUND OF THE INVENTION </heading>
<paragraph id="P-0001" lvl="0"><number>&lsqb;0001&rsqb;</number> 1. Field of the Invention </paragraph>
<paragraph id="P-0002" lvl="0"><number>&lsqb;0002&rsqb;</number> The present invention relates to a technology for detecting a charge/discharge current flowing through a secondary battery mounted on an electrically-driven vehicle such as an electric vehicle (PEV) and a hybrid vehicle (HEV), an uninterruptible power supply system, a backup power source device, and the like. </paragraph>
<paragraph id="P-0003" lvl="0"><number>&lsqb;0003&rsqb;</number> 2. Related Background Art </paragraph>
<paragraph id="P-0004" lvl="0"><number>&lsqb;0004&rsqb;</number> Recently, nickel-metal hydride (Ni-MH) batteries mainly have been used as a main power source for driving a motor in an electric vehicle (PEV) and a so-called hybrid vehicle (HEV) provided with an engine and a motor, because of their high energy density (i.e., capable of storing energy compactly) and high output density. In the PEV and HEV, an assembled battery made up of a combination of a plurality of single cells or unit cells is employed so as to supply a sufficient output to the motor. </paragraph>
<paragraph id="P-0005" lvl="0"><number>&lsqb;0005&rsqb;</number> As for HEVs, in a case where an output from an engine is larger than the power required for driving the vehicle, then the surplus power is used for driving a generator so as to charge a secondary battery. Conversely, in a case where an output from the engine is smaller, then the electrical power from the secondary battery is used for driving the motor so as to compensate a shortage of the power. In the latter case, the secondary battery is discharged. When mounting a secondary battery on a hybrid vehicle or the like, it is required to control such charge/discharge operations so as to maintain the appropriate operating conditions. To this end, it becomes necessary that a residual battery capacity (i.e., State of Charge (SOC)) is estimated and an SOC control is conducted so as to optimize the fuel efficiency of the vehicle. </paragraph>
<paragraph id="P-0006" lvl="0"><number>&lsqb;0006&rsqb;</number> One of parameters for estimating the SOC of a battery is a charge/discharge current in the battery. Therefore, in order to perform the SOC control securely, it is required to use a current sensor that can detect a charge/discharge current in the battery accurately. </paragraph>
<paragraph id="P-0007" lvl="0"><number>&lsqb;0007&rsqb;</number> Conventionally, as the current sensor used in the HEV or the like, an insulated type current sensor employing a Hall element has been known generally for the purpose of preventing electric leakage. For example, JP (1993)-297026A discloses a current sensor including a Hall element, a core provided with a winding, and an electronic circuit. However, this current sensor has the following problems: </paragraph>
<paragraph id="P-0008" lvl="2"><number>&lsqb;0008&rsqb;</number> (a) the core is provided with a winding, and many windings are required, which makes miniaturization of the current sensor difficult. Especially in the case of the HEV where a principal current is large and a ratio of a detected current at the side of the electronic circuit should be made relatively small, the number of turns of the wiring becomes large, which further makes the miniaturization difficult and leads to an increase in the cost. On the other hand, a wiring with a smaller wire diameter is used for the purpose of miniaturization, which would lead to a temperature rise and fraying of the wiring. Consequently, the reliability of the current sensor would deteriorate; </paragraph>
<paragraph id="P-0009" lvl="2"><number>&lsqb;0009&rsqb;</number> (b) an offset error in the detected current due to the temperature characteristics of the Hall element would occur; </paragraph>
<paragraph id="P-0010" lvl="2"><number>&lsqb;0010&rsqb;</number> (c) a circuit is required for not only at the side of receiving the detected current but also at the side of the current sensor, which doubles the number of the components such as a circuit board and therefore is uneconomical; and </paragraph>
<paragraph id="P-0011" lvl="2"><number>&lsqb;0011&rsqb;</number> (d) when an electrical wiring to the current sensor has failed, a judgment cannot be made as to whether the situation applies to the case where a current does not flow through the wiring or the case where the wiring is broken. </paragraph>
<paragraph id="P-0012" lvl="0"><number>&lsqb;0012&rsqb;</number> To cope with the above problem (b), JP10(1998)-177926A discloses a current sensor including not a Hall element but a detection coil, an exciting coil, and a core. However, this current sensor does not solve the above problems (a) and (d). </paragraph>
<paragraph id="P-0013" lvl="0"><number>&lsqb;0013&rsqb;</number> Then, as an alternative for the insulated type current sensor that requires a core provided with a wiring, a current sensor in a shunt resistor method is known, which detects a current flowing through the shunt resistor as a voltage. </paragraph>
<paragraph id="P-0014" lvl="0"><number>&lsqb;0014&rsqb;</number> For example, JP11(1999)-308701A discloses a battery indicator for electrically-driven vehicles, including a shunt resistor type current sensor within it, and JP5(1993)-66250A discloses an electricity quantity totaling device that detects a charge/discharge electricity quantity of the secondary battery as a pulse using a current detection resistor (shunt resistor), totals this pulse with a counter to store the result, and indicates a residual battery capacity. </paragraph>
<paragraph id="P-0015" lvl="0"><number>&lsqb;0015&rsqb;</number> The battery indicator described in the above JP11(1999)-308701A is equipped with a shunt resistor within it, as illustrated in this publication. Generally, a driving output of the HEV or the like is large, and therefore a current flowing through the battery becomes large. With the increase in the current, the amount of heat generated in the shunt resistor increases. Therefore, a design to make the permissible loss acceptable makes the shunt resistor large and makes a wire diameter of an electric wiring to the shunt resistor also large. As a consequence, the battery indicator including the shunt resistor and the electric wiring within it becomes large, which would increase the cost and would cause deterioration in the fuel efficiency because of the increase in the weight of the vehicle. </paragraph>
<paragraph id="P-0016" lvl="0"><number>&lsqb;0016&rsqb;</number> In addition, since the detected current value is large, the resistance value of the shunt resistor should be rather small in order to detect such a large amount of current as a voltage suitable for processing it in a circuit. Therefore, without an expensive high-precision shunt resistor with superior temperature characteristics, an offset error would occur in the detected current. </paragraph>
<paragraph id="P-0017" lvl="0"><number>&lsqb;0017&rsqb;</number> Further, in the electrically-driven vehicles, a switching current of an inverter flows through the shunt resistor. This switching current has a large amount of high frequency component, which would become a noise source. Therefore, if the shunt resistor is arranged adjacent to a microcomputer and other electronic circuits, then there is the fear of generating a malfunction in the circuit due to the noise, and the reliability would deteriorate. </paragraph>
<paragraph id="P-0018" lvl="0"><number>&lsqb;0018&rsqb;</number> The electricity quantity totaling device described in the above JP5(1993)-66250A is mounted on mobile equipment such as a camera-integrated video, a mobile phone, a personal computer, and a word processor, and realizes a function of indicating a residual capacity of a secondary battery. Therefore, in contrast to the secondary batteries mounted on the HEV or the like, the detected current is small, and naturally the shunt resistor is included within the device together with other electronic components. Consequently, this publication does not address the problem in detecting a large amount of current flowing through a secondary battery mounted on the HEV or the like as stated above. </paragraph>
</section>
<section>
<heading lvl="1">SUMMARY OF THE INVENTION </heading>
<paragraph id="P-0019" lvl="0"><number>&lsqb;0019&rsqb;</number> Therefore, with the foregoing in mind, it is an object of the present invention to provide a battery power source device provided with a system capable of detecting a charge/discharge current flowing through a secondary battery mounted on an electric vehicle, an uninterruptible power supply system, a backup power source device, and the like at low cost, with high reliability, and with high precision. </paragraph>
<paragraph id="P-0020" lvl="0"><number>&lsqb;0020&rsqb;</number> To fulfill the above-stated object, a battery power source device according to the present invention is a battery power source device to which electrical power is supplied from an assembled battery including a combination of a plurality of single cells or unit cells, each of which is a secondary battery, and includes: a current detection resistor connected to the assembled battery in series; transmission means for transmitting a voltage signal generated across the current detection resistor; and a control device separated from the assembled battery, the current detection resistor, and the transmission means. The control device includes: a discharge current detection unit that receives the voltage signal transmitted via the transmission means and outputs a current signal in proportion to a discharge current flowing through the current detection resistor at the time of discharge from the assembled battery; a first capacitor that totals the current signals output from the discharge current detection unit; a pulse generation unit during discharge that, when a voltage of the first capacitor increases to a first threshold value, reverses an output signal and makes the first capacitor discharge, and when the voltage of the first capacitor decreases to a second threshold value, reverses the output signal again to generate a pulse and stops the first capacitor discharging; a charge current detection unit that receives the voltage signal transmitted via the transmission means and outputs a current signal in proportion to a charge current flowing through the current detection resistor at the time of charge of the assembled battery; a second capacitor that totals current signals output from the charge current detection unit; a pulse generation unit during charge that, when a voltage of the second capacitor increases to a third threshold value, reverses an output signal and makes the second capacitor discharge, and when the voltage of the second capacitor decreases to a fourth threshold value, reverses the output signal again to generate a pulse and stops the second capacitor discharging; and a current detection unit that counts the number of pulses output from the pulse generation unit during discharge and the pulse generation unit during charge and calculates a current flowing through the assembled battery at the time of discharge and charge using the counted number of pulses. </paragraph>
<paragraph id="P-0021" lvl="0"><number>&lsqb;0021&rsqb;</number> With this configuration, since the current detection resistor through which a switching current of a inverter, which includes a high frequency component that might become a noise source, flows is provided outside of the control device, malfunction of a microcomputer and other electronic circuits mounted inside of the control device can be prevented, whereby the reliability of the system can be improved. </paragraph>
<paragraph id="P-0022" lvl="0"><number>&lsqb;0022&rsqb;</number> In the battery power source device according to the present invention, it is preferable that the current detection unit included in the control device counts in advance the number of pulses output from the pulse generation unit during discharge and the pulse generation unit during charge immediately after power-up of the battery power source device, the counted number of pulses in advance is subtracted from the number of pulses counted during operation of the battery power source device, and a current flowing through the assembled battery is calculated using a result of the subtraction. </paragraph>
<paragraph id="P-0023" lvl="0"><number>&lsqb;0023&rsqb;</number> In the battery power source device according to the present invention, it is preferable that each of the discharge current detection unit and the charge current detection unit further includes: a differential operation circuit having a first input terminal and a second input terminal; a first resistor having one end connected to the first input terminal of the differential operation circuit; a second resistor having one end connected to the second input terminal of the differential operation circuit; a first constant current circuit having an output end connected to the first input terminal of the differential operation circuit; a second constant circuit having an output end connected to the second input terminal of the differential operation circuit; a first current source that operates in accordance with an output signal from the differential operation circuit and functions so that a voltage level at the first input terminal of the differential operation circuit becomes equal to a voltage level at the second input terminal; and a second current source that operates in accordance with the output signal from the differential operation circuit, has a current mirror relationship with the first current source, and outputs a current signal in proportion to a current flowing through the current detection resistor to the outside. Here, the control device further includes: a first switch having one end connected to the other end of the first resistor and the other end electrically connected to one end of the current detection resistor via the transmission means; a second switch having one end connected to the other end of the second resistor and the other end electrically connected to the other end of the current detection resistor via the transmission means; and a third switch connected between the other ends of the first resistor and the second resistor. </paragraph>
<paragraph id="P-0024" lvl="0"><number>&lsqb;0024&rsqb;</number> In the above device, it is preferable that the control device further includes an offset correction unit that makes a correction to the current in accordance with a result obtained by subtracting a first counted number of pulses from a second counted number of pulses, where the first counted number of pulses is output from the pulse generation unit during discharge and the pulse generation unit during charge for a constant time period in a state where the first switch and the second switch are open and the third switch is closed during operation of the battery power source device, and the second counted number of pulses is output from the pulse generation unit during discharge and the pulse generation unit during charge in a state where the first switch and the second switch are closed and the third switch is opened during operation of the battery power source device. With this configuration, while the vehicle is in motion, even when components characteristics vary in accordance with a fluctuation in the environmental temperature, an offset error in the current can be eliminated at any time. </paragraph>
<paragraph id="P-0025" lvl="0"><number>&lsqb;0025&rsqb;</number> In the battery power source device according to the present invention, it is preferable that a side of the pulse generation unit during discharge and the pulse generation unit during charge and a side of the current detection unit are isolated electrically. With this configuration, the circuit at the side of the assembled battery and the circuit at the side of an auxiliary battery that supplies electrical power to the control device (ECU) can be isolated electrically (insulated), whereby malfunction due to electric leakage and noises can be prevented securely. </paragraph>
<paragraph id="P-0026" lvl="0"><number>&lsqb;0026&rsqb;</number> In the battery power source device according to the present invention, it is preferable that the current detection resistor includes at least: an alloy plate subjected to a resistance value trimming; a pair of metal plates on which both ends of the alloy plate are fixed and mounted and to which one end of the transmission means is fixed; and molded resin for sealing the alloy plate. With this configuration, a current detection resistor having a low resistance value and high precision can be obtained with a simple configuration. </paragraph>
<paragraph id="P-0027" lvl="0"><number>&lsqb;0027&rsqb;</number> In the battery power source device according to the present invention, it is preferable that the assembled battery is configured to be separated into a plurality of blocks, the battery power source device further includes a current control unit that controls a charge/discharge current with respect to the assembled battery; and the control device further includes a voltage detection unit that detects a battery voltage at each of the plurality of blocks; and a voltage comparison unit that compares battery voltages obtained from the voltage detection unit. Here, as a result of the comparison by the voltage comparison unit, if a difference in voltage is generated among the battery voltages at the plurality of blocks, the current control unit controls so as to decrease a current flowing through the current detection resistor. With this configuration, a variation in battery voltages among blocks can be reduced, and a battery performance as a whole of the assembled battery can be achieved sufficiently.</paragraph>
</section>
</summary-of-invention>
<brief-description-of-drawings>
<section>
<heading lvl="1">BRIEF DESCRIPTION OF THE DRAWINGS </heading>
<paragraph id="P-0028" lvl="0"><number>&lsqb;0028&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1</cross-reference> shows a schematic configuration of a driving system of a hybrid vehicle (HEV) as an electrically-driven vehicle according to one embodiment of the present invention. </paragraph>
<paragraph id="P-0029" lvl="0"><number>&lsqb;0029&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 2</cross-reference> is a block diagram showing an internal configuration and a peripheral configuration of a battery ECU <highlight><bold>22</bold></highlight>. </paragraph>
<paragraph id="P-0030" lvl="0"><number>&lsqb;0030&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3</cross-reference> is a circuit diagram showing one configuration example of a discharge current detection unit <highlight><bold>221</bold></highlight>, a pulse generation unit during discharge <highlight><bold>223</bold></highlight>, a charge current detection unit <highlight><bold>224</bold></highlight>, and a pulse generation unit during charge <highlight><bold>226</bold></highlight> shown in <cross-reference target="DRAWINGS">FIG. 2</cross-reference>. </paragraph>
<paragraph id="P-0031" lvl="0"><number>&lsqb;0031&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 4</cross-reference> is a circuit diagram showing a modified example of the configuration shown in <cross-reference target="DRAWINGS">FIG. 3</cross-reference>. </paragraph>
<paragraph id="P-0032" lvl="0"><number>&lsqb;0032&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 5</cross-reference> is a circuit diagram showing another modified example of the configuration shown in <cross-reference target="DRAWINGS">FIG. 3</cross-reference>. </paragraph>
<paragraph id="P-0033" lvl="0"><number>&lsqb;0033&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 6A</cross-reference> is a schematic external view showing the assembly process of a current detection resistor <highlight><bold>21</bold></highlight>. </paragraph>
<paragraph id="P-0034" lvl="0"><number>&lsqb;0034&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 6B</cross-reference> is a schematic external view showing the assembly process of the current detection resistor <highlight><bold>21</bold></highlight>. </paragraph>
<paragraph id="P-0035" lvl="0"><number>&lsqb;0035&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 6C</cross-reference> is a schematic external view showing the assembly process of the current detection resistor <highlight><bold>21</bold></highlight>. </paragraph>
<paragraph id="P-0036" lvl="0"><number>&lsqb;0036&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 7A</cross-reference> is a schematic external view showing a modified example of the assembly process of the current detection resistor <highlight><bold>21</bold></highlight>. </paragraph>
<paragraph id="P-0037" lvl="0"><number>&lsqb;0037&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 7B</cross-reference> is a schematic external view showing a modified example of the assembly process of the current detection resistor <highlight><bold>21</bold></highlight>.</paragraph>
</section>
</brief-description-of-drawings>
<detailed-description>
<section>
<heading lvl="1">DETAILED DESCRIPTION OF THE INVENTION </heading>
<paragraph id="P-0038" lvl="0"><number>&lsqb;0038&rsqb;</number> The following describes an electrically-driven vehicle such as an electric vehicle and a hybrid vehicle, as one of preferred embodiments of the present, invention, with reference to the drawings. </paragraph>
<paragraph id="P-0039" lvl="0"><number>&lsqb;0039&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1</cross-reference> shows a schematic configuration of a driving system of a hybrid vehicle (HEV) as an electrically-driven vehicle according to one embodiment of the present invention. </paragraph>
<paragraph id="P-0040" lvl="0"><number>&lsqb;0040&rsqb;</number> In <cross-reference target="DRAWINGS">FIG. 1</cross-reference>, an output shaft <highlight><bold>11</bold></highlight> of an engine <highlight><bold>11</bold></highlight> is connected to a rotor <highlight><bold>13</bold></highlight> of a motor generator <highlight><bold>12</bold></highlight> and also is input into a transmission <highlight><bold>14</bold></highlight>. The motor generator <highlight><bold>12</bold></highlight> functions as a three-phase AC generator and a three-phase AC motor. The transmission <highlight><bold>14</bold></highlight> reduces the rotation speed of the output shaft <highlight><bold>11</bold></highlight> of the engine <highlight><bold>10</bold></highlight> via an internal gear and the driving force is connected to a drive shaft <highlight><bold>15</bold></highlight> with driving wheels (not illustrated) connected at the ends via a differential. With this configuration, an output from the engine <highlight><bold>10</bold></highlight> or the motor generator <highlight><bold>12</bold></highlight> is transmitted to the driving wheels, whereby the vehicle is driven. </paragraph>
<paragraph id="P-0041" lvl="0"><number>&lsqb;0041&rsqb;</number> The output and the rpm of the engine <highlight><bold>10</bold></highlight> are controlled by an engine electronic control unit (ECU) <highlight><bold>19</bold></highlight>, based on a manipulated variable of an accelerator pedal <highlight><bold>16</bold></highlight>, environment conditions such as a circulating water temperature, an intake air temperature and an intake air pressure, engine information from a crank sensor and a knocking sensor, and an operation condition of the motor generator <highlight><bold>12</bold></highlight>. </paragraph>
<paragraph id="P-0042" lvl="0"><number>&lsqb;0042&rsqb;</number> As illustrated in the drawing, an assembled battery <highlight><bold>20</bold></highlight> is made up of a plurality of single cells or unit cells that are connected in series, and is connected to the motor generator <highlight><bold>12</bold></highlight> via an inverter <highlight><bold>23</bold></highlight>. In this embodiment, a secondary battery that makes up the assembled battery is a unit cell made of a nickel-metal hydride battery. The motor generator <highlight><bold>12</bold></highlight> is controlled by the inverter <highlight><bold>23</bold></highlight>, and electrical power is transferred between the motor generator <highlight><bold>12</bold></highlight> and the assembled battery <highlight><bold>20</bold></highlight> via the inverter <highlight><bold>23</bold></highlight>. </paragraph>
<paragraph id="P-0043" lvl="0"><number>&lsqb;0043&rsqb;</number> The inverter <highlight><bold>23</bold></highlight> is controlled by an inverter ECU <highlight><bold>24</bold></highlight>. This control is conducted based on operation condition information of the engine <highlight><bold>10</bold></highlight> from the engine ECU <highlight><bold>19</bold></highlight>, a manipulated variable of the accelerator pedal <highlight><bold>16</bold></highlight>, a manipulated variable of a brake pedal <highlight><bold>17</bold></highlight>, a shift range designated by a shift lever <highlight><bold>18</bold></highlight>, information on the assembled battery <highlight><bold>20</bold></highlight> such as an accumulation state of electricity (residual battery capacity: SOC) and generation of a failure from a battery ECU <highlight><bold>22</bold></highlight> (a control device of the assembled battery <highlight><bold>20</bold></highlight>), a turning angle <highlight><bold>0</bold></highlight> of the output shaft <highlight><bold>11</bold></highlight> of the engine <highlight><bold>10</bold></highlight> detected by a resolver <highlight><bold>25</bold></highlight>, currents Iu, Iv, and Iw in U-phase, V-phase, and W-phase of the motor generator <highlight><bold>12</bold></highlight>, and the like. </paragraph>
<paragraph id="P-0044" lvl="0"><number>&lsqb;0044&rsqb;</number> The inverter ECU <highlight><bold>24</bold></highlight> outputs a signal for controlling each of the transistors that make up the inverter <highlight><bold>23</bold></highlight>, based on these information. Then, the inverter ECU <highlight><bold>24</bold></highlight> controls a field current of the motor generator <highlight><bold>12</bold></highlight> based on the revolving speed at that moment, and determines whether the motor generator <highlight><bold>12</bold></highlight> should function as a generator or as a motor. When the motor generator <highlight><bold>12</bold></highlight> functions as the generator, the charge is conducted to the assembled battery <highlight><bold>20</bold></highlight>, whereas when the motor generator <highlight><bold>12</bold></highlight> functions as the motor and consumes electrical power, electrical power is discharged from the assembled battery <highlight><bold>20</bold></highlight>. </paragraph>
<paragraph id="P-0045" lvl="0"><number>&lsqb;0045&rsqb;</number> For example, if the battery ECU <highlight><bold>22</bold></highlight> detects a decrease in the SOC of the assembled battery <highlight><bold>20</bold></highlight>, then the battery ECU <highlight><bold>22</bold></highlight> makes the motor generator <highlight><bold>12</bold></highlight> generate electrical power via the inverter ECU <highlight><bold>24</bold></highlight> and the inverter <highlight><bold>23</bold></highlight> by using a part of a torque generated by the engine <highlight><bold>10</bold></highlight>, and then charge is conducted to the assembled battery <highlight><bold>20</bold></highlight>. Conversely, if the battery ECU <highlight><bold>22</bold></highlight> detects increase in the SOC of the assembled battery <highlight><bold>20</bold></highlight>, then the battery ECU <highlight><bold>22</bold></highlight> performs a control so as to suppress an output from the engine <highlight><bold>10</bold></highlight> via the engine ECU <highlight><bold>19</bold></highlight>, make the motor generator <highlight><bold>12</bold></highlight> function as a motor via the inverter <highlight><bold>23</bold></highlight>, and use the thus generated torque for driving the vehicle. </paragraph>
<paragraph id="P-0046" lvl="0"><number>&lsqb;0046&rsqb;</number> Alternatively, during a braking operation of the vehicle, the inverter ECU <highlight><bold>24</bold></highlight> makes the motor generator <highlight><bold>12</bold></highlight> function as a generator, and charges the assembled battery <highlight><bold>20</bold></highlight> using thus generated electrical power. </paragraph>
<paragraph id="P-0047" lvl="0"><number>&lsqb;0047&rsqb;</number> Since it is difficult to anticipate when the braking operation of the electrically-driven vehicle is conducted, it is preferable that the assembled battery <highlight><bold>20</bold></highlight> should have room enough for accepting the electrical power generated from the braking operation. On the other hand, when an output from the engine <highlight><bold>10</bold></highlight> is not enough for obtaining the acceleration desired by a driver, the SOC of the assembled battery <highlight><bold>20</bold></highlight> should remain to some extent so as to make the motor generator <highlight><bold>12</bold></highlight> function as a motor. To satisfy these conditions, the SOC of the assembled battery <highlight><bold>20</bold></highlight> is controlled so as to keep a middle state of the battery capacity. </paragraph>
<paragraph id="P-0048" lvl="0"><number>&lsqb;0048&rsqb;</number> In the case of the HEV where electrical power is generated by the output from the engine <highlight><bold>10</bold></highlight> so as to charge the battery, the SOC of the assembled battery <highlight><bold>20</bold></highlight> is controlled adequately, whereby regenerative electric power during the braking operation is collected sufficiently to increase an energy efficiency so that an acceleration desired by a driver can be achieved at the time of acceleration. </paragraph>
<paragraph id="P-0049" lvl="0"><number>&lsqb;0049&rsqb;</number> In this way, the process for detecting the SOC of the assembled battery <highlight><bold>20</bold></highlight> accurately and controlling the SOC adequately is important for a vehicle whose power source is a battery like the HEV Therefore, a battery voltage, a charge/discharge current, and a battery temperature are input into the battery ECU <highlight><bold>22</bold></highlight> as information on the state of the cells that make up the assembled battery <highlight><bold>20</bold></highlight>, so that the SOC and failures of the assembled battery <highlight><bold>20</bold></highlight> are calculated and estimated. As for the battery voltage, the assembled battery <highlight><bold>20</bold></highlight> is separated into a plurality of blocks, and a battery voltage is detected for each block. As for the battery temperature, since the battery temperature varies among the detected positions, temperature sensors <highlight><bold>27</bold></highlight> provided at a plurality of positions are used for detecting temperatures. </paragraph>
<paragraph id="P-0050" lvl="0"><number>&lsqb;0050&rsqb;</number> In addition, in order to detect a charge/discharge current of the assembled battery <highlight><bold>20</bold></highlight>, a current detection resistor <highlight><bold>21</bold></highlight> connected to the assembled battery <highlight><bold>20</bold></highlight> in series is provided. A very small voltage across the current detection resistor <highlight><bold>21</bold></highlight> generated at the time of charge or discharge of the assembled battery <highlight><bold>20</bold></highlight> is input into the battery ECU <highlight><bold>22</bold></highlight> via a wiring harness <highlight><bold>28</bold></highlight> functioning as a transmission means, and then a current value is calculated. </paragraph>
<paragraph id="P-0051" lvl="0"><number>&lsqb;0051&rsqb;</number> Next, the configuration and operation for calculating the current value by the battery ECU <highlight><bold>22</bold></highlight> will be explained in the following, with reference to <cross-reference target="DRAWINGS">FIG. 2</cross-reference>. </paragraph>
<paragraph id="P-0052" lvl="0"><number>&lsqb;0052&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 2</cross-reference> is a block diagram showing an internal configuration and a peripheral configuration of the battery ECU <highlight><bold>22</bold></highlight>. </paragraph>
<paragraph id="P-0053" lvl="0"><number>&lsqb;0053&rsqb;</number> In <cross-reference target="DRAWINGS">FIG. 2, a</cross-reference> very small voltage generated across the current detection resistor <highlight><bold>21</bold></highlight>, which has been input into the battery ECU <highlight><bold>22</bold></highlight> via the transmission means <highlight><bold>28</bold></highlight>, is supplied to a discharge current detection unit <highlight><bold>221</bold></highlight> and a charge current detection unit <highlight><bold>224</bold></highlight>. </paragraph>
<paragraph id="P-0054" lvl="0"><number>&lsqb;0054&rsqb;</number> First, at the time of discharge from the assembled battery <highlight><bold>20</bold></highlight>, the discharge current detection unit <highlight><bold>221</bold></highlight> outputs a current signal in proportion to a discharge current flowing through the current detection resistor <highlight><bold>21</bold></highlight> to a first capacitor <highlight><bold>222</bold></highlight>, and then the first capacitor <highlight><bold>222</bold></highlight> accumulates the current signal. A pulse generation unit during discharge <highlight><bold>223</bold></highlight>, into which a voltage of the first capacitor <highlight><bold>222</bold></highlight> is input, functions as follows. That is, when the voltage of the first capacitor <highlight><bold>222</bold></highlight> increases to a first threshold value (VT<highlight><bold>1</bold></highlight>), then the pulse generation unit during discharge <highlight><bold>223</bold></highlight> reverses an output signal, and at the same time makes the first capacitor <highlight><bold>222</bold></highlight> discharge. When the voltage of the first capacitor <highlight><bold>222</bold></highlight> decreases to a second threshold value (VT<highlight><bold>2</bold></highlight>), then the pulse generation unit during discharge <highlight><bold>223</bold></highlight> reverses the output signal again to generate a pulse, and at the same time stops the first capacitor <highlight><bold>222</bold></highlight> discharging. In this way, the pulse generation unit during discharge <highlight><bold>223</bold></highlight> generates a pulse proportional in number to the amount of the discharge current from the assembled battery <highlight><bold>20</bold></highlight>. </paragraph>
<paragraph id="P-0055" lvl="0"><number>&lsqb;0055&rsqb;</number> The current detection unit is configured by hardware and software within a microcomputer <highlight><bold>227</bold></highlight>. The pulse output from the pulse generation unit during discharge <highlight><bold>223</bold></highlight> is input into an event counter <highlight><bold>2271</bold></highlight> (current detection unit) within the microcomputer <highlight><bold>227</bold></highlight>. The event counter <highlight><bold>2271</bold></highlight> is set so as to count a rising edge of the input pulse, and a counted number of the event counter <highlight><bold>2271</bold></highlight> is confirmed by the software at every one of a constant time period. After confirmation, the counted number is cleared. Since the number of the pulses generated during a constant time period is proportional to a current value, the confirmed counted number of the pulses can be converted into a discharge current value according to a numerical formula. Hence, the discharge current value can be detected. Moreover, by totaling the results obtained by multiplying this discharge current value and the time period together, or by continuing to total the number of pulses, a total current value of the battery also can be calculated. </paragraph>
<paragraph id="P-0056" lvl="0"><number>&lsqb;0056&rsqb;</number> Next, at the time of charge of the assembled battery <highlight><bold>20</bold></highlight>, the charge current detection unit <highlight><bold>224</bold></highlight> outputs a current signal in proportion to a charge current flowing through the current detection resistor <highlight><bold>21</bold></highlight> to a second capacitor <highlight><bold>225</bold></highlight>, and then the second capacitor <highlight><bold>225</bold></highlight> accumulates the current signal. A pulse generation unit during charge <highlight><bold>226</bold></highlight>, into which a voltage of the second capacitor <highlight><bold>225</bold></highlight> is input, functions as follows. That is, when the voltage of the second capacitor <highlight><bold>225</bold></highlight> increases to a third threshold value (VT<highlight><bold>3</bold></highlight>), then the pulse generation unit during charge <highlight><bold>226</bold></highlight> reverses an output signal, and at the same time makes the second capacitor <highlight><bold>225</bold></highlight> discharge. When the voltage of the second capacitor <highlight><bold>225</bold></highlight> decreases to a fourth threshold value (VT<highlight><bold>4</bold></highlight>), then the pulse generation unit during charge <highlight><bold>226</bold></highlight> reverses the output signal again to generate a pulse, and at the same time stops the second capacitor <highlight><bold>225</bold></highlight> from discharging. In this way, the pulse generation unit during charge <highlight><bold>226</bold></highlight> generates a pulse proportional in number to the amount of the charge current of the assembled battery <highlight><bold>20</bold></highlight>. The pulse output from the pulse generation unit during charge <highlight><bold>226</bold></highlight> is input into an event counter <highlight><bold>2272</bold></highlight> (current detection unit) within the microcomputer <highlight><bold>227</bold></highlight>, where the number of pulses is counted to calculate a current value during charge. </paragraph>
<paragraph id="P-0057" lvl="0"><number>&lsqb;0057&rsqb;</number> Here, a battery voltage of the assembled battery <highlight><bold>20</bold></highlight> is input into a multiplexer <highlight><bold>228</bold></highlight> for each block. A voltage value of each block is selected in a time series and an A/D converter <highlight><bold>2273</bold></highlight> obtains the voltage value as a voltage data via a differential amplifier <highlight><bold>229</bold></highlight>. The voltage data obtained for each block are subjected to a comparative operation by the microcomputer <highlight><bold>227</bold></highlight>. As a result of the comparison, if voltage data for each block differ from one another, then the microcomputer <highlight><bold>227</bold></highlight> in the battery ECU <highlight><bold>22</bold></highlight> issues an instruction to the inverter ECU <highlight><bold>224</bold></highlight> so as to control a current flowing through the current detection resistor <highlight><bold>21</bold></highlight> to be decreased. Thereby, a variation in battery voltages among blocks can be reduced, and a battery performance as a whole of the assembled battery can be achieved sufficiently. </paragraph>
<paragraph id="P-0058" lvl="0"><number>&lsqb;0058&rsqb;</number> Next, among the configuration shown in <cross-reference target="DRAWINGS">FIG. 2</cross-reference>, specific examples of a portion for generating pulses proportional in number to the discharge and charge currents will be described in the following. </paragraph>
<paragraph id="P-0059" lvl="0"><number>&lsqb;0059&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3</cross-reference> is a circuit diagram showing one configuration example of the discharge current detection unit <highlight><bold>221</bold></highlight>, the pulse generation unit during discharge <highlight><bold>223</bold></highlight>, the charge current detection unit <highlight><bold>224</bold></highlight>, and the pulse generation unit during charge <highlight><bold>226</bold></highlight>. Note here that, since the configuration and operation are similar between discharge and charge operations, the following only describes the case where a current flowing through the current detection resistor <highlight><bold>21</bold></highlight> is in a direction of discharge. </paragraph>
<paragraph id="P-0060" lvl="0"><number>&lsqb;0060&rsqb;</number> In <cross-reference target="DRAWINGS">FIG. 3, a</cross-reference> resistor R<highlight><bold>2</bold></highlight> is connected to one end of the current detection resistor <highlight><bold>21</bold></highlight> via the transmission means <highlight><bold>28</bold></highlight> at one end and is connected to a non-reverse input terminal (&plus;) of an operational amplifier OP<highlight><bold>1</bold></highlight> at the other end. A resistor R<highlight><bold>3</bold></highlight> is connected to the other end of the current detection resistor <highlight><bold>21</bold></highlight> via the transmission means <highlight><bold>28</bold></highlight> at one end and is connected to a reverse input terminal (&minus;) of the operational amplifier OP<highlight><bold>1</bold></highlight> at the other end. These resistors R<highlight><bold>2</bold></highlight> and R<highlight><bold>3</bold></highlight> are provided for conducting an offset adjustment and realizing an input impedance matching for the operational amplifier OP<highlight><bold>1</bold></highlight>, and have a resistance value of 100 &OHgr;, respectively. Collector currents in transistors Tr<highlight><bold>2</bold></highlight> and Tr<highlight><bold>3</bold></highlight> flow through the R<highlight><bold>2</bold></highlight> and R<highlight><bold>3</bold></highlight> beforehand, where the transistors Tr<highlight><bold>2</bold></highlight> and Tr<highlight><bold>3</bold></highlight> have a current mirror relationship with a transistor Tr<highlight><bold>1</bold></highlight> forming a reference current. </paragraph>
<paragraph id="P-0061" lvl="0"><number>&lsqb;0061&rsqb;</number> When the assembled battery <highlight><bold>20</bold></highlight> discharges with a current Id, then a potential difference (In <cross-reference target="DRAWINGS">FIG. 3</cross-reference>, upper side denotes positive) is generated across the current detection resistor <highlight><bold>21</bold></highlight>. Here, a resistance value of the current detection resistor <highlight><bold>21</bold></highlight> is set to be very small, for example, to 1 m&OHgr; in order to reduce heat generation to a minimum. When a potential difference is generated across the current detection resistor <highlight><bold>21</bold></highlight>, a voltage level at the reverse input terminal of the operational amplifier OP<highlight><bold>1</bold></highlight> becomes larger than that at the non-reverse input terminal thereof and an output voltage from the operational amplifier OP<highlight><bold>1</bold></highlight> becomes a level closer to the ground potential. Thus, a transistor Tr<highlight><bold>6</bold></highlight> is turned ON and an emitter voltage of the transistor Tr<highlight><bold>6</bold></highlight> decreases. As a result, transistors Tr<highlight><bold>4</bold></highlight> and Tr<highlight><bold>5</bold></highlight>, whose bases are connected to the emitter of the transistor Tr<highlight><bold>6</bold></highlight>, are turned ON. </paragraph>
<paragraph id="P-0062" lvl="0"><number>&lsqb;0062&rsqb;</number> When the transistor Tr<highlight><bold>4</bold></highlight> is turned ON, a current flows through the resistor R<highlight><bold>2</bold></highlight>, so that a voltage at the non-reverse input terminal of the operational amplifier OP<highlight><bold>1</bold></highlight> is increased. Here, the current flowing through the resistor R<highlight><bold>2</bold></highlight> is determined by a ratio between resistance values of the resistor R<highlight><bold>2</bold></highlight> and the current detection resistor <highlight><bold>21</bold></highlight>. Since the ratio between the resistance values of the current detection resistor <highlight><bold>21</bold></highlight> (resistance value: 1 m&OHgr;) and the resistor R<highlight><bold>2</bold></highlight> (resistance value: 100 &OHgr;) is {fraction (1/100000)}, assuming that the discharge current Id is <highlight><bold>30</bold></highlight>A, for example, if the collector current in the transistor Tr<highlight><bold>4</bold></highlight> is 300 &mgr;A, a potential difference between the non-reverse input terminal and the reverse input terminal of the operational amplifier OP<highlight><bold>1</bold></highlight> becomes zero, so that the operational amplifier OP<highlight><bold>1</bold></highlight> becomes a balancing state. </paragraph>
<paragraph id="P-0063" lvl="0"><number>&lsqb;0063&rsqb;</number> Here, resistance values of resistors R<highlight><bold>7</bold></highlight> and R<highlight><bold>8</bold></highlight>, which are connected to emitters of the transistors Tr<highlight><bold>4</bold></highlight> and Tr<highlight><bold>5</bold></highlight>, respectively, are set to be the same, and therefore the first capacitor <highlight><bold>222</bold></highlight> is charged by the transistor Tr<highlight><bold>5</bold></highlight> with the same current value as the collector current in the transistor Tr<highlight><bold>4</bold></highlight>, i.e., of 300 &mgr;A. When the voltage of the first capacitor <highlight><bold>222</bold></highlight> increases to the voltage VT<highlight><bold>1</bold></highlight> set by using resistors R<highlight><bold>10</bold></highlight>, R<highlight><bold>11</bold></highlight>, and R<highlight><bold>12</bold></highlight> (the first threshold value: VT<highlight><bold>1</bold></highlight>&equals;Vp&middot;(R<highlight><bold>11</bold></highlight> &plus;R<highlight><bold>12</bold></highlight>)/(R<highlight><bold>10</bold></highlight>&plus;R<highlight><bold>11</bold></highlight>&plus;R<highlight><bold>12</bold></highlight>)), the output voltage from an operational amplifier OP<highlight><bold>2</bold></highlight> becomes a level closer to a power source voltage Vp (&ldquo;H&rdquo; level), so that a transistor Tr<highlight><bold>7</bold></highlight> is turned ON. When the transistor Tr<highlight><bold>7</bold></highlight> is turned ON, the charged voltage of the first capacitor <highlight><bold>222</bold></highlight> is discharged and decreased through a resistor R<highlight><bold>14</bold></highlight> and the transistor Tr<highlight><bold>7</bold></highlight>. When the charged voltage decreases to the voltage VT<highlight><bold>2</bold></highlight> set by using resistors R<highlight><bold>10</bold></highlight>, R<highlight><bold>11</bold></highlight>, R<highlight><bold>12</bold></highlight>, and R<highlight><bold>13</bold></highlight> (the second threshold value: VT<highlight><bold>2</bold></highlight>&equals;Vp&middot;(R<highlight><bold>11</bold></highlight>&plus;(R<highlight><bold>12</bold></highlight>//R<highlight><bold>13</bold></highlight>)/(R<highlight><bold>10</bold></highlight>&plus;R<highlight><bold>11</bold></highlight>&plus;(R<highlight><bold>12</bold></highlight>//R<highlight><bold>13</bold></highlight>)), the output voltage from the operational amplifier OP<highlight><bold>2</bold></highlight> is reversed and becomes a level closer to the ground potential (&ldquo;L&rdquo; level), so that the transistor Tr<highlight><bold>7</bold></highlight> is turned OFF and the discharge of the first capacitor <highlight><bold>222</bold></highlight> stops. </paragraph>
<paragraph id="P-0064" lvl="0"><number>&lsqb;0064&rsqb;</number> If the assembled battery <highlight><bold>20</bold></highlight> continues to discharge in this manner, the voltage of the first capacitor <highlight><bold>222</bold></highlight> varies like a sawtooth shape, where one pulse output from the operational amplifier OP<highlight><bold>2</bold></highlight> serves as a unit for a discharged quantity of electricity and a current value becomes a value corresponding to the number of pulses. </paragraph>
<paragraph id="P-0065" lvl="0"><number>&lsqb;0065&rsqb;</number> Here, since a very small change in voltage of the current detection resistor <highlight><bold>21</bold></highlight> is input into the operational amplifier OPI in the discharge current detection unit <highlight><bold>221</bold></highlight> and an operational amplifier OP<highlight><bold>3</bold></highlight> in the charge current detection unit <highlight><bold>224</bold></highlight>, a variation characteristic in the input offset voltage of the operational amplifiers gives an influence on the accuracy of the current value. However, according to this embodiment, the input offset voltages of the operational amplifiers OP<highlight><bold>1</bold></highlight> and OP<highlight><bold>3</bold></highlight> are corrected, whereby a current value can be calculated with high precision. The following describes this mechanism. </paragraph>
<paragraph id="P-0066" lvl="0"><number>&lsqb;0066&rsqb;</number> When the assembled battery <highlight><bold>20</bold></highlight> does not charge and discharge, for example, immediately after power-up of the vehicle, the microcomputer <highlight><bold>227</bold></highlight> obtains in advance the number of pulses output from the operation amplifier OP<highlight><bold>2</bold></highlight> in the pulse generation unit during discharge <highlight><bold>223</bold></highlight> or an operational amplifier OP<highlight><bold>4</bold></highlight> in the pulse generation unit during charge <highlight><bold>226</bold></highlight> during a constant time period, via the event counter <highlight><bold>2271</bold></highlight> and <highlight><bold>2272</bold></highlight>. The thus obtained number of pulses is subtracted from the number of pulses during the constant time period when charge/discharge is conducted while the vehicle is in motion, whereby an offset error can be eliminated from the current value. </paragraph>
<paragraph id="P-0067" lvl="0"><number>&lsqb;0067&rsqb;</number> Furthermore, the configuration shown in <cross-reference target="DRAWINGS">FIG. 4</cross-reference> can eliminate an offset error from the current value. </paragraph>
<paragraph id="P-0068" lvl="0"><number>&lsqb;0068&rsqb;</number> In the battery ECU <highlight><bold>22</bold></highlight> shown in <cross-reference target="DRAWINGS">FIG. 4, a</cross-reference> first switch <highlight><bold>230</bold></highlight>, a second switch <highlight><bold>231</bold></highlight> and a third switch <highlight><bold>232</bold></highlight> are provided. The first switch <highlight><bold>230</bold></highlight> has one end connected to a common connection between the resistor R<highlight><bold>2</bold></highlight> and a resistor R<highlight><bold>23</bold></highlight> in the charge current detection unit <highlight><bold>224</bold></highlight> and the other end connected to one end of the current detection resistor <highlight><bold>21</bold></highlight> via the transmission means <highlight><bold>28</bold></highlight>, the second switch <highlight><bold>231</bold></highlight> has one end connected to a common connection between the resistor R<highlight><bold>3</bold></highlight> and a resistor R<highlight><bold>22</bold></highlight> in the charge current detection unit <highlight><bold>224</bold></highlight> and the other end connected to the other end of the current detection resistor <highlight><bold>21</bold></highlight> via the transmission means <highlight><bold>28</bold></highlight>, and the third switch <highlight><bold>232</bold></highlight> is connected between the common connection of the resistors R<highlight><bold>2</bold></highlight> and R<highlight><bold>23</bold></highlight> and the common connection of the resistors R<highlight><bold>3</bold></highlight> and R<highlight><bold>22</bold></highlight>. </paragraph>
<paragraph id="P-0069" lvl="0"><number>&lsqb;0069&rsqb;</number> When the vehicle is in motion, under the control of the microcomputer <highlight><bold>227</bold></highlight>, the following procedure is conducted. First, the first switch <highlight><bold>230</bold></highlight> and the second switch <highlight><bold>231</bold></highlight> are turned OFF, and the third switch <highlight><bold>232</bold></highlight> is turned ON. In this state, a counted value of the pulses output from the event counters <highlight><bold>2271</bold></highlight> and <highlight><bold>2272</bold></highlight> at every one of a constant time period is stored. Next, thus stored counted value of the pulses is subtracted from a counted value of pulses output from the event counters <highlight><bold>2271</bold></highlight> and <highlight><bold>2272</bold></highlight> when the first switch <highlight><bold>230</bold></highlight> and the second switch <highlight><bold>231</bold></highlight> are turned ON and the third switch <highlight><bold>232</bold></highlight> is turned OFF. Thereby, while the vehicle is in motion, even when the components characteristics vary in accordance with a fluctuation in the environmental temperature, an offset error in the current value can be eliminated at any time. </paragraph>
<paragraph id="P-0070" lvl="0"><number>&lsqb;0070&rsqb;</number> Note here that, due to the problems of electric leakage, noises, and the like, the circuit at the side of the assembled battery <highlight><bold>20</bold></highlight> and the circuit at the side of an auxiliary battery that supplies electrical power to the battery ECU <highlight><bold>22</bold></highlight> should be isolated electrically (insulated) in some cases. In such cases, as shown in <cross-reference target="DRAWINGS">FIG. 5</cross-reference>, the circuit at the side of the pulse generation unit during discharge <highlight><bold>223</bold></highlight> and the pulse generation unit during charge <highlight><bold>226</bold></highlight> and the circuit at the side of the event counters <highlight><bold>2271</bold></highlight> and <highlight><bold>2272</bold></highlight> within the microcomputer <highlight><bold>227</bold></highlight> can be isolated electrically by using photocouplers Ph<highlight><bold>1</bold></highlight> and Ph<highlight><bold>2</bold></highlight> with respect to signals and by using a switching transformer <highlight><bold>2331</bold></highlight> in a switching power source circuit <highlight><bold>233</bold></highlight> with respect to the power source. </paragraph>
<paragraph id="P-0071" lvl="0"><number>&lsqb;0071&rsqb;</number> The following describes the configuration of the current detection resistor <highlight><bold>21</bold></highlight> according to this embodiment, with reference to <cross-reference target="DRAWINGS">FIG. 6</cross-reference>. </paragraph>
<paragraph id="P-0072" lvl="0"><number>&lsqb;0072&rsqb;</number> <cross-reference target="DRAWINGS">FIGS. 6A, 6B</cross-reference>, and <highlight><bold>6</bold></highlight>C are schematic external views showing the assembly process of the current detection resistor <highlight><bold>21</bold></highlight>. First, as shown in <cross-reference target="DRAWINGS">FIG. 6A, a</cross-reference> thin alloy plate <highlight><bold>210</bold></highlight> subjected to a resistance value trimming by forming a notch portion <highlight><bold>2101</bold></highlight> is fixed and mounted onto a pair of metal plates, each of which has a mounting hole <highlight><bold>2111</bold></highlight> or <highlight><bold>2121</bold></highlight>, for example by brazing. It is preferable that the alloy plate <highlight><bold>210</bold></highlight> is made of Cu&mdash;Mn&mdash;Ni alloy (Cu: 12%, Mn: 2%), Cu&mdash;Ni alloy (Cu: 40 to 45%), and the like, which have a high volume resistivity and a low temperature coefficient of resistance. Also, it is preferable that the pair of metal plates having the mounting holes <highlight><bold>2111</bold></highlight> and <highlight><bold>2121</bold></highlight> is a nickel plate, a nickel-plated copper plate, and the like. Next, molded resin <highlight><bold>213</bold></highlight> is formed so as to seal the alloy plate <highlight><bold>210</bold></highlight> (<cross-reference target="DRAWINGS">FIG. 6B</cross-reference>). Finally, ring terminals <highlight><bold>282</bold></highlight> and <highlight><bold>283</bold></highlight> are crimped to ends of a pair of wiring harnesses <highlight><bold>284</bold></highlight> and <highlight><bold>285</bold></highlight>, respectively, and the ring terminals <highlight><bold>282</bold></highlight> and <highlight><bold>283</bold></highlight> are spot-welded to the mounting holes <highlight><bold>2111</bold></highlight> and <highlight><bold>2121</bold></highlight> of the metal plates <highlight><bold>211</bold></highlight> and <highlight><bold>212</bold></highlight>, respectively (<cross-reference target="DRAWINGS">FIG. 6C</cross-reference>). A connector is attached to the other ends of the pair of wiring harnesses <highlight><bold>284</bold></highlight> and <highlight><bold>285</bold></highlight>, whereby these wiring harnesses are connected to the battery ECU <highlight><bold>22</bold></highlight>. As a result, a current detection resistor having a low resistance value with high precision can be realized in a simple configuration. </paragraph>
<paragraph id="P-0073" lvl="0"><number>&lsqb;0073&rsqb;</number> <cross-reference target="DRAWINGS">FIGS. 7A and 7B</cross-reference> are schematic external views showing a modified example of the assembly process of the current detection resistor <highlight><bold>21</bold></highlight>. As shown in <cross-reference target="DRAWINGS">FIG. 7</cross-reference>A, wiring harnesses may be clamped and attached to the alloy plate <highlight><bold>210</bold></highlight> directly, and as shown in <cross-reference target="DRAWINGS">FIG. 7</cross-reference>B, molded resin may be formed over the wiring harnesses. </paragraph>
<paragraph id="P-0074" lvl="0"><number>&lsqb;0074&rsqb;</number> In this embodiment, the current value is calculated as the counted number of pulses from the voltage generated across the current detection resistor <highlight><bold>21</bold></highlight> at the time of charge/discharge by the assembled battery <highlight><bold>20</bold></highlight> in the circuit having the above-stated configuration. However, as long as the circuit is configured as a voltage-frequency conversion circuit by which a voltage level signal can be converted into a pulse frequency signal, circuits with other configurations may be used. </paragraph>
<paragraph id="P-0075" lvl="0"><number>&lsqb;0075&rsqb;</number> In addition, in this embodiment, the event counters <highlight><bold>2271</bold></highlight> and <highlight><bold>2272</bold></highlight> included within the microcomputer <highlight><bold>227</bold></highlight> are used for calculating the current value as the counted number of pulses. However, as long as the means can count the number of pulses (pulse frequency), means with other configurations may be used. </paragraph>
<paragraph id="P-0076" lvl="0"><number>&lsqb;0076&rsqb;</number> As stated above, according to the present invention, a remarkable effect of realizing a battery power source device provided with a system capable of detecting a charge/discharge current flowing through a secondary battery mounted on an electric vehicle, an uninterruptible power supply system, a backup power source device, and the like, at low cost, with high reliability, and with high precision can be obtained. </paragraph>
<paragraph id="P-0077" lvl="0"><number>&lsqb;0077&rsqb;</number> The invention may be embodied in other forms without departing from the spirit or essential characteristics thereof. The embodiments disclosed in this application are to be considered in all respects as illustrative and not limiting. The scope of the invention is indicated by the appended claims rather than by the foregoing description, and all changes which come within the meaning and range of equivalency of the claims are intended to be embraced therein. </paragraph>
</section>
</detailed-description>
</subdoc-description>
<subdoc-claims>
<heading lvl="1">What is claimed is: </heading>
<claim id="CLM-00001">
<claim-text><highlight><bold>1</bold></highlight>. A battery power source device to which electrical power is supplied from an assembled battery including a combination of a plurality of single cells or unit cells, each of which is a secondary battery, comprising: 
<claim-text>a current detection resistor connected to the assembled battery in series; </claim-text>
<claim-text>transmission means for transmitting a voltage signal generated across the current detection resistor; and </claim-text>
<claim-text>a control device separated from the assembled battery, the current detection resistor, and the transmission means, wherein the control device comprises: 
<claim-text>a discharge current detection unit that receives the voltage signal transmitted via the transmission means and outputs a current signal in proportion to a discharge current flowing through the current detection resistor at the time of discharge from the assembled battery; </claim-text>
<claim-text>a first capacitor that totals current signals output from the discharge current detection unit; </claim-text>
<claim-text>a pulse generation unit during discharge that, when a voltage of the first capacitor increases to a first threshold value, reverses an output signal and makes the first capacitor discharge, and when the voltage of the first capacitor decreases to a second threshold value, reverses the output signal again to generate a pulse and stops the first capacitor discharging; </claim-text>
<claim-text>a charge current detection unit that receives the voltage signal transmitted via the transmission means and outputs a current signal in proportion to a charge current flowing through the current detection resistor at the time of charge of the assembled battery; </claim-text>
<claim-text>a second capacitor that totals current signals output from the charge current detection unit; </claim-text>
<claim-text>a pulse generation unit during charge that, when a voltage of the second capacitor increases to a third threshold value, reverses an output signal and makes the second capacitor discharge, and when the voltage of the second capacitor decreases to a fourth threshold value, reverses the output signal again to generate a pulse and stops the second capacitor discharging; and </claim-text>
<claim-text>a current detection unit that counts the number of pulses output from the pulse generation unit during discharge and the pulse generation unit during charge and calculates a current flowing through the assembled battery at the time of discharge and charge using the counted number of pulses. </claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002">
<claim-text><highlight><bold>2</bold></highlight>. The battery power source device according to <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, 
<claim-text>wherein the current detection unit included in the control device counts in advance the number of pulses output from the pulse generation unit during discharge and the pulse generation unit during charge immediately after power-up of the battery power source device, the counted number of pulses in advance is subtracted from the number of pulses counted during operation of the battery power source device, and a current flowing through the assembled battery is calculated using a result of the subtraction. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00003">
<claim-text><highlight><bold>3</bold></highlight>. The battery power source device according to <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, 
<claim-text>wherein each of the discharge current detection unit and the charge current detection unit further comprises: 
<claim-text>a differential operation circuit having a first input terminal and a second input terminal; </claim-text>
<claim-text>a first resistor having one end connected to the first input terminal of the differential operation circuit; </claim-text>
<claim-text>a second resistor having one end connected to the second input terminal of the differential operation circuit; </claim-text>
<claim-text>a first constant current circuit having an output end connected to the first input terminal of the differential operation circuit; </claim-text>
<claim-text>a second constant circuit having an output end connected to the second input terminal of the differential operation circuit; </claim-text>
<claim-text>a first current source that operates in accordance with an output signal from the differential operation circuit and functions so that a voltage level at the first input terminal of the differential operation circuit becomes equal to a voltage level at the second input terminal; and </claim-text>
<claim-text>a second current source that operates in accordance with the output signal from the differential operation circuit, has a current mirror relationship with the first current source, and outputs a current signal in proportion to a current flowing through the current detection resistor to the outside, </claim-text>
</claim-text>
<claim-text>wherein the control device further comprises: 
<claim-text>a first switch having one end connected to the other end of the first resistor and the other end electrically connected to one end of the current detection resistor via the transmission means; </claim-text>
<claim-text>a second switch having one end connected to the other end of the second resistor and the other end electrically connected to the other end of the current detection resistor via the transmission means; and </claim-text>
<claim-text>a third switch connected between the other ends of the first resistor and the second resistor. </claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00004">
<claim-text><highlight><bold>4</bold></highlight>. The battery power source device according to <dependent-claim-reference depends_on="CLM-00003">claim 3</dependent-claim-reference>, 
<claim-text>wherein the control device further comprises an offset correction unit that makes a correction to the current in accordance with a result obtained by subtracting a first counted number of pulses from a second counted number of pulses, where the first counted number of pulses is output from the pulse generation unit during discharge and the pulse generation unit during charge for a constant time period in a state where the first switch and the second switch are open and the third switch is closed during operation of the battery power source device, and the second counted number of pulses is output from the pulse generation unit during discharge and the pulse generation unit during charge in a state where the first switch and the second switch are closed and the third switch is opened during operation of the battery power source device. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00005">
<claim-text><highlight><bold>5</bold></highlight>. The battery power source device according to <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, 
<claim-text>wherein in the control device a side of the pulse generation unit during discharge and the pulse generation unit during charge and a side of the current detection unit are isolated electrically. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00006">
<claim-text><highlight><bold>6</bold></highlight>. The battery power source device according to <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, 
<claim-text>wherein the current detection resistor comprises: 
<claim-text>an alloy plate subjected to a resistance value trimming; </claim-text>
<claim-text>a pair of metal plates on which both ends of the alloy plate are fixed and mounted and to which one end of the transmission means is fixed; and </claim-text>
<claim-text>molded resin for sealing the alloy plate. </claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00007">
<claim-text><highlight><bold>7</bold></highlight>. The battery power source device according to <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein 
<claim-text>the assembled battery is configured to be separated into a plurality of blocks, </claim-text>
<claim-text>the battery power source device further comprises a current control unit that controls a charge/discharge current with respect to the assembled battery; and </claim-text>
<claim-text>the control device further comprises: a voltage detection unit that detects a battery voltage at each of the plurality of blocks; and a voltage comparison unit that compares battery voltages obtained from the voltage detection unit, </claim-text>
<claim-text>wherein 
<claim-text>as a result of the comparison by the voltage comparison unit, if a difference in voltage is generated among the battery voltages at the plurality of blocks, the current control unit controls so as to decrease a current flowing through the current detection resistor.</claim-text>
</claim-text>
</claim-text>
</claim>
</subdoc-claims>
<subdoc-drawings id="DRAWINGS">
<heading lvl="0" align="CENTER">Drawings</heading>
<representative-figure>1</representative-figure>
<figure id="figure-D00000">
<image id="EMI-D00000" file="US20030001544A1-20030102-D00000.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00001">
<image id="EMI-D00001" file="US20030001544A1-20030102-D00001.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00002">
<image id="EMI-D00002" file="US20030001544A1-20030102-D00002.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00003">
<image id="EMI-D00003" file="US20030001544A1-20030102-D00003.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00004">
<image id="EMI-D00004" file="US20030001544A1-20030102-D00004.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00005">
<image id="EMI-D00005" file="US20030001544A1-20030102-D00005.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00006">
<image id="EMI-D00006" file="US20030001544A1-20030102-D00006.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00007">
<image id="EMI-D00007" file="US20030001544A1-20030102-D00007.TIF" imf="TIFF" ti="DR"/>
</figure>
</subdoc-drawings>
</patent-application-publication>
