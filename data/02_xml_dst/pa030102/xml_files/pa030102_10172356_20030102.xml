<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE patent-application-publication SYSTEM "pap-v16-2002-01-01.dtd" [
<!ENTITY US20030002864A1-20030102-D00000.TIF SYSTEM "US20030002864A1-20030102-D00000.TIF" NDATA TIF>
<!ENTITY US20030002864A1-20030102-D00001.TIF SYSTEM "US20030002864A1-20030102-D00001.TIF" NDATA TIF>
<!ENTITY US20030002864A1-20030102-D00002.TIF SYSTEM "US20030002864A1-20030102-D00002.TIF" NDATA TIF>
<!ENTITY US20030002864A1-20030102-D00003.TIF SYSTEM "US20030002864A1-20030102-D00003.TIF" NDATA TIF>
<!ENTITY US20030002864A1-20030102-D00004.TIF SYSTEM "US20030002864A1-20030102-D00004.TIF" NDATA TIF>
]>
<patent-application-publication>
<subdoc-bibliographic-information>
<document-id>
<doc-number>20030002864</doc-number>
<kind-code>A1</kind-code>
<document-date>20030102</document-date>
</document-id>
<publication-filing-type>new</publication-filing-type>
<domestic-filing-data>
<application-number>
<doc-number>10172356</doc-number>
</application-number>
<application-number-series-code>10</application-number-series-code>
<filing-date>20020614</filing-date>
</domestic-filing-data>
<foreign-priority-data>
<priority-application-number>
<doc-number>0107825</doc-number>
</priority-application-number>
<filing-date>20010615</filing-date>
<country-code>FR</country-code>
</foreign-priority-data>
<technical-information>
<classification-ipc>
<classification-ipc-primary>
<ipc>H04N005/781</ipc>
</classification-ipc-primary>
<classification-ipc-edition>07</classification-ipc-edition>
</classification-ipc>
<classification-us>
<classification-us-primary>
<uspc>
<class>386</class>
<subclass>125000</subclass>
</uspc>
</classification-us-primary>
<classification-us-secondary>
<uspc>
<class>386</class>
<subclass>126000</subclass>
</uspc>
</classification-us-secondary>
</classification-us>
<title-of-invention>Process and device for managing the memory space of a hard disk, in particular for a receiver of satellite digital television signals</title-of-invention>
</technical-information>
<inventors>
<first-named-inventor>
<name>
<given-name>Gilles</given-name>
<family-name>Mollie</family-name>
</name>
<residence>
<residence-non-us>
<city>Bresson</city>
<country-code>FR</country-code>
</residence-non-us>
</residence>
<authority-applicant>INV</authority-applicant>
</first-named-inventor>
<inventor>
<name>
<given-name>Vincent</given-name>
<family-name>de Schuyteneer</family-name>
</name>
<residence>
<residence-non-us>
<city>Grenoble</city>
<country-code>FR</country-code>
</residence-non-us>
</residence>
<authority-applicant>INV</authority-applicant>
</inventor>
</inventors>
<assignee>
<organization-name>STMicroelectronics S.A.</organization-name>
<address>
<city>Montrouge</city>
<country>
<country-code>FR</country-code>
</country>
</address>
<assignee-type>03</assignee-type>
</assignee>
<correspondence-address>
<name-1>ALLEN, DYER, DOPPELT, MILBRATH &amp; GILCHRIST P.A.</name-1>
<name-2></name-2>
<address>
<address-1>1401 CITRUS CENTER 255 SOUTH ORANGE AVENUE</address-1>
<address-2>P.O. BOX 3791</address-2>
<city>ORLANDO</city>
<state>FL</state>
<postalcode>32802-3791</postalcode>
<country>
<country-code>US</country-code>
</country>
</address>
</correspondence-address>
</subdoc-bibliographic-information>
<subdoc-abstract>
<paragraph id="A-0001" lvl="0">Several audio/video streams are recorded in an interleaved manner on logical tracks of variable sizes. These audio/video streams are selected on the basis of an allocation table contained in a random access memory, and which describes the state of occupancy of the logical tracks. The logical tracks include elementary storage portions formed of integer numbers of sectors of the disk. A chaining of the various portions is performed during recording using the index numbers of the preceding and succeeding portions, as well as indications of unknown relationships which will be updated subsequently. </paragraph>
</subdoc-abstract>
<subdoc-description>
<summary-of-invention>
<section>
<heading lvl="1">FIELD OF THE INVENTION </heading>
<paragraph id="P-0001" lvl="0"><number>&lsqb;0001&rsqb;</number> The present invention relates to the management of memory space on a hard disk, and in particular, to a hard disk for storing audio/video streams, such as those received by a digital television satellite receiver, for example. </paragraph>
</section>
<section>
<heading lvl="1">BACKGROUND OF THE INVENTION </heading>
<paragraph id="P-0002" lvl="0"><number>&lsqb;0002&rsqb;</number> In digital video, the requirement for the storage of audio/video data is considerable. Hence, a hard disk is preferably used to store the recordings. A hard disk is an element which exhibits a very good storage quantity/price ratio. At present, the file operating systems which manage the memory space of hard disks have been developed for work stations, that is, they are dedicated to a pure computing application. </paragraph>
<paragraph id="P-0003" lvl="0"><number>&lsqb;0003&rsqb;</number> To store video, provisions are then made to allocate specific resources (fixed spaces) on the hard disk in the form of several independent blocks making it possible to store and/or to read out several audio/video data streams. Such an organization has drawbacks. Specifically, if one wishes to record several video data streams simultaneously, one must do so in distinct independent blocks, thus making it necessary to perform to and from displacements between the independent blocks. These to and from displacements are manifested as frequent displacements of the reading/recording head of the disk. </paragraph>
<paragraph id="P-0004" lvl="0"><number>&lsqb;0004&rsqb;</number> Also, during these displacements, no activity is possible on the disk. This reduces the possible bit rate of recording, and reduces the performance of the disk since the bandwidth decreases. The same problem arises when one wishes to simultaneously record and read video data streams in and on the basis of independent blocks. </paragraph>
</section>
<section>
<heading lvl="1">SUMMARY OF THE INVENTION </heading>
<paragraph id="P-0005" lvl="0"><number>&lsqb;0005&rsqb;</number> In view of the foregoing background, an objective of the present invention is to limit the displacement of the disk head, and in particular, during the simultaneous recording of several audio/video data streams, and also during the recording of several audio/video streams and the simultaneous reading of another video stream already recorded on the disk. </paragraph>
<paragraph id="P-0006" lvl="0"><number>&lsqb;0006&rsqb;</number> Another object of the present invention is to provide a good robustness with regards to the detection of losses of the supply of the device incorporating the hard disk. </paragraph>
<paragraph id="P-0007" lvl="0"><number>&lsqb;0007&rsqb;</number> These and other objects advantages and features in accordance with the present invention are provided by a process for managing the memory space of a hard disk incorporated into a computing device, such as a digital television satellite receiver, for example, and the computing device comprises a random access memory (RAM) for receiving several audio/video data streams. </paragraph>
<paragraph id="P-0008" lvl="0"><number>&lsqb;0008&rsqb;</number> According to one mode of implementation, the process comprises, in particular, a formatting phase in which at least a part of the memory space of the hard disk is divided into a useful space and a control space. The useful space is subdivided into several adjacent areas, each composed of contiguous logical tracks of equal storage capacity. </paragraph>
<paragraph id="P-0009" lvl="0"><number>&lsqb;0009&rsqb;</number> The logical tracks are different from the physical tracks actually existing on the hard disk. Specifically, neither the actual number of areas of a hard disk nor the number of physical tracks are generally known. The invention therefore makes provision, in the formatting phase, to partition the memory space of the hard disk or at the very least a part of this memory space, into a set of contiguous logical tracks which will resemble the actual tracks, but which will offer the most constant possible reading or writing times for all the logical tracks. This is why, according to the invention, the logical tracks are of variable size. </paragraph>
<paragraph id="P-0010" lvl="0"><number>&lsqb;0010&rsqb;</number> More precisely, the values of the respective storage capacities of the logical tracks decrease continuously from a maximum value corresponding to the storage capacity of the logical tracks of the area at the periphery of the disk, down to a minimum value corresponding to the storage capacity of the logical tracks of the area at the center of the disk. The ratio of the minimum value (minimum size of a logical track) to the maximum value (maximum size of a logical track) corresponds to the ratio of the size of a physical track at the center of the disk to that of a track at the periphery of the disk. </paragraph>
<paragraph id="P-0011" lvl="0"><number>&lsqb;0011&rsqb;</number> As will be seen in greater detail below, a logical track is an atomic element for access to audio/video information. Also, as will be seen in greater detail below, the process according to the invention uses, for example, cache memories to store on-the-fly the various audio/video streams received. Hence, one approach for fixing the storage capacity of a logical track at the periphery of the disk, that is, a logical track which exhibits the largest storage capacity, includes rendering this storage capacity equal to that of the cache memory available. </paragraph>
<paragraph id="P-0012" lvl="0"><number>&lsqb;0012&rsqb;</number> The control space comprises, in particular, an allocation table containing indications regarding the state of occupancy of the logical tracks. Thus, by way of indication, a logical track can be declared completely free while exhibiting completely free neighbors. The track can also be declared partially occupied (by files or by directories, for example) or then be declared full, that is, for example, occupied completely by audio/video information. </paragraph>
<paragraph id="P-0013" lvl="0"><number>&lsqb;0013&rsqb;</number> In addition to the formatting phase, the process of the invention comprises, in particular, a duplication phase in which, during each deployment of the device, the content of the allocation table is duplicated from the control space into the random access memory. </paragraph>
<paragraph id="P-0014" lvl="0"><number>&lsqb;0014&rsqb;</number> According to one mode of implementation of the invention, the allocation table is in a file, called the persistent file, of the control space which comprises, in addition to this allocation table, the start address and the end address of each logical track or, as a variation, the address of the area and the number and the size of the tracks of the area. The size of the persistent file is particularly restricted relative to the size of the useful space of the hard disk. </paragraph>
<paragraph id="P-0015" lvl="0"><number>&lsqb;0015&rsqb;</number> Thus, by way of indication, the invention makes it possible to obtain a ratio of 1 byte in the persistent file for one 1 megabyte in the useful storage space of the disk. Such a ratio is therefore fully compatible with a duplication of the content of the allocation table from the control space (persistent file) in the random access memory. </paragraph>
<paragraph id="P-0016" lvl="0"><number>&lsqb;0016&rsqb;</number> The process according to the invention also comprises a writing phase in one mode of implementation of which during the reception of the audio/video data streams: </paragraph>
<paragraph id="P-0017" lvl="2"><number>&lsqb;0017&rsqb;</number> a) a completely free logical track is selected on the basis of the allocation table contained in the random access memory, preferably a completely free logical track at the start of a succession of a predetermined number of contiguous and completely free logical tracks, for example, 5 contiguous and completely free logical tracks; </paragraph>
<paragraph id="P-0018" lvl="2"><number>&lsqb;0018&rsqb;</number> b) the audio/video streams are stored on-the-fly in different cache memories, at the rate of one cache memory per stream; </paragraph>
<paragraph id="P-0019" lvl="2"><number>&lsqb;0019&rsqb;</number> c) when one of the cache memories comprises a data set whose size corresponds to the storage capacity of the selected logical track, the content of the cache memory is stored on the logical track and the content of the allocation table in the random access memory is updated; </paragraph>
<paragraph id="P-0020" lvl="2"><number>&lsqb;0020&rsqb;</number> d) the next completely free logical track which follows that previously selected is selected on the basis of the allocation table contained in the random access memory; and </paragraph>
<paragraph id="P-0021" lvl="2"><number>&lsqb;0021&rsqb;</number> e) steps b) to d) are repeated until the reception of an end of a writing signal. This end of the writing signal can be a signal resulting from the user wanting to stop the recording of the audio/video transmission, or else a signal signifying the end of storage on the disk of all the video streams currently being recorded. </paragraph>
<paragraph id="P-0022" lvl="0"><number>&lsqb;0022&rsqb;</number> Moreover, the final logical track allocated to a stream may be only partially written by this stream. Specifically, if the last part of the stream to be stored has a smaller size than the logical track finally selected, this final part of the stream will occupy only a part of the logical track. </paragraph>
<paragraph id="P-0023" lvl="0"><number>&lsqb;0023&rsqb;</number> The process according to the invention also comprises a chaining phase in which a chain of relationships between the various logical tracks assigned to the same stream is formulated. </paragraph>
<paragraph id="P-0024" lvl="0"><number>&lsqb;0024&rsqb;</number> The process according to the invention also comprises an updating phase in which the content of the allocation table in the control space of the disk is updated on the basis of the allocation table contained in the random access memory. Stated otherwise, in this phase, the content of the allocation table is copied from the random access memory to that contained in the persistent file of the control space. This updating phase can be performed, for example, on completion of the writing on the disk of the entire audio/video stream files. </paragraph>
<paragraph id="P-0025" lvl="0"><number>&lsqb;0025&rsqb;</number> The process according to the invention thus makes it possible to record in an interleaved manner the various audio/video streams on logical tracks, and to do so by selecting logical tracks of the disk successively and in the same direction. This selection and this storage in the same direction is manifested by a displacement of the head of the disk always in the same direction without it being necessary to perform to and from displacements, with the objective of limiting the number of displacements of the write head. Additionally, selecting the logical tracks on the basis of the allocation table which has been duplicated in the random access memory also avoids the to and from displacements of the disk which would have been required if it had been necessary to select the tracks on the basis of the content of the allocation table contained in the persistent file situated in the control space of the disk. </paragraph>
<paragraph id="P-0026" lvl="0"><number>&lsqb;0026&rsqb;</number> According to one mode of implementation of the process according to the invention, on completion of the formatting phase, each logical track comprises a useful area subdivided into several adjacent elementary portions (or clusters), and a control area comprising for each elementary portion a first indication of relationship and a second indication of relationship. For simplification purposes, an elementary portion will in the subsequent description be referred to by the term cluster. </paragraph>
<paragraph id="P-0027" lvl="0"><number>&lsqb;0027&rsqb;</number> The chaining phase in which the chain of relationships between the various logical tracks assigned to the same stream is formulated then comprises, in such a mode of implementation, the updating, during the storage of the data set on a selected logical track, of the first indication of relationship of each elementary portion of the track, with a start of file indication or with the index number of the preceding elementary portion. Of course, the start of file indication will relate only to the first cluster of the first logical track selected receiving the first data of the stream. </paragraph>
<paragraph id="P-0028" lvl="0"><number>&lsqb;0028&rsqb;</number> The chaining phase also comprises the updating, during this storage of the data set on this selected logical track, of the second indication of relationship of each elementary portion of the track except for the last, with the index number of the next elementary portion or with an end of file indication or with a non-occupancy indication. </paragraph>
<paragraph id="P-0029" lvl="0"><number>&lsqb;0029&rsqb;</number> Specifically where an audio/video data set contained in a cache memory has a size equal to that of a completely free logical track, and when this set is transferred to the logical track, the relationship of each cluster of the logical track (except for the last) towards the next cluster of this same logical track is known. This second indication of relationship will then, for example, be the absolute index number of the cluster on the disk. When the data set which is transferred to the logical track is representative of the end of the stream, one of the clusters of the track may be the last one written. In this case, the second indication of relationship is an end of file indication. The two indications of relationships of the following clusters are then a non-occupancy indication. </paragraph>
<paragraph id="P-0030" lvl="0"><number>&lsqb;0030&rsqb;</number> The updating of the second indication of relationship of the last cluster of the track can also be performed where appropriate with an end of file indication or a non-occupancy indication. When the stream is still being recorded and when it is necessary to use other logical tracks to store it, one does not know a priori which index number of the next logical track will be selected, and when audio/video data are stored in the last cluster of the logical track. Under these conditions, the second indication of relationship of the last cluster of the logical track currently selected will be updated with an indication of an unknown relationship. </paragraph>
<paragraph id="P-0031" lvl="0"><number>&lsqb;0031&rsqb;</number> Also, the updating of all the unknown relationships will be performed subsequently, and always in such a way as to avoid the to and from displacements of the read head of the disk. This updating of unknown relationships can be performed, for example, on completion of a writing on the disk of the entire audio/video stream files. This is performed by backtracking through the logical tracks assigned to the same stream, and the clusters of these logical tracks using the first indications of relationships which contain the indications towards the preceding clusters. </paragraph>
<paragraph id="P-0032" lvl="0"><number>&lsqb;0032&rsqb;</number> This updating can also be performed possibly under time sharing with the writing of the streams on the disk, especially if the bit rate of the information received is compatible with an additional task such as this. To be more robust with regards to any writing errors, the control area of each logical track is advantageously formed of two identical parts respectively disposed at the two ends of the logical track. </paragraph>
<paragraph id="P-0033" lvl="0"><number>&lsqb;0033&rsqb;</number> According to one mode of implementation of the invention, the control space of the hard disk comprises a global dating word, while the control area of each logical track comprises a local dating word. In the duplication phase, the content of the global dating word is also copied into the random access memory. In the writing phase, the value of the global dating word contained in the random access memory is incremented with each write on the disk, and with each write to a logical track, the content of the global dating word is copied into the local dating word of the control area of the relevant logical track. </paragraph>
<paragraph id="P-0034" lvl="0"><number>&lsqb;0034&rsqb;</number> The comparison of the value of the global dating word with the values of the local dating words yields an indication regarding a possible earlier occurrence of a loss of supply of the device. Specifically, in the case of such a loss of supply, the global dating word contained in the random access memory will be cancelled out and will consequently become less than the values of certain local dating words, which represents an anomaly since the value of this global dating word must always be greater than the values of all the local dating words. Such a mode of implementation thus confers, in an especially simple manner, robustness of the device with regards to the detection of the losses of supply. </paragraph>
<paragraph id="P-0035" lvl="0"><number>&lsqb;0035&rsqb;</number> The subject of the invention is also a computing device comprising a random access memory able to receive several audio/video data streams, a hard disk and processing means (CPU) comprising, in one embodiment: </paragraph>
<paragraph id="P-0036" lvl="2"><number>&lsqb;0036&rsqb;</number> formatting means able to divide at least one part of the memory space of the disk into </paragraph>
<paragraph id="P-0037" lvl="3"><number>&lsqb;0037&rsqb;</number> a useful space itself subdivided into several adjacent areas each containing several contiguous logical tracks all having the same storage capacity. The values of the respective storage capacities of the logical tracks decrease continuously from a maximum value corresponding to the storage capacity of the logical tracks of the area at the periphery of the disk, down to a minimum value corresponding to the storage capacity of the logical tracks of the area at the center of the disk. The ratio of the minimum value to the maximum value corresponds to the ratio of the size of a physical track at the center of the disk to that of a track situated at the periphery of the disk; and </paragraph>
<paragraph id="P-0038" lvl="3"><number>&lsqb;0038&rsqb;</number> a control space comprising an allocation table containing indications regarding the state of occupancy of the logical tracks; </paragraph>
<paragraph id="P-0039" lvl="2"><number>&lsqb;0039&rsqb;</number> duplication means able during each deployment of the device, to duplicate the content of the allocation table from the control space into the random access memory; </paragraph>
<paragraph id="P-0040" lvl="2"><number>&lsqb;0040&rsqb;</number> writing means able during the reception of the video data streams; </paragraph>
<paragraph id="P-0041" lvl="3"><number>&lsqb;0041&rsqb;</number> f) to select on the basis of the allocation table contained in the random access memory, a completely free logical track; </paragraph>
<paragraph id="P-0042" lvl="3"><number>&lsqb;0042&rsqb;</number> g) to store respectively on-the-fly the streams in different cache memories; </paragraph>
<paragraph id="P-0043" lvl="3"><number>&lsqb;0043&rsqb;</number> h) when one of the cache memories comprises a data set whose size corresponds to the storage capacity of the selected logical track, to store the content of the cache memory on the logical track and to update the content of the allocation table in the random access memory; </paragraph>
<paragraph id="P-0044" lvl="3"><number>&lsqb;0044&rsqb;</number> i) to select on the basis of the allocation table, the next completely free logical track which follows that previously selected; </paragraph>
<paragraph id="P-0045" lvl="3"><number>&lsqb;0045&rsqb;</number> j) to re-execute the operations f) to i) until the reception of an end of writing signal. The final logical track is allocated to a stream possibly being only partially written by this stream; </paragraph>
<paragraph id="P-0046" lvl="2"><number>&lsqb;0046&rsqb;</number> chaining means able to formulate a chain of relationships between the various logical tracks assigned to the same stream; and </paragraph>
<paragraph id="P-0047" lvl="2"><number>&lsqb;0047&rsqb;</number> updating means able to update the content of the allocation table in the control space of the disk on the basis of the allocation table contained in the random access memory. </paragraph>
<paragraph id="P-0048" lvl="0"><number>&lsqb;0048&rsqb;</number> According to one embodiment of the invention, the formatting means are able to split each logical track into a useful area subdivided into several adjacent elementary portions, and into a control area comprising for each elementary portion a first indication of relationship and a second indication of relationship. The chaining means are then able </paragraph>
<paragraph id="P-0049" lvl="2"><number>&lsqb;0049&rsqb;</number> during the storage of a data set on a selected logical track; </paragraph>
<paragraph id="P-0050" lvl="3"><number>&lsqb;0050&rsqb;</number> to update the first indication of relationship of each elementary portion of the track, with a start of file indication or with the index number of the preceding elementary portion; </paragraph>
<paragraph id="P-0051" lvl="3"><number>&lsqb;0051&rsqb;</number> to update the second indication of relationship of each elementary portion of the track except for the last, with the index number of the next elementary portion or with an end of file indication, or with a non-occupancy indication; </paragraph>
<paragraph id="P-0052" lvl="3"><number>&lsqb;0052&rsqb;</number> to update the second indication of relationship of the last elementary portion of the track with an end of file indication or with an indication of unknown relationship or with a non-occupancy indication; and </paragraph>
<paragraph id="P-0053" lvl="3"><number>&lsqb;0053&rsqb;</number> to update the unknown relationships subsequently. </paragraph>
<paragraph id="P-0054" lvl="0"><number>&lsqb;0054&rsqb;</number> The subject of the invention is also a receiver of satellite digital television signals including a device such as that defined above.</paragraph>
</section>
</summary-of-invention>
<brief-description-of-drawings>
<section>
<heading lvl="1">BRIEF DESCRIPTION OF THE DRAWINGS </heading>
<paragraph id="P-0055" lvl="0"><number>&lsqb;0055&rsqb;</number> Other advantages and characteristics of the invention will become apparent when examining the detailed description of a wholly non-limiting embodiment and mode of implementation, and the appended drawings in which: </paragraph>
<paragraph id="P-0056" lvl="0"><number>&lsqb;0056&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1</cross-reference> diagrammatically illustrates an architecture of a device according to the present invention. </paragraph>
<paragraph id="P-0057" lvl="0"><number>&lsqb;0057&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 2</cross-reference> diagrammatically illustrates a subdivision of the memory space of the hard disk into a control space and into a useful space according to the present invention. </paragraph>
<paragraph id="P-0058" lvl="0"><number>&lsqb;0058&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3</cross-reference> diagrammatically illustrates the subdivision of the disk into logical tracks according to the present invention. </paragraph>
<paragraph id="P-0059" lvl="0"><number>&lsqb;0059&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 4</cross-reference> diagrammatically illustrates the structure of a logical track according to the present invention. </paragraph>
<paragraph id="P-0060" lvl="0"><number>&lsqb;0060&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 5</cross-reference> diagrammatically illustrates the two indications of relationships relating to each elementary portion (cluster) of a logical track according to the present invention. </paragraph>
<paragraph id="P-0061" lvl="0"><number>&lsqb;0061&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 6</cross-reference> diagrammatically illustrates a local dating word contained in the control area of a logical track according to the present invention. </paragraph>
<paragraph id="P-0062" lvl="0"><number>&lsqb;0062&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 7</cross-reference> diagrammatically illustrates an implementation of the process according to the present invention.</paragraph>
</section>
</brief-description-of-drawings>
<detailed-description>
<section>
<heading lvl="1">DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENTS </heading>
<paragraph id="P-0063" lvl="0"><number>&lsqb;0063&rsqb;</number> The present invention will now be described more fully hereinafter with reference to the accompanying drawings, in which preferred embodiments of the invention are shown. This invention may, however, be embodied in many different forms and should not be construed as limited to the embodiments set forth herein. Rather, these embodiments are provided so that this disclosure will be thorough and complete, and will fully convey the scope of the invention to those skilled in the art. Like numbers refer to like elements throughout, and prime and double prime notation are used to indicate similar elements in alternative embodiments. </paragraph>
<paragraph id="P-0064" lvl="0"><number>&lsqb;0064&rsqb;</number> In <cross-reference target="DRAWINGS">FIG. 1</cross-reference>, the reference STB designates a receiver of satellite digital television signals. This receiver conventionally comprises a tuner TN linked to an antenna to receive the television signals. The tuner is followed by a direct memory access block DMA which, at the rate of the interruptions, delivers audio/video data packets to a random access memory MM. A microprocessor CPU, which incorporates processing means of the invention via software, manages the random access memory MM as well as a hard disk HDD. </paragraph>
<paragraph id="P-0065" lvl="0"><number>&lsqb;0065&rsqb;</number> The microprocessor CPU delivers the audio/video streams to a decoder DCD operating according to the MPEG2 standard, for example. The output of the decoder DCD is linked to a television set. The random access memory MM comprises several cache memories MC<highlight><bold>1</bold></highlight>, MC<highlight><bold>2</bold></highlight>, MC<highlight><bold>3</bold></highlight> capable of each storing an audio/video stream. </paragraph>
<paragraph id="P-0066" lvl="0"><number>&lsqb;0066&rsqb;</number> The processing means incorporated into the processor CPU comprise formatting means, embodied in software fashion, which will perform a formatting phase in which the memory space of the disk HDD, or else only a part of this memory space, is divided into a useful space ESPU (<cross-reference target="DRAWINGS">FIG. 2</cross-reference>) and a control space ESPC. The useful space ESPU is subdivided (<cross-reference target="DRAWINGS">FIG. 3</cross-reference>) into several adjacent areas (<highlight><bold>14</bold></highlight> in <cross-reference target="DRAWINGS">FIG. 3</cross-reference>) Z<highlight><bold>1</bold></highlight>-Z<highlight><bold>14</bold></highlight> each containing several contiguous logical tracks PL<highlight><subscript>1 </subscript></highlight>all having, in a relevant area, the same storage capacity. </paragraph>
<paragraph id="P-0067" lvl="0"><number>&lsqb;0067&rsqb;</number> Each logical track is subdivided into an integer number of elementary storage portions (or clusters), for example, into 70 elementary portions. Each cluster, having a size of 2048 bytes, for example, is an integer number of sectors of the hard disk. Each logical track possesses a start address and an end address in the memory space of the hard disk. Thus, in <cross-reference target="DRAWINGS">FIG. 3</cross-reference>, the logical track PL<highlight><bold>1</bold></highlight> is delimited between the addresses &commat;<highlight><bold>1</bold></highlight> and &commat;<highlight><bold>2</bold></highlight> while the logical track PL<highlight><bold>2</bold></highlight> is defined between the addresses &commat;<highlight><bold>2</bold></highlight> and &commat;<highlight><bold>3</bold></highlight>. The logical track PL<highlight><bold>3</bold></highlight> is defined between the addresses &commat;<highlight><bold>3</bold></highlight> and &commat;<highlight><bold>4</bold></highlight> and the logical track PL<highlight><bold>4</bold></highlight> between the addresses &commat;<highlight><bold>4</bold></highlight> and &commat;<highlight><bold>5</bold></highlight>. </paragraph>
<paragraph id="P-0068" lvl="0"><number>&lsqb;0068&rsqb;</number> A logical track does not necessarily occupy the whole of a physical track PMP of the hard disk. Moreover, a logical track may extend over two portions of physical tracks of the hard disk. In particular, such is the case in <cross-reference target="DRAWINGS">FIG. 3</cross-reference> for the logical track PL<highlight><bold>4</bold></highlight> which starts at the address &commat;<highlight><bold>4</bold></highlight>, extends over a portion of the peripheral physical track PMP and continues onto the immediately adjacent physical track, terminating at the address &commat;<highlight><bold>5</bold></highlight>. </paragraph>
<paragraph id="P-0069" lvl="0"><number>&lsqb;0069&rsqb;</number> In the central area Z<highlight><bold>14</bold></highlight>, three logical tracks PL<highlight><subscript>n&minus;2</subscript></highlight>, PL<highlight><subscript>n&minus;1 </subscript></highlight>and PL<highlight><subscript>n </subscript></highlight>have been represented by way of example, all extending over the central physical track PMC of the hard disk. The logical tracks have from one area to the next a variable size so as to offer a substantially constant reading and recording time over the entire hard disk. </paragraph>
<paragraph id="P-0070" lvl="0"><number>&lsqb;0070&rsqb;</number> The respective values of storage capacity of the logical tracks decrease continuously from a maximum value which corresponds to the storage capacity of the logical tracks of the area Z<highlight><bold>1</bold></highlight> at the periphery of the disk, down to a minimum value corresponding to the storage capacity of the logical tracks of the area Z<highlight><bold>14</bold></highlight> at the center of the disk. </paragraph>
<paragraph id="P-0071" lvl="0"><number>&lsqb;0071&rsqb;</number> The maximum value of the storage capacity of a logical track in the peripheral area is defined by the storage capacity of the cache memories MC<highlight><subscript>1</subscript></highlight>. Also, the ratio of the minimum value to the maximum value of the storage capacities of the logical tracks corresponds to the ratio of the size of a physical track at the center of the disk to that of a physical track at the periphery of the disk. </paragraph>
<paragraph id="P-0072" lvl="0"><number>&lsqb;0072&rsqb;</number> To perform this subdivision, a phase of instrumentation of the hard disk is performed in the formatting phase, in such a way as to measure the speed of recording of the data on the disk on a peripheral track and on a central track. This gives the bit rate of recording the data on a peripheral track and on a central track. From this a ratio of these two bit rates is therefore deduced. This ratio will define the ratio of the minimum storage value of a central logical track to the maximum value of a peripheral logical track. </paragraph>
<paragraph id="P-0073" lvl="0"><number>&lsqb;0073&rsqb;</number> A number of areas is then defined. By way of indication, for a disk of 20 gigabytes, and assuming that all the memory space of the hard disk is used for an audio/video application, it will be possible to take a number of areas varying from 14 to 16. The maximum size of a peripheral logical track is then defined as a function of the storage capacity of the cache memories. </paragraph>
<paragraph id="P-0074" lvl="0"><number>&lsqb;0074&rsqb;</number> Knowing the size of such an outer logical track and the previously mentioned ratio makes it possible to deduce therefrom the size of an inner logical track. An interpolation, such as a linear interpolation, for example, between these two extreme values of the sizes of logical tracks makes it possible, given the number of areas, to define the sizes of the logical tracks of each of the areas, then the number of logical tracks per area, given the fact that in an area, the size of the logical tracks is constant. </paragraph>
<paragraph id="P-0075" lvl="0"><number>&lsqb;0075&rsqb;</number> The control space ESPC of the hard disk, which is also defined during the formatting phase, moreover contains a root cluster and a reserved space containing a so-called boot file, which are conventional and known by one skilled in the art, and a so-called persistent file FP which comprises, in particular, an allocation table TBA. This allocation table makes it possible to define the state of all the logical tracks of the hard disk. For each area, the persistent file contains the start of an area address, and the size and the number of logical tracks in the area. </paragraph>
<paragraph id="P-0076" lvl="0"><number>&lsqb;0076&rsqb;</number> The start and end addresses of each logical track can therefore be readily deduced therefrom. For each logical track, the allocation table comprises a state word which can take various values as a function of the state of the track. Thus, a completely free state, a completely free state with completely free neighboring tracks, a state of partial occupancy, and a state of total occupancy and possibly an error state are thus defined for each track. </paragraph>
<paragraph id="P-0077" lvl="0"><number>&lsqb;0077&rsqb;</number> The size of the persistent file is particularly restricted relative to the size of the memory space of the logical tracks. Thus, by way of indication, for one megabyte in the useful space ESPU of the hard disk, there is one byte in the persistent file. This restricted size of the persistent file thus makes possible, as will be seen in greater detail below, a double presence of this persistent file, both on the hard disk and in the random access memory MM. </paragraph>
<paragraph id="P-0078" lvl="0"><number>&lsqb;0078&rsqb;</number> The structure of a logical track is illustrated in <cross-reference target="DRAWINGS">FIG. 4</cross-reference>. More precisely, this logical track PSL comprises a useful area subdivided into several adjacent elementary portions (clusters) CL<highlight><subscript>i</subscript></highlight>, and a control area which is formed of two identical parts ZC<highlight><bold>1</bold></highlight> and ZC<highlight><bold>2</bold></highlight> respectively disposed at the two ends of the logical track. Each cluster CL<highlight><subscript>i </subscript></highlight>is tagged by its absolute index number on the hard disk (representative of its address on the hard disk). </paragraph>
<paragraph id="P-0079" lvl="0"><number>&lsqb;0079&rsqb;</number> Each part ZC<highlight><bold>1</bold></highlight>, ZC<highlight><bold>2</bold></highlight> of the control area comprises a catalog which for each cluster CL<highlight><subscript>i </subscript></highlight>of the track defines its state. More precisely, this catalog comprises, as illustrated in <cross-reference target="DRAWINGS">FIG. 5</cross-reference>, two words of 64 bits LN<highlight><bold>1</bold></highlight> and LN<highlight><bold>2</bold></highlight> which define a first indication of relationship and a second indication of relationship. As will be seen in greater detail below, the first indication of relationships can contain a start of file indication, or else the index number of the preceding cluster in the chain of clusters. </paragraph>
<paragraph id="P-0080" lvl="0"><number>&lsqb;0080&rsqb;</number> The second indication of relationship LN<highlight><bold>2</bold></highlight> can contain an end of file indication or else the index number of the next cluster in the chain of relationships, or else an indication of unknown relationship (in particular, if the cluster in question is the last of the logical track), or else an indication of non-occupancy. </paragraph>
<paragraph id="P-0081" lvl="0"><number>&lsqb;0081&rsqb;</number> The control area ZC<highlight><bold>1</bold></highlight>, ZC<highlight><bold>2</bold></highlight> furthermore also comprises a local dating word MDL, the meaning of which will be discussed in greater detail below, and which makes it possible, in combination with a global dating word MDG contained in the persistent file, and the meaning of which will also be discussed in greater detail below, to detect possible losses of supply of the device. </paragraph>
<paragraph id="P-0082" lvl="0"><number>&lsqb;0082&rsqb;</number> Reference will now be made more particularly to <cross-reference target="DRAWINGS">FIG. 7</cross-reference> to describe a management of the memory space of the hard disk during the reception, and the simultaneous recording of several distinct audio/video data streams. For simplification purposes, only two different audio/video streams ST<highlight><bold>1</bold></highlight> and ST<highlight><bold>2</bold></highlight> have been represented in <cross-reference target="DRAWINGS">FIG. 7</cross-reference>. It should be understood that the invention allows the simultaneous recording of more than two streams, for example, 4 simultaneous recordings. </paragraph>
<paragraph id="P-0083" lvl="0"><number>&lsqb;0083&rsqb;</number> During each deployment of the device, the content of the persistent file, and consequently, the content of the allocation table TBA, is duplicated from the control space EPSC of the hard disk to the random access memory MM. During the reception of the audio/video data streams the latter are stored packet-wise in the random access memory MOS at the speed of the successive interruptions. Then, each audio/video stream, ST<highlight><bold>1</bold></highlight>, ST<highlight><bold>2</bold></highlight> is stored on-the-fly in a cache memory MC<highlight><bold>1</bold></highlight>, MC<highlight><bold>2</bold></highlight>. </paragraph>
<paragraph id="P-0084" lvl="0"><number>&lsqb;0084&rsqb;</number> Writing means MECR embodied in software fashion within the central unit CPU, select, on the basis of the allocation table TBA contained in the random access memory MM, a completely free logical track PL<highlight><subscript>10</subscript></highlight>. Although it would be possible to select a completely free logical track between two occupied logical tracks, it is preferable, in order for the head of the disk not to have to perform overly frequent jumps, to select a completely free logical track which comprises a predetermined number, for example 4 or 5, of neighboring logical tracks which are themselves completely free. </paragraph>
<paragraph id="P-0085" lvl="0"><number>&lsqb;0085&rsqb;</number> When one of the cache memories, for example, the cache memory MC<highlight><bold>1</bold></highlight>, comprises a data set the size of which corresponds to the storage capacity of the logical track selected PL<highlight><subscript>10</subscript></highlight>, the content of the cache memory is stored on the logical track, that is, in the clusters CL<highlight><bold>1</bold></highlight>-CL<highlight><bold>4</bold></highlight> of the logical track and the content of the allocation table is updated in the random access memory. The logical track PL<highlight><subscript>10 </subscript></highlight>then becomes occupied. </paragraph>
<paragraph id="P-0086" lvl="0"><number>&lsqb;0086&rsqb;</number> Moreover, an updating of the local catalog contained in the areas ZC<highlight><bold>1</bold></highlight> and ZC<highlight><bold>2</bold></highlight> is also performed. More precisely, the first relationship indication LN<highlight><bold>1</bold></highlight> relating to the cluster CL<highlight><bold>1</bold></highlight> comprises the start of file indication while the second relationship indications relating to the clusters CL<highlight><bold>1</bold></highlight>-CL<highlight><bold>3</bold></highlight> respectively comprise the index numbers of the clusters CL<highlight><bold>2</bold></highlight>-CL<highlight><bold>4</bold></highlight>. The first relationship indications relating to the clusters CL<highlight><bold>2</bold></highlight>-CL<highlight><bold>4</bold></highlight> respectively comprise the index numbers of the clusters CL<highlight><bold>1</bold></highlight>-CL<highlight><bold>3</bold></highlight>. </paragraph>
<paragraph id="P-0087" lvl="0"><number>&lsqb;0087&rsqb;</number> The second relationship indication LN<highlight><bold>2</bold></highlight> relating to the cluster CL<highlight><bold>4</bold></highlight> comprises an indication of unknown relationship since at this juncture in the write process, the next logical track which will be selected with the storage of stream ST<highlight><bold>1</bold></highlight> is not yet known because of the presence of another stream to be recorded, here in this instance the stream ST<highlight><bold>2</bold></highlight>. </paragraph>
<paragraph id="P-0088" lvl="0"><number>&lsqb;0088&rsqb;</number> It is next assumed that the cache memory MC<highlight><bold>2</bold></highlight> has been completely filled by a part of the stream ST<highlight><bold>2</bold></highlight>. The logical track PL<highlight><subscript>11</subscript></highlight>, which was the next completely free logical track, has been selected. The content of the cache memory MC<highlight><bold>2</bold></highlight> is therefore transferred into the clusters CL<highlight><bold>5</bold></highlight>-CL<highlight><bold>8</bold></highlight> of the logical track PL<highlight><subscript>11</subscript></highlight>. The first relationship indication relating to the cluster CL<highlight><bold>5</bold></highlight> contains the start of file indication, while the first indications of relationships of the clusters CL<highlight><bold>6</bold></highlight>-CL<highlight><bold>8</bold></highlight> contain the index numbers of the clusters CL<highlight><bold>5</bold></highlight>-CL<highlight><bold>7</bold></highlight>. The second indications of relationships of the clusters CL<highlight><bold>5</bold></highlight>-CL<highlight><bold>7</bold></highlight> contain the index numbers of the clusters CL<highlight><bold>6</bold></highlight>-CL<highlight><bold>8</bold></highlight>. The second indication of relationships of the cluster CL<highlight><bold>8</bold></highlight> again comprises an indication of unknown relationship. </paragraph>
<paragraph id="P-0089" lvl="0"><number>&lsqb;0089&rsqb;</number> In the next step, it is again assumed that it is the cache memory MC<highlight><bold>2</bold></highlight> which has been completely filled before the cache memory MC<highlight><bold>1</bold></highlight>. In this case, the content of the memory MC<highlight><bold>2</bold></highlight> is stored in the clusters CL<highlight><bold>9</bold></highlight>-CL<highlight><bold>12</bold></highlight> of the next logical track selected, namely the track PL<highlight><subscript>12</subscript></highlight>. The updating of the local catalogs ZC<highlight><bold>1</bold></highlight> and ZC<highlight><bold>2</bold></highlight> of this track is performed in a similar manner to the updating of the catalogs of the track PL<highlight><subscript>11</subscript></highlight>, with the difference that this time, the first relationship indication relating to the cluster CL<highlight><bold>9</bold></highlight> contains the index number of the cluster CL<highlight><bold>8</bold></highlight>. </paragraph>
<paragraph id="P-0090" lvl="0"><number>&lsqb;0090&rsqb;</number> In the next step, this time again it is the cache memory MC<highlight><bold>1</bold></highlight> which is full. The content is then transferred into the next logical track selected, which is the logical track PL<highlight><subscript>13</subscript></highlight>. The updating of the local catalogs is performed in a manner similar to that already described. The first relationship indication relating to the cluster CL<highlight><bold>13</bold></highlight> comprises the index number of the cluster CL<highlight><bold>4</bold></highlight> and the second indication of relationship of the cluster CL<highlight><bold>16</bold></highlight> still comprises an indication of unknown relationship. </paragraph>
<paragraph id="P-0091" lvl="0"><number>&lsqb;0091&rsqb;</number> The storage of the two streams continues in this way on-the-fly in tandem with the selecting of the completely free logical tracks. Of course, it is very possible that from time to time the completely free logical tracks selected may not be contiguous but separated by already occupied logical tracks. In this case, the recording head of the disk performs a jump so as to position itself on the selected logical track. </paragraph>
<paragraph id="P-0092" lvl="0"><number>&lsqb;0092&rsqb;</number> However, the person skilled in the art will nevertheless have observed that this recording of the various streams is performed in a manner which is interleaved with a displacement of the head of the disk always in the same direction, thereby avoiding to and from displacements which are detrimental to the disk recording performance. Moreover, the fact that the selecting of the logical tracks and the updating of their state is performed on the basis of the allocation table contained in the random access memory also avoids the need for the reading and recording head of the disk to position itself each time on the control space of the disk, which would also cause to and from displacements of this head. </paragraph>
<paragraph id="P-0093" lvl="0"><number>&lsqb;0093&rsqb;</number> Of course, in tandem with the storing of the various streams on the hard disk, and in tandem with the selecting of the logical tracks, a change of area may occur and the size of the logical tracks selected may decrease. In this case, the means of management of the cache memories will adapt the transfer of the content of the cache memories onto the logical tracks as a function of the current sizes of the logical tracks selected. Stated otherwise, as soon as the cache memory contains a data set whose size is equal to that of the selected track, there will be a transfer to the logical track. </paragraph>
<paragraph id="P-0094" lvl="0"><number>&lsqb;0094&rsqb;</number> Of course, when the end of the stream ST<highlight><bold>1</bold></highlight> arrives in the cache memory MC<highlight><bold>1</bold></highlight>, this terminal part of the stream may have a size which is less than the size of the last logical track selected to receive this terminal part. In this case, this last logical track selected will not be completely filled by the content of the cache memory MC<highlight><bold>1</bold></highlight>. Also, the second indication of relationship of the last cluster of this logical track selected, which cluster is filled by audio/video data of the stream ST<highlight><bold>1</bold></highlight> will comprise an end of file indication, while the following clusters of the logical track will have a state of non-occupancy as stated below. </paragraph>
<paragraph id="P-0095" lvl="0"><number>&lsqb;0095&rsqb;</number> The recording of the streams ST<highlight><bold>1</bold></highlight> and ST<highlight><bold>2</bold></highlight> on the hard disk is performed until the delivery of an end of writing signal. This end of writing signal may arrive quite naturally when all the streams have been stored, or else may occur upon action of the user of the device if the latter decides to stop the recording of the television transmissions prematurely. </paragraph>
<paragraph id="P-0096" lvl="0"><number>&lsqb;0096&rsqb;</number> The process according to the invention also provides for a chaining phase in which a chain of relationships between the various logical tracks assigned to the same stream is formulated. In the mode of implementation which is described here, each chain of relationships is effected by updating the unknown relationships. Also, this updating of the unknown relationships, which requires a scan in the other direction of all the clusters so as to replace the indications of unknown relationships by the corresponding index numbers of the clusters, is performed subsequently to this writing phase, so as not to penalize the recording bit rate. </paragraph>
<paragraph id="P-0097" lvl="0"><number>&lsqb;0097&rsqb;</number> This updating can be performed, for example, when closing the files relating to the various audio/video streams, that is, when the latter have been recorded completely on the hard disk. As a variation, this updating could be performed under time sharing with the writing of the streams on the disk if, for example, there is a relatively low bit rate of arrival of the streams relative to the possible bit rate of recording on the disk. </paragraph>
<paragraph id="P-0098" lvl="0"><number>&lsqb;0098&rsqb;</number> The process according to the invention also comprises an updating phase in which the content of the allocation table situated in the control space of the disk is updated on the basis of the allocation table contained in the random access memory. This updating can also be performed on completion of the writing on the disk of the entirety of the stream files. </paragraph>
<paragraph id="P-0099" lvl="0"><number>&lsqb;0099&rsqb;</number> Moreover, to detect any earlier occurrence of a loss of supply of the device, use is made, as indicated above, of the comparison of the content of the local dating words MDL contained in the areas ZC<highlight><bold>1</bold></highlight> and ZC<highlight><bold>2</bold></highlight> of the logical tracks, and of the content of the global dating word MDG. More precisely, it is recalled here that in the writing phase the persistent file has been duplicated in the random access memory. This persistent file also comprises the global dating word MDG. </paragraph>
<paragraph id="P-0100" lvl="0"><number>&lsqb;0100&rsqb;</number> Additionally, in the writing phase, the value of the global dating word MDG contained in the random access memory is incremented with each write on the disk. Also, with each write to a logical track, the content of this global dating word MDG is copied into the local dating word MDL of the control area of the relevant logical track. Therefore, when subsequently the content of the persistent file is updated on the disk on the basis of the content of the persistent file contained in the random access memory, the global dating word will have to have a value which is always greater than that of the local dating words. If such is not the case, this implies that at one moment or another, there has been a loss of supply and that the content of the global dating word in the random access memory has been set to zero. </paragraph>
<paragraph id="P-0101" lvl="0"><number>&lsqb;0101&rsqb;</number> The invention is also compatible with a slightly deferred (time shift) readout of an audio/video stream which is currently being recorded. In this case, it is sufficient that provisions be made in the random access memory for a space in which the various unknown relationships will be updated in tandem with the recording of the streams. Of course, the size of this space thus allocated in the random access memory will determine the maximum possible duration of the time shift. </paragraph>
<paragraph id="P-0102" lvl="0"><number>&lsqb;0102&rsqb;</number> Moreover, the invention is not limited to the recording of audio/video streams. It also allows the recording, according to the same process of purely computer files. The latter will also be written in an interleaved manner on logical tracks which this time will not necessarily have to be completely free. </paragraph>
<paragraph id="P-0103" lvl="0"><number>&lsqb;0103&rsqb;</number> Finally, the process according to the invention also makes it possible to record several audio/video streams simultaneously and to simultaneously read out a previously recorded audio/video stream, by using the chain of relationships linking the various clusters of this stream. Of course, in this case, to and from displacements of the recording and reading head between the area in which the various streams are simultaneously recorded and the area in which the stream already recorded is read out cannot be avoided. However, according to the invention, the displacements of the reading and writing head have been limited between two areas of the hard disk even though more than two audio/video streams are processed. </paragraph>
<paragraph id="P-0104" lvl="0"><number>&lsqb;0104&rsqb;</number> Many modifications and other embodiments of the invention will come to the mind of one skilled in the art having the benefit of the teachings presented in the foregoing descriptions and the associated drawings. Therefore, it is to be understood that the invention is not to be limited to the specific embodiments disclosed, and that modifications and embodiments are intended to be included within the scope of the appended claims. </paragraph>
</section>
</detailed-description>
</subdoc-description>
<subdoc-claims>
<heading lvl="1">That which is claimed is: </heading>
<claim id="CLM-00001">
<claim-text><highlight><bold>1</bold></highlight>. Process for managing the memory space of a hard disk incorporated into a computing device comprising a random access memory able to receive several audio/video data streams, the process comprising 
<claim-text>a formatting phase in which at least one part of the memory space of the disk (HDD) is divided into a useful space (ESPU) formed of contiguous logical tracks of variable size complying with the ratio of the size of a physical track (PMC) situated at the center of the disk to that of a physical track (PMP) situated at the periphery of the disk, and into a control space (ESPC) comprising an allocation table (TBA) containing indications regarding the state of occupancy of the logical tracks, </claim-text>
<claim-text>a writing phase in which during the reception of the audio/video data streams, the audio/video streams are recorded in an interleaved fashion on completely free logical tracks selected on the basis of the allocation table previously duplicated in the random access memory, </claim-text>
<claim-text>a chaining phase in which a chain of relationships (LN<highlight><bold>1</bold></highlight>, LN<highlight><bold>2</bold></highlight>) between the various logical tracks assigned to one and the same stream is formulated, and </claim-text>
<claim-text>an updating phase in which the content of the allocation table (TBA) situated in the control space of the disk is updated on the basis of the allocation table contained in said random access memory. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00002">
<claim-text><highlight><bold>2</bold></highlight>. Process according to <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, characterized in that in the formatting phase, the useful space (ESPU) is itself subdivided into several adjacent areas (Z<highlight><subscript>i</subscript></highlight>) each composed of contiguous logical tracks (PL<highlight><subscript>1</subscript></highlight>) of equal storage capacity, the values of the respective storage capacities of the logical tracks decreasing continuously from a maximum value corresponding to the storage capacity of the logical tracks of the area situated at the periphery of the disk, down to a minimum value corresponding to the storage capacity of the logical tracks of the area situated at the center of the disk, the ratio of the minimum value to the maximum value corresponding to the ratio of the size of a physical track (PMC) situated at the center of the disk to that of a physical track (PMP) situated at the periphery of the disk, 
<claim-text>in that it comprises a duplication phase in which during each deployment of the device, the content of the allocation table is duplicated from the said control space in the said random access memory, </claim-text>
<claim-text>and in that in the writing phase, during the reception of the video data streams, 
<claim-text>a) a completely free logical track is selected on the basis of the allocation table contained in the random access memory (MM), </claim-text>
<claim-text>b) the streams are stored respectively on the fly in different cache memories (Mc<highlight><subscript>i</subscript></highlight>), at the rate of one cache memory per stream, </claim-text>
<claim-text>c) when one of the cache memories comprises a data set whose size corresponds to the storage capacity of the selected logical track, the content of the cache memory is stored on the logical track and the content of the allocation table in the random access memory is updated, </claim-text>
<claim-text>d) the next completely free logical track which follows that previously selected is selected on the basis of the allocation table, </claim-text>
<claim-text>e) steps b) to d) are repeated until the reception of an end of writing signal, the final logical track allocated to a stream possibly being only partially written by this stream. </claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00003">
<claim-text><highlight><bold>3</bold></highlight>. Process according to <dependent-claim-reference depends_on="CLM-00002">claim 2</dependent-claim-reference>, characterized in that on completion of the formatting phase each logical track comprises a useful area sub-divided into several adjacent elementary portions (CL<highlight><subscript>i</subscript></highlight>), and a control area (Z<highlight><bold>1</bold></highlight>, ZC<highlight><bold>2</bold></highlight>) comprising for each elementary portion a first indication of relationship (LN<highlight><bold>1</bold></highlight>) and a second indication of relationship (LN<highlight><bold>2</bold></highlight>), 
<claim-text>and in that the chaining phase comprises 
<claim-text>during the storage of a data set on a selected logical track, 
<claim-text>the updating of the first indication of relationship of each elementary portion of the track, with a start of file indication or with the index number of the preceding elementary portion, </claim-text>
<claim-text>the updating of the second indication of relationship of each elementary portion of the track except for the last, with the index number of the next elementary portion or with an end of file indication or with a non-occupancy indication, and </claim-text>
<claim-text>the updating of the second indication of relationship of the last elementary portion of the track with an end of file indication or with an indication of unknown relationship or with an indication of non-occupancy, and </claim-text>
</claim-text>
<claim-text>the updating of the unknown relationships subsequently. </claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00004">
<claim-text><highlight><bold>4</bold></highlight>. Process according to <dependent-claim-reference depends_on="CLM-00003">claim 3</dependent-claim-reference>, characterized in that the updating of the unknown relationships relating to the respective files containing the data of the streams (ST<highlight><bold>1</bold></highlight>, ST<highlight><bold>2</bold></highlight>) can be performed on completion of the writing on the disk of the entirety of the files, or else possibly under time sharing with the writing of the streams on the disk. </claim-text>
</claim>
<claim id="CLM-00005">
<claim-text><highlight><bold>5</bold></highlight>. Process according to <dependent-claim-reference depends_on="CLM-00003">claim 3</dependent-claim-reference> or <highlight><bold>4</bold></highlight>, characterized in that the control area is formed of two identical parts (ZC<highlight><bold>1</bold></highlight>, ZC<highlight><bold>2</bold></highlight>) respectively disposed at the two ends of the logical track. </claim-text>
</claim>
<claim id="CLM-00006">
<claim-text><highlight><bold>6</bold></highlight>. Process according to one of <dependent-claim-reference depends_on="CLM-00002">claims 2</dependent-claim-reference> to <dependent-claim-reference depends_on="CLM-00005">5</dependent-claim-reference>, characterized in that the control space comprises a global dating word (MDG), in that the control area of each logical track comprises a local dating word (MDL), in that in the said duplication phase, the content of the global dating word is also copied into the said random access memory, in that in the writing phase, the value of the global dating word contained in the random access memory is incremented with each write on the disk, and with each write to a logical track, the content of the global dating word is copied into the local dating word of the control area of the relevant logical track, and in that the comparison of the value of the global dating word with the values of the local dating words yields an indication regarding a possible earlier occurrence of a loss of supply of the device. </claim-text>
</claim>
<claim id="CLM-00007">
<claim-text><highlight><bold>7</bold></highlight>. Process according to one of <dependent-claim-reference depends_on="CLM-00002">claims 2</dependent-claim-reference> to <dependent-claim-reference depends_on="CLM-00006">6</dependent-claim-reference>, characterized in that in step a) of the writing phase, a completely free logical track situated at the start of a succession of a predetermined number of completely free contiguous logical tracks, for example five completely free contiguous logical tracks, is selected. </claim-text>
</claim>
<claim id="CLM-00008">
<claim-text><highlight><bold>8</bold></highlight>. Process according to one of the preceding claims, characterized in that the phase of updating on the disk the content of the allocation table on the basis of the random access memory is performed on completion of the writing on the disk of the entirety of the stream files. </claim-text>
</claim>
<claim id="CLM-00009">
<claim-text><highlight><bold>9</bold></highlight>. Computing device, comprising a random access memory able to receive several audio/video data streams, a hard disk and processing means (CPU) comprising 
<claim-text>formatting means able to divide at least one part of the memory space of the disk (HDD) into a useful space (ESPU) formed of contiguous logical tracks of variable size complying with the ratio of the size of a physical track (PMC) situated at the center of the disk to that of a physical track (PMP) situated at the periphery of the disk, and into a control space (ESPC) comprising an allocation table (TBA) containing indications regarding the state of occupancy of the logical tracks, </claim-text>
<claim-text>writing means (MECR) able during the reception of the video data streams, to record the audio/video streams in an interleaved fashion on completely free logical tracks selected on the basis of the allocation table previously duplicated in the random access memory, </claim-text>
<claim-text>chaining means able to formulate a chain of relationships between the various logical tracks assigned to one and the same stream, and </claim-text>
<claim-text>updating means able to update the content of the allocation table (TBA) situated in the control space of the disk on the basis of the allocation table contained in said random access memory. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00010">
<claim-text><highlight><bold>10</bold></highlight>. Device according to <dependent-claim-reference depends_on="CLM-00009">claim 9</dependent-claim-reference>, characterized in that the formatting means are able to subdivide the useful space (ESPU) into several adjacent areas each composed of contiguous logical tracks of equal storage capacity, the values of the respective storage capacities of the logical tracks decreasing continuously from a maximum value corresponding to the storage capacity of the logical tracks of the area situated at the periphery of the disk, down to a minimum value corresponding to the storage capacity of the logical disks of the area situated at the center of the disk, the ratio of the minimum value to the maximum value corresponding to the ratio of the size of a physical track situated at the center of the disk to that of a track situated at the periphery of the disk, 
<claim-text>in that it comprises duplicating means able during each deployment of the device, to duplicate the content of the allocation table from the said control space in the said random access memory, </claim-text>
<claim-text>and in that the writing means (MECR) are able, during the reception of the audio/video data streams, 
<claim-text>f) to select on the basis of the allocation table contained in the random access memory (MM), a completely free logical track, </claim-text>
<claim-text>g) to store respectively on the fly the streams in different cache memories (MCi), at the rate of one cache memory per stream, </claim-text>
<claim-text>h) when one of the cache memories comprises a data set whose size corresponds to the storage capacity of the selected logical track, to store the content of the cache memory on the logical track and to update the content of the allocation table in the random access memory (MM), </claim-text>
<claim-text>i) to select on the basis of the allocation table, the next completely free logical track which follows that previously selected, </claim-text>
<claim-text>j) to re-execute the operations f) to i) until the reception of an end of writing signal, the final logical track allocated to a stream possibly being only partially written by this stream. </claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00011">
<claim-text><highlight><bold>11</bold></highlight>. Device according to <dependent-claim-reference depends_on="CLM-00011">claim 10</dependent-claim-reference>, characterized in that the formatting means are able to split each logical track into a useful area subdivided into several adjacent elementary portions (CLi), and into a control area (ZC<highlight><bold>1</bold></highlight>, ZC<highlight><bold>2</bold></highlight>) comprising for each elementary portion a first indication of relationship and a second indication of relationship, and in that the chaining means are able 
<claim-text>during the storage of a data set on a selected logical track, 
<claim-text>to update the first indication of relationship of each elementary portion of the track, with a start of file indication or with the index number of the preceding elementary portion, </claim-text>
<claim-text>to update the second indication of relationship of each elementary portion of the track except for the last, with the index number of the next elementary portion or with an end of file indication or with a non-occupancy indication, and </claim-text>
<claim-text>to update the second indication of relationship of the last elementary portion of the track with an end of file indication or with an indication of unknown relationship or with a non-occupancy indication, and </claim-text>
<claim-text>to update the unknown relationships subsequently. </claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00012">
<claim-text><highlight><bold>12</bold></highlight>. Device according to <dependent-claim-reference depends_on="CLM-00011">claim 11</dependent-claim-reference>, characterized in that the updating means are able to update the unknown relationships relating to the respective files containing the data of the streams on completion of the writing on the disk of the entirety of the files, or else possibly under time sharing with the writing of the streams on the disk. </claim-text>
</claim>
<claim id="CLM-00013">
<claim-text><highlight><bold>13</bold></highlight>. Device according to <dependent-claim-reference depends_on="CLM-00011">claim 11</dependent-claim-reference> or <highlight><bold>12</bold></highlight>, characterized in that the control area is formed of two identical parts (ZC<highlight><bold>1</bold></highlight>, ZC<highlight><bold>2</bold></highlight>) respectively disposed at the two ends of the logical track. </claim-text>
</claim>
<claim id="CLM-00014">
<claim-text><highlight><bold>14</bold></highlight>. Device according to one of <dependent-claim-reference depends_on="CLM-00010">claims 10</dependent-claim-reference> to <dependent-claim-reference depends_on="CLM-00013">13</dependent-claim-reference>, characterized in that the control space comprises a global dating word (MDG), in that the control area of each logical track comprises a local dating word (MDL), in that the duplication means are able to also copy the content of the global dating word into the said random access memory, in that the writing means are able to increment the value of the global dating word contained in the random access memory with each write on the disk, and, are able, with each write to a logical track, to copy the content of the global dating word into the local dating word of the control area of the relevant logical track, and in that the processing means comprise comparison means able to compare the value of the global dating word with the values of the local dating words so as to yield an indication regarding a possible earlier occurrence of a loss of supply of the device. </claim-text>
</claim>
<claim id="CLM-00015">
<claim-text><highlight><bold>15</bold></highlight>. Device according to one of <dependent-claim-reference depends_on="CLM-00010">claims 10</dependent-claim-reference> to <dependent-claim-reference depends_on="CLM-00014">14</dependent-claim-reference>, characterized in that during the execution of the operation f), the writing means are able to select a completely free logical track situated at the start of a succession of a predetermined number of completely free contiguous logical tracks, for example five completely free contiguous logical tracks. </claim-text>
</claim>
<claim id="CLM-00016">
<claim-text><highlight><bold>16</bold></highlight>. Device according to one of <dependent-claim-reference depends_on="CLM-00009">claims 9</dependent-claim-reference> to <dependent-claim-reference depends_on="CLM-00015">15</dependent-claim-reference>, characterized in that the updating means are able to perform a phase of updating on the disk the content of the allocation table on the basis of the random access memory on completion of the writing on the disk of the entirety of the stream files. </claim-text>
</claim>
<claim id="CLM-00017">
<claim-text><highlight><bold>17</bold></highlight>. Receiver of satellite digital television signals, characterized in that it includes a device according to one of <dependent-claim-reference depends_on="CLM-00009">claims 9</dependent-claim-reference> to <dependent-claim-reference depends_on="CLM-00016">16</dependent-claim-reference>.</claim-text>
</claim>
</subdoc-claims>
<subdoc-drawings id="DRAWINGS">
<heading lvl="0" align="CENTER">Drawings</heading>
<representative-figure>1</representative-figure>
<figure id="figure-D00000">
<image id="EMI-D00000" file="US20030002864A1-20030102-D00000.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00001">
<image id="EMI-D00001" file="US20030002864A1-20030102-D00001.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00002">
<image id="EMI-D00002" file="US20030002864A1-20030102-D00002.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00003">
<image id="EMI-D00003" file="US20030002864A1-20030102-D00003.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00004">
<image id="EMI-D00004" file="US20030002864A1-20030102-D00004.TIF" imf="TIFF" ti="DR"/>
</figure>
</subdoc-drawings>
</patent-application-publication>
