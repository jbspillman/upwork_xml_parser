<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE patent-application-publication SYSTEM "pap-v16-2002-01-01.dtd" [
<!ENTITY US20030002444A1-20030102-M00001.NB SYSTEM "US20030002444A1-20030102-M00001.NB" NDATA NB>
<!ENTITY US20030002444A1-20030102-M00001.TIF SYSTEM "US20030002444A1-20030102-M00001.TIF" NDATA TIF>
<!ENTITY US20030002444A1-20030102-M00002.NB SYSTEM "US20030002444A1-20030102-M00002.NB" NDATA NB>
<!ENTITY US20030002444A1-20030102-M00002.TIF SYSTEM "US20030002444A1-20030102-M00002.TIF" NDATA TIF>
<!ENTITY US20030002444A1-20030102-M00003.NB SYSTEM "US20030002444A1-20030102-M00003.NB" NDATA NB>
<!ENTITY US20030002444A1-20030102-M00003.TIF SYSTEM "US20030002444A1-20030102-M00003.TIF" NDATA TIF>
<!ENTITY US20030002444A1-20030102-M00004.NB SYSTEM "US20030002444A1-20030102-M00004.NB" NDATA NB>
<!ENTITY US20030002444A1-20030102-M00004.TIF SYSTEM "US20030002444A1-20030102-M00004.TIF" NDATA TIF>
<!ENTITY US20030002444A1-20030102-M00005.NB SYSTEM "US20030002444A1-20030102-M00005.NB" NDATA NB>
<!ENTITY US20030002444A1-20030102-M00005.TIF SYSTEM "US20030002444A1-20030102-M00005.TIF" NDATA TIF>
<!ENTITY US20030002444A1-20030102-D00000.TIF SYSTEM "US20030002444A1-20030102-D00000.TIF" NDATA TIF>
<!ENTITY US20030002444A1-20030102-D00001.TIF SYSTEM "US20030002444A1-20030102-D00001.TIF" NDATA TIF>
<!ENTITY US20030002444A1-20030102-D00002.TIF SYSTEM "US20030002444A1-20030102-D00002.TIF" NDATA TIF>
<!ENTITY US20030002444A1-20030102-D00003.TIF SYSTEM "US20030002444A1-20030102-D00003.TIF" NDATA TIF>
<!ENTITY US20030002444A1-20030102-D00004.TIF SYSTEM "US20030002444A1-20030102-D00004.TIF" NDATA TIF>
]>
<patent-application-publication>
<subdoc-bibliographic-information>
<document-id>
<doc-number>20030002444</doc-number>
<kind-code>A1</kind-code>
<document-date>20030102</document-date>
</document-id>
<publication-filing-type>new</publication-filing-type>
<domestic-filing-data>
<application-number>
<doc-number>10175855</doc-number>
</application-number>
<application-number-series-code>10</application-number-series-code>
<filing-date>20020621</filing-date>
</domestic-filing-data>
<foreign-priority-data>
<priority-application-number>
<doc-number>2001-35578</doc-number>
</priority-application-number>
<filing-date>20010621</filing-date>
<country-code>KR</country-code>
</foreign-priority-data>
<foreign-priority-data>
<priority-application-number>
<doc-number>2001-65799</doc-number>
</priority-application-number>
<filing-date>20011024</filing-date>
<country-code>KR</country-code>
</foreign-priority-data>
<technical-information>
<classification-ipc>
<classification-ipc-primary>
<ipc>H04L012/26</ipc>
</classification-ipc-primary>
<classification-ipc-edition>07</classification-ipc-edition>
</classification-ipc>
<classification-us>
<classification-us-primary>
<uspc>
<class>370</class>
<subclass>238000</subclass>
</uspc>
</classification-us-primary>
<classification-us-secondary>
<uspc>
<class>370</class>
<subclass>252000</subclass>
</uspc>
</classification-us-secondary>
<classification-us-secondary>
<uspc>
<class>370</class>
<subclass>254000</subclass>
</uspc>
</classification-us-secondary>
</classification-us>
<title-of-invention>Route determining method in a multi protocol label switching network</title-of-invention>
</technical-information>
<inventors>
<first-named-inventor>
<name>
<given-name>Yong</given-name>
<middle-name>Sik</middle-name>
<family-name>Shin</family-name>
</name>
<residence>
<residence-non-us>
<city>Seoul</city>
<country-code>KR</country-code>
</residence-non-us>
</residence>
<authority-applicant>INV</authority-applicant>
</first-named-inventor>
<inventor>
<name>
<given-name>Si</given-name>
<middle-name>Hoon</middle-name>
<family-name>Ryu</family-name>
</name>
<residence>
<residence-non-us>
<city>Sungnam-si</city>
<country-code>KR</country-code>
</residence-non-us>
</residence>
<authority-applicant>INV</authority-applicant>
</inventor>
<inventor>
<name>
<given-name>Dong</given-name>
<middle-name>Hahk</middle-name>
<family-name>Lee</family-name>
</name>
<residence>
<residence-non-us>
<city>Sungnam-si</city>
<country-code>KR</country-code>
</residence-non-us>
</residence>
<authority-applicant>INV</authority-applicant>
</inventor>
<inventor>
<name>
<given-name>Jong</given-name>
<middle-name>Tae</middle-name>
<family-name>Ihm</family-name>
</name>
<residence>
<residence-non-us>
<city>Sungnam-si</city>
<country-code>KR</country-code>
</residence-non-us>
</residence>
<authority-applicant>INV</authority-applicant>
</inventor>
</inventors>
<correspondence-address>
<name-1>JACOBSON HOLMAN PLLC</name-1>
<name-2></name-2>
<address>
<address-1>400 SEVENTH STREET N.W.</address-1>
<address-2>SUITE 600</address-2>
<city>WASHINGTON</city>
<state>DC</state>
<postalcode>20004</postalcode>
<country>
<country-code>US</country-code>
</country>
</address>
</correspondence-address>
</subdoc-bibliographic-information>
<subdoc-abstract>
<paragraph id="A-0001" lvl="0">The present invention relates to a method of determining at least one traffic route in an MPLS (Multi-Protocol Label Switching) network. In this route determining method, when a traffic is arrived at an ingress edge router, the edge router removes links of remaining capacity below the traffic demand from all links of a given MPLS network to produce the first network topology, calculates distance of every link of the first network topology based on current traffic flowing each link and the traffic demand, determines the first route for the traffic demand based on the calculated distance information; removes links of remaining capacity below the traffic demand and links belonging to the first route from the MPLS network to produce the second network topology, calculates every link distance of the second topology based on current traffic flowing each link and the traffic demand, determines the second route for the traffic demand based on the distance information obtained from the second topology, partitions the arrived traffic into two portions, and allocates the two portions to the first and the second route, respectively. </paragraph>
</subdoc-abstract>
<subdoc-description>
<summary-of-invention>
<section>
<heading lvl="1">BACKGROUND OF THE INVENTION </heading>
<paragraph id="P-0001" lvl="0"><number>&lsqb;0001&rsqb;</number> 1. Field of the Invention </paragraph>
<paragraph id="P-0002" lvl="0"><number>&lsqb;0002&rsqb;</number> The present invention relates to a method of determining at least one traffic route in an MPLS (Multi-Protocol Label Switching) network. </paragraph>
<paragraph id="P-0003" lvl="0"><number>&lsqb;0003&rsqb;</number> 2. Description of the Related Art </paragraph>
<paragraph id="P-0004" lvl="0"><number>&lsqb;0004&rsqb;</number> An MPLS ensures quality of service (QoS) for a traffic transported through an IP (Internet Protocol) network and efficient use of network resources. Therefore, it is spotlighted in traffic engineering field. </paragraph>
<paragraph id="P-0005" lvl="0"><number>&lsqb;0005&rsqb;</number> The MPLS traffic engineering determines an LSP (Label Switched Path) in various ways to appropriately accept a variety of QoS demands for users&apos; IP packets. The LSP is a point-to-point (PTP) path connecting from an ingress to an egress edge router. </paragraph>
<paragraph id="P-0006" lvl="0"><number>&lsqb;0006&rsqb;</number> The IETF (Internet Engineering Task Force) committee is under discussion about reroute, protection switching, and fast reroute in determining an LSP to prepare against unexpected network fault. The methods of protection switching and fast reroute reserve a backup path for a primary LSP to prepare against network fault. However, when a backup path is reserved, some bandwidth of the backup path is reserved and is not able to be used for other traffic. </paragraph>
<paragraph id="P-0007" lvl="0"><number>&lsqb;0007&rsqb;</number> Another method has been proposed to resolve such a drawback. In this method, a reserved backup path is used for other traffic demanding low QoS in case of normally-operative network and for a traffic of primary LSP in case of faulty network. </paragraph>
<paragraph id="P-0008" lvl="0"><number>&lsqb;0008&rsqb;</number> Despite such an improved method, new methods are still demanded to prepare for network fault while reducing a bandwidth allocated for a backup path as possible as it can. </paragraph>
<paragraph id="P-0009" lvl="0"><number>&lsqb;0009&rsqb;</number> In addition, conventional methods consider only current traffic being routed through network as link or node cost in LSP determination. In other words, they do not consider traffic to be routed at all, which restricts the most optimal path determination from an overall network point of view. Therefore, such conventional methods reveal low efficiency of traffic engineering. </paragraph>
<paragraph id="P-0010" lvl="0"><number>&lsqb;0010&rsqb;</number> In the meantime, due to rapid growth of an IP base network, various multimedia services such as VoIP, VOD, AOD, on-line movie, and video conference are being demanded. Many of those multi-media services require a point-to-multipoint (PTM) tree. If a PTM multimedia service is provided through PTP LSPs, use efficiency of network resources becomes worse and/or management of QoS becomes not easy. This is because multicast traffic is routed through a unicast way. </paragraph>
<paragraph id="P-0011" lvl="0"><number>&lsqb;0011&rsqb;</number> In the Internet proposal room of the IETF committee, many ways to distribute MPLS label are being listed up. Those many ways use PIM-SM or PIM-DM which is conventional multicast IP protocol. Besides the proposed many ways, MPLS multicasting way is being standardized in the IETF. </paragraph>
<paragraph id="P-0012" lvl="0"><number>&lsqb;0012&rsqb;</number> However, since tree determining methods of existing multicast protocols proposed until now are all receiver-based, it is not easy to reflect intentions of a service provider or users appropriately. Furthermore, a multicast traffic transporting method using an existing PTP path determining way can not use network resources efficiently, which results in deterioration of service quality. </paragraph>
<paragraph id="P-0013" lvl="0"><number>&lsqb;0013&rsqb;</number> In addition, all existing tree determining methods consider only current network state, namely they do not consider traffic to be routed at all, which causes a problem that traffic load is not distributed uniformly over an overall network. </paragraph>
</section>
<section>
<heading lvl="1">SUMMARY OF THE INVENTION </heading>
<paragraph id="P-0014" lvl="0"><number>&lsqb;0014&rsqb;</number> It is an object of the present invention to provide a traffic route determining method in an MPLS network which determines more than one traffic route at an originating node in consideration of current network state and a traffic demand to be routed. </paragraph>
<paragraph id="P-0015" lvl="0"><number>&lsqb;0015&rsqb;</number> It is another object of the present invention to provide a traffic route determining method in an MPLS network which, when two primary and one backup LSP for a PTP are to be determined to achieve stable PTP routing of a traffic demanding relatively high QoS, determines optimal traffic paths from a cost point of view while reducing a reserved bandwidth of a backup path as possible as it can and preparing efficiently for network fault. </paragraph>
<paragraph id="P-0016" lvl="0"><number>&lsqb;0016&rsqb;</number> It is another object of the present invention to provide a traffic route determining method in an MPLS network which distributes a traffic demand optimally to two determined LSTs (Label Switched Trees) for a PTM and equilibrates network load over an overall network at same time by considering a traffic demand to be routed as well as current network state. </paragraph>
<paragraph id="P-0017" lvl="0"><number>&lsqb;0017&rsqb;</number> A method of determining routes in an MPLS network in accordance with the present invention is characterized in that it comprises the steps of: removing links of remaining capacity below a traffic demand to be routed from all links of the MPLS network to produce the first network topology; calculating distance of every link of the first network topology based on current traffic flowing each link and the traffic demand; determining the first route for the traffic demand based on the calculated distance information; removing links of remaining capacity below the traffic demand and links belonging to the determined first route from all links of the MPLS network to produce the second network topology; calculating distance of every link of the second network topology based on current traffic flowing each link and the traffic demand; determining the second route for the traffic demand based on the distance information obtained from the second network topology; and partitioning the traffic demand into two portions and allocating the two portions to the first and the second route, respectively. </paragraph>
<paragraph id="P-0018" lvl="0"><number>&lsqb;0018&rsqb;</number> Another method of determining routes in an MPLS network in accordance with the present invention is characterized in that it comprises the steps of: removing links of remaining capacity below a traffic demand to be routed from all links of the MPLS network to produce the first network topology; calculating distance of every link of the first network topology based on current traffic flowing each link and the traffic demand; determining the first route for the traffic demand based on the calculated distance information; removing links of remaining capacity below zero and/or links belonging to the determined first route from all links of the MPLS network to produce the second network topology; calculating distance of every link of the second network topology based on current traffic flowing each link and the traffic demand; determining the second route for the traffic demand based on the distance information obtained from the second network topology; and partitioning the traffic demand into two portions and allocating the two portions to the first and the second route, respectively.</paragraph>
</section>
</summary-of-invention>
<brief-description-of-drawings>
<section>
<heading lvl="1">BRIEF DESCRIPTION OF THE DRAWINGS </heading>
<paragraph id="P-0019" lvl="0"><number>&lsqb;0019&rsqb;</number> The accompanying drawings, which are included to provide a further understanding of the present invention, illustrate the preferred embodiments of the invention, and together with the description, serve to explain the principles of the present invention, and wherein: </paragraph>
<paragraph id="P-0020" lvl="0"><number>&lsqb;0020&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1</cross-reference> is an illustrative MPLS network composed of several routers; </paragraph>
<paragraph id="P-0021" lvl="0"><number>&lsqb;0021&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 2</cross-reference> is another illustrative MPLS network in which two primary LSPs (Label Switched Paths) and a single backup LSP are established for a PTP (point-to-point) traffic in accordance with the present invention; </paragraph>
<paragraph id="P-0022" lvl="0"><number>&lsqb;0022&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3</cross-reference> is another illustrative MPLS network in which two LSTs (Label Switched Trees) are established for a multicast traffic in accordance with the present invention; </paragraph>
<paragraph id="P-0023" lvl="0"><number>&lsqb;0023&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 4</cross-reference> is a simplified block diagram of an ingress LER (Label Edge Router) to determine LSPs or LSTs in accordance with the present invention; </paragraph>
<paragraph id="P-0024" lvl="0"><number>&lsqb;0024&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 5</cross-reference> is a flow diagram of an embodiment of a route determining method in accordance with the present invention; and </paragraph>
<paragraph id="P-0025" lvl="0"><number>&lsqb;0025&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 6</cross-reference> is a flow diagram of another embodiment of a route determining method in accordance with the present invention.</paragraph>
</section>
</brief-description-of-drawings>
<detailed-description>
<section>
<heading lvl="1">DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENT </heading>
<paragraph id="P-0026" lvl="0"><number>&lsqb;0026&rsqb;</number> In order that the invention may be fully understood, a preferred embodiment thereof will now be described with reference to the accompanying drawings. </paragraph>
<paragraph id="P-0027" lvl="0"><number>&lsqb;0027&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1</cross-reference> is an illustrative MPLS network <highlight><bold>100</bold></highlight> composed of several routers. Among those routers, a router functioning an entrance of the network <highlight><bold>100</bold></highlight> for an arbitrary data traffic is called ingress LER (Label Edge Router) while a router functioning as an exit of the network <highlight><bold>100</bold></highlight> is called egress LER. And, a router, located on a path from an ingress to an egress LER, functioning as a relay node is called LSR (Label Switching Router). In <cross-reference target="DRAWINGS">FIG. 1</cross-reference>, The numeral <highlight><bold>110</bold></highlight>, <highlight><bold>120</bold></highlight>, and <highlight><bold>130</bold></highlight> represent ingress LER, egress LER, and LSRs, respectively. A path connected from the ingress <highlight><bold>110</bold></highlight> to egress LER <highlight><bold>120</bold></highlight> through no or at least one LSR <highlight><bold>130</bold></highlight> is called &lsquo;LSP&rsquo;. In <cross-reference target="DRAWINGS">FIG. 1</cross-reference>, two LSPs &lsquo;LSP<highlight><bold>1</bold></highlight>&rsquo; and &lsquo;LSP<highlight><bold>2</bold></highlight>&rsquo; are marked. The LSP &lsquo;LSP<highlight><bold>1</bold></highlight>&rsquo; is a path of <highlight><bold>110</bold></highlight>&rarr;<highlight><bold>132</bold></highlight>&rarr;<highlight><bold>133</bold></highlight>&rarr;<highlight><bold>120</bold></highlight> and the LSP &lsquo;LSP<highlight><bold>2</bold></highlight>&rsquo; a path of <highlight><bold>110</bold></highlight>&rarr;<highlight><bold>131</bold></highlight>&rarr;<highlight><bold>120</bold></highlight>. Such LSPs are determined for an input traffic at the ingress LER <highlight><bold>110</bold></highlight>. </paragraph>
<paragraph id="P-0028" lvl="0"><number>&lsqb;0028&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 2</cross-reference> is another illustrative MPLS network in which two primary LSPs &lsquo;LSP<highlight><bold>1</bold></highlight>&rsquo; and &lsquo;LSP<highlight><bold>2</bold></highlight>&rsquo; and a single backup LSP are established for a PTP traffic to prepare protection switching. In <cross-reference target="DRAWINGS">FIG. 2</cross-reference>, one primary LSP &lsquo;LSP<highlight><bold>1</bold></highlight>&rsquo; is a path of Ingress&rarr;LSR<highlight><bold>2</bold></highlight>&rarr;LSR<highlight><bold>5</bold></highlight>&rarr;Egress, the other LSP<highlight><bold>2</bold></highlight> Ingress&rarr;LSR<highlight><bold>3</bold></highlight>&rarr;LSR<highlight><bold>6</bold></highlight>&rarr;Egress, and the backup LSP Ingress&equals;LSR<highlight><bold>1</bold></highlight>&rarr;LSR<highlight><bold>4</bold></highlight>&rarr;LSR<highlight><bold>7</bold></highlight>&rarr;Egress. The backup LSP is used as a roundabout path for traffic to be routed through the primary LSPs when they become in fault. The two primary LSPs share traffic demand optimally and the backup LSP reserves bandwidth for a roundabout path as much as the bandwidth of large part of the shared traffic. </paragraph>
<paragraph id="P-0029" lvl="0"><number>&lsqb;0029&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3</cross-reference> is another illustrative MPLS network in which two LSTs (Label Switched Trees) are established for a multicast traffic. <cross-reference target="DRAWINGS">FIG. 3</cross-reference> illustrates that an ingress LER has determined two LSTs &lsquo;LST<highlight><bold>1</bold></highlight>&rsquo; and &lsquo;LST<highlight><bold>2</bold></highlight>&rsquo;, equivalent to multiple LSPs, for an input multicast traffic destined for three egress LERs &lsquo;Egress<highlight><bold>1</bold></highlight>&rsquo;, &lsquo;Egress<highlight><bold>2</bold></highlight>&rsquo;, and &lsquo;Egress<highlight><bold>3</bold></highlight>&rsquo;. </paragraph>
<paragraph id="P-0030" lvl="0"><number>&lsqb;0030&rsqb;</number> The first LST &lsquo;LST<highlight><bold>1</bold></highlight>&rsquo;, drawn as thick sold line, is a tree of Ingress&rarr;LSR<highlight><bold>2</bold></highlight>&rarr;LSR<highlight><bold>5</bold></highlight>&rarr;Egress<highlight><bold>1</bold></highlight>, <highlight><bold>2</bold></highlight>, <highlight><bold>3</bold></highlight> and the second LST &lsquo;LST<highlight><bold>2</bold></highlight>&rsquo;, drawn as thick dotted line, is a tree of Ingress&rarr;LSR<highlight><bold>3</bold></highlight>&rarr;LSR<highlight><bold>5</bold></highlight>&rarr;Egress<highlight><bold>1</bold></highlight> and Ingress&rarr;LSR<highlight><bold>3</bold></highlight>&rarr;LSR<highlight><bold>6</bold></highlight>&rarr;Egress<highlight><bold>2</bold></highlight>,<highlight><bold>3</bold></highlight>. The two LSTs are determined by the ingress LER as aforementioned when routing of a multicast traffic is demanded. </paragraph>
<paragraph id="P-0031" lvl="0"><number>&lsqb;0031&rsqb;</number> For example, when multicast traffic <highlight><bold>10</bold></highlight> is to be routed from the ingress LER to three egress ones &lsquo;Egresses <highlight><bold>1</bold></highlight> to <highlight><bold>3</bold></highlight>&rsquo; the ingress LER determines the two LSTs &lsquo;LST<highlight><bold>1</bold></highlight>&rsquo; and &lsquo;LST<highlight><bold>2</bold></highlight>&rsquo; and distributes the multicast traffic <highlight><bold>10</bold></highlight> to the two LSTs at a certain ratio, e.g., 6 to 4. </paragraph>
<paragraph id="P-0032" lvl="0"><number>&lsqb;0032&rsqb;</number> In the MPLS network of <cross-reference target="DRAWINGS">FIG. 2</cross-reference>, the LSPs are determined with disjoint rule, however, in <cross-reference target="DRAWINGS">FIG. 3</cross-reference>, the LSTs are determined with no disjoint rule. </paragraph>
<paragraph id="P-0033" lvl="0"><number>&lsqb;0033&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 4</cross-reference> is a simplified block diagram of an ingress LER to determine LSPs or LSTs in accordance with the present invention. The ingress LER of <cross-reference target="DRAWINGS">FIG. 4</cross-reference> comprises an I/O interface <highlight><bold>401</bold></highlight>, equipped with many I/O ports, receiving/transmitting data trough the I/O ports; a switching matrix <highlight><bold>402</bold></highlight> setting output path of each input data to direct data toward its destination; a memory <highlight><bold>403</bold></highlight> storing a routing table; and a controller <highlight><bold>404</bold></highlight> constructing the routing table, and controlling the path setting of the switching matrix <highlight><bold>402</bold></highlight> based on the routing table to route input traffic to a suitable adjacent node. </paragraph>
<paragraph id="P-0034" lvl="0"><number>&lsqb;0034&rsqb;</number> The controller <highlight><bold>404</bold></highlight> constructs the routing table according to below-explained route determining manners, and stores it into the memory <highlight><bold>403</bold></highlight>. </paragraph>
<paragraph id="P-0035" lvl="0"><number>&lsqb;0035&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 5</cross-reference> is a flow diagram of an embodiment of a route determining method in accordance with the present invention. The embodiment of <cross-reference target="DRAWINGS">FIG. 5</cross-reference> is to determine two primary LSPs and a backup LSP. It is supposed that an ingress LER conducting the embodiment knows network topology, cost function (e.g., delay function), initial and remaining capacity of every link, and traffic demand to assign LSP for (namely, traffic load to be routed into network). If necessary, it is also supposed that all LSRs on an MPLS network know that information. </paragraph>
<paragraph id="P-0036" lvl="0"><number>&lsqb;0036&rsqb;</number> Notations used for explanation below are defined as follows. G or G(m,n) represents a network at the time when an LSP is to be determined for a new traffic where m is the number of total links and n the number of nodes; G<highlight><superscript>(p) </superscript></highlight>(z) represents a network G from which links of remaining capacity below z and links belonging to the path p are removed; y<highlight><subscript>i </subscript></highlight>is current traffic flow on link i (&equals;1, 2, . . . ,m); d is a traffic demand to be routed; f<highlight><subscript>i</subscript></highlight>(x<highlight><subscript>i</subscript></highlight>) is a cost in the event that traffic flow x<highlight><subscript>i </subscript></highlight>is loaded on link i; f<highlight><subscript>i</subscript></highlight>&prime;(x<highlight><subscript>i</subscript></highlight>) is a cost increasing rate per unit flow in the event that traffic flow x<highlight><subscript>i </subscript></highlight>is loaded on link i; dist(i) is a conceptual distance of link i; and p<highlight><subscript>k </subscript></highlight>is the k-th primary LSP where k&equals;1 and 2. </paragraph>
<paragraph id="P-0037" lvl="0"><number>&lsqb;0037&rsqb;</number> First, links of remaining capacity (marked &lsquo;c<highlight><subscript>i</subscript></highlight>&rsquo; hereinafter) below the traffic demand d are removed from all links of the MPLS network <highlight><bold>100</bold></highlight> (S<highlight><bold>501</bold></highlight>). A link means between two adjacent nodes, e.g., lines between <highlight><bold>110</bold></highlight> and <highlight><bold>131</bold></highlight>, <highlight><bold>132</bold></highlight> and <highlight><bold>133</bold></highlight>, etc. In the step S<highlight><bold>501</bold></highlight> of <cross-reference target="DRAWINGS">FIG. 5</cross-reference>, G(d) represents an MPLS network G(m,n) from which links of c<highlight><subscript>i </subscript></highlight>below d have been removed. </paragraph>
<paragraph id="P-0038" lvl="0"><number>&lsqb;0038&rsqb;</number> Next, dist<highlight><subscript>1 </subscript></highlight>(i) is calculated for each link i of the network G(d) based on Y<highlight><subscript>i </subscript></highlight>of each link i and the traffic demand d. If a delay function is used as the cost function f<highlight><subscript>i</subscript></highlight>(x<highlight><subscript>i</subscript></highlight>), the dist<highlight><subscript>l</subscript></highlight>(i) is defined as a derivative of f<highlight><subscript>i</subscript></highlight>(x<highlight><subscript>i</subscript></highlight>), namely, f<highlight><subscript>i</subscript></highlight>&prime;(x<highlight><subscript>i</subscript></highlight>) where x<highlight><subscript>l </subscript></highlight>is replaced with y<highlight><subscript>i</subscript></highlight>&plus;d. Therefore, every link distance of network G(d) is obtained from the following Eq. (1) (S<highlight><bold>502</bold></highlight>).  
<math-cwu id="MATH-US-00001">
<number>1</number>
<math>
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <msub>
            <mi>dist</mi>
            <mn>1</mn>
          </msub>
          <mo>&af;</mo>
          <mrow>
            <mo>(</mo>
            <mi>i</mi>
            <mo>)</mo>
          </mrow>
        </mrow>
        <mo>=</mo>
        <mrow>
          <mrow>
            <msubsup>
              <mi>f</mi>
              <mi>i</mi>
              <mi>&prime;</mi>
            </msubsup>
            <mo>&af;</mo>
            <mrow>
              <mo>(</mo>
              <mrow>
                <msub>
                  <mi>y</mi>
                  <mi>i</mi>
                </msub>
                <mo>+</mo>
                <mi>d</mi>
              </mrow>
              <mo>)</mo>
            </mrow>
          </mrow>
          <mo>=</mo>
          <mrow>
            <mfrac>
              <mrow>
                <msub>
                  <mi>tc</mi>
                  <mi>i</mi>
                </msub>
                <mo>-</mo>
                <msub>
                  <mi>y</mi>
                  <mi>i</mi>
                </msub>
              </mrow>
              <msup>
                <mrow>
                  <mo>(</mo>
                  <mrow>
                    <msub>
                      <mi>tc</mi>
                      <mrow>
                        <mi>i</mi>
                        <mo>-</mo>
                      </mrow>
                    </msub>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>(</mo>
                      <mrow>
                        <msub>
                          <mi>y</mi>
                          <mi>i</mi>
                        </msub>
                        <mo>+</mo>
                        <mi>d</mi>
                      </mrow>
                      <mo>)</mo>
                    </mrow>
                  </mrow>
                  <mo>)</mo>
                </mrow>
                <mn>2</mn>
              </msup>
            </mfrac>
            <mo>=</mo>
            <mfrac>
              <msub>
                <mi>c</mi>
                <mi>i</mi>
              </msub>
              <msup>
                <mrow>
                  <mo>(</mo>
                  <mrow>
                    <msub>
                      <mi>c</mi>
                      <mi>i</mi>
                    </msub>
                    <mo>-</mo>
                    <mi>d</mi>
                  </mrow>
                  <mo>)</mo>
                </mrow>
                <mn>2</mn>
              </msup>
            </mfrac>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mi>Eq</mi>
        <mo>.</mo>
        <mstyle>
          <mtext>&emsp;</mtext>
        </mstyle>
        <mo>&it;</mo>
        <mrow>
          <mo>(</mo>
          <mn>1</mn>
          <mo>)</mo>
        </mrow>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
<mathematica-file id="MATHEMATICA-00001" file="US20030002444A1-20030102-M00001.NB"/>
<image id="EMI-M00001" wi="216.027" he="18.96615" file="US20030002444A1-20030102-M00001.TIF" imf="TIFF" ti="MF"/>
</math-cwu>
</paragraph>
<paragraph id="P-0039" lvl="0"><number>&lsqb;0039&rsqb;</number> In Eq. (1), i represents link index, namely, from 1 to m where m is the number of total links, dist(i) is distance of link i, tc<highlight><subscript>i </subscript></highlight>and c<highlight><subscript>i </subscript></highlight>are initial and remaining capacity, respectively, of link i. Therefore, c<highlight><subscript>i </subscript></highlight>is equal to &lsquo;tc<highlight><subscript>i</subscript></highlight>-y<highlight><subscript>i</subscript></highlight>&rsquo;. In addition, if delay at link i is expressed by f<highlight><subscript>i</subscript></highlight>(x<highlight><subscript>i</subscript></highlight>) where x<highlight><subscript>i </subscript></highlight>is traffic flowing link i, f<highlight><subscript>i</subscript></highlight>(x<highlight><subscript>i</subscript></highlight>)&equals;x<highlight><subscript>i</subscript></highlight>/(tc<highlight><subscript>i</subscript></highlight>-x<highlight><subscript>i</subscript></highlight>) and its derivative f<highlight><subscript>i</subscript></highlight>&prime;(x<highlight><subscript>i</subscript></highlight>)&equals;c<highlight><subscript>i</subscript></highlight>/(tc<highlight><subscript>i</subscript></highlight>&minus;x<highlight><subscript>i</subscript></highlight>)<highlight><superscript>2</superscript></highlight>. Therefore, Eq. (1) is derived by replacing variable x<highlight><subscript>i </subscript></highlight>with y<highlight><subscript>i</subscript></highlight>&plus;d in the derivative f<highlight><subscript>i</subscript></highlight>&prime;(x<highlight><subscript>i</subscript></highlight>). </paragraph>
<paragraph id="P-0040" lvl="0"><number>&lsqb;0040&rsqb;</number> f<highlight><subscript>i</subscript></highlight>&prime;(x<highlight><subscript>i</subscript></highlight>) is a function of cost increasing rate per unit flow in the event that traffic flow x<highlight><subscript>i </subscript></highlight>is flowed on link i. </paragraph>
<paragraph id="P-0041" lvl="0"><number>&lsqb;0041&rsqb;</number> The cost function may not use delay function. If a function gives conceptual distance of every link for y<highlight><subscript>i</subscript></highlight>&plus;d, that function can be used as cost function of the present invention. Especially, if a nonlinear function is adopted for cost versus traffic flow of a link, a link of minimum cost can be found. </paragraph>
<paragraph id="P-0042" lvl="0"><number>&lsqb;0042&rsqb;</number> Next, a PTP path p<highlight><bold>1</bold></highlight>(&equals;LSP<highlight><bold>1</bold></highlight>) is determined based on the information dist<highlight><subscript>1</subscript></highlight>(i) of every link (S<highlight><bold>503</bold></highlight>). The determined PTP path is a link set of which distance sum is smallest from ingress to egress LER. </paragraph>
<paragraph id="P-0043" lvl="0"><number>&lsqb;0043&rsqb;</number> After the first path LSP<highlight><bold>1</bold></highlight> is determined at the step S<highlight><bold>503</bold></highlight>, another network topology is constructed as follows. </paragraph>
<paragraph id="P-0044" lvl="0"><number>&lsqb;0044&rsqb;</number> Namely, links of c<highlight><subscript>i </subscript></highlight>below the traffic demand d and links belonging to the first path p<highlight><bold>1</bold></highlight>(&equals;LSP<highlight><bold>1</bold></highlight>) are removed from all links of the MPLS network <highlight><bold>100</bold></highlight> (S<highlight><bold>504</bold></highlight>). Thusly-constructed network is expressed as G<highlight><superscript>&lcub;p1&rcub;</superscript></highlight>(d) </paragraph>
<paragraph id="P-0045" lvl="0"><number>&lsqb;0045&rsqb;</number> Next, distance dist<highlight><subscript>2</subscript></highlight>(i) of every link of new network topology G<highlight><superscript>&lcub;p1&rcub;</superscript></highlight>(d) is calculated again from Eq. (2) based on y<highlight><subscript>i </subscript></highlight>of each link i and the traffic demand d (S<highlight><bold>505</bold></highlight>). Eq. (2) is totally same with Eq. (1) because delay is selected as cost.  
<math-cwu id="MATH-US-00002">
<number>2</number>
<math>
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <msub>
            <mi>dist</mi>
            <mn>2</mn>
          </msub>
          <mo>&af;</mo>
          <mrow>
            <mo>(</mo>
            <mi>i</mi>
            <mo>)</mo>
          </mrow>
        </mrow>
        <mo>=</mo>
        <mrow>
          <mrow>
            <msubsup>
              <mi>f</mi>
              <mi>i</mi>
              <mi>&prime;</mi>
            </msubsup>
            <mo>&af;</mo>
            <mrow>
              <mo>(</mo>
              <mrow>
                <msub>
                  <mi>y</mi>
                  <mi>i</mi>
                </msub>
                <mo>+</mo>
                <mi>d</mi>
              </mrow>
              <mo>)</mo>
            </mrow>
          </mrow>
          <mo>=</mo>
          <mrow>
            <mfrac>
              <mrow>
                <msub>
                  <mi>tc</mi>
                  <mi>i</mi>
                </msub>
                <mo>-</mo>
                <msub>
                  <mi>y</mi>
                  <mi>i</mi>
                </msub>
              </mrow>
              <msup>
                <mrow>
                  <mo>(</mo>
                  <mrow>
                    <msub>
                      <mi>tc</mi>
                      <mrow>
                        <mi>i</mi>
                        <mo>-</mo>
                      </mrow>
                    </msub>
                    <mo>&af;</mo>
                    <mrow>
                      <mo>(</mo>
                      <mrow>
                        <msub>
                          <mi>y</mi>
                          <mi>i</mi>
                        </msub>
                        <mo>+</mo>
                        <mi>d</mi>
                      </mrow>
                      <mo>)</mo>
                    </mrow>
                  </mrow>
                  <mo>)</mo>
                </mrow>
                <mn>2</mn>
              </msup>
            </mfrac>
            <mo>=</mo>
            <mfrac>
              <msub>
                <mi>c</mi>
                <mi>i</mi>
              </msub>
              <msup>
                <mrow>
                  <mo>(</mo>
                  <mrow>
                    <msub>
                      <mi>c</mi>
                      <mi>i</mi>
                    </msub>
                    <mo>-</mo>
                    <mi>d</mi>
                  </mrow>
                  <mo>)</mo>
                </mrow>
                <mn>2</mn>
              </msup>
            </mfrac>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mi>Eq</mi>
        <mo>.</mo>
        <mstyle>
          <mtext>&emsp;</mtext>
        </mstyle>
        <mo>&it;</mo>
        <mrow>
          <mo>(</mo>
          <mn>2</mn>
          <mo>)</mo>
        </mrow>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
<mathematica-file id="MATHEMATICA-00002" file="US20030002444A1-20030102-M00002.NB"/>
<image id="EMI-M00002" wi="216.027" he="18.96615" file="US20030002444A1-20030102-M00002.TIF" imf="TIFF" ti="MF"/>
</math-cwu>
</paragraph>
<paragraph id="P-0046" lvl="0"><number>&lsqb;0046&rsqb;</number> Afterwards, the second PTP path p<highlight><bold>2</bold></highlight>(&equals;LSP<highlight><bold>2</bold></highlight>) is determined based on the information dist<highlight><subscript>2</subscript></highlight>(i) of every link calculated in the step S<highlight><bold>505</bold></highlight> (S<highlight><bold>506</bold></highlight>). The determined second PTP path is also a link set of which distance sum is smallest the same as the first path. </paragraph>
<paragraph id="P-0047" lvl="0"><number>&lsqb;0047&rsqb;</number> Then, the ingress LER calculates dividing portions q<highlight><subscript>1 </subscript></highlight>and q<highlight><subscript>2 </subscript></highlight>of the traffic demand d (&equals;q<highlight><subscript>1</subscript></highlight>&plus;q<highlight><subscript>2</subscript></highlight>). The divided traffic q<highlight><subscript>1 </subscript></highlight>and q<highlight><subscript>2 </subscript></highlight>are chosen to values to make the function of Eq. (3) smallest (S<highlight><bold>507</bold></highlight>).  
<math-cwu id="MATH-US-00003">
<number>3</number>
<math>
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mi>g</mi>
          <mo>&af;</mo>
          <mrow>
            <mo>(</mo>
            <mrow>
              <mi>q1</mi>
              <mo>,</mo>
              <mi>q2</mi>
            </mrow>
            <mo>)</mo>
          </mrow>
        </mrow>
        <mo>=</mo>
        <mrow>
          <munderover>
            <mo>&Sum;</mo>
            <mrow>
              <mi>i</mi>
              <mo>=</mo>
              <mn>1</mn>
            </mrow>
            <mi>m</mi>
          </munderover>
          <mo>&it;</mo>
          <mrow>
            <msub>
              <mi>f</mi>
              <mi>i</mi>
            </msub>
            <mo>&af;</mo>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mrow>
                  <msub>
                    <mi>q</mi>
                    <mn>1</mn>
                  </msub>
                  <mo>&it;</mo>
                  <msubsup>
                    <mi>&delta;</mi>
                    <mi>i</mi>
                    <mn>1</mn>
                  </msubsup>
                </mrow>
                <mo>+</mo>
                <mrow>
                  <msub>
                    <mi>q</mi>
                    <mn>2</mn>
                  </msub>
                  <mo>&it;</mo>
                  <msubsup>
                    <mi>&delta;</mi>
                    <mi>i</mi>
                    <mn>2</mn>
                  </msubsup>
                </mrow>
              </mrow>
              <mo>)</mo>
            </mrow>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mi>Eq</mi>
        <mo>.</mo>
        <mstyle>
          <mtext>&emsp;</mtext>
        </mstyle>
        <mo>&it;</mo>
        <mrow>
          <mo>(</mo>
          <mn>3</mn>
          <mo>)</mo>
        </mrow>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
<mathematica-file id="MATHEMATICA-00003" file="US20030002444A1-20030102-M00003.NB"/>
<image id="EMI-M00003" wi="216.027" he="24.01245" file="US20030002444A1-20030102-M00003.TIF" imf="TIFF" ti="MF"/>
</math-cwu>
</paragraph>
<paragraph id="P-0048" lvl="7"><number>&lsqb;0048&rsqb;</number> where q<highlight><subscript>1</subscript></highlight>, q<highlight><subscript>2</subscript></highlight>&gt;0, c<highlight><subscript>i</subscript></highlight>&gE;q<highlight><subscript>1</subscript></highlight>&dgr;<highlight><subscript>i</subscript></highlight><highlight><superscript>1</superscript></highlight>&plus;q<highlight><subscript>2</subscript></highlight>&dgr;<highlight><subscript>i</subscript></highlight><highlight><superscript>2</superscript></highlight><highlight><bold>&gE;0, and &dgr;</bold></highlight><highlight><subscript>i</subscript></highlight><highlight><superscript>k </superscript></highlight>is 1 if link i belongs to the determined path p<highlight><subscript>k </subscript></highlight>(k&equals;1,2). </paragraph>
<paragraph id="P-0049" lvl="0"><number>&lsqb;0049&rsqb;</number> Finally, a backup LSP will be determined from links being capable of carrying a large portion among divided traffic q<highlight><subscript>1 </subscript></highlight>and q<highlight><subscript>2</subscript></highlight>. For this backup LSP determination, links of c<highlight><subscript>i </subscript></highlight>below q<highlight><subscript>b</subscript></highlight>&equals;max(q<highlight><subscript>1</subscript></highlight>,q<highlight><subscript>2</subscript></highlight>) and links belonging to the first path p<highlight><subscript>1</subscript></highlight>(&equals;LSP<highlight><bold>1</bold></highlight>) or p<highlight><subscript>2</subscript></highlight>(&equals;LSP<highlight><bold>2</bold></highlight>) are removed from all links of the MPLS network <highlight><bold>100</bold></highlight> (S<highlight><bold>508</bold></highlight>). Thusly-constructed network is expressed as G<highlight><superscript>&lcub;p1,p2&rcub;</superscript></highlight> (q<highlight><subscript>b</subscript></highlight>). </paragraph>
<paragraph id="P-0050" lvl="0"><number>&lsqb;0050&rsqb;</number> Next, distance dist<highlight><subscript>3</subscript></highlight>(i) of every link of the network topology G<highlight><superscript>&lcub;p1,p2&rcub;</superscript></highlight> (q<highlight><subscript>b</subscript></highlight>) is calculated once more with the same manner as in the above primary path determination based on y<highlight><subscript>i </subscript></highlight>of each link i and the traffic demand q<highlight><subscript>b </subscript></highlight>(S<highlight><bold>509</bold></highlight>). The value substituted for x<highlight><subscript>i </subscript></highlight>of the cost function f<highlight><subscript>i</subscript></highlight>(x<highlight><subscript>i</subscript></highlight>) is y<highlight><subscript>i</subscript></highlight>&plus;q<highlight><subscript>b</subscript></highlight>. </paragraph>
<paragraph id="P-0051" lvl="0"><number>&lsqb;0051&rsqb;</number> Afterwards, the third PTP path p<highlight><subscript>b</subscript></highlight>(&equals;LSP<highlight><bold>3</bold></highlight>) is determined based on the information dist<highlight><subscript>3</subscript></highlight>(i) of every link calculated in the step S<highlight><bold>509</bold></highlight> (S<highlight><bold>510</bold></highlight>). The determined third PTP path is also a link set of which distance sum is smallest the same as the first path. </paragraph>
<paragraph id="P-0052" lvl="0"><number>&lsqb;0052&rsqb;</number> Among the three paths, the ingress LER sets the first &lsquo;LSP<highlight><bold>1</bold></highlight>&rsquo; and the second path &lsquo;LSP<highlight><bold>2</bold></highlight>&rsquo; to primary LSPs and the third path &lsquo;LSP<highlight><bold>3</bold></highlight>&rsquo; to backup LSP (S<highlight><bold>511</bold></highlight>). </paragraph>
<paragraph id="P-0053" lvl="0"><number>&lsqb;0053&rsqb;</number> After necessary LSPs are determined completely, the ingress LER allocates the divided traffic q<highlight><subscript>1 </subscript></highlight>and q<highlight><subscript>2 </subscript></highlight>to the paths &lsquo;LSP<highlight><bold>1</bold></highlight>&rsquo; and &lsquo;LSP<highlight><bold>2</bold></highlight>&rsquo;, respectively. </paragraph>
<paragraph id="P-0054" lvl="0"><number>&lsqb;0054&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 6</cross-reference> is a flow diagram of another embodiment of a route determining method in accordance with the present invention. </paragraph>
<paragraph id="P-0055" lvl="0"><number>&lsqb;0055&rsqb;</number> It is also supposed that an ingress LER conducting this embodiment knows network topology, cost function (e.g., delay function), initial and remaining capacity c<highlight><subscript>i </subscript></highlight>of every link, and multicast traffic demand d&prime; to assign LST for (namely, multicast traffic load to be routed). If necessary, it is also supposed that all LSRs on an MPLS network know that information and are able to copy label and traffic. </paragraph>
<paragraph id="P-0056" lvl="0"><number>&lsqb;0056&rsqb;</number> First, links of remaining capacity c<highlight><subscript>i </subscript></highlight>below the multicast traffic demand d&prime; are removed from all links of the MPLS network G <highlight><bold>100</bold></highlight> to create new network topology G(d&prime;) (S<highlight><bold>601</bold></highlight>). </paragraph>
<paragraph id="P-0057" lvl="0"><number>&lsqb;0057&rsqb;</number> Next, dist<highlight><subscript>a</subscript></highlight>(i) is calculated for each link i of the network G(d&prime;) based on y<highlight><subscript>i </subscript></highlight>of each link i and the multicast traffic demand d&prime; (S<highlight><bold>602</bold></highlight>) If a delay function is adopted as a cost function f<highlight><subscript>i</subscript></highlight>(x<highlight><subscript>i</subscript></highlight>), the Eq. (1) can be used for this distance calculation. </paragraph>
<paragraph id="P-0058" lvl="0"><number>&lsqb;0058&rsqb;</number> Next, the first PTM tree t<highlight><bold>1</bold></highlight>(&equals;LST<highlight><bold>1</bold></highlight>) is determined on the network G(d&prime;) based on the information dist<highlight><subscript>1</subscript></highlight>(i) of every link (S<highlight><bold>603</bold></highlight>). In this tree determination, it is preferable to select a tree of which distance sum from ingress to egress LER is smaller than a predetermined threshold. The reason not to find a tree of the smallest distance sum is that huge computation power may be required. The threshold is set such that a tree of relatively small distance sum can be obtained with allowable computing load. </paragraph>
<paragraph id="P-0059" lvl="0"><number>&lsqb;0059&rsqb;</number> After the first tree is determined, the determination rule of next tree is checked (S<highlight><bold>604</bold></highlight>). If the rule is set to &lsquo;no disjoint&rsquo;, the network G(<highlight><bold>0</bold></highlight>) is constructed from the network G where the multicast traffic d&prime; is supposedly loaded to links belonging to the determined tree t<highlight><bold>1</bold></highlight>(&equals;LST<highlight><bold>1</bold></highlight>) (S<highlight><bold>605</bold></highlight>-<highlight><bold>1</bold></highlight>). The network G(<highlight><bold>0</bold></highlight>) means a network composed of links of c<highlight><subscript>i </subscript></highlight>not below zero. </paragraph>
<paragraph id="P-0060" lvl="0"><number>&lsqb;0060&rsqb;</number> If the rule is set to &lsquo;disjoint&rsquo;, network topology G<highlight><superscript>&lcub;t1&rcub;</superscript></highlight>(<highlight><bold>0</bold></highlight>) is constructed from the network G (S<highlight><bold>605</bold></highlight>-<highlight><bold>2</bold></highlight>). </paragraph>
<paragraph id="P-0061" lvl="0"><number>&lsqb;0061&rsqb;</number> Next, distance dist<highlight><subscript>b</subscript></highlight>(i) of every link of the new network topology G(<highlight><bold>0</bold></highlight>) or G<highlight><superscript>&lcub;t1&rcub;</superscript></highlight>(<highlight><bold>0</bold></highlight>) is calculated again based on y<highlight><subscript>i </subscript></highlight>of each link i and the traffic demand d&prime; (S<highlight><bold>606</bold></highlight>). Since G(<highlight><bold>0</bold></highlight>) and G<highlight><superscript>&lcub;t1&rcub;</superscript></highlight>(<highlight><bold>0</bold></highlight>) are all subset of G(d&prime;), the distance set calculated from the dist<highlight><subscript>a</subscript></highlight>(i) may be re-used instead of calculating dist<highlight><subscript>b</subscript></highlight>(i) for G(<highlight><bold>0</bold></highlight>) or G<highlight><superscript>&lcub;t1&rcub;</superscript></highlight>(<highlight><bold>0</bold></highlight>) one by one. </paragraph>
<paragraph id="P-0062" lvl="0"><number>&lsqb;0062&rsqb;</number> Afterwards, the second PTM tree t<highlight><bold>2</bold></highlight>(&equals;LST<highlight><bold>2</bold></highlight>) is determined based on the information dist<highlight><subscript>b</subscript></highlight>(i) of every link the same as the first PTM tree (S<highlight><bold>607</bold></highlight>). </paragraph>
<paragraph id="P-0063" lvl="0"><number>&lsqb;0063&rsqb;</number> Finally, the ingress LER calculates dividing portions r<highlight><subscript>1 </subscript></highlight>and r<highlight><subscript>2 </subscript></highlight>of the multicast traffic demand d&prime; (&equals;r<highlight><subscript>1</subscript></highlight>&plus;r<highlight><subscript>2</subscript></highlight>). The divided traffics r<highlight><subscript>1 </subscript></highlight>and r<highlight><subscript>2 </subscript></highlight>are chosen to values to make the function of Eq. (4) smallest.  
<math-cwu id="MATH-US-00004">
<number>4</number>
<math>
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mi>g</mi>
          <mo>&af;</mo>
          <mrow>
            <mo>(</mo>
            <mrow>
              <msub>
                <mi>r</mi>
                <mn>1</mn>
              </msub>
              <mo>,</mo>
              <msub>
                <mi>r</mi>
                <mn>2</mn>
              </msub>
            </mrow>
            <mo>)</mo>
          </mrow>
        </mrow>
        <mo>=</mo>
        <mrow>
          <munderover>
            <mo>&Sum;</mo>
            <mrow>
              <mi>i</mi>
              <mo>=</mo>
              <mn>1</mn>
            </mrow>
            <mi>m</mi>
          </munderover>
          <mo>&it;</mo>
          <mrow>
            <msub>
              <mi>f</mi>
              <mi>i</mi>
            </msub>
            <mo>&af;</mo>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mrow>
                  <msub>
                    <mi>r</mi>
                    <mn>1</mn>
                  </msub>
                  <mo>&it;</mo>
                  <msubsup>
                    <mi>&delta;</mi>
                    <mi>i</mi>
                    <mn>1</mn>
                  </msubsup>
                </mrow>
                <mo>+</mo>
                <mrow>
                  <msub>
                    <mi>r</mi>
                    <mn>2</mn>
                  </msub>
                  <mo>&it;</mo>
                  <msubsup>
                    <mi>&delta;</mi>
                    <mi>i</mi>
                    <mn>2</mn>
                  </msubsup>
                </mrow>
              </mrow>
              <mo>)</mo>
            </mrow>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mi>Eq</mi>
        <mo>.</mo>
        <mstyle>
          <mtext>&emsp;</mtext>
        </mstyle>
        <mo>&it;</mo>
        <mrow>
          <mo>(</mo>
          <mn>4</mn>
          <mo>)</mo>
        </mrow>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
<mathematica-file id="MATHEMATICA-00004" file="US20030002444A1-20030102-M00004.NB"/>
<image id="EMI-M00004" wi="216.027" he="24.01245" file="US20030002444A1-20030102-M00004.TIF" imf="TIFF" ti="MF"/>
</math-cwu>
</paragraph>
<paragraph id="P-0064" lvl="7"><number>&lsqb;0064&rsqb;</number> where r<highlight><subscript>1</subscript></highlight>,r<highlight><subscript>2</subscript></highlight>&gt;0, c<highlight><subscript>i</subscript></highlight>&gt;r<highlight><subscript>1</subscript></highlight>&dgr;<highlight><subscript>i</subscript></highlight><highlight><superscript>1</superscript></highlight>&plus;r<highlight><subscript>2</subscript></highlight>&dgr;<highlight><subscript>i</subscript></highlight><highlight><superscript>2</superscript></highlight>&gE;0, and &dgr;<highlight><subscript>i</subscript></highlight><highlight><superscript>k </superscript></highlight>is 1 if link i belongs to the determined tree t<highlight><subscript>k </subscript></highlight>(k&equals;1,2). </paragraph>
<paragraph id="P-0065" lvl="0"><number>&lsqb;0065&rsqb;</number> After two LSTs are determined completely, the ingress LER allocates the divided multicast traffic r<highlight><subscript>1 </subscript></highlight>and r<highlight><subscript>2 </subscript></highlight>to the trees &lsquo;LST<highlight><bold>1</bold></highlight>&rsquo; and &lsquo;LST<highlight><bold>2</bold></highlight>&rsquo;, respectively (S<highlight><bold>608</bold></highlight>). </paragraph>
<paragraph id="P-0066" lvl="0"><number>&lsqb;0066&rsqb;</number> The above-explained route determining method in an MPLS network according to the present invention, which routes PTP or PTM traffic through a plurality of primary paths or trees, can reduce overall cost (transporting cost, traffic delay, etc) remarkably, cope with network fault efficiently, and improve traffic viability against network fault if a backup path is established disjointedly with primary paths. </paragraph>
<paragraph id="P-0067" lvl="0"><number>&lsqb;0067&rsqb;</number> Furthermore, the present method can reduce cost taken in routing multicast traffic and improve viability of multicast traffic against network fault if plural trees are established disjointedly each other. This is because when one of the plural trees becomes fault not all but some of multicast traffic is lost. However, entire multicast traffic is lost in a conventional method using one tree for routing a multicast traffic. </paragraph>
<paragraph id="P-0068" lvl="0"><number>&lsqb;0068&rsqb;</number> It will be apparent to those skilled in the art that various modifications and variations can be made in the present invention without departing from the spirit or scope of the invention. Thus, it is intended that the present invention cover the modifications and variations of this invention provided they come within the scope of the appended claims and their equivalents. </paragraph>
</section>
</detailed-description>
</subdoc-description>
<subdoc-claims>
<heading lvl="1">What is claimed is: </heading>
<claim id="CLM-00001">
<claim-text><highlight><bold>1</bold></highlight>. A method of determining routes in an MPLS (Multi-Protocol Label Switching) network, comprising the steps of: 
<claim-text>(a) removing links of remaining capacity below a traffic demand to be routed from all links of the MPLS network; </claim-text>
<claim-text>(b) calculating distance of every link of the network constructed in said step (a)S, based on current traffic flowing each link and the traffic demand; and </claim-text>
<claim-text>(c) determining a first route for the traffic demand based on the calculated distance information. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00002">
<claim-text><highlight><bold>2</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein the link distance is obtained by replacing variable x of a given cost function f(x) with current traffic flowing each link and the traffic demand. </claim-text>
</claim>
<claim id="CLM-00003">
<claim-text><highlight><bold>3</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein said steps (a) to (c) are conducted by an ingress edge router which the traffic demand enters. </claim-text>
</claim>
<claim id="CLM-00004">
<claim-text><highlight><bold>4</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, further comprising the steps of: 
<claim-text>(d) removing links of remaining capacity below the traffic demand and links belonging to the determined first route from all links of the MPLS network; </claim-text>
<claim-text>(e) calculating distance of every link of the network constructed in said step (d), based on current traffic flowing each link and the traffic demand; </claim-text>
<claim-text>(f) determining a second route for the traffic demand based on the distance information obtained in said step (e); and </claim-text>
<claim-text>(g) partitioning the traffic demand into two portions and allocating the two portions to the first and the second route, respectively. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00005">
<claim-text><highlight><bold>5</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00004">claim 4</dependent-claim-reference>, further comprising the steps of: 
<claim-text>(h) removing links of remaining capacity below the traffic demand and links belonging to the first or the second route from all links of the MPLS network; </claim-text>
<claim-text>(i) calculating distance of every link of the network constructed in said step (h), based on the current traffic flowing each link and one selected from the partitioned two portions; and </claim-text>
<claim-text>(j) determining a backup route for the traffic demand based on the distance information calculated in said step (i). </claim-text>
</claim-text>
</claim>
<claim id="CLM-00006">
<claim-text><highlight><bold>6</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00005">claim 5</dependent-claim-reference>, wherein said selected partitioned portion is larger than the other. </claim-text>
</claim>
<claim id="CLM-00007">
<claim-text><highlight><bold>7</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00004">claim 4</dependent-claim-reference>, wherein the two partitioned portions are q<highlight><subscript>1 </subscript></highlight>and q<highlight><subscript>2 </subscript></highlight>that make a function of </claim-text>
<claim-text> 
<math-cwu id="MATH-US-00005">
<number>5</number>
<math>
<mrow>
  <mrow>
    <mi>g</mi>
    <mo>&af;</mo>
    <mrow>
      <mo>(</mo>
      <mrow>
        <mi>q1</mi>
        <mo>,</mo>
        <mi>q2</mi>
      </mrow>
      <mo>)</mo>
    </mrow>
  </mrow>
  <mo>=</mo>
  <mrow>
    <munderover>
      <mo>&Sum;</mo>
      <mrow>
        <mi>i</mi>
        <mo>=</mo>
        <mn>1</mn>
      </mrow>
      <mi>m</mi>
    </munderover>
    <mo>&it;</mo>
    <mrow>
      <msub>
        <mi>f</mi>
        <mi>i</mi>
      </msub>
      <mo>&af;</mo>
      <mrow>
        <mo>(</mo>
        <mrow>
          <mrow>
            <msub>
              <mi>q</mi>
              <mn>1</mn>
            </msub>
            <mo>&it;</mo>
            <msubsup>
              <mi>&delta;</mi>
              <mi>i</mi>
              <mn>1</mn>
            </msubsup>
          </mrow>
          <mo>+</mo>
          <mrow>
            <msub>
              <mi>q</mi>
              <mn>2</mn>
            </msub>
            <mo>&it;</mo>
            <msubsup>
              <mi>&delta;</mi>
              <mi>i</mi>
              <mn>2</mn>
            </msubsup>
          </mrow>
        </mrow>
        <mo>)</mo>
      </mrow>
    </mrow>
  </mrow>
</mrow>
</math>
<mathematica-file id="MATHEMATICA-00005" file="US20030002444A1-20030102-M00005.NB"/>
<image id="EMI-M00005" wi="216.027" he="24.01245" file="US20030002444A1-20030102-M00005.TIF" imf="TIFF" ti="MF"/>
</math-cwu>
</claim-text>
<claim-text>smallest in the event that f<highlight><subscript>i </subscript></highlight>(x) is given as a cost function of link i, wherein q<highlight><subscript>1</subscript></highlight>, q<highlight><subscript>2</subscript></highlight>&gt;0, c<highlight><subscript>i</subscript></highlight>&gE;q<highlight><subscript>1</subscript></highlight>&dgr;<highlight><subscript>i</subscript></highlight><highlight><superscript>1</superscript></highlight>&plus;q<highlight><subscript>2</subscript></highlight>&dgr;<highlight><subscript>i</subscript></highlight><highlight><superscript>2</superscript></highlight>&gE;0, and &dgr;<highlight><subscript>i</subscript></highlight><highlight><superscript>k </superscript></highlight>is 1 if link i belongs to the determined route p<highlight><subscript>k </subscript></highlight>(k&equals;1,2). </claim-text>
</claim>
<claim id="CLM-00008">
<claim-text><highlight><bold>8</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein the determined route is a link set of which distance sum is smallest from an ingress to an egress edge for the traffic demand. </claim-text>
</claim>
<claim id="CLM-00009">
<claim-text><highlight><bold>9</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein the determined route is a link set of which distance sum is below a predetermined threshold from an ingress to an egress edge for the traffic demand. </claim-text>
</claim>
<claim id="CLM-00010">
<claim-text><highlight><bold>10</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein the distance of each link is calculated from c<highlight><subscript>i</subscript></highlight>/(c<highlight><subscript>i</subscript></highlight>&minus;d)<highlight><superscript>2 </superscript></highlight>where i is link index, c<highlight><subscript>l </subscript></highlight>is the remaining capacity of link i, and d is the traffic demand. </claim-text>
</claim>
<claim id="CLM-00011">
<claim-text><highlight><bold>11</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, further comprising the steps of: 
<claim-text>(d) removing links of remaining capacity below zero and links belonging to the determined first route from all links of the MPLS network; </claim-text>
<claim-text>(e) calculating distance of every link of the network constructed in said step (d), based on current traffic flowing each link and the traffic demand; </claim-text>
<claim-text>(f) determining a second route for the traffic demand based on the distance information obtained in said step (e); and </claim-text>
<claim-text>(g) partitioning the traffic demand into two portions and allocating the two portions to the first and the second route, respectively. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00012">
<claim-text><highlight><bold>12</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, further comprising the steps of: 
<claim-text>(d) removing links of remaining capacity below zero from all links of the MPLS network; </claim-text>
<claim-text>(e) calculating distance of every link of the network constructed in said step (d), based on current traffic flowing each link and the traffic demand; </claim-text>
<claim-text>(f) determining a second route for the traffic demand based on the distance information obtained in said step (e); and </claim-text>
<claim-text>(g) partitioning the traffic demand into two portions and allocating the two portions to the first and the second route, respectively. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00013">
<claim-text><highlight><bold>13</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein the determined route consists of at least one path carrying a multicast traffic.</claim-text>
</claim>
</subdoc-claims>
<subdoc-drawings id="DRAWINGS">
<heading lvl="0" align="CENTER">Drawings</heading>
<representative-figure>6</representative-figure>
<figure id="figure-D00000">
<image id="EMI-D00000" file="US20030002444A1-20030102-D00000.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00001">
<image id="EMI-D00001" file="US20030002444A1-20030102-D00001.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00002">
<image id="EMI-D00002" file="US20030002444A1-20030102-D00002.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00003">
<image id="EMI-D00003" file="US20030002444A1-20030102-D00003.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00004">
<image id="EMI-D00004" file="US20030002444A1-20030102-D00004.TIF" imf="TIFF" ti="DR"/>
</figure>
</subdoc-drawings>
</patent-application-publication>
