<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE patent-application-publication SYSTEM "pap-v16-2002-01-01.dtd" [
<!ENTITY US20030001536A1-20030102-D00000.TIF SYSTEM "US20030001536A1-20030102-D00000.TIF" NDATA TIF>
<!ENTITY US20030001536A1-20030102-D00001.TIF SYSTEM "US20030001536A1-20030102-D00001.TIF" NDATA TIF>
<!ENTITY US20030001536A1-20030102-D00002.TIF SYSTEM "US20030001536A1-20030102-D00002.TIF" NDATA TIF>
<!ENTITY US20030001536A1-20030102-D00003.TIF SYSTEM "US20030001536A1-20030102-D00003.TIF" NDATA TIF>
<!ENTITY US20030001536A1-20030102-D00004.TIF SYSTEM "US20030001536A1-20030102-D00004.TIF" NDATA TIF>
<!ENTITY US20030001536A1-20030102-D00005.TIF SYSTEM "US20030001536A1-20030102-D00005.TIF" NDATA TIF>
<!ENTITY US20030001536A1-20030102-D00006.TIF SYSTEM "US20030001536A1-20030102-D00006.TIF" NDATA TIF>
<!ENTITY US20030001536A1-20030102-D00007.TIF SYSTEM "US20030001536A1-20030102-D00007.TIF" NDATA TIF>
<!ENTITY US20030001536A1-20030102-D00008.TIF SYSTEM "US20030001536A1-20030102-D00008.TIF" NDATA TIF>
<!ENTITY US20030001536A1-20030102-D00009.TIF SYSTEM "US20030001536A1-20030102-D00009.TIF" NDATA TIF>
<!ENTITY US20030001536A1-20030102-D00010.TIF SYSTEM "US20030001536A1-20030102-D00010.TIF" NDATA TIF>
<!ENTITY US20030001536A1-20030102-D00011.TIF SYSTEM "US20030001536A1-20030102-D00011.TIF" NDATA TIF>
<!ENTITY US20030001536A1-20030102-D00012.TIF SYSTEM "US20030001536A1-20030102-D00012.TIF" NDATA TIF>
<!ENTITY US20030001536A1-20030102-D00013.TIF SYSTEM "US20030001536A1-20030102-D00013.TIF" NDATA TIF>
<!ENTITY US20030001536A1-20030102-D00014.TIF SYSTEM "US20030001536A1-20030102-D00014.TIF" NDATA TIF>
<!ENTITY US20030001536A1-20030102-D00015.TIF SYSTEM "US20030001536A1-20030102-D00015.TIF" NDATA TIF>
]>
<patent-application-publication>
<subdoc-bibliographic-information>
<document-id>
<doc-number>20030001536</doc-number>
<kind-code>A1</kind-code>
<document-date>20030102</document-date>
</document-id>
<publication-filing-type>new</publication-filing-type>
<domestic-filing-data>
<application-number>
<doc-number>10179973</doc-number>
</application-number>
<application-number-series-code>10</application-number-series-code>
<filing-date>20020626</filing-date>
</domestic-filing-data>
<foreign-priority-data>
<priority-application-number>
<doc-number>2001-198691</doc-number>
</priority-application-number>
<filing-date>20010629</filing-date>
<country-code>JP</country-code>
</foreign-priority-data>
<technical-information>
<classification-ipc>
<classification-ipc-primary>
<ipc>G05B011/01</ipc>
</classification-ipc-primary>
<classification-ipc-edition>07</classification-ipc-edition>
</classification-ipc>
<classification-us>
<classification-us-primary>
<uspc>
<class>318</class>
<subclass>629000</subclass>
</uspc>
</classification-us-primary>
</classification-us>
<title-of-invention>Motor control apparatus</title-of-invention>
</technical-information>
<inventors>
<first-named-inventor>
<name>
<given-name>Yasuhiko</given-name>
<family-name>Kitajima</family-name>
</name>
<residence>
<residence-non-us>
<city>Kamakura-shi</city>
<country-code>JP</country-code>
</residence-non-us>
</residence>
<authority-applicant>INV</authority-applicant>
</first-named-inventor>
</inventors>
<assignee>
<organization-name>Nissan Motor Co., Ltd.</organization-name>
<assignee-type>03</assignee-type>
</assignee>
<correspondence-address>
<name-1>McDERMOTT, WILL &amp; EMERY</name-1>
<name-2></name-2>
<address>
<address-1>600 13th Street, N.W.</address-1>
<city>Washington</city>
<state>DC</state>
<postalcode>20005-3096</postalcode>
<country>
<country-code>US</country-code>
</country>
</address>
</correspondence-address>
</subdoc-bibliographic-information>
<subdoc-abstract>
<paragraph id="A-0001" lvl="0">A motor control apparatus comprises a fundamental wave current control system that controls a fundamental wave component of a motor current in an orthogonal coordinate system which rotates in synchronization with a rotation of a 3-phase AC motor, a higher harmonic current control system that controls a higher harmonic component contained in the motor current in an orthogonal coordinate system rotating with a frequency which is an integral multiple of the frequency of the fundamental wave component of the motor current, a voltage command value generating device that generates 3-phase AC voltage command values by adding an output from the fundamental wave current control system and an output from the higher harmonic current control system, a power conversion device that converts a DC source voltage to a 3-phase AC voltage corresponding to the 3-phase AC voltage command values and outputs the 3-phase AC voltage to the 3-phase AC motor, a voltage saturation detection device which detects that an output voltage from the power conversion device is in a saturated state and a gain adjustment device that reduces a current control gain for the higher harmonic current control system if the voltage saturation detection device detects that an output voltage is in a saturated state. </paragraph>
</subdoc-abstract>
<subdoc-description>
<summary-of-invention>
<section>
<heading lvl="1">BACKGROUND OF THE INVENTION </heading>
<paragraph id="P-0001" lvl="0"><number>&lsqb;0001&rsqb;</number> 1. Field of the Invention </paragraph>
<paragraph id="P-0002" lvl="0"><number>&lsqb;0002&rsqb;</number> The present invention relates to an apparatus that implements drive control on an AC motor and, more specifically, relates to an apparatus that reduces the higher harmonic current flowing to a 3-phase AC motor. </paragraph>
<paragraph id="P-0003" lvl="0"><number>&lsqb;0003&rsqb;</number> 2. Description of the Related Art </paragraph>
<paragraph id="P-0004" lvl="0"><number>&lsqb;0004&rsqb;</number> The control calculation is normally executed in a current control circuit for a 3-phase AC motor by converting the physical quantity of a 3-phase AC which necessitates a complicated handling procedure to a direct current physical quantity in order to facilitate the calculation (see Japanese Laid-Open Patent Publication No. H 08-331885). </paragraph>
<paragraph id="P-0005" lvl="0"><number>&lsqb;0005&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 14</cross-reference> shows the structure of a standard 3-phase AC motor control apparatus which is commonly utilized. In the control calculation executed in this motor control apparatus, a rotating orthogonal coordinate system (a dq coordinate system) having a d-axis representing the direction of the magnetic flux in the 3-phase AC motor and a q-axis extending perpendicular to the d-axis is used. The current control calculation is performed using a direct current value obtained by converting the 3-phase AC value in the rotating orthogonal coordinate system to reduce the current control deviation. </paragraph>
<paragraph id="P-0006" lvl="0"><number>&lsqb;0006&rsqb;</number> Miniaturization and higher efficiency are often achieved with regard to an AC motor today by providing a rotor having internally embedded magnets, as shown in <cross-reference target="DRAWINGS">FIG. 15</cross-reference>, and a stator assuming a concentrated winding structure. The rotor is able to effectively utilize the magnetic torque and the reluctance torque. A motor having a rotor adopting this structure is called an IPM (interior permanent magnet motor). The stator is capable of greatly reducing the coil end. A motor provided with the rotor and the stator having the structures described above, which is called a concentrated winding IPM motor, has been attracting a great deal of interest as a motor capable of realizing miniaturization and a high order of efficiency. </paragraph>
<paragraph id="P-0007" lvl="0"><number>&lsqb;0007&rsqb;</number> While the concentrated winding IPM motor described above allows miniaturization and achieves higher efficiency, it is characterized in that significant spatial harmonics manifest. The spatial harmonics in a motor assuming a concentrated winding structure become significant because the small number of slots at each pole results in a more uneven distribution of the magnetic flux compared to that in a motor assuming a distributed winding structure. An explanation is given below as to why a uniform magnetic flux distribution cannot be achieved. </paragraph>
<paragraph id="P-0008" lvl="0"><number>&lsqb;0008&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 16</cross-reference> shows an SPM motor assuming a surface magnet structure achieved by covering the surface of the rotor with magnets. Unlike in the SPM motor shown in <cross-reference target="DRAWINGS">FIG. 16</cross-reference>, areas where magnets are embedded and areas where no magnet is embedded are present along the circumference of the rotor in the IPM motor with the internally embedded magnets shown in <cross-reference target="DRAWINGS">FIG. 15</cross-reference>. Accordingly, while a uniform magnetic flux distribution is achieved in the SPM motor having a rotor, the surface of which is covered with magnets, a greater degree of change in the magnetic flux manifests in the IPM motor to result in a greater spatial harmonic component. </paragraph>
<paragraph id="P-0009" lvl="0"><number>&lsqb;0009&rsqb;</number> Greater spatial harmonics in the motor leads to a greater higher harmonic component in a current flowing to the motor, and thus, problems arise in that the extent to which the motor efficiency is improved is compromised and in that the extent of torque ripple becomes significant. In addition, since the higher harmonic component is superimposed on the fundamental wave component in the current, another problem manifests in that the current peak value increases. </paragraph>
<paragraph id="P-0010" lvl="0"><number>&lsqb;0010&rsqb;</number> Addressing these problems, the applicant of the present invention proposed a motor control apparatus that reduces the higher harmonics current flowing to an AC motor in Japanese Patent Application No. 2000-356117. This motor control apparatus includes a fundamental wave current control system that controls a motor current in a dq-axis coordinate system which rotates in synchronization with the motor rotation rate and a higher harmonic current control system that controls the motor current in an orthogonal coordinate system rotating at a rotation rate which is an integral multiple of the rotation rate of the dq-axis coordinate system, and generates a voltage command value for a voltage to be applied to the motor based upon the outputs from the two current control systems. The motor control apparatus greatly reduces the higher harmonic current component. </paragraph>
</section>
<section>
<heading lvl="1">SUMMARY OF THE INVENTION </heading>
<paragraph id="P-0011" lvl="0"><number>&lsqb;0011&rsqb;</number> However, while the motor control apparatus (Japanese Patent Application No. 2000-356117) which includes the two current control systems, i.e., the fundamental wave current control system primarily for controlling the fundamental wave current component and the higher harmonic current control system primarily for controlling the higher harmonic current component achieves control performance in controlling the higher harmonic current component that is greatly improved over the control performance of motor control apparatuses in the related art under normal circumstances, a problem arises when the voltage becomes saturated in that the resulting current distortion is more pronounced than in the motor control apparatuses in the related art. </paragraph>
<paragraph id="P-0012" lvl="0"><number>&lsqb;0012&rsqb;</number> Normally, a PWM invertor is utilized to implement drive control on an AC motor. A PWM invertor converts a DC voltage supplied from a DC source to an AC voltage equivalent to a voltage command value through the PWM and applies the AC voltage to the motor. Thus, the level of the DC voltage from the DC source determines the maximum value of the AC voltage that can be output. </paragraph>
<paragraph id="P-0013" lvl="0"><number>&lsqb;0013&rsqb;</number> In the operating range of a motor capable of a large output, the level of the voltage to be applied to the motor is close to the maximum voltage that can be output by the invertor. In addition, it is necessary to apply a large transient voltage to the motor in order to rapidly increase the output, as well. While a voltage, the level of which is higher than that of the maximum voltage that the invertor is capable of outputting may be required under these circumstances, a voltage higher than the maximum that can be output by the invertor cannot be applied to the motor. Hereafter, the state in which a voltage higher than the voltage that the invertor is capable of outputting needs to be applied to the motor is referred to as a &ldquo;voltage-saturated&rdquo; state. A voltage saturation tends to occur readily in the motor control apparatus described above in which the higher harmonic component in the voltage increases as a result of the reduction in the higher harmonic current component. </paragraph>
<paragraph id="P-0014" lvl="0"><number>&lsqb;0014&rsqb;</number> The required current can no longer be supplied to the motor under these circumstances due to an insufficient voltage output. However, the output voltage command value is continuously changed along the direction in which the necessary current is supplied through the two current control systems, i.e., the fundamental wave current control system and the higher harmonic current control system. As a result, a serious current distortion occurs, for instance, after the operation recovers from the voltage-saturated state. </paragraph>
<paragraph id="P-0015" lvl="0"><number>&lsqb;0015&rsqb;</number> An object of the present invention is to reduce the extent of a current distortion resulting from saturation of an output voltage in a motor control apparatus having a fundamental wave current control system and a higher harmonic current control system. </paragraph>
<paragraph id="P-0016" lvl="0"><number>&lsqb;0016&rsqb;</number> The motor control apparatus according to the present invention comprises a fundamental wave current control system that controls a fundamental harmonic wave component of a motor current in an orthogonal coordinate system which hypothetically rotates in synchronization with a rotation of a 3-phase AC motor, a higher harmonic current control system that controls a higher harmonic component contained in the motor current in an orthogonal coordinate system hypothetically rotating at a frequency which is an integral multiple of the frequency of the fundamental wave component of the motor current, a voltage command value generating device that generates a 3-phase AC voltage command value by adding the output from the fundamental wave current control system and the output from the higher harmonic current control system, a power conversion device that converts a DC source voltage to a 3-phase AC voltage corresponding to the 3-phase AC voltage command value and outputs the 3-phase AC voltage to the 3-phase AC motor, a voltage saturation detection device which detects that an output voltage from the power conversion device is in a saturated state and a gain adjustment device that reduces a current control gain for the higher harmonic current control system if the voltage saturation detection device detects that the output voltage is in a saturated state. </paragraph>
<paragraph id="P-0017" lvl="0"><number>&lsqb;0017&rsqb;</number> In the motor control method adopted in the control system which includes a fundamental wave current control system that controls a fundamental wave component of the motor current in an orthogonal coordinate system hypothetically rotating in synchronization with the rotation of a 3-phase AC motor and a higher harmonic current control system that controls a higher harmonic component contained in the motor current in an orthogonal coordinate system hypothetically rotating at a frequency which is an integral multiple of the frequency of the fundamental wave component of the motor current and achieved by adding the output from the fundamental wave current control system and the output from the higher harmonic current control system to generate a 3-phase AC voltage command value, converting a DC source to a 3-phase AC voltage corresponding to the 3-phase AC voltage command value and outputting the 3-phase AC voltage to the 3-phase AC motor, a detection is performed to ascertain whether or not the output voltage output to the 3-phase AC motor by converting the DC source voltage to the 3-phase AC voltage is in a saturated state and the current control gain for the higher harmonic current control system is reduced if the output voltage is in a saturated state.</paragraph>
</section>
</summary-of-invention>
<brief-description-of-drawings>
<section>
<heading lvl="1">BRIEF DESCRIPTION OF THE DRAWINGS </heading>
<paragraph id="P-0018" lvl="0"><number>&lsqb;0018&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1</cross-reference> shows the structure of the motor control apparatus achieved in the first embodiment of the present invention; </paragraph>
<paragraph id="P-0019" lvl="0"><number>&lsqb;0019&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 2</cross-reference> shows the results of the current control implemented by a motor control apparatus in the related art; </paragraph>
<paragraph id="P-0020" lvl="0"><number>&lsqb;0020&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3</cross-reference> shows the results of the current control implemented by the motor control apparatus in the first embodiment; </paragraph>
<paragraph id="P-0021" lvl="0"><number>&lsqb;0021&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 4</cross-reference> shows in detail the structure assumed in the higher harmonic current control circuit in the first embodiment; </paragraph>
<paragraph id="P-0022" lvl="0"><number>&lsqb;0022&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 5</cross-reference> illustrates how the current control gain adjustment value K is determined; </paragraph>
<paragraph id="P-0023" lvl="0"><number>&lsqb;0023&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 6</cross-reference> shows the structure of the motor control apparatus achieved in a second embodiment; </paragraph>
<paragraph id="P-0024" lvl="0"><number>&lsqb;0024&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 7</cross-reference> shows in detail the structure assumed in the voltage saturation judging circuit in the second embodiment; </paragraph>
<paragraph id="P-0025" lvl="0"><number>&lsqb;0025&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 8</cross-reference> shows in detail the structure assumed in the higher harmonic current control circuit in the second embodiment; </paragraph>
<paragraph id="P-0026" lvl="0"><number>&lsqb;0026&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 9</cross-reference> shows the structure of the motor control apparatus achieved in a third embodiment; </paragraph>
<paragraph id="P-0027" lvl="0"><number>&lsqb;0027&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 10</cross-reference> shows in detail the structure assumed in the voltage saturation judging circuit in the third embodiment; </paragraph>
<paragraph id="P-0028" lvl="0"><number>&lsqb;0028&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 11</cross-reference> illustrates the relationship between the dq axes and the dhqh axes; </paragraph>
<paragraph id="P-0029" lvl="0"><number>&lsqb;0029&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 12</cross-reference> shows in detail the structure assumed in the higher harmonic current control circuit in a fourth embodiment; </paragraph>
<paragraph id="P-0030" lvl="0"><number>&lsqb;0030&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 13</cross-reference> shows another structure that may be adopted in the higher harmonic current control circuit in the fourth embodiment; </paragraph>
<paragraph id="P-0031" lvl="0"><number>&lsqb;0031&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 14</cross-reference> shows the structure of a motor control apparatus in the related art; </paragraph>
<paragraph id="P-0032" lvl="0"><number>&lsqb;0032&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 15</cross-reference> presents a sectional view of an IPM motor adopting the internally embedded magnet structure; and </paragraph>
<paragraph id="P-0033" lvl="0"><number>&lsqb;0033&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 16</cross-reference> presents a sectional view of an SPM motor adopting the surface magnet structure.</paragraph>
</section>
</brief-description-of-drawings>
<detailed-description>
<section>
<heading lvl="1">DETAILED DIRECTION OF THE PREFERRED EMBODIMENTS </heading>
<paragraph id="P-0034" lvl="0"><number>&lsqb;0034&rsqb;</number> First Embodiment </paragraph>
<paragraph id="P-0035" lvl="0"><number>&lsqb;0035&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1</cross-reference> shows the structure of the motor control apparatus achieved in the first embodiment. The motor control apparatus in the first embodiment, which includes a fundamental wave current control system and a higher harmonic current control system, reduces the higher harmonic current and also reduces the current distortion that occurs when the phase voltage becomes saturated. This motor control apparatus implements drive control on the 3-phase current motor through vector control. </paragraph>
<paragraph id="P-0036" lvl="0"><number>&lsqb;0036&rsqb;</number> The fundamental wave current control system is a circuit that controls primarily the fundamental wave components of 3-phase currents iu, iv and iw flowing through a 3-phase AC motor M by converting the 3-phase currents iu, iv and iw to a d-axis current component and a q-axis current component in an orthogonal coordinate system (hereafter referred to as a dq-axis coordinate system). The dq-axis coordinate system rotates in synchronization with the motor rotation and controlling the d-axis current and the q-axis current resulting from the conversion. </paragraph>
<paragraph id="P-0037" lvl="0"><number>&lsqb;0037&rsqb;</number> The higher harmonic current control system is a circuit that controls the higher harmonic components contained in the motor currents iu, iv and iw in an orthogonal coordinate system (hereafter referred to as either a higher harmonic coordinate system or a dhqh-axis coordinate system) The dhqh-axis coordinate system rotates with a frequency of a higher harmonic component of a predetermined order which is generated when the motor currents iu, iv and iw are controlled through the fundamental wave current control system alone, i.e., in a higher harmonic coordinate system rotating with a frequency which is an integral multiple of the frequency of the fundamental wave component of the motor currents iu, iv and iw. </paragraph>
<paragraph id="P-0038" lvl="0"><number>&lsqb;0038&rsqb;</number> The fundamental wave current control system includes a torque control circuit <highlight><bold>1</bold></highlight>, a fundamental wave current control circuit (dq-axis current control circuit) <highlight><bold>2</bold></highlight>, a dq/3-phase conversion circuit <highlight><bold>3</bold></highlight>, a power conversion device <highlight><bold>4</bold></highlight>, a phase speed calculating circuit <highlight><bold>5</bold></highlight> and a 3-phase/dq conversion circuit <highlight><bold>8</bold></highlight>. The structure assumed in the fundamental wave current control system is similar to that of the motor control apparatus in the related art shown in <cross-reference target="DRAWINGS">FIG. 14</cross-reference>. </paragraph>
<paragraph id="P-0039" lvl="0"><number>&lsqb;0039&rsqb;</number> The torque control circuit <highlight><bold>1</bold></highlight> calculates a command value id* for the d-axis current and a command value iq* for the q-axis current by using a current command value table based upon a torque command value Te* and a motor rotation rate &ohgr;e. The fundamental wave current control circuit (dq-axis current control circuit) <highlight><bold>2</bold></highlight> calculates a d-axis fundamental wave voltage command value vd<highlight><bold>1</bold></highlight>* and a q-axis fundamental wave voltage command value vq<highlight><bold>1</bold></highlight>* to be used to match actual currents id and iq along the d-axis and the q-axis with the current command values id* and iq* respectively. Namely, it utilizes subtractors <highlight><bold>2</bold></highlight><highlight><italic>a </italic></highlight>and <highlight><bold>2</bold></highlight><highlight><italic>b </italic></highlight>to determine the current deviations by subtracting the actual currents id and iq from the d-axis current command value id* and the q-axis current command value iq* respectively and calculates the d-axis fundamental wave voltage command value vd<highlight><bold>1</bold></highlight>* and the q-axis fundamental wave voltage command value vq<highlight><bold>1</bold></highlight>* to be used to reduce the current deviations to 0 by engaging an operational amplifier internally provided in the current control circuit <highlight><bold>2</bold></highlight>. </paragraph>
<paragraph id="P-0040" lvl="0"><number>&lsqb;0040&rsqb;</number> The dq/3-phase conversion circuit <highlight><bold>3</bold></highlight> converts a d-axis voltage command value vd* and a q-axis voltage command value vq* to 3-phase AC voltage command values vu*, vv* and vw* based upon a phase &thgr;e of fundamental wave current at the 3-phase AC motor M. The current conversion device (invertor) <highlight><bold>4</bold></highlight> switches a DC voltage from a DC source (not shown) such as a battery based upon the 3-phase AC voltage command values vu*, vv* and vw* with a switching element which may be an IGBT and generates 3-phase AC voltages VU, VV and VW which are then applied to the 3-phase AC motor M. </paragraph>
<paragraph id="P-0041" lvl="0"><number>&lsqb;0041&rsqb;</number> An encoder PS, which is connected to the 3-phase AC motor M detects a rotational position &thgr;m of the motor M. The detected rotational position &thgr;m is provided to the phase&middot;speed calculating circuit <highlight><bold>5</bold></highlight>. The phase speed&middot;calculating circuit <highlight><bold>5</bold></highlight> calculates a rotation rate &ohgr;e of the motor M, the phase of the fundamental wave component of the magnetic flux, i.e., the phase &thgr;e along the d-axis and the phase of the higher harmonic component of the magnetic flux, i.e., the phase &thgr;eh along the dh-axis based upon rotational position signal &thgr;m provided by the encoder PS. </paragraph>
<paragraph id="P-0042" lvl="0"><number>&lsqb;0042&rsqb;</number> Current sensors <highlight><bold>6</bold></highlight> and <highlight><bold>7</bold></highlight> respectively detect the actual currents iu and iv at the U-phase and the V-phase in the 3-phase AC motor M. The detected U-phase current iu and V-phase current iv are provided to the 3-phase/dq conversion unit <highlight><bold>8</bold></highlight>. The 3-phase/dq conversion unit <highlight><bold>8</bold></highlight> converts the actual currents iu, iv and iw (&equals;&minus;iu&minus;iv) at the 3-phase AC motor M to the actual current id along the d-axis and the actual current iq along the q-axis based upon the fundamental wave current phase &thgr;e. </paragraph>
<paragraph id="P-0043" lvl="0"><number>&lsqb;0043&rsqb;</number> The higher harmonic current control system includes the 3-phase/dq conversion circuit <highlight><bold>8</bold></highlight>, a high-pass filter <highlight><bold>9</bold></highlight>, a dq/dhqh conversion circuit <highlight><bold>10</bold></highlight>, a higher harmonic current control circuit (dhqh-axis current control circuit) <highlight><bold>11</bold></highlight> and a dhqh/dq conversion circuit <highlight><bold>12</bold></highlight>. The high-pass filter <highlight><bold>9</bold></highlight> extracts the higher harmonic components by filtering the actual current id along the d-axis and the actual current iq along the q-axis. The dq/dhqh conversion circuit <highlight><bold>10</bold></highlight>, which has the orthogonal coordinate system (higher harmonic coordinate system) dhqh mentioned earlier, converts the higher harmonic components of the actual current id along the d-axis and the actual current iq along the q-axis to actual currents idh and iqh in the higher harmonic coordinate system dhqh. </paragraph>
<paragraph id="P-0044" lvl="0"><number>&lsqb;0044&rsqb;</number> The higher harmonic current control circuit (dhqh-axis current control circuit) <highlight><bold>11</bold></highlight> calculates a dh-axis higher harmonic voltage command value vdh* and a qh-axis higher harmonic voltage command value vqh* to be used to match the actual currents idh and iqh along the dh-axis and the qh-axis with the current command values idh* and iqh* respectively. The higher harmonic current command values idh* and iqh* in this instance are both 0. In other words, the higher harmonic current control circuit <highlight><bold>11</bold></highlight> controls the higher harmonic currents so as to set the higher harmonic components of the predetermined order mentioned earlier among the higher harmonic components contained in the motor currents iu, iv and iw to 0. </paragraph>
<paragraph id="P-0045" lvl="0"><number>&lsqb;0045&rsqb;</number> The dhqh/dq conversion circuit <highlight><bold>12</bold></highlight> converts the dh-axis higher harmonic voltage command value vdh* and the qh-axis higher harmonic voltage command value vqh* to a d-axis higher harmonic voltage command value vd<highlight><bold>2</bold></highlight>* and a q-axis higher harmonic voltage command value vq<highlight><bold>2</bold></highlight>* respectively. The higher harmonic voltage command values vd<highlight><bold>2</bold></highlight>* and vq<highlight><bold>2</bold></highlight>* resulting from the conversion are then provided to adders <highlight><bold>13</bold></highlight> and <highlight><bold>14</bold></highlight>. The adders <highlight><bold>13</bold></highlight> and <highlight><bold>14</bold></highlight> add the fundamental wave voltage command values vd<highlight><bold>1</bold></highlight>* and vq<highlight><bold>1</bold></highlight>* generated in the fundamental wave current control system to the higher voltage command values vd<highlight><bold>2</bold></highlight>* and vq<highlight><bold>2</bold></highlight>* generated in the higher harmonic current control system respectively to calculate ultimate d-axis voltage command value vd* (&equals;vd<highlight><bold>1</bold></highlight>*&plus;vd<highlight><bold>2</bold></highlight>*) and q-axis voltage command value vq* (&equals;vq<highlight><bold>1</bold></highlight>*&plus;vq<highlight><bold>2</bold></highlight>*). </paragraph>
<paragraph id="P-0046" lvl="0"><number>&lsqb;0046&rsqb;</number> What differentiates the current control system of the motor control apparatus in the first embodiment shown in <cross-reference target="DRAWINGS">FIG. 1</cross-reference> from the current control system in the motor control apparatus in the related art shown in <cross-reference target="DRAWINGS">FIG. 14, i</cross-reference>.e., from the current control system that controls the motor currents in the dq-axis coordinate system rotating in synchronization with the motor rotation, is the high-pass filter <highlight><bold>9</bold></highlight>, the dq/dhqh conversion circuit <highlight><bold>10</bold></highlight>, the higher harmonic current control circuit <highlight><bold>11</bold></highlight>, the dhqh/dq conversion circuit <highlight><bold>12</bold></highlight> and the adders <highlight><bold>13</bold></highlight> and <highlight><bold>14</bold></highlight>. It is difficult to ensure reliable conformance of the actual currents to the current command values up to the frequency range of the higher harmonic currents attributable to the spatial harmonics of the motor through the current control calculation executed in a motor control apparatus having only the dq-axis coordinate system. In such a motor control apparatus, problems arise in that only a slight improvement can be achieved with regard to the efficiency of the concentrated winding IPM motor, in that a significant torque ripple manifests and in that the peak value of the current increases, as explained earlier. These problems are now explained in further detail. </paragraph>
<paragraph id="P-0047" lvl="0"><number>&lsqb;0047&rsqb;</number> In the dq-axis coordinate system, which rotates in synchronization with the motor rotation, the level of a fundamental wave current at the motor is translated as a direct current quantity. When &ohgr;eh represents the angular frequency of a higher harmonic current and we represents the angular speed of the motor, i.e., the angular frequency of the fundamental wave current, the angular frequency &ohgr;eh_dq of the higher harmonic current in the dq-axis coordinate system is expressed as (&ohgr;eh&minus;&ohgr;e), and thus, the higher harmonic component of the motor current cannot be represented by a direct current quantity in the dq-axis coordinate system. For this reason, since the frequency of the higher harmonic component, too, increases as the motor rotation rate becomes higher when the frequency of a motor current increases in response to an increase in the motor rotation rate, the actual current can no longer be made to conform to the current command value through the method which utilizes the dq-axis coordinate system alone. </paragraph>
<paragraph id="P-0048" lvl="0"><number>&lsqb;0048&rsqb;</number> In the motor control apparatus in the first embodiment, the current conformity of the higher harmonic component of the predetermined order is improved and the higher harmonic component of the predetermined order is reduced by utilizing the higher harmonic current control system (<highlight><bold>8</bold></highlight>&tilde;<highlight><bold>12</bold></highlight>) shown in FIG. land the adders <highlight><bold>13</bold></highlight> and <highlight><bold>14</bold></highlight>. It is assumed that akth-order higher harmonic component is reduced in the first embodiment so as to facilitate the explanation. </paragraph>
<paragraph id="P-0049" lvl="0"><number>&lsqb;0049&rsqb;</number> The d-axis actual current id and the q-axis actual current iq output from the 3-phase/dq conversion unit <highlight><bold>8</bold></highlight> each contain a fundamental wave component which is represented by a direct current quantity and a higher harmonic component which is represented by an AC quantity. The high-pass filter <highlight><bold>9</bold></highlight> extracts only the high frequency component in the actual currents id and iq. The actual currents idh and iqh in the dhqh-axis coordinate system rotating at a phase (&thgr;eh&minus;&thgr;e) that are obtained by converting the kth-order higher harmonic components contained in the actual currents id and iq which have been extracted by the high-pass filter <highlight><bold>9</bold></highlight> to actual currents in the dhqh-axis coordinate system by utilizing the dq/dhqh conversion circuit <highlight><bold>10</bold></highlight> are represented by direct current quantities. &thgr;eh represents the phase of a kth-order higher harmonic current. Thus, by executing the current control calculation in the dhqh-axis coordinate system, the conformity of a kth-order higher harmonic current to the corresponding current command value (&equals;0) is greatly improved. As a result, the higher harmonic currents contained in the motor currents iu, iv and iw can be reduced. In particular, the higher harmonic currents of the kth-order and in the vicinity of the kth-order can be greatly reduced. </paragraph>
<paragraph id="P-0050" lvl="0"><number>&lsqb;0050&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 2</cross-reference> shows the waveform of a U-phase current corresponding to a U-phase current command value, achieved by driving a concentrated winding IPM motor in which a significant spatial harmonic component manifests with a motor control apparatus in the related art. <cross-reference target="DRAWINGS">FIG. 3</cross-reference>, on the other hand, shows the waveform of a U-phase current corresponding to a U-phase current command value, achieved by driving the concentrated winding IPM motor with the motor control apparatus in the first embodiment. When the motor is driven with the motor control apparatus in the related art, a great deal of the higher harmonic component is contained in the motor current, as <cross-reference target="DRAWINGS">FIG. 2</cross-reference> clearly indicates. In contrast, the higher harmonic component is greatly reduced as shown in <cross-reference target="DRAWINGS">FIG. 3</cross-reference> when the motor is driven by the motor control apparatus in the first embodiment. In other words, the higher frequency component at and near a predetermined order contained in the motor current can be reduced. </paragraph>
<paragraph id="P-0051" lvl="0"><number>&lsqb;0051&rsqb;</number> A specific voltage must be applied to the motor in order to reduce the extent of the current distortion. However, there is a limit to the level of the voltage that can be output by the invertor, and when the motor is driven at ahigh rotation rate and with a high output or when the output is increased dramatically within a short period of time, the voltage required to achieve conformity to the current command value cannot always be output. In other words, the voltage which is equivalent to the output voltage command value calculated based upon the sum of the output from the fundamental wave current control system and the output from the higher harmonic current control system can no longer be output. In a motor control apparatus having two types of current control systems such as the motor control apparatus in the embodiment, the extent of the current distortion is larger than that in a motor control apparatus provided with the fundamental wave current control system alone. This problem is addressed by providing the higher harmonic current control circuit <highlight><bold>11</bold></highlight> which operates in the dhqh-axis coordinate system. </paragraph>
<paragraph id="P-0052" lvl="0"><number>&lsqb;0052&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 4</cross-reference> shows in detail the structure of the higher harmonic current control circuit (dhqh-axis current control circuit) <highlight><bold>11</bold></highlight>. The higher harmonic current control circuit <highlight><bold>11</bold></highlight> implements proportional integral (PI) operation control both on the dh-axis current component and the qh-axis current component. A subtractor <highlight><bold>21</bold></highlight> subtracts the dh-axis actual current idh from the dh-axis current command value idh* (&equals;0) and thus determines the current deviation (idh*&minus;idh). A proportional operational amplifier <highlight><bold>22</bold></highlight> amplifies the current deviation (idh*&minus;idh) obtained at the subtractor <highlight><bold>21</bold></highlight>. An integrator <highlight><bold>23</bold></highlight> integrates the current deviation (idh*&minus;idh) obtained at the subtractor <highlight><bold>21</bold></highlight> and outputs the results of the integration to an integration operational amplifier <highlight><bold>24</bold></highlight>. The integration operational amplifier <highlight><bold>24</bold></highlight> amplifies the integrated value obtained by integrating the current deviation (idh*&minus;idh). </paragraph>
<paragraph id="P-0053" lvl="0"><number>&lsqb;0053&rsqb;</number> Likewise, a subtractor <highlight><bold>25</bold></highlight> subtracts the qh-axis actual current iqh from the qh-axis current command value iqh* (&equals;0) and thus determines the current deviation (iqh*&minus;iqh). A proportional operational amplifier <highlight><bold>26</bold></highlight> amplifies the current deviation (iqh*&minus;iqh) obtained at the subtractor <highlight><bold>25</bold></highlight>. An integrator <highlight><bold>27</bold></highlight> integrates the current deviation (iqh*&minus;iqh) obtained at the subtractor <highlight><bold>25</bold></highlight> and outputs the results of the integration to an integration operational amplifier <highlight><bold>28</bold></highlight>. The integration operational amplifier <highlight><bold>28</bold></highlight> amplifies the integrated value obtained by integrating the current deviation (iqh*&minus;iqh). </paragraph>
<paragraph id="P-0054" lvl="0"><number>&lsqb;0054&rsqb;</number> A gain determining circuit <highlight><bold>29</bold></highlight> determines a value K to be used to adjust a current control gain based upon the torque command value Te* and the motor rotation rate &ohgr;e. The current control gain adjustment value K is set in advance so that the gain adjustment value K becomes lower in a range close to the maximum output over which a large source voltage is required, i.e., in the hatched range in <cross-reference target="DRAWINGS">FIG. 5</cross-reference> over which the motor output (&prop;&ohgr;e&plus;Te*) is large, in order to reduce the extent of the current distortion occurring in the event of a voltage saturation. As a result, the current control gain used to calculate the dh-axis voltage command value vdh* and the qh-axis voltage command value vqh* is set at a small value in the high output range to minimize the current distortion. </paragraph>
<paragraph id="P-0055" lvl="0"><number>&lsqb;0055&rsqb;</number> The current control gain adjustment value K determined at the gain determining circuit <highlight><bold>29</bold></highlight> is provided to multipliers <highlight><bold>30</bold></highlight>&tilde;<highlight><bold>33</bold></highlight> which, in turn, set current control gains corresponding to the adjustment value K. The output from the dh-axis proportional operational amplifier <highlight><bold>22</bold></highlight>, the output from the integration operational amplifier <highlight><bold>24</bold></highlight>, the output from the qh-axis proportional operational amplifier <highlight><bold>26</bold></highlight> and the output from the integration operational amplifier <highlight><bold>28</bold></highlight> are multiplied by the respective current control gains. An adder <highlight><bold>35</bold></highlight> adds a value obtained by multiplying the output from the proportional operational amplifier <highlight><bold>22</bold></highlight> by the corresponding current control gain to a value obtained by multiplying the output from the integration operational amplifier <highlight><bold>24</bold></highlight> by the corresponding current control gain, and thus generates the dh-axis voltage command value vdh*. An adder <highlight><bold>36</bold></highlight> adds a value obtained by multiplying the output from the proportional operational amplifier <highlight><bold>26</bold></highlight> by the corresponding current control gain to a value obtained by multiplying the output from the integration operational amplifier <highlight><bold>28</bold></highlight> by the corresponding current control gain, and thus generates the qh-axis voltage command value vqh*. </paragraph>
<paragraph id="P-0056" lvl="0"><number>&lsqb;0056&rsqb;</number> In the range close to the motor maximum output over which a large source voltage is required, the output voltage tends to become saturated readily, which will result in a significant current distortion. For this reason, in the motor control apparatus in the first embodiment, the motor output (&prop;&ohgr;e&middot;Te*) is ascertained based upon the rotation rate we of the motor M and the torque command value Te* and the current control gain for the higher harmonic current control system is reduced in the operating range corresponding to a high motor output range over which the likelihood of an output voltage saturation is high. As a result, the higher harmonic voltage components contained in the output voltages from the power conversion device (invertor) <highlight><bold>4</bold></highlight> are reduced to ensure that the output voltage does not become saturated readily, thereby reducing the frequency of occurrence of the current distortion. In addition, even if the output voltage does become saturated, the extent of the current distortion is minimized by reducing the control gain for the higher harmonic current control system. </paragraph>
<paragraph id="P-0057" lvl="0"><number>&lsqb;0057&rsqb;</number> Second Embodiment </paragraph>
<paragraph id="P-0058" lvl="0"><number>&lsqb;0058&rsqb;</number> In the first embodiment described above, saturation of the output voltage is detected by ascertaining the output state of the motor. In the motor control apparatus achieved in the second embodiment, saturation of the output voltage is detected based upon a phase voltage command value. </paragraph>
<paragraph id="P-0059" lvl="0"><number>&lsqb;0059&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 6</cross-reference> shows the structure of the motor control apparatus achieved in the second embodiment. It is to be noted that the same reference numerals are assigned to functional blocks having functions similar to those of control blocks shown in <cross-reference target="DRAWINGS">FIG. 1</cross-reference> and the following explanation focuses on the differences. </paragraph>
<paragraph id="P-0060" lvl="0"><number>&lsqb;0060&rsqb;</number> A voltage saturation judging circuit <highlight><bold>15</bold></highlight> judges as to whether or not the output voltage is in a saturated state based upon phase voltage command values vu*, vv* and vw* corresponding to the three phases. The structure assumed in the voltage saturation judging circuit <highlight><bold>15</bold></highlight> is shown in detail in <cross-reference target="DRAWINGS">FIG. 7</cross-reference>. An absolute value circuit <highlight><bold>41</bold></highlight> determines the absolute values of the 3-phase voltage command values vu*, vv* and vw*. A maximum value circuit <highlight><bold>42</bold></highlight> determines the maximum value among the absolute values of the 3-phase voltage command values vu*, vv* and vw* ascertained by the absolute value circuit <highlight><bold>41</bold></highlight>. </paragraph>
<paragraph id="P-0061" lvl="0"><number>&lsqb;0061&rsqb;</number> A judging circuit <highlight><bold>43</bold></highlight> judges as to whether not the maximum value among the absolute values of the 3-phase voltage command values vu*, vv* and vw*, which has been determined by the maximum value circuit <highlight><bold>42</bold></highlight> is larger than a voltage saturation decision-making reference value stored in a memory <highlight><bold>44</bold></highlight>. If the maximum value among the 3-phase voltage command values is larger than the judging reference value, the judging circuit <highlight><bold>43</bold></highlight> judges that an output voltage is in a saturated state and outputs <highlight><bold>0</bold></highlight>. If, on the other hand, the maximum value among the 3-phase voltage command values is smaller than the decision-making reference value, the judging circuit <highlight><bold>43</bold></highlight> judges that the output voltages are not in a saturated state and outputs <highlight><bold>1</bold></highlight> accordingly. A delay circuit <highlight><bold>45</bold></highlight> outputs a voltage saturation signal f_sat with a predetermined delay following the point in time at which the output from the judging circuit <highlight><bold>43</bold></highlight> rises from 0 to 1, i.e., following the time point at which the output voltage-saturated state is cleared. </paragraph>
<paragraph id="P-0062" lvl="0"><number>&lsqb;0062&rsqb;</number> If it is decided by the voltage saturation judging circuit <highlight><bold>15</bold></highlight> that an output voltage is in a saturated state, the voltage saturation signal f_sat is set to 0, whereas if it is decided that the output voltages are not in a saturated state, the voltage saturation signal f_sat is set to 1. The voltage saturation signal f_sat is input to a higher harmonic current control circuit (dhqh-axis current control circuit) <highlight><bold>11</bold></highlight>A. <cross-reference target="DRAWINGS">FIG. 8</cross-reference> shows in detail the structure assumed by the higher harmonic current control circuit <highlight><bold>11</bold></highlight>A. </paragraph>
<paragraph id="P-0063" lvl="0"><number>&lsqb;0063&rsqb;</number> The same reference numerals are assigned to devices in <cross-reference target="DRAWINGS">FIG. 8</cross-reference> that are similar to those in the higher harmonic current control circuit <highlight><bold>11</bold></highlight> in the first embodiment shown in <cross-reference target="DRAWINGS">FIG. 4</cross-reference>, and the following explanation focuses on the differences. A multiplier <highlight><bold>37</bold></highlight> multiplies the sum of the output from the proportional operational amplifier <highlight><bold>22</bold></highlight> and the output from the integration operational amplifier <highlight><bold>24</bold></highlight> each having been multiplied by the corresponding dh-axis current control gain by the value of the voltage saturation signal f_sat and thus generates a dh-axis voltage command value vdh*. A multiplier <highlight><bold>38</bold></highlight> multiplies the sum of the output from the proportional operational amplifier <highlight><bold>26</bold></highlight> and the output from the integration operational amplifier <highlight><bold>28</bold></highlight> each having been multiplied by the corresponding qh-axis current control gain by the value of the voltage saturation signal f_sat and thus generates a qh-axis voltage command value vqh*. In other words, if the output voltage is detected to be in a saturated state, the dh-axis voltage command value vdh* and the qh-axis voltage command value vqh* are both calculated to be 0. This is equivalent to setting the current control gain for the higher harmonic current control system to 0 when a voltage saturation has occurred. </paragraph>
<paragraph id="P-0064" lvl="0"><number>&lsqb;0064&rsqb;</number> In the motor control apparatus in the second embodiment, a decision is made as to whether or not the output voltage is in a saturated state based upon the 3-phase voltage command values vu*, vv* and vw* and the dh-axis voltage command value vdh* and the qh-axis voltage command value vqh* generated in the higher harmonic current control system are set to 0 if an output voltage saturated state is detected, i.e., the current control gain for the higher harmonic current control system is set to 0 if an output voltage saturated state is detected. As a result, the higher harmonic voltage components contained in the output voltages from the power conversion device (invertor) <highlight><bold>4</bold></highlight> are reduced to prevent an output voltage saturation from occurring readily, which, in turn, reduces the frequency with which the current distortion occurs. In addition, since the control gain at the higher harmonic current control system is set to 0, the extent of current distortion can be reduced even when output voltage saturation has occurred. </paragraph>
<paragraph id="P-0065" lvl="0"><number>&lsqb;0065&rsqb;</number> Furthermore, since it is judged as to whether or not the output voltages are in a saturated state based upon the 3-phase voltage command values vu*, vv* and vw*, the saturated state can be detected with a high degree of reliability regardless of which of the output voltages, i.e., which of the 3-phase voltages, is in a saturated state. Moreover, as the current control gain is continuously reduced over a predetermined length of time even when an output voltage saturated state is no longer detected, the current control gain is not switched frequently over a short period of time, to minimize the motor torque fluctuation. </paragraph>
<paragraph id="P-0066" lvl="0"><number>&lsqb;0066&rsqb;</number> Third Embodiment </paragraph>
<paragraph id="P-0067" lvl="0"><number>&lsqb;0067&rsqb;</number> In the second embodiment described above, a detection is performed to ascertain whether or not the output voltage is in a saturated state based upon the 3-phase voltage command values vu*, vv* and vw*. In the motor control apparatus in the third embodiment, on the other hand, an output voltage-saturated state is detected based upon d-axis voltage command value vd<highlight><bold>1</bold></highlight>* and the q-axis voltage command value vq<highlight><bold>1</bold></highlight>*, the dh-axis voltage command value vd<highlight><bold>2</bold></highlight>* and the qh-axis voltage command value vq<highlight><bold>2</bold></highlight>*. </paragraph>
<paragraph id="P-0068" lvl="0"><number>&lsqb;0068&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 9</cross-reference> shows the structure adopted in the motor control apparatus in the third embodiment. It is to be noted that the same reference numerals are assigned to control blocks having functions similar to those in the control block diagrams presented in <cross-reference target="DRAWINGS">FIGS. 1 and 6</cross-reference>, and the following explanation focuses on the differences. </paragraph>
<paragraph id="P-0069" lvl="0"><number>&lsqb;0069&rsqb;</number> A voltage saturation judging circuit <highlight><bold>15</bold></highlight>A judges as to whether or not the output voltages are in a saturated state based upon the d-axis and the q-axis voltage command values vd<highlight><bold>1</bold></highlight>* and vq<highlight><bold>1</bold></highlight>* and the dh-axis and the qh-axis voltage command values vd<highlight><bold>2</bold></highlight>* and vq<highlight><bold>2</bold></highlight>*. <cross-reference target="DRAWINGS">FIG. 10</cross-reference> shows in detail the structure adopted in the voltage saturation judging circuit <highlight><bold>15</bold></highlight>A in the third embodiment. An amplitude calculating circuit <highlight><bold>51</bold></highlight> calculates the amplitude AMP of the 3-phase voltage through the following formula (1).</paragraph>
<paragraph lvl="0"><in-line-formula>AMP&equals;{square root}{square root over ( )}&lsqb;2/3&lcub;(&verbar;<highlight><italic>vd</italic></highlight><highlight><bold>1</bold></highlight>*&verbar;&plus;&verbar;<highlight><italic>vq</italic></highlight><highlight><bold>1</bold></highlight>*&verbar;)<highlight><superscript>2</superscript></highlight>&plus;(&verbar;<highlight><italic>vd</italic></highlight><highlight><bold>2</bold></highlight>*&verbar;&plus;&verbar;<highlight><italic>vq</italic></highlight><highlight><bold>2</bold></highlight>*&verbar;)<highlight><superscript>2</superscript></highlight>&rcub;&rsqb;&emsp;&emsp;(1)</in-line-formula></paragraph>
<paragraph id="P-0070" lvl="7"><number>&lsqb;0070&rsqb;</number> This amplitude AMP represents the maximum value among the 3-phase voltages in a single cycle. </paragraph>
<paragraph id="P-0071" lvl="0"><number>&lsqb;0071&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 11</cross-reference> shows the relationship between the d-axis and q-axis voltage command values vd* and vq* and the dh-axis and qh-axis voltage command values vdh* and vqh*. The d-axis and the q-axis constitute a coordinate system of the fundamental wave currents, which rotates at the angular speed we of the motor M, whereas the dh-axis and the qh-axis constitute a coordinate system of the higher harmonic currents, which rotates at an angular speed weh that is an integral multiple of the angular speed at which the fundamental wave current coordinate system rotates. While the phase voltages change constantly since these coordinate systems rotate at different speeds, the maximum value of the phase voltages per cycle can be ascertained with ease through formula (1) above. </paragraph>
<paragraph id="P-0072" lvl="0"><number>&lsqb;0072&rsqb;</number> A judging circuit <highlight><bold>52</bold></highlight> illustrated in <cross-reference target="DRAWINGS">FIG. 10</cross-reference> judges as to whether or not the maximum value of the phase voltages in a single cycle determined by the amplitude calculating circuit <highlight><bold>51</bold></highlight> is larger than a voltage saturation judging reference value stored in a memory <highlight><bold>53</bold></highlight>. If the maximum value of the phase voltages per cycle is larger than the judging reference value, the judging circuit <highlight><bold>52</bold></highlight> judges that an output voltage is in a saturated state and outputs 0. If, on the other hand, the maximum value of the phase voltages per cycle is smaller than the judging reference value, the judging circuit <highlight><bold>52</bold></highlight> judges that the output voltages are not in a saturated state and outputs <highlight><bold>1</bold></highlight>. A delay circuit <highlight><bold>54</bold></highlight> outputs a voltage saturation signal f_sat with a predetermined delay following the point in time at which the output from the judging circuit <highlight><bold>52</bold></highlight> rises from 0 to 1, i.e., at the time point at which the output voltage-saturated state is cleared. </paragraph>
<paragraph id="P-0073" lvl="0"><number>&lsqb;0073&rsqb;</number> If it is decided by the voltage saturation judging circuit <highlight><bold>15</bold></highlight>A that an output voltage is in a saturated state, the voltage saturation signal f_sat is set to 0, whereas if the output voltages are determined not o be in a saturated state, the voltage saturation signal f_sat is set to 1. This voltage saturation signal f_sat is input to the higher harmonic current control circuit (dhqh-axis current control circuit) <highlight><bold>11</bold></highlight>A (see <cross-reference target="DRAWINGS">FIG. 8</cross-reference>). The higher harmonic current control circuit <highlight><bold>11</bold></highlight>A changes the current control gain in correspondence to the voltage saturation signal f_sat as explained earlier. </paragraph>
<paragraph id="P-0074" lvl="0"><number>&lsqb;0074&rsqb;</number> As described above, in the motor control apparatus in the third embodiment, it is judged as to whether or not the output voltages are in a saturated state based upon the d-axis and the q-axis voltage command values vd<highlight><bold>1</bold></highlight>* and vq<highlight><bold>1</bold></highlight>* and the dh-axis and the qh-axis voltage command values vd<highlight><bold>2</bold></highlight>* and vq<highlight><bold>2</bold></highlight>*, and the dh-axis and the qh-axis voltage command values vdh* and vqh* generated in the higher harmonic current control system are set to 0, i.e., the current control gains for the higher harmonic current control system are set to 0, if an output voltage-saturated state is detected. As a result, the higher harmonic voltage components contained in the output voltages from the power conversion device (invertor) <highlight><bold>4</bold></highlight> are reduced to prevent an output voltage saturation from occurring readily, which, in turn, reduces the frequency with which the current distortion occurs. In addition, since the control gains at the higher harmonic current control system are set to 0, the extent of the current distortion can be reduced even when an output voltage saturation has occurred. </paragraph>
<paragraph id="P-0075" lvl="0"><number>&lsqb;0075&rsqb;</number> Since an output voltage-saturated state is detected based upon the amplitude of the output voltage, which is determined in conformance to the d-axis and the q-axis voltage command values vd<highlight><bold>1</bold></highlight>* and vq<highlight><bold>1</bold></highlight>* and the dh-axis and the qh-axis voltage command values vd<highlight><bold>2</bold></highlight>* and vq<highlight><bold>2</bold></highlight>*, a stable detection of an output voltage-saturated state is enabled by preventing frequent switching in the judging results even when an output voltage saturated state and an output voltage unsaturated state alternate repeatedly over a short period of time. Furthermore, as the current control gain is continuously reduced over the predetermined length of time even when an output voltage saturated state is no longer detected, the current control gain is not switched frequently over a short period of time to minimize the motor torque fluctuation. </paragraph>
<paragraph id="P-0076" lvl="0"><number>&lsqb;0076&rsqb;</number> Fourth Embodiment </paragraph>
<paragraph id="P-0077" lvl="0"><number>&lsqb;0077&rsqb;</number> In each of the embodiments explained above, the higher harmonic current control circuit (dhqh-axis current control circuit) <highlight><bold>11</bold></highlight> (see <cross-reference target="DRAWINGS">FIG. 4</cross-reference>) or <highlight><bold>11</bold></highlight>A (see <cross-reference target="DRAWINGS">FIG. 8</cross-reference>) is employed to change both of the current control gains, i.e., the proportional control (P) gain and the integral control (I) gain. Instead, the integral control (I) gain alone may be varied as shown in <cross-reference target="DRAWINGS">FIG. 12</cross-reference> (corresponding to <cross-reference target="DRAWINGS">FIG. 4</cross-reference>) and <cross-reference target="DRAWINGS">FIG. 13</cross-reference> (corresponding to <cross-reference target="DRAWINGS">FIG. 8</cross-reference>) to reduce the integral control (I) gain alone if an output voltage-saturated state is detected. While the accuracy of the control output improves in the steady state by increasing the integral control (I) gain in the control system under normal circumstances, the higher integral control (I) gain increases the response time in a transient state. Accordingly, by reducing the integral control gain or setting the integral control gain to 0 if any of the output voltages becomes saturated, the responsiveness of the higher harmonic current control system is maintained and thus, the extent of the current distortion can be further reduced. </paragraph>
<paragraph id="P-0078" lvl="0"><number>&lsqb;0078&rsqb;</number> The above described embodiments are examples, and various modifications can be made without departing from the spirit and scope of the invention. For instance, no restrictions are imposed with regard to the type of AC motor, and the motor control apparatus in any of the embodiments may be adopted in conjunction with a synchronous motor or an induction motor. </paragraph>
<paragraph id="P-0079" lvl="0"><number>&lsqb;0079&rsqb;</number> The disclosure of the following priority application is herein incorporated by reference: Japanese Patent Application No. 2001-198691 filed Jun. 29, 2001. </paragraph>
</section>
</detailed-description>
</subdoc-description>
<subdoc-claims>
<heading lvl="1">What is claimed is: </heading>
<claim id="CLM-00001">
<claim-text><highlight><bold>1</bold></highlight>. A motor control apparatus comprising: 
<claim-text>a fundamental wave current control system that controls a fundamental wave component of a motor current in an orthogonal coordinate system which hypothetically rotates in synchronization with a rotation of a 3-phase AC motor; </claim-text>
<claim-text>a higher harmonic current control system that controls a higher harmonic component contained in the motor current in an orthogonal coordinate system hypothetically rotating with a frequency which is an integral multiple of the frequency of the fundamental wave component of the motor current; </claim-text>
<claim-text>a voltage command value generating device that generates 3-phase AC voltage command values by adding an output from said fundamental wave current control system and an output from said higher harmonic current control system; </claim-text>
<claim-text>a power conversion device that converts a DC source voltage to a 3-phase AC voltage corresponding to the 3-phase AC voltage command values and outputs the 3-phase AC voltage to the 3-phase AC motor; </claim-text>
<claim-text>a voltage saturation detection device which detects that an output voltage from said power conversion device is in a saturated state; and </claim-text>
<claim-text>a gain adjustment device that reduces a current control gain for said higher harmonic current control system if said voltage saturation detection device detects an output voltage-saturated state. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00002">
<claim-text><highlight><bold>2</bold></highlight>. A motor control apparatus according to <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein: 
<claim-text>said voltage saturation detection device judges that an output voltage from said power conversion device is in a saturated state when the 3-phase AC motor is operating in a preset high-output operating range. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00003">
<claim-text><highlight><bold>3</bold></highlight>. A motor control apparatus according to <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein: 
<claim-text>said voltage saturation detection device judges that an output voltage from said power conversion device is in a saturated state if any of the 3-phase AC voltage command values exceeds a judging reference value. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00004">
<claim-text><highlight><bold>4</bold></highlight>. A motor control apparatus according to <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein: 
<claim-text>said voltage saturation detection device calculates an amplitude of an output voltage from said power conversion device based upon the output from said fundamental wave current control system and the output from said higher harmonic current control system and judges that an output voltage from said power conversion device is in a saturated state if the amplitude of an output voltage exceeds a judging reference value. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00005">
<claim-text><highlight><bold>5</bold></highlight>. A motor control apparatus according to <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein: 
<claim-text>said gain adjustment device sets the output of said higher harmonic current control system to 0 if said voltage saturation detection device detects an output voltage-saturated state. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00006">
<claim-text><highlight><bold>6</bold></highlight>. A motor control apparatus according to <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein: 
<claim-text>said higher harmonic current control system implements proportional integral control on a deviation of a higher harmonic actual current relative to a higher harmonic current command value; and </claim-text>
<claim-text>said gain adjustment device reduces an integral control gain for said higher harmonic current control system if said voltage saturation detection device detects an output voltage-saturated state. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00007">
<claim-text><highlight><bold>7</bold></highlight>. A motor control apparatus according to <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein: 
<claim-text>said gain adjustment device continuously reduces a current control gain over a predetermined length of time when an output voltage-saturated state is no longer detected by said voltage saturation detection device. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00008">
<claim-text><highlight><bold>8</bold></highlight>. A motor control apparatus comprising: 
<claim-text>a fundamental wave current control system that controls a fundamental wave component of a motor current in an orthogonal coordinate system which hypothetically rotates in synchronization with a rotation of a 3-phase AC motor; </claim-text>
<claim-text>a higher harmonic current control system that controls a higher harmonic component contained in the motor current in an orthogonal coordinate system hypothetically rotating with a frequency which is an integral multiple of the frequency of the fundamental wave component of the motor current; </claim-text>
<claim-text>a voltage command value generation means for generating 3-phase AC voltage command values by adding an output from said fundamental wave current control system and an output from said higher harmonic current control system; </claim-text>
<claim-text>a power conversion means for converting a DC source voltage to 3-phase AC voltage corresponding to the 3-phase AC voltage command values and outputs the 3-phase AC voltage to the 3-phase AC motor; </claim-text>
<claim-text>a voltage saturation detection means for detecting that an output voltage from said power conversion means is in a saturated state; and </claim-text>
<claim-text>a gain adjustment means for reducing a current control gain for said higher harmonic current control system if said voltage saturation detection means detects that an output voltage is in a saturated state. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00009">
<claim-text><highlight><bold>9</bold></highlight>. A motor control method adopted in a control system having a fundamental wave current control system that controls a fundamental wave component of motor currents in an orthogonal coordinate system hypothetically rotating in synchronization with the rotation of a 3-phase AC motor and a higher harmonic current control system that controls a higher harmonic component contained in the motor currents with an orthogonal coordinate system hypothetically rotating with a frequency which is an integral multiple of the frequency of the fundamental wave component of the motor currents, in said control system 3-phase AC voltage command values is generated by adding an output from said fundamental wave current control system and an output from said higher harmonic current control system, a DC source voltage is converted to 3-phase AC voltages corresponding to the 3-phase AC voltage command values and the 3-phase AC voltages is outputted to the 3-phase AC motor, comprising: 
<claim-text>detecting whether or not the 3-phase AC voltages converted from the DC source voltage and output to the 3-phase AC motor are in a saturated state; and </claim-text>
<claim-text>reducing a current control gain for said higher harmonic current control system if an output voltage saturated state is detected.</claim-text>
</claim-text>
</claim>
</subdoc-claims>
<subdoc-drawings id="DRAWINGS">
<heading lvl="0" align="CENTER">Drawings</heading>
<representative-figure>1</representative-figure>
<figure id="figure-D00000">
<image id="EMI-D00000" file="US20030001536A1-20030102-D00000.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00001">
<image id="EMI-D00001" file="US20030001536A1-20030102-D00001.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00002">
<image id="EMI-D00002" file="US20030001536A1-20030102-D00002.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00003">
<image id="EMI-D00003" file="US20030001536A1-20030102-D00003.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00004">
<image id="EMI-D00004" file="US20030001536A1-20030102-D00004.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00005">
<image id="EMI-D00005" file="US20030001536A1-20030102-D00005.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00006">
<image id="EMI-D00006" file="US20030001536A1-20030102-D00006.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00007">
<image id="EMI-D00007" file="US20030001536A1-20030102-D00007.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00008">
<image id="EMI-D00008" file="US20030001536A1-20030102-D00008.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00009">
<image id="EMI-D00009" file="US20030001536A1-20030102-D00009.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00010">
<image id="EMI-D00010" file="US20030001536A1-20030102-D00010.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00011">
<image id="EMI-D00011" file="US20030001536A1-20030102-D00011.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00012">
<image id="EMI-D00012" file="US20030001536A1-20030102-D00012.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00013">
<image id="EMI-D00013" file="US20030001536A1-20030102-D00013.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00014">
<image id="EMI-D00014" file="US20030001536A1-20030102-D00014.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00015">
<image id="EMI-D00015" file="US20030001536A1-20030102-D00015.TIF" imf="TIFF" ti="DR"/>
</figure>
</subdoc-drawings>
</patent-application-publication>
