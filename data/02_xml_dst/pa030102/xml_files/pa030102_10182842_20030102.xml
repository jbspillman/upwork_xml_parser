<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE patent-application-publication SYSTEM "pap-v16-2002-01-01.dtd" [
<!ENTITY US20030005049A1-20030102-D00000.TIF SYSTEM "US20030005049A1-20030102-D00000.TIF" NDATA TIF>
<!ENTITY US20030005049A1-20030102-D00001.TIF SYSTEM "US20030005049A1-20030102-D00001.TIF" NDATA TIF>
<!ENTITY US20030005049A1-20030102-D00002.TIF SYSTEM "US20030005049A1-20030102-D00002.TIF" NDATA TIF>
<!ENTITY US20030005049A1-20030102-D00003.TIF SYSTEM "US20030005049A1-20030102-D00003.TIF" NDATA TIF>
<!ENTITY US20030005049A1-20030102-D00004.TIF SYSTEM "US20030005049A1-20030102-D00004.TIF" NDATA TIF>
<!ENTITY US20030005049A1-20030102-D00005.TIF SYSTEM "US20030005049A1-20030102-D00005.TIF" NDATA TIF>
<!ENTITY US20030005049A1-20030102-D00006.TIF SYSTEM "US20030005049A1-20030102-D00006.TIF" NDATA TIF>
<!ENTITY US20030005049A1-20030102-D00007.TIF SYSTEM "US20030005049A1-20030102-D00007.TIF" NDATA TIF>
<!ENTITY US20030005049A1-20030102-D00008.TIF SYSTEM "US20030005049A1-20030102-D00008.TIF" NDATA TIF>
<!ENTITY US20030005049A1-20030102-D00009.TIF SYSTEM "US20030005049A1-20030102-D00009.TIF" NDATA TIF>
<!ENTITY US20030005049A1-20030102-D00010.TIF SYSTEM "US20030005049A1-20030102-D00010.TIF" NDATA TIF>
<!ENTITY US20030005049A1-20030102-D00011.TIF SYSTEM "US20030005049A1-20030102-D00011.TIF" NDATA TIF>
<!ENTITY US20030005049A1-20030102-D00012.TIF SYSTEM "US20030005049A1-20030102-D00012.TIF" NDATA TIF>
<!ENTITY US20030005049A1-20030102-D00013.TIF SYSTEM "US20030005049A1-20030102-D00013.TIF" NDATA TIF>
<!ENTITY US20030005049A1-20030102-D00014.TIF SYSTEM "US20030005049A1-20030102-D00014.TIF" NDATA TIF>
<!ENTITY US20030005049A1-20030102-D00015.TIF SYSTEM "US20030005049A1-20030102-D00015.TIF" NDATA TIF>
<!ENTITY US20030005049A1-20030102-D00016.TIF SYSTEM "US20030005049A1-20030102-D00016.TIF" NDATA TIF>
<!ENTITY US20030005049A1-20030102-D00017.TIF SYSTEM "US20030005049A1-20030102-D00017.TIF" NDATA TIF>
]>
<patent-application-publication>
<subdoc-bibliographic-information>
<document-id>
<doc-number>20030005049</doc-number>
<kind-code>A1</kind-code>
<document-date>20030102</document-date>
</document-id>
<publication-filing-type>new</publication-filing-type>
<domestic-filing-data>
<application-number>
<doc-number>10182842</doc-number>
</application-number>
<application-number-series-code>10</application-number-series-code>
<filing-date>20020730</filing-date>
</domestic-filing-data>
<foreign-priority-data>
<priority-application-number>
<doc-number>2000-20985</doc-number>
</priority-application-number>
<filing-date>20000131</filing-date>
<country-code>JP</country-code>
</foreign-priority-data>
<foreign-priority-data>
<priority-application-number>
<doc-number>2000-22088</doc-number>
</priority-application-number>
<filing-date>20000131</filing-date>
<country-code>JP</country-code>
</foreign-priority-data>
<technical-information>
<classification-ipc>
<classification-ipc-primary>
<ipc>G06F017/60</ipc>
</classification-ipc-primary>
<classification-ipc-secondary>
<ipc>G06F015/16</ipc>
</classification-ipc-secondary>
<classification-ipc-edition>07</classification-ipc-edition>
</classification-ipc>
<classification-us>
<classification-us-primary>
<uspc>
<class>709</class>
<subclass>203000</subclass>
</uspc>
</classification-us-primary>
</classification-us>
<title-of-invention>Communication system,relay device, service providing device,relaying method, service providing method and program product</title-of-invention>
</technical-information>
<inventors>
<first-named-inventor>
<name>
<given-name>Hideharu</given-name>
<family-name>Ogawa</family-name>
</name>
<residence>
<residence-non-us>
<city>Tokyo</city>
<country-code>JP</country-code>
</residence-non-us>
</residence>
<authority-applicant>INV</authority-applicant>
</first-named-inventor>
</inventors>
<correspondence-address>
<name-1>Mitchell P Brook</name-1>
<name-2>Luce Forward Hamilton &amp; Scripps</name-2>
<address>
<address-1>11988 El Camino Real Suite 200</address-1>
<city>San Diego</city>
<state>CA</state>
<postalcode>92130</postalcode>
<country>
<country-code>US</country-code>
</country>
</address>
</correspondence-address>
<international-conventions>
<pct-application>
<document-id>
<doc-number>PCT/JP01/00654</doc-number>
<document-date>20010131</document-date>
<country-code>WO</country-code>
</document-id>
</pct-application>
</international-conventions>
</subdoc-bibliographic-information>
<subdoc-abstract>
<paragraph id="A-0001" lvl="0">A communication system preferable to a technique of allowing only an ISP (<highlight><bold>151</bold></highlight>) connecting a user terminal to the Internet to manage information about the charging for the service provided to the user by an ASP (<highlight><bold>132</bold></highlight>) in the Internet so as to prevent credit card information on the credit card of the user from leaking into the Internet and preferable to dial-up server for providing connection with access limit to a computer communication network such as the Internet to a terminal, a relay device, a service providing device, a relay method, a service providing method, and a program product for realizing them. The feasibility of the relay between a terminal (<highlight><bold>111</bold></highlight>) and an ASP (<highlight><bold>132</bold></highlight>)I by an ISP (<highlight><bold>151</bold></highlight>) is determined on the basis of the relay condition (for example, the condition determined by the IP address and the port number) correlated with the user using the terminal (<highlight><bold>111</bold></highlight>). The system inquires of the ISP (<highlight><bold>151</bold></highlight>) if the ASP (<highlight><bold>132</bold></highlight>) provides a service to the terminal (<highlight><bold>111</bold></highlight>). If the user of the terminal (<highlight><bold>111</bold></highlight>) is registered in the ISP (<highlight><bold>151</bold></highlight>), the ISP (<highlight><bold>151</bold></highlight>) carries out the charging of the service in place of the ASP (<highlight><bold>132</bold></highlight>), and the ASP (<highlight><bold>132</bold></highlight>) provides the service to the terminal (<highlight><bold>111</bold></highlight>) through the ISP (<highlight><bold>151</bold></highlight>). </paragraph>
</subdoc-abstract>
<subdoc-description>
<summary-of-invention>
<section>
<heading lvl="1">TECHNICAL FIELD </heading>
<paragraph id="P-0001" lvl="0"><number>&lsqb;0001&rsqb;</number> The present invention relates to a communication system, a relay device, a service providing device, a relaying method, a service providing method, and a program product. </paragraph>
<paragraph id="P-0002" lvl="0"><number>&lsqb;0002&rsqb;</number> Particularly, the present invention relates to a communication system, a relay device, a service provider, a relaying method, a service providing method, and a program product for realizing them. They are preferable to a technique of allowing only an ISP (Internet Service Provider) connecting a user terminal to the Internet to manage information about the charging for the service provided to the user by an ASP (Application Service Provider) in the Internet so as to prevent credit card information on the credit card of the user from leaking into the Internet and preferable to a dial-up server for providing connection with access control to a computer communication network such as the Internet. </paragraph>
</section>
<section>
<heading lvl="1">BACKGROUND ART </heading>
<paragraph id="P-0003" lvl="0"><number>&lsqb;0003&rsqb;</number> Conventionally, relay devices for connecting each terminal to a computer communications network, such as the Internet, etc. are provided. This type of relay device is called a &ldquo;dial-up server&rdquo; or a &ldquo;dial-up router&rdquo; in the case where the terminal is connected to the relay device through a telephone line, etc., and is called a &ldquo;gateway&rdquo; in the case where the terminal is connected to the relay device through a network cable (including the radio). The enterprises or companies, which provide users of the terminal with access right for connecting to the Internet, using this type of relay device, are called ISPs. In a computer communications network, such as the Internet, there are ASPs which are included in the computer communications network and provide the user of each terminal with services. Each user connects to the Internet through the ISP, and receives a service from the ASP using a Web browser. This service includes providing of electronic information (image information, voice information, information representing a search result of various databases, etc.). The service may include mail-order selling, etc. </paragraph>
<paragraph id="P-0004" lvl="0"><number>&lsqb;0004&rsqb;</number> In the field of such ISP business, various researches have been developed, in accordance with people&apos;s recent interest on the WWW (World Wide Web) and advancement of in WWW-related enterprise. </paragraph>
<paragraph id="P-0005" lvl="0"><number>&lsqb;0005&rsqb;</number> However, with a relay device used by the current ISPs, connections to the computer communications network, such as the Internet, etc. is provided to the user terminal. Hence, the connection to the ASP, providing electronic information which should not really be shown to kids, can not be controlled. </paragraph>
<paragraph id="P-0006" lvl="0"><number>&lsqb;0006&rsqb;</number> When receiving a chargeable service from an ASP, the user needs to inform the ASP about his/her name and number information on his/her credit card. In this case, the name and number information of the credit card is transmitted in the Internet. This transmission may results in that the user may suffer a swindle using the user&apos;s credit card. It is highly demanded that not only the information regarding the user&apos;s credit card, but also credit information, such as the user address, name, phone number, etc., be prevented from flowing over the computer communications network. </paragraph>
<paragraph id="P-0007" lvl="0"><number>&lsqb;0007&rsqb;</number> There is a technique for transmitting the credit information using SSL (Secure Socket Layer) protocol. Even in this case, the credit information still flows over the communications network. </paragraph>
<paragraph id="P-0008" lvl="0"><number>&lsqb;0008&rsqb;</number> In many cases, the user has made a contract with an ISP, so that the connection charges are paid through a credit card. Hence, if the ISP can collect the charges, without knowing the credit card information, it is safe and convenient for the user. </paragraph>
<paragraph id="P-0009" lvl="0"><number>&lsqb;0009&rsqb;</number> A computer communication network is built between an ASP and an ISP, which are in a cooperative relationship with each other, in the Internet excluding their competitors. In this network, while services are provided to terminal users, it is highly demanded that customers be adequately selected and that the advertisement effect be enhanced. </paragraph>
<paragraph id="P-0010" lvl="0"><number>&lsqb;0010&rsqb;</number> Further, it is also highly demanded that, in a case where such a form can be realized, that a free network connection service be provided, while an ASP pays the charges for using the ISP for the user. </paragraph>
<paragraph id="P-0011" lvl="0"><number>&lsqb;0011&rsqb;</number> An object of the present invention is to provide a communication system, a relay device, a service provider, a relaying method, a service providing method, and a program product for realizing these, which are suitable for a dial-up server; wherein billing information, for a service to be provided from an ASP in the Internet to a user, is managed only by an ISP for connecting a terminal of the user to the Internet; and which is preferable for managing user-credit-card information not to be leaked into the Internet and for providing terminals with connection having access control toward a computer communications network, such as the Internet, in order to solve the above. </paragraph>
</section>
<section>
<heading lvl="1">DISCLOSURE OF INVENTION </heading>
<paragraph id="P-0012" lvl="0"><number>&lsqb;0012&rsqb;</number> A communication system according to the first aspect of the present invention is configured to include a terminal, a relay device and a service provider. </paragraph>
<paragraph id="P-0013" lvl="0"><number>&lsqb;0013&rsqb;</number> Here, the terminal sends a user name to the relay device. </paragraph>
<paragraph id="P-0014" lvl="0"><number>&lsqb;0014&rsqb;</number> Next, the relay device receives the user name from the terminal, and assigns the terminal a communication identifier in association with the user name. </paragraph>
<paragraph id="P-0015" lvl="0"><number>&lsqb;0015&rsqb;</number> The terminal sends a service-request message, whose addresser corresponds to the assigned communication identifier and addressee corresponds to a communication identifier of the service provider, to the relay device. </paragraph>
<paragraph id="P-0016" lvl="0"><number>&lsqb;0016&rsqb;</number> The relay device receives the service-request message from the terminal, and sends the service-request message to the service provider. </paragraph>
<paragraph id="P-0017" lvl="0"><number>&lsqb;0017&rsqb;</number> Further, the service provider receives the service-request message from the relay device, and sends an inquiry message for inquiring whether to provide a service to the communication identifier specified in the service-request message, to the relay device. </paragraph>
<paragraph id="P-0018" lvl="0"><number>&lsqb;0018&rsqb;</number> The relay device receives the inquiry message, and sends a response message, to the service provider, specifying to provide a service, in a case where the communication identifier specified in the inquiry message has been assigned in association with the user name, and, if not, specifying to provide a service. </paragraph>
<paragraph id="P-0019" lvl="0"><number>&lsqb;0019&rsqb;</number> The service provider receives the response message from the relay device, and sends a service-providing message, whose addressee corresponds to the communication identifier specified in the service-request message in a case where the response message specifies to provide a service and whose addresser is the service provider, to the relay device. </paragraph>
<paragraph id="P-0020" lvl="0"><number>&lsqb;0020&rsqb;</number> The relay device receives the service-providing message from the service provider, and sends this to the terminal; and </paragraph>
<paragraph id="P-0021" lvl="0"><number>&lsqb;0021&rsqb;</number> The terminal receives the service-providing message from the relay device. </paragraph>
<paragraph id="P-0022" lvl="0"><number>&lsqb;0022&rsqb;</number> The communication system of the present invention may be configured as follows: </paragraph>
<paragraph id="P-0023" lvl="0"><number>&lsqb;0023&rsqb;</number> The inquiry message or the service-providing message includes billing information of the service to be provided. </paragraph>
<paragraph id="P-0024" lvl="0"><number>&lsqb;0024&rsqb;</number> The relay device stores the billing information corresponding to the user name corresponding to the assigned communication identifier; and, in a case where to send the service-providing message to the terminal, adds or sums the billing information of the service to be provided, included in the inquiry message or the service-providing message, to or with the billing information stored in association with the user name, so as to update the billing information stored in association with the user name. </paragraph>
<paragraph id="P-0025" lvl="0"><number>&lsqb;0025&rsqb;</number> A relay device according to the second aspect of the present invention may be communicable with a terminal and a service provider, and is configured to include a user-name receiver, a communication-identifier assignor, a service-request message receiver, a service-request message sender, an inquiry message receiver, a response-message sender, a service-providing message receiver, and a service-providing message sender. </paragraph>
<paragraph id="P-0026" lvl="0"><number>&lsqb;0026&rsqb;</number> The user-name receiver receives a user name sent from the terminal. </paragraph>
<paragraph id="P-0027" lvl="0"><number>&lsqb;0027&rsqb;</number> The communication-identifier assignor assigns the terminal a communication identifier in association with the received user name. </paragraph>
<paragraph id="P-0028" lvl="0"><number>&lsqb;0028&rsqb;</number> The service-request message receiver receives a service-request message, whose addresser corresponds to the assigned communication identifier and addressee corresponds to a communication identifier of the service provider and which is sent from the terminal. </paragraph>
<paragraph id="P-0029" lvl="0"><number>&lsqb;0029&rsqb;</number> The service-request message sender sends the received service-request message to the service provider. </paragraph>
<paragraph id="P-0030" lvl="0"><number>&lsqb;0030&rsqb;</number> The inquiry-message receiver receives an inquiry message for inquiring whether to provide a service to the communication identifier specified in the sent service-request message, the inquiry message being sent from the service provider. </paragraph>
<paragraph id="P-0031" lvl="0"><number>&lsqb;0031&rsqb;</number> The response-message sender sends, to the service provider, a response message specifying to provide a service in a case where the communication identifier specified in the received inquiry message is assigned in association with the received user name, and, if not, specifying not to provide a service. </paragraph>
<paragraph id="P-0032" lvl="0"><number>&lsqb;0032&rsqb;</number> The service-providing message receiver receives a service-providing message for providing a service to the communication identifier assigned in association the received user name, the service-providing message being sent from the service provider. </paragraph>
<paragraph id="P-0033" lvl="0"><number>&lsqb;0033&rsqb;</number> The service-providing message sender sends the received service-providing message to the terminal. </paragraph>
<paragraph id="P-0034" lvl="0"><number>&lsqb;0034&rsqb;</number> The relay device of the present invention may be configured to include a billing-information storage section and a billing-information updating section. </paragraph>
<paragraph id="P-0035" lvl="0"><number>&lsqb;0035&rsqb;</number> The inquiry message or the service-providing message may include billing information of the service to be provided. </paragraph>
<paragraph id="P-0036" lvl="0"><number>&lsqb;0036&rsqb;</number> The billing-information storage section may store the billing information in association with the received user name. </paragraph>
<paragraph id="P-0037" lvl="0"><number>&lsqb;0037&rsqb;</number> The billing-information updating section may add or sum the billing information of the to-be-provided service included in the inquiry message or the service-providing message, to or with the billing information stored in association with the received user name, in a case where the service-providing message sender sends the service-providing message to the terminal, so as to update the billing-information storage section. </paragraph>
<paragraph id="P-0038" lvl="0"><number>&lsqb;0038&rsqb;</number> In the relay device of the present invention, updating by the billing-information updating section may be performed before sending of the response message by the response-message sender. </paragraph>
<paragraph id="P-0039" lvl="0"><number>&lsqb;0039&rsqb;</number> In the relay device of the present invention, updating by the billing-information updating section may be performed before sending of the service-providing message by the service-providing message sender. </paragraph>
<paragraph id="P-0040" lvl="0"><number>&lsqb;0040&rsqb;</number> The relay device of the present invention may further include a service-received message receiver. </paragraph>
<paragraph id="P-0041" lvl="0"><number>&lsqb;0041&rsqb;</number> The service-received message receiver may receive a service-received message sent from the terminal, in a case where the terminal receives the service-providing message sent from the service-providing message sender. </paragraph>
<paragraph id="P-0042" lvl="0"><number>&lsqb;0042&rsqb;</number> Updating by the billing-information updating section may be performed after receiving of the service-received message by the service-received message receiver. </paragraph>
<paragraph id="P-0043" lvl="0"><number>&lsqb;0043&rsqb;</number> The relay device of the present invention may be configured to further include, an authentication-character-string generator/sender may include a password-character string receiver, and a rule storage section. </paragraph>
<paragraph id="P-0044" lvl="0"><number>&lsqb;0044&rsqb;</number> The authentication-character-string generator/sender generates an authentication character string and sends this to the terminal, in a case where the user name is received by the user-name receiver; </paragraph>
<paragraph id="P-0045" lvl="0"><number>&lsqb;0045&rsqb;</number> The password-character string receiver receive a password-character string sent from the terminal. </paragraph>
<paragraph id="P-0046" lvl="0"><number>&lsqb;0046&rsqb;</number> The rule storage section may store a rule for generating the password-character string from the authentication character string, in association with the user name. </paragraph>
<paragraph id="P-0047" lvl="0"><number>&lsqb;0047&rsqb;</number> Further, the communication-identifier assignor assigns the terminal a communication identifier, in a case where the password-character string received by the password-character-string receiver is generated from the authentication character string generated by the authentication-character-string generator/sender, based on the rule stored in the rule storage section in association with the user name received by the user-name receiver. </paragraph>
<paragraph id="P-0048" lvl="0"><number>&lsqb;0048&rsqb;</number> The communication-identifier assignor assigns the terminal a communication identifier, in a case where the user name is received by the user-name receiver. </paragraph>
<paragraph id="P-0049" lvl="0"><number>&lsqb;0049&rsqb;</number> The communication-identifier invalidating section invalidates the communication identifier assigned by the communication-identifier assignor to the terminal, in a case where the password-character string received by the password-character string receiver is not generated from the authentication character string generated by the authentication-character-string generator/sender, based on the rule stored in the rule storage section in association with the user name received by the user-name receiver. </paragraph>
<paragraph id="P-0050" lvl="0"><number>&lsqb;0050&rsqb;</number> A relay device according to the third aspect of the present invention relays a message, to a communicating computer communications network, including information specifying a communication identifier of an addresser and a communication identifier of an addressee, and is configured to include terminal communicator, a computer-communication-network communicator, a communication-identifier assignor, and an upward relay device. </paragraph>
<paragraph id="P-0051" lvl="0"><number>&lsqb;0051&rsqb;</number> The terminal communicator is connected to a terminal and communicates with the terminal for messages. </paragraph>
<paragraph id="P-0052" lvl="0"><number>&lsqb;0052&rsqb;</number> The computer-communication-network communicator is connected to the computer communications network and communicates with the computer-communications network for messages. </paragraph>
<paragraph id="P-0053" lvl="0"><number>&lsqb;0053&rsqb;</number> The communication-identifier assignor assigns the terminal a communication identifier. </paragraph>
<paragraph id="P-0054" lvl="0"><number>&lsqb;0054&rsqb;</number> The upward relay device sends and relays a message, sent from the terminal via the terminal, to the computer communications network through the computer-communication-network communicator, in a case where a communication identifier of an addresser specified in information included in the message received from the terminal via the terminal communicator is a communication identifier assigned by the communication-identifier assignor and a communication identifier of an addressee specified in the information included in the message satisfies a relay condition, and does not send the message thereto, in a case where the relay condition is not satisfied. </paragraph>
<paragraph id="P-0055" lvl="0"><number>&lsqb;0055&rsqb;</number> The relay device of the present invention may be configured to further include, in place of the upward relay device or in addition to the upward relay device, a downward relay device. </paragraph>
<paragraph id="P-0056" lvl="0"><number>&lsqb;0056&rsqb;</number> The downward relay device sends and relays a message, sent from the computer communication network and received through the computer-communication-network communicator, to the terminal through the terminal communicator, in a case where a communication identifier of an addressee specified in information included in the message is a communication identifier assigned by the communication-identifier assignor, and a communication identifier of an addresser specified in the information included in the message satisfies the relay condition. </paragraph>
<paragraph id="P-0057" lvl="0"><number>&lsqb;0057&rsqb;</number> The relay device of the present invention may be configured to further include a relay-forbiddance-communications-identifier storage section </paragraph>
<paragraph id="P-0058" lvl="0"><number>&lsqb;0058&rsqb;</number> The relay-forbiddance-communications identifier storage section stores communication identifiers in advance </paragraph>
<paragraph id="P-0059" lvl="0"><number>&lsqb;0059&rsqb;</number> The relay condition is satisfied in a case where the communication identifier of the addressee or addresser specified in the information included in the message is not included in the communication identifiers stored in advance in the relay-forbiddance-communications-identifier storage section. </paragraph>
<paragraph id="P-0060" lvl="0"><number>&lsqb;0060&rsqb;</number> The relay device of the present invention may further include a user-name receiver, and may be configured as follows: </paragraph>
<paragraph id="P-0061" lvl="0"><number>&lsqb;0061&rsqb;</number> The user-name receiver receives a user name sent from the terminal through the terminal communicator. </paragraph>
<paragraph id="P-0062" lvl="0"><number>&lsqb;0062&rsqb;</number> The relay-forbiddance-communications-identifier storage section stores a communication identifier in advance in association with the user name received by the user-name receiver. </paragraph>
<paragraph id="P-0063" lvl="0"><number>&lsqb;0063&rsqb;</number> Further, the relay condition is satisfied in a case where the communication identifier of the addressee or addresser specified in the information included in the message is not included in the communication identifiers stored in advance in the relay-forbiddance-communication-identifier storage section in association with the user name. </paragraph>
<paragraph id="P-0064" lvl="0"><number>&lsqb;0064&rsqb;</number> The relay device of the present invention may further include a user-name receiver, an authentication-character-string generator/sender, a password-character-string receiver, and a rule storage section, and may be configured as follows: </paragraph>
<paragraph id="P-0065" lvl="0"><number>&lsqb;0065&rsqb;</number> The user-name receiver receives a user name sent form the terminal via the terminal communicator. </paragraph>
<paragraph id="P-0066" lvl="0"><number>&lsqb;0066&rsqb;</number> The authentication-character-string generator/sender generates an authentication character string, and sends this to the terminal through the terminal communicator. </paragraph>
<paragraph id="P-0067" lvl="0"><number>&lsqb;0067&rsqb;</number> The password-character-string receiver receives a password-character string sent from the terminal through the terminal communicator. </paragraph>
<paragraph id="P-0068" lvl="0"><number>&lsqb;0068&rsqb;</number> The rule storage section stores a rule for generating the password-character string from the authentication character string, in association with the user name. </paragraph>
<paragraph id="P-0069" lvl="0"><number>&lsqb;0069&rsqb;</number> The communication-identifier assignor assigns the terminal a communication identifier, in a case where the password-character string received by the password-character-string receiver is generated from the authentication character string generated by the authentication-character-string generator/sender based on the rule stored in the rule storage section in association with the user name received by the user-name receiver. </paragraph>
<paragraph id="P-0070" lvl="0"><number>&lsqb;0070&rsqb;</number> The relay device of the present invention may further include a communication-identifier invalidating section, and is configured as follows: </paragraph>
<paragraph id="P-0071" lvl="0"><number>&lsqb;0071&rsqb;</number> The communication-identifier assignor assigns the terminal a communication identifier, in a case where the user name is received by the user-name receiver, and </paragraph>
<paragraph id="P-0072" lvl="0"><number>&lsqb;0072&rsqb;</number> The communication-identifier invalidating section invalidates the communication identifier assigned to the terminal by the communication-identifier assignor, in a case where the password-character string received by the password-character-string receiver is not generated from the authentication character string generated by the authentication-character-string generator/sender based on the rule stored in the rule storage section in association with the user name received by the user-name receiver. </paragraph>
<paragraph id="P-0073" lvl="0"><number>&lsqb;0073&rsqb;</number> The communication-identifier assignor may select a communication identifier, which is currently not assigned to any other terminals, from a plurality of communication identifiers which are set in advance, and assign the terminal this communication identifier. </paragraph>
<paragraph id="P-0074" lvl="0"><number>&lsqb;0074&rsqb;</number> The relay device of the present invention may further include a relay-forbiddance-communications-identifier storage section. </paragraph>
<paragraph id="P-0075" lvl="0"><number>&lsqb;0075&rsqb;</number> The relay-forbiddance-communications-identifier storage section stores communication identifiers in advance. </paragraph>
<paragraph id="P-0076" lvl="0"><number>&lsqb;0076&rsqb;</number> The relay condition is satisfied in a case where the communication identifier of the addressee or addresser specified in the information included in the message is not included in the communication identifiers stored in advance in the relay-forbiddance-communications-identifier storage section. </paragraph>
<paragraph id="P-0077" lvl="0"><number>&lsqb;0077&rsqb;</number> The relay device of the present invention may further include a user-name receiver. </paragraph>
<paragraph id="P-0078" lvl="0"><number>&lsqb;0078&rsqb;</number> The user-name receiver receives a user name sent from the terminal through the terminal communicator. </paragraph>
<paragraph id="P-0079" lvl="0"><number>&lsqb;0079&rsqb;</number> The relay-forbiddance-communications-identifier storage section stores a communication identifier in advance in association with the user name received by the user-name receiver. </paragraph>
<paragraph id="P-0080" lvl="0"><number>&lsqb;0080&rsqb;</number> The relay condition is satisfied in a case where the communication identifier of the addressee or addresser specified in the information included in the message is not included in the communication identifiers stored in advance in the relay-forbiddance-communication-identifier storage section in association with the user name. </paragraph>
<paragraph id="P-0081" lvl="0"><number>&lsqb;0081&rsqb;</number> A service provider according to the fourth aspect of the present invention may be communicable with a relay device and be configured to comprise a service-request message receiver, an inquiry-message sender, a response-message receiver, and a service-providing message sender. </paragraph>
<paragraph id="P-0082" lvl="0"><number>&lsqb;0082&rsqb;</number> The service-request message receiver receives a service-request message, whose addresser corresponds to a communication identifier assigned by the relay device and whose addressee corresponds to a communication identifier of the service provider, from the relay device. </paragraph>
<paragraph id="P-0083" lvl="0"><number>&lsqb;0083&rsqb;</number> The inquiry-message sender sends, to the relay device, an inquiry message for inquiry whether to provide a service to the communication identifier specified in the service-request message received by the service-request message receiver. </paragraph>
<paragraph id="P-0084" lvl="0"><number>&lsqb;0084&rsqb;</number> The response-message receiver receives a response message specifying whether to provide a service, the response message being sent from the relay device. </paragraph>
<paragraph id="P-0085" lvl="0"><number>&lsqb;0085&rsqb;</number> The service-providing message sender sends, to the relay device, a service-providing message whose addressee corresponds to the communication identifier specified in the service-request message and whose addresser is the service provider, in a case where the response message received by the response-message receiver specifies to provide a service. </paragraph>
<paragraph id="P-0086" lvl="0"><number>&lsqb;0086&rsqb;</number> The inquiry message or the service-providing message may include billing information of the service to be provided. </paragraph>
<paragraph id="P-0087" lvl="0"><number>&lsqb;0087&rsqb;</number> A relaying method according to the fifth aspect of the present invention is for relaying communications between a terminal and a service provider, and comprise a user-name receiving step, a communication-identifier assigning step, a service-request message receiving step, a service-request message sending step, an inquiry-message receiving step, a response-message sending step, a service-providing message receiving step, and a service-providing message sending step. </paragraph>
<paragraph id="P-0088" lvl="0"><number>&lsqb;0088&rsqb;</number> In the user-name receiving step, a user name is sent from the terminal. </paragraph>
<paragraph id="P-0089" lvl="0"><number>&lsqb;0089&rsqb;</number> In the communication-identifier assigning step, a communication identifier is assigned to the terminal in association with the received user name. </paragraph>
<paragraph id="P-0090" lvl="0"><number>&lsqb;0090&rsqb;</number> In the service-request message receiving step, a service-request message, whose addresser corresponds to the assigned communication identifier and addressee corresponds to a communication identifier of the service provider, and which is sent from the terminal, is received. </paragraph>
<paragraph id="P-0091" lvl="0"><number>&lsqb;0091&rsqb;</number> In the service-request message sending step, the received service-request message is sent to the service provider. </paragraph>
<paragraph id="P-0092" lvl="0"><number>&lsqb;0092&rsqb;</number> In the inquiry-message receiving step, an inquiry message for inquiring whether to provide a service to a communication identifier specified in the sent service-request message, and which is sent from the service provider, is received from the service provider. </paragraph>
<paragraph id="P-0093" lvl="0"><number>&lsqb;0093&rsqb;</number> In the response-message sending step, a response message specifying to provide a service in a case where the communication identifier specified in the received inquiry message is assigned in association with the received user name, and, if not, specifying not to provide a service, is sent to the service provider. </paragraph>
<paragraph id="P-0094" lvl="0"><number>&lsqb;0094&rsqb;</number> Further, in the service-providing message receiving step, a service-providing message for providing a service to the communication identifier assigned in association with the received user name is received from the service provider. </paragraph>
<paragraph id="P-0095" lvl="0"><number>&lsqb;0095&rsqb;</number> In the service-providing message sending step, the received service-providing message is sent to the terminal. </paragraph>
<paragraph id="P-0096" lvl="0"><number>&lsqb;0096&rsqb;</number> The relaying method of the present invention may be configured to further include a billing-information updating step. </paragraph>
<paragraph id="P-0097" lvl="0"><number>&lsqb;0097&rsqb;</number> The inquiry message or the service-providing message may include billing information of the service to be provided. </paragraph>
<paragraph id="P-0098" lvl="0"><number>&lsqb;0098&rsqb;</number> In the billing-information updating step, in a case where the service-providing message is sent to the terminal at the service-providing message sending step, the billing information is updated if there is billing information stored in association with the received user name, by adding the billing information of the service to be provided and specified in the inquiry message or the service-providing message therewith, and, if there is not such information, the billing information is stored in association with the user name. </paragraph>
<paragraph id="P-0099" lvl="0"><number>&lsqb;0099&rsqb;</number> In the relaying method of the present invention, updating at the billing-information updating step may be performed before sending of the response message at the response-message sending step. </paragraph>
<paragraph id="P-0100" lvl="0"><number>&lsqb;0100&rsqb;</number> In the relaying method of the present invention, updating at the billing-information updating step may be performed before sending of the service-providing message at the service-providing message sending step. </paragraph>
<paragraph id="P-0101" lvl="0"><number>&lsqb;0101&rsqb;</number> The relaying method of the present invention may further include a service-received message receiving step. </paragraph>
<paragraph id="P-0102" lvl="0"><number>&lsqb;0102&rsqb;</number> In the service-received message receiving step, a service-received message sent from the terminal is received, in a case where the terminal receives the service-providing message sent at the service-providing message sending step. </paragraph>
<paragraph id="P-0103" lvl="0"><number>&lsqb;0103&rsqb;</number> In the billing-information updating step, updating is performed after receiving of the service-received message at the service-received message receiving step. </paragraph>
<paragraph id="P-0104" lvl="0"><number>&lsqb;0104&rsqb;</number> The relaying method of the present invention may further include an authentication-character-string generating/sending step and a password-character string receiving step. </paragraph>
<paragraph id="P-0105" lvl="0"><number>&lsqb;0105&rsqb;</number> In the authentication-character-string generating/sending step, an authentication character string is generated and sent to the terminal, in a case where the user name is received at the user-name receiving step; and </paragraph>
<paragraph id="P-0106" lvl="0"><number>&lsqb;0106&rsqb;</number> In the password-character string receiving step, a password-character string sent from the terminal is received. </paragraph>
<paragraph id="P-0107" lvl="0"><number>&lsqb;0107&rsqb;</number> Further, in the communication-identifier assigning step, a communication identifier is assigned to a terminal, in a case where the password-character string received at the password-character string receiving step is generated from the authentication character string generated at the authentication-character-string generating/sending step, based on a rule stored in advance in association with the user name received at the user-name receiving step. </paragraph>
<paragraph id="P-0108" lvl="0"><number>&lsqb;0108&rsqb;</number> The relaying method of the present invention may be configured to further include a communication-identifier invalidating step. </paragraph>
<paragraph id="P-0109" lvl="0"><number>&lsqb;0109&rsqb;</number> The communication-identifier assigning step assigns the terminal a communication identifier, in a case where a user name is received at the user-name receiving step. </paragraph>
<paragraph id="P-0110" lvl="0"><number>&lsqb;0110&rsqb;</number> In the communication-identifier invalidating step, the communication identifier assigned to the terminal at the communication-identifier assigning step is invalidated, in a case where the password-character string received at the password-character-string receiving step is not generated from the authentication character string generated at the authentication-character-string generating/sending step based on the rule stored in advance in association with the user name received at the user-name receiving step. </paragraph>
<paragraph id="P-0111" lvl="0"><number>&lsqb;0111&rsqb;</number> A relaying method according to the sixth aspect of the present invention is for relaying a message to a computer communication network for performing communications for messages including information specifying a communication identifier of an addresser and a communication identifier of an addressee, and method may be configured to include a communication-identifier assigning step, a terminal-receiving step and an upward relaying step. </paragraph>
<paragraph id="P-0112" lvl="0"><number>&lsqb;0112&rsqb;</number> In the communication-identifier assigning step, a communication identifier is assigned to a terminal. </paragraph>
<paragraph id="P-0113" lvl="0"><number>&lsqb;0113&rsqb;</number> In the terminal-receiving step, a message sent from the terminal is received. </paragraph>
<paragraph id="P-0114" lvl="0"><number>&lsqb;0114&rsqb;</number> In the upward relaying step, a message is sent and relayed to the computer communication network, in a case where a communication identifier of an addresser specified in information included in the message received at the terminal-receiving step is a communication identifier assigned at the communication-identifier assigning step, and a communication identifier of an addressee specified in the information included in the message satisfies a relay condition, and not sending the message thereto in a case where the relay condition is not satisfied. </paragraph>
<paragraph id="P-0115" lvl="0"><number>&lsqb;0115&rsqb;</number> The relaying method of the present invention may further include, in place of the terminal-receiving step and the upward relaying step or in addition to these, a computer-communication-network receiving step and a downward relaying step. </paragraph>
<paragraph id="P-0116" lvl="0"><number>&lsqb;0116&rsqb;</number> In the computer-communication-network receiving step, a message sent from the computer communication network is received. </paragraph>
<paragraph id="P-0117" lvl="0"><number>&lsqb;0117&rsqb;</number> In the downward relaying step, a message is sent and relayed, in a case where a communication identifier of an addressee specified in information included in the message received at the computer-communication-network receiving step is a communication identifier assigned at the communication-identifier assigning step, and a communication identifier specified in the information included in the message satisfies the relay condition. </paragraph>
<paragraph id="P-0118" lvl="0"><number>&lsqb;0118&rsqb;</number> In the relaying method of the present invention, the relay condition is satisfied, in a case where the communication identifier of the addressee or addresser specified in the information included in the message is not any of communication identifiers stored in advance. </paragraph>
<paragraph id="P-0119" lvl="0"><number>&lsqb;0119&rsqb;</number> The relaying method may further include a user-name receiving step. </paragraph>
<paragraph id="P-0120" lvl="0"><number>&lsqb;0120&rsqb;</number> In the user-name receiving step, the user name sent from the terminal is received. </paragraph>
<paragraph id="P-0121" lvl="0"><number>&lsqb;0121&rsqb;</number> The relay condition is satisfied, in a case where the communication identifier of the addressee or addresser specified in the information included in the message is not any of communication identifiers stored in advance in association with the user name. </paragraph>
<paragraph id="P-0122" lvl="0"><number>&lsqb;0122&rsqb;</number> The relaying method of the present invention may further include a username receiving step, an authentication-character string generating/sending step, and a password-character-string receiving step. In the user-name receiving step, a user name sent from the terminal is received. </paragraph>
<paragraph id="P-0123" lvl="0"><number>&lsqb;0123&rsqb;</number> In the authentication-character-string generating/sending step, an authentication character string is generated and sent to the terminal. </paragraph>
<paragraph id="P-0124" lvl="0"><number>&lsqb;0124&rsqb;</number> In the password-character-string receiving step, a password-character string sent from the terminal is received. </paragraph>
<paragraph id="P-0125" lvl="0"><number>&lsqb;0125&rsqb;</number> The communication-identifier assigning step assigns the terminal a communication identifier, in a case where the password-character string received at the password-character string receiving step is generated from the authentication character string generated at the authentication-character-string generating/sending step based on a rule stored in advance in association with the user name received at the user-name receiving step. </paragraph>
<paragraph id="P-0126" lvl="0"><number>&lsqb;0126&rsqb;</number> The relaying method of the present invention may further include a communication-identifier invalidating step. </paragraph>
<paragraph id="P-0127" lvl="0"><number>&lsqb;0127&rsqb;</number> In the communication-identifier assigning step, a communication identifier is assigned to a terminal, in a case where the user name is received at the user-name receiving step. </paragraph>
<paragraph id="P-0128" lvl="0"><number>&lsqb;0128&rsqb;</number> In the communication-identifier invalidating step, a communication identifier assigned to the terminal at the communication-identifier assigning step is invalidated, in a case where the password-character string received at the password-character-string receiving step is not generated from the authentication character string generated at the authentication-character-string generating/sending step, based on the rule stored in advance in association with the user name received at the user-name receiving step. </paragraph>
<paragraph id="P-0129" lvl="0"><number>&lsqb;0129&rsqb;</number> A service providing method according to the seventh aspect of the present invention, is for providing a service through a relay device, and may be configured to include a service-request message receiving step, an inquiry-message sending step, a response-message receiving step, and a service-providing message sending step. </paragraph>
<paragraph id="P-0130" lvl="0"><number>&lsqb;0130&rsqb;</number> In the service-request message receiving step, a service-request message, whose addresser corresponds to the communication identifier assigned by the relay device and which is sent from the relay device, is received. </paragraph>
<paragraph id="P-0131" lvl="0"><number>&lsqb;0131&rsqb;</number> In the inquiry-message sending step, an inquiry message for inquiring whether to provide a service to the communication identifier specified in the service-request message received at the service-request message receiving step is sent to the relay device. </paragraph>
<paragraph id="P-0132" lvl="0"><number>&lsqb;0132&rsqb;</number> In the response-message receiving step, a response message specifying whether to provide a service and sent from the relay device is received. </paragraph>
<paragraph id="P-0133" lvl="0"><number>&lsqb;0133&rsqb;</number> In the service-providing message sending step, a service-providing message whose addressee corresponds to the communication identifier specified in the service-request message and addresser is the service provider is sent to the relay device, in a case where the response message received at the response-message receiving step specifies to provide a service. </paragraph>
<paragraph id="P-0134" lvl="0"><number>&lsqb;0134&rsqb;</number> In the service providing method of the present invention, the inquiry message or the service-providing message may include billing information to the service to the provided. </paragraph>
<paragraph id="P-0135" lvl="0"><number>&lsqb;0135&rsqb;</number> In the above-described invention, communications may be performed between the terminal, the relay device and the service provider using TCP/IP, and the communication identifier may be specified based on an IP address and a port number. </paragraph>
<paragraph id="P-0136" lvl="0"><number>&lsqb;0136&rsqb;</number> A program product according to the eighth aspect of the present invention, is configured for controlling a computer, which is communicable with a terminal and a service provider, to serve as the above-described relay device or the service provider. </paragraph>
<paragraph id="P-0137" lvl="0"><number>&lsqb;0137&rsqb;</number> The program product of the present invention may be configured, by storing a program onto a computer readable information recording medium, such as a compact disk, a floppy disk, a hard disk, a magneto-optical disk, a digital video disk, a magnetic tape, a semiconductor memory, etc. </paragraph>
<paragraph id="P-0138" lvl="0"><number>&lsqb;0138&rsqb;</number> The program which can be realized by the program product of the present invention is executed by a CPU (Central Processing Unit) included in a computer and any other devices or peripheral devices. Then, the computer serves as the relay device or service provider of the present invention, thereby using the relaying method or service providing method of the present invention. By this, the above-described relay device, service provider, relaying method and service providing method can be realized. </paragraph>
<paragraph id="P-0139" lvl="0"><number>&lsqb;0139&rsqb;</number> Independently from the computer, the program product of the present invention can be distributed or sold. Further, the program according to the program product of the present invention is transmitted through a computer communications network, and the transmitted program is recorded onto another information recording medium, thereby reproducing the program product.</paragraph>
</section>
</summary-of-invention>
<brief-description-of-drawings>
<section>
<heading lvl="1">BRIEF DESCRIPTION OF DRAWINGS </heading>
<paragraph id="P-0140" lvl="0"><number>&lsqb;0140&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1</cross-reference> is an exemplary diagram showing the schematic structure of a communication system of the present invention. </paragraph>
<paragraph id="P-0141" lvl="0"><number>&lsqb;0141&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 2</cross-reference> is an explanatory diagram showing the state of communications in the communication system of the present invention. </paragraph>
<paragraph id="P-0142" lvl="0"><number>&lsqb;0142&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3</cross-reference> is an exemplary diagram showing the schematic structure of a computer which serves as a relay device of the present invention. </paragraph>
<paragraph id="P-0143" lvl="0"><number>&lsqb;0143&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 4</cross-reference> is an exemplary diagram showing the schematic structure of the relay device of the present invention. </paragraph>
<paragraph id="P-0144" lvl="0"><number>&lsqb;0144&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 5</cross-reference> is an explanatory diagram showing the state in which billing information is stored. </paragraph>
<paragraph id="P-0145" lvl="0"><number>&lsqb;0145&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 6</cross-reference> is a flowchart showing the flow of a connection-start process carried out by the relay device of the present invention. </paragraph>
<paragraph id="P-0146" lvl="0"><number>&lsqb;0146&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 7</cross-reference> is a flowchart showing the flow of a terminal-side relay process carried out by the relay device of the present invention. </paragraph>
<paragraph id="P-0147" lvl="0"><number>&lsqb;0147&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 8</cross-reference> is a flowchart showing the flow of a communications-network-side relay process carried out by the relay device of the present invention. </paragraph>
<paragraph id="P-0148" lvl="0"><number>&lsqb;0148&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 9</cross-reference> is a flowchart showing the flow of a connection-start process carried out by the relay device of the present invention. </paragraph>
<paragraph id="P-0149" lvl="0"><number>&lsqb;0149&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 10</cross-reference> is an exemplary diagram showing the schematic structure of a computer serving as a service provider of the present invention. </paragraph>
<paragraph id="P-0150" lvl="0"><number>&lsqb;0150&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 11</cross-reference> is an exemplary diagram showing the schematic structure of the service provider of the present invention. </paragraph>
<paragraph id="P-0151" lvl="0"><number>&lsqb;0151&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 12</cross-reference> is a flowchart showing the flow of an ASP process carried out by the service provider of the present invention. </paragraph>
<paragraph id="P-0152" lvl="0"><number>&lsqb;0152&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 13</cross-reference> is an exemplary diagram showing the schematic structure of a relay device of another embodiment of the present invention. </paragraph>
<paragraph id="P-0153" lvl="0"><number>&lsqb;0153&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 14</cross-reference> is an exemplary diagram showing the schematic structure of a relay device of still another embodiment of the present invention. </paragraph>
<paragraph id="P-0154" lvl="0"><number>&lsqb;0154&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 15</cross-reference> is a flowchart showing the flow of an upward relay process carried out by the relay device of the present embodiment. </paragraph>
<paragraph id="P-0155" lvl="0"><number>&lsqb;0155&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 16</cross-reference> is a flowchart showing the flow of a downward relay process carried out by the relay device of the present embodiment. </paragraph>
<paragraph id="P-0156" lvl="0"><number>&lsqb;0156&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 17</cross-reference> is an explanatory diagram showing an example, wherein messages are relayed between a terminal and an ASP in a communications network by the relay device of the present embodiment.</paragraph>
</section>
</brief-description-of-drawings>
<detailed-description>
<section>
<heading lvl="1">BEST MODE FOR CARRYING OUT THE INVENTION </heading>
<paragraph id="P-0157" lvl="0"><number>&lsqb;0157&rsqb;</number> An embodiment for practicing the present invention will now be described. Embodiments, as will be explained later, are to illustrate the present invention, not to limit the scope of the present invention. For those skilled in the art, the present invention may be applicable to embodiments including replaced elements equivalent to each or entire elements of the present invention, and such embodiments are, therefore, within the scope of the present invention. </paragraph>
<paragraph id="P-0158" lvl="0"><number>&lsqb;0158&rsqb;</number> In the explanation below, TCP/IP communications will be described by way of example. In the TCP/IP communications, an acknowledge message indicating that various messages have arrived is sent to a sender that has sent such messages. For easy understanding, in the following description, explanations will not be made to transmission of the acknowledge message in the TCP/IP communications. </paragraph>
<paragraph id="P-0159" lvl="0"><number>&lsqb;0159&rsqb;</number> (Communication System) </paragraph>
<paragraph id="P-0160" lvl="0"><number>&lsqb;0160&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1</cross-reference> is an exemplary diagram showing the schematic structure of a communication system <highlight><bold>101</bold></highlight> of the present invention. </paragraph>
<paragraph id="P-0161" lvl="0"><number>&lsqb;0161&rsqb;</number> Each user accesses Internet <highlight><bold>131</bold></highlight> from a terminal <highlight><bold>111</bold></highlight>. Transmission of various messages between each ASP <highlight><bold>132</bold></highlight> within the Internet <highlight><bold>131</bold></highlight> and each terminal <highlight><bold>111</bold></highlight> is relayed by an ISP <highlight><bold>151</bold></highlight>. The transmission of messages is performed based on the TCP/IP protocol. </paragraph>
<paragraph id="P-0162" lvl="0"><number>&lsqb;0162&rsqb;</number> Each ASP <highlight><bold>132</bold></highlight> serves as a service provider of the present invention, while the ISP <highlight><bold>151</bold></highlight> serves as a relay device (a repeater) of the present invention. </paragraph>
<paragraph id="P-0163" lvl="0"><number>&lsqb;0163&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 2</cross-reference> is an explanatory diagram showing the typical state of message transmission, since the terminal <highlight><bold>111</bold></highlight> accesses the Internet <highlight><bold>131</bold></highlight> through the ISP <highlight><bold>151</bold></highlight>, until it receives a service provided from the ASP <highlight><bold>132</bold></highlight>. </paragraph>
<paragraph id="P-0164" lvl="0"><number>&lsqb;0164&rsqb;</number> The terminal <highlight><bold>111</bold></highlight> sends a connection request with a specified user name, to the ISP <highlight><bold>151</bold></highlight> (<highlight><bold>201</bold></highlight>). At this time, not only a well-know dial-up connection technique, but also a user-authentication method using some rules can be used, as will be described later. </paragraph>
<paragraph id="P-0165" lvl="0"><number>&lsqb;0165&rsqb;</number> The ISP <highlight><bold>151</bold></highlight> authenticates this user, and assigns the terminal <highlight><bold>111</bold></highlight> a currently<highlight><bold>5</bold></highlight> unused IP address (<highlight><bold>202</bold></highlight>). Thus, the ISP <highlight><bold>151</bold></highlight> serves as a DHCP (Dynamic Host Configuration Protocol) server, while the terminal <highlight><bold>111</bold></highlight> serves as a DHCP client. </paragraph>
<paragraph id="P-0166" lvl="0"><number>&lsqb;0166&rsqb;</number> Upon assignment of the IP address, the terminal <highlight><bold>111</bold></highlight> can access each ASP <highlight><bold>132</bold></highlight> in the Internet <highlight><bold>131</bold></highlight>. At this time, the terminal <highlight><bold>111</bold></highlight> sends a service-request message to the ASP <highlight><bold>132</bold></highlight> through the ISP <highlight><bold>151</bold></highlight> (<highlight><bold>203</bold></highlight>, <highlight><bold>204</bold></highlight>). </paragraph>
<paragraph id="P-0167" lvl="0"><number>&lsqb;0167&rsqb;</number> Then, the ASP <highlight><bold>132</bold></highlight> checks the sender-IP address included in the service-request message, and sends an inquiry message for inquiring whether a service can be provided to the corresponding IP address to the ISP <highlight><bold>151</bold></highlight> (<highlight><bold>205</bold></highlight>). </paragraph>
<paragraph id="P-0168" lvl="0"><number>&lsqb;0168&rsqb;</number> The ISP <highlight><bold>151</bold></highlight> examines the inquiry message, checks the user name of the terminal <highlight><bold>111</bold></highlight> having the assigned IP address, and confirms whether an amount of money is charged to the user or whether the user has right to get the service. In the case where the service can be provided to the user, the ISP <highlight><bold>151</bold></highlight> sends a response message indicating that the service can be provided, to the ASP <highlight><bold>132</bold></highlight> (<highlight><bold>206</bold></highlight>). </paragraph>
<paragraph id="P-0169" lvl="0"><number>&lsqb;0169&rsqb;</number> The ASP <highlight><bold>132</bold></highlight> receives the response message. In the case where to provide the user with the service, the ASP <highlight><bold>132</bold></highlight> sends a service-providing message to the sender-IP address, to the sender IP address included in the service-providing message. At this time, the ISP <highlight><bold>151</bold></highlight> relays this service-providing message (<highlight><bold>207</bold></highlight>, <highlight><bold>208</bold></highlight>). </paragraph>
<paragraph id="P-0170" lvl="0"><number>&lsqb;0170&rsqb;</number> In this embodiment, the terminal <highlight><bold>111</bold></highlight> having received the service-providing message sends a service-received message to the ISP <highlight><bold>151</bold></highlight>, and the ISP <highlight><bold>151</bold></highlight> receives this message (<highlight><bold>209</bold></highlight>), thereafter executing a billing process. </paragraph>
<paragraph id="P-0171" lvl="0"><number>&lsqb;0171&rsqb;</number> In this manner, the billing processes for charging the user for the provided service are all executed by the ISP <highlight><bold>151</bold></highlight>. The user personal information to be transmitted in the Internet <highlight><bold>131</bold></highlight> in the above session is only the IP address dynamically assigned to the terminal <highlight><bold>111</bold></highlight>. Thus, various information of the credit cards can be prevented from being leaked out. As will be described later, various personal information can similarly be prevented from being leaked out. </paragraph>
<paragraph id="P-0172" lvl="0"><number>&lsqb;0172&rsqb;</number> From the aspect of the user of the terminal <highlight><bold>111</bold></highlight>, the user name and password may be input only when connecting to the ISP <highlight><bold>151</bold></highlight>. Even if services are provided over and over again during the connection, it is not necessary to input those information afterwards. Hence, there is no need to input the information, and the terrible situation that the information is looked by others or stolen by a computer virus may unlikely to occur. Thus, the security of the information is improved. </paragraph>
<paragraph id="P-0173" lvl="0"><number>&lsqb;0173&rsqb;</number> Further, from the aspect of the ASP <highlight><bold>132</bold></highlight>, the services to be provided can be managed by a server of the same company, and the company requests another company for the billing. Hence, the management of products and the management of account book can totally be separated. </paragraph>
<paragraph id="P-0174" lvl="0"><number>&lsqb;0174&rsqb;</number> (Relay Device) </paragraph>
<paragraph id="P-0175" lvl="0"><number>&lsqb;0175&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3</cross-reference> is an exemplary diagram showing the schematic structure of a computer realizing the ISP <highlight><bold>151</bold></highlight> serving as a relay device of the present invention. Description will now be made with reference to <cross-reference target="DRAWINGS">FIG. 3</cross-reference>. </paragraph>
<paragraph id="P-0176" lvl="0"><number>&lsqb;0176&rsqb;</number> Each section in a computer <highlight><bold>301</bold></highlight> is controlled by a CPU <highlight><bold>302</bold></highlight>. The terminal <highlight><bold>111</bold></highlight> requests a terminal-side interface <highlight><bold>303</bold></highlight> for connection through a telephone line, etc. The CPU <highlight><bold>302</bold></highlight> performs communications with the terminal <highlight><bold>111</bold></highlight> through the terminal-side interface <highlight><bold>303</bold></highlight>. The terminal <highlight><bold>111</bold></highlight> may include, as shown in the illustration, one or more terminals. As a terminal-side interface <highlight><bold>303</bold></highlight>, a modem or a terminal adapter is used. </paragraph>
<paragraph id="P-0177" lvl="0"><number>&lsqb;0177&rsqb;</number> Each device including the ASP <highlight><bold>132</bold></highlight>, etc. in the Internet <highlight><bold>131</bold></highlight> performs communications with the CPU <highlight><bold>302</bold></highlight> through a communications-network-side interface <highlight><bold>304</bold></highlight>. As the communications-network-side interface <highlight><bold>304</bold></highlight>, other than various network interface cards, a modem or a terminal adapter may be used. </paragraph>
<paragraph id="P-0178" lvl="0"><number>&lsqb;0178&rsqb;</number> Upon request for connection from the terminal <highlight><bold>111</bold></highlight>, the CPU <highlight><bold>302</bold></highlight> dynamically assigns this terminal <highlight><bold>111</bold></highlight> an IP address and a port number (hereinafter referred simply as an &ldquo;IP address&rdquo;). This IP address serves as a communications identifier of this terminal <highlight><bold>111</bold></highlight>. The CPU <highlight><bold>302</bold></highlight> selects the IP address from one or more IP address recorded in advance in the hard disk <highlight><bold>305</bold></highlight> without the repetition of the same IP address, and assigns terminal <highlight><bold>111</bold></highlight> this IP address. </paragraph>
<paragraph id="P-0179" lvl="0"><number>&lsqb;0179&rsqb;</number> In this manner, once the IP address is assigned to the terminal <highlight><bold>111</bold></highlight>, it is ready to perform TCP/IP communications between the terminal <highlight><bold>111</bold></highlight> and each device, such as the ASP <highlight><bold>132</bold></highlight> within the Internet <highlight><bold>131</bold></highlight>. Each message to be transmitted in the communications has an IP address of the sender and an IP address of the addressee written thereinto. In the TCP/IP communications, other than the computer <highlight><bold>301</bold></highlight>, any device other than the addressee device in the Internet <highlight><bold>131</bold></highlight> relays this message using a bucket-brigade technique, so as to transmit the message. </paragraph>
<paragraph id="P-0180" lvl="0"><number>&lsqb;0180&rsqb;</number> Upon application of the computer <highlight><bold>301</bold></highlight>, the CPU <highlight><bold>302</bold></highlight> executes an IPL (Initial Program Loader) program recorded in a ROM (Read Only Memory) <highlight><bold>306</bold></highlight>. The IPL program includes an instruction: for storing a program recorded in a predetermined location of the hard disk <highlight><bold>305</bold></highlight> into a RAM (Random Access Memory) <highlight><bold>307</bold></highlight>; and executing the stored program. By this process, various OS (Operating System) or a program for controlling the computer <highlight><bold>301</bold></highlight> to serve as a gateway for the ISP <highlight><bold>151</bold></highlight> can operate. </paragraph>
<paragraph id="P-0181" lvl="0"><number>&lsqb;0181&rsqb;</number> The CPU <highlight><bold>302</bold></highlight> uses the RAM <highlight><bold>307</bold></highlight> which temporarily stores a message, when relaying the message. </paragraph>
<paragraph id="P-0182" lvl="0"><number>&lsqb;0182&rsqb;</number> Other than this, the computer <highlight><bold>301</bold></highlight> may include a display device <highlight><bold>308</bold></highlight>, such as a CRT (Cathode Ray Tube) display, etc, or an input device <highlight><bold>309</bold></highlight>, such as a keyboard, a mouse, etc. The administrator of the relay device configures the computer <highlight><bold>301</bold></highlight> or administers the computer <highlight><bold>301</bold></highlight> using the above devices. </paragraph>
<paragraph id="P-0183" lvl="0"><number>&lsqb;0183&rsqb;</number> The computer <highlight><bold>301</bold></highlight> may include a medium reader <highlight><bold>310</bold></highlight>, such as a CD-ROM (Compact Disk ROM) drive or an FD (Floppy Disk) drive, for installing programs into the computer <highlight><bold>301</bold></highlight>. Programs can be installed from a medium, such as a CD-ROM or an FD, into the hard disk <highlight><bold>305</bold></highlight>. Programs stored in any devices in the Internet <highlight><bold>131</bold></highlight> can be installed into the hard disk <highlight><bold>305</bold></highlight>. </paragraph>
<paragraph id="P-0184" lvl="0"><number>&lsqb;0184&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 4</cross-reference> is an exemplary diagram showing the schematic structure of the relay device of the present invention. With reference to <cross-reference target="DRAWINGS">FIGS. 3 and 4</cross-reference>, the correspondence between the relay device and each section included the ISP <highlight><bold>151</bold></highlight> will now be described. </paragraph>
<paragraph id="P-0185" lvl="0"><number>&lsqb;0185&rsqb;</number> A user-name receiver <highlight><bold>352</bold></highlight> of a relay device <highlight><bold>351</bold></highlight> receives a user name sent from the terminal <highlight><bold>111</bold></highlight>. Thus, the terminal-side interface <highlight><bold>303</bold></highlight> serves as the username receiver <highlight><bold>352</bold></highlight>. </paragraph>
<paragraph id="P-0186" lvl="0"><number>&lsqb;0186&rsqb;</number> A communications-identifier assignor <highlight><bold>353</bold></highlight> assigns the terminal <highlight><bold>111</bold></highlight> a communications identifier (an IP address), in association with the received user name. Thus, in cooperation with the terminal-side interface <highlight><bold>303</bold></highlight>, the CPU <highlight><bold>302</bold></highlight> serves as the communications-identifier assignor <highlight><bold>353</bold></highlight>. Those IP addresses which are not currently used are stored in the hard disk <highlight><bold>305</bold></highlight> or RAM <highlight><bold>307</bold></highlight>. From the currently unused IP addresses, a target IP address to be assigned is selected. </paragraph>
<paragraph id="P-0187" lvl="0"><number>&lsqb;0187&rsqb;</number> A service-request message receiver <highlight><bold>354</bold></highlight> receives a service-request-message addressed to one of the ASPs <highlight><bold>132</bold></highlight> from the terminal <highlight><bold>111</bold></highlight>. The sender of this service-request message corresponds to the communications identifier (IP address) assigned to the terminal <highlight><bold>111</bold></highlight>. Thus, the terminal-side interface <highlight><bold>303</bold></highlight> serves as the service-request message receiver <highlight><bold>354</bold></highlight>. </paragraph>
<paragraph id="P-0188" lvl="0"><number>&lsqb;0188&rsqb;</number> Further, a service-request message sender <highlight><bold>355</bold></highlight> sends the received service-request-message to any of the ASPs <highlight><bold>132</bold></highlight> within the Internet <highlight><bold>131</bold></highlight>. Hence, the communications-network-side interface <highlight><bold>304</bold></highlight> serves as the service-request message sender <highlight><bold>355</bold></highlight>. </paragraph>
<paragraph id="P-0189" lvl="0"><number>&lsqb;0189&rsqb;</number> An inquiry-message receiver <highlight><bold>356</bold></highlight> receives an inquiry message for inquiring whether the ASP <highlight><bold>132</bold></highlight> provides the terminal <highlight><bold>111</bold></highlight> with a service. Hence, the communications-network-side interface <highlight><bold>304</bold></highlight> serves as the inquiry-message receiver <highlight><bold>356</bold></highlight>. </paragraph>
<paragraph id="P-0190" lvl="0"><number>&lsqb;0190&rsqb;</number> A response-message sender <highlight><bold>357</bold></highlight> determines whether the IP address of a service receiver which is specified in the inquiry message is the one assigned to the terminal <highlight><bold>111</bold></highlight>. In the case where it is determined that the IP address is the one assigned to the terminal <highlight><bold>111</bold></highlight>, the response-message sender <highlight><bold>357</bold></highlight> generates a response message specifying that a service will be provided to the terminal <highlight><bold>111</bold></highlight>. In the case where it is determined that the IP address is not the one assigned to the terminal <highlight><bold>111</bold></highlight>, the response-message sender <highlight><bold>357</bold></highlight> generates a response message specifying that no service will be provided to the terminal <highlight><bold>111</bold></highlight>. </paragraph>
<paragraph id="P-0191" lvl="0"><number>&lsqb;0191&rsqb;</number> The response-message sender <highlight><bold>357</bold></highlight> sends the generated response message to the ASP <highlight><bold>132</bold></highlight>. The received inquiry message is temporarily stored in the RAM <highlight><bold>307</bold></highlight>. The CPU <highlight><bold>302</bold></highlight> examines this message, generates a response message, and sends using the communications-network-side interface <highlight><bold>304</bold></highlight>. Hence, those devices serve as the response-message sender <highlight><bold>357</bold></highlight>. </paragraph>
<paragraph id="P-0192" lvl="0"><number>&lsqb;0192&rsqb;</number> Further, a service-providing-message receiver <highlight><bold>358</bold></highlight> receives a service-providing message for providing a service to the terminal <highlight><bold>111</bold></highlight> from the ASP <highlight><bold>132</bold></highlight>. Thus, the communications-network-side interface <highlight><bold>304</bold></highlight> serves as the service<highlight><bold>10</bold></highlight> providing-message receiver <highlight><bold>358</bold></highlight>. </paragraph>
<paragraph id="P-0193" lvl="0"><number>&lsqb;0193&rsqb;</number> A service-providing-message sender <highlight><bold>359</bold></highlight> sends the received service-providing-message to the terminal <highlight><bold>111</bold></highlight>. Thus, the terminal-side interface <highlight><bold>303</bold></highlight> serves as the service-providing-message sender <highlight><bold>359</bold></highlight>. </paragraph>
<paragraph id="P-0194" lvl="0"><number>&lsqb;0194&rsqb;</number> Further, in this embodiment, the inquiry message or the service-providing message specifies billing information for a service to be provided. </paragraph>
<paragraph id="P-0195" lvl="0"><number>&lsqb;0195&rsqb;</number> A billing-information storage section <highlight><bold>360</bold></highlight> stores billing information in association with the received user name. Thus, the hard disk <highlight><bold>305</bold></highlight> serves as the billing-information storage section <highlight><bold>360</bold></highlight>. </paragraph>
<paragraph id="P-0196" lvl="0"><number>&lsqb;0196&rsqb;</number> In the case where the service-providing message will be sent or has been sent to the terminal <highlight><bold>111</bold></highlight>, a billing-information updating section <highlight><bold>361</bold></highlight> adds or calculates billing information into the billing-information storage section <highlight><bold>360</bold></highlight>, in association with the user name of the terminal <highlight><bold>111</bold></highlight>, so as to update the billing-information storage section <highlight><bold>360</bold></highlight>. This billing information is one for a to-be-provided service specified in the service-providing message or service-providing message. </paragraph>
<paragraph id="P-0197" lvl="0"><number>&lsqb;0197&rsqb;</number> Further, a service-received-message receiver <highlight><bold>362</bold></highlight> receives a service-received message sent from the terminal <highlight><bold>111</bold></highlight>. Thus, the terminal-side interface <highlight><bold>303</bold></highlight> serves as the service-received-message receiver <highlight><bold>362</bold></highlight>. </paragraph>
<paragraph id="P-0198" lvl="0"><number>&lsqb;0198&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 5</cross-reference> is an explanatory diagram showing the state in which billing information is stored in the hard disk <highlight><bold>305</bold></highlight>. </paragraph>
<paragraph id="P-0199" lvl="0"><number>&lsqb;0199&rsqb;</number> As shown in <cross-reference target="DRAWINGS">FIG. 5</cross-reference>, billing information is stored in the form of a table, wherein each row corresponds to each billing-information item. For example, a user &ldquo;ab123&rdquo; has used the ISP <highlight><bold>151</bold></highlight> for 1832 seconds, since 13:15:02 pm on Jan. 12, 2000. A user &ldquo;cd456&rdquo; has got a service for image information, from the ASP <highlight><bold>132</bold></highlight> having a server name &ldquo;www.144.ne.jp&rdquo; on 14:16:34 on Jan. 12, 2000. The charge of this service for image information is 120 yen. Other than the above, information regarding a discount service for connecting to a particular ASP <highlight><bold>132</bold></highlight> can be stored. Such information is adequately summed up, thereby charging each user for the service. </paragraph>
<paragraph id="P-0200" lvl="0"><number>&lsqb;0200&rsqb;</number> Such information is summed up for each ASP <highlight><bold>132</bold></highlight>, thereby making payment to each ASP <highlight><bold>132</bold></highlight> for the user. </paragraph>
<paragraph id="P-0201" lvl="0"><number>&lsqb;0201&rsqb;</number> The updating to be done by the billing-information updating section <highlight><bold>361</bold></highlight> is performed after reception (after &ldquo;209&rdquo; of <cross-reference target="DRAWINGS">FIG. 2</cross-reference>) of the service-received message, in this embodiment. However, the updating may be done before (between &ldquo;205&rdquo; and &ldquo;206&rdquo; of <cross-reference target="DRAWINGS">FIG. 2</cross-reference>) transmission of the response message or before (between &ldquo;207&rdquo; and &ldquo;208&rdquo; of <cross-reference target="DRAWINGS">FIG. 2</cross-reference>) transmission of the service-providing message. When to perform the updating can be set or changed in accordance with the structure of the ISP <highlight><bold>151</bold></highlight> or the ASP <highlight><bold>132</bold></highlight>. </paragraph>
<paragraph id="P-0202" lvl="0"><number>&lsqb;0202&rsqb;</number> (Connection-Start Process) </paragraph>
<paragraph id="P-0203" lvl="0"><number>&lsqb;0203&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 6</cross-reference> is a flowchart showing the flow of a connection-start process, for assigning the terminal <highlight><bold>111</bold></highlight> a communications identifier in the case where the computer <highlight><bold>301</bold></highlight> shown in <cross-reference target="DRAWINGS">FIG. 3</cross-reference> serves as an ISP <highlight><bold>151</bold></highlight> (the relay device <highlight><bold>351</bold></highlight> of the present invention). </paragraph>
<paragraph id="P-0204" lvl="0"><number>&lsqb;0204&rsqb;</number> If the terminal <highlight><bold>111</bold></highlight> sends a connection request for connecting to the Internet <highlight><bold>131</bold></highlight>, to the computer <highlight><bold>301</bold></highlight> (Step S<highlight><bold>401</bold></highlight>), the computer <highlight><bold>301</bold></highlight> receives this connection request through the terminal-side interface <highlight><bold>303</bold></highlight> (Step S<highlight><bold>402</bold></highlight>). </paragraph>
<paragraph id="P-0205" lvl="0"><number>&lsqb;0205&rsqb;</number> Generally, a message of this connection request includes information representing the user name and password. The computer <highlight><bold>301</bold></highlight> can check whether the user of the terminal <highlight><bold>111</bold></highlight> having sent this connection request is a proper user having &ldquo;using right&rdquo; for connection, using the information. </paragraph>
<paragraph id="P-0206" lvl="0"><number>&lsqb;0206&rsqb;</number> Next, the CPU <highlight><bold>302</bold></highlight>, checks whether the received connection request is a proper request (Step S<highlight><bold>403</bold></highlight>). As descried above, in this embodiment, the CPU <highlight><bold>302</bold></highlight> authenticates the user of the terminal using the user name and password included in the message of the connection request. </paragraph>
<paragraph id="P-0207" lvl="0"><number>&lsqb;0207&rsqb;</number> For example, a well-known one-way hash function, such as MD<highlight><bold>5</bold></highlight>, DES, etc., using a predetermined character string as a salt, is adopted for a character string of the password. The CPU <highlight><bold>302</bold></highlight> determines whether a result of the has function is the same as that calculated in advance in association with the user, so as to check the user. </paragraph>
<paragraph id="P-0208" lvl="0"><number>&lsqb;0208&rsqb;</number> As will be described later, when to check the user, the user may have to input a different password every time the user inputs the password, and the CPU <highlight><bold>302</bold></highlight> may check the user based on the input password. </paragraph>
<paragraph id="P-0209" lvl="0"><number>&lsqb;0209&rsqb;</number> In the case where the connection request is a proper request (Step S<highlight><bold>403</bold></highlight>; YES), the CPU <highlight><bold>302</bold></highlight> assigns the terminal <highlight><bold>111</bold></highlight> a currently-unused IP address as a communications identifier (Step S<highlight><bold>404</bold></highlight>), and stores the user name in association with the assigned IP address in the hard disk <highlight><bold>305</bold></highlight> or RAM <highlight><bold>307</bold></highlight> (Step S<highlight><bold>405</bold></highlight>), so as to complete the present process. </paragraph>
<paragraph id="P-0210" lvl="0"><number>&lsqb;0210&rsqb;</number> The terminal <highlight><bold>111</bold></highlight> receives the IP address as a communications identifier (Step S<highlight><bold>406</bold></highlight>), to get ready for subsequent communications. In the case where the terminal <highlight><bold>111</bold></highlight> sends various messages, such as a service-request message, etc:, to the ASP <highlight><bold>132</bold></highlight> in the Internet, the terminal <highlight><bold>111</bold></highlight> uses this communications identifier as a sender IP address. </paragraph>
<paragraph id="P-0211" lvl="0"><number>&lsqb;0211&rsqb;</number> In the case where the connection request is not a proper request (Step S<highlight><bold>403</bold></highlight>; NO), the CPU <highlight><bold>302</bold></highlight> refuses the connection request (Step S<highlight><bold>407</bold></highlight>). The present process is terminated. For the sake of easy understanding, the response from the terminal <highlight><bold>111</bold></highlight> with respect to the refusal in the step S<highlight><bold>407</bold></highlight> is not shown in the illustration. </paragraph>
<paragraph id="P-0212" lvl="0"><number>&lsqb;0212&rsqb;</number> In this manner, the user name and the assigned communications identifier are stored in association with each other, thereby the CPU <highlight><bold>302</bold></highlight> can know who the user of the terminal <highlight><bold>111</bold></highlight> is, based on the sender or communications identifier of the addressee which are included in the message. </paragraph>
<paragraph id="P-0213" lvl="0"><number>&lsqb;0213&rsqb;</number> Subsequently, the communications between the terminal <highlight><bold>111</bold></highlight> and the ASP <highlight><bold>132</bold></highlight> in the Internet <highlight><bold>131</bold></highlight> is performed, if the ISP <highlight><bold>151</bold></highlight> relays and transmits a message including the IP address as the sender and the IP address as the communications identifier of the addressee. </paragraph>
<paragraph id="P-0214" lvl="0"><number>&lsqb;0214&rsqb;</number> The ISP <highlight><bold>151</bold></highlight> executes a process for relaying a message from a certain ASP <highlight><bold>132</bold></highlight> in the Internet <highlight><bold>131</bold></highlight> to another ASP <highlight><bold>132</bold></highlight> in the Internet, with a well-known bucket-brigade communications technique using TCP/IP. </paragraph>
<paragraph id="P-0215" lvl="0"><number>&lsqb;0215&rsqb;</number> In the case where between the terminal <highlight><bold>111</bold></highlight> and the ISP <highlight><bold>151</bold></highlight> is disconnected, the communications identifier assigned to the terminal <highlight><bold>111</bold></highlight> has no validity, and a pair of the user name and its corresponding communications identifier stored in the step S<highlight><bold>405</bold></highlight> are erased. By this, in the case where a connection request is sent from any other terminal <highlight><bold>111</bold></highlight>, a communications identifier which is not used at that time can be reused. </paragraph>
<paragraph id="P-0216" lvl="0"><number>&lsqb;0216&rsqb;</number> (Terminal-Side Relay Process) </paragraph>
<paragraph id="P-0217" lvl="0"><number>&lsqb;0217&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 7</cross-reference> is a flowchart showing the state of a terminal-side relay process which is executed by the ISP <highlight><bold>151</bold></highlight> (the computer <highlight><bold>301</bold></highlight>, the relay device <highlight><bold>351</bold></highlight>). The present process is activated upon detection of arrival of any of various messages from the terminal <highlight><bold>111</bold></highlight>. Description will now be made with reference to <cross-reference target="DRAWINGS">FIG. 7</cross-reference>. </paragraph>
<paragraph id="P-0218" lvl="0"><number>&lsqb;0218&rsqb;</number> First, the computer <highlight><bold>301</bold></highlight> receives a message from the terminal-side interface <highlight><bold>303</bold></highlight> (Step S<highlight><bold>431</bold></highlight>). The received message is temporarily stored in the RAM <highlight><bold>307</bold></highlight>. </paragraph>
<paragraph id="P-0219" lvl="0"><number>&lsqb;0219&rsqb;</number> The CPU <highlight><bold>302</bold></highlight> checks the addressee of the message (Step S<highlight><bold>43</bold></highlight>). In the case where the addressee is the ASP <highlight><bold>132</bold></highlight> in the Internet (Step S<highlight><bold>432</bold></highlight>; ASP), the CPU <highlight><bold>302</bold></highlight> sends the message to the Internet <highlight><bold>131</bold></highlight> through the communications-network-side interface <highlight><bold>304</bold></highlight> (Step S<highlight><bold>433</bold></highlight>), so as to complete the present process. Such a message may include a service-request message. </paragraph>
<paragraph id="P-0220" lvl="0"><number>&lsqb;0220&rsqb;</number> In the case where the addressee is the ISP <highlight><bold>151</bold></highlight> (Step S<highlight><bold>432</bold></highlight>; ISP), the CPU <highlight><bold>302</bold></highlight> checks whether the message is the service-received message (Step S<highlight><bold>434</bold></highlight>). In the case where the message is the service-received message (Step S<highlight><bold>434</bold></highlight>; YES), the CPU <highlight><bold>302</bold></highlight> acquires the user name from information: such as an IP address of the terminal <highlight><bold>111</bold></highlight> which is written in the service-received message, including an IP address (the IP address of the terminal <highlight><bold>111</bold></highlight>) of the sender of the service-received message; a MAC (Media Access Control) address of the network interface of the terminal <highlight><bold>111</bold></highlight> used by that user, etc. (Step S<highlight><bold>435</bold></highlight>). The CPU <highlight><bold>302</bold></highlight> stores billing information included in the service-providing message which has previously been relayed to the terminal <highlight><bold>111</bold></highlight> or the billing information written in the service-received message, additionally in the billing-information storage section <highlight><bold>360</bold></highlight> in the hard disk <highlight><bold>305</bold></highlight> so as to update the storage section S<highlight><bold>436</bold></highlight>), thus completing the present process. </paragraph>
<paragraph id="P-0221" lvl="0"><number>&lsqb;0221&rsqb;</number> On the contrary, in the case where the message is not the service-received message (Step S<highlight><bold>434</bold></highlight>; NO), the CPU <highlight><bold>302</bold></highlight> executes a process corresponding to its contents (Step S<highlight><bold>437</bold></highlight>), so as to complete the present process. </paragraph>
<paragraph id="P-0222" lvl="0"><number>&lsqb;0222&rsqb;</number> In the case where the message is addressed to another terminal <highlight><bold>111</bold></highlight> (Step S<highlight><bold>432</bold></highlight>; Another Terminal), the CPU <highlight><bold>302</bold></highlight> sends the message to the addressee through the terminal-side interface <highlight><bold>303</bold></highlight> (Step S<highlight><bold>438</bold></highlight>), so as to complete the present process. </paragraph>
<paragraph id="P-0223" lvl="0"><number>&lsqb;0223&rsqb;</number> (Communications-Network-Side Relay Process) </paragraph>
<paragraph id="P-0224" lvl="0"><number>&lsqb;0224&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 8</cross-reference> is a flowchart showing the state of a communications-network-side relay process carried out by the ISP <highlight><bold>151</bold></highlight> (the computer <highlight><bold>301</bold></highlight>, the relay device <highlight><bold>351</bold></highlight>). The present process is activated upon detection of arrival of any of various messages from the Internet <highlight><bold>131</bold></highlight>. Description will now be made with reference to <cross-reference target="DRAWINGS">FIG. 8</cross-reference>. </paragraph>
<paragraph id="P-0225" lvl="0"><number>&lsqb;0225&rsqb;</number> The computer <highlight><bold>301</bold></highlight> receives the message through the communications-network-side interface <highlight><bold>304</bold></highlight> (Step S<highlight><bold>451</bold></highlight>). The received message is temporarily stored in the RAM <highlight><bold>307</bold></highlight>. </paragraph>
<paragraph id="P-0226" lvl="0"><number>&lsqb;0226&rsqb;</number> The CPU <highlight><bold>302</bold></highlight> determines whether the message should be sent to another device in the Internet <highlight><bold>131</bold></highlight>, i.e. whether it should relays the message to send again the message to the Internet <highlight><bold>131</bold></highlight> (Step S<highlight><bold>452</bold></highlight>). In the case where the message should be so sent (Step S<highlight><bold>452</bold></highlight>; YES), the CPU <highlight><bold>302</bold></highlight> relays and sends again the message to the Internet <highlight><bold>131</bold></highlight> through the communications-network-side interface <highlight><bold>304</bold></highlight> (Step S<highlight><bold>453</bold></highlight>), so as to complete the present process. </paragraph>
<paragraph id="P-0227" lvl="0"><number>&lsqb;0227&rsqb;</number> In the case where the message should not be so sent (Step S<highlight><bold>452</bold></highlight>; NO), i.e. in the case where the message is addressed to the ISP <highlight><bold>151</bold></highlight> or to the terminal <highlight><bold>111</bold></highlight>, the CPU <highlight><bold>302</bold></highlight> examines the addressee and type of the message (Step S<highlight><bold>454</bold></highlight>). </paragraph>
<paragraph id="P-0228" lvl="0"><number>&lsqb;0228&rsqb;</number> In the case where the message is an inquiry message and addressed to the ISP <highlight><bold>151</bold></highlight> (Step S<highlight><bold>454</bold></highlight>; Inquiry), the CPU <highlight><bold>302</bold></highlight> acquires an IP address of the addressee of the service which is specified in the inquiry message (Step S<highlight><bold>455</bold></highlight>). </paragraph>
<paragraph id="P-0229" lvl="0"><number>&lsqb;0229&rsqb;</number> Next, the CPU <highlight><bold>302</bold></highlight> examines whether this IP address is assigned to a user of any one terminal <highlight><bold>111</bold></highlight> (Step S<highlight><bold>456</bold></highlight>). In the case where the CPU <highlight><bold>302</bold></highlight> could acquire the user name of the terminal <highlight><bold>111</bold></highlight> to which the IP address is assigned (Step S<highlight><bold>456</bold></highlight>; YES), the CPU <highlight><bold>302</bold></highlight> checks whether the service can be provided to the user of the corresponding user name (Step S<highlight><bold>457</bold></highlight>). In the case where the service can be provided thereto (Step S<highlight><bold>457</bold></highlight>; YES), the CPU <highlight><bold>302</bold></highlight> sends a response message indicating that the service is to be provided thereto, to the ASP <highlight><bold>132</bold></highlight> through the communications-network-side interface <highlight><bold>304</bold></highlight> (Step S<highlight><bold>458</bold></highlight>), so as to complete the present process. </paragraph>
<paragraph id="P-0230" lvl="0"><number>&lsqb;0230&rsqb;</number> In the case where the CPU <highlight><bold>302</bold></highlight> could not acquire the user name (Step S<highlight><bold>456</bold></highlight>; NO), or in the case where the service can not be provided (Step S<highlight><bold>457</bold></highlight>; NO), the CPU <highlight><bold>302</bold></highlight> sends a response message indicating that the service is not be provided, to the ASP <highlight><bold>132</bold></highlight> through the communications-network-side interface <highlight><bold>304</bold></highlight> (Step S<highlight><bold>459</bold></highlight>), so as to complete the process. </paragraph>
<paragraph id="P-0231" lvl="0"><number>&lsqb;0231&rsqb;</number> In the case where the message is a service-providing message and the addressee is one terminal <highlight><bold>111</bold></highlight> (Step S<highlight><bold>454</bold></highlight>; Providing), the CPU <highlight><bold>302</bold></highlight> sends this message to the addressee terminal <highlight><bold>111</bold></highlight> through the terminal-side interface <highlight><bold>303</bold></highlight> (Step S<highlight><bold>460</bold></highlight>), so as to complete the present process. </paragraph>
<paragraph id="P-0232" lvl="0"><number>&lsqb;0232&rsqb;</number> In the case where the message is one other than the above (Step S<highlight><bold>454</bold></highlight>; Any other), the CPU <highlight><bold>302</bold></highlight> executes a corresponding process (Step S<highlight><bold>461</bold></highlight>), so as to complete the present process. </paragraph>
<paragraph id="P-0233" lvl="0"><number>&lsqb;0233&rsqb;</number> Determination as to whether a service can be provided in the step S<highlight><bold>457</bold></highlight> may be performed based on criteria as follows: </paragraph>
<paragraph id="P-0234" lvl="2"><number>&lsqb;0234&rsqb;</number> the service may always be provided; </paragraph>
<paragraph id="P-0235" lvl="2"><number>&lsqb;0235&rsqb;</number> the service may be provided, in the case where the service charge of the corresponding service is equal to or less than the maximum charge for the user, while setting billing information for this corresponding service to be included in the inquiry message; </paragraph>
<paragraph id="P-0236" lvl="2"><number>&lsqb;0236&rsqb;</number> the service may be provided, in the case where the charge is equal to or less than the balance assigned to the user with respect to &ldquo;access right&rdquo; within a predetermined period of time, while setting the billing information for the corresponding service to be included in the inquiry message; and </paragraph>
<paragraph id="P-0237" lvl="2"><number>&lsqb;0237&rsqb;</number> the service may be provided, in the case where the type of the service is a predetermined type (e.g. any service other than &ldquo;a service for adjusts&rdquo;). </paragraph>
<paragraph id="P-0238" lvl="0"><number>&lsqb;0238&rsqb;</number> Such criteria for providing the service may be changed in accordance with the contract made between the user and the ISP <highlight><bold>151</bold></highlight>. The user may access the ISP <highlight><bold>151</bold></highlight> from the terminal <highlight><bold>111</bold></highlight>, and change the above criteria using a CGI (Common Gateway Interface) script of the ISP <highlight><bold>151</bold></highlight>. </paragraph>
<paragraph id="P-0239" lvl="0"><number>&lsqb;0239&rsqb;</number> In the case where the billing information is included in the service-providing message or inquiry message, the billing information of the corresponding user may e updated upon reception of such billing information. The billing information may once temporarily be updated, and then completely updated, upon reception of the service-received message from the terminal <highlight><bold>111</bold></highlight> of the corresponding user. </paragraph>
<paragraph id="P-0240" lvl="0"><number>&lsqb;0240&rsqb;</number> (Another Embodiment of Connection-Start Process) </paragraph>
<paragraph id="P-0241" lvl="0"><number>&lsqb;0241&rsqb;</number> The present invention is mainly the same as the above-described embodiment, however, employs a different authentication process in the connection-start process from that of the above-described embodiment. </paragraph>
<paragraph id="P-0242" lvl="0"><number>&lsqb;0242&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 9</cross-reference> is a flowchart showing the flow of a connection-start process in the present invention. Description will now be made with reference to <cross-reference target="DRAWINGS">FIG. 9</cross-reference>. In <cross-reference target="DRAWINGS">FIG. 9, a</cross-reference> process executed by the terminal <highlight><bold>1111</bold></highlight> is shown in combination with the connection-start process executed by the ISP <highlight><bold>151</bold></highlight> (the relay device <highlight><bold>351</bold></highlight>). </paragraph>
<paragraph id="P-0243" lvl="0"><number>&lsqb;0243&rsqb;</number> The terminal <highlight><bold>111</bold></highlight> receives an input of the user name from the user (Step S<highlight><bold>801</bold></highlight>), and sends a connection request together with the user name to the ISP <highlight><bold>151</bold></highlight> (Step S<highlight><bold>802</bold></highlight>). </paragraph>
<paragraph id="P-0244" lvl="0"><number>&lsqb;0244&rsqb;</number> Upon reception of the connection request (S<highlight><bold>803</bold></highlight>), the ISP <highlight><bold>151</bold></highlight> generates an authentication character string using random numbers (Step S<highlight><bold>804</bold></highlight>), and sends the generated authentication character string to the terminal <highlight><bold>111</bold></highlight> (Step S<highlight><bold>805</bold></highlight>). </paragraph>
<paragraph id="P-0245" lvl="0"><number>&lsqb;0245&rsqb;</number> The terminal <highlight><bold>111</bold></highlight> receives the authentication character string (Step S<highlight><bold>806</bold></highlight>), and displays the received authentication character string on a display (Step S<highlight><bold>807</bold></highlight>). </paragraph>
<paragraph id="P-0246" lvl="0"><number>&lsqb;0246&rsqb;</number> The user converts the displayed authentication character string into a password-character string based on a rule, which is set in advance for the user. This rule is stored in the hard disk <highlight><bold>305</bold></highlight> of the ISP <highlight><bold>151</bold></highlight> in association with the user name. This conversion will be explained later. </paragraph>
<paragraph id="P-0247" lvl="0"><number>&lsqb;0247&rsqb;</number> The terminal <highlight><bold>111</bold></highlight> accepts the input of the password-character string input by the user (Step S<highlight><bold>808</bold></highlight>), and sends the password-character string to the ISP <highlight><bold>151</bold></highlight> (Step S<highlight><bold>809</bold></highlight>). </paragraph>
<paragraph id="P-0248" lvl="0"><number>&lsqb;0248&rsqb;</number> The ISP <highlight><bold>151</bold></highlight> receives this password-character string (Step S<highlight><bold>810</bold></highlight>). </paragraph>
<paragraph id="P-0249" lvl="0"><number>&lsqb;0249&rsqb;</number> The ISP <highlight><bold>151</bold></highlight> acquires the rule stored in the hard disk <highlight><bold>305</bold></highlight> in association with the user name (Step S<highlight><bold>811</bold></highlight>), and applies this rule for the authentication character string generated in the step S<highlight><bold>804</bold></highlight>, so as to convert and generate the character string (Step S<highlight><bold>812</bold></highlight>). </paragraph>
<paragraph id="P-0250" lvl="0"><number>&lsqb;0250&rsqb;</number> Further, the ISP <highlight><bold>151</bold></highlight> compares and determines whether the password-character string received in the step S<highlight><bold>810</bold></highlight> and the character string converted and generated in the step S<highlight><bold>812</bold></highlight> are the same (Step S<highlight><bold>813</bold></highlight>). In the case where these character strings are the same (Step S<highlight><bold>813</bold></highlight>;YES), the connection request is a proper request. The ISP <highlight><bold>151</bold></highlight> assigns the terminal <highlight><bold>111</bold></highlight> a currently-unused communications identifier (Step S<highlight><bold>814</bold></highlight>). The ISP <highlight><bold>151</bold></highlight> stores the corresponding user name in association with the provided communications identifier, in the hard disk <highlight><bold>305</bold></highlight> or the RAM <highlight><bold>307</bold></highlight> (Step S<highlight><bold>815</bold></highlight>), so as to complete the present process. The terminal <highlight><bold>1111</bold></highlight> acquires the provided communications identifier (Step S<highlight><bold>816</bold></highlight>), to get ready for further communications. </paragraph>
<paragraph id="P-0251" lvl="0"><number>&lsqb;0251&rsqb;</number> In the case where the two character strings are not the same (Step S<highlight><bold>813</bold></highlight>; NO), i.e. in the case where the connection request is not a proper request, the ISP <highlight><bold>151</bold></highlight> sends information indicating that the connection request is refused, to the terminal <highlight><bold>111</bold></highlight> (Step S<highlight><bold>817</bold></highlight>), so as to complete the present process. For the sake of easy understanding, the response from the terminal <highlight><bold>111</bold></highlight> with respect to this information is not shown in the illustration. </paragraph>
<paragraph id="P-0252" lvl="0"><number>&lsqb;0252&rsqb;</number> As the rule to be employed in this embodiment, the following rules may be adopted. </paragraph>
<paragraph id="P-0253" lvl="0"><number>&lsqb;0253&rsqb;</number> The authentication character string is a string of an &ldquo;n&rdquo; number of digits, while the password-character string is a string of an &ldquo;m&rdquo; number of digits. It is ruled that the numeral of the &ldquo;k&rdquo;-th (1&lE;k&lE;m) digit in the password-character string can be obtained, by adapting a predetermined calculation operation, such as addition, subtraction, multiplication or division with respect to the &ldquo;hk&rdquo;-th (1&lE;hk&lE;n) digit in the authentication character string. The value &ldquo;hk&rdquo; and its association calculation may be different for each user, so as to perform the authentication. </paragraph>
<paragraph id="P-0254" lvl="0"><number>&lsqb;0254&rsqb;</number> For example, in the case where n&equals;8 and m&equals;3, a rule &ldquo;a sum of the second digit and two, a sum of the fourth digit and two, and a sum of the sixth digit to three&rdquo; is given to a certain user. To another user, a rule &ldquo;a product of the first digit and three, the remainder of division of the eighth digit by four, and the difference between the fifth digit and three&rdquo; is given (Note that only the first digit of the above-described calculation result is employed). For example, in the case where the former rule is used, a proper password-character string with respect to the authentication character string &ldquo;18245924&rdquo; is &ldquo;962&rdquo;. </paragraph>
<paragraph id="P-0255" lvl="0"><number>&lsqb;0255&rsqb;</number> As the authentication character string, a string including an English letter(s) or Japanese character(s) may be used. In this case, a calculation of &ldquo;following character&rdquo;, &ldquo;preceding character&rdquo;, &ldquo;change to small letter&rdquo;, &ldquo;change to capital letter&rdquo; or &ldquo;obtain vowel&rdquo;, may be used. Other than this, as disclosed in Unexamined Japanese Patent Application KOKAI Publication No. H10-307799, a predetermined calculation disk may be used. </paragraph>
<paragraph id="P-0256" lvl="0"><number>&lsqb;0256&rsqb;</number> In this embodiment, each section of the computer <highlight><bold>301</bold></highlight> serves likewise that described in the above-described embodiment. In this embodiment, the CPU <highlight><bold>302</bold></highlight> serves as an authentication-character-string generator/sender, the terminal-side interface <highlight><bold>303</bold></highlight> serves as a password-character-string receiver, and a medium installed in the hard disk <highlight><bold>305</bold></highlight> or the medium reader <highlight><bold>310</bold></highlight> serves as a rule storage section. </paragraph>
<paragraph id="P-0257" lvl="0"><number>&lsqb;0257&rsqb;</number> In the case where the user wants to use the billing service provided by the present invention after the user has once established the connection using a conventional password formation technique, the service can be handled by executing the same process as the above-described connection-start process. That is, the CPU <highlight><bold>302</bold></highlight> compares the authentication character string and the password-character string sent from the corresponding user, in accordance with the user&apos;s rule. In the case where successful authentication is made, the provided IP address is maintained as is. In the case where successful authentication is not made, the provided IP address gets invalidated. In this case, the CPU <highlight><bold>302</bold></highlight> serves as the above-described communications-identifier invalidating section. </paragraph>
<paragraph id="P-0258" lvl="0"><number>&lsqb;0258&rsqb;</number> In this embodiment, when providing connection toward the Internet <highlight><bold>131</bold></highlight>, it is preventable that the real password-character string itself is input using the terminal <highlight><bold>111</bold></highlight>. </paragraph>
<paragraph id="P-0259" lvl="0"><number>&lsqb;0259&rsqb;</number> By this, for example, even if the terminal <highlight><bold>111</bold></highlight> is infected with a computer virus, for stealing the input password through monitoring its dial-up connection, successful authentication can not be made without the rule. Thus, high-security connection to the Internet <highlight><bold>131</bold></highlight> can be provided to the user. </paragraph>
<paragraph id="P-0260" lvl="0"><number>&lsqb;0260&rsqb;</number> (Service Provider) </paragraph>
<paragraph id="P-0261" lvl="0"><number>&lsqb;0261&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 10</cross-reference> is an exemplary diagram showing the schematic structure of a computer for realizing the ASP serving as a service provider of the present invention. Description will now be made with reference to <cross-reference target="DRAWINGS">FIG. 10</cross-reference>. </paragraph>
<paragraph id="P-0262" lvl="0"><number>&lsqb;0262&rsqb;</number> Each section of the computer <highlight><bold>901</bold></highlight> is controlled by a CPU <highlight><bold>902</bold></highlight>. Communications with each device, such as other ASPs <highlight><bold>132</bold></highlight> in the Internet <highlight><bold>131</bold></highlight>, or the ISP <highlight><bold>151</bold></highlight>, etc. can be made through a communications-network-side interface <highlight><bold>904</bold></highlight>. As the communications-network-side interface <highlight><bold>904</bold></highlight>, any of various network interface cards can be used. </paragraph>
<paragraph id="P-0263" lvl="0"><number>&lsqb;0263&rsqb;</number> Upon activation of the computer <highlight><bold>901</bold></highlight>, the CPU <highlight><bold>902</bold></highlight> executes an IPL program stored in a ROM <highlight><bold>906</bold></highlight>. The IPL program includes an instruction for: writing a program stored in a predetermined location of a hard disk <highlight><bold>905</bold></highlight> into a RAM <highlight><bold>907</bold></highlight>; and executing the read program. By this process, any of various OS or a program for controlling the computer <highlight><bold>901</bold></highlight> to serve as an ASP can operate on the computer <highlight><bold>901</bold></highlight>. </paragraph>
<paragraph id="P-0264" lvl="0"><number>&lsqb;0264&rsqb;</number> The CPU <highlight><bold>902</bold></highlight> uses the RAM <highlight><bold>907</bold></highlight> as a buffer for temporarily storing a message, when relaying or processing the message. </paragraph>
<paragraph id="P-0265" lvl="0"><number>&lsqb;0265&rsqb;</number> The hard disk <highlight><bold>905</bold></highlight> to be providing data to the terminal <highlight><bold>111</bold></highlight> stores data regarding services. In the case where a service is for image information, voice information, etc., the hard disk <highlight><bold>905</bold></highlight> stores such information in the form of a file. In the case where to provide a service for mail-order selling, the hard disk <highlight><bold>905</bold></highlight> stores information regarding each product. </paragraph>
<paragraph id="P-0266" lvl="0"><number>&lsqb;0266&rsqb;</number> Other than this, the computer <highlight><bold>901</bold></highlight> may include a display device <highlight><bold>908</bold></highlight>, such as a CRT display, etc. or an input device <highlight><bold>909</bold></highlight>, such as a keyboard, a mouse, etc. The administrator of the relay device sets the structure of the computer <highlight><bold>901</bold></highlight> or administers the computer <highlight><bold>901</bold></highlight> using the above devices. </paragraph>
<paragraph id="P-0267" lvl="0"><number>&lsqb;0267&rsqb;</number> The computer <highlight><bold>901</bold></highlight> may include a medium reader <highlight><bold>910</bold></highlight>, such as a CD-ROM drive, an FD drive, etc. for installing a program into the computer <highlight><bold>901</bold></highlight>. A program or data for services to be provided can be installed into the hard disk <highlight><bold>905</bold></highlight> from a medium, such as a CD-ROM, FD, etc. The program stored in any device in the Internet <highlight><bold>131</bold></highlight> may be installed into the hard disk <highlight><bold>905</bold></highlight>. </paragraph>
<paragraph id="P-0268" lvl="0"><number>&lsqb;0268&rsqb;</number> The ASP <highlight><bold>132</bold></highlight> and the ISP <highlight><bold>151</bold></highlight> may be realized as a computer which can be controlled by a group of programs having similar functions. Thus, instead of the computer <highlight><bold>901</bold></highlight> shown in <cross-reference target="DRAWINGS">FIG. 10</cross-reference>, with the computer <highlight><bold>301</bold></highlight> shown in <cross-reference target="DRAWINGS">FIG. 3</cross-reference>, both functions of the ASP <highlight><bold>132</bold></highlight> and the ISP <highlight><bold>151</bold></highlight> may be accomplished. </paragraph>
<paragraph id="P-0269" lvl="0"><number>&lsqb;0269&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 11</cross-reference> is an exemplary diagram showing the schematic structure of a service provider of the present invention. With reference to <cross-reference target="DRAWINGS">FIGS. 10 and 11</cross-reference>, the correspondence between each section of the ASP <highlight><bold>132</bold></highlight> and the service provider will be described. </paragraph>
<paragraph id="P-0270" lvl="0"><number>&lsqb;0270&rsqb;</number> A service-request-message receiver <highlight><bold>952</bold></highlight> of a service provider <highlight><bold>951</bold></highlight> receives a service-request message of a sender having an IP address of the terminal <highlight><bold>111</bold></highlight>, from the ISP <highlight><bold>151</bold></highlight>. Thus, the communications-network-side interface <highlight><bold>904</bold></highlight> serves as the service-request-message receiver <highlight><bold>952</bold></highlight>. </paragraph>
<paragraph id="P-0271" lvl="0"><number>&lsqb;0271&rsqb;</number> An inquiry-message sender <highlight><bold>953</bold></highlight> sends an inquiry message for inquiring whether to provide a service to the terminal <highlight><bold>111</bold></highlight> specified in the service-request message, to the ISP <highlight><bold>151</bold></highlight>. The inquiry message is generated by the CPU <highlight><bold>902</bold></highlight> in the RAM <highlight><bold>907</bold></highlight>, and sent by the communications-network-side interface <highlight><bold>904</bold></highlight>. </paragraph>
<paragraph id="P-0272" lvl="0"><number>&lsqb;0272&rsqb;</number> Further, a response-message receiver <highlight><bold>954</bold></highlight> receives a response message specifying whether to provide a service, from the ISP <highlight><bold>151</bold></highlight>. Thus, the communications-network-side interface <highlight><bold>904</bold></highlight> serves as the response-message receiver <highlight><bold>954</bold></highlight>. </paragraph>
<paragraph id="P-0273" lvl="0"><number>&lsqb;0273&rsqb;</number> A service-providing-message sender <highlight><bold>955</bold></highlight> sends a service-providing message addressed to the terminal <highlight><bold>111</bold></highlight> to the ISP <highlight><bold>151</bold></highlight>, in the case where the response message specifies that a service is provided. This service-providing message is generated by the CPU <highlight><bold>902</bold></highlight> in the RAM <highlight><bold>907</bold></highlight> using information stored in the hard disk <highlight><bold>905</bold></highlight>, and sent by the communications-network-side interface <highlight><bold>904</bold></highlight>. </paragraph>
<paragraph id="P-0274" lvl="0"><number>&lsqb;0274&rsqb;</number> (ASP Process) </paragraph>
<paragraph id="P-0275" lvl="0"><number>&lsqb;0275&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 12</cross-reference> is a flowchart showing the flow of an ASP process executed by the computer <highlight><bold>901</bold></highlight> serving as the ASP <highlight><bold>132</bold></highlight> (the service provider <highlight><bold>951</bold></highlight>). This process is activated, upon detection of arrival of any of various messages at the communications-network-side interface <highlight><bold>904</bold></highlight>. Description will now be made with reference to <cross-reference target="DRAWINGS">FIG. 12</cross-reference>. </paragraph>
<paragraph id="P-0276" lvl="0"><number>&lsqb;0276&rsqb;</number> The computer <highlight><bold>901</bold></highlight> receives a message through the communications-network-side interface <highlight><bold>904</bold></highlight> (Step S<highlight><bold>971</bold></highlight>). The received message is temporarily stored in the RAM <highlight><bold>907</bold></highlight>. </paragraph>
<paragraph id="P-0277" lvl="0"><number>&lsqb;0277&rsqb;</number> Next, the CPU <highlight><bold>902</bold></highlight> checks whether the message is one that should be sent to another device in the Internet <highlight><bold>131</bold></highlight> (including its LAN (Local Area Network) in the case where the ASP <highlight><bold>132</bold></highlight> serves as a gateway), i.e. whether the message is one that should be relayed to be sent aging to the Internet <highlight><bold>131</bold></highlight> (Step S<highlight><bold>972</bold></highlight>). In the case where the message should be so sent (Step S<highlight><bold>972</bold></highlight>; YES), the CPU <highlight><bold>902</bold></highlight> relays and sends the message again to the Internet <highlight><bold>131</bold></highlight> through the communications-network<highlight><bold>30</bold></highlight> side interface <highlight><bold>904</bold></highlight> (Step S<highlight><bold>973</bold></highlight>), so as to complete the present process. </paragraph>
<paragraph id="P-0278" lvl="0"><number>&lsqb;0278&rsqb;</number> In the case where the message should not be so sent (Step S<highlight><bold>972</bold></highlight>; NO), that is, in the case where the message is addressed to the ASP <highlight><bold>132</bold></highlight>, the CPU <highlight><bold>902</bold></highlight> checks the type of the message (Step S<highlight><bold>974</bold></highlight>). </paragraph>
<paragraph id="P-0279" lvl="0"><number>&lsqb;0279&rsqb;</number> In the case where the message is a service-request message (Step S<highlight><bold>974</bold></highlight>; Request), the CPU <highlight><bold>902</bold></highlight> acquires an IP address of the terminal <highlight><bold>111</bold></highlight> to which a service is provided and which is specified in the service-request message, i.e. an IP address of the terminal <highlight><bold>111</bold></highlight> having sent the message (Step S<highlight><bold>975</bold></highlight>). </paragraph>
<paragraph id="P-0280" lvl="0"><number>&lsqb;0280&rsqb;</number> Next, the CPU <highlight><bold>902</bold></highlight> sends an inquiry message for inquiring whether a service can be provided to the terminal <highlight><bold>111</bold></highlight>, to the ISP <highlight><bold>151</bold></highlight> through the communications-network-side interface <highlight><bold>904</bold></highlight> (Step S<highlight><bold>976</bold></highlight>), so as to complete the present process. </paragraph>
<paragraph id="P-0281" lvl="0"><number>&lsqb;0281&rsqb;</number> In the case where the message is a response message (Step S<highlight><bold>974</bold></highlight>; Response), the CPU <highlight><bold>902</bold></highlight> examines the message, and checks whether a service can be provided to the terminal <highlight><bold>111</bold></highlight> (Step S<highlight><bold>977</bold></highlight>). In the case where a service can be provided to the terminal <highlight><bold>111</bold></highlight> (Step S<highlight><bold>977</bold></highlight>; YES), the CPU <highlight><bold>902</bold></highlight> sends a service-providing message to the terminal <highlight><bold>111</bold></highlight> through the communications-network-side interface <highlight><bold>904</bold></highlight> and the ISP <highlight><bold>151</bold></highlight> (Step S<highlight><bold>978</bold></highlight>), and thus completing the present process. </paragraph>
<paragraph id="P-0282" lvl="0"><number>&lsqb;0282&rsqb;</number> In the case where the service can not be provided to the terminal <highlight><bold>111</bold></highlight> (Step S<highlight><bold>977</bold></highlight>; NO), the CPU <highlight><bold>902</bold></highlight> sends information representing that the service can not be provided thereto, to the terminal <highlight><bold>111</bold></highlight> through the communications-network-side interface <highlight><bold>904</bold></highlight> and the ISP <highlight><bold>151</bold></highlight> (Step S<highlight><bold>979</bold></highlight>), so as to complete the present process. </paragraph>
<paragraph id="P-0283" lvl="0"><number>&lsqb;0283&rsqb;</number> In the case where the message is any message other than the above (Step S<highlight><bold>974</bold></highlight>; Other), the CPU <highlight><bold>902</bold></highlight> executes a corresponding process (Step S<highlight><bold>980</bold></highlight>), so as to complete the present process. </paragraph>
<paragraph id="P-0284" lvl="0"><number>&lsqb;0284&rsqb;</number> (Embodiment of Messages) </paragraph>
<paragraph id="P-0285" lvl="0"><number>&lsqb;0285&rsqb;</number> To smoothly execute the above-described processes between the ISP <highlight><bold>151</bold></highlight> and the ASP <highlight><bold>132</bold></highlight>, it is preferred that the following information is specified in both of the inquiry message and the response message. </paragraph>
<paragraph id="P-0286" lvl="0"><number>&lsqb;0286&rsqb;</number> Such information includes: </paragraph>
<paragraph id="P-0287" lvl="2"><number>&lsqb;0287&rsqb;</number> an IP address of the terminal <highlight><bold>111</bold></highlight> requesting a service; and </paragraph>
<paragraph id="P-0288" lvl="2"><number>&lsqb;0288&rsqb;</number> the type of the service, the service charge, any conditions for providing the service, etc. </paragraph>
<paragraph id="P-0289" lvl="0"><number>&lsqb;0289&rsqb;</number> If the ISP <highlight><bold>151</bold></highlight> receives the inquiry message, the CPU <highlight><bold>902</bold></highlight> generates a response message including a copy of the information, and sends the generated response message to the ASP <highlight><bold>132</bold></highlight>. </paragraph>
<paragraph id="P-0290" lvl="0"><number>&lsqb;0290&rsqb;</number> The ASP <highlight><bold>132</bold></highlight> affixes a non-repetitive identifier (a service-providing number) to the service-request message received by the ASP <highlight><bold>132</bold></highlight>. The ASP <highlight><bold>132</bold></highlight> may use the identifier from one message to another among the inquiry message, the response message and the service-received message. If such information is specified in both messages, the consistency of various messages can be checked. </paragraph>
<paragraph id="P-0291" lvl="0"><number>&lsqb;0291&rsqb;</number> (Application of Mail-Order Selling) </paragraph>
<paragraph id="P-0292" lvl="0"><number>&lsqb;0292&rsqb;</number> In the above explanations, explanations have been made to the embodiment for providing information contents (image information, voice information, etc.) including electronic information in a service. If the following embodiment is adopted, the present invention can be employed for Internet-order selling. </paragraph>
<paragraph id="P-0293" lvl="0"><number>&lsqb;0293&rsqb;</number> That is, the user is asked to input not only a product name of a desired product, but also address for delivery (generally, it&apos;s the user address, but any other address can be specified), and the input information is specified in a service-request message. In the inquiry message or service-providing message, the product name or the price of the product is specified. The user receives the service-providing message as &ldquo;duplicate copy of order selling&rdquo;. The ASP <highlight><bold>132</bold></highlight> sends an instruction for delivering the product to a product-delivery center, upon billing the user for the product in the ISP <highlight><bold>151</bold></highlight>. </paragraph>
<paragraph id="P-0294" lvl="0"><number>&lsqb;0294&rsqb;</number> In this embodiment, information regarding the address for delivery for product is transmitted to the Internet <highlight><bold>131</bold></highlight>. According to the present invention, personal information, such as the address for delivery (generally the user address), etc. can be prevented from being transmitted to the Internet <highlight><bold>131</bold></highlight>. </paragraph>
<paragraph id="P-0295" lvl="0"><number>&lsqb;0295&rsqb;</number> That is, if the user orders the ASP <highlight><bold>132</bold></highlight> for a product to be purchased, the ASP <highlight><bold>132</bold></highlight> affixes a reference number to the order. The ASP <highlight><bold>132</bold></highlight> sends the reference number affixed to the order and information about the price of the ordered product to the ISP <highlight><bold>151</bold></highlight>, and bills the user for the ordered product. </paragraph>
<paragraph id="P-0296" lvl="0"><number>&lsqb;0296&rsqb;</number> The ASP <highlight><bold>132</bold></highlight> sends the reference number, the product name and the number of the product(s) ordered, to a product management company. The product management company packs the ordered product(s), attaches the reference number to the package, and sends the product to the delivery center. </paragraph>
<paragraph id="P-0297" lvl="0"><number>&lsqb;0297&rsqb;</number> On the other hand, the ISP <highlight><bold>151</bold></highlight> sends information regarding the user address corresponding to the reference number, to the delivery center. </paragraph>
<paragraph id="P-0298" lvl="0"><number>&lsqb;0298&rsqb;</number> The delivery center focuses the address for delivery based on the information sent from the ISP <highlight><bold>151</bold></highlight>, and delivers the ordered product thereto. </paragraph>
<paragraph id="P-0299" lvl="0"><number>&lsqb;0299&rsqb;</number> In this manner, the present invention can be adopted for the embodiment, wherein transmission of the personal information is limited as much as possible. </paragraph>
<paragraph id="P-0300" lvl="0"><number>&lsqb;0300&rsqb;</number> The above explanations have been made to the embodiment, wherein the billing is performed when the ASP <highlight><bold>132</bold></highlight> in the Internet provides the terminal <highlight><bold>111</bold></highlight> with a service through the ISP <highlight><bold>151</bold></highlight>. However, the present invention is not limited to this. The present invention can be adopted to any other embodiment, wherein communications identifiers are assigned respectively to communications devices, through various computer communications networks, and such an embodiment is included in the present invention. </paragraph>
<paragraph id="P-0301" lvl="0"><number>&lsqb;0301&rsqb;</number> (Another Embodiment of Relay Device) </paragraph>
<paragraph id="P-0302" lvl="0"><number>&lsqb;0302&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 13</cross-reference> is an exemplary diagram showing the schematic structure of a relay device of another embodiment of the present invention. Description will now be made with reference to <cross-reference target="DRAWINGS">FIG. 13</cross-reference>. </paragraph>
<paragraph id="P-0303" lvl="0"><number>&lsqb;0303&rsqb;</number> As shown in <cross-reference target="DRAWINGS">FIG. 13, a</cross-reference> relay device <highlight><bold>1101</bold></highlight> relays a message including information specifying a communications identifier of the addresser and a communications identifier of the addressee, to a computer communications network <highlight><bold>1151</bold></highlight> to be communicating therewith. The relay device <highlight><bold>1101</bold></highlight> includes a terminal-communicator <highlight><bold>1102</bold></highlight>, a computer-communications-network communicator <highlight><bold>1103</bold></highlight>, a communications-identifier assignor <highlight><bold>1104</bold></highlight>, and an upward relay device <highlight><bold>1105</bold></highlight>. </paragraph>
<paragraph id="P-0304" lvl="0"><number>&lsqb;0304&rsqb;</number> The terminal-communicator <highlight><bold>1102</bold></highlight> is connected to a terminal <highlight><bold>1171</bold></highlight>, and communicates messages with the terminal <highlight><bold>1171</bold></highlight>. </paragraph>
<paragraph id="P-0305" lvl="0"><number>&lsqb;0305&rsqb;</number> The computer-communications-network communicator <highlight><bold>1103</bold></highlight> is connected to the computer communications network <highlight><bold>1151</bold></highlight>, and communicates messages with the computer communications network <highlight><bold>1151</bold></highlight>. </paragraph>
<paragraph id="P-0306" lvl="0"><number>&lsqb;0306&rsqb;</number> Further, the communications-identifier assignor <highlight><bold>1104</bold></highlight> assigns the terminal <highlight><bold>1171</bold></highlight> with a communications identifier. </paragraph>
<paragraph id="P-0307" lvl="0"><number>&lsqb;0307&rsqb;</number> In the case where: a communications identifier of an addresser, which is specified in information included in a message sent from the terminal <highlight><bold>1171</bold></highlight> through the terminal-communicator <highlight><bold>1102</bold></highlight>, is the communications identifier assigned by the communications-identifier assignor <highlight><bold>1104</bold></highlight>; and a communications identifier of an addressee, which is specified in the information included in this message, satisfies a relay condition, the upward relay device <highlight><bold>1105</bold></highlight> sends and relays this message to the computer communications network <highlight><bold>1151</bold></highlight> through the computer-communications-network communicator <highlight><bold>1103</bold></highlight>. In the case where the relay condition is not satisfied, the upward relay device <highlight><bold>1105</bold></highlight> does not send the message thereto. </paragraph>
<paragraph id="P-0308" lvl="0"><number>&lsqb;0308&rsqb;</number> The relay device <highlight><bold>1101</bold></highlight> includes a downward relay device <highlight><bold>1106</bold></highlight>. </paragraph>
<paragraph id="P-0309" lvl="0"><number>&lsqb;0309&rsqb;</number> In the case where: a communications identifier of an addressee which is specified in information included in a message sent from the computer-communications network <highlight><bold>1151</bold></highlight> through the computer-communications-network communicator <highlight><bold>1103</bold></highlight> is a communications identifier assigned by the communications-identifier assignor <highlight><bold>1104</bold></highlight>; and a communications identifier which is specified in the information included in this message satisfies a relay condition, the downward relay device <highlight><bold>1101</bold></highlight> sends and relays this message to the terminal <highlight><bold>1171</bold></highlight> through the terminal-communicator <highlight><bold>1102</bold></highlight>. </paragraph>
<paragraph id="P-0310" lvl="0"><number>&lsqb;0310&rsqb;</number> On the contrary, in the case where the relay condition is not satisfied, the downward relay device <highlight><bold>1106</bold></highlight> does not send the message to the terminal <highlight><bold>1171</bold></highlight>. In the case where the addressee of this message is a device in the computer-communications network <highlight><bold>1151</bold></highlight>, the downward relay device <highlight><bold>1106</bold></highlight> sends this message to the device in the computer-communications network <highlight><bold>1151</bold></highlight> in a bucket brigade manner. </paragraph>
<paragraph id="P-0311" lvl="0"><number>&lsqb;0311&rsqb;</number> The relay device <highlight><bold>101</bold></highlight> of the present invention may further include a relay-forbiddance-communications-identifier storage section <highlight><bold>1107</bold></highlight>. </paragraph>
<paragraph id="P-0312" lvl="0"><number>&lsqb;0312&rsqb;</number> The relay-forbiddance-communications-identifier storage section <highlight><bold>1107</bold></highlight> stores communications identifiers, in advance. </paragraph>
<paragraph id="P-0313" lvl="0"><number>&lsqb;0313&rsqb;</number> The relay condition is satisfied, in the case where the communications identifier of the addressee or addresser which is specified in the information included in the message is not included in the communications identifiers stored in advance in the relay-forbiddance-communications-identifier storage section <highlight><bold>1107</bold></highlight>. </paragraph>
<paragraph id="P-0314" lvl="0"><number>&lsqb;0314&rsqb;</number> The relay device <highlight><bold>1101</bold></highlight> of the present invention may further include a user<highlight><bold>10</bold></highlight> name receiver <highlight><bold>1108</bold></highlight>. </paragraph>
<paragraph id="P-0315" lvl="0"><number>&lsqb;0315&rsqb;</number> The user-name receiver <highlight><bold>1108</bold></highlight> receives the user name sent from the terminal <highlight><bold>11017</bold></highlight> through the terminal-communicator <highlight><bold>1102</bold></highlight>. </paragraph>
<paragraph id="P-0316" lvl="0"><number>&lsqb;0316&rsqb;</number> The relay-forbiddance-communications-identifier storage section <highlight><bold>1107</bold></highlight> stores in advance the communications identifier(s) in association with the user name(s) received by the user-name receiver <highlight><bold>1108</bold></highlight>. </paragraph>
<paragraph id="P-0317" lvl="0"><number>&lsqb;0317&rsqb;</number> Further, the relay condition is satisfied, in the case where the communications identifier of the addressee or addresser which is specified in the information included in the message is not included in the communications identifier(s) stored in advance in the relay-forbiddance-communications-identifier storage section <highlight><bold>1107</bold></highlight>, in association with the user name. </paragraph>
<paragraph id="P-0318" lvl="0"><number>&lsqb;0318&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 14</cross-reference> is an exemplary diagram showing the schematic structure of a relay device of still another embodiment of the present invention. Description will now be made with reference to <cross-reference target="DRAWINGS">FIG. 14</cross-reference>. In <cross-reference target="DRAWINGS">FIG. 14</cross-reference>, the same reference numerals are affixed to the elemental components having the same functions as those shown in the above illustration. </paragraph>
<paragraph id="P-0319" lvl="0"><number>&lsqb;0319&rsqb;</number> As illustrated in <cross-reference target="DRAWINGS">FIG. 14</cross-reference>, the relay device <highlight><bold>1101</bold></highlight> according to this embodiment further includes an authentication-character-string generator/sender <highlight><bold>1109</bold></highlight>, a password-character-string receiver <highlight><bold>1110</bold></highlight>, and a rule storage section <highlight><bold>1111</bold></highlight>, in addition to above-described relay device. </paragraph>
<paragraph id="P-0320" lvl="0"><number>&lsqb;0320&rsqb;</number> The user-name receiver <highlight><bold>1108</bold></highlight> of the relay device <highlight><bold>1101</bold></highlight> receives the user name sent from the terminal <highlight><bold>1171</bold></highlight>, through the terminal-communicator <highlight><bold>1102</bold></highlight>. </paragraph>
<paragraph id="P-0321" lvl="0"><number>&lsqb;0321&rsqb;</number> The authentication-character-string generator/sender <highlight><bold>1109</bold></highlight> generates an authentication character string, and sends the generated character string to the terminal <highlight><bold>1171</bold></highlight> through the terminal-communicator <highlight><bold>1102</bold></highlight>. </paragraph>
<paragraph id="P-0322" lvl="0"><number>&lsqb;0322&rsqb;</number> The password-character-string receiver <highlight><bold>1110</bold></highlight> receives the password-character string sent from the terminal <highlight><bold>1171</bold></highlight> through the terminal-communicator <highlight><bold>1102</bold></highlight>. </paragraph>
<paragraph id="P-0323" lvl="0"><number>&lsqb;0323&rsqb;</number> The rule storage section <highlight><bold>1111</bold></highlight> stores a rule for generating a password-character string from the authentication character string, in association with each user name. </paragraph>
<paragraph id="P-0324" lvl="0"><number>&lsqb;0324&rsqb;</number> In the case where a password-character string received by the password-character string receiver <highlight><bold>1110</bold></highlight> is generated from the authentication character string generated by the authentication-character-string generator/sender <highlight><bold>1109</bold></highlight>, in accordance with a rule stored in the rule storage section <highlight><bold>1111</bold></highlight> in association with the user name received by the user-name receiver <highlight><bold>1108</bold></highlight>, the communications-identifier assignor <highlight><bold>1104</bold></highlight> assigns the terminal <highlight><bold>1171</bold></highlight> a communications identifier. </paragraph>
<paragraph id="P-0325" lvl="0"><number>&lsqb;0325&rsqb;</number> The relay device <highlight><bold>1101</bold></highlight> of the present invention may further include a communications-identifier invalidating section (not illustrated). </paragraph>
<paragraph id="P-0326" lvl="0"><number>&lsqb;0326&rsqb;</number> In the case where the user name is received by the user-name receiver <highlight><bold>1108</bold></highlight>, the communications-identifier assignor <highlight><bold>1104</bold></highlight> assigns the terminal <highlight><bold>1171</bold></highlight> a communications identifier. </paragraph>
<paragraph id="P-0327" lvl="0"><number>&lsqb;0327&rsqb;</number> In the case where a password-character string received by the password-character string receiver <highlight><bold>1110</bold></highlight> is not generated from the authentication character string generated by the authentication-character-string generator/sender <highlight><bold>1109</bold></highlight>, in accordance with a rule stored in the rule storage section <highlight><bold>1111</bold></highlight> in association with the user name received by the user-name receiver <highlight><bold>1108</bold></highlight>, the communications-identifier invalidating section invalidates the communications identifier assigned by the communications-identifier assignor <highlight><bold>1104</bold></highlight> to the terminal <highlight><bold>1171</bold></highlight>. </paragraph>
<paragraph id="P-0328" lvl="0"><number>&lsqb;0328&rsqb;</number> In this embodiment, the same rule for determining the correspondence relationship between the password-character string and the authentication character string, as that of the above-described embodiment, can be adopted. </paragraph>
<paragraph id="P-0329" lvl="0"><number>&lsqb;0329&rsqb;</number> In the relay device <highlight><bold>101</bold></highlight> of this embodiment, the communications-identifier assignor <highlight><bold>1104</bold></highlight> selects a currently-unused communications identifier, from a plurality of pre-set communications identifiers, and assigns the terminal <highlight><bold>1171</bold></highlight> the selected identifier. </paragraph>
<paragraph id="P-0330" lvl="0"><number>&lsqb;0330&rsqb;</number> Explanations will now be made to the correspondence relationship among elemental components in the relay devices of the embodiments shown respectively in <cross-reference target="DRAWINGS">FIGS. 13 and 14</cross-reference> and the computer <highlight><bold>301</bold></highlight> shown in <cross-reference target="DRAWINGS">FIG. 3</cross-reference>. </paragraph>
<paragraph id="P-0331" lvl="0"><number>&lsqb;0331&rsqb;</number> The terminal-side interface <highlight><bold>303</bold></highlight> serves as the terminal-communicator <highlight><bold>1102</bold></highlight>. The communications-network-side interface <highlight><bold>304</bold></highlight> serves as the computer-communications-network communicator <highlight><bold>1103</bold></highlight>. </paragraph>
<paragraph id="P-0332" lvl="0"><number>&lsqb;0332&rsqb;</number> The CPU <highlight><bold>302</bold></highlight> serves as the communications-identifier assignor <highlight><bold>1104</bold></highlight>, serves as the upward relay device <highlight><bold>1105</bold></highlight> in cooperation with the communications-network-side interface <highlight><bold>304</bold></highlight>, and serves as the downward relay device <highlight><bold>1106</bold></highlight> in cooperation with the terminal-side interface <highlight><bold>303</bold></highlight>. </paragraph>
<paragraph id="P-0333" lvl="0"><number>&lsqb;0333&rsqb;</number> The medium installed in the hard disk <highlight><bold>305</bold></highlight> or the medium reader <highlight><bold>310</bold></highlight> serves as the relay-forbiddance-communications-identifier storage section <highlight><bold>1107</bold></highlight>. </paragraph>
<paragraph id="P-0334" lvl="0"><number>&lsqb;0334&rsqb;</number> The terminal-side interface <highlight><bold>303</bold></highlight> serves as the user-name receiver <highlight><bold>1108</bold></highlight>. </paragraph>
<paragraph id="P-0335" lvl="0"><number>&lsqb;0335&rsqb;</number> In the case where the computer <highlight><bold>301</bold></highlight> shown in <cross-reference target="DRAWINGS">FIG. 3</cross-reference> serves as the relay device <highlight><bold>1101</bold></highlight> according to the embodiment shown in <cross-reference target="DRAWINGS">FIG. 14</cross-reference>, the same connection-start process shown in <cross-reference target="DRAWINGS">FIG. 6</cross-reference> can be employed for assigning the terminal <highlight><bold>1171</bold></highlight> a communications identifier. </paragraph>
<paragraph id="P-0336" lvl="0"><number>&lsqb;0336&rsqb;</number> Subsequently, communications between the terminal <highlight><bold>1171</bold></highlight> and the ASP in the computer-communications network <highlight><bold>1151</bold></highlight> is achieved through communications of a message including their IP addresses and/or port numbers as communications identifiers of the addresser and the addressee. This relay process will be described later, with the description of two separate processes of an upward relay process (data transmission from the terminal <highlight><bold>1171</bold></highlight> to the ASP in the computer-communications network <highlight><bold>1151</bold></highlight>) and a downward relay process (data transmission from the ASP in the computer-communications network <highlight><bold>1151</bold></highlight> to the terminal <highlight><bold>1171</bold></highlight>). </paragraph>
<paragraph id="P-0337" lvl="0"><number>&lsqb;0337&rsqb;</number> For the sake of easy understanding, in the following description of the upward relay process and the downward relay process, no particular explanations will be made to a process, carried out by the computer <highlight><bold>301</bold></highlight> (the relay device <highlight><bold>1101</bold></highlight>), for relaying messages from a particular ASP in the computer communications network <highlight><bold>1151</bold></highlight> to another ASP in the computer communications network <highlight><bold>1151</bold></highlight>. For the non-descriptive process, a well-known bucket-brigade communications technique using TCP/IP can be employed. </paragraph>
<paragraph id="P-0338" lvl="0"><number>&lsqb;0338&rsqb;</number> (Upward Relay Process) </paragraph>
<paragraph id="P-0339" lvl="0"><number>&lsqb;0339&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 15</cross-reference> is a flowchart showing the flow of an upward relay process, wherein the computer <highlight><bold>301</bold></highlight> shown in <cross-reference target="DRAWINGS">FIG. 3</cross-reference> relays a message sent from the terminal <highlight><bold>1171</bold></highlight> to an ASP in the computer communications network <highlight><bold>1151</bold></highlight>. Description will now be made with reference to <cross-reference target="DRAWINGS">FIG. 15</cross-reference>. </paragraph>
<paragraph id="P-0340" lvl="0"><number>&lsqb;0340&rsqb;</number> The upward relay process is activated, if the CPU <highlight><bold>302</bold></highlight> detects that the message sent from the terminal <highlight><bold>1171</bold></highlight> has arrived at the terminal-side interface <highlight><bold>303</bold></highlight>. </paragraph>
<paragraph id="P-0341" lvl="0"><number>&lsqb;0341&rsqb;</number> Upon activation of the upward relay process, the CPU <highlight><bold>302</bold></highlight> receives the message sent from the terminal <highlight><bold>1171</bold></highlight> through the terminal-side interface <highlight><bold>303</bold></highlight> (Step S<highlight><bold>1501</bold></highlight>), and temporarily stores the message in a buffer in the RAM <highlight><bold>307</bold></highlight> (Step S<highlight><bold>1502</bold></highlight>). </paragraph>
<paragraph id="P-0342" lvl="0"><number>&lsqb;0342&rsqb;</number> The CPU <highlight><bold>302</bold></highlight> checks communications identifiers of the addresser and addressee of the message. </paragraph>
<paragraph id="P-0343" lvl="0"><number>&lsqb;0343&rsqb;</number> The CPU <highlight><bold>302</bold></highlight> checks whether the communications identifier of the addresser is a communications identifier assigned to any one terminal in the above-described connection-start process (Step S<highlight><bold>1503</bold></highlight>). In the case where the communications identifier of the addresser is not the assigned communications identifier (Step S<highlight><bold>1503</bold></highlight>; NO), there is an error in the message, resulting in completing the present process. Note, in this case, a proper communications identifier of the terminal <highlight><bold>1171</bold></highlight> having sent the message is unknown, so that the terminal <highlight><bold>1171</bold></highlight> is not informed about the error. </paragraph>
<paragraph id="P-0344" lvl="0"><number>&lsqb;0344&rsqb;</number> On the contrary, in the case where the communications identifier of the addresser is the assigned communications identifier (Step S<highlight><bold>1503</bold></highlight>; YES), the CPU <highlight><bold>302</bold></highlight> checks whether communications identifier of the addressee satisfies a relay condition (Step S<highlight><bold>1504</bold></highlight>). </paragraph>
<paragraph id="P-0345" lvl="0"><number>&lsqb;0345&rsqb;</number> In this embodiment, the relay condition is satisfied, in the case where any of the communications identifiers (relay-forbiddance communications identifiers) stored in the relay-forbiddance-communications-identifier storage section <highlight><bold>1107</bold></highlight> in the hard disk <highlight><bold>305</bold></highlight> does not coincide with the communications identifier of the addressee. </paragraph>
<paragraph id="P-0346" lvl="0"><number>&lsqb;0346&rsqb;</number> In the case where the relay condition is satisfied (Step S<highlight><bold>1504</bold></highlight>; YES), i.e. in the case where the relaying is performed, the computer <highlight><bold>301</bold></highlight> sends and relays this message to the computer communications network <highlight><bold>1151</bold></highlight> through the communications-network-side interface <highlight><bold>304</bold></highlight> (Step S<highlight><bold>1505</bold></highlight>), so as to complete the present process. </paragraph>
<paragraph id="P-0347" lvl="0"><number>&lsqb;0347&rsqb;</number> In the case where the relay condition is not satisfied (Step S<highlight><bold>1504</bold></highlight>; NO), i.e. in the case where the relaying is not performed, the computer <highlight><bold>301</bold></highlight> informs the terminal <highlight><bold>1171</bold></highlight> of an error that the message can not be relayed thereto (Step S<highlight><bold>1506</bold></highlight>), so as to complete the present process. </paragraph>
<paragraph id="P-0348" lvl="0"><number>&lsqb;0348&rsqb;</number> (Downward Relay Process) </paragraph>
<paragraph id="P-0349" lvl="0"><number>&lsqb;0349&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 16</cross-reference> is a flowchart showing the flow of a downward relay process, wherein the computer <highlight><bold>301</bold></highlight> shown in <cross-reference target="DRAWINGS">FIG. 3</cross-reference> relays a message sent from an ASP in the computer communications network <highlight><bold>1151</bold></highlight> to the terminal <highlight><bold>1171</bold></highlight>. Description will now be made with reference to <cross-reference target="DRAWINGS">FIG. 16</cross-reference>. </paragraph>
<paragraph id="P-0350" lvl="0"><number>&lsqb;0350&rsqb;</number> The downward relay process is activated, if the CPU <highlight><bold>302</bold></highlight> detects that the message sent from the ASP in the computer communications network <highlight><bold>1151</bold></highlight> has arrived at the communications-network-side interface <highlight><bold>304</bold></highlight>. </paragraph>
<paragraph id="P-0351" lvl="0"><number>&lsqb;0351&rsqb;</number> Upon activation of the downward relay process, the CPU <highlight><bold>302</bold></highlight> receives the message sent from the ASP through the communications-network-side interface <highlight><bold>304</bold></highlight> (Step S<highlight><bold>601</bold></highlight>), and temporarily stores the message in the buffer in the RAM <highlight><bold>307</bold></highlight> (Step S<highlight><bold>1602</bold></highlight>). </paragraph>
<paragraph id="P-0352" lvl="0"><number>&lsqb;0352&rsqb;</number> The CPU <highlight><bold>302</bold></highlight> checks communications identifiers of the addresser and addressee of the message. </paragraph>
<paragraph id="P-0353" lvl="0"><number>&lsqb;0353&rsqb;</number> The CPU <highlight><bold>302</bold></highlight> checks whether the communications identifier of the addresser satisfies a relay condition (Step S<highlight><bold>1603</bold></highlight>). This relay condition may be the same as the condition employed in the upward relay process. In this embodiment, the relay condition is satisfied, in the case where any of communications identifiers (a relay-forbiddance IP address) stored in the relay-forbiddance-communications-identifier storage section <highlight><bold>1107</bold></highlight> in the hard disk <highlight><bold>305</bold></highlight> does not coincide with the communications identifier of the addresser ASP. </paragraph>
<paragraph id="P-0354" lvl="0"><number>&lsqb;0354&rsqb;</number> In the case where the relay condition is not satisfied (Step S<highlight><bold>1603</bold></highlight>; NO), i.e. in the case where the relaying is not performed, the computer <highlight><bold>301</bold></highlight> informs the computer communications network <highlight><bold>1151</bold></highlight> about an error that the message can not be relayed to the corresponding addresser ASP in the computer communications network <highlight><bold>1151</bold></highlight> (Step S<highlight><bold>1604</bold></highlight>), and completing this process. </paragraph>
<paragraph id="P-0355" lvl="0"><number>&lsqb;0355&rsqb;</number> On the contrary, in the case where the relay condition is satisfied (Step S<highlight><bold>1603</bold></highlight>; YES), the computer <highlight><bold>301</bold></highlight> checks whether the communications identifier of the addressee is one assigned to any one terminal in the above-described connection-start process (Step S<highlight><bold>1605</bold></highlight>). In the case where the communications identifier of the addressee is not the one assigned to any one terminal in the connection-start process (Step S<highlight><bold>1605</bold></highlight>; NO), the computer <highlight><bold>301</bold></highlight> informs the addresser ASP of an error that the message can not be relayed to the addresser (Step S<highlight><bold>1607</bold></highlight>), and completing the present process. </paragraph>
<paragraph id="P-0356" lvl="0"><number>&lsqb;0356&rsqb;</number> In the case where the communications identifier of the addressee is the one assigned to any one terminal (Step S<highlight><bold>1605</bold></highlight>; YES). The computer <highlight><bold>301</bold></highlight> sends and relays the corresponding message to the terminal <highlight><bold>1171</bold></highlight> through the terminal-side interface <highlight><bold>303</bold></highlight> (Step S<highlight><bold>1606</bold></highlight>), and completing the present process. </paragraph>
<paragraph id="P-0357" lvl="0"><number>&lsqb;0357&rsqb;</number> Other than the above, in any of the upward relay process and the downward relay process, the relay condition may be set to be satisfied in the following cases. </paragraph>
<paragraph id="P-0358" lvl="0"><number>&lsqb;0358&rsqb;</number> The first method is as follows: The relay-forbiddance-communications-identifier storage section <highlight><bold>1107</bold></highlight> stores, as relay-forbiddance patterns, bit masks and IP addresses, to which the message is not relayed and which have bit masks which are set. </paragraph>
<paragraph id="P-0359" lvl="0"><number>&lsqb;0359&rsqb;</number> For example, in the case where a value &ldquo;255.255.255.0&rdquo; is specified as a bit mask and a value &ldquo;144.3.14.0&rdquo; is specified as an IP address to which a message is not to be relayed, IP addresses from &ldquo;144.3.14.0&rdquo; to &ldquo;144.3.14.255&rdquo; match with the relay-forbiddance patterns. The relaying is not performed to any ASPS having the above IP addresses. Hence, in the case where the communications identifier of the addressee for communications does not match with any of the relay-forbiddance patterns, the relay condition is satisfied. </paragraph>
<paragraph id="P-0360" lvl="0"><number>&lsqb;0360&rsqb;</number> The second method is as follows: The relay-forbiddance IP address or relay-forbiddance pattern can be set for each user. Each user can be investigated based on the user name received in the above-described connection-start process. In association with the received user name, the relay-forbiddance IP address or the relay-forbiddance pattern is stored in the relay-forbiddance-communications-identifier storage section <highlight><bold>1107</bold></highlight>. </paragraph>
<paragraph id="P-0361" lvl="0"><number>&lsqb;0361&rsqb;</number> The user name of a user who uses a terminal is investigated based on the IP address of the terminal which is included in the message. In the case where the communications identifier of the addressee of the communications does not match with a relay-forbiddance IP address or relay-forbiddance patter of this user, the relay condition is satisfied. </paragraph>
<paragraph id="P-0362" lvl="0"><number>&lsqb;0362&rsqb;</number> In this case, if the user uses a program, such as a CGI (Common Gateway Interface) script prepared in the ISP from the browser, thereby directly managing the adding, changing or deleting of the relay-forbiddance IP address or relay-forbiddance pattern. </paragraph>
<paragraph id="P-0363" lvl="0"><number>&lsqb;0363&rsqb;</number> Depending on the type of the contract between the user and the ISP, the relay-forbiddance IP address or the relay-forbiddance pattern may be changed. For example, the more the service charge of the contract is expensive, the lesser the number of the relay-forbiddance IP address or relay-forbiddance pattern. </paragraph>
<paragraph id="P-0364" lvl="0"><number>&lsqb;0364&rsqb;</number> The third method is as follows: In the above embodiment, it is set that &ldquo;relay-forbiddance information&rdquo; is stored. However, in this embodiment, &ldquo;relay permission information&rdquo; is stored. That is, a relay-permission IP address or a relay-permission patter can be stored. In the case where the IP address matches with the relay-permission IP address or the relay-permission pattern, the relay condition is satisfied. Such an address or pattern may be set distinctively for each user or may commonly be set among all users. Since the user can connect only to a permissible ASP, the advertisement effect of this ASP can be enhanced. This may prevent the entry of any other ASPs, competing with the permissible ASP, into the share. The present method is effective, in the case where the ASP shoulders the connection charge toward the ISP for the user so as to realize a free-network connection service. </paragraph>
<paragraph id="P-0365" lvl="0"><number>&lsqb;0365&rsqb;</number> Such methods for relay conditions may individually be adopted or be combined together, and both cases are included in the scope of the present invention. </paragraph>
<paragraph id="P-0366" lvl="0"><number>&lsqb;0366&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 17</cross-reference> is an explanatory diagram showing a typical example, wherein a message is relayed between the terminal <highlight><bold>1171</bold></highlight>, the computer <highlight><bold>301</bold></highlight> (the relay device <highlight><bold>1101</bold></highlight>), and communication-permissible ASP and communication-impermissible ASP in the computer communications network <highlight><bold>1151</bold></highlight>. </paragraph>
<paragraph id="P-0367" lvl="0"><number>&lsqb;0367&rsqb;</number> Once the terminal <highlight><bold>1171</bold></highlight> sends a connection request to the computer <highlight><bold>301</bold></highlight> (<highlight><bold>701</bold></highlight>), the computer <highlight><bold>301</bold></highlight> assigns this terminal <highlight><bold>1171</bold></highlight> a communications identifier (<highlight><bold>702</bold></highlight>). Upon arrival (<highlight><bold>703</bold></highlight>) of a message addressed to the communication-permissible ASP at the computer <highlight><bold>301</bold></highlight> from the terminal <highlight><bold>1171</bold></highlight> to which the communications identifier is assigned, this message is send and relayed (<highlight><bold>704</bold></highlight>) to the computer communications network <highlight><bold>1151</bold></highlight> through the computer <highlight><bold>301</bold></highlight>, and arrives at the communications permissible ASP. Even if a message addressed to the communications-impermissible ASP arrives at the computer <highlight><bold>301</bold></highlight> (<highlight><bold>706</bold></highlight>), the computer <highlight><bold>301</bold></highlight> does not relay the message (<highlight><bold>721</bold></highlight>), and informs (<highlight><bold>707</bold></highlight>) the terminal <highlight><bold>1171</bold></highlight> that the relaying is not performed. </paragraph>
<paragraph id="P-0368" lvl="0"><number>&lsqb;0368&rsqb;</number> Upon arrival (<highlight><bold>708</bold></highlight>) of the message addressed to the terminal <highlight><bold>1171</bold></highlight> from the communications-permissible ASP at the computer <highlight><bold>301</bold></highlight>, this message is sent and relayed to the computer communications network <highlight><bold>1151</bold></highlight> through the computer <highlight><bold>301</bold></highlight> and arrives at the terminal <highlight><bold>1171</bold></highlight> (<highlight><bold>709</bold></highlight>). Even if the message from the communications-impermissible ASP arrives at the computer <highlight><bold>301</bold></highlight> (<highlight><bold>710</bold></highlight>), the computer <highlight><bold>301</bold></highlight> does not relay the message (<highlight><bold>722</bold></highlight>), and informs the communications-impermissible ASP that the relaying can not be performed (<highlight><bold>711</bold></highlight>). </paragraph>
<paragraph id="P-0369" lvl="0"><number>&lsqb;0369&rsqb;</number> The TCP/IP communications is a form of communications, wherein information as to whether data has arrived or not is certainly transmitted. Hence, in the case where the relaying of a message is not performed, the computer <highlight><bold>301</bold></highlight> needs to inform the addresser that the corresponding message can not be relayed. </paragraph>
<paragraph id="P-0370" lvl="0"><number>&lsqb;0370&rsqb;</number> In this manner, according to the relay device <highlight><bold>1101</bold></highlight> of the present invention, the terminal <highlight><bold>1171</bold></highlight> can be provided with connection to a computer communications network having access control. </paragraph>
<paragraph id="P-0371" lvl="0"><number>&lsqb;0371&rsqb;</number> (Embodiment for Assigning One User Name a Plurality of Relay Conditions) </paragraph>
<paragraph id="P-0372" lvl="0"><number>&lsqb;0372&rsqb;</number> In the above-described embodiment, the relay-forbiddance IP address or relay-forbiddance pattern may be stored in association with each user. In this embodiment, a plurality of passwords (including not only currently-used keywords, but also passwords employing a conversion rule), and &ldquo;user name&rdquo; of the above-described embodiment is replaced with &ldquo;a combination of a user name and a password&rdquo;. </paragraph>
<paragraph id="P-0373" lvl="0"><number>&lsqb;0373&rsqb;</number> In addition to the dial-up connection using a telephone line, in connection to an Internet communications network using a CATV (CAble TeleVision) line, each family may commonly use a single user name. In this case, the contract (usually, the head of the family) pays for the connection charge to the ISP. </paragraph>
<paragraph id="P-0374" lvl="0"><number>&lsqb;0374&rsqb;</number> In such a case where a single user name is shared in a family, the parents may connect to the ISP without access control, while controlling the accessing of their kids to adults-only pages, pages including business-deals matters, such as mail-order selling, etc., pages from overseas. </paragraph>
<paragraph id="P-0375" lvl="0"><number>&lsqb;0375&rsqb;</number> There may be set different passwords between the parents and their kids, there is no access control for the relay-forbiddance IP address and the relay-forbiddance pattern corresponding to &ldquo;the user name and the parents password&rdquo;. The IP addresses of the above-described undesirable servers are specified as the relay-forbiddance IP address and the relay-forbiddance patter corresponding to &ldquo;the user name and the kids password&rdquo;. </paragraph>
<paragraph id="P-0376" lvl="0"><number>&lsqb;0376&rsqb;</number> In this manner, a plurality of passwords are prepared for a single user name, and the relay-forbiddance IP address and the relay-forbiddance IP pattern, etc. are stored for the pair of &ldquo;the user name and the password&rdquo;, thereby clearing up various problems occurring in the case where the same user name is shared in a family. </paragraph>
<paragraph id="P-0377" lvl="0"><number>&lsqb;0377&rsqb;</number> (Application of the Present Invention in Continuous-Connection Environment) </paragraph>
<paragraph id="P-0378" lvl="0"><number>&lsqb;0378&rsqb;</number> In the above-described embodiments, the description has been made to the example, wherein the ISP serves as a dial-up server and DHCP server of the terminal. However, in the context wherein the continuous-connection environment is settled, the present invention can be adopted as follows: In this case, the ISP serves as a so-called gateway. </paragraph>
<paragraph id="P-0379" lvl="0"><number>&lsqb;0379&rsqb;</number> That is, a fixed IP address is assigned in advance to a user terminal. It is identified whether the user of the terminal began the accessing to the server. In the case where the user has began the accessing, the user is asked to input the user name, and user authentication is performed. </paragraph>
<paragraph id="P-0380" lvl="0"><number>&lsqb;0380&rsqb;</number> In the case where successful authentication is made, the communications-identifier assignor assigns the terminal an IP address of the terminal as a communications identifier &ldquo;authenticated IP address&rdquo;. </paragraph>
<paragraph id="P-0381" lvl="0"><number>&lsqb;0381&rsqb;</number> In the case where there is a terminal which intends to use an ISP as a gateway, the ISP checks the IP address of the terminal. In the only case where the checked is the &ldquo;authenticated IP address&rdquo;, the ISP relays the communications. </paragraph>
<paragraph id="P-0382" lvl="0"><number>&lsqb;0382&rsqb;</number> Periodically, the authentication is performed. In the case of a failure in the authentication, the &ldquo;authenticated IP address&rdquo; assigned to the terminal gets invalidated. Thus, the communications relaying for the terminal can not be performed. </paragraph>
<paragraph id="P-0383" lvl="0"><number>&lsqb;0383&rsqb;</number> By employing such an embodiment, unnecessary accesses from an intranet to the Internet can be reduced, and preventing from being externally accessed. In addition, if the IP addresses are recorded, the investigation of whether there is any external accesses may be made. </paragraph>
<paragraph id="P-0384" lvl="0"><number>&lsqb;0384&rsqb;</number> The user authentication of the user in the terminal can be performed using a predetermined WWW form in accordance with a CGI script technique. This WWW form is handled as a so-called &ldquo;portal&rdquo; for accessing to the Internet, thereby enhancing the spreading of advertisement or information matters, promoting the community, and attempting the wide usage of the Internet application. </paragraph>
</section>
<section>
<heading lvl="1">INDUSTRIAL APPLICABILITY </heading>
<paragraph id="P-0385" lvl="0"><number>&lsqb;0385&rsqb;</number> As explained above, according to the present invention, billing information for a service provided from an ASP in the Internet to the user is managed only an ISP which connects the user terminal to the Internet. The present invention is preferable for not leaking information, such as user&apos;s credit-card information, etc. The present invention can realize a communication system, a relay device, a service provider, a relaying method, a service providing method and a program product for realizing these, which are all suitable for a dial-up server providing terminals with connections to a computer communications network, such as the Internet, with access control. </paragraph>
<paragraph id="P-0386" lvl="0"><number>&lsqb;0386&rsqb;</number> The patent application claims the Paris Convention Priority based on Japanese Patent Application No. 2000-20985 and No. 2000-22088 filed with the Japan Patent Office on Jan. 31, 2000, the complete disclosure of which is hereby incorporated by reference. </paragraph>
</section>
</detailed-description>
</subdoc-description>
<subdoc-claims>
<claim id="CLM-00001">
<claim-text><highlight><bold>1</bold></highlight>. A communication system including a terminal, a relay device, and a service provider, wherein: 
<claim-text>(a) said terminal sends a user name to said relay device; </claim-text>
<claim-text>(b) said relay device receives the user name from said terminal, and assigns said terminal a communication identifier in association with the user name; </claim-text>
<claim-text>(c) said terminal sends a service-request message, whose addresser corresponds to the assigned communication identifier and addressee corresponds to a communication identifier of said service provider, to said relay device; </claim-text>
<claim-text>(d) said relay device receives the service-request message from said terminal, and </claim-text>
<claim-text>sends the service-request message to said service provider; </claim-text>
<claim-text>(e) said service provider receives the service-request message from said relay device, and </claim-text>
<claim-text>sends an inquiry message for inquiring whether to provide a service to the communication identifier specified in the service-request message, to said relay device; </claim-text>
<claim-text>(f) said relay device receives the inquiry message, and </claim-text>
<claim-text>sends a response message, to said service provider, specifying to provide a service, in a case where the communication identifier specified in the inquiry message has been assigned in association with the user name, and, if not, specifying to provide a service; </claim-text>
<claim-text>(g) said service provider receives the response message from said relay device, and </claim-text>
<claim-text>sends a service-providing message, whose addressee corresponds to the communication identifier specified in the service-request message in a case where the response message specifies to provide a service and whose addresser is said service provider, to said relay device; </claim-text>
<claim-text>(h) said relay device receives the service-providing message from said service provider, and sends this to said terminal; and </claim-text>
<claim-text>(i) said terminal receives the service-providing message from said relay device. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00002">
<claim-text><highlight><bold>2</bold></highlight>. The communication system according to <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein: 
<claim-text>the inquiry message or the service-providing message includes billing information of the service to be provided; and </claim-text>
<claim-text>said relay device 
<claim-text>stores the billing information corresponding to the user name corresponding to the assigned communication identifier; and </claim-text>
<claim-text>in a case where to send the service-providing message to said terminal, adds or sums the billing information of the service to be provided, included in the inquiry message or the service-providing message, to or with the billing information stored in association with the user name, so as to update the billing information stored in association with the user name. </claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00003">
<claim-text><highlight><bold>3</bold></highlight>. The communication system according to <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein: 
<claim-text>said terminal, said relay device and said service provider perform communications using TCP/IP (Transmission Control Protocol/Internet Protocol), and the communication identifier is specified based on an IP address and/or a port number. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00004">
<claim-text><highlight><bold>4</bold></highlight>. A relay device which is communicable with a terminal and a service provider, comprising: 
<claim-text>a user-name receiver which receives a user name sent from said terminal; </claim-text>
<claim-text>a communication-identifier assignor which assigns said terminal a communication identifier in association with the received user name; </claim-text>
<claim-text>a service-request message receiver which receives a service-request message, whose addresser corresponds to the assigned communication identifier and addressee corresponds to a communication identifier of said service provider and which is sent from said terminal; </claim-text>
<claim-text>a service-request message sender which sends the received service-request message to said service provider; </claim-text>
<claim-text>an inquiry-message receiver which receives an inquiry message for inquiring whether to provide a service to the communication identifier specified in the sent service-request message, the inquiry message being sent from said service provider; </claim-text>
<claim-text>a response-message sender which sends, to said service provider, a response message specifying to provide a service in a case where the communication identifier specified in the received inquiry message is assigned in association with the received user name, and, if not, specifying not to provide a service; </claim-text>
<claim-text>a service-providing message receiver which receives a service-providing message for providing a service to the communication identifier assigned in association the received user name, said service-providing message being sent from said service provider; and </claim-text>
<claim-text>a service-providing message sender which sends the received service-providing message to said terminal. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00005">
<claim-text><highlight><bold>5</bold></highlight>. The relay device according to <dependent-claim-reference depends_on="CLM-00004">claim 4</dependent-claim-reference>, wherein 
<claim-text>the inquiry message or the service-providing message includes billing information of the service to be provided, and </claim-text>
<claim-text>said relay device further comprises 
<claim-text>a billing-information storage section which stores the billing information in association with the received user name; and </claim-text>
<claim-text>a billing-information updating section which adds or sums the billing information of the to-be-provided service included in the inquiry message or the service-providing message, to or with the billing information stored in association with the received user name, in a case where said service-providing message sender sends the service-providing message to said terminal, so as to update said billing-information storage section. </claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00006">
<claim-text><highlight><bold>6</bold></highlight>. The relay device according to <dependent-claim-reference depends_on="CLM-00005">claim 5</dependent-claim-reference>, wherein 
<claim-text>updating by said billing-information updating section is performed before sending of the response message by said response-message sender. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00007">
<claim-text><highlight><bold>7</bold></highlight>. The relay device according to <dependent-claim-reference depends_on="CLM-00005">claim 5</dependent-claim-reference>, wherein 
<claim-text>updating by said billing-information updating section is performed before sending of the service-providing message by said service-providing message sender. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00008">
<claim-text><highlight><bold>8</bold></highlight>. The relay device according to <dependent-claim-reference depends_on="CLM-00005">claim 5</dependent-claim-reference>, further including 
<claim-text>a service-received message receiver which receives a service-received message sent from said terminal, in a case where said terminal receives the service-providing message sent from said service-providing message sender, and wherein </claim-text>
<claim-text>updating by said billing-information updating section is performed after receiving of the service-received message by said service-received message receiver. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00009">
<claim-text><highlight><bold>9</bold></highlight>. The relay device according to <dependent-claim-reference depends_on="CLM-00004">claim 4</dependent-claim-reference>, further including 
<claim-text>an authentication-character-string generator/sender which generates an authentication character string and sends this to said terminal, in a case where the user name is received by said user-name receiver; </claim-text>
<claim-text>a password-character string receiver which receives a password-character string sent from said terminal; and </claim-text>
<claim-text>a rule storage section which stores a rule for generating the password-character string from the authentication character string, in association with the user name, and wherein </claim-text>
<claim-text>said communication-identifier assignor assigns said terminal a communication identifier, in a case where the password-character string received by said password-character-string receiver is generated from the authentication character string generated by said authentication-character-string generator/sender, based on the rule stored in said rule storage section in association with the user name received by said user-name receiver. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00010">
<claim-text><highlight><bold>10</bold></highlight>. The relay device according to <dependent-claim-reference depends_on="CLM-00009">claim 9</dependent-claim-reference>, wherein; 
<claim-text>said communication-identifier assignor assigns said terminal a communication identifier, in a case where the user name is received by said user-name receiver; and </claim-text>
<claim-text>said relay device further comprises a communication-identifier invalidating section which invalidates the communication identifier assigned by said communication-identifier assignor to said terminal, in a case where the password-character string received by said password-character string receiver is not generated from the authentication character string generated by said authentication-character-string generator/sender, based on the rule stored in said rule storage section in association with the user name received by said user-name receiver. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00011">
<claim-text><highlight><bold>11</bold></highlight>. The relay device according to <dependent-claim-reference depends_on="CLM-00004">claim 4</dependent-claim-reference>, wherein 
<claim-text>sending and receiving of the message is performed using TCP/IP (Transmission Control Protocol/Internet Protocol), and the communication identifier is specified based on an IP address and/or a port number. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00012">
<claim-text><highlight><bold>12</bold></highlight>. A relay device for relaying, to a communicating computer communications network, a message including information specifying a communication identifier of an addresser and a communication identifier of an addressee, said relay device comprising: 
<claim-text>a terminal communicator which is connected to a terminal and communicates with said terminal for messages; </claim-text>
<claim-text>a computer-communication-network communicator which is connected to said computer communications network and communicates with said computer-communications network for messages; </claim-text>
<claim-text>a communication-identifier assignor which assigns said terminal a communication identifier; and </claim-text>
<claim-text>an upward relay device which sends and relays a message, sent from said terminal via said terminal, to the computer communications network through said computer-communication-network communicator, in a case where a communication identifier of an addresser specified in information included in the message received from said terminal via said terminal communicator is a communication identifier assigned by said communication-identifier assignor and a communication identifier of an addressee specified in the information included in the message satisfies a relay condition, and does not send the message thereto, in a case where the relay condition is not satisfied. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00013">
<claim-text><highlight><bold>13</bold></highlight>. The relay device according to <dependent-claim-reference depends_on="CLM-00011">claim 12</dependent-claim-reference>, further including 
<claim-text>a relay-forbiddance-communication-identifier storage section which stores communication identifiers in advance, and wherein </claim-text>
<claim-text>the relay condition is satisfied in a case where the communication identifier of the addressee or addresser specified in the information included in the message is not included in the communication identifiers stored in advance in the relay-forbiddance-communication-identifier storage section. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00014">
<claim-text><highlight><bold>14</bold></highlight>. The relay device according to <dependent-claim-reference depends_on="CLM-00011">claim 13</dependent-claim-reference>, further including a user-name receiver which receives a user name from said terminal through said terminal communicator, and wherein: 
<claim-text>said relay-forbiddance-communications-identifier storage section stores a communication identifier in association with the user name received by said username receiver; and </claim-text>
<claim-text>the relay condition is satisfied in a case where the communication identifier of the addressee or addresser specified in the information included in the message is not included in the communication identifiers stored in said relay-forbiddance-communications-identifier storage section in advance in association with the user name. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00015">
<claim-text><highlight><bold>15</bold></highlight>. The relay device according to <dependent-claim-reference depends_on="CLM-00011">claim 12</dependent-claim-reference>, further including: 
<claim-text>a user-name receiver which receives a user name sent form said terminal via said terminal communicator; </claim-text>
<claim-text>an authentication-character-string generator/sender which generates an authentication character string, and sends this to said terminal through said terminal communicator; </claim-text>
<claim-text>a password-character-string receiver which receives a password-character string sent from said terminal through said terminal communicator; and </claim-text>
<claim-text>a rule storage section which stores a rule for generating the password-character string from the authentication character string, in association with the user name, and wherein </claim-text>
<claim-text>said communication-identifier assignor assigns said terminal a communication identifier, in a case where the password-character string received by said password-character-string receiver is generated from the authentication character string generated by said authentication-character-string generator/sender based on the rule stored in said rule storage section in association with the user name received by said user-name receiver. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00016">
<claim-text><highlight><bold>16</bold></highlight>. The relay device according to <dependent-claim-reference depends_on="CLM-00011">claim 15</dependent-claim-reference>, wherein 
<claim-text>said communication-identifier assignor assigns said terminal a communication identifier, in a case where the user name is received by said username receiver, and </claim-text>
<claim-text>said relay device further includes 
<claim-text>a communication-identifier invalidating section which invalidates the communication identifier assigned to said terminal by said communication-identifier assignor, in a case where the password-character string received by said password-character-string receiver is not generated from the authentication character string generated by said authentication-character-string generator/sender based on the rule stored in said rule storage section in association with the user name received by said user-name receiver. </claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00017">
<claim-text><highlight><bold>17</bold></highlight>. The relay device according to <dependent-claim-reference depends_on="CLM-00011">claim 12</dependent-claim-reference>, wherein 
<claim-text>said computer communications network perform communications using TCP/IP (Transmission Control Protocol/Internet Protocol), and the communication identifier is specified based on an IP address and/or a port number. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00018">
<claim-text><highlight><bold>18</bold></highlight>. The relay device according to <dependent-claim-reference depends_on="CLM-00011">claim 12</dependent-claim-reference>, wherein 
<claim-text>said communication-identifier assignor selects a communication identifier, which is currently not assigned to any other terminals, from a plurality of communication identifiers which are set in advance, and assigns said terminal this communication identifier. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00019">
<claim-text><highlight><bold>19</bold></highlight>. The relay device according to <dependent-claim-reference depends_on="CLM-00011">claim 12</dependent-claim-reference>, including, in place of said upward relay device or in addition to said upward relay device, 
<claim-text>a downward relay device which sends and relays a message, sent from said computer communication network and received through said computer-communication-network communicator, to said terminal through said terminal communicator, in a case where a communication identifier of an addressee specified in information included in the message is a communication identifier assigned by said communication-identifier assignor, and a communication identifier of an addresser specified in the information included in the message satisfies the relay condition. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00020">
<claim-text><highlight><bold>20</bold></highlight>. The relay device according to <dependent-claim-reference depends_on="CLM-00011">claim 19</dependent-claim-reference>, further including 
<claim-text>a relay-forbiddance-communications-identifier storage section which stores communication identifiers in advance, and wherein </claim-text>
<claim-text>the relay condition is satisfied in a case where the communication identifier of the addressee or addresser specified in the information included in the message is not included in the communication identifiers stored in advance in said relay-forbiddance-communications-identifier storage section. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00021">
<claim-text><highlight><bold>21</bold></highlight>. The relay device according to <dependent-claim-reference depends_on="CLM-00022">claim 20</dependent-claim-reference>, further including a user-name receiver which receives a user name sent from said terminal through said terminal communicator, and wherein: 
<claim-text>said relay-forbiddance-communications-identifier storage section stores a communication identifier in advance in association with the user name received by said user-name receiver; and </claim-text>
<claim-text>the relay condition is satisfied in a case where the communication identifier of the addressee or addresser specified in the information included in the message is not included in the communication identifiers stored in advance in said relay-forbiddance-communication-identifier storage section in association with the user name. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00022">
<claim-text><highlight><bold>22</bold></highlight>. A service provider which is communicable with a relay device, comprising: 
<claim-text>a service-request message receiver which receives a service-request message, whose addresser corresponds to a communication identifier assigned by said relay device and whose addressee corresponds to a communication identifier of said service provider, from said relay device; </claim-text>
<claim-text>an inquiry-message sender which sends, to said relay device, an inquiry message for inquiry whether to provide a service to the communication identifier specified in the service-request message received by said service-request message receiver; </claim-text>
<claim-text>a response-message receiver which receives a response message specifying whether to provide a service, the response message being sent from said relay device; and </claim-text>
<claim-text>a service-providing message sender which sends, to said relay device, a service-providing message whose addressee corresponds to the communication identifier specified in the service-request message and whose addresser is said service provider, in a case where the response message received by said response-message receiver specifies to provide a service. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00023">
<claim-text><highlight><bold>23</bold></highlight>. The service provider according to <dependent-claim-reference depends_on="CLM-00022">claim 22</dependent-claim-reference>, wherein 
<claim-text>the inquiry message or the service-providing message includes billing information of the service to be provided. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00024">
<claim-text><highlight><bold>24</bold></highlight>. The service provider according to <dependent-claim-reference depends_on="CLM-00022">claim 22</dependent-claim-reference>, wherein 
<claim-text>sending and receiving of the message is performed using TCP/IP (Transmission Control Protocol/Internet Protocol), and the communication identifier is specified based on an IP address and/or a port number. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00025">
<claim-text><highlight><bold>25</bold></highlight>. A relaying method of relaying communications between a terminal and a service provider, comprising: 
<claim-text>a user-name receiving step of receiving a user name sent from said terminal; </claim-text>
<claim-text>a communication-identifier assigning step of assigning said terminal a communication identifier in association with the received user name; </claim-text>
<claim-text>a service-request message receiving step of receiving a service-request message, whose addresser corresponds to the assigned communication identifier and addressee corresponds to a communication identifier of said service provider, and which is sent from said terminal; </claim-text>
<claim-text>a service-request message sending step of sending the received service-request message to said service provider; an inquiry-message receiving step of receiving, from said service provider, an inquiry message for inquiring whether to provide a service to a communication identifier specified in the sent service-request message, the inquiry message being sent from said service provider; </claim-text>
<claim-text>a response-message sending step of sending, to said service provider, a response message specifying to provide a service in a case where the communication identifier specified in the received inquiry message is assigned in association with the received user name, and, if not, specifying not to provide a service; </claim-text>
<claim-text>a service-providing message receiving step of receiving, from said service provider, a service-providing message for providing a service to the communication identifier assigned in association with the received user name; and </claim-text>
<claim-text>a service-providing message sending step of sending the received service-providing message to said terminal. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00026">
<claim-text><highlight><bold>26</bold></highlight>. The relaying method of relaying according to <dependent-claim-reference depends_on="CLM-00022">claim 25</dependent-claim-reference>, wherein: 
<claim-text>the inquiry message or the service-providing message includes billing information of the service to be provided; and </claim-text>
<claim-text>said method further comprises 
<claim-text>a billing-information updating step of, in a case where the service-providing message is sent to said terminal at said service-providing message sending step, updating the billing information if there is billing information stored in association with the received user name, by adding the billing information of the service to be provided and specified in the inquiry message or the service-providing message therewith, and, if there is not such information, storing the billing information in association with the user name. </claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00027">
<claim-text><highlight><bold>27</bold></highlight>. The relaying method according to <dependent-claim-reference depends_on="CLM-00022">claim 26</dependent-claim-reference>, wherein 
<claim-text>updating at said billing-information updating step is performed before sending of the response message at said response-message sending step. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00028">
<claim-text><highlight><bold>28</bold></highlight>. The relaying method according to <dependent-claim-reference depends_on="CLM-00022">claim 26</dependent-claim-reference>, wherein 
<claim-text>updating at said billing-information updating step is performed before sending of the service-providing message at said service-providing message sending step. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00029">
<claim-text><highlight><bold>29</bold></highlight>. The relaying method according to <dependent-claim-reference depends_on="CLM-00022">claim 26</dependent-claim-reference>, further including 
<claim-text>a service-received message receiving step of receiving a service-received message sent from said terminal, in a case where said terminal receives the service-providing message sent at said service-providing message sending step, and wherein </claim-text>
<claim-text>updating at said billing-information updating step is performed after receiving of the service-received message at said service-received message receiving step. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00030">
<claim-text><highlight><bold>30</bold></highlight>. The relaying method according to <dependent-claim-reference depends_on="CLM-00022">claim 25</dependent-claim-reference>, further including: 
<claim-text>an authentication-character-string generating/sending step of generating an authentication character string and sending this to said terminal, in a case where the user name is received at said user-name receiving step; and </claim-text>
<claim-text>a password-character string receiving step of receiving a password-character string sent from said terminal, and wherein </claim-text>
<claim-text>said communication-identifier assigning step assigns said terminal a communication identifier, in a case where the password-character string received at said password-character string receiving step is generated from the authentication character string generated at said authentication-character-string generating/sending step, based on a rule stored in advance in association with the user name received at said user-name receiving step. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00031">
<claim-text><highlight><bold>31</bold></highlight>. The relaying method according to <dependent-claim-reference depends_on="CLM-00033">claim 30</dependent-claim-reference>, wherein: 
<claim-text>said communication-identifier assigning step assigns said terminal a communication identifier, in a case where a user name is received at said user-name receiving step; and </claim-text>
<claim-text>said method further includes 
<claim-text>a communication-identifier invalidating step of invalidating the communication identifier assigned to said terminal at said communication-identifier assigning step, in a case where the password-character string received at said password-character-string receiving step is not generated from the authentication character string generated at said authentication-character-string generating/sending step based on the rule stored in advance in association with the user name received at said user-name receiving step. </claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00032">
<claim-text><highlight><bold>32</bold></highlight>. A relaying method of relaying a message to a computer communication network for performing communications for messages including information specifying a communication identifier of an addresser and a communication identifier of an addressee, said method including: 
<claim-text>a communication-identifier assigning step of assigning a terminal a communication identifier; </claim-text>
<claim-text>a terminal-receiving step of receiving a message sent from said terminal; and </claim-text>
<claim-text>an upward relaying step of sending and relaying a message to said computer communication network in a case where a communication identifier of an addresser specified in information included in the message received at said terminal-receiving step is a communication identifier assigned at said communication-identifier assigning step, and a communication identifier of an addressee specified in the information included in the message satisfies a relay condition, and not sending the message thereto in a case where the relay condition is not satisfied. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00033">
<claim-text><highlight><bold>33</bold></highlight>. The relaying method according to <dependent-claim-reference depends_on="CLM-00033">claim 32</dependent-claim-reference>, wherein 
<claim-text>the relay condition is satisfied in a case where the communication identifier of the addressee or addresser specified in the information included in the message is not any of communication identifiers stored in advance. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00034">
<claim-text><highlight><bold>34</bold></highlight>. The relaying method according to <dependent-claim-reference depends_on="CLM-00033">claim 32</dependent-claim-reference>, further including 
<claim-text>a user-name receiving step of receiving a user name sent from said terminal, and wherein </claim-text>
<claim-text>the relay condition is satisfied, in a case where the communication identifier of the addressee or addresser specified in the information included in the message is not any of communications identifiers stored in advance in association with the user name. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00035">
<claim-text><highlight><bold>35</bold></highlight>. The relaying method according to <dependent-claim-reference depends_on="CLM-00033">claim 32</dependent-claim-reference>, further including: 
<claim-text>a user-name receiving step of receiving a user name sent from said terminal; </claim-text>
<claim-text>an authentication-character-string generating/sending step of generating an authentication character string and sending this to said terminal; </claim-text>
<claim-text>a password-character-string receiving step of receiving a password-character string sent from said terminal, and wherein </claim-text>
<claim-text>said communication-identifier assigning step assigns said terminal a communication identifier, in a case where the password-character string received at said password-character string receiving step is generated from the authentication character string generated at said authentication-character-string generating/sending step based on a rule stored in advance in association with the user name received at said user-name receiving step. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00036">
<claim-text><highlight><bold>36</bold></highlight>. The relaying method according to <dependent-claim-reference depends_on="CLM-00033">claim 35</dependent-claim-reference>, wherein: 
<claim-text>said communication-identifier assigning step assigns said terminal a communication identifier, in a case where the user name is received at said username receiving step; and </claim-text>
<claim-text>said relaying method further includes a communication-identifier invalidating step of invalidating a communication identifier assigned to said terminal at said communication-identifier assigning step, in a case where the password-character string received at said password-character-string receiving step is not generated from the authentication character string generated at said authentication-character-string generating/sending step, based on the rule stored in advance in association with the user name received at said user-name receiving step. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00037">
<claim-text><highlight><bold>37</bold></highlight>. The relaying method according to <dependent-claim-reference depends_on="CLM-00033">claim 32</dependent-claim-reference>, further including, in place of said terminal-receiving step and said upward relaying step or in addition to these: 
<claim-text>a computer-communication-network receiving step of receiving a message sent from said computer communication network; and </claim-text>
<claim-text>a downward relaying step of sending and relaying a message, in a case where a communication identifier of an addressee specified in information included in the message received at said computer-communication-network receiving step is a communication identifier assigned at said communication-identifier assigning step, and a communication identifier specified in the information included in the message satisfies the relay condition. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00038">
<claim-text><highlight><bold>38</bold></highlight>. The relaying method according to <dependent-claim-reference depends_on="CLM-00033">claim 37</dependent-claim-reference>, wherein 
<claim-text>the relay condition is satisfied, in a case where the communication identifier of the addressee or addresser specified in the information included in the message is not any of communication identifiers stored in advance. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00039">
<claim-text><highlight><bold>39</bold></highlight>. The relaying method according to <dependent-claim-reference depends_on="CLM-00033">claim 37</dependent-claim-reference>, further including a username receiving step of receiving the user name sent from said terminal, and wherein 
<claim-text>the relay condition is satisfied, in a case where the communication identifier of the addressee or addresser specified in the information included in the message is not any of communication identifiers stored in advance in association with the user name. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00040">
<claim-text><highlight><bold>40</bold></highlight>. A service providing method of providing a service through a relay device, comprising: 
<claim-text>a service-request message receiving step of receiving a service-request message, whose addresser corresponds to the communication identifier assigned by said relay device and addressee corresponds to a communication identifier of said service provider, and which is sent from said relay device; </claim-text>
<claim-text>an inquiry-message sending step of sending, to said relay device, an inquiry message for inquiring whether to provide a service to the communication identifier specified in the service-request message received at said service-request message receiving step; </claim-text>
<claim-text>a response-message receiving step of receiving a response message specifying whether to provide a service, said response message being sent from said relay device; and </claim-text>
<claim-text>a service-providing message sending step of sending, to said relay device, a service-providing message whose addressee corresponds to the communication identifier specified in the service-request message and addresser is said service provider, in a case where the response message received at said response-message receiving step specifies to provide a service. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00041">
<claim-text><highlight><bold>41</bold></highlight>. A program product for controlling a computer, which is communicable with a terminal and a service provider, to serve as: 
<claim-text>a user-name receiver which receives a user name sent from said terminal; </claim-text>
<claim-text>a communication-identifier assignor which assigns said terminal a communication identifier in association with the received user name; </claim-text>
<claim-text>a service-request message receiver which receives a service-request message, whose addresser corresponds to the assigned communication identifier and addressee corresponds to a communication identifier of said service provider, and which is sent from said terminal; </claim-text>
<claim-text>a service-request message sender which sends the received service-request message to said service provider; </claim-text>
<claim-text>an inquiry-message receiver which receives an inquiry message for inquiring whether to provide a service to a communication identifier specified in the sent service-request message, the inquiry message being sent from said service provider; </claim-text>
<claim-text>a response-message sender which sends, to said service provider, a response message specifying to provide a service in a case where the communication identifier specified in the received inquiry message is assigned in association with the received user name, and, if not, specifying not to provide a service; </claim-text>
<claim-text>a service-providing message receiver which receives a service-providing message for providing a service to the communication identifier assigned in association with the received user name, the service-providing message being sent from said service provider; and </claim-text>
<claim-text>a service-providing message sender which sends the received service-providing message to said terminal. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00042">
<claim-text><highlight><bold>42</bold></highlight>. The program product according to <dependent-claim-reference depends_on="CLM-00044">claim 41</dependent-claim-reference>, wherein 
<claim-text>the inquiry message or the service-providing message includes billing information of the service to be provided, and said program product for controlling said computer to further serve as: </claim-text>
<claim-text>a billing-information storage section which stores billing information in association with the received user name; and </claim-text>
<claim-text>a billing-information updating section which updates said billing-information storage section, by adding or summing billing information of the service to be provided specified in the inquiry message or the service-providing message into said billing-information storage section in association with the received user name, in a case where the service-providing message is sent to said terminal by said service-providing message sender. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00043">
<claim-text><highlight><bold>43</bold></highlight>. The program product according to <dependent-claim-reference depends_on="CLM-00044">claim 42</dependent-claim-reference>, wherein, in said computer, 
<claim-text>updating by said billing-information updating section is performed before sending of the response message by said response-message sending section. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00044">
<claim-text><highlight><bold>44</bold></highlight>. The program product according to <dependent-claim-reference depends_on="CLM-00044">claim 42</dependent-claim-reference>, wherein, in said computer, 
<claim-text>updating by said billing-information updating section is performed before sending of the service-providing message by said service-providing message sender. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00045">
<claim-text><highlight><bold>45</bold></highlight>. The program product according to <dependent-claim-reference depends_on="CLM-00044">claim 42</dependent-claim-reference>, for controlling said computer to further serve as 
<claim-text>a service-received message receiver which receives a service-received message sent from said terminal, in a case where said terminal receives the service-providing message sent by said service-providing message sender, and wherein, in said computer, </claim-text>
<claim-text>updating by said billing-information updating section is performed after receiving of the service-received message by said service-received message receiver. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00046">
<claim-text><highlight><bold>46</bold></highlight>. The program product according to <dependent-claim-reference depends_on="CLM-00044">claim 41</dependent-claim-reference>, for controlling said computer to further serve as: 
<claim-text>an authentication-character string generator/sender which generates an authentication character string and sends this to said terminal, in a case where the user name is received by said user-name receiver; </claim-text>
<claim-text>a password-character-string receiver which receives a password-character string sent from said terminal; and </claim-text>
<claim-text>a rule storage section which stores a rule for generating the password-character string from the authentication character string, in association with the user name, and wherein, in said computer, </claim-text>
<claim-text>said communication-identifier assignor assigns said terminal a communication identifier, in a case where the password-character string is generated by said password-character-string receiver from the authentication character string generated by said authentication-character-string generator/sender, based on the rule stored in said rule storage section in association with the user name received by said user-name receiver. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00047">
<claim-text><highlight><bold>47</bold></highlight>. The program product according to <dependent-claim-reference depends_on="CLM-00044">claim 46</dependent-claim-reference>, wherein, in said computer, 
<claim-text>said communication-identifier assignor assigns said terminal a communication identifier, in a case where the user name is received by said user-name receiver, and said program product controlling said computer to further serve as </claim-text>
<claim-text>a communication-identifier invalidating section which invalidates the communication identifier assigned by said communication-identifier assignor to said terminal, in a case where the password-character string received by said password-character-string receiver is not generated from the authentication character string generated by said authentication-character-string generator/sender, based on the rule stored in said rule storage section in association with the user name received by said user-name receiver. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00048">
<claim-text><highlight><bold>48</bold></highlight>. A program product for controlling a computer, which is communicable with a computer communication network for performing communications for messages including information specifying a communication identifier of an addresser and a communication identifier of an addressee, to serve as: 
<claim-text>a terminal communicator which is connected to said terminal and communicates with said terminal for messages; </claim-text>
<claim-text>a computer-communication-network communicator which is connected to said computer communication network and communicates with said computer communication network for messages; </claim-text>
<claim-text>a communication-identifier assignor which assigns said terminal a communication identifier; and </claim-text>
<claim-text>an upward relay device which sends and relays a message to said computer communication network through said computer-communication network communicator, in a case where a communication identifier of an addresser specified in information included in the message sent from said terminal and received through said terminal communicator is a communication identifier assigned by said communication-identifier assignor, and a communication identifier of an addressee specified in the information included in the message satisfies a relay condition, and which does not send the message thereto, in a case where the relay condition is not satisfied. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00049">
<claim-text><highlight><bold>49</bold></highlight>. The program product according to <dependent-claim-reference depends_on="CLM-00044">claim 48</dependent-claim-reference>, for controlling said computer to further serve as 
<claim-text>a relay-forbiddance-communications-identifier storage section which stores communication identifiers in advance, and wherein, in said computer, </claim-text>
<claim-text>the relay condition is satisfied, in a case where the communication identifier of the addressee or addresser specified in the information included in the message is not included in the communication identifiers stored in advance in said relay-forbiddance-communications-identifier storage section. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00050">
<claim-text><highlight><bold>50</bold></highlight>. The program product according to <dependent-claim-reference depends_on="CLM-00044">claim 49</dependent-claim-reference>, for controlling said computer to further serve as 
<claim-text>a user-name receiver which receives a user name sent from said terminal through said terminal communicator, and, in said computer, wherein </claim-text>
<claim-text>said relay-forbiddance-communications-identifier storage section stores communication identifiers in advance in association with the user name received by said user-name receiver, and </claim-text>
<claim-text>the relay condition is satisfied, in a case where the communication identifier of the addressee or addresser specified in the information included in the message is not included in the communication identifiers stored in advance in associa4tion with the user name in said relay-forbiddance-communications-identifier storage section. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00051">
<claim-text><highlight><bold>51</bold></highlight>. The program product according to <dependent-claim-reference depends_on="CLM-00044">claim 48</dependent-claim-reference>, for controlling said computer to further serve as: 
<claim-text>a user-name receiver which receives a user name sent from said terminal through said terminal communicator; </claim-text>
<claim-text>an authentication-character-string generator/sender which generates an authentication character string, and sends this to said terminal through said terminal communicator; </claim-text>
<claim-text>a password-character-string receiver which receives a password-character string sent from said terminal through said terminal communicator; and </claim-text>
<claim-text>a rule storage section which stores a rule for generating the password-character string from the authentication character string, in association with the user name, and wherein </claim-text>
<claim-text>said communication-identifier assignor assigns said terminal a communication identifier, in a case where the password-character string received by said password-character-string receiver is generated from the authentication character string generated by said authentication-character-string generator based on the rule stored in said rule storage section in association with the user name received by said user-name receiver. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00052">
<claim-text><highlight><bold>52</bold></highlight>. The program product according to <dependent-claim-reference depends_on="CLM-00055">claim 51</dependent-claim-reference>, wherein, in said computer, 
<claim-text>said communication-identifier assignor assigns said terminal a communication identifier, in a case where the user name is received by said user-name receiver, and said product controlling said computer to further serve as a </claim-text>
<claim-text>a communication-identifier invalidating section which invalidates the communication identifier assigned by said communication-identifier assignor to said terminal, in a case where the password-character string received by said password-character-string receiver is not generated from the authentication character string generated by said authentication-character-string generator/sender based on the rule stored in the rule storage section in association with the user name received by said user-name receiver. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00053">
<claim-text><highlight><bold>53</bold></highlight>. The program product according to <dependent-claim-reference depends_on="CLM-00044">claim 48</dependent-claim-reference>, for controlling said computer to serve as, in place of said upward relay device or in addition to said upward relay device, 
<claim-text>a downward relay device which sends and relays a message to said terminal through said terminal communicator, in a case where a communication identifier of an addressee specified in information included in the message sent from said computer communication network and received through said computer-communication network communicator is a communication identifier assigned by said communication-identifier assignor, and a communication identifier of an addresser specified in the information included in the message satisfies a relay condition. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00054">
<claim-text><highlight><bold>54</bold></highlight>. The program product according to <dependent-claim-reference depends_on="CLM-00055">claim 53</dependent-claim-reference>, for controlling said computer to further serve as 
<claim-text>a relay-forbiddance-communications-identifier storage section which stores communication identifiers in advance, and wherein, in said computer, </claim-text>
<claim-text>the relay condition is satisfied in a case where the communication identifier of the addressee or addresser specified in the information included in the message is not included in the communication identifiers stored in advance in said relay-forbiddance-communications-identifier storage section. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00055">
<claim-text><highlight><bold>55</bold></highlight>. The program product according to <dependent-claim-reference depends_on="CLM-00055">claim 54</dependent-claim-reference>, for controlling said computer to further serve as 
<claim-text>a user-name receiver which receives a user name sent from said terminal, and, wherein, in said computer: </claim-text>
<claim-text>said relay-forbiddance-communications-identifier storage section stores communication identifiers in association with the user name received by said username receiver; and </claim-text>
<claim-text>the relay condition is satisfied in a case where the communication identifier of the addressee or addresser specified in the information included in the message is not included in the communication identifiers stored in said relay-forbiddance-communication-identifier storage section in advance in association with the user name. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00056">
<claim-text><highlight><bold>56</bold></highlight>. A program product for controlling a computer, which is communicable with a relay device, to serve as a service provider, said product for further controlling said computer to serve as: 
<claim-text>a service-request message receiver which receives a service-request message whose addresser corresponds to a communication identifier assigned by said relay device and addressee corresponds to a communication identifier of said service provider, and which is sent from said relay device; </claim-text>
<claim-text>an inquiry-message sender which sends an inquiry message for inquiring whether to provide a service to a communication identifier specified in the service-request message received by said service-request message receiver, to said relay device; </claim-text>
<claim-text>a response-message receiver which receives a response message specifying whether to provide a service and which is sent from said relay device; and </claim-text>
<claim-text>a service-providing message sender which sends a service-providing message whose addressee corresponds to the communication identifier specified in the service-request message and addresser corresponds is said service provider, to said relay device, in a case where the response message received by said response-message receiver specifies to provide the service. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00057">
<claim-text><highlight><bold>57</bold></highlight>. The program product according to <dependent-claim-reference depends_on="CLM-00055">claim 56</dependent-claim-reference>, wherein 
<claim-text>the inquiry message or the service-providing message include billing information of the service to be provided.</claim-text>
</claim-text>
</claim>
</subdoc-claims>
<subdoc-drawings id="DRAWINGS">
<heading lvl="0" align="CENTER">Drawings</heading>
<representative-figure>4</representative-figure>
<figure id="figure-D00000">
<image id="EMI-D00000" file="US20030005049A1-20030102-D00000.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00001">
<image id="EMI-D00001" file="US20030005049A1-20030102-D00001.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00002">
<image id="EMI-D00002" file="US20030005049A1-20030102-D00002.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00003">
<image id="EMI-D00003" file="US20030005049A1-20030102-D00003.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00004">
<image id="EMI-D00004" file="US20030005049A1-20030102-D00004.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00005">
<image id="EMI-D00005" file="US20030005049A1-20030102-D00005.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00006">
<image id="EMI-D00006" file="US20030005049A1-20030102-D00006.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00007">
<image id="EMI-D00007" file="US20030005049A1-20030102-D00007.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00008">
<image id="EMI-D00008" file="US20030005049A1-20030102-D00008.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00009">
<image id="EMI-D00009" file="US20030005049A1-20030102-D00009.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00010">
<image id="EMI-D00010" file="US20030005049A1-20030102-D00010.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00011">
<image id="EMI-D00011" file="US20030005049A1-20030102-D00011.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00012">
<image id="EMI-D00012" file="US20030005049A1-20030102-D00012.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00013">
<image id="EMI-D00013" file="US20030005049A1-20030102-D00013.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00014">
<image id="EMI-D00014" file="US20030005049A1-20030102-D00014.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00015">
<image id="EMI-D00015" file="US20030005049A1-20030102-D00015.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00016">
<image id="EMI-D00016" file="US20030005049A1-20030102-D00016.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00017">
<image id="EMI-D00017" file="US20030005049A1-20030102-D00017.TIF" imf="TIFF" ti="DR"/>
</figure>
</subdoc-drawings>
</patent-application-publication>
