<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE patent-application-publication SYSTEM "pap-v16-2002-01-01.dtd" [
<!ENTITY US20030005106A1-20030102-D00000.TIF SYSTEM "US20030005106A1-20030102-D00000.TIF" NDATA TIF>
<!ENTITY US20030005106A1-20030102-D00001.TIF SYSTEM "US20030005106A1-20030102-D00001.TIF" NDATA TIF>
<!ENTITY US20030005106A1-20030102-D00002.TIF SYSTEM "US20030005106A1-20030102-D00002.TIF" NDATA TIF>
<!ENTITY US20030005106A1-20030102-D00003.TIF SYSTEM "US20030005106A1-20030102-D00003.TIF" NDATA TIF>
<!ENTITY US20030005106A1-20030102-D00004.TIF SYSTEM "US20030005106A1-20030102-D00004.TIF" NDATA TIF>
<!ENTITY US20030005106A1-20030102-D00005.TIF SYSTEM "US20030005106A1-20030102-D00005.TIF" NDATA TIF>
<!ENTITY US20030005106A1-20030102-D00006.TIF SYSTEM "US20030005106A1-20030102-D00006.TIF" NDATA TIF>
<!ENTITY US20030005106A1-20030102-D00007.TIF SYSTEM "US20030005106A1-20030102-D00007.TIF" NDATA TIF>
<!ENTITY US20030005106A1-20030102-D00008.TIF SYSTEM "US20030005106A1-20030102-D00008.TIF" NDATA TIF>
<!ENTITY US20030005106A1-20030102-D00009.TIF SYSTEM "US20030005106A1-20030102-D00009.TIF" NDATA TIF>
<!ENTITY US20030005106A1-20030102-D00010.TIF SYSTEM "US20030005106A1-20030102-D00010.TIF" NDATA TIF>
<!ENTITY US20030005106A1-20030102-D00011.TIF SYSTEM "US20030005106A1-20030102-D00011.TIF" NDATA TIF>
<!ENTITY US20030005106A1-20030102-D00012.TIF SYSTEM "US20030005106A1-20030102-D00012.TIF" NDATA TIF>
<!ENTITY US20030005106A1-20030102-D00013.TIF SYSTEM "US20030005106A1-20030102-D00013.TIF" NDATA TIF>
<!ENTITY US20030005106A1-20030102-D00014.TIF SYSTEM "US20030005106A1-20030102-D00014.TIF" NDATA TIF>
<!ENTITY US20030005106A1-20030102-D00015.TIF SYSTEM "US20030005106A1-20030102-D00015.TIF" NDATA TIF>
<!ENTITY US20030005106A1-20030102-D00016.TIF SYSTEM "US20030005106A1-20030102-D00016.TIF" NDATA TIF>
<!ENTITY US20030005106A1-20030102-D00017.TIF SYSTEM "US20030005106A1-20030102-D00017.TIF" NDATA TIF>
<!ENTITY US20030005106A1-20030102-D00018.TIF SYSTEM "US20030005106A1-20030102-D00018.TIF" NDATA TIF>
<!ENTITY US20030005106A1-20030102-D00019.TIF SYSTEM "US20030005106A1-20030102-D00019.TIF" NDATA TIF>
<!ENTITY US20030005106A1-20030102-D00020.TIF SYSTEM "US20030005106A1-20030102-D00020.TIF" NDATA TIF>
<!ENTITY US20030005106A1-20030102-D00021.TIF SYSTEM "US20030005106A1-20030102-D00021.TIF" NDATA TIF>
<!ENTITY US20030005106A1-20030102-D00022.TIF SYSTEM "US20030005106A1-20030102-D00022.TIF" NDATA TIF>
<!ENTITY US20030005106A1-20030102-D00023.TIF SYSTEM "US20030005106A1-20030102-D00023.TIF" NDATA TIF>
<!ENTITY US20030005106A1-20030102-D00024.TIF SYSTEM "US20030005106A1-20030102-D00024.TIF" NDATA TIF>
<!ENTITY US20030005106A1-20030102-D00025.TIF SYSTEM "US20030005106A1-20030102-D00025.TIF" NDATA TIF>
<!ENTITY US20030005106A1-20030102-D00026.TIF SYSTEM "US20030005106A1-20030102-D00026.TIF" NDATA TIF>
<!ENTITY US20030005106A1-20030102-D00027.TIF SYSTEM "US20030005106A1-20030102-D00027.TIF" NDATA TIF>
<!ENTITY US20030005106A1-20030102-D00028.TIF SYSTEM "US20030005106A1-20030102-D00028.TIF" NDATA TIF>
<!ENTITY US20030005106A1-20030102-D00029.TIF SYSTEM "US20030005106A1-20030102-D00029.TIF" NDATA TIF>
<!ENTITY US20030005106A1-20030102-D00030.TIF SYSTEM "US20030005106A1-20030102-D00030.TIF" NDATA TIF>
<!ENTITY US20030005106A1-20030102-D00031.TIF SYSTEM "US20030005106A1-20030102-D00031.TIF" NDATA TIF>
<!ENTITY US20030005106A1-20030102-D00032.TIF SYSTEM "US20030005106A1-20030102-D00032.TIF" NDATA TIF>
<!ENTITY US20030005106A1-20030102-D00033.TIF SYSTEM "US20030005106A1-20030102-D00033.TIF" NDATA TIF>
<!ENTITY US20030005106A1-20030102-D00034.TIF SYSTEM "US20030005106A1-20030102-D00034.TIF" NDATA TIF>
<!ENTITY US20030005106A1-20030102-D00035.TIF SYSTEM "US20030005106A1-20030102-D00035.TIF" NDATA TIF>
<!ENTITY US20030005106A1-20030102-D00036.TIF SYSTEM "US20030005106A1-20030102-D00036.TIF" NDATA TIF>
]>
<patent-application-publication>
<subdoc-bibliographic-information>
<document-id>
<doc-number>20030005106</doc-number>
<kind-code>A1</kind-code>
<document-date>20030102</document-date>
</document-id>
<publication-filing-type>new</publication-filing-type>
<domestic-filing-data>
<application-number>
<doc-number>10185233</doc-number>
</application-number>
<application-number-series-code>10</application-number-series-code>
<filing-date>20020628</filing-date>
</domestic-filing-data>
<foreign-priority-data>
<priority-application-number>
<doc-number>2000-332891</doc-number>
</priority-application-number>
<filing-date>20001031</filing-date>
<country-code>JP</country-code>
</foreign-priority-data>
<technical-information>
<classification-ipc>
<classification-ipc-primary>
<ipc>G06F015/173</ipc>
</classification-ipc-primary>
<classification-ipc-edition>07</classification-ipc-edition>
</classification-ipc>
<classification-us>
<classification-us-primary>
<uspc>
<class>709</class>
<subclass>223000</subclass>
</uspc>
</classification-us-primary>
</classification-us>
<title-of-invention>Communication control apparatus and method</title-of-invention>
</technical-information>
<continuity-data>
<continuations>
<continuation-of>
<parent-child>
<child>
<document-id>
<doc-number>10185233</doc-number>
<kind-code>A1</kind-code>
<document-date>20020628</document-date>
</document-id>
</child>
<parent>
<document-id>
<doc-number>PCT/JP01/09505</doc-number>
<document-date>20011030</document-date>
<country-code>US</country-code>
</document-id>
</parent>
<parent-status>UNKNOWN</parent-status>
</parent-child>
</continuation-of>
</continuations>
</continuity-data>
<inventors>
<first-named-inventor>
<name>
<given-name>Takashi</given-name>
<family-name>Isoda</family-name>
</name>
<residence>
<residence-non-us>
<city>Kanagawa</city>
<country-code>JP</country-code>
</residence-non-us>
</residence>
<authority-applicant>INV</authority-applicant>
</first-named-inventor>
</inventors>
<correspondence-address>
<name-1>FITZPATRICK CELLA HARPER &amp; SCINTO</name-1>
<name-2></name-2>
<address>
<address-1>30 ROCKEFELLER PLAZA</address-1>
<city>NEW YORK</city>
<state>NY</state>
<postalcode>10112</postalcode>
<country>
<country-code>US</country-code>
</country>
</address>
</correspondence-address>
</subdoc-bibliographic-information>
<subdoc-abstract>
<paragraph id="A-0001" lvl="0">An initiator has logical devices A, B and C. In the directory structure of the config ROM showing the unit structure, instance directories A, B and C are made; initiator unit directories <highlight><bold>1, 2, </bold></highlight>and <highlight><bold>3 </bold></highlight>are made under the respective instance directories A, B and C; and feature directories showing the functions provided by the respective logical devices are made under the initiator unit directories <highlight><bold>1, 2, </bold></highlight>and <highlight><bold>3. </bold></highlight>This structure allows the functions available from the initiator to be shown and allows the available functions to be known to another node such as a target device. </paragraph>
</subdoc-abstract>
<subdoc-description>
<summary-of-invention>
<section>
<heading lvl="1">TECHNICAL FIELD </heading>
<paragraph id="P-0001" lvl="0"><number>&lsqb;0001&rsqb;</number> The present invention relates to a communication control apparatus and method for controlling data transfer between two devices and, more particularly to a communication control apparatus and method using IEEE 1394 as a communication protocol. </paragraph>
</section>
<section>
<heading lvl="1">BACKGROUND ART </heading>
<paragraph id="P-0002" lvl="0"><number>&lsqb;0002&rsqb;</number> One of communication protocols defined by IEEE (Instituted of Electrical and Electronics Engineers) is IEEE 1394. A communication scheme defined by IEEE 1394 realizes higher-speed bidirectional communication, compared to a handshake scheme. A device connected by an IEEE 1394 serial bus which is a memory bus model interface can access an address designated by a partner. IEEE 1394 defines the protocols of physical and link layers for wider applications, and does not define detailed protocols for each device. </paragraph>
<paragraph id="P-0003" lvl="0"><number>&lsqb;0003&rsqb;</number> An SBP-2 (Serial Bus Protocol-2) protocol is defined as the protocol of a transport layer utilizing IEEE 1394 as the physical/link layer. SBP-2 fully exploits the features of an IEEE 1394 memory bus model, and a command receiving side can receive data from a transmitting side at the convenience of the receiving side in accordance with SBP-2. Two devices connected by SBP-2 are a command transmitting side called an initiator and a receiving side called a target, and the initiator takes the initiative to start communication. Log-in operation can be performed by only the initiator, and the target operates in response to an action from the initiator in principle. </paragraph>
<paragraph id="P-0004" lvl="0"><number>&lsqb;0004&rsqb;</number> According to SBP-2, when the initiator logs in, the initiator creates a block ORB which describes a memory address or the like used to exchange data, and notifies the target of the ORB address. The target reads the notified ORB, and reads out data from the described address, or writes data at the address, thereby realizing exchange of data. The ORB address is queued in the target, and its response is queued in the initiator. The target sequentially processes queued ORBs, and sends back responses to the initiator. </paragraph>
<paragraph id="P-0005" lvl="0"><number>&lsqb;0005&rsqb;</number> An IEEE 1394.3 standard which defines reverse log-in which prompts the initiator from the target to log in is also proposed as a protocol of the transport layer in addition to SBP-2. In IEEE 1394.3, log-in operation can be executed by only the initiator, and the target operates in response to an action from the initiator in principle. However, the target can perform reverse log-in operation which prompts the initiator to log in. </paragraph>
<paragraph id="P-0006" lvl="0"><number>&lsqb;0006&rsqb;</number> Since the initiator takes the initiative, the standard causes the initiator to provide various services, and the target designates and receives a desired service. </paragraph>
<paragraph id="P-0007" lvl="0"><number>&lsqb;0007&rsqb;</number> The IEEE 1394 standard assumes that nodes connected to each other constitute one device. This is because IEEE 1394 inherits, e.g., a SCSI definition which assumes each node as a single device in order to eliminate cumbersome management of a plurality of devices within one node. </paragraph>
<paragraph id="P-0008" lvl="0"><number>&lsqb;0008&rsqb;</number> For this reason, IEEE 1394.3 defines that one physical node (representing a node connected to a 1394 serial bus; to be also referred to as a physical device) has only one initiator unit directory for defining a logical device (unit) at the node of an initiator. This definition inhibits the initiator from having two or more unit directories. If a given physical device has a plurality of logical devices which constitute an IEEE 1394.3 physical device, and plays a role of an initiator, the relationship between the physical device, the logical devices, and services cannot be expressed by a proper hierarchical structure to another device. </paragraph>
<paragraph id="P-0009" lvl="0"><number>&lsqb;0009&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 19</cross-reference> shows an example of the unit directory. IEEE 1394.3 allows each node serving as an initiator defined by IEEE 1394.3 to have only one unit directory with at least entries as shown in <cross-reference target="DRAWINGS">FIG. 18</cross-reference>. Services providable by the node are described by a description method defined by IEEE 1394.3 in a feature directory at a location whose address is specified by a feature directory offset contained in the unit directory. The node can announce the providable services to another node via IEEE 1394.3. <cross-reference target="DRAWINGS">FIG. 20</cross-reference> shows an example of this format. </paragraph>
<paragraph id="P-0010" lvl="0"><number>&lsqb;0010&rsqb;</number> When each node which can function as an IEEE 1394.3 initiator has the root directory, instance directory, unit directory, and feature directory of the IEEE 1394.3 initiator, an example of the hierarchical structure is shown in <cross-reference target="DRAWINGS">FIG. 21</cross-reference>. Note that the description methods of the bus information, root directory, and instance directory are defined by IEEE 1212R, and a detailed description thereof will be omitted. </paragraph>
<paragraph id="P-0011" lvl="0"><number>&lsqb;0011&rsqb;</number> IEEE 1394.3 inhibits each initiator node from having two or more initiator unit directories. There is no method of announcing to another node that a plurality of instances in the initiator can provide the locations of services via IEEE 1394.3 for the respective instances. If a plurality of instances provide services expressed by the same service ID defined by IEEE 1394.3, which of the instances provides a service represented by the service ID cannot be discriminated. <cross-reference target="DRAWINGS">FIG. 22</cross-reference> shows an example of the layered structure of directories at the initiator node in this situation. In this manner, the relationship between a physical device, logical devices, and services in an initiator cannot be expressed by a proper hierarchical structure to another device. </paragraph>
<paragraph id="P-0012" lvl="0"><number>&lsqb;0012&rsqb;</number> If the role of a physical device is a target, the target can have a plurality of unit directories. Even with a plurality of logical devices, they can be hierarchically expressed using unit directories. </paragraph>
<paragraph id="P-0013" lvl="0"><number>&lsqb;0013&rsqb;</number> A client which uses IEEE 1394.3 as a lower layer must change its behavior depending on whether an IEEE 1394.3 layer is an initiator or target because the method of expressing a logical device and a service provided by it changes depending on whether the IEEE 1394.3 layer of the device is an initiator or target. </paragraph>
<paragraph id="P-0014" lvl="0"><number>&lsqb;0014&rsqb;</number> The present invention has been made in consideration of the prior art, and has as its object to provide a communication control apparatus and method which realize the hierarchical expression of logical devices in an initiator by setting unit directories in correspondence with the logical devices when the initiator has a plurality of logical devices. </paragraph>
</section>
<section>
<heading lvl="1">DISCLOSURE OF INVENTION </heading>
<paragraph id="P-0015" lvl="0"><number>&lsqb;0015&rsqb;</number> To achieve the above object, the present invention has the following arrangement. </paragraph>
<paragraph id="P-0016" lvl="0"><number>&lsqb;0016&rsqb;</number> There is provided a communication control apparatus in which data in a memory of a device can be directly read by another connected device via a communication line by designating an address of the data, and the devices are connected to each other by communication means, </paragraph>
<paragraph id="P-0017" lvl="2"><number>&lsqb;0017&rsqb;</number> wherein at least two attributes depending on a communication protocol ability of the communication means are stored together with storage means for readably storing a function providable by the device via the communication line. </paragraph>
<paragraph id="P-0018" lvl="0"><number>&lsqb;0018&rsqb;</number> When at least two attributes depending on the communication protocol ability are to be described in a device which adopts a protocol which does not allow describing in each device at least two attributes depending on the communication protocol ability, these at least two device attributes depending on the communication protocol ability can be preferably described using some of items which express communication protocol attributes stored in the storage means. </paragraph>
<paragraph id="P-0019" lvl="0"><number>&lsqb;0019&rsqb;</number> When IEEE 1394.3 is used as the communication protocol and a role thereof is an initiator, a version item in a unit directory defined by IEEE 1212R is preferably utilized as an attribute item which enables describing these at least two device attributes depending on the communication protocol ability. </paragraph>
<paragraph id="P-0020" lvl="0"><number>&lsqb;0020&rsqb;</number> It is preferable that when a plurality of attributes depend on the communication protocol, the unit directory which expresses the attributes depending on the communication protocol be permitted to have only one unit directory which describes all items including the version item in accordance with an IEEE 1394.3 definition, and a unit directory which expresses an attribute other than the attributes be permitted to have one or a plurality of unit directories in which only the version item has a specific value different from the IEEE 1394.3 definition and another item complies with the IEEE 1394.3 definition. </paragraph>
<paragraph id="P-0021" lvl="0"><number>&lsqb;0021&rsqb;</number> It is preferable that a unit directory which corresponds to only one attribute depending on the communication protocol and can communicate with a target complying with IEEE 1394.3 be described including a version item in accordance with the IEEE 1394.3 definition, and another attribute be described by a unit directory in which only the version item has a specific value different from the IEEE 1394.3 definition and another item complies with the IEEE 1394.3 definition. </paragraph>
<paragraph id="P-0022" lvl="0"><number>&lsqb;0022&rsqb;</number> There is provided a communication control method in a communication control apparatus in which data in a memory of a device can be directly read by another connected device via a communication line by designating an address of the data, and the devices are connected to each other by communication means, </paragraph>
<paragraph id="P-0023" lvl="2"><number>&lsqb;0023&rsqb;</number> wherein at least two attributes depending on a communication protocol ability of the communication means are stored together with storage means for readably storing a function providable by the device via the communication line. </paragraph>
<paragraph id="P-0024" lvl="0"><number>&lsqb;0024&rsqb;</number> In addition, a computer-readable memory stores in a computer the computer program which implements any one of the above-described communication control apparatuses. </paragraph>
<paragraph id="P-0025" lvl="0"><number>&lsqb;0025&rsqb;</number> Alternatively, there is provided a communication control apparatus for providing a service requested of a device connected via a communication line, comprising </paragraph>
<paragraph id="P-0026" lvl="2"><number>&lsqb;0026&rsqb;</number> a plurality of service providing devices, and </paragraph>
<paragraph id="P-0027" lvl="2"><number>&lsqb;0027&rsqb;</number> storage means for storing pieces of information about services provided by the plurality of service providing devices so as to enable reading the pieces of information by another device via the communication line, </paragraph>
<paragraph id="P-0028" lvl="2"><number>&lsqb;0028&rsqb;</number> wherein the pieces of information about the services are constituted by a hierarchical tree structure for each of the plurality of service providing devices.</paragraph>
</section>
</summary-of-invention>
<brief-description-of-drawings>
<section>
<heading lvl="1">BRIEF DESCRIPTION OF DRAWINGS </heading>
<paragraph id="P-0029" lvl="0"><number>&lsqb;0029&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1</cross-reference> is a block diagram showing a target to which the present invention is applied; </paragraph>
<paragraph id="P-0030" lvl="0"><number>&lsqb;0030&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 2</cross-reference> is a block diagram showing an initiator to which the present invention is applied; </paragraph>
<paragraph id="P-0031" lvl="0"><number>&lsqb;0031&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3A</cross-reference> is a block diagram showing the schematic hierarchy of a config ROM mounted in the initiator to which the present invention is applied; </paragraph>
<paragraph id="P-0032" lvl="0"><number>&lsqb;0032&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3B</cross-reference> is a block diagram showing examples of entry values of the config ROM mounted in the initiator to which the present invention is applied; </paragraph>
<paragraph id="P-0033" lvl="0"><number>&lsqb;0033&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 4A</cross-reference> is a flow chart showing the operation of the target to which the present invention is applied; </paragraph>
<paragraph id="P-0034" lvl="0"><number>&lsqb;0034&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 4B</cross-reference> is a flow chart showing the operation of the target to which the present invention is applied; </paragraph>
<paragraph id="P-0035" lvl="0"><number>&lsqb;0035&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 5A</cross-reference> is a flow chart showing the operation of the target to which the present invention is applied; </paragraph>
<paragraph id="P-0036" lvl="0"><number>&lsqb;0036&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 5B</cross-reference> is a flow chart showing the operation of the target to which the present invention is applied; </paragraph>
<paragraph id="P-0037" lvl="0"><number>&lsqb;0037&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 6A</cross-reference> is a flow chart showing the operation of the target to which the present invention is applied; </paragraph>
<paragraph id="P-0038" lvl="0"><number>&lsqb;0038&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 6B</cross-reference> is a flow chart showing the operation of the target to which the present invention is applied; </paragraph>
<paragraph id="P-0039" lvl="0"><number>&lsqb;0039&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 7A</cross-reference> is a flow chart showing the operation of the initiator to which the present invention is applied; </paragraph>
<paragraph id="P-0040" lvl="0"><number>&lsqb;0040&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 7B</cross-reference> is a flow chart showing the operation of the initiator to which the present invention is applied; </paragraph>
<paragraph id="P-0041" lvl="0"><number>&lsqb;0041&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 7C</cross-reference> is a flow chart showing the operation of the initiator to which the present invention is applied; </paragraph>
<paragraph id="P-0042" lvl="0"><number>&lsqb;0042&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 8</cross-reference> is a view showing the structure of a connection control function (CONNECT) request defined by IEEE 1394.3; </paragraph>
<paragraph id="P-0043" lvl="0"><number>&lsqb;0043&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 9</cross-reference> is a view showing the structure of the connection control function (CONNECT) request extended from the IEEE 1394.3 definition in order to apply the present invention; </paragraph>
<paragraph id="P-0044" lvl="0"><number>&lsqb;0044&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 10</cross-reference> is a view showing the structure of a connection control function (CONNECT) response defined by IEEE 1394.3 when a service mismatches the type of designated queue; </paragraph>
<paragraph id="P-0045" lvl="0"><number>&lsqb;0045&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 11</cross-reference> is a view showing the structure of the connection control function (CONNECT) response defined by IEEE 1394.3 when the connection is OK; </paragraph>
<paragraph id="P-0046" lvl="0"><number>&lsqb;0046&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 12</cross-reference> is a view showing the structure of the connection control function (CONNECT) response extended from the IEEE 1394.3 definition in the present invention when a designated unit directory does not exist; </paragraph>
<paragraph id="P-0047" lvl="0"><number>&lsqb;0047&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 13</cross-reference> is a view showing the structure of the connection control function (CONNECT) response extended from the IEEE 1394.3 definition in the present invention when a unit directory designated to provide a designated service does not exist; </paragraph>
<paragraph id="P-0048" lvl="0"><number>&lsqb;0048&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 14</cross-reference> is a table showing connection control function (CONNECT) values extended from the IEEE 1394.3 definition in the present invention, and directory IDs representing extended items in correspondence with the meanings of the extended values; </paragraph>
<paragraph id="P-0049" lvl="0"><number>&lsqb;0049&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 15</cross-reference> is a table showing connection control function (CONNECT) response values extended from the IEEE 1394.3 definition in the present invention, and &ldquo;6&rdquo; and &ldquo;7&rdquo; representing extended items in correspondence with the meanings of the extended values; </paragraph>
<paragraph id="P-0050" lvl="0"><number>&lsqb;0050&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 16</cross-reference> is a block diagram showing the model of an example of the relationship between the initiator, the target, the config ROM of the initiator, and modules of the present invention when the present invention is applied; </paragraph>
<paragraph id="P-0051" lvl="0"><number>&lsqb;0051&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 17</cross-reference> is a table showing the structure of a unit directory when the present invention is applied; </paragraph>
<paragraph id="P-0052" lvl="0"><number>&lsqb;0052&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 18</cross-reference> is a view showing the structure of the connection control function (CONNECT) response defined by IEEE 1394.3 when the connection is rejected; </paragraph>
<paragraph id="P-0053" lvl="0"><number>&lsqb;0053&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 19</cross-reference> is a view showing the structure of a conventional unit directory; </paragraph>
<paragraph id="P-0054" lvl="0"><number>&lsqb;0054&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 20</cross-reference> is a view showing the structure of another conventional unit directory; </paragraph>
<paragraph id="P-0055" lvl="0"><number>&lsqb;0055&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 21</cross-reference> is a block diagram showing a hierarchical directory structure representing services provided in a conventional initiator; </paragraph>
<paragraph id="P-0056" lvl="0"><number>&lsqb;0056&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 22</cross-reference> is a block diagram another hierarchical directory structure representing services provided in a conventional initiator; </paragraph>
<paragraph id="P-0057" lvl="0"><number>&lsqb;0057&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 23</cross-reference> is a view showing the structure of a unit directory to which the present invention is applied; and </paragraph>
<paragraph id="P-0058" lvl="0"><number>&lsqb;0058&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 24</cross-reference> is a block diagram showing the schematic hierarchy of a config ROM mounted in an initiator according to the second embodiment.</paragraph>
</section>
</brief-description-of-drawings>
<detailed-description>
<section>
<heading lvl="1">BEST MODE FOR CARRYING OUT THE INVENTION </heading>
<paragraph id="P-0059" lvl="7"><number>&lsqb;0059&rsqb;</number> &lsqb;First Embodiment&rsqb;</paragraph>
<paragraph id="P-0060" lvl="0"><number>&lsqb;0060&rsqb;</number> A communication system and an initiator and target which constitute the communication system according to an embodiment of the present invention will be described in detail below with reference to the accompanying drawings. In the following description, a term &ldquo;complying with a definition of the present invention&rdquo; or a similar termmeans merely a restriction by the arrangement or sequence (to be described in the embodiment) of a system, apparatus, or method according to the present invention, and does not represent that the present invention itself is a standard or convention. </paragraph>
<paragraph id="P-0061" lvl="7"><number>&lsqb;0061&rsqb;</number> &lt;System Configuration&gt;</paragraph>
<paragraph id="P-0062" lvl="0"><number>&lsqb;0062&rsqb;</number> The first embodiment is schematically as follows. According to the IEEE 1394.3 definition, an initiator unit directory for defining a device (unit) at the node of an initiator has only one physical node (node connected to a 1394 serial bus; also called a physical device). The present invention extends this definition to allow one physical node to have a plurality of initiator unit directories. Each initiator unit directory is assigned an identifier, and if the target must connect a queue defined by IEEE 1394.3 to the initiator, the identifier is added to the parameter of a connection request command as a parameter which designates a logical device. The logical device means each of devices which constitute one physical node. For example, when a computer is a physical node, a local-connected scanner, printer, and modem are respective logical devices. </paragraph>
<paragraph id="P-0063" lvl="0"><number>&lsqb;0063&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 16</cross-reference> shows a schematic device arrangement to which the present invention is applied. <cross-reference target="DRAWINGS">FIGS. 3A and 3B</cross-reference> show examples of the internal arrangement of a config ROM in which data defining the arrangement of each node is registered. </paragraph>
<paragraph id="P-0064" lvl="0"><number>&lsqb;0064&rsqb;</number> In <cross-reference target="DRAWINGS">FIG. 16</cross-reference>, the initiator of this system comprises logical devices A, B, and C. In this example, the devices are printers. Because of the identical devices, the logical devices provide the same services, e.g., services A, B, and C. The config ROM (CONFIGROM) defines each logical device. </paragraph>
<paragraph id="P-0065" lvl="0"><number>&lsqb;0065&rsqb;</number> The target has a client which utilizes a service provided by the initiator. The initiator and target are connected by a 1394 serial bus, and connected via 1394 line control units. </paragraph>
<paragraph id="P-0066" lvl="0"><number>&lsqb;0066&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1</cross-reference> is a block diagram showing the internal arrangement of a target electronic device defined by IEEE 1394.3 (to be referred to as a target hereinafter) to which the present invention is applied. Reference numeral <highlight><bold>1</bold></highlight> denotes a CPU which controls the present invention; <highlight><bold>2</bold></highlight>, a RAM which provides the work area of the CPU <highlight><bold>1</bold></highlight>; <highlight><bold>3</bold></highlight>, a hard disk (floppy disk, CD-ROM, MO, ROM, magnetic tape, or the like) which provides the program of the present invention; <highlight><bold>5</bold></highlight>, an IEEE 1394 line control unit; and <highlight><bold>8</bold></highlight>, a main bus. </paragraph>
<paragraph id="P-0067" lvl="0"><number>&lsqb;0067&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 2</cross-reference> is a block diagram showing the internal arrangement of an initiator electronic device defined by IEEE 1394.3 (to be referred to as an initiator hereinafter) to which the present invention is applied. Reference numeral <highlight><bold>11</bold></highlight> denotes a CPU which controls the present invention; <highlight><bold>12</bold></highlight>, a RAM which provides the work area of the CPU <highlight><bold>11</bold></highlight> (and stores a config ROM); <highlight><bold>13</bold></highlight>, a hard disk (floppy disk, CD-ROM, MO, ROM, magnetic tape, or the like) which provides the program of the present invention; <highlight><bold>15</bold></highlight>, an IEEE 1394 line control unit; and <highlight><bold>18</bold></highlight>, a main bus. The IEEE 1394 line control unit holds protocols defined by IEEE 1394 and SBP-2 (Serial Bus Protocol-2). </paragraph>
<paragraph id="P-0068" lvl="0"><number>&lsqb;0068&rsqb;</number> In the present invention, the CPUs of both the target and initiator control and operate the RAMs, hard disks, and IEEE 1394 line control units via the main buses in accordance with the program of the present invention, unless otherwise specified. The IEEE 1394 line control unit is also called an IEEE 1394 protocol control unit, which are the same in this embodiment. </paragraph>
<paragraph id="P-0069" lvl="7"><number>&lsqb;0069&rsqb;</number> &lt;Contents of Config ROM&gt;</paragraph>
<paragraph id="P-0070" lvl="0"><number>&lsqb;0070&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3A</cross-reference> shows an example of the contents of the config ROM of the initiator according to the present invention. Configuration information is managed by directories with a hierarchical structure. An instance directory which defines a logical device lies below a root directory, and a unit directory which defines the logical device in more detail follows the instance directory. A feature directory which defines services and the like provided by each logical device is set below the unit directory. </paragraph>
<paragraph id="P-0071" lvl="0"><number>&lsqb;0071&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3B</cross-reference> shows details of the directories. An instance directory which defines each logical device as an instance is linked below a root directory <highlight><bold>301</bold></highlight>. For example, an instance directory <highlight><bold>302</bold></highlight> describes the model identifier of printer B serving as a logical device, and has a link to a lower unit directory <highlight><bold>303</bold></highlight>. The unit directory contains a specifier which designates a protocol (in this embodiment, designates 0&times;5029 representing IEEE 1394), a protocol version, and a link to a feature directory <highlight><bold>304</bold></highlight> which defines a service. The feature directory <highlight><bold>304</bold></highlight> defines services A, B, and C which are services provided by logical device B. </paragraph>
<paragraph id="P-0072" lvl="0"><number>&lsqb;0072&rsqb;</number> It should be noted that initiator unit directory <highlight><bold>1</bold></highlight> complies with the IEEE 1394.3 definition though the version values of initiator unit directories <highlight><bold>2</bold></highlight> and <highlight><bold>3</bold></highlight> are different from the one defined by IEEE 1394.3 and the remaining items comply with the IEEE 1394.3 definition. That is, the version value of the initiator unit directory defined by IEEE 1394.3 is 0, but those of initiator unit directories <highlight><bold>2</bold></highlight> and <highlight><bold>3</bold></highlight> are <highlight><bold>1</bold></highlight>. This version number makes it possible to determine whether the current standard is the original IEEE 1394.3 standard or an extended standard described in the embodiment. </paragraph>
<paragraph id="P-0073" lvl="0"><number>&lsqb;0073&rsqb;</number> Initiator unit directory <highlight><bold>3</bold></highlight> contains an item DIRECTORY_ID (directory ID) in addition to the features of initiator unit directory <highlight><bold>2</bold></highlight>. </paragraph>
<paragraph id="P-0074" lvl="0"><number>&lsqb;0074&rsqb;</number> Note that the present invention assumes that the target comprises necessary functions defined by IEEE 1394.3 and the initiator comprises necessary functions. The target and initiator are physically connected by a line defined by IEEE 1394 (see <cross-reference target="DRAWINGS">FIG. 16</cross-reference>). </paragraph>
<paragraph id="P-0075" lvl="7"><number>&lsqb;0075&rsqb;</number> &lt;Operation of Target&gt;</paragraph>
<paragraph id="P-0076" lvl="0"><number>&lsqb;0076&rsqb;</number> The operation of the target according to the present invention will be explained in detail with reference to the flow charts of <cross-reference target="DRAWINGS">FIGS. 4A, 4B</cross-reference>, <highlight><bold>5</bold></highlight>A, <highlight><bold>5</bold></highlight>B, <highlight><bold>6</bold></highlight>A, and <highlight><bold>6</bold></highlight>B. The operation will be first described with reference to <cross-reference target="DRAWINGS">FIGS. 4A and 4B</cross-reference>. </paragraph>
<paragraph id="P-0077" lvl="0"><number>&lsqb;0077&rsqb;</number> After a program for realizing the flow charts of <cross-reference target="DRAWINGS">FIGS. 4A and 4B</cross-reference> is activated during initialization of the target device, the target waits for a connection request (connection instruction) accompanied by parameters which designate a physical device, logical device, and service from an application (S<highlight><bold>101</bold></highlight>). If the target receives such a connection request, the target instructs the 1394 line control unit <highlight><bold>5</bold></highlight> to list all physical devices (physical nodes) connected by a 1394 line (S<highlight><bold>102</bold></highlight>). Note that the 1394 protocol control unit in <cross-reference target="DRAWINGS">FIGS. 4A and 4B</cross-reference> means the 1394 line control unit. </paragraph>
<paragraph id="P-0078" lvl="0"><number>&lsqb;0078&rsqb;</number> The 1394 line control unit <highlight><bold>5</bold></highlight> reads currently connected physical device names via the IEEE 1394 line (S<highlight><bold>103</bold></highlight>). The target receives a list of currently connected physical devices from the 1394 line control unit <highlight><bold>5</bold></highlight>, and checks whether a physical device designated by the application is included in the list (S<highlight><bold>104</bold></highlight>). If NO in S<highlight><bold>104</bold></highlight>, the target notifies the application of the absence of the designated physical device (S<highlight><bold>106</bold></highlight>), and returns to S<highlight><bold>101</bold></highlight>. </paragraph>
<paragraph id="P-0079" lvl="0"><number>&lsqb;0079&rsqb;</number> If YES in S<highlight><bold>104</bold></highlight>, the target requests the 1394 line control unit <highlight><bold>5</bold></highlight> to read the root directory of the physical device (S<highlight><bold>105</bold></highlight>). The target inspects the root directory to check whether the root directory read by the 1394 line control unit <highlight><bold>5</bold></highlight> still has the entry of an instance directory whose attribute has not been examined yet (S<highlight><bold>107</bold></highlight>). </paragraph>
<paragraph id="P-0080" lvl="0"><number>&lsqb;0080&rsqb;</number> If the entries of all instance directories have been examined, the target checks whether MODELFLG is ON or OFF (S<highlight><bold>108</bold></highlight>). If MODELFLG is ON, the target can perform communication (connection) by a method other than the method of the present invention, and if possible, tries connection by another communication protocol (e.g., FCP) (<cross-reference target="DRAWINGS">FIG. 4</cross-reference>B: S<highlight><bold>109</bold></highlight>). Thereafter, the target advances to S<highlight><bold>101</bold></highlight>. If MODELFLG is OFF, the target notifies the application of the absence of the designated logical device (S<highlight><bold>106</bold></highlight>), and returns to S<highlight><bold>101</bold></highlight>. </paragraph>
<paragraph id="P-0081" lvl="0"><number>&lsqb;0081&rsqb;</number> If the entries of unexamined instance directories exist in the root directory read by the 1394 line control unit <highlight><bold>5</bold></highlight> in step S<highlight><bold>107</bold></highlight>, the target requests the 1394 line control unit <highlight><bold>5</bold></highlight> to read an instance directory having the smallest address (S<highlight><bold>110</bold></highlight>). Then, the target checks whether the model written in the model entry of the instance directory read by the 1394 line control unit <highlight><bold>5</bold></highlight> coincides with a logical device to which the application has issued the connection request (S<highlight><bold>111</bold></highlight>). If NO in S<highlight><bold>111</bold></highlight>, the target returns to S<highlight><bold>107</bold></highlight>; if YES, turns on MODELFLG (S<highlight><bold>112</bold></highlight>). MODELFLG is initialized to &ldquo;OFF&rdquo; when the program which describes the procedures in <cross-reference target="DRAWINGS">FIGS. 4A and 4B</cross-reference> is activated. </paragraph>
<paragraph id="P-0082" lvl="0"><number>&lsqb;0082&rsqb;</number> The target checks whether the entries of unexamined unit directories exist in the instance directory read by the 1394 line control unit <highlight><bold>5</bold></highlight> (S<highlight><bold>113</bold></highlight>). If the entries of all unit directories have been examined, the target determines that the current instance directory does not comply with procedures (protocol) defined by the embodiment, and advances to step S<highlight><bold>107</bold></highlight>. </paragraph>
<paragraph id="P-0083" lvl="0"><number>&lsqb;0083&rsqb;</number> If the entries of unexamined unit directories exist in the instance directory read by the 1394 line control unit <highlight><bold>5</bold></highlight>, the target requests the 1394 line control unit <highlight><bold>5</bold></highlight> to read a unit directory having the smallest address (S<highlight><bold>114</bold></highlight>). Then, the target checks whether the value of the specifier ID item of the unit directory read by the 1394 line control unit <highlight><bold>5</bold></highlight> is 0&times;5029 (identifier of the group which defines IEEE 1394.3) (S<highlight><bold>115</bold></highlight>). If NO in S<highlight><bold>115</bold></highlight>, the target determines that the unit directory does not support IEEE 1394, and shifts to S<highlight><bold>107</bold></highlight>. </paragraph>
<paragraph id="P-0084" lvl="0"><number>&lsqb;0084&rsqb;</number> If YES in S<highlight><bold>115</bold></highlight>, the target checks the version entry value of the unit directory read by the 1394 line control unit <highlight><bold>5</bold></highlight> (S<highlight><bold>116</bold></highlight>). If the version entry value of the unit directory is 0&times;00, the target determines that the unit directory completely complies with IEEE 1394.3, and advances to A in <cross-reference target="DRAWINGS">FIG. 5A</cross-reference>. If the version entry value of the unit directory is 0&times;01 (S<highlight><bold>117</bold></highlight>), the target determines that the unit directory complies with extended IEEE 1394.3 procedures defined by the embodiment, and shifts to B in <cross-reference target="DRAWINGS">FIG. 6A</cross-reference>. If the version entry value of the unit directory is not 0&times;00 or 0&times;01, the target can perform communication by another protocol, and if possible, executes the processing (S<highlight><bold>109</bold></highlight>). </paragraph>
<paragraph id="P-0085" lvl="0"><number>&lsqb;0085&rsqb;</number> In this way, the target can acquire a hierarchical structure representing the resource of the initiator, and determine whether the target requires the resource. </paragraph>
<paragraph id="P-0086" lvl="7"><number>&lsqb;0086&rsqb;</number> &lt;Operation of Target According to Present Invention&gt;</paragraph>
<paragraph id="P-0087" lvl="0"><number>&lsqb;0087&rsqb;</number> The operation of the target according to the present invention in which the unit directory complies with the extended standard of IEEE 1394.3 will be explained with reference to <cross-reference target="DRAWINGS">FIGS. 6A and 6B</cross-reference>. </paragraph>
<paragraph id="P-0088" lvl="0"><number>&lsqb;0088&rsqb;</number> The target checks whether a read unit directory contains the entry of a directory ID (S<highlight><bold>301</bold></highlight>). If YES in S<highlight><bold>301</bold></highlight>, the target stores the value in INS (directory identifier storage location) (S<highlight><bold>303</bold></highlight>); if NO, stores the start address of the read unit directory in INS (S<highlight><bold>302</bold></highlight>). </paragraph>
<paragraph id="P-0089" lvl="0"><number>&lsqb;0089&rsqb;</number> The target generates a connection control request containing a service ID corresponding to a service designated by an application and a directory ID assembled in the unit directory stored in INS (S<highlight><bold>304</bold></highlight>). The connection control request is shown in <cross-reference target="DRAWINGS">FIG. 9</cross-reference>. More specifically, the value of the first Rq field is &ldquo;1&rdquo; representing a request, and that of the ctrl_function field is &ldquo;CONNECT&rdquo; representing connection. The response field represents a request, and its value is arbitrary. The remaining fields are as shown in <cross-reference target="DRAWINGS">FIG. 9</cross-reference>. In this case, the service ID of the connection control request is &ldquo;PRN&rdquo; (print), and DIRECTORY_ID is 2F4256. The definition of DIRECTORY_ID is shown in <cross-reference target="DRAWINGS">FIG. 14</cross-reference>. DIRECTORY_ID shows a value which specifies a unit directory in an initiator which the target tries to connect. </paragraph>
<paragraph id="P-0090" lvl="0"><number>&lsqb;0090&rsqb;</number> The target checks whether log-in with the physical device of the initiator by SBP-2 has been established (S<highlight><bold>305</bold></highlight>). If NO in S<highlight><bold>305</bold></highlight>, the target requests the 1394 line control unit <highlight><bold>5</bold></highlight> to perform IEEE 1394.3 reverse log-in processing (S<highlight><bold>306</bold></highlight>). The target confirms whether log-in has been established by reverse log-in (S<highlight><bold>307</bold></highlight>). If NO in S<highlight><bold>307</bold></highlight>, the target notifies the application of a connection failure, and advances to step S<highlight><bold>308</bold></highlight>. </paragraph>
<paragraph id="P-0091" lvl="0"><number>&lsqb;0091&rsqb;</number> If YES in S<highlight><bold>305</bold></highlight> or S<highlight><bold>307</bold></highlight>, the target requests the 1394 line control unit <highlight><bold>5</bold></highlight> to transmit the connection control request (to be also simply referred to as connection) to the initiator by an IEEE 1394.3 method (S<highlight><bold>309</bold></highlight>). The 1394 line control unit <highlight><bold>5</bold></highlight> waits for a command from the physical device of the initiator (S<highlight><bold>310</bold></highlight>). If the 1394 line control unit <highlight><bold>5</bold></highlight> receives a command from the physical device of the initiator, the target checks whether the command is a response to the connection (to be also simply referred to as a connection response) (S<highlight><bold>311</bold></highlight>). If the connection response is OK, the values shown in <cross-reference target="DRAWINGS">FIG. 11</cross-reference> are sent back as a response. That is, the value &ldquo;0&rdquo; of the Rq field, the value &ldquo;CONNECT&rdquo; of the ctrl_function field, and the value &ldquo;0&rdquo; (representing &ldquo;OK&rdquo;) of the response field are sent back. </paragraph>
<paragraph id="P-0092" lvl="0"><number>&lsqb;0092&rsqb;</number> If the command is not a response to the connection control request, the target performs processing corresponding to the command (S<highlight><bold>312</bold></highlight>). If the command is a connection response, the target determines from the response item whether the result is connection OK or NG (failure) (S<highlight><bold>313</bold></highlight>). If the connection is NG, the target notifies the application of a connection failure, and shifts to step S<highlight><bold>308</bold></highlight>; if the connection is OK, notifies the application that the service requested by the application can be utilized (S<highlight><bold>314</bold></highlight>). The target exchanges data in accordance with an instruction from the application (S<highlight><bold>315</bold></highlight>), and executes shutdown processing in accordance with an instruction from the application (S<highlight><bold>316</bold></highlight>). </paragraph>
<paragraph id="P-0093" lvl="0"><number>&lsqb;0093&rsqb;</number> The target checks whether another active queue exists in log-in (S<highlight><bold>317</bold></highlight>). If NO in S<highlight><bold>317</bold></highlight>, the target requests the 1394 line control unit <highlight><bold>5</bold></highlight> to perform log-out processing (S<highlight><bold>318</bold></highlight>), and ends the processing; if YES, directly ends the processing. </paragraph>
<paragraph id="P-0094" lvl="7"><number>&lsqb;0094&rsqb;</number> &lt;Operation of Target Complying with IEEE 1394.3&gt;</paragraph>
<paragraph id="P-0095" lvl="0"><number>&lsqb;0095&rsqb;</number> The operation of the target when the unit directory complies with IEEE 1394.3 will be described with reference to <cross-reference target="DRAWINGS">FIGS. 5A and 5B</cross-reference>. </paragraph>
<paragraph id="P-0096" lvl="0"><number>&lsqb;0096&rsqb;</number> The target generates a connection control request in which a service ID corresponding to a service designated by an application is assembled (S<highlight><bold>201</bold></highlight>). The contents of the connection control request are shown in <cross-reference target="DRAWINGS">FIG. 8</cross-reference>. The cntrl_function field contains &ldquo;CONNECT&rdquo; representing the connection control request. The remaining fields are as shown in <cross-reference target="DRAWINGS">FIG. 8</cross-reference>. In this case, the service ID is &ldquo;PRN&rdquo;. </paragraph>
<paragraph id="P-0097" lvl="0"><number>&lsqb;0097&rsqb;</number> The target checks whether log-in with the physical device of the initiator by SBP-2 has been established (S<highlight><bold>202</bold></highlight>). If NO in S<highlight><bold>202</bold></highlight>, the target requests the 1394 line control unit <highlight><bold>5</bold></highlight> to perform IEEE 1394.3 reverse log-in processing (S<highlight><bold>203</bold></highlight>). The target confirms whether log-in has been established by reverse log-in (S<highlight><bold>204</bold></highlight>). If NO in S<highlight><bold>204</bold></highlight>, the target notifies the application of a connection failure, and advances to step S<highlight><bold>205</bold></highlight>. </paragraph>
<paragraph id="P-0098" lvl="0"><number>&lsqb;0098&rsqb;</number> If YES in S<highlight><bold>202</bold></highlight> or S<highlight><bold>204</bold></highlight>, the target requests the 1394 line control unit <highlight><bold>5</bold></highlight> to transmit the connection control request generated in step S<highlight><bold>201</bold></highlight> to the initiator by an IEEE 1394.3 method (S<highlight><bold>206</bold></highlight>). The 1394 line control unit <highlight><bold>5</bold></highlight> waits for a command from the physical device of the initiator (S<highlight><bold>207</bold></highlight>). If the 1394 line control unit <highlight><bold>5</bold></highlight> receives a command from the physical device of the initiator, the target checks whether the command is a connection response (S<highlight><bold>208</bold></highlight>). </paragraph>
<paragraph id="P-0099" lvl="0"><number>&lsqb;0099&rsqb;</number> If YES in S<highlight><bold>208</bold></highlight>, the target sends back a response in <cross-reference target="DRAWINGS">FIG. 11</cross-reference>; if NO, performs processing corresponding to the command (S<highlight><bold>209</bold></highlight>). If the command is a connection response, the target determines from the response item whether the result is connection OK or NG (failure) (S<highlight><bold>210</bold></highlight>). If the connection is NG, the target notifies the application of a connection failure, and shifts to step S<highlight><bold>205</bold></highlight>; if the connection is OK, notifies the application that the service requested by the application can be utilized (S<highlight><bold>211</bold></highlight>). The target exchanges data in accordance with an instruction from the application (S<highlight><bold>212</bold></highlight>), and executes shutdown processing in accordance with an instruction from the application (S<highlight><bold>213</bold></highlight>). </paragraph>
<paragraph id="P-0100" lvl="0"><number>&lsqb;0100&rsqb;</number> The target checks whether another active queue exists in log-in (S<highlight><bold>214</bold></highlight>). If NO in S<highlight><bold>214</bold></highlight>, the target requests the 1394 line control unit <highlight><bold>5</bold></highlight> to perform log-out processing (S<highlight><bold>215</bold></highlight>), and ends the processing; if YES, directly ends the processing. </paragraph>
<paragraph id="P-0101" lvl="7"><number>&lsqb;0101&rsqb;</number> &lt;Operation of Initiator&gt;</paragraph>
<paragraph id="P-0102" lvl="0"><number>&lsqb;0102&rsqb;</number> The operation of the initiator according to the present invention will be explained with reference to <cross-reference target="DRAWINGS">FIGS. 7A</cross-reference> to <highlight><bold>7</bold></highlight>C. The initiator is activated and initialized simultaneously when devices including the present invention are initialized. Log-in operation defined by SBP-2 is controlled by the 1394 line control unit <highlight><bold>15</bold></highlight> and is not described in detail. </paragraph>
<paragraph id="P-0103" lvl="0"><number>&lsqb;0103&rsqb;</number> The initiator waits until the 1394 line control unit <highlight><bold>15</bold></highlight> receives data concerning the present invention from a target device (S<highlight><bold>401</bold></highlight>). The initiator examines the queue item (defined by IEEE 1394.3) of a corresponding ORB to check whether the received data relates to queue <highlight><bold>0</bold></highlight> (S<highlight><bold>402</bold></highlight>). If NO in S<highlight><bold>402</bold></highlight>, the initiator executes processing (defined by IEEE 1394.3) corresponding to the queue number (S<highlight><bold>403</bold></highlight>), and advances to S<highlight><bold>401</bold></highlight>. </paragraph>
<paragraph id="P-0104" lvl="0"><number>&lsqb;0104&rsqb;</number> If YES in S<highlight><bold>402</bold></highlight>, the initiator checks whether the cntrl_function item (see <cross-reference target="DRAWINGS">FIGS. 8 and 9</cross-reference>) of control information represents connection (S<highlight><bold>404</bold></highlight>). If NO in S<highlight><bold>404</bold></highlight>, the initiator performs processing (defined by IEEE 1394.3) corresponding to the designated control function (S<highlight><bold>405</bold></highlight>), and shifts to S<highlight><bold>401</bold></highlight>. </paragraph>
<paragraph id="P-0105" lvl="0"><number>&lsqb;0105&rsqb;</number> If YES in S<highlight><bold>404</bold></highlight>, the initiator checks the Rq item of the control information (S<highlight><bold>405</bold></highlight>). If the Rq item represents a response, the initiator performs corresponding processing (defined by IEEE 1394.3) (S<highlight><bold>406</bold></highlight>), and advances to S<highlight><bold>401</bold></highlight>. </paragraph>
<paragraph id="P-0106" lvl="0"><number>&lsqb;0106&rsqb;</number> If the Rq item of the control information represents a request, the initiator checks whether a DIRECTORY_ID item (see <cross-reference target="DRAWINGS">FIGS. 8, 9</cross-reference>, and <highlight><bold>14</bold></highlight>) exists in the control information (S<highlight><bold>407</bold></highlight>). </paragraph>
<paragraph id="P-0107" lvl="0"><number>&lsqb;0107&rsqb;</number> If YES in S<highlight><bold>407</bold></highlight>, the initiator checks whether the remaining parameters comply with those defined by the IEEE 1394.3 connection control (S<highlight><bold>408</bold></highlight>). If NO in S<highlight><bold>408</bold></highlight>, the initiator performs corresponding error processing (S<highlight><bold>409</bold></highlight>), and shifts to S<highlight><bold>401</bold></highlight>. </paragraph>
<paragraph id="P-0108" lvl="0"><number>&lsqb;0108&rsqb;</number> If YES in S<highlight><bold>408</bold></highlight>, the initiator checks whether a unit directory having the same directory ID as the directory ID designated in the DIRECTORY_ID item exists in the initiator (S<highlight><bold>411</bold></highlight>). If NO in S<highlight><bold>411</bold></highlight>, the initiator checks whether a unit directory having the DIRECTORY_ID value at the start address exists in the initiator (S<highlight><bold>412</bold></highlight>). If NO in S<highlight><bold>412</bold></highlight>, the initiator sets &ldquo;the designated unit does not exist.&rdquo; in the parameter of the connection response (see <cross-reference target="DRAWINGS">FIGS. 15 and 12</cross-reference>) (S<highlight><bold>413</bold></highlight>), and shifts to S<highlight><bold>422</bold></highlight>. </paragraph>
<paragraph id="P-0109" lvl="0"><number>&lsqb;0109&rsqb;</number> In step S<highlight><bold>422</bold></highlight>, the initiator generates a connection response containing the designated connection response parameter. Then, the initiator requests the 1394 line control unit <highlight><bold>15</bold></highlight> to transmit the generated connection response (S<highlight><bold>423</bold></highlight>), and advances to S<highlight><bold>429</bold></highlight>. </paragraph>
<paragraph id="P-0110" lvl="0"><number>&lsqb;0110&rsqb;</number> If YES in S<highlight><bold>411</bold></highlight> or S<highlight><bold>412</bold></highlight>, the initiator checks whether the unit directory designated by DIRECTORY_ID has the contents of the directory as shown in <cross-reference target="DRAWINGS">FIG. 17</cross-reference> (S<highlight><bold>414</bold></highlight>). If NO in S<highlight><bold>414</bold></highlight>, the initiator sets &ldquo;the designated unit does not exist.&rdquo; in the parameter of the connection response (see <cross-reference target="DRAWINGS">FIGS. 15 and 12</cross-reference>) (S<highlight><bold>413</bold></highlight>), and shifts to S<highlight><bold>422</bold></highlight>. <cross-reference target="DRAWINGS">FIG. 17</cross-reference> shows the contents of the unit directory according to the present invention. The entries of the specifier ID and version are essential, and the directory ID and the feature directory which defines a providable service are added, as needed. <cross-reference target="DRAWINGS">FIG. 23</cross-reference> shows codes corresponding to the respective entries. As shown in <cross-reference target="DRAWINGS">FIG. 23</cross-reference>, the specifier ID is represented by <highlight><bold>12</bold></highlight> (hexadecimal number); the version, <highlight><bold>13</bold></highlight> (hexadecimal number); and the feature directory offset, <highlight><bold>9</bold></highlight>A (hexadecimal number). The entries of the specifier ID and version are fixed to 005029 (hexadecimal number) and 000001 (hexadecimal number), respectively. </paragraph>
<paragraph id="P-0111" lvl="0"><number>&lsqb;0111&rsqb;</number> If the unit directory designated by DIRECTORY_ID has the contents of the directory described in this embodiment, i.e., entries as shown in <cross-reference target="DRAWINGS">FIG. 17</cross-reference> in step S<highlight><bold>414</bold></highlight>, the initiator checks whether a service requested by the service ID designated by the connection control is supported by a unit (logical device) corresponding to the unit directory represented by the designated DIRECTORY_ID (S<highlight><bold>415</bold></highlight>). If NO in S<highlight><bold>415</bold></highlight>, the initiator sets &ldquo;the designated unit does not support the designated service.&rdquo; in the parameter of the connection response (see <cross-reference target="DRAWINGS">FIGS. 15 and 13</cross-reference>) (S<highlight><bold>416</bold></highlight>), and advances to S<highlight><bold>422</bold></highlight>. </paragraph>
<paragraph id="P-0112" lvl="0"><number>&lsqb;0112&rsqb;</number> If NO in S<highlight><bold>407</bold></highlight>, the initiator checks whether the parameters comply with those defined by the IEEE 1394.3 connection control (S<highlight><bold>410</bold></highlight>). If NO in S<highlight><bold>410</bold></highlight>, the initiator performs corresponding error processing, and shifts to S<highlight><bold>421</bold></highlight>; if YES, checks whether the initiator supports a service requested by the service ID designated by the connection control (S<highlight><bold>417</bold></highlight>). </paragraph>
<paragraph id="P-0113" lvl="0"><number>&lsqb;0113&rsqb;</number> If YES in S<highlight><bold>417</bold></highlight>, the initiator checks whether the contents and number of queues required by the service requested by the service ID designated by the connection control coincide with those designated in the queue field of the connection control (S<highlight><bold>418</bold></highlight>). If NO in S<highlight><bold>418</bold></highlight>, the initiator sets &ldquo;mismatch&rdquo; in the parameter of the connection response (see <cross-reference target="DRAWINGS">FIGS. 15 and 10</cross-reference>) (S<highlight><bold>419</bold></highlight>), and advances to S<highlight><bold>422</bold></highlight>. </paragraph>
<paragraph id="P-0114" lvl="0"><number>&lsqb;0114&rsqb;</number> If YES in S<highlight><bold>418</bold></highlight>, the initiator checks whether the service-requested server provides the designated service (S<highlight><bold>420</bold></highlight>). If NO in S<highlight><bold>420</bold></highlight>, the initiator sets &ldquo;connection rejection&rdquo; in the parameter of the connection response (see <cross-reference target="DRAWINGS">FIGS. 15 and 19</cross-reference>) (S<highlight><bold>421</bold></highlight>), and advances to S<highlight><bold>422</bold></highlight>. </paragraph>
<paragraph id="P-0115" lvl="0"><number>&lsqb;0115&rsqb;</number> If YES in S<highlight><bold>420</bold></highlight>, the initiator sets &ldquo;connection OK&rdquo; in the parameter of the connection response (see <cross-reference target="DRAWINGS">FIGS. 15 and 11</cross-reference>) (S<highlight><bold>424</bold></highlight>), and shifts to S<highlight><bold>425</bold></highlight>. </paragraph>
<paragraph id="P-0116" lvl="0"><number>&lsqb;0116&rsqb;</number> Then, the initiator generates a connection response containing the designated connection response parameter (S<highlight><bold>425</bold></highlight>). The initiator requests the 1394 line control unit <highlight><bold>15</bold></highlight> to transmit the generated connection response (S<highlight><bold>426</bold></highlight>). The initiator and target exchange data via the 1394 line control unit <highlight><bold>15</bold></highlight> by an IEEE 1394.3 method in accordance with a request from a client (S<highlight><bold>427</bold></highlight>). After the service ends, the initiator performs shutdown processing by an IEEE 1394.3 method in accordance with a request from the client (S<highlight><bold>428</bold></highlight>). Note that the client is an application which requests a service of the initiator via the target. Processes in steps S<highlight><bold>427</bold></highlight> and S<highlight><bold>428</bold></highlight> are executed in correspondence with processes in steps S<highlight><bold>212</bold></highlight> and S<highlight><bold>213</bold></highlight> in <cross-reference target="DRAWINGS">FIG. 5B</cross-reference> or processes in steps S<highlight><bold>315</bold></highlight> and S<highlight><bold>316</bold></highlight> in <cross-reference target="DRAWINGS">FIG. 6B</cross-reference>. In step S<highlight><bold>427</bold></highlight>, data are exchanged, and the initiator provides the service designated by the target. At this time, if a logical device managed by the initiator and a service supported by the logical device are designated, the service designated by the designated logical device is provided. </paragraph>
<paragraph id="P-0117" lvl="0"><number>&lsqb;0117&rsqb;</number> For example, if the address of the unit directory <highlight><bold>303</bold></highlight> of logical printer B in <cross-reference target="DRAWINGS">FIG. 3</cross-reference>B, and &ldquo;print&rdquo; which is a service supported by logical printer B are designated by the DEVICE_ID field of a connection control function issued from the target to the initiator, connection is established between the target and the initiator. After that, the initiator provides a buffer to the target, reads data written in the buffer by the target, and executes the service &ldquo;print&rdquo; on the basis of the data. </paragraph>
<paragraph id="P-0118" lvl="0"><number>&lsqb;0118&rsqb;</number> The initiator checks whether an active queue other than queue <highlight><bold>0</bold></highlight> exists in log-in (S<highlight><bold>429</bold></highlight>). If YES in S<highlight><bold>429</bold></highlight>, the initiator shifts to S<highlight><bold>400</bold></highlight>; if NO, performs log-out processing defined by SBP-2 and ends the processing (S<highlight><bold>430</bold></highlight>). </paragraph>
<paragraph id="P-0119" lvl="0"><number>&lsqb;0119&rsqb;</number> If NO in step S<highlight><bold>410</bold></highlight> or S<highlight><bold>417</bold></highlight>, the initiator performs corresponding processing (S<highlight><bold>410</bold></highlight>-<highlight><bold>1</bold></highlight>), and advances to step S<highlight><bold>419</bold></highlight>. </paragraph>
<paragraph id="P-0120" lvl="0"><number>&lsqb;0120&rsqb;</number> By these procedures, the config ROM in the initiator manages services usable in logical devices for each logical device of the initiator. Connection between the target and the initiator can be established by designating a logical device and service of the initiator by the target. The target can receive the service from the designated logical device. </paragraph>
<paragraph id="P-0121" lvl="0"><number>&lsqb;0121&rsqb;</number> With the above arrangement and procedures, the relationship between instances and services can be expressed when one node functioning as an initiator defined by IEEE 1394.3 has a plurality of instances. Even if a plurality of instances in one node provide services having the same service ID, which of the instances provides a service represented by the service ID can be specified by designating at least the directory ID of the feature directory or unit directory whose service ID is stored. </paragraph>
<paragraph id="P-0122" lvl="0"><number>&lsqb;0122&rsqb;</number> Another node which is connected by a line and supports the present invention can understand which instance provides a service on public view by a service ID. More specifically, the present invention can cope with a multifunctional peripheral device and the like. </paragraph>
<paragraph id="P-0123" lvl="0"><number>&lsqb;0123&rsqb;</number> Even if a unit directory defined as an initiator unit directory by the existing IEEE 1394.3 and a unit directory defined by the present invention exist mixedly, downward compatibility with the existing IEEE 1394.3 can be achieved though this is limited to only one instance per node. </paragraph>
<paragraph id="P-0124" lvl="7"><number>&lsqb;0124&rsqb;</number> &lsqb;Second Embodiment&rsqb;</paragraph>
<paragraph id="P-0125" lvl="0"><number>&lsqb;0125&rsqb;</number> The first embodiment has exemplified the case in which only unit directories defined by the present invention exist. The second embodiment will describe an example in which a unit directory defined as an initiator unit directory by the existing IEEE 1394.3 and a unit directory defined by the present invention exist mixedly. <cross-reference target="DRAWINGS">FIG. 24</cross-reference> is a block diagram showing a hierarchical structure in the second embodiment. </paragraph>
<paragraph id="P-0126" lvl="0"><number>&lsqb;0126&rsqb;</number> This structure enables downward compatibility with the existing IEEE 1394.3 though this is limited to only one instance per node. </paragraph>
<paragraph id="P-0127" lvl="7"><number>&lsqb;0127&rsqb;</number> Industrial Applicability </paragraph>
<paragraph id="P-0128" lvl="0"><number>&lsqb;0128&rsqb;</number> As has been described above, the relationship between instances and services can be expressed when one node functioning as an initiator defined by IEEE 1394.3 has a plurality of instances. Even if a plurality of instances in one node provide services having the same service ID, which of the instances provides a service represented by the service ID can be specified by designating at least the directory ID of the feature directory or unit directory whose service ID is stored. </paragraph>
<paragraph id="P-0129" lvl="0"><number>&lsqb;0129&rsqb;</number> Accordingly, another node which is connected by a line and supports the present invention can understand which instance provides a service on public view by a service ID. More specifically, the present invention can cope with a multifunctional peripheral device and the like. </paragraph>
<paragraph id="P-0130" lvl="0"><number>&lsqb;0130&rsqb;</number> Even if a unit directory defined as an initiator unit directory by the existing IEEE 1394.3 and a unit directory defined by the present invention exist mixedly, downward compatibility with the existing IEEE 1394.3 can be achieved though this is limited to only one instance per node. </paragraph>
</section>
</detailed-description>
</subdoc-description>
<subdoc-claims>
<claim id="CLM-00001">
<claim-text><highlight><bold>1</bold></highlight>. A communication control apparatus in which data in a memory of a device can be directly read by another connected device via a communication line by designating an address of the data, and the devices are connected to each other by communication means, characterized in that 
<claim-text>a function providable by the device is readably stored via the communication line, and at least two attributes depending on a communication protocol ability of the communication means are stored. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00002">
<claim-text><highlight><bold>2</bold></highlight>. The communication control apparatus according to <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, characterized in that when at least two attributes depending on the communication protocol ability are to be described in a device which adopts a protocol which does not allow describing in each device at least two attributes depending on the communication protocol ability, said at least two device attributes depending on the communication protocol ability can be described using some of items which express communication protocol attributes stored in the storage means. </claim-text>
</claim>
<claim id="CLM-00003">
<claim-text><highlight><bold>3</bold></highlight>. The communication control apparatus according to <dependent-claim-reference depends_on="CLM-00002">claim 2</dependent-claim-reference>, characterized in that when IEEE 1394.3 is used as the communication protocol and a role thereof is an initiator, a version item in a unit directory defined by IEEE 1212R is utilized as an attribute item which enables describing said at least two device attributes depending on the communication protocol ability. </claim-text>
</claim>
<claim id="CLM-00004">
<claim-text><highlight><bold>4</bold></highlight>. The communication control apparatus according to <dependent-claim-reference depends_on="CLM-00003">claim 3</dependent-claim-reference>, characterized in that when a plurality of attributes depend on the communication protocol, the unit directory which expresses the attributes depending on the communication protocol is permitted to have only one unit directory which describes all items including the version item in accordance with an IEEE 1394.3 definition, and a unit directory which expresses an attribute other than the attributes is permitted to have one or a plurality of unit directories in which only the version item has a specific value different from the IEEE 1394.3 definition and another item complies with the IEEE 1394.3 definition. </claim-text>
</claim>
<claim id="CLM-00005">
<claim-text><highlight><bold>5</bold></highlight>. The communication control apparatus according to <dependent-claim-reference depends_on="CLM-00004">claim 4</dependent-claim-reference>, characterized in that a unit directory which corresponds to only one attribute depending on the communication protocol and can communicate with a target complying with IEEE 1394.3 is described including a version item in accordance with the IEEE 1394.3 definition, and another attribute is described by a unit directory in which only the version item has a specific value different from the IEEE 1394.3 definition and another item complies with the IEEE 1394.3 definition. </claim-text>
</claim>
<claim id="CLM-00006">
<claim-text><highlight><bold>6</bold></highlight>. A computer program which uses a computer which is connected to another device by communication means and can directly read data in a memory from said another device by designating an address of the data, wherein the computer program realizes readably storing a function providable by the computer via the communication line, and storing at least two attributes depending on a communication protocol ability of the communication means. </claim-text>
</claim>
<claim id="CLM-00007">
<claim-text><highlight><bold>7</bold></highlight>. The computer program according to <dependent-claim-reference depends_on="CLM-00006">claim 6</dependent-claim-reference>, characterized in that when at least two attributes depending on the communication protocol ability are to be described in a computer which adopts a protocol which does not allow describing in each device at least two attributes depending on the communication protocol ability, said at least two device attributes depending on the communication protocol ability can be described using some of items which express communication protocol attributes stored in the storage means. </claim-text>
</claim>
<claim id="CLM-00008">
<claim-text><highlight><bold>8</bold></highlight>. The computer program according to <dependent-claim-reference depends_on="CLM-00007">claim 7</dependent-claim-reference>, characterized in that when IEEE 1394.3 is used as the communication protocol and a role thereof is an initiator, a version item in a unit directory defined by IEEE 1212R is utilized as an attribute item which enables describing said at least two device attributes depending on the communication protocol ability. </claim-text>
</claim>
<claim id="CLM-00009">
<claim-text><highlight><bold>9</bold></highlight>. The computer program according to <dependent-claim-reference depends_on="CLM-00008">claim 8</dependent-claim-reference>, characterized in that when a plurality of attributes depend on the communication protocol, the unit directory which expresses the attributes depending on the communication protocol is permitted to have only one unit directory which describes all items including the version item in accordance with an IEEE 1394.3 definition, and a unit directory which expresses an attribute other than the attributes is permitted to have one or a plurality of unit directories in which only the version item has a specific value different from the IEEE 1394.3 definition and another item complies with the IEEE 1394.3 definition. </claim-text>
</claim>
<claim id="CLM-00010">
<claim-text><highlight><bold>10</bold></highlight>. The computer program according to <dependent-claim-reference depends_on="CLM-00009">claim 9</dependent-claim-reference>, characterized in that a unit directory which corresponds to only one attribute depending on the communication protocol and can communicate with a target complying with IEEE 1394.3 is described including a version item in accordance with the IEEE 1394.3 definition, and another attribute is described by a unit directory in which only the version item has a specific value different from the IEEE 1394.3 definition and another item complies with the IEEE 1394.3 definition. </claim-text>
</claim>
<claim id="CLM-00011">
<claim-text><highlight><bold>11</bold></highlight>. A communication control method in a communication control apparatus in which data in a memory of a device can be directly read by another connected device via a communication line by designating an address of the data, and the devices are connected to each other by communication means, characterized in that 
<claim-text>a function providable by the device is readably stored via the communication line, and at least two attributes depending on a communication protocol ability of the communication means are stored. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00012">
<claim-text><highlight><bold>12</bold></highlight>. A computer-readable memory characterized by storing in a computer the computer program defined in any one of <dependent-claim-reference depends_on="CLM-00006">claims 6</dependent-claim-reference> to <dependent-claim-reference depends_on="CLM-00010">10</dependent-claim-reference>. </claim-text>
</claim>
<claim id="CLM-00013">
<claim-text><highlight><bold>13</bold></highlight>. A communication control apparatus for providing a service requested of a device connected via a communication line, characterized by comprising: 
<claim-text>a plurality of service providing devices; and </claim-text>
<claim-text>storage means for storing pieces of information about services provided by said plurality of service providing devices so as to enable reading the pieces of information by another device via the communication line, </claim-text>
<claim-text>wherein the pieces of information about the services are constituted by a hierarchical tree structure for each of said plurality of service providing devices. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00014">
<claim-text><highlight><bold>14</bold></highlight>. A communication control method for providing a service requested of a device connected via a communication line, characterized by comprising 
<claim-text>storing, in storage means, pieces of information about services provided by a plurality of service providing devices so as to enable reading the pieces of information by another device via the communication line, </claim-text>
<claim-text>wherein the pieces of information about the services are constituted by a hierarchical tree structure for each of the plurality of service providing devices. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00015">
<claim-text><highlight><bold>15</bold></highlight>. A computer program for causing a computer to provide a service requested of a device connected via a communication line, characterized by realizing 
<claim-text>storage means for storing pieces of information about services provided by a plurality of service providing devices so as to enable reading the pieces of information by another device via the communication line, </claim-text>
<claim-text>wherein the pieces of information about the services are constituted by a hierarchical tree structure for each of the plurality of service providing devices. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00016">
<claim-text><highlight><bold>16</bold></highlight>. A computer-readable memory characterized by storing in a computer the computer program defined in claim <highlight><bold>15</bold></highlight>.</claim-text>
</claim>
</subdoc-claims>
<subdoc-drawings id="DRAWINGS">
<heading lvl="0" align="CENTER">Drawings</heading>
<representative-figure>3B</representative-figure>
<figure id="figure-D00000">
<image id="EMI-D00000" file="US20030005106A1-20030102-D00000.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00001">
<image id="EMI-D00001" file="US20030005106A1-20030102-D00001.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00002">
<image id="EMI-D00002" file="US20030005106A1-20030102-D00002.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00003">
<image id="EMI-D00003" file="US20030005106A1-20030102-D00003.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00004">
<image id="EMI-D00004" file="US20030005106A1-20030102-D00004.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00005">
<image id="EMI-D00005" file="US20030005106A1-20030102-D00005.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00006">
<image id="EMI-D00006" file="US20030005106A1-20030102-D00006.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00007">
<image id="EMI-D00007" file="US20030005106A1-20030102-D00007.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00008">
<image id="EMI-D00008" file="US20030005106A1-20030102-D00008.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00009">
<image id="EMI-D00009" file="US20030005106A1-20030102-D00009.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00010">
<image id="EMI-D00010" file="US20030005106A1-20030102-D00010.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00011">
<image id="EMI-D00011" file="US20030005106A1-20030102-D00011.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00012">
<image id="EMI-D00012" file="US20030005106A1-20030102-D00012.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00013">
<image id="EMI-D00013" file="US20030005106A1-20030102-D00013.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00014">
<image id="EMI-D00014" file="US20030005106A1-20030102-D00014.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00015">
<image id="EMI-D00015" file="US20030005106A1-20030102-D00015.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00016">
<image id="EMI-D00016" file="US20030005106A1-20030102-D00016.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00017">
<image id="EMI-D00017" file="US20030005106A1-20030102-D00017.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00018">
<image id="EMI-D00018" file="US20030005106A1-20030102-D00018.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00019">
<image id="EMI-D00019" file="US20030005106A1-20030102-D00019.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00020">
<image id="EMI-D00020" file="US20030005106A1-20030102-D00020.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00021">
<image id="EMI-D00021" file="US20030005106A1-20030102-D00021.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00022">
<image id="EMI-D00022" file="US20030005106A1-20030102-D00022.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00023">
<image id="EMI-D00023" file="US20030005106A1-20030102-D00023.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00024">
<image id="EMI-D00024" file="US20030005106A1-20030102-D00024.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00025">
<image id="EMI-D00025" file="US20030005106A1-20030102-D00025.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00026">
<image id="EMI-D00026" file="US20030005106A1-20030102-D00026.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00027">
<image id="EMI-D00027" file="US20030005106A1-20030102-D00027.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00028">
<image id="EMI-D00028" file="US20030005106A1-20030102-D00028.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00029">
<image id="EMI-D00029" file="US20030005106A1-20030102-D00029.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00030">
<image id="EMI-D00030" file="US20030005106A1-20030102-D00030.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00031">
<image id="EMI-D00031" file="US20030005106A1-20030102-D00031.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00032">
<image id="EMI-D00032" file="US20030005106A1-20030102-D00032.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00033">
<image id="EMI-D00033" file="US20030005106A1-20030102-D00033.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00034">
<image id="EMI-D00034" file="US20030005106A1-20030102-D00034.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00035">
<image id="EMI-D00035" file="US20030005106A1-20030102-D00035.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00036">
<image id="EMI-D00036" file="US20030005106A1-20030102-D00036.TIF" imf="TIFF" ti="DR"/>
</figure>
</subdoc-drawings>
</patent-application-publication>
