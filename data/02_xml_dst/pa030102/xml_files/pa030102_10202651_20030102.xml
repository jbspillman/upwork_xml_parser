<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE patent-application-publication SYSTEM "pap-v16-2002-01-01.dtd" [
<!ENTITY US20030003932A1-20030102-D00000.TIF SYSTEM "US20030003932A1-20030102-D00000.TIF" NDATA TIF>
<!ENTITY US20030003932A1-20030102-D00001.TIF SYSTEM "US20030003932A1-20030102-D00001.TIF" NDATA TIF>
<!ENTITY US20030003932A1-20030102-D00002.TIF SYSTEM "US20030003932A1-20030102-D00002.TIF" NDATA TIF>
<!ENTITY US20030003932A1-20030102-D00003.TIF SYSTEM "US20030003932A1-20030102-D00003.TIF" NDATA TIF>
<!ENTITY US20030003932A1-20030102-D00004.TIF SYSTEM "US20030003932A1-20030102-D00004.TIF" NDATA TIF>
]>
<patent-application-publication>
<subdoc-bibliographic-information>
<document-id>
<doc-number>20030003932</doc-number>
<kind-code>A1</kind-code>
<document-date>20030102</document-date>
</document-id>
<publication-filing-type>new</publication-filing-type>
<domestic-filing-data>
<application-number>
<doc-number>10202651</doc-number>
</application-number>
<application-number-series-code>10</application-number-series-code>
<filing-date>20020725</filing-date>
</domestic-filing-data>
<foreign-priority-data>
<priority-application-number>
<doc-number>2000/0096</doc-number>
</priority-application-number>
<filing-date>20000201</filing-date>
<country-code>IE</country-code>
</foreign-priority-data>
<technical-information>
<classification-ipc>
<classification-ipc-primary>
<ipc>H04Q007/20</ipc>
</classification-ipc-primary>
<classification-ipc-edition>07</classification-ipc-edition>
</classification-ipc>
<classification-us>
<classification-us-primary>
<uspc>
<class>455</class>
<subclass>466000</subclass>
</uspc>
</classification-us-primary>
<classification-us-secondary>
<uspc>
<class>455</class>
<subclass>412000</subclass>
</uspc>
</classification-us-secondary>
</classification-us>
<title-of-invention>Messaging applications router</title-of-invention>
</technical-information>
<continuity-data>
<continuations>
<continuation-of>
<parent-child>
<child>
<document-id>
<doc-number>10202651</doc-number>
<kind-code>A1</kind-code>
<document-date>20020725</document-date>
</document-id>
</child>
<parent>
<document-id>
<doc-number>PCT/IE01/00012</doc-number>
<document-date>20010201</document-date>
<country-code>US</country-code>
</document-id>
</parent>
<parent-status>UNKNOWN</parent-status>
</parent-child>
</continuation-of>
</continuations>
</continuity-data>
<inventors>
<first-named-inventor>
<name>
<given-name>Louis</given-name>
<family-name>Corrigan</family-name>
</name>
<residence>
<residence-non-us>
<city>Enfield</city>
<country-code>IE</country-code>
</residence-non-us>
</residence>
<authority-applicant>INV</authority-applicant>
</first-named-inventor>
<inventor>
<name>
<given-name>Joseph</given-name>
<family-name>Cunningham</family-name>
</name>
<residence>
<residence-non-us>
<city>Dublin</city>
<country-code>IE</country-code>
</residence-non-us>
</residence>
<authority-applicant>INV</authority-applicant>
</inventor>
<inventor>
<name>
<given-name>John</given-name>
<family-name>Murtagh</family-name>
</name>
<residence>
<residence-non-us>
<city>Dublin</city>
<country-code>IE</country-code>
</residence-non-us>
</residence>
<authority-applicant>INV</authority-applicant>
</inventor>
</inventors>
<correspondence-address>
<name-1>JACOBSON HOLMAN PLLC</name-1>
<name-2></name-2>
<address>
<address-1>400 SEVENTH STREET N.W.</address-1>
<address-2>SUITE 600</address-2>
<city>WASHINGTON</city>
<state>DC</state>
<postalcode>20004</postalcode>
<country>
<country-code>US</country-code>
</country>
</address>
</correspondence-address>
</subdoc-bibliographic-information>
<subdoc-abstract>
<paragraph id="A-0001" lvl="0">A messaging applications router (MAR, <highlight><bold>1</bold></highlight>) has router notes (RNs) which interface with external short message service centers (SMSCs). A management node (MN, <highlight><bold>12</bold></highlight>) and each router node maintain a DNS server, and in the routing nodes the DNS servers are linked with a routing agent (RA). Each router node binds to SMSCs transparently to the ESMEs depending upon current load distribution and configuration settings. </paragraph>
</subdoc-abstract>
<subdoc-description>
<summary-of-invention>
<section>
<heading lvl="1">INTRODUCTION </heading>
<paragraph id="P-0001" lvl="0"><number>&lsqb;0001&rsqb;</number> The invention relates to routing, particularly of short messages and associated signals in a mobile telecommunications network environment. </paragraph>
<paragraph id="P-0002" lvl="0"><number>&lsqb;0002&rsqb;</number> One object of the invention is to allow operators to scale short message capacity up or down in a simple and flexible manner. </paragraph>
<paragraph id="P-0003" lvl="0"><number>&lsqb;0003&rsqb;</number> Another object is to reduce the extent to which third party systems are connected to core network infrastructure. </paragraph>
</section>
<section>
<heading lvl="1">SUMMARY OF THE INVENTION </heading>
<paragraph id="P-0004" lvl="0"><number>&lsqb;0004&rsqb;</number> According to the invention, there is provided a messaging applications router comprising: </paragraph>
<paragraph id="P-0005" lvl="2"><number>&lsqb;0005&rsqb;</number> means for interfacing with a plurality external short message entities (ESMEs) for receiving mobile terminating messages generated by ESMEs and for sending mobile originating messages addressed to ESMEs; </paragraph>
<paragraph id="P-0006" lvl="2"><number>&lsqb;0006&rsqb;</number> means for interfacing with a plurality of short message service centres (SMSCs) for receiving mobile originating messages addressed to ESMEs and for sending mobile terminating messages; </paragraph>
<paragraph id="P-0007" lvl="2"><number>&lsqb;0007&rsqb;</number> routing means comprising means for routing said messages; </paragraph>
<paragraph id="P-0008" lvl="2"><number>&lsqb;0008&rsqb;</number> a management means comprising means for setting a routing configuration, and </paragraph>
<paragraph id="P-0009" lvl="2"><number>&lsqb;0009&rsqb;</number> a user interface comprising means for receiving user configuration settings and for outputting routing data. </paragraph>
<paragraph id="P-0010" lvl="0"><number>&lsqb;0010&rsqb;</number> In one embodiment, the routing means comprises means for interfacing with SMSCs transparently to the ESMEs whereby SMSCs can be added or deleted without affecting the ESMEs. </paragraph>
<paragraph id="P-0011" lvl="0"><number>&lsqb;0011&rsqb;</number> In another embodiment, the routing means comprises a plurality of router nodes. </paragraph>
<paragraph id="P-0012" lvl="0"><number>&lsqb;0012&rsqb;</number> In one embodiment, the router node comprises: </paragraph>
<paragraph id="P-0013" lvl="2"><number>&lsqb;0013&rsqb;</number> a routing agent for bidirectional routing of messages, and </paragraph>
<paragraph id="P-0014" lvl="2"><number>&lsqb;0014&rsqb;</number> a domain name server (DNS). </paragraph>
<paragraph id="P-0015" lvl="0"><number>&lsqb;0015&rsqb;</number> In another embodiment, the router node comprises means for sending bind requests to each SMSC associated with an ESME. </paragraph>
<paragraph id="P-0016" lvl="0"><number>&lsqb;0016&rsqb;</number> Preferably, each router node has an address. </paragraph>
<paragraph id="P-0017" lvl="0"><number>&lsqb;0017&rsqb;</number> In another embodiment, the address is an IP address. </paragraph>
<paragraph id="P-0018" lvl="0"><number>&lsqb;0018&rsqb;</number> In one embodiment, a DNS server comprises means for providing an address of a least busy router node. </paragraph>
<paragraph id="P-0019" lvl="0"><number>&lsqb;0019&rsqb;</number> In another embodiment, the DNS server comprises means for providing an address to a requesting ESME. </paragraph>
<paragraph id="P-0020" lvl="0"><number>&lsqb;0020&rsqb;</number> In one embodiment, the DNS server comprises means for polling router nodes to determine loading. </paragraph>
<paragraph id="P-0021" lvl="0"><number>&lsqb;0021&rsqb;</number> In another embodiment, the routing means comprises an external address distributor comprising means for routing signals for load balancing. </paragraph>
<paragraph id="P-0022" lvl="0"><number>&lsqb;0022&rsqb;</number> In one embodiment, the router comprises means for routing messages to more than one SMSC according to a load balancing process. </paragraph>
<paragraph id="P-0023" lvl="0"><number>&lsqb;0023&rsqb;</number> In another embodiment, the routing means comprises means for receiving operator inputs indicating available SMSCs and means for automatically detecting available SMSCs. </paragraph>
<paragraph id="P-0024" lvl="0"><number>&lsqb;0024&rsqb;</number> In one embodiment, the routing means comprises means for retrieving SMSC fault data in an SMSC, such as SS7 fault data. </paragraph>
<paragraph id="P-0025" lvl="0"><number>&lsqb;0025&rsqb;</number> In another embodiment, the user interface node comprises means for generating and outputting real time client data indicating message traffic and bound ESMEs. </paragraph>
<paragraph id="P-0026" lvl="0"><number>&lsqb;0026&rsqb;</number> In one embodiment, the user interface node comprises means for generating and outputting real time client data indicating router node traffic. </paragraph>
<paragraph id="P-0027" lvl="0"><number>&lsqb;0027&rsqb;</number> In another embodiment, the user interface node comprises a configuration management client comprising means for configuring ESME parameters, SMSC parameters, and a router node configuration. </paragraph>
<paragraph id="P-0028" lvl="0"><number>&lsqb;0028&rsqb;</number> In one embodiment, the management means comprises means for forwarding configuration data to the router nodes. </paragraph>
<paragraph id="P-0029" lvl="0"><number>&lsqb;0029&rsqb;</number> In one embodiment, the management node comprise an SNMP sub-agent for managing an alarm and statistics database. </paragraph>
<paragraph id="P-0030" lvl="0"><number>&lsqb;0030&rsqb;</number> In another embodiment, the management means comprises an event handler for receiving and logging event information from the router nodes. </paragraph>
</section>
<section>
<heading lvl="1">DETAILED DESCRIPTION OF THE INVENTION</heading>
</section>
</summary-of-invention>
<brief-description-of-drawings>
<section>
<heading lvl="1">BRIEF DESCRIPTION OF THE DRAWINGS </heading>
<paragraph id="P-0031" lvl="0"><number>&lsqb;0031&rsqb;</number> The invention will be more clearly understood from the following description of some embodiments thereof, given by way of example only with reference to the accompanying drawings in which: </paragraph>
<paragraph id="P-0032" lvl="0"><number>&lsqb;0032&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1</cross-reference> is a diagram showing the context of a router of the invention; </paragraph>
<paragraph id="P-0033" lvl="0"><number>&lsqb;0033&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 2</cross-reference> is a diagram illustrating configuration of the router; </paragraph>
<paragraph id="P-0034" lvl="0"><number>&lsqb;0034&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3</cross-reference> is a diagram showing configuration of a router node of the router; </paragraph>
<paragraph id="P-0035" lvl="0"><number>&lsqb;0035&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 4</cross-reference> is a diagram illustrating handling of bind requests from an ESME; </paragraph>
<paragraph id="P-0036" lvl="0"><number>&lsqb;0036&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 5</cross-reference> is a diagram illustrating use of DNS to obtain an RN IP address; </paragraph>
<paragraph id="P-0037" lvl="0"><number>&lsqb;0037&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 6</cross-reference> is a diagram illustrating use of external IP distributors; and </paragraph>
<paragraph id="P-0038" lvl="0"><number>&lsqb;0038&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 7 a</cross-reference> diagram showing configuration of a management node of the router.</paragraph>
</section>
</brief-description-of-drawings>
<detailed-description>
<paragraph id="P-0039" lvl="0"><number>&lsqb;0039&rsqb;</number> Referring to the drawings, and initially to <cross-reference target="DRAWINGS">FIG. 1, a</cross-reference> messaging applications router (&ldquo;MAR&rdquo; or &ldquo;router&rdquo;) <highlight><bold>1</bold></highlight> interfaces on one side with value added messaging services (VAMSs) <highlight><bold>2</bold></highlight> and on the other with short message service centres (SMSCs) <highlight><bold>3</bold></highlight> of a mobile network <highlight><bold>4</bold></highlight>. The VAMSs <highlight><bold>2</bold></highlight> are more generally external short message entities (ESMEs). </paragraph>
<paragraph id="P-0040" lvl="0"><number>&lsqb;0040&rsqb;</number> The router <highlight><bold>1</bold></highlight> provides a single contact point for VAMs platforms to connect to a network operator&apos;s SMS infrastructure. Mobile Terminated (MT) messages generated by VAMs platforms are distributed across SMSCs installed in the network. Similarly, Mobile Originated (MO) messages arriving at any SMSC are passed by the router <highlight><bold>1</bold></highlight> back to the correct VAMS platform. </paragraph>
<paragraph id="P-0041" lvl="0"><number>&lsqb;0041&rsqb;</number> The following are some of the key benefits: </paragraph>
<paragraph id="P-0042" lvl="2"><number>&lsqb;0042&rsqb;</number> Flexibility; SMSCs can be added or removed from the network with no impact on service. </paragraph>
<paragraph id="P-0043" lvl="2"><number>&lsqb;0043&rsqb;</number> High Redundancy; in the event of failure of an SMSC, traffic is automatically re-routed to other SMSCs in the mobile network. </paragraph>
<paragraph id="P-0044" lvl="2"><number>&lsqb;0044&rsqb;</number> Single point of contact; the Messaging Applications Router provides a single point of contact for all VAMS. VAMS do not need to be aware of the quantity or configuration of SMSCs within the network. </paragraph>
<paragraph id="P-0045" lvl="2"><number>&lsqb;0045&rsqb;</number> Separation layer; third party VAMS are not connected directly to core network infrastructure. </paragraph>
<paragraph id="P-0046" lvl="0"><number>&lsqb;0046&rsqb;</number> The MAR <highlight><bold>1</bold></highlight> has a simple user interface, allowing operators to configure SMS applications to be connected to one or several SMSCs in the network. This gives flexibility to the operator, allowing changes to be made to SMS traffic with no impact on service, and requiring no changes to the configurations of SMS applications. The changes that the MAR <highlight><bold>1</bold></highlight> supports include: </paragraph>
<paragraph id="P-0047" lvl="2"><number>&lsqb;0047&rsqb;</number> moving of an SMS application from an SMSC allocated for testing to the live network, </paragraph>
<paragraph id="P-0048" lvl="2"><number>&lsqb;0048&rsqb;</number> adding SMSCs to cope with increased messaging traffic, </paragraph>
<paragraph id="P-0049" lvl="2"><number>&lsqb;0049&rsqb;</number> adding SMS applications, and </paragraph>
<paragraph id="P-0050" lvl="2"><number>&lsqb;0050&rsqb;</number> rearranging and logically grouping SMS applications on specific SMSCs. </paragraph>
<paragraph id="P-0051" lvl="0"><number>&lsqb;0051&rsqb;</number> For Mobile Terminated (MT) traffic, operators can configure the router <highlight><bold>1</bold></highlight> to handle traffic from a particular SMPP (Short Message Peer to Peer) application in one of several ways: </paragraph>
<paragraph id="P-0052" lvl="2"><number>&lsqb;0052&rsqb;</number> (a) Designated with a single standby system </paragraph>
<paragraph id="P-0053" lvl="3"><number>&lsqb;0053&rsqb;</number> All messages from an SMPP application are routed to a single &lsquo;designated&rsquo; SMSC. If this SMSC is taken out of service, traffic is routed to a standby SMSC </paragraph>
<paragraph id="P-0054" lvl="2"><number>&lsqb;0054&rsqb;</number> (b) Distributed </paragraph>
<paragraph id="P-0055" lvl="3"><number>&lsqb;0055&rsqb;</number> Traffic is distributed over a number of SMSCs. In the event that one or more SMSCs are put out of service, traffic that would have been routed to the out of service SMSCs will be distributed over the remaining SMSCs </paragraph>
<paragraph id="P-0056" lvl="2"><number>&lsqb;0056&rsqb;</number> (c) Designated with distribution for standby </paragraph>
<paragraph id="P-0057" lvl="3"><number>&lsqb;0057&rsqb;</number> This option is a combination of the two above. In normal circumstances all traffic is routed to a &lsquo;designated&rsquo; SMSC. If this SMSC is taken out of service, traffic is distributed over a number of other SMSCs. </paragraph>
<paragraph id="P-0058" lvl="2"><number>&lsqb;0058&rsqb;</number> (d) Routing by destination number range. This is to distribute traffic over several networks, possibly with different technologies. </paragraph>
<paragraph id="P-0059" lvl="2"><number>&lsqb;0059&rsqb;</number> (e) Tiered routing modes using a combination of the method (a) and (d). </paragraph>
<paragraph id="P-0060" lvl="2"><number>&lsqb;0060&rsqb;</number> (f) The modular architecture allows additional routing methods to be easily added. </paragraph>
<paragraph id="P-0061" lvl="0"><number>&lsqb;0061&rsqb;</number> The MAR <highlight><bold>1</bold></highlight> is configured to run on a cluster of low-cost hardware platforms in an &lsquo;N&plus;1&rsquo; configuration. This approach gives the MAR <highlight><bold>1</bold></highlight> redundancy and scalability. Additional capacity can be provided by adding hardware platforms to the cluster. </paragraph>
<paragraph id="P-0062" lvl="0"><number>&lsqb;0062&rsqb;</number> The MAR <highlight><bold>1</bold></highlight> has an architecture comprising three types of nodes, as shown in <cross-reference target="DRAWINGS">FIG. 2</cross-reference>. </paragraph>
<paragraph id="P-0063" lvl="2"><number>&lsqb;0063&rsqb;</number> Router Node (RN) <highlight><bold>10</bold></highlight> </paragraph>
<paragraph id="P-0064" lvl="3"><number>&lsqb;0064&rsqb;</number> The Router Node is responsible for accepting messages from ESMEs and passing them to SMSCs, and vice versa. A MAR <highlight><bold>1</bold></highlight> has at least two RNs for resilience reasons, but additional RNs can be added to cope with increased traffic volumes. </paragraph>
<paragraph id="P-0065" lvl="2"><number>&lsqb;0065&rsqb;</number> User Interface Node (UIN) <highlight><bold>11</bold></highlight> </paragraph>
<paragraph id="P-0066" lvl="3"><number>&lsqb;0066&rsqb;</number> The User Interface Node allows users to configure and operate the MAR <highlight><bold>1</bold></highlight>. The MAR <highlight><bold>1</bold></highlight> may have several UINs, although only one UIN can modify the live configuration at one time. </paragraph>
<paragraph id="P-0067" lvl="2"><number>&lsqb;0067&rsqb;</number> Management Node (MN) <highlight><bold>12</bold></highlight> </paragraph>
<paragraph id="P-0068" lvl="3"><number>&lsqb;0068&rsqb;</number> The Management Node is responsible for collecting events, alarms and statistics, and communicating with the user interface. The MN <highlight><bold>12</bold></highlight> also sends Simple Network Management Protocol (SNMP) traps to the customer&apos;s network management system. </paragraph>
<paragraph id="P-0069" lvl="0"><number>&lsqb;0069&rsqb;</number> There is only one MN <highlight><bold>12</bold></highlight> in each MAR. In low capacity systems the MN can reside on the same hardware platform as one of the Router Nodes <highlight><bold>10</bold></highlight>. </paragraph>
<paragraph id="P-0070" lvl="7"><number>&lsqb;0070&rsqb;</number> Router Node (RN) </paragraph>
<paragraph id="P-0071" lvl="0"><number>&lsqb;0071&rsqb;</number> When an ESME sends a bind request to the MAR <highlight><bold>1</bold></highlight>, the request is handled by one of two or more identical Router Nodes <highlight><bold>10</bold></highlight>, shown in more detail in <cross-reference target="DRAWINGS">FIG. 3</cross-reference>. The decision of which Router Node an ESME&apos;s request must be directed to is taken by an addressing function. As shown in <cross-reference target="DRAWINGS">FIG. 3</cross-reference>, each RN consists of a Domain Name Server (DNS), and a Routing Agent (RA) implementing. a router process. Several DNS servers are available for redundancy. They run on any or all nodes in the MAR cluster. The Routing Agent is the RN&apos;s and MAR&apos;s functional core. The Routing Agent accepts Mobile Terminated messages from ESMEs and routes them to SMSCs in the network, and in the other direction receives Mobile Originated messages from Telepath SMSCs and routes them to ESMEs. </paragraph>
<paragraph id="P-0072" lvl="7"><number>&lsqb;0072&rsqb;</number> Handling ESME Binds </paragraph>
<paragraph id="P-0073" lvl="0"><number>&lsqb;0073&rsqb;</number> The MAR is transparent to ESMEs to avoid the need for changes to ESME software or configuration. When an ESME sends a transmitter bind request to the MAR, the Router Node <highlight><bold>10</bold></highlight> handling the request forwards bind requests to each SMSC the ESME is configured for, as shown in <cross-reference target="DRAWINGS">FIG. 4</cross-reference>. Assuming that the bind to at least one SMSC is successful, all subsequent message Protocol Data Units are forwarded by the RN with little or no changes to fields in the PDUs. Where a receiver ESME connection is made, all MO messages stored for that ESME in the SMSCs are forwarded by the RN. </paragraph>
<paragraph id="P-0074" lvl="7"><number>&lsqb;0074&rsqb;</number> Selection of a Router Node&mdash;IP Addressing </paragraph>
<paragraph id="P-0075" lvl="0"><number>&lsqb;0075&rsqb;</number> As described above, the MAR has more than one Router Node that ESMEs may connect to. Each of these RNs has a distinct IP address. Two solutions have been developed to allow the ESMEs to use one address to contact the MAR and also to balance the load between the RNs. The operator has the option to select one or both of these solutions. </paragraph>
<paragraph id="P-0076" lvl="7"><number>&lsqb;0076&rsqb;</number> Option 1&mdash;Use of Domain Name Servers (DNS) within the MAR </paragraph>
<paragraph id="P-0077" lvl="0"><number>&lsqb;0077&rsqb;</number> A preferred solution is that each ESME is configured with a domain name for the operator&apos;s MAR rather than an IP address. This solution is illustrated in <cross-reference target="DRAWINGS">FIG. 5</cross-reference>. </paragraph>
<paragraph id="P-0078" lvl="0"><number>&lsqb;0078&rsqb;</number> Before connecting to the MAR, an ESME first communicates with one of the MAR&apos;s DNS servers to obtain an IP address to connect to. (For resilience reasons, the ESME&apos;s DNS resolver file will always be configured with the IP addresses of at least two of the MAR&apos;s DNS servers). The DNS server responds with the IP address of the RN currently supporting the least number of ESME connections. The ESME will then connect to this IP address and establish an SMPP connection using a bind operation. </paragraph>
<paragraph id="P-0079" lvl="0"><number>&lsqb;0079&rsqb;</number> To determine the ESME loading of each RN, the DNS servers send an enquiry to each RN. The RN responses are used to sort the IP addresses returned. If an RN has failed, the DNS servers will not get response to a load enquiry, and therefore will not return the RN&apos;s IP address. </paragraph>
<paragraph id="P-0080" lvl="7"><number>&lsqb;0080&rsqb;</number> Option 2&mdash;Use of External IP Distributors </paragraph>
<paragraph id="P-0081" lvl="0"><number>&lsqb;0081&rsqb;</number> For operators who do not wish to implement DNS as a way of identifying the most available node, there is an alternative solution that uses external IP distributors, shown in <cross-reference target="DRAWINGS">FIG. 6</cross-reference>. The external IP distributor uses a single IP address, which ESMEs use to open a TCP/IP connection. When ESMEs connect, the distributor will assign the connection to one of the RNs within the MAR based on their respective loads. Although ESMEs will continue to send all IP packets to the distributor, the distributor will rewrite packet headers and forward them on to the appropriate RNs. The distributor determines the most lightly loaded RN by selecting the RN currently supporting the smallest number of ESME connections. This option is suitable where ESMEs do not have to be modified to use Domain Names rather than IP addresses. </paragraph>
<paragraph id="P-0082" lvl="7"><number>&lsqb;0082&rsqb;</number> Distribution of Mobile Terminated Messages </paragraph>
<paragraph id="P-0083" lvl="0"><number>&lsqb;0083&rsqb;</number> The MAR can be configured to send Mobile Terminated (MT) messages from an ESME either to one designated SMSC, or to distribute them over several or all SMSCs. A third option provides a combination of these two approaches. The three message distribution methods are described below. </paragraph>
<paragraph id="P-0084" lvl="7"><number>&lsqb;0084&rsqb;</number> Routing MT Messages to a Designated SMSC with a Single Back-Up SMSC </paragraph>
<paragraph id="P-0085" lvl="0"><number>&lsqb;0085&rsqb;</number> In this case all traffic from the ESME is sent to a specific SMSC. One or more backup SMSCs can also be configured which would be used in the event of a failure of the designated SMSC. If such a failure occurs a distribution process, described below, is used by the RA to route messages to the backup SMSCs. </paragraph>
<paragraph id="P-0086" lvl="7"><number>&lsqb;0086&rsqb;</number> Distribution over Several or all SMSCs </paragraph>
<paragraph id="P-0087" lvl="0"><number>&lsqb;0087&rsqb;</number> Routing of MT messages over more than one SMSC is performed using a &lsquo;hashing&rsquo; process. This process uses a message&apos;s destination MSISDN to select which SMSC the message is to be sent to. The process meets the following requirements: </paragraph>
<paragraph id="P-0088" lvl="2"><number>&lsqb;0088&rsqb;</number> MSISDNs map to SMSCs in a deterministic manner. Messages sent by an ESME to a particular destination MSISDN are always routed to the same SMSC. This ensures that in normal circumstances messages to a particular ESME are always delivered in the correct order. </paragraph>
<paragraph id="P-0089" lvl="2"><number>&lsqb;0089&rsqb;</number> Messages are statistically distributed amongst the SMSCs in a configurable manner, so that SMSCs with a greater carrying capacity receive a greater proportion of messages. </paragraph>
<paragraph id="P-0090" lvl="2"><number>&lsqb;0090&rsqb;</number> The algorithm copes with the possibility of unplanned SMSC outage. In this case, messages initially destined for an unavailable SMSC are re-routed to an active SMSC. An SMSC outage does not disrupt the MSISDN/SMSC mapping for the other SMSCs. Traffic which was to be routed to the failed SMSC is re-routed over the remaining SMSCs. The algorithm handles MSISDNs containing alpha characters as well as numerical characters. The algorithm uses weighting values configured in the MAR for each SMSC to determine the proportion of messages to be sent to each SMSC. </paragraph>
<paragraph id="P-0091" lvl="7"><number>&lsqb;0091&rsqb;</number> Detection of SMSC and SS7 Network Failures </paragraph>
<paragraph id="P-0092" lvl="7"><number>&lsqb;0092&rsqb;</number> SMSC Failures </paragraph>
<paragraph id="P-0093" lvl="0"><number>&lsqb;0093&rsqb;</number> An operator may remove an SMSC from its network for maintenance or other reasons. The operator advises the MAR of this action by changing the system configuration on the MAR user interface. Router Nodes are then informed that no messages are to be sent to the inactive SMSC. The MAR also detects unplanned SMSC outages. Each Router Node monitors the SMSC connections it has established and will consider an SMSC as having failed if one of the following occurs: </paragraph>
<paragraph id="P-0094" lvl="2"><number>&lsqb;0094&rsqb;</number> an attempt to forward a message to the SMSC fails&mdash;the transaction times out, or </paragraph>
<paragraph id="P-0095" lvl="2"><number>&lsqb;0095&rsqb;</number> the Router Node detects disconnection activity on the socket. </paragraph>
<paragraph id="P-0096" lvl="0"><number>&lsqb;0096&rsqb;</number> If either of these occurs the messages initially destined for the failed SMSC are rerouted to another SMSC by the message distribution algorithm. If all of the SMSCs an ESME is configured to use are detected as having failed, the MAR will initiate a disconnection sequence with the ESME. </paragraph>
<paragraph id="P-0097" lvl="0"><number>&lsqb;0097&rsqb;</number> It should be noted that in the event an ESME sends an enquire_link PDU to the MAR, the MAR forwards this query to the SMSCs currently bound in. If the MAR receives a valid response from at least one SMSC, it forwards this response to the ESME. The MAR will not return to it more than one enquire_link response to the ESME, in order to avoid confusing it. </paragraph>
<paragraph id="P-0098" lvl="7"><number>&lsqb;0098&rsqb;</number> SS7 Network Faults </paragraph>
<paragraph id="P-0099" lvl="0"><number>&lsqb;0099&rsqb;</number> A Router Node may cease to send messages to an SMSC if it believes the SMSC to be experiencing problems with its SS7 side. The MAR attempts to detect such problems by reading the relevant, SS7 fault data stored in an SMSC&apos;s OAM MIB database. As this database is updated by an SMSC with its failure and fault information, each Router Node periodically &lsquo;fetches&rsquo; SS7 status from each SMSC that it has established a connection with. If an SS7 fault is detected on a particular SMSC, the RN will not forward messages to this SMSC until the fault is cleared. This feature can be disabled if required. </paragraph>
<paragraph id="P-0100" lvl="7"><number>&lsqb;0100&rsqb;</number> Interaction with Other Components </paragraph>
<paragraph id="P-0101" lvl="2"><number>&lsqb;0101&rsqb;</number> The Router Node must not only communicate with ESMEs, but also with the other elements that comprise the MAR. This internal interaction can be summarised as follows: </paragraph>
<paragraph id="P-0102" lvl="2"><number>&lsqb;0102&rsqb;</number> The Router Node obtains the user-entered configuration data from the Management Node. </paragraph>
<paragraph id="P-0103" lvl="2"><number>&lsqb;0103&rsqb;</number> A Routing Agent accepts queries from DNS components residing on a Router Node or Management Node. The RA responds with its current load level. </paragraph>
<paragraph id="P-0104" lvl="2"><number>&lsqb;0104&rsqb;</number> The RN periodically sends statistical information to the SNMP component residing on the Management Node. </paragraph>
<paragraph id="P-0105" lvl="2"><number>&lsqb;0105&rsqb;</number> The RN sends event information, as events occur, to an &lsquo;event handler&rsquo; residing on the Management Node. </paragraph>
<paragraph id="P-0106" lvl="7"><number>&lsqb;0106&rsqb;</number> User Interface Node (UIN) </paragraph>
<paragraph id="P-0107" lvl="0"><number>&lsqb;0107&rsqb;</number> The User Interface Node resides on a Microsoft Windows&trade; platform. It consists of two components: </paragraph>
<paragraph id="P-0108" lvl="2"><number>&lsqb;0108&rsqb;</number> Real-Time Data Client&mdash;Displays statistical information in real-time, at user-specified time intervals. </paragraph>
<paragraph id="P-0109" lvl="2"><number>&lsqb;0109&rsqb;</number> Configuration Management Client&mdash;Allows the user to define the ESME, SMSC and Router Node configuration. Also allows the user to specify a file, residing on disk, which contains the translation table to be used by an SMSC. The MAR then sends this file to the appropriate directory on the SMSC platform. </paragraph>
<paragraph id="P-0110" lvl="0"><number>&lsqb;0110&rsqb;</number> As shown in <cross-reference target="DRAWINGS">FIG. 2</cross-reference>, the UIN communicates with the Management Node. The UIN obtains statistical information from the MN, and sends it the latest ESME and SMSC configuration as defined by the user. </paragraph>
<paragraph id="P-0111" lvl="7"><number>&lsqb;0111&rsqb;</number> Real-Time Data Client (RDC) </paragraph>
<paragraph id="P-0112" lvl="0"><number>&lsqb;0112&rsqb;</number> The RDC window may be displayed by more than one user at any one time, and displays charts described below. The parameters displayed on the charts are updated periodically at an interval configured by the user. </paragraph>
<paragraph id="P-0113" lvl="2"><number>&lsqb;0113&rsqb;</number> Message Traffic&mdash;Time series line graph which plots the message rates; the number of MT, MO and total messages vs. time, being handled by the MAR. The MT, MO and total messages are shown as three distinct traces. </paragraph>
<paragraph id="P-0114" lvl="2"><number>&lsqb;0114&rsqb;</number> Bound ESMEs&mdash;Bar chart showing the number of currently bound ESMEs per Router Node. </paragraph>
<paragraph id="P-0115" lvl="2"><number>&lsqb;0115&rsqb;</number> Router Message Traffic&mdash;Bar chart showing the number of messages handled over the past (configured) time interval by each Router Node. </paragraph>
<paragraph id="P-0116" lvl="7"><number>&lsqb;0116&rsqb;</number> Configuration Management Client (CMC) </paragraph>
<paragraph id="P-0117" lvl="0"><number>&lsqb;0117&rsqb;</number> The MAR is configured using a Configuration Management Client (CMC). The CMC has three main groups of parameters: </paragraph>
<paragraph id="P-0118" lvl="2"><number>&lsqb;0118&rsqb;</number> ESME parameters </paragraph>
<paragraph id="P-0119" lvl="2"><number>&lsqb;0119&rsqb;</number> SMSC parameters </paragraph>
<paragraph id="P-0120" lvl="2"><number>&lsqb;0120&rsqb;</number> Router node configuration. </paragraph>
<paragraph id="P-0121" lvl="0"><number>&lsqb;0121&rsqb;</number> ESME parameters are used to configure each SMS application connected to the Router. Most of these parameters are those that would in the absence of the MAR be set directly on the Telepath SMSC, and include: </paragraph>
<paragraph id="P-0122" lvl="2"><number>&lsqb;0122&rsqb;</number> ESME Name </paragraph>
<paragraph id="P-0123" lvl="2"><number>&lsqb;0123&rsqb;</number> ESME Password </paragraph>
<paragraph id="P-0124" lvl="2"><number>&lsqb;0124&rsqb;</number> Default TON&mdash;Default ESME Type of Number </paragraph>
<paragraph id="P-0125" lvl="2"><number>&lsqb;0125&rsqb;</number> Default NPI&mdash;Default ESME Number Plan Indicator </paragraph>
<paragraph id="P-0126" lvl="2"><number>&lsqb;0126&rsqb;</number> Default MSISDN&mdash;Default ESME Address </paragraph>
<paragraph id="P-0127" lvl="2"><number>&lsqb;0127&rsqb;</number> Max Sessions&mdash;Maximum number of bind sessions the ESME is permitted </paragraph>
<paragraph id="P-0128" lvl="2"><number>&lsqb;0128&rsqb;</number> Routing TON&mdash;Type of Number used with Routing Expression </paragraph>
<paragraph id="P-0129" lvl="2"><number>&lsqb;0129&rsqb;</number> Routing NPI&mdash;Number Plan Indicator used with Routing Expression </paragraph>
<paragraph id="P-0130" lvl="2"><number>&lsqb;0130&rsqb;</number> Max Msg Length&mdash;Maximum length of message that can be submitted by the ESME </paragraph>
<paragraph id="P-0131" lvl="2"><number>&lsqb;0131&rsqb;</number> List of SMSCs&mdash;The SMSCs the ESME&apos;s messages may be sent to </paragraph>
<paragraph id="P-0132" lvl="2"><number>&lsqb;0132&rsqb;</number> AIM Type&mdash;Simplex or Multiplex AIMs to be used </paragraph>
<paragraph id="P-0133" lvl="2"><number>&lsqb;0133&rsqb;</number> Designated Throttling&mdash;Throttling rate </paragraph>
<paragraph id="P-0134" lvl="2"><number>&lsqb;0134&rsqb;</number> Distributed Throttling&mdash;Throttling rate </paragraph>
<paragraph id="P-0135" lvl="0"><number>&lsqb;0135&rsqb;</number> SMSC configuration parameters are entered for each SMSC that the MAR must communicate to. The parameters include: </paragraph>
<paragraph id="P-0136" lvl="2"><number>&lsqb;0136&rsqb;</number> SMSC Name </paragraph>
<paragraph id="P-0137" lvl="2"><number>&lsqb;0137&rsqb;</number> SMSC IP Address </paragraph>
<paragraph id="P-0138" lvl="2"><number>&lsqb;0138&rsqb;</number> SMSC Enabled/Disabled </paragraph>
<paragraph id="P-0139" lvl="2"><number>&lsqb;0139&rsqb;</number> Weighting Value&mdash;The SMSC&apos;s weighting value, relative to the other SMSCs. This parameter is used by the message distribution algorithm to determine what proportion of ESME messages are to be sent to this SMSC </paragraph>
<paragraph id="P-0140" lvl="0"><number>&lsqb;0140&rsqb;</number> In addition, parameters are entered for each Router Node within the MAR including: </paragraph>
<paragraph id="P-0141" lvl="2"><number>&lsqb;0141&rsqb;</number> RN Name </paragraph>
<paragraph id="P-0142" lvl="2"><number>&lsqb;0142&rsqb;</number> RN Enabled/Disabled </paragraph>
<paragraph id="P-0143" lvl="2"><number>&lsqb;0143&rsqb;</number> Prevent Further ESME Binds&mdash;When this flag is set the RN maintains existing ESME connections, but rejects further bind attempts. </paragraph>
<paragraph id="P-0144" lvl="2"><number>&lsqb;0144&rsqb;</number> Max ESME Connections&mdash;Maximum number of ESME connections allowed for this RN. </paragraph>
<paragraph id="P-0145" lvl="7"><number>&lsqb;0145&rsqb;</number> Management Node (MN) </paragraph>
<paragraph id="P-0146" lvl="0"><number>&lsqb;0146&rsqb;</number> As shown in <cross-reference target="DRAWINGS">FIG. 7</cross-reference>, the Management Node consists of the following components: </paragraph>
<paragraph id="P-0147" lvl="2"><number>&lsqb;0147&rsqb;</number> Management Agent <highlight><bold>20</bold></highlight> </paragraph>
<paragraph id="P-0148" lvl="2"><number>&lsqb;0148&rsqb;</number> SNMP Sub-Agent <highlight><bold>21</bold></highlight> </paragraph>
<paragraph id="P-0149" lvl="2"><number>&lsqb;0149&rsqb;</number> DNS Server <highlight><bold>22</bold></highlight> </paragraph>
<paragraph id="P-0150" lvl="2"><number>&lsqb;0150&rsqb;</number> Event Handler <highlight><bold>23</bold></highlight> </paragraph>
<paragraph id="P-0151" lvl="0"><number>&lsqb;0151&rsqb;</number> The Management Agent (MA) <highlight><bold>20</bold></highlight> performs the following tasks: </paragraph>
<paragraph id="P-0152" lvl="2"><number>&lsqb;0152&rsqb;</number> Receives requests from the User Interface Node (UIN) <highlight><bold>11</bold></highlight> for statistical information, then retrieves and sends it the appropriate data. </paragraph>
<paragraph id="P-0153" lvl="2"><number>&lsqb;0153&rsqb;</number> Receives configuration data from the UIN. </paragraph>
<paragraph id="P-0154" lvl="2"><number>&lsqb;0154&rsqb;</number> Forwards ESME, SMSC and RN configuration data to the Router Nodes. </paragraph>
<paragraph id="P-0155" lvl="2"><number>&lsqb;0155&rsqb;</number> Remotely provisions the SMSC&apos;s AIM records with the latest ESME configuration data, including ESME name, password and throttling information. This allows the user to have in the MAR a central configuration point for many SMSC AIM parameters, as the user does not have to repeat the entry of the parameters at each SMSC. </paragraph>
<paragraph id="P-0156" lvl="0"><number>&lsqb;0156&rsqb;</number> The SNMP Sub-Agent is the custodian of the alarm and statistics database (SNMP MIB). It handles requests from the operator&apos;s SNMP Manager to view this information, and sends SNMP traps to the Manager when a system alarm is raised. The DNS component participates in the IP addressing function. The Event Handler component receives and logs event information from the Router Nodes. </paragraph>
<paragraph id="P-0157" lvl="7"><number>&lsqb;0157&rsqb;</number> ESME Message Throttling </paragraph>
<paragraph id="P-0158" lvl="0"><number>&lsqb;0158&rsqb;</number> The MAR can be configured on a per-ESME basis to support throttling of Mobile Terminated messages. To achieve this, the MAR simply configures throttling rates on the SMSC. When the maximum number of messages within a given time period has been reached, the SMSC sends an error message each time the SMS application attempts to submit another message, until the next time-period starts. </paragraph>
<paragraph id="P-0159" lvl="0"><number>&lsqb;0159&rsqb;</number> The MAR configures throttling on the SMSCs in two different ways depending on whether the MAR is configured to distribute traffic for the SMS application over a number of SMSCs, or to forward all messages to a single SMSC. These two cases are described below. </paragraph>
<paragraph id="P-0160" lvl="7"><number>&lsqb;0160&rsqb;</number> Distributed Throttling </paragraph>
<paragraph id="P-0161" lvl="0"><number>&lsqb;0161&rsqb;</number> Where the MAR is configured to distribute messages from an application over several SMSCs, the MAR divides this throttling rate amongst the SMSCs configured for this ESME according to the weighting assigned to these SMSCs and provisions these values. </paragraph>
<paragraph id="P-0162" lvl="0"><number>&lsqb;0162&rsqb;</number> Table 1 below gives a worked example for the case where: </paragraph>
<paragraph id="P-0163" lvl="2"><number>&lsqb;0163&rsqb;</number> the throttling rate set for the ESME is 20 messages per second, </paragraph>
<paragraph id="P-0164" lvl="2"><number>&lsqb;0164&rsqb;</number> the ESME is configured to use SMSC 1, 2, 3 and 4, and </paragraph>
<paragraph id="P-0165" lvl="2"><number>&lsqb;0165&rsqb;</number> the traffic capacity of SMSC 2 is twice that of the other SMSCs, and has been reflected in the weighting values assigned to each SMSC.  
<table-cwu id="TABLE-US-00001">
<number>1</number>
<table frame="none" colsep="0" rowsep="0">
<tgroup align="left" colsep="0" rowsep="0" cols="1">
<colspec colname="1" colwidth="217PT" align="center"/>
<thead>
<row>
<entry namest="1" nameend="1" align="center">TABLE 1</entry>
</row>
</thead>
<tbody valign="top">
<row>
<entry></entry>
</row>
<row><entry namest="1" nameend="1" align="center" rowsep="1"></entry>
</row>
<row>
<entry>Distributed Throttling example</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="3">
<colspec colname="1" colwidth="63PT" align="center"/>
<colspec colname="2" colwidth="56PT" align="center"/>
<colspec colname="3" colwidth="98PT" align="left"/>
<tbody valign="top">
<row>
<entry></entry>
<entry></entry>
<entry>Throttling rate configured by</entry>
</row>
<row>
<entry></entry>
<entry></entry>
<entry>the MAR for this Telepath</entry>
</row>
<row>
<entry>Telepath SMSC</entry>
<entry>Weighting Value</entry>
<entry>SMSC</entry>
</row>
<row><entry namest="1" nameend="3" align="center" rowsep="1"></entry>
</row>
<row>
<entry>SMSC 1</entry>
<entry>40</entry>
<entry>&ensp;8 messages per second</entry>
</row>
<row>
<entry>SMSC 2</entry>
<entry>20</entry>
<entry>&ensp;4 messages per second</entry>
</row>
<row>
<entry>SMSC 3</entry>
<entry>20</entry>
<entry>&ensp;4 messages per second</entry>
</row>
<row>
<entry>SMSC 4</entry>
<entry>20</entry>
<entry>&ensp;4 messages per second</entry>
</row>
<row>
<entry></entry>
<entry>Total</entry>
<entry>20 messages per second&ensp;</entry>
</row>
<row><entry namest="1" nameend="3" align="center" rowsep="1"></entry>
</row>
</tbody>
</tgroup>
</table>
</table-cwu>
</paragraph>
<paragraph id="P-0166" lvl="0"><number>&lsqb;0166&rsqb;</number> The benefits of this approach are: </paragraph>
<paragraph id="P-0167" lvl="2"><number>&lsqb;0167&rsqb;</number> as traffic from an SMS application approaches the throttling level configured or the application on the MAR, throttling will start to happen on connections to all SMSCs from the MAR, and </paragraph>
<paragraph id="P-0168" lvl="2"><number>&lsqb;0168&rsqb;</number> as SMSCs are taken out of service and the available traffic capacity reduces accordingly, the maximum traffic rate allowed for the ESME proportionally reduces. </paragraph>
<paragraph id="P-0169" lvl="7"><number>&lsqb;0169&rsqb;</number> Designated Throttling </paragraph>
<paragraph id="P-0170" lvl="0"><number>&lsqb;0170&rsqb;</number> Designated throttling can be used if the user has specified that an ESME&apos;s messages are to be sent to one, designated SMSC. For this case the throttling value entered at the Configuration Management Client is replicated in the associated AIM configuration provisioned on an SMSC by the MAR. </paragraph>
<paragraph id="P-0171" lvl="0"><number>&lsqb;0171&rsqb;</number> Where the MAR is configured for a particular SMS application to use designated routing with distribution over a number of SMSCs as a fallback, then separate Designated and Distributed throttling values can be configured. </paragraph>
<paragraph id="P-0172" lvl="7"><number>&lsqb;0172&rsqb;</number> MAR Access and ESME Security </paragraph>
<paragraph id="P-0173" lvl="0"><number>&lsqb;0173&rsqb;</number> The security features provided by the Messaging Applications Router cover two main areas: </paragraph>
<paragraph id="P-0174" lvl="2"><number>&lsqb;0174&rsqb;</number> user Interface security, and </paragraph>
<paragraph id="P-0175" lvl="2"><number>&lsqb;0175&rsqb;</number> password protection for ESMEs binding to the MAR and for the corresponding bind connections to SMSCs. </paragraph>
<paragraph id="P-0176" lvl="7"><number>&lsqb;0176&rsqb;</number> User Interface Security </paragraph>
<paragraph id="P-0177" lvl="0"><number>&lsqb;0177&rsqb;</number> Prior to viewing or entering any data on the MAR User Interface, a user must enter one of four passwords which have been set by the operator&apos;s designated system administrator for four different levels of access. If the password entered by the user is not recognized by the MAR, the user&apos;s request to display or modify MAR information is rejected. </paragraph>
<paragraph id="P-0178" lvl="0"><number>&lsqb;0178&rsqb;</number> The four passwords are defined below in ascending order of privilege. </paragraph>
<paragraph id="P-0179" lvl="1"><number>&lsqb;0179&rsqb;</number> i. Real-Time Data Client (RDC) Password </paragraph>
<paragraph id="P-0180" lvl="2"><number>&lsqb;0180&rsqb;</number> The RDC is the user interface window that displays MAR real-time statistics. Although more than one user may display the real-time statistics at any one time, all users must enter the pre-defined password to do so. </paragraph>
<paragraph id="P-0181" lvl="1"><number>&lsqb;0181&rsqb;</number> ii. Configuration Management Client (CMC): Read-Only </paragraph>
<paragraph id="P-0182" lvl="2"><number>&lsqb;0182&rsqb;</number> CMC is the set of user interface windows that allow a user to view and modify MAR parameters. The RDC password does not give a user access to the CMC facility. This &lsquo;CMC Read-Only&rsquo; password allows a user to view all CMC parameters but not to modify them. </paragraph>
<paragraph id="P-0183" lvl="1"><number>&lsqb;0183&rsqb;</number> iii. CMC: ESME Parameters </paragraph>
<paragraph id="P-0184" lvl="2"><number>&lsqb;0184&rsqb;</number> This is the lowest-level password that allows a user to modify MAR parameters and create a new configuration file. It allows a user to make an entry in all ESME parameter fields displayed in the CMC facility. Any attempted entry in another field is rejected. It is to be noted that this creation of a new configuration file will initiate the remote provisioning of SMSC AIM records by the MAR. </paragraph>
<paragraph id="P-0185" lvl="1"><number>&lsqb;0185&rsqb;</number> iv CMC: Full Access </paragraph>
<paragraph id="P-0186" lvl="2"><number>&lsqb;0186&rsqb;</number> This password allows the user to make an entry into any CMC field and create a new configuration file. This is also the only level of access that allows the user to change the four UI passwords. </paragraph>
<paragraph id="P-0187" lvl="0"><number>&lsqb;0187&rsqb;</number> Additional user interface security features include: </paragraph>
<paragraph id="P-0188" lvl="2"><number>&lsqb;0188&rsqb;</number> Password Encryption </paragraph>
<paragraph id="P-0189" lvl="2"><number>&lsqb;0189&rsqb;</number> All four User Interface passwords are subjected to encryption before being saved to disk. The (encrypted) passwords are stored in the MAR configuration file, as with the other (not encrypted) parameters displayed in the CMC windows. The encryption prevents anyone from obtaining the passwords by simply reading the file using standard Unix tools. </paragraph>
<paragraph id="P-0190" lvl="2"><number>&lsqb;0190&rsqb;</number> Password Display </paragraph>
<paragraph id="P-0191" lvl="2"><number>&lsqb;0191&rsqb;</number> When passwords are entered at the User Interface they are not displayed on the screen </paragraph>
<paragraph id="P-0192" lvl="2"><number>&lsqb;0192&rsqb;</number> Password Modification </paragraph>
<paragraph id="P-0193" lvl="2"><number>&lsqb;0193&rsqb;</number> A user with the Full Access password can modify all passwords. When modifying a password the Full Access user is also prompted for the Full Access password before the password is successfully changed. During this procedure, the full access password and ESME configuration passwords are not displayed on the screen. </paragraph>
<paragraph id="P-0194" lvl="7"><number>&lsqb;0194&rsqb;</number> ESME Security </paragraph>
<paragraph id="P-0195" lvl="0"><number>&lsqb;0195&rsqb;</number> When ESMEs bind to the MAR, one of the parameters included by an ESME in its bind_transmitter and bind_receiver PDUs is a password. This password is used by the MAR to authenticate the ESME request. When the MAR makes corresponding bind requests for that ESME to Telepath SMSCs a different password is used by the MAR. This prevents an ESME from bypassing the MAR and establishing a direct connection to an SMSC. </paragraph>
<paragraph id="P-0196" lvl="0"><number>&lsqb;0196&rsqb;</number> From the user interface both passwords can be configured on the MAR: </paragraph>
<paragraph id="P-0197" lvl="2"><number>&lsqb;0197&rsqb;</number> password for the bind from the ESME to the MAR, and </paragraph>
<paragraph id="P-0198" lvl="2"><number>&lsqb;0198&rsqb;</number> password for the corresponding binds to Telepath SMSCs. </paragraph>
<paragraph id="P-0199" lvl="0"><number>&lsqb;0199&rsqb;</number> Optionally, the operator can set these passwords to the same value. This setting may be of use during migration of traffic from the SMSC onto the MAR. </paragraph>
<paragraph id="P-0200" lvl="7"><number>&lsqb;0200&rsqb;</number> Event and Alarm Reporting </paragraph>
<paragraph id="P-0201" lvl="0"><number>&lsqb;0201&rsqb;</number> Table 3 below lists the events and alarms to be generated and handled by the MAR. A user configurable option is provided to define the severity of each alarm and at which severity an SNMP trap should be generated.  
<table-cwu id="TABLE-US-00002">
<number>2</number>
<table frame="none" colsep="0" rowsep="0">
<tgroup align="left" colsep="0" rowsep="0" cols="1">
<colspec colname="1" colwidth="217PT" align="center"/>
<thead>
<row>
<entry namest="1" nameend="1" align="center">TABLE 2</entry>
</row>
</thead>
<tbody valign="top">
<row>
<entry></entry>
</row>
<row><entry namest="1" nameend="1" align="center" rowsep="1"></entry>
</row>
<row>
<entry>Events and Alarms</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="4">
<colspec colname="1" colwidth="21PT" align="center"/>
<colspec colname="2" colwidth="98PT" align="left"/>
<colspec colname="3" colwidth="56PT" align="left"/>
<colspec colname="4" colwidth="42PT" align="left"/>
<tbody valign="top">
<row>
<entry>Event</entry>
<entry></entry>
<entry>Generating</entry>
<entry>Notify /</entry>
</row>
<row>
<entry>No.</entry>
<entry>Textual Description</entry>
<entry>Process</entry>
<entry>Alarm</entry>
</row>
<row><entry namest="1" nameend="4" align="center" rowsep="1"></entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="4">
<colspec colname="1" colwidth="21PT" align="char" char="."/>
<colspec colname="2" colwidth="98PT" align="left"/>
<colspec colname="3" colwidth="56PT" align="left"/>
<colspec colname="4" colwidth="42PT" align="left"/>
<tbody valign="top">
<row>
<entry>1</entry>
<entry>Routing process startup</entry>
<entry>Routing Process</entry>
<entry>Notification</entry>
</row>
<row>
<entry>2</entry>
<entry>Connection from ESME</entry>
<entry>Routing Process</entry>
<entry>Notification</entry>
</row>
<row>
<entry>3</entry>
<entry>Bind for ESME</entry>
<entry>Routing Process</entry>
<entry>Notification</entry>
</row>
<row>
<entry>4</entry>
<entry>Unbind from ESME</entry>
<entry>Routing Process</entry>
<entry>Notification</entry>
</row>
<row>
<entry>5</entry>
<entry>Disconnect from ESME</entry>
<entry>Routing Process</entry>
<entry>Notification</entry>
</row>
<row>
<entry>6</entry>
<entry>Message with invalid command</entry>
<entry>Routing Process</entry>
<entry>Alarm</entry>
</row>
<row>
<entry></entry>
<entry>ID</entry>
</row>
<row>
<entry>7</entry>
<entry>Maximum PDU exceeded, e.g.</entry>
<entry>Routing Process</entry>
<entry>Alarm</entry>
</row>
<row>
<entry></entry>
<entry>12 kB</entry>
</row>
<row>
<entry>8</entry>
<entry>Unsuccessful bind (e.g. ID and</entry>
<entry>Routing Process</entry>
<entry>Alarm</entry>
</row>
<row>
<entry></entry>
<entry>password mismatch)</entry>
</row>
<row>
<entry>9</entry>
<entry>Configuration file update (local /</entry>
<entry>Routing /</entry>
<entry>Notification</entry>
</row>
<row>
<entry></entry>
<entry>new copy)</entry>
<entry>Management</entry>
</row>
<row>
<entry></entry>
<entry></entry>
<entry>Process</entry>
</row>
<row>
<entry>10</entry>
<entry>Routing process shutdown</entry>
<entry>Routing Process</entry>
<entry>Notification</entry>
</row>
<row>
<entry></entry>
<entry>(Node shutdown)</entry>
<entry></entry>
</row>
<row>
<entry>11</entry>
<entry>ESME count threshold reached</entry>
<entry>Routing Process</entry>
<entry>Alarm</entry>
</row>
<row>
<entry>12</entry>
<entry>DNS sent out address</entry>
<entry>DNS</entry>
<entry>Notification</entry>
</row>
<row>
<entry>13</entry>
<entry>User Interface connected</entry>
<entry>Management</entry>
<entry>Notification</entry>
</row>
<row>
<entry></entry>
<entry></entry>
<entry>Process</entry>
</row>
<row>
<entry>14</entry>
<entry>User Interface disconnected</entry>
<entry>Management</entry>
<entry>Notification</entry>
</row>
<row>
<entry></entry>
<entry></entry>
<entry>Process</entry>
</row>
<row>
<entry>15</entry>
<entry>Connection made to SMSC</entry>
<entry>Routing Process</entry>
<entry>Notification</entry>
</row>
<row>
<entry>16</entry>
<entry>Disconnection from SMSC</entry>
<entry>Routing Process</entry>
<entry>Notification</entry>
</row>
<row>
<entry>17</entry>
<entry>Management agent startup</entry>
<entry>Management</entry>
<entry>Notification</entry>
</row>
<row>
<entry></entry>
<entry></entry>
<entry>Process</entry>
</row>
<row>
<entry>18</entry>
<entry>Management agent shutdown</entry>
<entry>Management</entry>
<entry>Notification</entry>
</row>
<row>
<entry></entry>
<entry></entry>
<entry>Process</entry>
</row>
<row>
<entry>19</entry>
<entry>SMSC connection ended</entry>
<entry>Routing Process</entry>
<entry>Alarm</entry>
</row>
<row>
<entry></entry>
<entry>abnormally</entry>
</row>
<row>
<entry>20</entry>
<entry>Buffer to SMSC full</entry>
<entry>Routing Process</entry>
<entry>Alarm</entry>
</row>
<row>
<entry>21</entry>
<entry>Buffer to ESME full</entry>
<entry>Routing Process</entry>
<entry>Alarm</entry>
</row>
<row>
<entry>22</entry>
<entry>AIM provisioning failure</entry>
<entry>Management</entry>
<entry>Alarm</entry>
</row>
<row>
<entry></entry>
<entry></entry>
<entry>Process</entry>
</row>
<row>
<entry>23</entry>
<entry>Router Node failure</entry>
<entry>Management</entry>
<entry>Alarm</entry>
</row>
<row>
<entry></entry>
<entry></entry>
<entry>Process</entry>
</row>
<row>
<entry>24</entry>
<entry>Message throttling threshold</entry>
<entry>Routing Process</entry>
<entry>Alarm</entry>
</row>
<row>
<entry></entry>
<entry>exceeded</entry>
</row>
<row>
<entry>25</entry>
<entry>SS7 failure</entry>
<entry>Routing Process</entry>
<entry>Alarm</entry>
</row>
<row><entry namest="1" nameend="4" align="center" rowsep="1"></entry>
</row>
</tbody>
</tgroup>
</table>
</table-cwu>
</paragraph>
<paragraph id="P-0202" lvl="0"><number>&lsqb;0202&rsqb;</number> SNMP traps are forwarded to the operator&apos;s Network Management System. All alarms and events are also stored in an event log on the Management Node, and can be viewed using standard Unix tools. </paragraph>
<paragraph id="P-0203" lvl="7"><number>&lsqb;0203&rsqb;</number> Hardware Configuration </paragraph>
<paragraph id="P-0204" lvl="0"><number>&lsqb;0204&rsqb;</number> The Router Nodes and Management Nodes are deployed on a Hewlett Packard L1000&trade; server. As greater MAR capacity is required, additional servers are added, each acting as another Router Node. The User Interface Node (UIN) software runs on PC hardware. Several UINs can be used concurrently although only one UIN can modify the live configuration at a time. The MAR supports Sema, OIS, CMG EMI, and Nokia CIMO SMS message submission protocols. </paragraph>
<paragraph id="P-0205" lvl="0"><number>&lsqb;0205&rsqb;</number> It is envisaged that the MAR may include the following additional functionality: </paragraph>
<paragraph id="P-0206" lvl="2"><number>&lsqb;0206&rsqb;</number> Support for USSD. The MAR will be part of the USSD Server redundant configuration. To achieve this the Router needs to be enhanced to ensure that all USSD messages to a mobile are routed via the same USSD Server during a dialogue. </paragraph>
<paragraph id="P-0207" lvl="2"><number>&lsqb;0207&rsqb;</number> X.25 support. </paragraph>
<paragraph id="P-0208" lvl="2"><number>&lsqb;0208&rsqb;</number> Support for other non-SMPP protocols used by ESMEs. </paragraph>
<paragraph id="P-0209" lvl="2"><number>&lsqb;0209&rsqb;</number> SMPP Release 3.4 and Release 4.0. </paragraph>
<paragraph id="P-0210" lvl="2"><number>&lsqb;0210&rsqb;</number> Additional message distribution algorithms. </paragraph>
<paragraph id="P-0211" lvl="2"><number>&lsqb;0211&rsqb;</number> Support for routing of Wireless Internet data protocols. </paragraph>
<paragraph id="P-0212" lvl="2"><number>&lsqb;0212&rsqb;</number> Querying of an external database to determine routing and feature parameters (for example to allow black and white-listing, pre-pay SMS billing, mobile number portability, and distribution lists, diversion of SMS messages to an alternative subscriber. </paragraph>
<paragraph id="P-0213" lvl="0"><number>&lsqb;0213&rsqb;</number> The invention is not limited to the embodiments described but may be varied in construction and detail. </paragraph>
</detailed-description>
</subdoc-description>
<subdoc-claims>
<claim id="CLM-00001">
<claim-text><highlight><bold>1</bold></highlight>. A messaging applications router comprising: 
<claim-text>means (<highlight><bold>10</bold></highlight>) for interfacing with a plurality of external short message entities (ESMEs) for receiving mobile terminating messages generated by ESMEs and for sending mobile originating messages addressed to ESMEs; </claim-text>
<claim-text>means (<highlight><bold>10</bold></highlight>) for interfacing with a plurality of short message service centres (SMSCs) for receiving mobile originating messages addressed to ESMEs and for sending mobile terminating messages; </claim-text>
<claim-text>routing means (<highlight><bold>10</bold></highlight>) comprising means for routing said messages; </claim-text>
<claim-text>a management means comprising means for setting a routing configuration, and </claim-text>
<claim-text>a user interface comprising means for receiving user configuration settings and for outputting routing data. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00002">
<claim-text><highlight><bold>2</bold></highlight>. A messaging applications router as claimed in <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein the routing means comprises means for interfacing with SMSCs transparently to the ESMEs whereby SMSCs can be added or deleted without affecting the ESMEs. </claim-text>
</claim>
<claim id="CLM-00003">
<claim-text><highlight><bold>3</bold></highlight>. A messaging applications router as claimed in <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein the routing means comprises a plurality of router nodes (<highlight><bold>10</bold></highlight>). </claim-text>
</claim>
<claim id="CLM-00004">
<claim-text><highlight><bold>4</bold></highlight>. A messaging applications router as claimed in <dependent-claim-reference depends_on="CLM-00003">claim 3</dependent-claim-reference>, wherein the router node comprises: 
<claim-text>a routing agent for bidirectional routing of messages, and </claim-text>
<claim-text>a domain name server (DNS). </claim-text>
</claim-text>
</claim>
<claim id="CLM-00005">
<claim-text><highlight><bold>5</bold></highlight>. A messaging applications router as claimed in <dependent-claim-reference depends_on="CLM-00004">claim 4</dependent-claim-reference>, wherein the router node comprises means for sending bind requests to each SMSC associated with an ESME. </claim-text>
</claim>
<claim id="CLM-00006">
<claim-text><highlight><bold>6</bold></highlight>. A messaging applications router as claimed in <dependent-claim-reference depends_on="CLM-00004">claim 4</dependent-claim-reference>, wherein each router node has an address. </claim-text>
</claim>
<claim id="CLM-00007">
<claim-text><highlight><bold>7</bold></highlight>. A messaging applications router as claimed in <dependent-claim-reference depends_on="CLM-00006">claim 6</dependent-claim-reference>, wherein the address is an IP address. </claim-text>
</claim>
<claim id="CLM-00008">
<claim-text><highlight><bold>8</bold></highlight>. A messaging applications router as claimed in <dependent-claim-reference depends_on="CLM-00006">claim 6</dependent-claim-reference>, further comprising a DNS server comprising means for providing an address of a least busy router node. </claim-text>
</claim>
<claim id="CLM-00009">
<claim-text><highlight><bold>9</bold></highlight>. A messaging applications router as claimed in <dependent-claim-reference depends_on="CLM-00008">claim 8</dependent-claim-reference>, wherein the DNS server comprises means for providing an address to a requesting ESME. </claim-text>
</claim>
<claim id="CLM-00010">
<claim-text><highlight><bold>10</bold></highlight>. A messaging applications router as claimed in <dependent-claim-reference depends_on="CLM-00008">claim 8</dependent-claim-reference>, wherein the DNS server comprises means for polling router nodes to determine loading. </claim-text>
</claim>
<claim id="CLM-00011">
<claim-text><highlight><bold>11</bold></highlight>. A messaging applications router as claimed in <dependent-claim-reference depends_on="CLM-00007">claim 7</dependent-claim-reference>, wherein the routing means comprises an external address distributor comprising means for routing signals for load-balancing. </claim-text>
</claim>
<claim id="CLM-00012">
<claim-text><highlight><bold>12</bold></highlight>. A messaging applications router as claimed in <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein the router comprises means for routing messages to more than one SMSC according to a load balancing process. </claim-text>
</claim>
<claim id="CLM-00013">
<claim-text><highlight><bold>13</bold></highlight>. A messaging applications router as claimed in <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein the routing means comprises means for receiving operator inputs indicating available SMSCs and means for automatically detecting available SMSCs. </claim-text>
</claim>
<claim id="CLM-00014">
<claim-text><highlight><bold>14</bold></highlight>. A messaging applications router as claimed in <dependent-claim-reference depends_on="CLM-00011">claim 13</dependent-claim-reference>, wherein the routing means comprises means for retrieving SMSC fault data in an SMSC, such as SS7 fault data. </claim-text>
</claim>
<claim id="CLM-00015">
<claim-text><highlight><bold>15</bold></highlight>. A messaging applications router as claimed in <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein the user interface node (<highlight><bold>11</bold></highlight>) comprises means for generating and outputting real time client data indicating message traffic and bound ESMEs. </claim-text>
</claim>
<claim id="CLM-00016">
<claim-text><highlight><bold>16</bold></highlight>. A messaging applications router as claimed in <dependent-claim-reference depends_on="CLM-00011">claim 15</dependent-claim-reference>, wherein the user interface node (<highlight><bold>11</bold></highlight>) comprises means for generating and outputting real time client data indicating router node (<highlight><bold>10</bold></highlight>) traffic. </claim-text>
</claim>
<claim id="CLM-00017">
<claim-text><highlight><bold>17</bold></highlight>. A messaging applications router as claimed in <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein the user interface node (<highlight><bold>11</bold></highlight>) comprises a configuration management client comprising means for configuring ESME parameters, SMSC parameters, and router node (<highlight><bold>10</bold></highlight>) configuration. </claim-text>
</claim>
<claim id="CLM-00018">
<claim-text><highlight><bold>18</bold></highlight>. A messaging applications router as claimed in <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein the management means comprises means for forwarding configuration data to the router nodes (<highlight><bold>10</bold></highlight>). </claim-text>
</claim>
<claim id="CLM-00019">
<claim-text><highlight><bold>19</bold></highlight>. A messaging applications router as claimed in <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein the management node comprise an SNMP sub-agent for managing an alarm and statistics database. </claim-text>
</claim>
<claim id="CLM-00020">
<claim-text><highlight><bold>20</bold></highlight>. A messaging applications router as claimed in <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein the management means comprises an event handler for receiving and logging event information from the router nodes. </claim-text>
</claim>
<claim id="CLM-00021">
<claim-text><highlight><bold>21</bold></highlight>. A computer program product comprising software code for causing operation of a digital computer as a messaging applications router as claimed in <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>. </claim-text>
</claim>
<claim id="CLM-00022">
<claim-text><highlight><bold>22</bold></highlight>. A messaging applications router substantially as described with reference to the drawings.</claim-text>
</claim>
</subdoc-claims>
<subdoc-drawings id="DRAWINGS">
<heading lvl="0" align="CENTER">Drawings</heading>
<representative-figure>2</representative-figure>
<figure id="figure-D00000">
<image id="EMI-D00000" file="US20030003932A1-20030102-D00000.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00001">
<image id="EMI-D00001" file="US20030003932A1-20030102-D00001.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00002">
<image id="EMI-D00002" file="US20030003932A1-20030102-D00002.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00003">
<image id="EMI-D00003" file="US20030003932A1-20030102-D00003.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00004">
<image id="EMI-D00004" file="US20030003932A1-20030102-D00004.TIF" imf="TIFF" ti="DR"/>
</figure>
</subdoc-drawings>
</patent-application-publication>
