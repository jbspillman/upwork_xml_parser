<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE patent-application-publication SYSTEM "pap-v16-2002-01-01.dtd" [
<!ENTITY US20030002640A1-20030102-D00000.TIF SYSTEM "US20030002640A1-20030102-D00000.TIF" NDATA TIF>
<!ENTITY US20030002640A1-20030102-D00001.TIF SYSTEM "US20030002640A1-20030102-D00001.TIF" NDATA TIF>
<!ENTITY US20030002640A1-20030102-D00002.TIF SYSTEM "US20030002640A1-20030102-D00002.TIF" NDATA TIF>
<!ENTITY US20030002640A1-20030102-D00003.TIF SYSTEM "US20030002640A1-20030102-D00003.TIF" NDATA TIF>
<!ENTITY US20030002640A1-20030102-D00004.TIF SYSTEM "US20030002640A1-20030102-D00004.TIF" NDATA TIF>
<!ENTITY US20030002640A1-20030102-D00005.TIF SYSTEM "US20030002640A1-20030102-D00005.TIF" NDATA TIF>
<!ENTITY US20030002640A1-20030102-D00006.TIF SYSTEM "US20030002640A1-20030102-D00006.TIF" NDATA TIF>
<!ENTITY US20030002640A1-20030102-D00007.TIF SYSTEM "US20030002640A1-20030102-D00007.TIF" NDATA TIF>
<!ENTITY US20030002640A1-20030102-D00008.TIF SYSTEM "US20030002640A1-20030102-D00008.TIF" NDATA TIF>
]>
<patent-application-publication>
<subdoc-bibliographic-information>
<document-id>
<doc-number>20030002640</doc-number>
<kind-code>A1</kind-code>
<document-date>20030102</document-date>
</document-id>
<publication-filing-type>new</publication-filing-type>
<domestic-filing-data>
<application-number>
<doc-number>10230787</doc-number>
</application-number>
<application-number-series-code>10</application-number-series-code>
<filing-date>20020828</filing-date>
</domestic-filing-data>
<technical-information>
<classification-ipc>
<classification-ipc-primary>
<ipc>H04M017/00</ipc>
</classification-ipc-primary>
<classification-ipc-edition>07</classification-ipc-edition>
</classification-ipc>
<classification-us>
<classification-us-primary>
<uspc>
<class>379</class>
<subclass>144010</subclass>
</uspc>
</classification-us-primary>
</classification-us>
<title-of-invention>Methods for providing prepaid telephony service via an internet protocol network system</title-of-invention>
</technical-information>
<continuity-data>
<continuations>
<continuation-of>
<parent-child>
<child>
<document-id>
<doc-number>10230787</doc-number>
<kind-code>A1</kind-code>
<document-date>20020828</document-date>
</document-id>
</child>
<parent>
<document-id>
<doc-number>09436294</doc-number>
<document-date>19991108</document-date>
<country-code>US</country-code>
</document-id>
</parent>
<parent-status>GRANTED</parent-status>
<parent-patent>
<document-id>
<doc-number>6480588</doc-number>
<country-code>US</country-code>
</document-id>
</parent-patent>
</parent-child>
</continuation-of>
</continuations>
</continuity-data>
<inventors>
<first-named-inventor>
<name>
<given-name>Steven</given-name>
<middle-name>R.</middle-name>
<family-name>Donovan</family-name>
</name>
<residence>
<residence-us>
<city>Plano</city>
<state>TX</state>
<country-code>US</country-code>
</residence-us>
</residence>
<authority-applicant>INV</authority-applicant>
</first-named-inventor>
</inventors>
<assignee>
<organization-name>WorldCom, Inc.</organization-name>
<address>
<city>Clinton</city>
<state>MS</state>
</address>
<assignee-type>02</assignee-type>
</assignee>
<correspondence-address>
<name-1>WORLDCOM, INC.</name-1>
<name-2>TECHNOLOGY LAW DEPARTMENT</name-2>
<address>
<address-1>1133 19TH STREET NW</address-1>
<city>WASHINGTON</city>
<state>DC</state>
<postalcode>20036</postalcode>
<country>
<country-code>US</country-code>
</country>
</address>
</correspondence-address>
</subdoc-bibliographic-information>
<subdoc-abstract>
<paragraph id="A-0001" lvl="0">Methods are disclosed for providing prepaid telephony service via an Internet protocol (IP) network system. A first method provides controlling at least one media agent or call routing station/switch of an IP network system for allowing and/or blocking call media streams from traversing through the media agent. A second method provides directing all signaling messages transmitted by a signaling agent or station and all media packets transmitting voice and data communications through at least one common device within the IP network system. The methods further provide for continuously monitoring a subscriber&apos;s account balance and terminating the prepaid telephony service if the account balance is less than a predetermined amount. </paragraph>
</subdoc-abstract>
<subdoc-description>
<summary-of-invention>
<section>
<heading lvl="1">BACKGROUND OF THE INVENTION </heading>
<paragraph id="P-0001" lvl="0"><number>&lsqb;0001&rsqb;</number> 1. Field of the Invention </paragraph>
<paragraph id="P-0002" lvl="0"><number>&lsqb;0002&rsqb;</number> The present invention relates generally to telecommunications systems, and more specifically is directed toward methods of providing prepaid telephony service via an Internet protocol (IP) network system. </paragraph>
<paragraph id="P-0003" lvl="0"><number>&lsqb;0003&rsqb;</number> 2. Description of the Related Art </paragraph>
<paragraph id="P-0004" lvl="0"><number>&lsqb;0004&rsqb;</number> Prepaid telephony service is a very popular service in the existing Public Switched Telephone Network (PSTN). For example, prepaid calling cards are typically used by PSTN subscribers to place calls. Typically, a user or subscriber of a prepaid calling card initiates a phone call by calling a signaling agent, such as a communications station or server, via a toll-free number (800/888) provided on the prepaid calling card. The subscriber is then prompted to enter his home telephone number and an identification number (PIN) also provided on the prepaid calling card using a telephone keypad. </paragraph>
<paragraph id="P-0005" lvl="0"><number>&lsqb;0005&rsqb;</number> The signaling agent then proceeds to perform validation procedures to determine if the home telephone number matches the identification number using a look-up table stored within a database or if the identification number is valid. If the two numbers match or if the identification number is valid, then the signaling agent performs database queries to determine if the subscriber&apos;s account balance is more than a predetermined amount. If the account balance is more than the predetermined amount, then the signaling agent informs the subscriber of the length of calling time available and indicates to the subscriber to enter a number to be dialed. The signaling agent then proceeds to place the call by transmitting signaling messages to appropriate communications devices along a media path flow, i.e., the path through which call media streams are routed through the PSTN. If the account balance is less than the predetermined amount, then the signaling agent informs the subscriber that a call cannot be placed. </paragraph>
<paragraph id="P-0006" lvl="0"><number>&lsqb;0006&rsqb;</number> During the duration of the call, the signaling agent monitors the subscriber&apos;s account balance. If the account balance falls below the predetermined amount, the signaling agent transmits a message to the subscriber via the same media path flow as the path of the call media streams indicating to the subscriber the amount of available time. After the subscriber&apos;s account balance has been depleted, the signaling agent tears down the PSTN call by blocking the media path flow as described below. </paragraph>
<paragraph id="P-0007" lvl="0"><number>&lsqb;0007&rsqb;</number> In the PSTN, the call is torn down by the signaling agent transmitting a &ldquo;switch-off&rdquo; signaling message to a media agent or a routing station along the media path flow through which the call media streams are routed through. The &ldquo;switch-off&rdquo; signaling message disables the media agent to prevent the call media streams from being transmitted further along the media path flow. Hence, the PSTN call is torn down. </paragraph>
<paragraph id="P-0008" lvl="0"><number>&lsqb;0008&rsqb;</number> It is inconsequential if the signaling agent is or is not located along the media path flow, since in the PSTN, signals transmitted to or received from any one station (e.g., a server) can be directed to or received from a variety of other stations or servers within the network. Therefore, in a prepaid calling card scenario, whether or not the signaling agent is located along the media path flow, the signaling agent can effectively control call setup, the duration of the call based on the subscriber&apos;s account balance, and call tear down by directing signaling messages to the appropriate media agent or other routing station. </paragraph>
<paragraph id="P-0009" lvl="0"><number>&lsqb;0009&rsqb;</number> In the case of using an Internet protocol (IP) network system to place a non-prepaid call, with reference to <cross-reference target="DRAWINGS">FIG. 1</cross-reference>, there is shown an IP network system designated generally by reference numeral <highlight><bold>10</bold></highlight> having a plurality of media agents, i.e., devices for handling packets through the system <highlight><bold>10</bold></highlight>. In the IP network system <highlight><bold>10</bold></highlight>, call media streams are routed from a telephone <highlight><bold>20</bold></highlight> through a PSTN telephone switch <highlight><bold>30</bold></highlight> to an IP telephony switch <highlight><bold>40</bold></highlight> over an ISDN line. The call media streams are then routed to the IP network <highlight><bold>50</bold></highlight> over an IP line, and then over a corresponding IP line to a destination IP telephony switch <highlight><bold>40</bold></highlight>&prime;, further to a destination PSTN telephone switch <highlight><bold>30</bold></highlight>&prime; over an ISDN line and finally to a destination telephone <highlight><bold>20</bold></highlight>&prime;. The call media streams can also be routed from the telephone <highlight><bold>20</bold></highlight> to an IP terminal <highlight><bold>75</bold></highlight>, such as a personal computer (PC). </paragraph>
<paragraph id="P-0010" lvl="0"><number>&lsqb;0010&rsqb;</number> The IP telephony switches <highlight><bold>40</bold></highlight> and <highlight><bold>40</bold></highlight>&prime; provide basic interfacing between the PSTN telephone switches <highlight><bold>30</bold></highlight> and <highlight><bold>30</bold></highlight>&prime; and IP network <highlight><bold>50</bold></highlight> and include both gateways <highlight><bold>60</bold></highlight><highlight><italic>a </italic></highlight>and <highlight><bold>60</bold></highlight><highlight><italic>b</italic></highlight>, as well as gatekeepers <highlight><bold>70</bold></highlight><highlight><italic>a </italic></highlight>and <highlight><bold>70</bold></highlight><highlight><italic>b</italic></highlight>. Gatekeepers <highlight><bold>70</bold></highlight><highlight><italic>a </italic></highlight>and <highlight><bold>70</bold></highlight><highlight><italic>b </italic></highlight>use the signaling information provided by the gateways <highlight><bold>60</bold></highlight><highlight><italic>a </italic></highlight>and <highlight><bold>60</bold></highlight><highlight><italic>b </italic></highlight>to provide directory services. During a call setup, the originating gatekeeper <highlight><bold>70</bold></highlight><highlight><italic>a </italic></highlight>sets up a communication path between the originating and terminating gateways <highlight><bold>60</bold></highlight><highlight><italic>a</italic></highlight>, <highlight><bold>60</bold></highlight><highlight><italic>b </italic></highlight>by determining the destination gatekeeper <highlight><bold>70</bold></highlight><highlight><italic>b </italic></highlight>associated with a destination IP address or telephone number. The destination gatekeeper <highlight><bold>70</bold></highlight><highlight><italic>b </italic></highlight>selects a destination gateway <highlight><bold>60</bold></highlight><highlight><italic>b </italic></highlight>to complete the IP virtual circuit. </paragraph>
<paragraph id="P-0011" lvl="0"><number>&lsqb;0011&rsqb;</number> With reference to <cross-reference target="DRAWINGS">FIG. 2</cross-reference>, an example of a call which originates in the PSTN, traverses the IP network, and terminates back in the PSTN is shown. First, at A, an Internet telephony service subscriber dials an access number provided by the Internet Telephony Service Provider. At B, the call is routed by the PSTN telephone switch <highlight><bold>30</bold></highlight> to the IP telephony switch <highlight><bold>40</bold></highlight>. The gateway <highlight><bold>60</bold></highlight><highlight><italic>a </italic></highlight>at C plays an announcement requesting that the subscriber enter the destination telephone number to be called. The destination digit information is sent to the gatekeeper <highlight><bold>70</bold></highlight><highlight><italic>a</italic></highlight>. Accordingly, the gatekeeper <highlight><bold>70</bold></highlight><highlight><italic>a </italic></highlight>determines a destination gatekeeper IP address based on the destination digit information. An IP packet requesting the availability status of the destination gateway <highlight><bold>60</bold></highlight><highlight><italic>b </italic></highlight>is sent to the destination gatekeeper <highlight><bold>70</bold></highlight><highlight><italic>b </italic></highlight>at D. The destination gatekeeper <highlight><bold>70</bold></highlight><highlight><italic>b </italic></highlight>responds to the request by providing destination gateway <highlight><bold>60</bold></highlight><highlight><italic>b </italic></highlight>availability and IP address information. The originating gatekeeper <highlight><bold>70</bold></highlight><highlight><italic>a </italic></highlight>then transfers this information to the originating gateway <highlight><bold>60</bold></highlight><highlight><italic>a </italic></highlight>at E. </paragraph>
<paragraph id="P-0012" lvl="0"><number>&lsqb;0012&rsqb;</number> With continued reference to <cross-reference target="DRAWINGS">FIG. 2</cross-reference>, at F, the originating gateway <highlight><bold>60</bold></highlight><highlight><italic>a </italic></highlight>sets up a virtual circuit to the destination gateway <highlight><bold>60</bold></highlight><highlight><italic>b</italic></highlight>. This circuit is identified by a call reference variable (CRV) that will be used by both gateways <highlight><bold>60</bold></highlight><highlight><italic>a</italic></highlight>, <highlight><bold>60</bold></highlight><highlight><italic>b </italic></highlight>for the duration of the call to identify all IP packets associated with this particular call. Finally, at G, the destination gateway <highlight><bold>60</bold></highlight><highlight><italic>b </italic></highlight>selects an outgoing PSTN voice trunk and signals to the PSTN switch <highlight><bold>30</bold></highlight> to attempt to set up a call to the dialed telephone number. </paragraph>
<paragraph id="P-0013" lvl="0"><number>&lsqb;0013&rsqb;</number> During the call, the packet-switched IP network <highlight><bold>50</bold></highlight> routes the IP packets associated with the particular call along different routes before reaching the IP telephony switch <highlight><bold>40</bold></highlight>&prime; or terminal <highlight><bold>25</bold></highlight> (e.g., a multimedia personal computer (PC) equipped with Session Initiation Protocol (SIP) or H.323 software, a microphone and speakers). SIP and H.323 terminals support the encoding/decoding and packetization/sequencing of information exchanged with other SIP and H.323 terminals or gateways. Packets are routed to the destination IP address contained within the header of each packet and may travel over separate network paths before arriving at their final destination for reassembly and resequencing. Accordingly, the routing of packets within the IP network is different than the routing of the call media streams by the PSTN during a conventional PSTN call, where all the call media streams associated with a particular call are routed along the same media path. </paragraph>
<paragraph id="P-0014" lvl="0"><number>&lsqb;0014&rsqb;</number> Accordingly, prepaid telephony services cannot be achieved via the IP network shown by <cross-reference target="DRAWINGS">FIGS. 1 and 2</cross-reference> and described above, since call signaling messages from a signaling agent, such as a server, do not take the same media path as the call media streams, since the IP network is a packet-based network where each packet from a particular station is routed along a different media path than other packets. Further, with conventional servers and IP network hardware, the call signaling messages cannot be directed or controlled to take the same path as the call media streams. </paragraph>
<paragraph id="P-0015" lvl="0"><number>&lsqb;0015&rsqb;</number> Therefore, a need exists for a method of having a signaling agent control at least one media agent of an IP network system for allowing and blocking call media streams from traversing through the media agent. </paragraph>
<paragraph id="P-0016" lvl="0"><number>&lsqb;0016&rsqb;</number> Further, a need exists for a method of directing all signaling messages transmitted by a signaling agent and all media packets transmitting voice and data communications through an IP network system through one media flow path. </paragraph>
</section>
<section>
<heading lvl="1">SUMMARY OF THE INVENTION </heading>
<paragraph id="P-0017" lvl="0"><number>&lsqb;0017&rsqb;</number> The present invention provides methods for providing prepaid telephony service via an Internet protocol (IP) network system. A first method provides controlling at least one media agent or call routing station/switch of an IP network system for allowing and/or blocking call media streams from traversing through the media agent. A second method provides directing all signaling messages transmitted by a signaling agent or station and all media packets transmitting voice and data communications through at least one common device within the IP network system. </paragraph>
<paragraph id="P-0018" lvl="0"><number>&lsqb;0018&rsqb;</number> The first method of the present invention enables prepaid telephony service via an IP network system and includes the steps of providing a signaling station between a PSTN telephone switch and an IP telephony switch of the IP network system; forwarding a telephone number entered by a subscriber and received by the PSTN telephone switch to the signaling station; determining if the telephone number matches a prepaid access telephone number stored within a database; forwarding the telephone number to the IP telephony switch if the telephone number does not match the prepaid access telephone number to setup a non-prepaid call via an IP network; transmitting prepaid access instructions from the signaling station to the subscriber if the telephone number matches the prepaid access telephone number to inform the subscriber to continue placing a prepaid call by dialing at least a destination telephone number; forwarding the destination telephone number to the IP telephony switch via the PSTN telephone switch and signaling station; and setting up the prepaid call to the destination telephone number. </paragraph>
<paragraph id="P-0019" lvl="0"><number>&lsqb;0019&rsqb;</number> The method further includes the steps of during the prepaid call, continuously monitoring at the signaling station an account balance corresponding to the subscriber; transmitting from the signaling station to one of the PSTN telephone switch and the IP telephony switch a call interrupt signal if the account balance is less than a predetermined amount; receiving at one of the PSTN telephone switch and the IP telephony switch the call interrupt signal and terminating the prepaid call to the destination telephone number. It is contemplated that a message be transmitted to the subscriber indicating an amount of calling time available which corresponds to the account balance at least one time prior to the signaling station transmitting the call interrupt signal. </paragraph>
<paragraph id="P-0020" lvl="0"><number>&lsqb;0020&rsqb;</number> Further, it is contemplated that the steps of determining if the telephone number matches the prepaid access telephone number stored within the database of the signaling station, transmitting prepaid access instructions from the signaling station to the subscriber, and continuously monitoring at the signaling station the account balance corresponding to the subscriber be performed by the IP telephony switch by programming the IP telephony switch accordingly. </paragraph>
<paragraph id="P-0021" lvl="0"><number>&lsqb;0021&rsqb;</number> Additionally, the method further includes the step of periodically billing the subscriber if the prepaid call was charged to a telephone number corresponding to the subscriber. </paragraph>
<paragraph id="P-0022" lvl="0"><number>&lsqb;0022&rsqb;</number> The second method of the present invention enables prepaid telephony service via an IP network system and includes the steps of forwarding a telephone number entered by a subscriber and received by a PSTN telephone switch to an IP telephony switch; determining if the telephone number matches a prepaid access telephone number stored within a database; setting up a non-prepaid call via an IP network if the telephone number does not match the prepaid access telephone number; transmitting prepaid access instructions from the IP telephony switch to the subscriber if the telephone number matches the prepaid access telephone number to inform the subscriber to continue placing a prepaid call by dialing at least a destination telephone number; forwarding the destination telephone number to the IP telephony switch via the PSTN telephone switch; setting up the prepaid call to the destination telephone number by setting up a virtual media path flow circuit between the IP telephony switch, a relay station and one of a destination IP telephony switch and an IP terminal, where the relay station is located within the IP network; and during the prepaid call, directing signaling messages transmitted by the IP telephony switch, the destination IP telephony and the IP terminal, and packets corresponding to the prepaid call through the relay station. </paragraph>
<paragraph id="P-0023" lvl="0"><number>&lsqb;0023&rsqb;</number> The method further includes the steps of during the prepaid call, continuously monitoring, preferably, at the IP telephony switch or the destination IP telephony switch, an account balance corresponding to the subscriber; transmitting from the IP telephony switch, the destination IP telephony switch or the IP terminal to the relay station a call interrupt signal if the account balance is less than a predetermined amount; receiving at the relay station the call interrupt signal and terminating the prepaid call. It is contemplated that a message be transmitted to the subscriber indicating an amount of calling time available which corresponds to the account balance at least one time prior to transmitting the call interrupt signal to the relay station from the IP telephony switch, the destination IP telephony switch or the IP terminal. Further, it is contemplated that the step of continuously monitoring the account balance corresponding to the subscriber be performed by a signaling station connected to the IP telephony switch or the destination IP telephony switch by programming the signaling station accordingly. </paragraph>
<paragraph id="P-0024" lvl="0"><number>&lsqb;0024&rsqb;</number> Additionally, the method further includes the step of periodically billing the subscriber if the prepaid call was charged to a telephone number corresponding to the subscriber.</paragraph>
</section>
</summary-of-invention>
<brief-description-of-drawings>
<section>
<heading lvl="1">BRIEF DESCRIPTION OF THE DRAWINGS </heading>
<paragraph id="P-0025" lvl="0"><number>&lsqb;0025&rsqb;</number> Various preferred embodiments are described herein with references to the drawings: </paragraph>
<paragraph id="P-0026" lvl="0"><number>&lsqb;0026&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1</cross-reference> is a block diagram of a prior art IP network system for placing a call via an IP network; </paragraph>
<paragraph id="P-0027" lvl="0"><number>&lsqb;0027&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 2</cross-reference> is a prior art process flow block diagram for the IP network system of <cross-reference target="DRAWINGS">FIG. 1</cross-reference> indicating a sequence of events for placing a call via the IP network; </paragraph>
<paragraph id="P-0028" lvl="0"><number>&lsqb;0028&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3</cross-reference> is a block diagram of an IP network system in accordance with a first preferred method of the present invention for placing a prepaid call via the IP network; </paragraph>
<paragraph id="P-0029" lvl="0"><number>&lsqb;0029&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 4A</cross-reference> is a flow chart for placing either a non-prepaid or a prepaid call via the IP network according to the first preferred method; </paragraph>
<paragraph id="P-0030" lvl="0"><number>&lsqb;0030&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 4B</cross-reference> is a flow chart for continuously monitoring an account balance corresponding to the subscriber during the prepaid call; </paragraph>
<paragraph id="P-0031" lvl="0"><number>&lsqb;0031&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 4C</cross-reference> is a flow chart for performing billing functions for billing the subscriber after termination of the prepaid call; </paragraph>
<paragraph id="P-0032" lvl="0"><number>&lsqb;0032&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 5</cross-reference> is a block diagram of an IP network system in accordance with a second preferred method of the present invention for placing a prepaid call via the IP network; </paragraph>
<paragraph id="P-0033" lvl="0"><number>&lsqb;0033&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 6A</cross-reference> is a flow chart for placing either a non-prepaid or a prepaid call via the IP network according to the second preferred method; and </paragraph>
<paragraph id="P-0034" lvl="0"><number>&lsqb;0034&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 6B</cross-reference> is a flow chart for continuously monitoring an account balance corresponding to the subscriber during the prepaid call.</paragraph>
</section>
</brief-description-of-drawings>
<detailed-description>
<section>
<heading lvl="1">DETAILED DESCRIPTION OF PREFERRED EMBODIMENTS </heading>
<paragraph id="P-0035" lvl="0"><number>&lsqb;0035&rsqb;</number> The present invention provides methods which enable prepaid telephony service between two subscribers of a Public Switched Telephone Network (PSTN), a subscriber of the PSTN and an IP multimedia terminal, or two IP multimedia terminals via an Internet protocol (IP) network. A first method provides controlling at least one media agent or call routing station/switch of an IP network system for allowing and/or blocking call media streams from traversing through the media agent. A second method provides directing all signaling messages transmitted by a signaling agent or station and all media packets transmitting voice and data communications through at least one common device within the IP network system. </paragraph>
<paragraph id="P-0036" lvl="0"><number>&lsqb;0036&rsqb;</number> Referring now in detail to the drawings, in which like reference numerals represent similar or identical elements throughout the several views, and with particular reference to <cross-reference target="DRAWINGS">FIG. 3</cross-reference>, there is shown a block diagram of an IP network system designated generally by reference numeral <highlight><bold>300</bold></highlight> for placing a prepaid call via an IP network <highlight><bold>302</bold></highlight> in accordance with a first method of the present invention. The IP network system <highlight><bold>300</bold></highlight> includes a plurality of media agents, i.e., devices for handling packets through the system <highlight><bold>300</bold></highlight>, including a signaling station <highlight><bold>304</bold></highlight>. In the IP network system <highlight><bold>300</bold></highlight>, call media streams are routed from a telephone <highlight><bold>306</bold></highlight> to a PSTN telephone switch <highlight><bold>308</bold></highlight> to the signaling station <highlight><bold>304</bold></highlight> over an ISDN line to an IP telephony switch <highlight><bold>310</bold></highlight> over an IP line to the IP network <highlight><bold>302</bold></highlight> over an IP line. The call media streams are then routed to a destination IP telephony switch <highlight><bold>312</bold></highlight> over an IP line to a destination PSTN telephone switch <highlight><bold>314</bold></highlight> over an ISDN line, and finally to a destination telephone <highlight><bold>316</bold></highlight>. The call media streams can also be routed to an IP terminal <highlight><bold>317</bold></highlight>, such as a PC. </paragraph>
<paragraph id="P-0037" lvl="0"><number>&lsqb;0037&rsqb;</number> The IP telephony switches <highlight><bold>310</bold></highlight>, <highlight><bold>312</bold></highlight> provide basic interfacing between the PSTN telephone switches <highlight><bold>308</bold></highlight>, <highlight><bold>314</bold></highlight> and IP network <highlight><bold>302</bold></highlight> and include both gateways <highlight><bold>318</bold></highlight> and gatekeepers <highlight><bold>320</bold></highlight>. It is apparent to persons skilled in the art that signaling proxy servers, especially Session Initiation Protocol (SIP) proxy servers, could be used instead of gatekeepers <highlight><bold>320</bold></highlight>. Gatekeepers <highlight><bold>320</bold></highlight> use the signaling information provided by the gateways <highlight><bold>318</bold></highlight> to provide directory services. During a call setup, the originating gatekeeper <highlight><bold>320</bold></highlight><highlight><italic>a </italic></highlight>sets up a communication path between the originating and terminating gateways <highlight><bold>318</bold></highlight><highlight><italic>a</italic></highlight>, <highlight><bold>318</bold></highlight><highlight><italic>b </italic></highlight>by determining the destination gatekeeper <highlight><bold>320</bold></highlight><highlight><italic>b </italic></highlight>associated with a destination IP address or telephone number. The destination gatekeeper <highlight><bold>320</bold></highlight><highlight><italic>b </italic></highlight>selects a destination gateway <highlight><bold>318</bold></highlight><highlight><italic>b </italic></highlight>to complete the IP virtual circuit. </paragraph>
<paragraph id="P-0038" lvl="0"><number>&lsqb;0038&rsqb;</number> FIGS. <highlight><bold>4</bold></highlight>A-C depict flow charts for placing the prepaid call via the IP network according to the first preferred method. With reference to <cross-reference target="DRAWINGS">FIG. 4A, a</cross-reference> call is setup by entering a telephone number at step <highlight><bold>400</bold></highlight>. The telephone number is then received by the PSTN telephone switch <highlight><bold>308</bold></highlight> and is routed to the signaling station <highlight><bold>304</bold></highlight> at step <highlight><bold>401</bold></highlight>. The signaling station <highlight><bold>304</bold></highlight> at step <highlight><bold>402</bold></highlight> determines if the telephone number matches a prepaid access telephone number stored within a database. The database is preferably stored within the signaling station <highlight><bold>304</bold></highlight> or a remote station connected to the signaling station <highlight><bold>304</bold></highlight>. If the telephone number does not match the prepaid access telephone number, the telephone number is forwarded to the IP telephony switch <highlight><bold>310</bold></highlight> at step <highlight><bold>404</bold></highlight> to setup a non-prepaid call via the IP network <highlight><bold>302</bold></highlight> at step <highlight><bold>405</bold></highlight>, as described above with respect to placing a call using the originating and destination gateways <highlight><bold>318</bold></highlight><highlight><italic>a</italic></highlight>, <highlight><bold>318</bold></highlight><highlight><italic>b </italic></highlight>and the originating and destination gatekeepers <highlight><bold>320</bold></highlight><highlight><italic>a</italic></highlight>, <highlight><bold>320</bold></highlight><highlight><italic>b. </italic></highlight></paragraph>
<paragraph id="P-0039" lvl="0"><number>&lsqb;0039&rsqb;</number> If the telephone number matches the prepaid access telephone number at step <highlight><bold>402</bold></highlight>, prepaid access instructions are transmitted from the signaling station <highlight><bold>304</bold></highlight> to the subscriber at step <highlight><bold>406</bold></highlight> to inform the subscriber to place a prepaid call by dialing at least a destination telephone number. Additional information to be dialed includes the subscriber&apos;s account number and account personal identification number (PIN). If the account information is determined to be accurate and a subscriber&apos;s account balance is sufficient (i.e., greater than a predetermined amount) as determined at step <highlight><bold>407</bold></highlight> by the signaling station <highlight><bold>304</bold></highlight>, the destination telephone number is then forwarded at step <highlight><bold>408</bold></highlight> to the IP telephony switch <highlight><bold>310</bold></highlight> via the PSTN telephone switch <highlight><bold>308</bold></highlight> and signaling station <highlight><bold>304</bold></highlight>. The prepaid call is then setup at step <highlight><bold>409</bold></highlight>. If the account information is not accurate or the subscriber&apos;s account balance is not sufficient, then the call is terminated. </paragraph>
<paragraph id="P-0040" lvl="0"><number>&lsqb;0040&rsqb;</number> With reference to <cross-reference target="DRAWINGS">FIG. 4</cross-reference>B, the method further includes continuously monitoring during the prepaid call the account balance corresponding to the subscriber at step <highlight><bold>410</bold></highlight>. Preferably, step <highlight><bold>410</bold></highlight> is performed at the signaling station <highlight><bold>304</bold></highlight>. If the account balance is less than a predetermined amount, a call interrupt signal is transmitted from the signaling station <highlight><bold>304</bold></highlight> to either the PSTN telephone switch <highlight><bold>308</bold></highlight> or the IP telephony switch <highlight><bold>310</bold></highlight> at step <highlight><bold>412</bold></highlight>. It is also contemplated that the call interrupt signal is transmitted from the signaling station <highlight><bold>304</bold></highlight> to the PSTN telephone switch <highlight><bold>314</bold></highlight> or the IP telephony switch <highlight><bold>312</bold></highlight> at the destination side, or to the IP terminal <highlight><bold>317</bold></highlight> in the case of telephony service between a PSTN subscriber and the IP terminal <highlight><bold>317</bold></highlight>. </paragraph>
<paragraph id="P-0041" lvl="0"><number>&lsqb;0041&rsqb;</number> The call interrupt signal is then received by the PSTN telephone switch <highlight><bold>308</bold></highlight> or the IP telephony switch <highlight><bold>310</bold></highlight> and the prepaid call to the destination telephone number is terminated at step <highlight><bold>414</bold></highlight>. It is contemplated that a message be transmitted to the subscriber from the signaling station <highlight><bold>304</bold></highlight>, which indicates an amount of calling time available according to the account balance, at least one time before the call interrupt signal is transmitted by the signaling station <highlight><bold>304</bold></highlight>. </paragraph>
<paragraph id="P-0042" lvl="0"><number>&lsqb;0042&rsqb;</number> Further, it is contemplated that the steps of determining if the telephone number matches the prepaid access telephone number stored within the database of the signaling station, transmitting calling card access instructions from the signaling station <highlight><bold>304</bold></highlight> to the subscriber, determining if the account information is accurate and that the subscriber&apos;s account balance is sufficient, and continuously monitoring at the signaling station <highlight><bold>304</bold></highlight> the account balance corresponding to the subscriber be performed by the IP telephony switch <highlight><bold>310</bold></highlight> by programming the IP telephony switch <highlight><bold>310</bold></highlight> accordingly to perform these steps. </paragraph>
<paragraph id="P-0043" lvl="0"><number>&lsqb;0043&rsqb;</number> Additionally, with reference to <cross-reference target="DRAWINGS">FIG. 4</cross-reference>C, the method of the present invention further includes determining at the signaling station <highlight><bold>304</bold></highlight> whether the prepaid call was charged to a particular telephone number at step <highlight><bold>416</bold></highlight>. If the prepaid call was charged to a particular telephone number, then the signaling station <highlight><bold>304</bold></highlight> at step <highlight><bold>418</bold></highlight> stores the charges incurred and other information, such as a length of time of the prepaid call and the destination telephone number, for billing the subscriber at a later time. </paragraph>
<paragraph id="P-0044" lvl="0"><number>&lsqb;0044&rsqb;</number> If the prepaid call was not charged to a particular telephone number, e.g., the prepaid call was a prepaid calling card call, then the signaling station <highlight><bold>304</bold></highlight> at step <highlight><bold>420</bold></highlight> debits the subscriber&apos;s account balance and at step <highlight><bold>422</bold></highlight> stores the debited account balance in the database. </paragraph>
<paragraph id="P-0045" lvl="0"><number>&lsqb;0045&rsqb;</number> It is contemplated that the billing steps of <highlight><bold>416</bold></highlight>, <highlight><bold>418</bold></highlight>, <highlight><bold>420</bold></highlight> and <highlight><bold>422</bold></highlight> be performed by the IP telephony switch <highlight><bold>310</bold></highlight> by programming the IP telephony switch <highlight><bold>310</bold></highlight> accordingly. Hence, it is further contemplated that the IP telephony switch <highlight><bold>310</bold></highlight> transmits the billing information to a plurality of other IP telephony switches connected to the IP network. Therefore, if a different IP telephony switch is used to initiate a prepaid call in the future via the IP network <highlight><bold>302</bold></highlight>, it contains the subscriber&apos;s billing information, including the subscriber&apos;s account balance. </paragraph>
<paragraph id="P-0046" lvl="0"><number>&lsqb;0046&rsqb;</number> With reference to <cross-reference target="DRAWINGS">FIG. 5</cross-reference>, there is shown a block diagram of an IP network system designated generally by reference numeral <highlight><bold>500</bold></highlight> for placing a prepaid call via an IP network in accordance with a second method of the present invention. The IP network system <highlight><bold>500</bold></highlight> includes a plurality of media agents including a relay station <highlight><bold>502</bold></highlight> within an IP network <highlight><bold>504</bold></highlight>. In the IP network system <highlight><bold>500</bold></highlight>, call media streams are routed from a telephone <highlight><bold>506</bold></highlight> to a PSTN telephone switch <highlight><bold>508</bold></highlight> to an IP telephony switch <highlight><bold>510</bold></highlight> and to the IP network <highlight><bold>504</bold></highlight>. The call media streams are then routed over an IP line from the relay station <highlight><bold>502</bold></highlight> within the IP network <highlight><bold>504</bold></highlight> to a destination IP telephony switch <highlight><bold>512</bold></highlight> over an IP line and then to a destination PSTN telephone switch <highlight><bold>514</bold></highlight> over an ISDN line, and-finally to a destination telephone <highlight><bold>516</bold></highlight>. The call media streams can also be routed to an IP terminal <highlight><bold>517</bold></highlight>. </paragraph>
<paragraph id="P-0047" lvl="0"><number>&lsqb;0047&rsqb;</number> As described above for the IP network system <highlight><bold>300</bold></highlight> shown in <cross-reference target="DRAWINGS">FIG. 3</cross-reference>, the IP telephony switches <highlight><bold>510</bold></highlight>, <highlight><bold>512</bold></highlight> provide basic interfacing between the PSTN telephone switches <highlight><bold>508</bold></highlight>, <highlight><bold>514</bold></highlight> and IP network <highlight><bold>504</bold></highlight> and include both gateways <highlight><bold>518</bold></highlight> and gatekeepers <highlight><bold>520</bold></highlight> which operate as described above. </paragraph>
<paragraph id="P-0048" lvl="0"><number>&lsqb;0048&rsqb;</number> FIGS. <highlight><bold>6</bold></highlight>A-B depict flow charts for placing the prepaid call via the IP network according to the second preferred method. With reference to <cross-reference target="DRAWINGS">FIG. 6A, a</cross-reference> call is setup by entering a telephone number at step <highlight><bold>600</bold></highlight>. The telephone number is then received by the PSTN telephone switch <highlight><bold>508</bold></highlight> and is routed to the IP telephony switch <highlight><bold>510</bold></highlight> at step <highlight><bold>601</bold></highlight>. The IP telephony switch <highlight><bold>510</bold></highlight> at step <highlight><bold>602</bold></highlight> determines if the telephone number matches a prepaid access telephone number stored within a database. The database is preferably stored within the IP telephony switch <highlight><bold>510</bold></highlight> or a remote station connected to the IP telephony switch <highlight><bold>510</bold></highlight>. If the telephone number does not match the prepaid access telephone number, the IP telephony switch <highlight><bold>510</bold></highlight> at step <highlight><bold>604</bold></highlight> set ups a non-prepaid call via the IP network <highlight><bold>504</bold></highlight>, as described above with respect to <cross-reference target="DRAWINGS">FIG. 3</cross-reference>, by placing a call using the originating and destination gateways <highlight><bold>518</bold></highlight><highlight><italic>a</italic></highlight>, <highlight><bold>518</bold></highlight><highlight><italic>b </italic></highlight>and the originating and destination gatekeepers <highlight><bold>520</bold></highlight><highlight><italic>a</italic></highlight>, <highlight><bold>520</bold></highlight><highlight><italic>b. </italic></highlight></paragraph>
<paragraph id="P-0049" lvl="0"><number>&lsqb;0049&rsqb;</number> If the telephone number matches the prepaid access telephone number at step <highlight><bold>602</bold></highlight>, prepaid access instructions are transmitted to the subscriber at step <highlight><bold>606</bold></highlight> to inform the subscriber to place a prepaid call by dialing at least a destination telephone number. Additional information to be dialed includes the subscriber&apos;s account number and account personal identification number (PIN). If the account information is determined to be accurate and a subscriber&apos;s account balance is sufficient (i.e., greater than a predetermined amount) as determined at step <highlight><bold>607</bold></highlight>, the destination telephone number is then forwarded at step <highlight><bold>608</bold></highlight> to the IP telephony switch <highlight><bold>510</bold></highlight> via the PSTN telephone switch <highlight><bold>508</bold></highlight>. The prepaid call is then setup at step <highlight><bold>609</bold></highlight> by setting up a virtual media path flow circuit between the IP telephony switch <highlight><bold>510</bold></highlight>, the relay station <highlight><bold>502</bold></highlight> and the destination IP telephony switch <highlight><bold>512</bold></highlight> or the IP terminal <highlight><bold>517</bold></highlight>. If the account information is not accurate or the subscriber&apos;s account balance is not sufficient, then the call is terminated. </paragraph>
<paragraph id="P-0050" lvl="0"><number>&lsqb;0050&rsqb;</number> During the prepaid call, signaling and other messages transmitted by the IP telephony switch <highlight><bold>510</bold></highlight> are directed through the relay station <highlight><bold>502</bold></highlight> as indicated by step <highlight><bold>610</bold></highlight>. Further, all media packets corresponding to the prepaid call are also directed through the relay station <highlight><bold>502</bold></highlight> as indicated by step <highlight><bold>611</bold></highlight>. </paragraph>
<paragraph id="P-0051" lvl="0"><number>&lsqb;0051&rsqb;</number> The signaling messages and media packets are directed through the relay station <highlight><bold>502</bold></highlight>, by providing the IP address of the relay station <highlight><bold>502</bold></highlight> within a header of each message and media packet transmitted from the IP telephony switch <highlight><bold>510</bold></highlight> and IP telephony switch <highlight><bold>512</bold></highlight>, as well as the IP address of the IP telephony switch <highlight><bold>512</bold></highlight>. Therefore, even though the packets travel over separate network paths within the IP network <highlight><bold>504</bold></highlight> before arriving at the IP telephony switch <highlight><bold>512</bold></highlight>, the IP telephony switch <highlight><bold>510</bold></highlight> or the IP terminal <highlight><bold>517</bold></highlight> for reassembly and resequencing, each packet passes through the relay station <highlight><bold>502</bold></highlight> of the virtual media path flow circuit. </paragraph>
<paragraph id="P-0052" lvl="0"><number>&lsqb;0052&rsqb;</number> With reference to <cross-reference target="DRAWINGS">FIG. 6</cross-reference>B, the method further includes continuously monitoring during the prepaid call the account balance corresponding to the subscriber at step <highlight><bold>612</bold></highlight>. Preferably, step <highlight><bold>612</bold></highlight> is performed at the IP telephony switch <highlight><bold>510</bold></highlight> or a remote station connected to the IP telephony switch <highlight><bold>510</bold></highlight>. If the account balance is less than a predetermined amount, a call interrupt signal in the form of a packet is transmitted from the IP telephony switch <highlight><bold>510</bold></highlight> to the relay station <highlight><bold>502</bold></highlight> at step <highlight><bold>614</bold></highlight>. It is contemplated that the call interrupt packet can also be transmitted from the IP telephony switch <highlight><bold>512</bold></highlight> or the IP terminal <highlight><bold>517</bold></highlight>. The call interrupt packet includes within a header the IP address of the relay station <highlight><bold>502</bold></highlight>. The call interrupt signal is then received by the relay station <highlight><bold>502</bold></highlight> and the prepaid call to the destination telephone number is then terminated at step <highlight><bold>616</bold></highlight>. The prepaid call is terminated by the relay station blocking signaling and media packets from passing therethrough and reaching the IP telephony switch <highlight><bold>512</bold></highlight> or the IP terminal <highlight><bold>517</bold></highlight>. </paragraph>
<paragraph id="P-0053" lvl="0"><number>&lsqb;0053&rsqb;</number> It is contemplated that a message be transmitted to the subscriber indicating an amount of calling time available which corresponds to the account balance at least one time prior to transmitting the call interrupt signal to the relay station <highlight><bold>502</bold></highlight>. Further, it is contemplated that the step of continuously monitoring the account balance corresponding to the subscriber be performed by a signaling station connected to the IP telephony switch <highlight><bold>510</bold></highlight> by programming the signaling station accordingly. </paragraph>
<paragraph id="P-0054" lvl="0"><number>&lsqb;0054&rsqb;</number> Additionally, the method of the present invention further includes determining whether the prepaid call was charged to a particular telephone number. If the prepaid call was charged to a particular telephone number, then the charges incurred and other information, such as a length of time of the prepaid call and the destination telephone number, are stored for billing the subscriber at a later time. These steps are preferably performed by the IP telephony switch <highlight><bold>510</bold></highlight> or a remote station connected to the IP telephony switch <highlight><bold>510</bold></highlight> and are identical to steps <highlight><bold>416</bold></highlight> and <highlight><bold>418</bold></highlight> of <cross-reference target="DRAWINGS">FIG. 4C</cross-reference>. </paragraph>
<paragraph id="P-0055" lvl="0"><number>&lsqb;0055&rsqb;</number> If the prepaid call was not charged to a particular telephone number, e.g., the prepaid call was a prepaid calling card call, then the subscriber&apos;s account balance is debited and the debited account balance is stored within the database. These steps are preferably performed by the IP telephony switch <highlight><bold>510</bold></highlight> or a remote station connected to the IP telephony switch <highlight><bold>510</bold></highlight> and are identical to steps <highlight><bold>420</bold></highlight> and <highlight><bold>422</bold></highlight> of <cross-reference target="DRAWINGS">FIG. 4C</cross-reference>. </paragraph>
<paragraph id="P-0056" lvl="0"><number>&lsqb;0056&rsqb;</number> What has been described herein is merely illustrative of the application of the principles of the present invention. For example, the functions described above and implemented as the best mode for operating the present invention are for illustration purposes only. Other arrangements and methods may be implemented by those skilled in the art without departing from the scope and spirit of this invention. </paragraph>
</section>
</detailed-description>
</subdoc-description>
<subdoc-claims>
<heading lvl="1">What is claimed is: </heading>
<claim id="CLM-00001">
<claim-text><highlight><bold>1</bold></highlight>. A method for providing prepaid telephony service via an IP network system, comprising: 
<claim-text>receiving, via a PSTN telephone switch, a telephone number entered by a subscriber; </claim-text>
<claim-text>determining if the telephone number matches a prepaid access telephone number; </claim-text>
<claim-text>transmitting prepaid access instructions to the subscriber if the telephone number matches the prepaid access telephone number; </claim-text>
<claim-text>determining if the account information is accurate and a corresponding account balance is greater than a predetermined amount; </claim-text>
<claim-text>forwarding the destination telephone number to the originating IP telephony switch via an originating PSTN telephone switch if the account information is accurate and the corresponding account balance is greater than the predetermined amount; and </claim-text>
<claim-text>setting up the prepaid call to the destination telephone number. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00002">
<claim-text><highlight><bold>2</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, further comprising: 
<claim-text>continuously monitoring, during the prepaid call, an account balance corresponding to the subscriber; and </claim-text>
<claim-text>transmitting to one of the originating PSTN telephone switch and the originating IP telephony switch a call interrupt signal if the account balance is less than the predetermined amount </claim-text>
</claim-text>
</claim>
<claim id="CLM-00003">
<claim-text><highlight><bold>3</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, further comprising the step of transmitting a message to the subscriber indicating an amount of calling time available which corresponds to the account balance at least one time prior to transmitting the call interrupt signal. </claim-text>
</claim>
<claim id="CLM-00004">
<claim-text><highlight><bold>4</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, further comprising the step of forwarding the telephone number to the originating IP telephony switch if the telephone number does not match the prepaid access telephone number to setup a non-prepaid call via the IP network. </claim-text>
</claim>
<claim id="CLM-00005">
<claim-text><highlight><bold>5</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein the prepaid access telephone number is stored within a database. </claim-text>
</claim>
<claim id="CLM-00006">
<claim-text><highlight><bold>6</bold></highlight>. A system for providing prepaid telephony service via an IP network system, comprising: 
<claim-text>means for receiving, via a PSTN telephone switch, a telephone number entered by a subscriber; </claim-text>
<claim-text>means for determining if the telephone number matches a prepaid access telephone number; </claim-text>
<claim-text>means for transmitting prepaid access instructions to the subscriber if the telephone number matches the prepaid access telephone number; </claim-text>
<claim-text>means for determining if the account information is accurate and a corresponding account balance is greater than a predetermined amount; </claim-text>
<claim-text>means for forwarding the destination telephone number to the originating IP telephony switch via an originating PSTN telephone switch if the account information is accurate and the corresponding account balance is greater than the predetermined amount; and </claim-text>
<claim-text>means for setting up the prepaid call to the destination telephone number. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00007">
<claim-text><highlight><bold>7</bold></highlight>. The system of <dependent-claim-reference depends_on="CLM-00006">claim 6</dependent-claim-reference>, further comprising: 
<claim-text>continuously monitoring, during the prepaid call, an account balance corresponding to the subscriber; and </claim-text>
<claim-text>transmitting to one of the originating PSTN telephone switch and the originating IP telephony switch a call interrupt signal if the account balance is less than the predetermined amount </claim-text>
</claim-text>
</claim>
<claim id="CLM-00008">
<claim-text><highlight><bold>8</bold></highlight>. The system of <dependent-claim-reference depends_on="CLM-00006">claim 6</dependent-claim-reference>, further comprising the step of transmitting a message to the subscriber indicating an amount of calling time available which corresponds to the account balance at least one time prior to transmitting the call interrupt signal. </claim-text>
</claim>
<claim id="CLM-00009">
<claim-text><highlight><bold>9</bold></highlight>. The system of <dependent-claim-reference depends_on="CLM-00006">claim 6</dependent-claim-reference>, further comprising the step of forwarding the telephone number to the originating IP telephony switch if the telephone number does not match the prepaid access telephone number to setup a non-prepaid call via the IP network. </claim-text>
</claim>
<claim id="CLM-00010">
<claim-text><highlight><bold>10</bold></highlight>. The system of <dependent-claim-reference depends_on="CLM-00006">claim 6</dependent-claim-reference>, wherein the prepaid access telephone number is stored within a database. </claim-text>
</claim>
<claim id="CLM-00011">
<claim-text><highlight><bold>11</bold></highlight>. A method for providing prepaid telephony service via an IP network system, comprising: 
<claim-text>receiving a telephone number dialed by a subscriber at an IP originating telephony switch via a PSTN telephone switch; </claim-text>
<claim-text>determining if the telephone number matches a prepaid access telephone number stored within the originating IP telephony switch; </claim-text>
<claim-text>transmitting prepaid access instructions to the subscriber if the telephone number matches the prepaid access telephone number to inform the subscriber to continue placing a prepaid call by dialing at least a destination telephone number and account information; </claim-text>
<claim-text>receiving, va a PSTN telephone switch, the destination telephone number at the originating IP telephony switch if the account information is accurate and the corresponding account balance is greater than the predetermined amount; and </claim-text>
<claim-text>setting up the prepaid call to the destination telephone number via the IP network. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00012">
<claim-text><highlight><bold>12</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00011">claim 11</dependent-claim-reference>, further comprising determining if the account information is accurate and a corresponding account balance is greater than a predetermined amount. </claim-text>
</claim>
<claim id="CLM-00013">
<claim-text><highlight><bold>13</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00011">claim 12</dependent-claim-reference>, further comprising: 
<claim-text>continuously monitoring, during the prepaid call, at the originating IP telephony switch the account balance corresponding to the subscriber; and </claim-text>
<claim-text>terminating the prepaid call to the destination telephone number if the account balance is less than the predetermined amount. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00014">
<claim-text><highlight><bold>14</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00011">claim 13</dependent-claim-reference>, further comprising transmitting a message to the subscriber indicating an amount of calling time available which corresponds to the account balance at least one time prior to terminating the prepaid call. </claim-text>
</claim>
<claim id="CLM-00015">
<claim-text><highlight><bold>15</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00011">claim 13</dependent-claim-reference>, further comprising: 
<claim-text>debiting the account balance; </claim-text>
<claim-text>storing the debited account balance within the originating IP telephony switch; and </claim-text>
<claim-text>transmitting the debited account balance from the originating IP telephony switch to a plurality of IP telephony switches connected to the IP network. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00016">
<claim-text><highlight><bold>16</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00011">claim 11</dependent-claim-reference>, further comprising: 
<claim-text>determining if the prepaid call was charged to a telephone number corresponding to the subscriber; </claim-text>
<claim-text>storing information relating to the prepaid call including a length of time of the prepaid call and the destination telephone number if the prepaid call was charged to the telephone number corresponding to the subscriber; and </claim-text>
<claim-text>periodically billing the subscriber according to the stored information. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00017">
<claim-text><highlight><bold>17</bold></highlight>. The method according to <dependent-claim-reference depends_on="CLM-00011">claim 11</dependent-claim-reference>, further comprising the step of setting up a non-prepaid call via the IP network, the destination IP telephony switch and the destination PSTN telephone switch if the telephone number does not match the prepaid access telephone number.</claim-text>
</claim>
</subdoc-claims>
<subdoc-drawings id="DRAWINGS">
<heading lvl="0" align="CENTER">Drawings</heading>
<representative-figure>3</representative-figure>
<figure id="figure-D00000">
<image id="EMI-D00000" file="US20030002640A1-20030102-D00000.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00001">
<image id="EMI-D00001" file="US20030002640A1-20030102-D00001.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00002">
<image id="EMI-D00002" file="US20030002640A1-20030102-D00002.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00003">
<image id="EMI-D00003" file="US20030002640A1-20030102-D00003.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00004">
<image id="EMI-D00004" file="US20030002640A1-20030102-D00004.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00005">
<image id="EMI-D00005" file="US20030002640A1-20030102-D00005.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00006">
<image id="EMI-D00006" file="US20030002640A1-20030102-D00006.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00007">
<image id="EMI-D00007" file="US20030002640A1-20030102-D00007.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00008">
<image id="EMI-D00008" file="US20030002640A1-20030102-D00008.TIF" imf="TIFF" ti="DR"/>
</figure>
</subdoc-drawings>
</patent-application-publication>
