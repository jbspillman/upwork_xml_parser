<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE patent-application-publication SYSTEM "pap-v16-2002-01-01.dtd" [
<!ENTITY US20030001565A1-20030102-M00001.NB SYSTEM "US20030001565A1-20030102-M00001.NB" NDATA NB>
<!ENTITY US20030001565A1-20030102-M00001.TIF SYSTEM "US20030001565A1-20030102-M00001.TIF" NDATA TIF>
<!ENTITY US20030001565A1-20030102-D00000.TIF SYSTEM "US20030001565A1-20030102-D00000.TIF" NDATA TIF>
<!ENTITY US20030001565A1-20030102-D00001.TIF SYSTEM "US20030001565A1-20030102-D00001.TIF" NDATA TIF>
<!ENTITY US20030001565A1-20030102-D00002.TIF SYSTEM "US20030001565A1-20030102-D00002.TIF" NDATA TIF>
<!ENTITY US20030001565A1-20030102-D00003.TIF SYSTEM "US20030001565A1-20030102-D00003.TIF" NDATA TIF>
<!ENTITY US20030001565A1-20030102-D00004.TIF SYSTEM "US20030001565A1-20030102-D00004.TIF" NDATA TIF>
]>
<patent-application-publication>
<subdoc-bibliographic-information>
<document-id>
<doc-number>20030001565</doc-number>
<kind-code>A1</kind-code>
<document-date>20030102</document-date>
</document-id>
<publication-filing-type>new</publication-filing-type>
<domestic-filing-data>
<application-number>
<doc-number>10233875</doc-number>
</application-number>
<application-number-series-code>10</application-number-series-code>
<filing-date>20020903</filing-date>
</domestic-filing-data>
<technical-information>
<classification-ipc>
<classification-ipc-primary>
<ipc>G01B007/30</ipc>
</classification-ipc-primary>
<classification-ipc-secondary>
<ipc>G01B007/00</ipc>
</classification-ipc-secondary>
<classification-ipc-secondary>
<ipc>G01R033/09</ipc>
</classification-ipc-secondary>
<classification-ipc-edition>07</classification-ipc-edition>
</classification-ipc>
<classification-us>
<classification-us-primary>
<uspc>
<class>324</class>
<subclass>207210</subclass>
</uspc>
</classification-us-primary>
<classification-us-secondary>
<uspc>
<class>324</class>
<subclass>207120</subclass>
</uspc>
</classification-us-secondary>
<classification-us-secondary>
<uspc>
<class>324</class>
<subclass>207250</subclass>
</uspc>
</classification-us-secondary>
</classification-us>
<title-of-invention>Magnetic displacement sensor for vehicle</title-of-invention>
</technical-information>
<continuity-data>
<continuations>
<continuation-of>
<parent-child>
<child>
<document-id>
<doc-number>10233875</doc-number>
<kind-code>A1</kind-code>
<document-date>20020903</document-date>
</document-id>
</child>
<parent>
<document-id>
<doc-number>09511587</doc-number>
<document-date>20000223</document-date>
<country-code>US</country-code>
</document-id>
</parent>
<parent-status>GRANTED</parent-status>
<parent-patent>
<document-id>
<doc-number>6445178</doc-number>
<country-code>US</country-code>
</document-id>
</parent-patent>
</parent-child>
</continuation-of>
</continuations>
<non-provisional-of-provisional>
<document-id>
<doc-number>60121462</doc-number>
<document-date>19990224</document-date>
<country-code>US</country-code>
</document-id>
</non-provisional-of-provisional>
</continuity-data>
<inventors>
<first-named-inventor>
<name>
<given-name>Eric</given-name>
<middle-name>J.</middle-name>
<family-name>Hoekstra</family-name>
</name>
<residence>
<residence-us>
<city>Holland</city>
<state>MI</state>
<country-code>US</country-code>
</residence-us>
</residence>
<authority-applicant>INV</authority-applicant>
</first-named-inventor>
</inventors>
<assignee>
<organization-name>Donnelly Corporation</organization-name>
<address>
<city>Holland</city>
<state>MI</state>
</address>
<assignee-type>02</assignee-type>
</assignee>
<correspondence-address>
<name-1>VAN DYKE, GARDNER, LINN AND BURKHART, LLP</name-1>
<name-2></name-2>
<address>
<address-1>2851 CHARLEVOIX DRIVE, S.E.</address-1>
<address-2>P.O. BOX 888695</address-2>
<city>GRAND RAPIDS</city>
<state>MI</state>
<postalcode>49588-8695</postalcode>
<country>
<country-code>US</country-code>
</country>
</address>
</correspondence-address>
</subdoc-bibliographic-information>
<subdoc-abstract>
<paragraph id="A-0001" lvl="0">A magnetic level sensor is adapted for interconnecting with a vertically moving component of a vehicle such that the level sensor determines a vertical orientation of the component of the vehicle relative to the frame or chassis of the vehicle. The magnetic level sensor includes a magnetic angular measurement device interconnected to the component of the vehicle such that vertical movement of the component causes a corresponding relative rotational movement of a magnetic element associated with the angular measurement device. An electronic control is included for analyzing an output of the angular measurement device and determining an angle of rotation of the magnetic element and thus a vertical movement of the component. The control further determines an error or offset in the output of the angular measurement device and adjusts an output of the control in response to the error or offset. The control thus continuously calibrates an output of the angular measurement device to account for manufacturing irregularities and drift in sensor output due to temperature variations and aging of the sensors and magnets over time. </paragraph>
</subdoc-abstract>
<subdoc-description>
<cross-reference-to-related-applications>
<paragraph id="P-0001" lvl="0"><number>&lsqb;0001&rsqb;</number> This non-provisional application claims priority from U.S. provisional pat. application, Ser. No. 60/121,462, filed Feb. 24, 1999, which is hereby incorporated in its entirety herein by reference.</paragraph>
</cross-reference-to-related-applications>
<summary-of-invention>
<section>
<heading lvl="1">BACKGROUND OF THE INVENTION </heading>
<paragraph id="P-0002" lvl="0"><number>&lsqb;0002&rsqb;</number> This invention relates generally to magnetic angular measurement devices, and, more particularly, to a system for calibrating a magnetic angular measurement device. </paragraph>
<paragraph id="P-0003" lvl="0"><number>&lsqb;0003&rsqb;</number> Contactless angular measurement devices are known and are typically implemented to determine an angular orientation of a magnetic element on a shaft with respect to at least one magnetoresponsive sensor spaced from the rotating magnetic element, or vice versa. As the magnet rotates, the sensor or sensors generate a signal which may be analyzed to determine the angle of orientation of the magnet relative to the sensor. These measurement devices may be implemented such that the magnetic element is rotatably interconnected with a linearly moving component, such as a suspension unit or control arm of a vehicle. As the component moves vertically, this substantially linear movement may be translated to rotational movement or pivoting of the magnet relative to the sensor. The device may then determine the angle of rotation of the magnet, from which the corresponding displacement of the component on the vehicle is then calculated. </paragraph>
<paragraph id="P-0004" lvl="0"><number>&lsqb;0004&rsqb;</number> Typically, laser trimming of the sensors or the magnetic element has been used in order to offset errors which may arise due to an internal magnetization field of the sensors being misaligned with an external field of the magnet. Furthermore, the orientation of the magnetic field directions of the sensors relative to the external field directions of the magnetic elements must be known after the device is assembled. After the sensors have been trimmed and the angular measurement device has been fully assembled, the magnet is positionable relative to the sensors such that an internal magnetization vector of one of the sensors is substantially parallel to or otherwise positioned relative to a magnetization vector of the magnet at an initial zero or reference point. While this process is generally effective in manufacturing an accurate sensor for measuring the angular rotation of a magnet, laser trimming adds substantially to the overall cost of the angular measurement devices. Furthermore, any variations in positioning of one sensor relative to another may result in offsets or errors in the output of the device that are unaccounted for during the production of the devices. </paragraph>
<paragraph id="P-0005" lvl="0"><number>&lsqb;0005&rsqb;</number> An additional concern with these devices is that they typically require a rare earth type of permanent magnet, which is stronger and more magnetically stable than other magnetic materials, such as a common ferrite magnet. These permanent magnets are implemented in order to minimize the effects due to aging of the magnet over the life of the device or due to temperature variations surrounding the device. While this may improve the overall accuracy of the device over time, the rare earth permanent magnets also add to the cost of the devices. </paragraph>
<paragraph id="P-0006" lvl="0"><number>&lsqb;0006&rsqb;</number> Generally, a particular magnetic element is selected for use in these measurement devices such that the internal magnetic field within the sensors and generated by the magnetic element is substantially greater than any external fields associated with the surroundings of the magnet and sensor. This results in the sensors being saturated by the internal field of the magnetic element when the sensors and magnet are placed substantially near to each other, which further results in the external fields affecting the sensors in a substantially insignificant manner. This avoids the necessity of accounting for offsets due to varying external magnetic fields that is typically required in other magnetic systems, such as vehicle compass systems. </paragraph>
<paragraph id="P-0007" lvl="0"><number>&lsqb;0007&rsqb;</number> Furthermore, the magnetoresponsive sensors, such as magnetoresistive sensors, typically implemented in these measurement devices are operable in a non-linear mode, such that an output frequency of the sensors is doubled, whereby 180&deg; rotation of the magnet generates a full cycle of a sine and cosine output signal of the sensors. In order to improve the accuracy of these non-contacting angular measurement devices, precise manufacturing and assembly of the sensors and the magnetic elements may be necessary. If a single sensor is implemented, the device may be more readily manufactured but is only accurate within a small range of rotation, typically less than approximately plus or minus 15&deg;. Because the sensors are saturated, orienting two sensors in a predetermined manner, such as 45&deg; relative to one another, allows for a measurement of a larger angle of rotation, within a range of 180&deg;,or plus or minus 90&deg; from an initial setting. However, the accuracy of such a device is highly dependent on the manufacturing of the sensors since they must be precisely manufactured and oriented at 45&deg; relative to one another, in order to minimize errors in the output of the system. Because such precision is required in manufacturing and assembling these sensors and the magnets, manufacturing irregularities may result in errors in the output of the device. </paragraph>
<paragraph id="P-0008" lvl="0"><number>&lsqb;0008&rsqb;</number> Therefore, there is a need in the art for a contactless angular measurement device which is relatively low cost yet remains accurate throughout the life of the device. The device should account for manufacturing irregularities, system aging and thermally induced drifts within the sensor device in order to maintain an accurate reading over the life of the device. </paragraph>
</section>
<section>
<heading lvl="1">SUMMARY OF THE INVENTION </heading>
<paragraph id="P-0009" lvl="0"><number>&lsqb;0009&rsqb;</number> The present invention is intended to provide a low cost contactless angular measurement system for use in determining a linear movement of a component of a vehicle by measuring a corresponding rotational movement of a magnetic element that is interconnected with the component. </paragraph>
<paragraph id="P-0010" lvl="0"><number>&lsqb;0010&rsqb;</number> According to a first aspect of the invention, a vehicular magnetic rotational measurement device for determining a displacement of an element comprises a magnetic element which generates a magnetic field, at least one magnetoresponsive sensor for sensing the magnetic field generated by the magnetic element, and an electronic control for analyzing an output of the sensor and determining a degree of movement of the magnetic element relative to the sensor from the output of the sensor. The magnetic element is spaced from the magnetoresponsive sensor and is movable relative thereto. The sensor is operable to detect a change in the magnetic field of the magnetic element which is associated with a movement of the magnetic element relative to the magnetoresponsive sensor. The electronic control is operable to determine an offset in the output of the sensor and adjusts an output of the electronic control in response to this offset. </paragraph>
<paragraph id="P-0011" lvl="0"><number>&lsqb;0011&rsqb;</number> According to another aspect of the present invention, a magnetic level sensor is adapted for interconnection with a generally linearly movable component of the vehicle. The level sensor determines an orientation of the component relative to a frame of the vehicle and comprises a magnetic element, at least one magnetoresponsive sensor for sensing a magnetic field generated by the magnetic element, and an electronic control which is operable to analyze an output of the sensor and determine an angle of rotation of the magnetic element or the sensor in response to the output of the sensor. The magnetic element is spaced from the magnetoresponsive sensor and is rotatable relative thereto. The sensor is operable to detect a change in the magnetic field of the magnetic element which is associated with a rotational movement of the magnetic element relative to the sensor. The magnetic element or the sensor is rotatably interconnected to the component of the vehicle such that a generally linear displacement of the component causes a corresponding angular rotation of the magnetic element or the magnetoresponsive sensor. The electronic control is operable to determine an offset in the output of the sensor and adjust an output of the electronic control in response to the offset. </paragraph>
<paragraph id="P-0012" lvl="0"><number>&lsqb;0012&rsqb;</number> Preferably, the offset is determined in response to an average ordinate value of equal and opposite pairs of data points sampled by the electronic control. The control may initially determine the offset when the vehicle or control is started, or may continuously determine the offset and adjust the output accordingly. </paragraph>
<paragraph id="P-0013" lvl="0"><number>&lsqb;0013&rsqb;</number> These and other objects, advantages, purposes and features of this invention will become apparent upon review of the following specification in conjunction with the drawings.</paragraph>
</section>
</summary-of-invention>
<brief-description-of-drawings>
<section>
<heading lvl="1">BRIEF DESCRIPTION OF THE DRAWINGS </heading>
<paragraph id="P-0014" lvl="0"><number>&lsqb;0014&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1</cross-reference> is a perspective view of a magnetic level sensor according to the present invention illustrated interconnected between a chassis of a vehicle arid a control arm of the vehicle and operable to determine a vertical displacement of the control arm of the vehicle; </paragraph>
<paragraph id="P-0015" lvl="0"><number>&lsqb;0015&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 2</cross-reference> is an exploded view of a contactless angular measurement device useful with the present invention; </paragraph>
<paragraph id="P-0016" lvl="0"><number>&lsqb;0016&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3</cross-reference> is a cross-sectional view of the contactless angular measurement device of <cross-reference target="DRAWINGS">FIG. 2</cross-reference> in its assembled state; </paragraph>
<paragraph id="P-0017" lvl="0"><number>&lsqb;0017&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 4</cross-reference> is a block diagram of an application of the present invention; </paragraph>
<paragraph id="P-0018" lvl="0"><number>&lsqb;0018&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 5</cross-reference> is a schematic illustrating the electronic circuit of the present invention; </paragraph>
<paragraph id="P-0019" lvl="0"><number>&lsqb;0019&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 6</cross-reference> is an illustration of a sine and cosine output of the two magnetoresponsive sensors implemented in a level sensor device useful with the present invention; </paragraph>
<paragraph id="P-0020" lvl="0"><number>&lsqb;0020&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 7</cross-reference> is a diagram of the sensor outputs of <cross-reference target="DRAWINGS">FIG. 6</cross-reference> as they are plotted in a Cartesian coordinate system; and </paragraph>
<paragraph id="P-0021" lvl="0"><number>&lsqb;0021&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 8</cross-reference> is a flow chart of a calibration process according to the present invention for use with an angular measurement device.</paragraph>
</section>
</brief-description-of-drawings>
<detailed-description>
<section>
<heading lvl="1">DESCRIPTION OF THE PREFERRED EMBODIMENTS </heading>
<paragraph id="P-0022" lvl="0"><number>&lsqb;0022&rsqb;</number> Referring now specifically to the drawings, and the illustrative embodiments depicted therein, there is shown in <cross-reference target="DRAWINGS">FIG. 1 a</cross-reference> magnetic level sensor <highlight><bold>10</bold></highlight> which comprises a magnetic angular measurement device secured to a chassis or frame <highlight><bold>12</bold></highlight> of a vehicle <highlight><bold>14</bold></highlight>. Angular measurement device <highlight><bold>11</bold></highlight> preferably comprises two magnetoresponsive sensors <highlight><bold>16</bold></highlight> (<cross-reference target="DRAWINGS">FIG. 2</cross-reference>) and a magnetic element <highlight><bold>18</bold></highlight> spaced from the sensors <highlight><bold>14</bold></highlight>. Magnetoresponsive sensors <highlight><bold>16</bold></highlight> may be a magnetoresistive, magnetoinductive, magnetocapacitive or flux gate type sensor. Sensors <highlight><bold>16</bold></highlight> are secured within a housing <highlight><bold>20</bold></highlight> which is preferably secured to the chassis <highlight><bold>12</bold></highlight> of vehicle <highlight><bold>14</bold></highlight>, while magnetic element <highlight><bold>18</bold></highlight> may be secured to an end of a rod or shaft <highlight><bold>22</bold></highlight> which is preferably pivotally or rotatably interconnected with a movable component of vehicle <highlight><bold>14</bold></highlight>, such as a corner assembly <highlight><bold>24</bold></highlight>, such that vertical movement of corner assembly <highlight><bold>24</bold></highlight> is translated to a rotational movement of shaft or spindle <highlight><bold>22</bold></highlight> and magnetic element <highlight><bold>18</bold></highlight>. However, magnetic element <highlight><bold>18</bold></highlight> may be mounted at the chassis while the sensors <highlight><bold>16</bold></highlight> are mounted at the control assembly, or one of the components may be mounted at any other movable element of the vehicle, such as a suspension element or the like, which is movable relative to the frame or chassis of the vehicle in response to a change in load of the vehicle, without affecting the scope of the present invention. Level sensor <highlight><bold>10</bold></highlight> further comprises an electronic control or microcontroller <highlight><bold>26</bold></highlight> (<cross-reference target="DRAWINGS">FIG. 4</cross-reference>) which analyzes an output of the sensors <highlight><bold>16</bold></highlight> to determine the degree of movement and/or angle of rotation of magnetic element <highlight><bold>18</bold></highlight> relative to the sensors <highlight><bold>16</bold></highlight>, and thus the corresponding vertical displacement of the corner assembly <highlight><bold>24</bold></highlight> relative to the chassis <highlight><bold>12</bold></highlight> of vehicle <highlight><bold>14</bold></highlight>. Microcontroller <highlight><bold>26</bold></highlight> further analyzes the output of sensors <highlight><bold>16</bold></highlight> and determines if there is an offset or error in the output. Microcontroller <highlight><bold>26</bold></highlight> preferably includes a processor, such as a microcomputer or microprocessor, which is operable to calculate the offset in the output. If an offset exists, the microcontroller <highlight><bold>26</bold></highlight> adjusts an output of microcontroller <highlight><bold>26</bold></highlight> in a manner to substantially cancel the offset in order to provide an accurate level measurement to a display, auxiliary control or the like. The microcontroller programmed in this manner provides a calibration system for magnetic measurement device <highlight><bold>11</bold></highlight>. </paragraph>
<paragraph id="P-0023" lvl="0"><number>&lsqb;0023&rsqb;</number> The magnetic measurement device associated with the present invention is preferably a commercially available device, such as a Phillips KMZ-41 magnetoresistive sensor described in Philips data book &num;SC-17, which is hereby incorporated herein by reference, or a Honeywell HCS-1512 sensor, or other sensor devices which determine a relative angular rotation between a magnetic element and at least one magnetoresponsive sensor. This relative rotation may be provided by rotating the magnetic element while the sensors are substantially fixed, or by rotating the sensors relative to a substantially fixed magnetic element. By implementing a calibration process with the angular measurement devices, these devices may be manufactured using lower cost magnetic elements and may also allow for elimination of certain manufacturing processes, such as laser trimming of the sensors and the like. Furthermore, the present invention corrects for offsets or errors due to manufacturing irregularities and due to any magnetic drift associated with the age of the magnetic element or sensors or with temperature variations surrounding the device. </paragraph>
<paragraph id="P-0024" lvl="0"><number>&lsqb;0024&rsqb;</number> As best shown in <cross-reference target="DRAWINGS">FIGS. 2 and 3</cross-reference>, housing <highlight><bold>20</bold></highlight> of magnetic angular measurement device <highlight><bold>11</bold></highlight> substantially encases magnetoresponsive sensors <highlight><bold>16</bold></highlight>, which are mounted on a circuit board <highlight><bold>30</bold></highlight>, magnetic element <highlight><bold>18</bold></highlight>, which is secured at one end to shaft <highlight><bold>22</bold></highlight>, and a barrier seal <highlight><bold>32</bold></highlight> positioned between the sensors <highlight><bold>16</bold></highlight> and magnet <highlight><bold>18</bold></highlight>. A mounting bracket <highlight><bold>34</bold></highlight> is attached to housing <highlight><bold>20</bold></highlight> and is adapted to secure housing <highlight><bold>20</bold></highlight> to the chassis or frame <highlight><bold>12</bold></highlight> of the vehicle <highlight><bold>14</bold></highlight>. When assembled, as shown in <cross-reference target="DRAWINGS">FIG. 3</cross-reference>, shaft <highlight><bold>22</bold></highlight> extends through a bushing <highlight><bold>36</bold></highlight> and protrudes outwardly from housing <highlight><bold>20</bold></highlight>. Shaft <highlight><bold>22</bold></highlight> preferably further extends through a pair of seals <highlight><bold>38</bold></highlight><highlight><italic>a </italic></highlight>and <highlight><bold>38</bold></highlight><highlight><italic>b</italic></highlight>, which prevent water or other contaminants from entering into housing <highlight><bold>20</bold></highlight>, and is secured by a clip <highlight><bold>40</bold></highlight> which is attached to shaft <highlight><bold>22</bold></highlight> in order to prevent longitudinal movement of shaft <highlight><bold>22</bold></highlight> relative to housing <highlight><bold>20</bold></highlight> and sensors <highlight><bold>16</bold></highlight>. A cap <highlight><bold>42</bold></highlight> is also included to protect the clip <highlight><bold>40</bold></highlight> and shaft <highlight><bold>22</bold></highlight> from damage and exposure to water, dirt and other contaminants. The details of the internal components of measurement device <highlight><bold>11</bold></highlight> are not included herein since these are known devices which are commercially available. </paragraph>
<paragraph id="P-0025" lvl="0"><number>&lsqb;0025&rsqb;</number> When implemented on vehicle <highlight><bold>14</bold></highlight>, shaft <highlight><bold>22</bold></highlight> of measurement device <highlight><bold>11</bold></highlight> preferably includes a narrowed or flattened portion <highlight><bold>22</bold></highlight><highlight><italic>a </italic></highlight>(<cross-reference target="DRAWINGS">FIG. 2</cross-reference>) formed at an outward end for interconnection with a shaft end <highlight><bold>44</bold></highlight><highlight><italic>a </italic></highlight>of an arm or lever <highlight><bold>44</bold></highlight> (<cross-reference target="DRAWINGS">FIG. 1</cross-reference>), such that arm <highlight><bold>44</bold></highlight> pivots about an axis <highlight><bold>45</bold></highlight> defined by shaft <highlight><bold>22</bold></highlight>, which results in a pivoting or rotation of shaft <highlight><bold>22</bold></highlight>, and thus magnet <highlight><bold>18</bold></highlight>, relative to sensors <highlight><bold>16</bold></highlight>. An end <highlight><bold>44</bold></highlight><highlight><italic>b </italic></highlight>of arm <highlight><bold>44</bold></highlight> opposite shaft end <highlight><bold>44</bold></highlight><highlight><italic>a </italic></highlight>may be pivotally interconnected with an upper end <highlight><bold>46</bold></highlight><highlight><italic>a </italic></highlight>of a substantially vertical member <highlight><bold>46</bold></highlight>, which is preferably secured at its lower end <highlight><bold>46</bold></highlight><highlight><italic>b </italic></highlight>to control arm <highlight><bold>24</bold></highlight> of vehicle <highlight><bold>14</bold></highlight>, or to another linearly or movable component of vehicle <highlight><bold>14</bold></highlight>. Preferably, arm <highlight><bold>44</bold></highlight> and vertical member <highlight><bold>46</bold></highlight> are pivotally interconnected through a ball and socket joint, such that vertical movement of vertical member <highlight><bold>46</bold></highlight> correspondingly moves end <highlight><bold>44</bold></highlight><highlight><italic>b </italic></highlight>of arm <highlight><bold>44</bold></highlight> vertically, which results in arm <highlight><bold>44</bold></highlight> pivoting about end <highlight><bold>44</bold></highlight><highlight><italic>a </italic></highlight>and axis <highlight><bold>45</bold></highlight>. Therefore, vertical movement of the corner assembly <highlight><bold>24</bold></highlight> is effectively translated into a rotational movement of shaft <highlight><bold>22</bold></highlight> and magnetic element <highlight><bold>18</bold></highlight> relative to the substantially fixed magnetoresponsive sensors <highlight><bold>16</bold></highlight> of level sensor <highlight><bold>10</bold></highlight>. Although shown and described as attaching between a frame <highlight><bold>12</bold></highlight> and the control arm or corner assembly <highlight><bold>24</bold></highlight>, level sensor <highlight><bold>10</bold></highlight> may alternatively be interconnected with other linearly moving components, such as a suspension unit or the like, whereby a substantially linear displacement is translated into a rotational movement of shaft <highlight><bold>22</bold></highlight>. </paragraph>
<paragraph id="P-0026" lvl="0"><number>&lsqb;0026&rsqb;</number> As magnet <highlight><bold>18</bold></highlight> is rotated, the angle of its external magnetic field changes relative to an internal magnetic field of sensors <highlight><bold>16</bold></highlight>, which causes an internal magnetization vector to also rotate in order to align itself with the external field. As shown in <cross-reference target="DRAWINGS">FIG. 2</cross-reference>, the two magnetoresponsive sensors <highlight><bold>16</bold></highlight> are positioned at 45&deg; relative to one another, which results in their output signals associated with a rotation of the magnet <highlight><bold>18</bold></highlight> being a sine wave <highlight><bold>50</bold></highlight> and cosine wave <highlight><bold>52</bold></highlight>, or 90&deg; out of phase from each other (<cross-reference target="DRAWINGS">FIG. 6</cross-reference>). These output waves may be plotted on a Cartesian coordinate system <highlight><bold>54</bold></highlight> (<cross-reference target="DRAWINGS">FIG. 7</cross-reference>) so as to trace a substantially circular pattern <highlight><bold>56</bold></highlight> representing the rotation of magnet <highlight><bold>18</bold></highlight> relative to sensors <highlight><bold>16</bold></highlight>. Because sensors <highlight><bold>16</bold></highlight> are typically saturated by the external magnetic field of magnet <highlight><bold>18</bold></highlight>, the output frequency of sensors <highlight><bold>16</bold></highlight> is doubled such that the outputs of sensors <highlight><bold>16</bold></highlight> are sine and cosine waves of twice the angle of rotation of magnet <highlight><bold>18</bold></highlight> (sin 2 &agr; and cos 2 &agr;, where &agr; is the angle of rotation of magnet <highlight><bold>18</bold></highlight> relative to sensors <highlight><bold>16</bold></highlight>) which results in a 180&deg; rotation of magnet <highlight><bold>18</bold></highlight> relative to sensors <highlight><bold>16</bold></highlight> generating a full cycle of the sine and cosine output signals of magnetoresponsive sensors <highlight><bold>16</bold></highlight>. This allows angular measurement device <highlight><bold>11</bold></highlight> to accurately determine the angle of rotation of shaft <highlight><bold>22</bold></highlight> and magnet <highlight><bold>18</bold></highlight> within a range of only 180&deg;, or plus or minus 90&deg; from an initial reference point. However, it is further envisioned that the present invention may be equally applicable to a 360&deg; rotational device, and thus determine relative rotation between vehicular components, such as steering angle positions, or the like, or any other application where it is desired to know a shaft angle of rotation, as well as quasi-linear relative movement. </paragraph>
<paragraph id="P-0027" lvl="0"><number>&lsqb;0027&rsqb;</number> Because the rotation of shaft <highlight><bold>22</bold></highlight> cannot physically be greater than 180&deg; in response to a substantially linear displacement of vertical member <highlight><bold>46</bold></highlight>, implementation of the commercially available angular measurement device <highlight><bold>11</bold></highlight> is appropriate in order for level sensor <highlight><bold>10</bold></highlight> to accurately determine the angular rotation of shaft <highlight><bold>22</bold></highlight>. Once the angular rotation of shaft <highlight><bold>22</bold></highlight> is known, vertical displacement of the control arm <highlight><bold>24</bold></highlight> may be easily calculated, knowing the length of lever arm <highlight><bold>44</bold></highlight>. For example, with a length L of lever arm <highlight><bold>44</bold></highlight>, any rotational measurement (&agr;) of shaft <highlight><bold>22</bold></highlight> from an initial reference point results in a calculated vertical displacement of Lsin &agr;. </paragraph>
<paragraph id="P-0028" lvl="0"><number>&lsqb;0028&rsqb;</number> Microcontroller <highlight><bold>26</bold></highlight> is operable to analyze the output of magnetoresponsive sensors <highlight><bold>16</bold></highlight> in order to determine the angular rotation of magnet <highlight><bold>18</bold></highlight> relative to sensors <highlight><bold>16</bold></highlight>. For any given angular rotation (&agr;) of magnet <highlight><bold>18</bold></highlight> relative to sensors <highlight><bold>16</bold></highlight>, sensors <highlight><bold>16</bold></highlight> measure the sine and cosine of twice that angle. As is known in the art, the angle of rotation &agr; may then be determined by solving the equation  
<math-cwu id="MATH-US-00001">
<number>1</number>
<math>
<mrow>
  <mrow>
    <mi>tan</mi>
    <mo>&it;</mo>
    <mstyle>
      <mtext>&emsp;</mtext>
    </mstyle>
    <mo>&it;</mo>
    <mn>2</mn>
    <mo>&it;</mo>
    <mstyle>
      <mtext>&emsp;</mtext>
    </mstyle>
    <mo>&it;</mo>
    <mi>&alpha;</mi>
  </mrow>
  <mo>=</mo>
  <mfrac>
    <mrow>
      <mi>sin</mi>
      <mo>&it;</mo>
      <mstyle>
        <mtext>&emsp;</mtext>
      </mstyle>
      <mo>&it;</mo>
      <mn>2</mn>
      <mo>&it;</mo>
      <mi>&alpha;</mi>
    </mrow>
    <mrow>
      <mi>cos</mi>
      <mo>&it;</mo>
      <mstyle>
        <mtext>&emsp;</mtext>
      </mstyle>
      <mo>&it;</mo>
      <mn>2</mn>
      <mo>&it;</mo>
      <mi>&alpha;</mi>
    </mrow>
  </mfrac>
</mrow>
</math>
<mathematica-file id="MATHEMATICA-00001" file="US20030001565A1-20030102-M00001.NB"/>
<image id="EMI-M00001" wi="216.027" he="17.03835" file="US20030001565A1-20030102-M00001.TIF" imf="TIFF" ti="MF"/>
</math-cwu>
</paragraph>
<paragraph id="P-0029" lvl="7"><number>&lsqb;0029&rsqb;</number> for &agr; as sin 2 &agr; and cos 2 &agr; are the values measured by the two sensors. </paragraph>
<paragraph id="P-0030" lvl="0"><number>&lsqb;0030&rsqb;</number> Referring now to <cross-reference target="DRAWINGS">FIG. 7</cross-reference>, when the values of sine wave <highlight><bold>50</bold></highlight> and cosine wave <highlight><bold>52</bold></highlight> are plotted on a Cartesian coordinate system <highlight><bold>54</bold></highlight> associated with the vehicle <highlight><bold>14</bold></highlight>, a generally circular path or trace <highlight><bold>56</bold></highlight> is formed which represents a 180&deg; rotation of magnet <highlight><bold>18</bold></highlight> relative to sensors <highlight><bold>16</bold></highlight>. However, due to irregularities in the manufacturing processes of the angular measurement devices, or with changes in the magnetic fields associated with either magnet <highlight><bold>18</bold></highlight> or sensors <highlight><bold>16</bold></highlight>, the output of magnetoresponsive sensors <highlight><bold>16</bold></highlight> may be offset from zero or may deviate from an accurate reading. This is represented in <cross-reference target="DRAWINGS">FIG. 7</cross-reference> by the circle <highlight><bold>56</bold></highlight> being shifted, such as upward and to the right, from a center or origin <highlight><bold>60</bold></highlight> of coordinate system <highlight><bold>54</bold></highlight> associated with magnetoresponsive sensors <highlight><bold>16</bold></highlight> and vehicle <highlight><bold>14</bold></highlight>, such that a center <highlight><bold>58</bold></highlight> of the circle <highlight><bold>56</bold></highlight> is displaced from the origin <highlight><bold>60</bold></highlight>. Previous attempts at reducing such a drift or offset have included using high cost sensors and magnets and further requiring extremely precise manufacturing tolerances, such that the error or offset of the output of sensors <highlight><bold>16</bold></highlight> is minimized both at the time of manufacturing and over the useful life of the device. However, the present invention avoids these high cost requirements by implementing microcontroller <highlight><bold>26</bold></highlight>, which samples data points as magnet <highlight><bold>18</bold></highlight> is rotated and provides an algorithm for adjusting the output of sensors <highlight><bold>16</bold></highlight> in order to account for this error. </paragraph>
<paragraph id="P-0031" lvl="0"><number>&lsqb;0031&rsqb;</number> Preferably, algorithm <highlight><bold>100</bold></highlight> (<cross-reference target="DRAWINGS">FIG. 8</cross-reference>) of microcontroller <highlight><bold>26</bold></highlight> samples data points as magnet <highlight><bold>18</bold></highlight> is rotated until an equal and opposite pair or set of data points is collected, where an equal pair is defined by a pair of data points having a common x or y component of their coordinates relative to coordinate system <highlight><bold>54</bold></highlight>. More specifically, if a first sampled data point A has the coordinates (x<highlight><subscript>a</subscript></highlight>, y<highlight><subscript>a</subscript></highlight>), the system continues to sample data points until a second data point B or C, having coordinates (x<highlight><subscript>a</subscript></highlight>, y<highlight><subscript>b</subscript></highlight>) or (x<highlight><subscript>b</subscript></highlight>, y<highlight><subscript>a</subscript></highlight>), respectively, is also collected. Once a pair of data points (A and B or A and C) has been collected, the center or initial zero reference of the circle <highlight><bold>56</bold></highlight> relative to the uncommon or opposite ordinates of the data points may be easily calculated by averaging those ordinates. Microcontroller <highlight><bold>26</bold></highlight> then continues to sample data points until a second pair of data points is collected which includes a new data point which is equal and opposite to one of the previously collected data points. For example, if the first data point collected A has the coordinates (x<highlight><subscript>a</subscript></highlight>, y<highlight><subscript>a</subscript></highlight>), then the system may continue to monitor the output until a second data point B, having coordinates (x<highlight><subscript>a</subscript></highlight>, y<highlight><subscript>b</subscript></highlight>), is also collected. At this point, the ordinate y<highlight><subscript>c</subscript></highlight>, corresponding to a y value of the center <highlight><bold>58</bold></highlight> of circle <highlight><bold>56</bold></highlight>, may be calculated by averaging the uncommon ordinates y<highlight><subscript>a </subscript></highlight>and y<highlight><subscript>b </subscript></highlight>of the two data points collected. Microcontroller <highlight><bold>26</bold></highlight> may continue to monitor sensors <highlight><bold>16</bold></highlight> until a third data point D, which may have coordinates (x<highlight><subscript>d</subscript></highlight>, y<highlight><subscript>b</subscript></highlight>), is also collected. Microcontroller <highlight><bold>26</bold></highlight> may then determine the other ordinate (x<highlight><subscript>c</subscript></highlight>) of the center <highlight><bold>58</bold></highlight> of circle <highlight><bold>56</bold></highlight> by averaging the x components (x<highlight><subscript>d </subscript></highlight>and x<highlight><subscript>a</subscript></highlight>) of the second pair of data points. At this point the x and y values of the true center (x<highlight><subscript>c</subscript></highlight>, y<highlight><subscript>c</subscript></highlight>) of the output of magnetoresponsive sensors <highlight><bold>16</bold></highlight> is known. The data points collected by microcontroller <highlight><bold>26</bold></highlight> may be sampled at any point about the circular trace. Preferably, microcontroller <highlight><bold>26</bold></highlight> is operable to first determine whether the values of the data points are a predetermined minimum value apart from one another prior to averaging their ordinates, in order to minimize noise effects on the system. </paragraph>
<paragraph id="P-0032" lvl="0"><number>&lsqb;0032&rsqb;</number> Once the true center (x<highlight><subscript>c</subscript></highlight>, y<highlight><subscript>c</subscript></highlight>) is known, the offset may easily be accounted for. As magnet <highlight><bold>18</bold></highlight> rotates relative to the sensors <highlight><bold>16</bold></highlight>, additional data points, such as E, having coordinates (x, y) may be sampled. As shown in <cross-reference target="DRAWINGS">FIG. 7</cross-reference>, without accounting for the offset of the center of the circular trace, this data point E provides an error reading as microcontroller reads its angle of rotation relative to the y axis to be an angle &THgr;/2, while its true rotation relative to sensors <highlight><bold>16</bold></highlight> is the angle &agr;. Microcontroller <highlight><bold>26</bold></highlight> corrects for this error by subtracting the x and y components of the calculated center (x<highlight><subscript>c</subscript></highlight>, y<highlight><subscript>c</subscript></highlight>) from the respective components of the newly sampled data point E (x, y), and then determining the correct angle of rotation. This is easily accomplished by solving for the arctangent of &lsqb;(x&minus;x<highlight><subscript>c</subscript></highlight>)/(y&minus;y<highlight><subscript>c</subscript></highlight>)&rsqb; which results in the angle of rotation &agr;, thereby providing a simple mathematical correction of the output of sensors <highlight><bold>16</bold></highlight> while also requiring a minimal amount of data points to be sampled and stored at any given time. Microcontroller <highlight><bold>26</bold></highlight> of the present invention continues to sample data points and collect equal pairs of data points in order to continuously calibrate or adjust the output of sensors <highlight><bold>16</bold></highlight> to maintain an accurate reading of the rotation of magnet <highlight><bold>18</bold></highlight>. By requiring a minimum difference in magnitude of a valid pair of data points, microcontroller <highlight><bold>26</bold></highlight> only adjusts the output of sensors <highlight><bold>16</bold></highlight> in response to a pair of data points that have substantially different magnitudes of at least one ordinate. This substantially precludes the likelihood of incorrectly adjusting the output of sensors <highlight><bold>16</bold></highlight> in response to mere noise in the system. </paragraph>
<paragraph id="P-0033" lvl="0"><number>&lsqb;0033&rsqb;</number> As shown in <cross-reference target="DRAWINGS">FIG. 8</cross-reference>, calibration algorithm <highlight><bold>100</bold></highlight> of microcontroller <highlight><bold>26</bold></highlight> starts at <highlight><bold>110</bold></highlight> by setting both the x and y offsets to zero, or, in other words, setting the x<highlight><subscript>c </subscript></highlight>and y<highlight><subscript>c</subscript></highlight>, values to zero. Data points are then sampled at <highlight><bold>120</bold></highlight>. It is then determined at <highlight><bold>130</bold></highlight> whether a pair of equal and opposite points have been sampled by microcontroller <highlight><bold>26</bold></highlight>. If a new pair has not been collected, algorithm <highlight><bold>100</bold></highlight> subtracts the x and y offset from the newly sampled data point at <highlight><bold>140</bold></highlight>. The angle of rotation is then determined at <highlight><bold>150</bold></highlight> by solving the arctangent equation discussed above. Algorithm <highlight><bold>100</bold></highlight> then returns to sampling data at <highlight><bold>120</bold></highlight>. If it is determined at <highlight><bold>130</bold></highlight> that a pair has been collected, it is then determined at <highlight><bold>160</bold></highlight> whether the difference between the magnitudes of the uncommon ordinates is greater than a predetermined value. This minimum difference value is selected in order to adjust only the offset value when there is a significant difference between the two points, thereby avoiding resetting the offset value when the difference between the points may be substantially or entirely due to noise in the system. If it is determined at <highlight><bold>160</bold></highlight> that the difference is not greater than the predetermined value, then the x and y offset is subtracted from the new data point at <highlight><bold>140</bold></highlight> and the angle of rotation is calculated at <highlight><bold>150</bold></highlight> before algorithm <highlight><bold>100</bold></highlight> returns to sampling data at <highlight><bold>120</bold></highlight>. On the other hand, if it is determined at <highlight><bold>160</bold></highlight> that a valid pair has been collected, a new x or y offset is calculated at <highlight><bold>170</bold></highlight> by averaging the appropriate opposite ordinates of the valid pair. The x and y offsets are then subtracted from the new data point at <highlight><bold>140</bold></highlight> and the angle of rotation is calculated at <highlight><bold>150</bold></highlight>. Algorithm <highlight><bold>100</bold></highlight> then returns to sampling data at <highlight><bold>120</bold></highlight>. </paragraph>
<paragraph id="P-0034" lvl="0"><number>&lsqb;0034&rsqb;</number> Referring now to <cross-reference target="DRAWINGS">FIGS. 4 and 5</cross-reference>, magnetic level sensor <highlight><bold>10</bold></highlight> is preferably interconnected with a pressure sensor <highlight><bold>60</bold></highlight>, a valve <highlight><bold>62</bold></highlight> and a pump <highlight><bold>64</bold></highlight>, each of which is associated with a suspension device or unit, such as an air shock or the like. As angular measurement device <highlight><bold>11</bold></highlight> monitors the angular rotation of magnet <highlight><bold>18</bold></highlight> via sensors <highlight><bold>16</bold></highlight>, the rotational movement of magnet <highlight><bold>18</bold></highlight> is communicated to microcontroller <highlight><bold>26</bold></highlight>. A pair of operational amplifiers <highlight><bold>66</bold></highlight><highlight><italic>a </italic></highlight>and <highlight><bold>66</bold></highlight><highlight><italic>b </italic></highlight>are operable to generate sine and cosine signals <highlight><bold>67</bold></highlight><highlight><italic>a </italic></highlight>and <highlight><bold>67</bold></highlight><highlight><italic>b</italic></highlight>, respectively, to microcontroller <highlight><bold>26</bold></highlight>. The corresponding vertical displacement of the vehicle component <highlight><bold>24</bold></highlight> may then be easily determined in response to the sine and cosine signals, as discussed above. When this vertical movement is greater than a predetermined value from a level reference point, microcontroller <highlight><bold>26</bold></highlight> may further function to inflate or deflate or bleed the air shocks of vehicle <highlight><bold>14</bold></highlight> by activating pump <highlight><bold>64</bold></highlight> or valve <highlight><bold>62</bold></highlight>, respectively, via corresponding solenoids <highlight><bold>68</bold></highlight>. This activation continues until vehicle <highlight><bold>14</bold></highlight> is brought back within the predetermined range of level. Pump <highlight><bold>64</bold></highlight> and valve <highlight><bold>62</bold></highlight> are used to inflate and deflate the air shocks, respectively, and are preferably not activated unless microcontroller <highlight><bold>26</bold></highlight> determines that vehicle <highlight><bold>14</bold></highlight> is outside of the predetermined range level for a prolonged period of time. This avoids continuous inflation and deflation of the air shocks as vehicle <highlight><bold>14</bold></highlight> is being driven and the control arm <highlight><bold>24</bold></highlight> or other component is moving vertically upwardly and downwardly in response to rough road conditions. Preferably, microcontroller <highlight><bold>26</bold></highlight> is further operable to communicate with other vehicle systems via a communication driver <highlight><bold>70</bold></highlight>, and may be adapted to communicate using various protocols for different vehicle applications of the present invention. </paragraph>
<paragraph id="P-0035" lvl="0"><number>&lsqb;0035&rsqb;</number> Although shown and described as sampling for equal and opposite pairs of data points and adjusting the output of sensors <highlight><bold>16</bold></highlight> accordingly, microcontroller <highlight><bold>26</bold></highlight> may provide alternate algorithms for analyzing the output of sensors <highlight><bold>16</bold></highlight> and adjusting the output to account for any offset that may occur over time. For example, the algorithm may sample maximum and minimum values of the sine and cosine waves and determine the offset or center by averaging the peaks and valleys of the respective waves. Other forms of calibrating a magnetoresponsive sensor output are known in the field of magnetic compasses for vehicles, such as the compass compensation systems disclosed in commonly assigned U.S. Pat. Nos. 5,255,442, 5,644,851, 5,632,092 and 5,802,727, each of which is hereby incorporated herein by reference. While such compensation systems have been applied to vehicle compasses, there has been no application of any compensation system for a magnetic angular measurement device, nor has there been any suggestion in the art to apply such compensation systems to such a device. Calibration systems have not been applied to such angular measurement devices because these devices have historically been manufactured with precision components and processes, such that the offsets or errors associated with the magnets and the sensors are minimized during manufacturing of the devices. However, by applying the concepts of a compass compensation system to an angular measurement device, a lower cost angular measurement device may be manufactured which will provide an accurate output after manufacturing and will continue to provide an accurate output throughout the life of the device. </paragraph>
<paragraph id="P-0036" lvl="0"><number>&lsqb;0036&rsqb;</number> In contrast to a vehicle compass system, the magnetic angular measurement devices useful with the present invention do not require a presetting or biasing of the sensors prior to applying a compass calibration system thereto. This is because the magnetic angular measurement device or system is only effected by electrically induced offsets in the sensors and not with any magnetic induced offsets due to the vehicle or its surroundings. Accordingly, the calibration system of the present invention may be implemented with an angular measurement device without first having to preset a magnetic signature of the vehicle or other surroundings of the device. While magnetic induced offsets from the vehicle metal and other electronics may affect the angular measurement devices, its effect would be minimal compared to the electrically induced offsets of the sensors and magnet itself. Any of these minor offsets are further minimized as the algorithm of the present invention adjusts the output in response thereto. </paragraph>
<paragraph id="P-0037" lvl="0"><number>&lsqb;0037&rsqb;</number> Magnetic level sensor <highlight><bold>10</bold></highlight> of the present invention may also be interconnected with a vehicle security system or device which detects movement of the vehicle when the level sensor is not typically active, such as when the ignition has not been activated. The security system preferably senses or interrogates the level sensor periodically while the ignition is off. If the level of the vehicle or orientation of the magnet and sensors relative to one another changes while the ignition is not activated, then the security system determines that the vehicle is being tampered with, such as being towed or otherwise hauled away. The security system may then activate an alarm or signal or may transmit a communication to a predetermined receiving device in response to this determination. This communication may be interconnected with a police tracking system and/or with a Global Positioning System in order to convey the new vehicle location to the recipient of the message. </paragraph>
<paragraph id="P-0038" lvl="0"><number>&lsqb;0038&rsqb;</number> The security system may alternatively be interconnected with a compass system, such as of the type disclosed in commonly assigned provisional patent application, Serial No. 60/128,262, filed Apr. 8, 1999 by Eric Hoekstra et al., the disclosure of which is hereby incorporated herein by reference. The security system may sense or monitor the leveling device and/or the compass when the ignition is in an off position. If the signal from the compass or measuring device changes while the vehicle is off, the security sensor then determines that the vehicle is being tampered with or otherwise being moved or towed away. As discussed above, the security system then may activate an alarm or communicate a signal or message in response to this determination. </paragraph>
<paragraph id="P-0039" lvl="0"><number>&lsqb;0039&rsqb;</number> Although described as monitoring a compass system or a leveling system, the security system discussed above may alternately monitor or interrogate other devices or systems associated with the vehicle that are normally used or activated only when the vehicle is running. The security system monitors these devices when the vehicle is off to determine if the vehicle is being tampered with or moved. For example, the security system may monitor a wheel speed sensor, a transmission park sensor, a steering wheel or front wheel turning sensor or any other sensor or device that is not typically moved, activated or changed after a vehicle is parked and the ignition is turned off. Detection of motion or change in these types of devices when the ignition is off is generally a sign that the vehicle is being tampered with by someone other than the owner of the vehicle. Therefore, the security system would activate an alarm or signal in response to such a detection. </paragraph>
<paragraph id="P-0040" lvl="0"><number>&lsqb;0040&rsqb;</number> The level sensor disclosed herein can also be useful with an outdoor temperature monitor. Such temperature monitors typically read a parameter of a temperature probe, mounted to sense exterior temperature, after a particular interval. The interval is selected to avoid preemption of other functions performed by the processor. Such interval is usually adequate when the vehicle is moving. However, when a vehicle sits in a garage or in the sun, the temperature sensed by the exterior temperature sensor may be in error when a vehicle begins movement. The level sensor can be used to signal the processor that the vehicle has begun moving. The processor can then take one or more immediate samplings of the temperature sensor to update the reading during such transient situations. The processor may also be operable to take one or more immediate samplings of the temperature sensor in response to changes in a compass system as well. Other situations where the ability of a level sensor or a heading sensor (such as a compass system) to determine vehicle movement can provide useful information, both when the vehicle is running and not running, will be apparent to the skilled artisan. </paragraph>
<paragraph id="P-0041" lvl="0"><number>&lsqb;0041&rsqb;</number> Therefore, the present invention provides an angular measurement device which may be automatically and continuously calibrated throughout the life of the device, thereby providing an accurate output of the magnetoresponsive sensors within the device. Such a device is used as a leveling device to detect when the vehicle is not in a level orientation, such as when the vehicle is towing a load. The leveling device preferably includes a substantially vertical or horizontal lever interconnected with a potentiometer or other measuring device. The measuring device includes a magnetoresponsive sensor which senses a relative movement or angular rotation of a magnetic element rotatably interconnected to a portion of the vehicle suspension. A display may also convey a degree of tilt of the vehicle to a driver or occupant of the vehicle or an adjustable suspension may be adjusted in response to a predetermined amount of tilt to counter the tilt and level the vehicle. For example, air may be supplied to or extracted from an air suspension unit to raise or lower a portion of the vehicle in order to level the vehicle. </paragraph>
<paragraph id="P-0042" lvl="0"><number>&lsqb;0042&rsqb;</number> Preferably, the angular measurement device is implemented for use in a magnetic level sensor which is adapted for use in a vehicle in order to determine a vertical movement of a suspension unit on the vehicle. The microcontroller and compensation algorithm of the present invention further allows for a low cost angular measurement device to be implemented with the magnetic level sensor of the vehicle. More particularly, by implementing a calibration system for an angular measurement device, the output of the magnetoresponsive sensors may be adjusted in response to a drift in the signal due to aging of the magnetic element, temperature variations surrounding the device, or other variations which may influence the output of the magnetoresponsive sensors. This allows the angular measurement device to be manufactured with lower cost magnets and substantially eliminates the need for laser trimming of the magnetoresponsive sensors. Furthermore, calibration of the magnetoresponsive sensors in accordance with changes either to the sensors or to the magnet allows these devices to be manufactured under a broader range of tolerances associated with the parts and the manufacturing processes. The end result of implementing a calibration system with the angular measurement device is a lower cost, robust magnetic angular measurement device which may be adapted for use on a vehicle. </paragraph>
<paragraph id="P-0043" lvl="0"><number>&lsqb;0043&rsqb;</number> Changes and modifications in the specifically described embodiments can be carried out without departing from the principles of the invention, which is intended to be limited only by the scope of the appended claims, as interpreted according to the principles of patent law. </paragraph>
</section>
</detailed-description>
</subdoc-description>
<subdoc-claims>
<heading lvl="1">The embodiments of the invention in which an exclusive property rights or privilege is claimed are defined as follows: </heading>
<claim id="CLM-00001">
<claim-text><highlight><bold>1</bold></highlight>. A vehicular magnetic device for determining a displacement of an element of a vehicle via a measured displacement, said magnetic device comprising: 
<claim-text>a magnetic element which generates a magnetic field; </claim-text>
<claim-text>at least one magnetoresponsive sensor for sensing the magnetic field generated by said magnetic element, said magnetic element being spaced from said at least one magnetoresponsive sensor and being movable relative thereto, said at least one magnetoresponsive sensor being operable to detect a change in the magnetic field associated with a movement of said magnetic element relative to said at least one magnetoresponsive sensor; and </claim-text>
<claim-text>an electronic control which is operable to analyze an output of said at least one magnetoresponsive sensor and determine a degree of movement of said magnetic element relative to said at least one magnetoresponsive sensor from the output of said at least one magnetoresponsive sensor, said electronic control being further operable to determine an offset in the output of said at least one magnetoresponsive sensor and adjust a control output of said electronic control as a function of the offset. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00002">
<claim-text><highlight><bold>2</bold></highlight>. The vehicular magnetic device of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein said electronic control is operable to continuously monitor and adjust the output of said at least one magnetoresponsive sensor. </claim-text>
</claim>
<claim id="CLM-00003">
<claim-text><highlight><bold>3</bold></highlight>. The vehicular magnetic device of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein said at least one magnetoresponsive sensor comprises at least one of a magnetoresistive sensor, a magnetoinductive sensor, a magnetocapacitive sensor and a flux gate sensor. </claim-text>
</claim>
<claim id="CLM-00004">
<claim-text><highlight><bold>4</bold></highlight>. The vehicular magnetic device of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein said at least one magnetoresponsive sensor includes two magnetoresponsive sensors oriented at a predetermined angle relative to one another. </claim-text>
</claim>
<claim id="CLM-00005">
<claim-text><highlight><bold>5</bold></highlight>. The vehicular magnetic device of <dependent-claim-reference depends_on="CLM-00004">claim 4</dependent-claim-reference>, wherein said two magnetoresponsive sensors are oriented at approximately a 45 degree angle relative to one another. </claim-text>
</claim>
<claim id="CLM-00006">
<claim-text><highlight><bold>6</bold></highlight>. The vehicular magnetic device of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein said at least one magnetoresponsive sensor is saturated by the external magnetic field of said magnetic element. </claim-text>
</claim>
<claim id="CLM-00007">
<claim-text><highlight><bold>7</bold></highlight>. The vehicular magnetic device of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein said electronic control is operable to determine the offset by sampling at least two data points and averaging corresponding values associated with each of said at least two data points. </claim-text>
</claim>
<claim id="CLM-00008">
<claim-text><highlight><bold>8</bold></highlight>. The vehicular magnetic device of <dependent-claim-reference depends_on="CLM-00007">claim 7</dependent-claim-reference>, wherein said electronic control is operable to sample at least one equal and opposite pair of data points and average an opposite component of each data point. </claim-text>
</claim>
<claim id="CLM-00009">
<claim-text><highlight><bold>9</bold></highlight>. The vehicular magnetic device of <dependent-claim-reference depends_on="CLM-00007">claim 7</dependent-claim-reference>, wherein the output of said at least one magnetoresponsive sensor is associated with a coordinate system associated with one of said at least one magnetoresponsive sensor and said magnetic element, the coordinate system being defined by data points having first and second ordinates, the at least two data points comprising one common ordinate and one uncommon ordinate, the corresponding values being ordinate values of the uncommon ordinates. </claim-text>
</claim>
<claim id="CLM-00010">
<claim-text><highlight><bold>10</bold></highlight>. The vehicular magnetic device of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein the output of said at least one magnetoresponsive sensor is associated with a coordinate system associated with one of said at least one magnetoresponsive sensor and said magnetic element, the coordinate system being defined by data points having a first and second ordinate, said electronic control being operable to sample data points and determine the offset in response to the data points. </claim-text>
</claim>
<claim id="CLM-00011">
<claim-text><highlight><bold>11</bold></highlight>. The vehicular magnetic device of <dependent-claim-reference depends_on="CLM-00011">claim 10</dependent-claim-reference>, wherein said control is operable to sample a first data point and a second data point, each of the first and second data points comprising a common ordinate and an uncommon ordinate, said control being operable to average the uncommon ordinates to determine an approximate first ordinate of the offset. </claim-text>
</claim>
<claim id="CLM-00012">
<claim-text><highlight><bold>12</bold></highlight>. The vehicular magnetic device of <dependent-claim-reference depends_on="CLM-00011">claim 11</dependent-claim-reference>, wherein said control is operable to sample a third data point which comprises a third uncommon ordinate and a third common ordinate which is approximately equal to one of the uncommon ordinates of the first and second data points, said control being operable to average the third uncommon ordinate with a corresponding one of the common ordinates of the first and second data points to determine an approximate second ordinate of the offset. </claim-text>
</claim>
<claim id="CLM-00013">
<claim-text><highlight><bold>13</bold></highlight>. The vehicular magnetic device of <dependent-claim-reference depends_on="CLM-00011">claim 12</dependent-claim-reference>, wherein said control is operable to sample additional data points, said control subtracting the first and second ordinates of the offset from the respective ordinate values of the additional data points to account for the offset. </claim-text>
</claim>
<claim id="CLM-00014">
<claim-text><highlight><bold>14</bold></highlight>. The vehicular magnetic device of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein one of said magnetic element and said at least one magnetoresponsive sensor is positioned at a movable element of the vehicle and the other of said magnetic element and said at least one magnetoresponsive sensor is positioned at a frame member of the vehicle. </claim-text>
</claim>
<claim id="CLM-00015">
<claim-text><highlight><bold>15</bold></highlight>. The vehicular magnetic device of <dependent-claim-reference depends_on="CLM-00011">claim 14</dependent-claim-reference>, wherein said one of said magnetic element and said at least one magnetoresponsive sensor is pivotally mounted at the movable element such that substantially linear movement of the movable element relative to the frame member is translated into rotational movement of said one of said magnetic element and said at least one magnetoresponsive sensor relative to said other of said magnetic element and said at least one magnetoresponsive sensor. </claim-text>
</claim>
<claim id="CLM-00016">
<claim-text><highlight><bold>16</bold></highlight>. The vehicular magnetic device of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein said magnetic element is rotatable relative to said at least one magnetoresponsive sensor, said electronic control being operable to determine an angle of rotation of said magnetic element relative to said at least one magnetoresponsive sensor. </claim-text>
</claim>
<claim id="CLM-00017">
<claim-text><highlight><bold>17</bold></highlight>. The vehicular magnetic device of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference>, wherein said control includes a processor which is operable to calculate the offset in the output of said at least one magnetoresponsive sensor. </claim-text>
</claim>
<claim id="CLM-00018">
<claim-text><highlight><bold>18</bold></highlight>. A vehicular magnetic level sensor adapted for interconnecting with a generally linearly movable component on a vehicle, said level sensor being operable to determine an orientation of the movable component relative to a frame member of the vehicle and comprising: 
<claim-text>a magnetic element which generates a magnetic field; </claim-text>
<claim-text>at least one magnetoresponsive sensor for sensing the magnetic field generated by said magnetic element, said magnetic element being spaced from said at least one magnetoresponsive sensor and being movable relative thereto, said at least one magnetoresponsive sensor detecting a change in the magnetic field associated with a movement of said magnetic element relative to said at least one magnetoresponsive sensor, one of said magnetic element and said at least one magnetoresponsive sensor being interconnected to the component of the vehicle such that a generally linear displacement of the movable component causes a corresponding movement of said one of said magnetic element and said at least one magnetoresponsive sensor relative to the other of said magnetic element and said at least one magnetoresponsive sensor; and </claim-text>
<claim-text>an electronic control for analyzing an output of said at least one magnetoresponsive 15 sensor and determining a degree of movement of said one of said magnetic element and said at least one magnetoresponsive sensor in response to the output of said at least one magnetoresponsive sensor, said electronic control being operable to determine an offset in the output of said at least one magnetoresponsive sensor and adjust an output of said electronic control as a function of the offset. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00019">
<claim-text><highlight><bold>19</bold></highlight>. The vehicular magnetic level sensor of <dependent-claim-reference depends_on="CLM-00011">claim 18</dependent-claim-reference>, wherein the movable component is one of a control arm and a suspension unit and said generally linear movement is a generally vertical movement of one of the control arm and the suspension unit relative to the frame member of the vehicle. </claim-text>
</claim>
<claim id="CLM-00020">
<claim-text><highlight><bold>20</bold></highlight>. The vehicular magnetic level sensor of <dependent-claim-reference depends_on="CLM-00011">claim 19</dependent-claim-reference>, wherein said electronic control is operable to activate at least one of a pump and a valve in response to the output of said at least one magnetoresponsive sensor, at least one of the pump and the valve being operable to adjust a suspension device of the vehicle. </claim-text>
</claim>
<claim id="CLM-00021">
<claim-text><highlight><bold>21</bold></highlight>. The vehicular magnetic level sensor of <dependent-claim-reference depends_on="CLM-00011">claim 18</dependent-claim-reference>, wherein said magnetic element is rotatably interconnected with the movable component and said at least one magnetoresponsive sensor is fixedly secured to the frame member of the vehicle. </claim-text>
</claim>
<claim id="CLM-00022">
<claim-text><highlight><bold>22</bold></highlight>. The vehicular magnetic level sensor of <dependent-claim-reference depends_on="CLM-00022">claim 21</dependent-claim-reference>, wherein the movable component is one of a control arm and a suspension unit and the generally linear movement is a generally vertical movement of one of the control arm and the suspension unit relative to the frame member. </claim-text>
</claim>
<claim id="CLM-00023">
<claim-text><highlight><bold>23</bold></highlight>. The vehicular magnetic level sensor of <dependent-claim-reference depends_on="CLM-00011">claim 18</dependent-claim-reference>, wherein the output of said at least one magnetoresponsive sensor is associated with a coordinate system associated with one of said at least one magnetoresponsive sensor and said magnetic element, said coordinate system being defined by data points having a first and second component, said electronic control being operable to average corresponding values of sampled data points to determine the offset. </claim-text>
</claim>
<claim id="CLM-00024">
<claim-text><highlight><bold>24</bold></highlight>. The vehicular magnetic level sensor of <dependent-claim-reference depends_on="CLM-00022">claim 23</dependent-claim-reference>, wherein said electronic control is operable to determine the offset by sampling at least two pair of data points and averaging a corresponding value associated with each of the at least two pair of data points. </claim-text>
</claim>
<claim id="CLM-00025">
<claim-text><highlight><bold>25</bold></highlight>. The vehicular magnetic level sensor of <dependent-claim-reference depends_on="CLM-00022">claim 24</dependent-claim-reference>, wherein said electronic control is operable to sample at least one equal and opposite pair of data points and average an opposite component of each data point of the at least one equal and opposite pair of data points. </claim-text>
</claim>
<claim id="CLM-00026">
<claim-text><highlight><bold>26</bold></highlight>. The vehicular magnetic level sensor of <dependent-claim-reference depends_on="CLM-00022">claim 24</dependent-claim-reference>, wherein the at least two pair of data points define a first pair of data points and a second pair of data points, the first pair of data points having a common first component and an uncommon second component associated with the coordinate system, a first set of corresponding values being ordinate values of the uncommon second components of the first pair of data points, while the second pair of data points having a common second component and an uncommon first component, a second set of corresponding values being ordinate values of the uncommon first components of the second pair of data points, said control being operable to average each set of corresponding values to determine the offset for each component of the coordinate system. </claim-text>
</claim>
<claim id="CLM-00027">
<claim-text><highlight><bold>27</bold></highlight>. The vehicular magnetic level sensor of <dependent-claim-reference depends_on="CLM-00011">claim 18</dependent-claim-reference>, wherein said magnetic element is rotatable relative to said at least one magnetoresponsive sensor, said electronic control being operable to determine an angle of rotation of said magnetic element relative to said at least one magnetoresponsive sensor. </claim-text>
</claim>
<claim id="CLM-00028">
<claim-text><highlight><bold>28</bold></highlight>. The vehicular magnetic level sensor of <dependent-claim-reference depends_on="CLM-00011">claim 18</dependent-claim-reference>, wherein said electronic control includes a processor which is operable to calculate the offset in the output of said at least one magnetoresponsive sensor. </claim-text>
</claim>
<claim id="CLM-00029">
<claim-text><highlight><bold>29</bold></highlight>. The vehicular magnetic level sensor of <dependent-claim-reference depends_on="CLM-00011">claim 18</dependent-claim-reference>, wherein said at least one magnetoresponsive sensor comprises one of a magnetoresistive sensor, a magnetocapacitive sensor, a magnetoinductive sensor and a flux gate sensor. </claim-text>
</claim>
<claim id="CLM-00030">
<claim-text><highlight><bold>30</bold></highlight>. A calibration method of a control which is operable to calibrate a vehicular magnetic level sensor, said level sensor being operable to determine an orientation of a movable component of a vehicle relative to a frame member of the vehicle, said method comprising the steps of: 
<claim-text>providing a magnetoresponsive sensor which is operable to sense a magnetic field generated by a magnetic element, said magnetic element being movable relative to said magnetoresponsive sensor; </claim-text>
<claim-text>sampling at least two data points of an output of said magnetoresponsive sensor; </claim-text>
<claim-text>determining an offset of the output of said magnetoresponsive sensor in response to the at least two data points; and </claim-text>
<claim-text>adjusting an output of said control in response to the offset. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00031">
<claim-text><highlight><bold>31</bold></highlight>. The calibration method of <dependent-claim-reference depends_on="CLM-00033">claim 30</dependent-claim-reference>, wherein after the step of sampling at least two data points, said calibration method further comprises the step of: 
<claim-text>determining a first ordinate and a second ordinate for each of the at least two data points relative to an origin of a coordinate system associated with said magnetoresponsive sensor, the offset being an offset from a zero value of the coordinator system, the offset being determined in response to the first and second ordinates for the at least two data points. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00032">
<claim-text><highlight><bold>32</bold></highlight>. The calibration method of <dependent-claim-reference depends_on="CLM-00033">claim 31</dependent-claim-reference>, wherein the at least two data points define at least one corresponding pair of data points which are substantially oppositely positioned relative to one of a first and second axis of the coordinate system, the step of determining an offset comprising the step of: 
<claim-text>averaging substantially opposite values of the at least one corresponding pair of data points to determine the offset of the values from the zero value of the coordinate system. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00033">
<claim-text><highlight><bold>33</bold></highlight>. The calibration method of <dependent-claim-reference depends_on="CLM-00033">claim 30</dependent-claim-reference>, wherein said control is operable to sample at least one equal and opposite pair of data points and average the substantially opposite values of each data point of the at least one equal and opposite pair of data points. </claim-text>
</claim>
<claim id="CLM-00034">
<claim-text><highlight><bold>34</bold></highlight>. The calibration method of <dependent-claim-reference depends_on="CLM-00033">claim 30</dependent-claim-reference>, wherein said control continuously samples data points and determines the offset, said control continuously adjusting the output of said level sensor in response to the offset. </claim-text>
</claim>
<claim id="CLM-00035">
<claim-text><highlight><bold>35</bold></highlight>. The calibration method of <dependent-claim-reference depends_on="CLM-00033">claim 30</dependent-claim-reference>, wherein after the step of sampling the at least two data points, said calibration method further comprises the step of determining if the at least two data points are valid by determining if a difference between the at least two data points is greater than a predetermined value. </claim-text>
</claim>
<claim id="CLM-00036">
<claim-text><highlight><bold>36</bold></highlight>. The calibration method of <dependent-claim-reference depends_on="CLM-00033">claim 30</dependent-claim-reference>, wherein said level sensor is mounted at a frame of a vehicle and at a movable component of the vehicle which is movable relative to the frame, said level sensor being operable to measure a generally linear movement of the movable component relative to the frame via a corresponding rotation of said magnetic element relative to said magnetoresponsive sensor. </claim-text>
</claim>
<claim id="CLM-00037">
<claim-text><highlight><bold>37</bold></highlight>. The calibration method of <dependent-claim-reference depends_on="CLM-00033">claim 36</dependent-claim-reference>, wherein the generally linear movement is a generally vertical movement of the movable component relative to the frame of the vehicle. </claim-text>
</claim>
<claim id="CLM-00038">
<claim-text><highlight><bold>38</bold></highlight>. The calibration method of <dependent-claim-reference depends_on="CLM-00033">claim 37</dependent-claim-reference>, wherein said control is operable to activate at least one of a pump and a valve to adjust a suspension device of the vehicle in response to the output of said magnetoresponsive sensor and the offset.</claim-text>
</claim>
</subdoc-claims>
<subdoc-drawings id="DRAWINGS">
<heading lvl="0" align="CENTER">Drawings</heading>
<representative-figure>1</representative-figure>
<figure id="figure-D00000">
<image id="EMI-D00000" file="US20030001565A1-20030102-D00000.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00001">
<image id="EMI-D00001" file="US20030001565A1-20030102-D00001.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00002">
<image id="EMI-D00002" file="US20030001565A1-20030102-D00002.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00003">
<image id="EMI-D00003" file="US20030001565A1-20030102-D00003.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00004">
<image id="EMI-D00004" file="US20030001565A1-20030102-D00004.TIF" imf="TIFF" ti="DR"/>
</figure>
</subdoc-drawings>
</patent-application-publication>
