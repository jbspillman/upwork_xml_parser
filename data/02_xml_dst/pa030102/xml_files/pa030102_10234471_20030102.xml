<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE patent-application-publication SYSTEM "pap-v16-2002-01-01.dtd" [
<!ENTITY US20030005221A1-20030102-D00000.TIF SYSTEM "US20030005221A1-20030102-D00000.TIF" NDATA TIF>
<!ENTITY US20030005221A1-20030102-D00001.TIF SYSTEM "US20030005221A1-20030102-D00001.TIF" NDATA TIF>
<!ENTITY US20030005221A1-20030102-D00002.TIF SYSTEM "US20030005221A1-20030102-D00002.TIF" NDATA TIF>
<!ENTITY US20030005221A1-20030102-D00003.TIF SYSTEM "US20030005221A1-20030102-D00003.TIF" NDATA TIF>
<!ENTITY US20030005221A1-20030102-D00004.TIF SYSTEM "US20030005221A1-20030102-D00004.TIF" NDATA TIF>
<!ENTITY US20030005221A1-20030102-D00005.TIF SYSTEM "US20030005221A1-20030102-D00005.TIF" NDATA TIF>
<!ENTITY US20030005221A1-20030102-D00006.TIF SYSTEM "US20030005221A1-20030102-D00006.TIF" NDATA TIF>
<!ENTITY US20030005221A1-20030102-D00007.TIF SYSTEM "US20030005221A1-20030102-D00007.TIF" NDATA TIF>
<!ENTITY US20030005221A1-20030102-D00008.TIF SYSTEM "US20030005221A1-20030102-D00008.TIF" NDATA TIF>
<!ENTITY US20030005221A1-20030102-D00009.TIF SYSTEM "US20030005221A1-20030102-D00009.TIF" NDATA TIF>
<!ENTITY US20030005221A1-20030102-D00010.TIF SYSTEM "US20030005221A1-20030102-D00010.TIF" NDATA TIF>
<!ENTITY US20030005221A1-20030102-D00011.TIF SYSTEM "US20030005221A1-20030102-D00011.TIF" NDATA TIF>
<!ENTITY US20030005221A1-20030102-D00012.TIF SYSTEM "US20030005221A1-20030102-D00012.TIF" NDATA TIF>
<!ENTITY US20030005221A1-20030102-D00013.TIF SYSTEM "US20030005221A1-20030102-D00013.TIF" NDATA TIF>
<!ENTITY US20030005221A1-20030102-D00014.TIF SYSTEM "US20030005221A1-20030102-D00014.TIF" NDATA TIF>
<!ENTITY US20030005221A1-20030102-D00015.TIF SYSTEM "US20030005221A1-20030102-D00015.TIF" NDATA TIF>
<!ENTITY US20030005221A1-20030102-D00016.TIF SYSTEM "US20030005221A1-20030102-D00016.TIF" NDATA TIF>
<!ENTITY US20030005221A1-20030102-D00017.TIF SYSTEM "US20030005221A1-20030102-D00017.TIF" NDATA TIF>
<!ENTITY US20030005221A1-20030102-D00018.TIF SYSTEM "US20030005221A1-20030102-D00018.TIF" NDATA TIF>
<!ENTITY US20030005221A1-20030102-D00019.TIF SYSTEM "US20030005221A1-20030102-D00019.TIF" NDATA TIF>
<!ENTITY US20030005221A1-20030102-D00020.TIF SYSTEM "US20030005221A1-20030102-D00020.TIF" NDATA TIF>
<!ENTITY US20030005221A1-20030102-D00021.TIF SYSTEM "US20030005221A1-20030102-D00021.TIF" NDATA TIF>
]>
<patent-application-publication>
<subdoc-bibliographic-information>
<document-id>
<doc-number>20030005221</doc-number>
<kind-code>A1</kind-code>
<document-date>20030102</document-date>
</document-id>
<publication-filing-type>new</publication-filing-type>
<domestic-filing-data>
<application-number>
<doc-number>10234471</doc-number>
</application-number>
<application-number-series-code>10</application-number-series-code>
<filing-date>20020905</filing-date>
</domestic-filing-data>
<foreign-priority-data>
<priority-application-number>
<doc-number>2000-072469</doc-number>
</priority-application-number>
<filing-date>20000310</filing-date>
<country-code>JP</country-code>
</foreign-priority-data>
<technical-information>
<classification-ipc>
<classification-ipc-primary>
<ipc>G06F012/00</ipc>
</classification-ipc-primary>
<classification-ipc-edition>07</classification-ipc-edition>
</classification-ipc>
<classification-us>
<classification-us-primary>
<uspc>
<class>711</class>
<subclass>114000</subclass>
</uspc>
</classification-us-primary>
</classification-us>
<title-of-invention>DISK ARRAY CONTROLLER, ITS DISK ARRAY CONTROL UNIT, AND INCREASE METHOD OF THE UNIT</title-of-invention>
</technical-information>
<continuity-data>
<continuations>
<continuation-of>
<parent-child>
<child>
<document-id>
<doc-number>10234471</doc-number>
<kind-code>A1</kind-code>
<document-date>20020905</document-date>
</document-id>
</child>
<parent>
<document-id>
<doc-number>09663379</doc-number>
<document-date>20000915</document-date>
<country-code>US</country-code>
</document-id>
</parent>
<parent-status>GRANTED</parent-status>
<parent-patent>
<document-id>
<doc-number>6477619</doc-number>
<country-code>US</country-code>
</document-id>
</parent-patent>
</parent-child>
</continuation-of>
</continuations>
</continuity-data>
<inventors>
<first-named-inventor>
<name>
<given-name>Kazuhisa</given-name>
<family-name>Fujimoto</family-name>
</name>
<residence>
<residence-non-us>
<city>Kokubunji</city>
<country-code>JP</country-code>
</residence-non-us>
</residence>
<authority-applicant>INV</authority-applicant>
</first-named-inventor>
<inventor>
<name>
<given-name>Hiroki</given-name>
<family-name>Kanai</family-name>
</name>
<residence>
<residence-non-us>
<city>Higashiyamato</city>
<country-code>JP</country-code>
</residence-non-us>
</residence>
<authority-applicant>INV</authority-applicant>
</inventor>
<inventor>
<name>
<given-name>Akira</given-name>
<family-name>Fujibayashi</family-name>
</name>
<residence>
<residence-non-us>
<city>Kokubunji</city>
<country-code>JP</country-code>
</residence-non-us>
</residence>
<authority-applicant>INV</authority-applicant>
</inventor>
<inventor>
<name>
<given-name>Wataru</given-name>
<family-name>Sakurai</family-name>
</name>
<residence>
<residence-non-us>
<city>Odawara</city>
<country-code>JP</country-code>
</residence-non-us>
</residence>
<authority-applicant>INV</authority-applicant>
</inventor>
</inventors>
<correspondence-address>
<name-1>ANTONELLI TERRY STOUT AND KRAUS</name-1>
<name-2></name-2>
<address>
<address-1>SUITE 1800</address-1>
<address-2>1300 NORTH SEVENTEENTH STREET</address-2>
<city>ARLINGTON</city>
<state>VA</state>
<postalcode>22209</postalcode>
</address>
</correspondence-address>
</subdoc-bibliographic-information>
<subdoc-abstract>
<paragraph id="A-0001" lvl="0">A disk array controller is made up of multiple disk array control units for implementing the data read/write operation and each having channel IF units, disk IF units, cache memory units and shared memory units. The disk array controller further includes inter connections for interconnecting the shared memory units and interconnecting the cache memory units across the border of disk array control units. Thereby alleviating the deterioration of performance due to the data transfer between the disk array control units, when the multiple disk array control units are to be operated as a single disk array controller. </paragraph>
</subdoc-abstract>
<subdoc-description>
<cross-reference-to-related-applications>
<paragraph id="P-0001" lvl="0"><number>&lsqb;0001&rsqb;</number> The present application is a continuation of U.S. patent application Ser. No. 09/663,379, filed Sep. 15, 2000, the contents of which are incorporated herein by reference.</paragraph>
</cross-reference-to-related-applications>
<summary-of-invention>
<section>
<heading lvl="1">BACKGROUND OF THE INVENTION </heading>
<paragraph id="P-0002" lvl="0"><number>&lsqb;0002&rsqb;</number> The present invention relates to a controller of a disk array apparatus which stores data on multiple hard disk drives. </paragraph>
<paragraph id="P-0003" lvl="0"><number>&lsqb;0003&rsqb;</number> As compared with the computer main storage which is based on the semiconductor memory, the disk subsystem (will be termed simply &ldquo;subsystem&rdquo;) which is based on the magnetic disk memory is sluggish in regard to the I/O performance by a degree of the order of 3-4 digits, and continuous efforts have been paid to reduce the difference of these memories, i.e., improve the I/O performance of the subsystem. </paragraph>
<paragraph id="P-0004" lvl="0"><number>&lsqb;0004&rsqb;</number> A known scheme to improve the I/O performance of the subsystem is the adoption of a disk array system in which multiple hard disk drives are organized to form a subsystem, and data is stored on the multiple hard disk drives. </paragraph>
<paragraph id="P-0005" lvl="0"><number>&lsqb;0005&rsqb;</number> For example, a prior art system shown in <cross-reference target="DRAWINGS">FIG. 2</cross-reference> includes multiple channel IF units <highlight><bold>11</bold></highlight> which implement the data transfer between host computers <highlight><bold>50</bold></highlight> and disk array controllers <highlight><bold>2</bold></highlight>, multiple disk IF units <highlight><bold>12</bold></highlight> which implement the data transfer between magnetic disk drives <highlight><bold>5</bold></highlight> and disk array controllers <highlight><bold>2</bold></highlight>, cache memory units <highlight><bold>14</bold></highlight> which temporarily store data of the hard disk drives <highlight><bold>5</bold></highlight>, and shared memory units <highlight><bold>13</bold></highlight> which store control information for the disk array controllers <highlight><bold>2</bold></highlight> (e.g., information on data transfer control between the channel IF units <highlight><bold>11</bold></highlight> and disk IF units <highlight><bold>12</bold></highlight> and the cache memory units <highlight><bold>14</bold></highlight> and control information for data stored in the hard disk drives <highlight><bold>5</bold></highlight>). In each disk array controller <highlight><bold>2</bold></highlight>, the shared memory unit <highlight><bold>13</bold></highlight> and cache memory unit <highlight><bold>14</bold></highlight> can be accessed by all channel IF units <highlight><bold>11</bold></highlight> and disk IF units <highlight><bold>12</bold></highlight>. </paragraph>
<paragraph id="P-0006" lvl="0"><number>&lsqb;0006&rsqb;</number> In the disk array controller <highlight><bold>2</bold></highlight>, the channel IF units <highlight><bold>11</bold></highlight> and disk IF units <highlight><bold>12</bold></highlight> are connected to the shared memory unit <highlight><bold>13</bold></highlight> by an interconnection <highlight><bold>21</bold></highlight>, and the channel IF units <highlight><bold>11</bold></highlight> and disk IF units <highlight><bold>12</bold></highlight> are connected to the cache memory unit <highlight><bold>14</bold></highlight> by another interconnection <highlight><bold>22</bold></highlight>. </paragraph>
<paragraph id="P-0007" lvl="0"><number>&lsqb;0007&rsqb;</number> The channel IF unit <highlight><bold>11</bold></highlight> has the interface for the connection to host computers <highlight><bold>50</bold></highlight> and a microprocessor (not shown) which controls the data transaction with the host computers <highlight><bold>50</bold></highlight>. The disk IF unit <highlight><bold>12</bold></highlight> has the interface for the connection to hard disk drives <highlight><bold>5</bold></highlight> and a microprocessor (not shown) which controls the data transaction with the hard disk drives <highlight><bold>5</bold></highlight>. The disk IF units <highlight><bold>12</bold></highlight> have the RAID function. </paragraph>
<paragraph id="P-0008" lvl="0"><number>&lsqb;0008&rsqb;</number> This conventional disk array controller <highlight><bold>2</bold></highlight> has an upper limit of disk storage capacity which can be connected to it, and therefore for storing data in excess of the volume of data manageable by one disk array controller <highlight><bold>2</bold></highlight>, multiple disk array controllers <highlight><bold>2</bold></highlight> are installed and channels from the host computers <highlight><bold>50</bold></highlight> are connected to the disk array controllers <highlight><bold>2</bold></highlight>. Furthermore, for connecting host computers <highlight><bold>50</bold></highlight> in excess of the number of host channels which can be connected to one disk array controller <highlight><bold>2</bold></highlight>, multiple disk array controllers <highlight><bold>2</bold></highlight> are installed and connected to the host computers <highlight><bold>50</bold></highlight> individually. </paragraph>
<paragraph id="P-0009" lvl="0"><number>&lsqb;0009&rsqb;</number> For data transfer between two disk array controllers <highlight><bold>2</bold></highlight>, channels from the host computers <highlight><bold>50</bold></highlight> are connected to the two disk array controllers <highlight><bold>2</bold></highlight> and data is transferred via the host computers <highlight><bold>50</bold></highlight>. </paragraph>
<paragraph id="P-0010" lvl="0"><number>&lsqb;0010&rsqb;</number> Another prior art system shown in <cross-reference target="DRAWINGS">FIG. 3</cross-reference>, which is disclosed in U.S. Pat. No. 5,680,640, is designed for example to transfer data between two disk array controllers <highlight><bold>3</bold></highlight> based on the connection of part (two lines in <cross-reference target="DRAWINGS">FIG. 3</cross-reference>) of the computer interface paths of the disk array controllers <highlight><bold>3</bold></highlight> and the data transfer from a hard disk drive <highlight><bold>5</bold></highlight> which is connected to one disk array controller <highlight><bold>3</bold></highlight> to another hard disk drive <highlight><bold>5</bold></highlight> which is connected to another disk array controller <highlight><bold>3</bold></highlight> through the data transfer path <highlight><bold>8</bold></highlight>. </paragraph>
<paragraph id="P-0011" lvl="0"><number>&lsqb;0011&rsqb;</number> Another prior art system shown in <cross-reference target="DRAWINGS">FIG. 4</cross-reference> is designed for example to store data in excess of the volume of data manageable by one disk array controller, connect host computers in excess of the number of host channels which can be connected to one disk array controller, or transfer data among multiple disk array controllers, as shown in <cross-reference target="DRAWINGS">FIG. 4</cross-reference>, based on the installation of multiple disk array controllers <highlight><bold>4</bold></highlight> and the connection of their computer interface paths to the host computers <highlight><bold>50</bold></highlight> via a switch-based interconnection <highlight><bold>23</bold></highlight>. </paragraph>
<paragraph id="P-0012" lvl="0"><number>&lsqb;0012&rsqb;</number> A disk array processing device disclosed in Japanese Unexamined Patent Publication No. Hei-11-66693 includes two director units which use a shared memory to recover data when a data spindle which forms a disk array runs out of control. This patent publication, however, does not show the installation of multiple disk arrays. </paragraph>
<paragraph id="P-0013" lvl="0"><number>&lsqb;0013&rsqb;</number> In large business enterprises which typically include banks, stock traders, and telephone companies, there are trends of cutting the expenditure for the operation, maintenance and management of computer systems and storage systems based on the centralized installation of computers and storages which have been installed distributively in many places. In this movement with the times, large high-end disk array controllers are required to bear the channel interface for the connection to several-hundreds or more host computers and huge storage capacities of several-hundreds terabytes or more. </paragraph>
<paragraph id="P-0014" lvl="0"><number>&lsqb;0014&rsqb;</number> At the same time, due to growing open markets in recent years and storage area networks (SANs) which are expected to prevail in coming years, there are rising demands of small-scale (compact) disk array controllers which are comparable in performance and reliability with large high-end disk array controllers. </paragraph>
<paragraph id="P-0015" lvl="0"><number>&lsqb;0015&rsqb;</number> The former requirement will conceivably be met by connecting multiple conventional large high-end disk array controllers to build a huge disk array controller. The latter requirement will conceivably be met by arranging a lowest-level model (e.g., with small numbers of channel IF units and disk IF units) of a conventional large high-end disk array controller. An additional conceivable scheme is to connect a plurality of this compact disk array controller thereby to build a controller which supports systems of medium to large scales which have been supported by a conventional disk array controller. </paragraph>
<paragraph id="P-0016" lvl="0"><number>&lsqb;0016&rsqb;</number> Accordingly, it becomes necessary for disk array controllers to have the scalability so as to be constructed to cover the range from a small to huge-scale controllers based on the same basic architecture of high performance and high reliability, and therefore there arises a demand of a disk array controller, a plurality of which are integrated to operate as a single disk array controller. </paragraph>
<paragraph id="P-0017" lvl="0"><number>&lsqb;0017&rsqb;</number> However, although the prior art system shown in <cross-reference target="DRAWINGS">FIG. 2</cross-reference> can have an increased number of channels and increased storage capability for the host computers <highlight><bold>50</bold></highlight> by simply increasing the number of disk array controllers <highlight><bold>2</bold></highlight>, the host computers <highlight><bold>50</bold></highlight> need to connect channels to all disk array controllers <highlight><bold>2</bold></highlight> so that one host computer <highlight><bold>50</bold></highlight> can transact data with multiple disk array controllers <highlight><bold>2</bold></highlight>. Moreover, it is necessary for one host computer <highlight><bold>50</bold></highlight> which is going to make access to data to identify a disk array controller <highlight><bold>2</bold></highlight> that is connected to the hard disk drive <highlight><bold>5</bold></highlight> which stores the data. On this account, it is difficult to operate multiple disk array controllers as a single disk array controller. </paragraph>
<paragraph id="P-0018" lvl="0"><number>&lsqb;0018&rsqb;</number> The prior art system shown in <cross-reference target="DRAWINGS">FIG. 3</cross-reference> has disk array controllers <highlight><bold>3</bold></highlight> interconnected by the data transfer path <highlight><bold>8</bold></highlight>, enabling one host computer <highlight><bold>50</bold></highlight> which is connected to a certain disk array controller <highlight><bold>3</bold></highlight> to make access to data on a hard disk drive <highlight><bold>5</bold></highlight> which is connected to other disk array controller <highlight><bold>3</bold></highlight>, and accordingly it is possible to operate multiple disk array controllers <highlight><bold>3</bold></highlight> as a single disk array controller. </paragraph>
<paragraph id="P-0019" lvl="0"><number>&lsqb;0019&rsqb;</number> However, in case a host computer <highlight><bold>50</bold></highlight> issues a data read request to a disk array controller <highlight><bold>3</bold></highlight> and the data is absent on the hard disk drives <highlight><bold>5</bold></highlight> connected to the controller <highlight><bold>3</bold></highlight>, it is necessary for the disk array controller <highlight><bold>3</bold></highlight> to send the read request to other disk array controller <highlight><bold>3</bold></highlight> over the data transfer path <highlight><bold>8</bold></highlight>, receive the requested data over the data transfer path <highlight><bold>8</bold></highlight> from the disk array controller <highlight><bold>3</bold></highlight> which is connected to the hard disk drive <highlight><bold>5</bold></highlight> on which the data is stored, and send the requested data to the host computer <highlight><bold>50</bold></highlight>. On this account, this system suffers a degraded performance when a host computer <highlight><bold>50</bold></highlight> makes access to data which is stored on a hard disk drive <highlight><bold>5</bold></highlight> connected to a disk array controller <highlight><bold>3</bold></highlight> other than the disk array controller <highlight><bold>3</bold></highlight> connected to itself. </paragraph>
<paragraph id="P-0020" lvl="0"><number>&lsqb;0020&rsqb;</number> For coping with this matter, if a host computer <highlight><bold>50</bold></highlight> transfers in advance data of frequent access, which is stored on a hard disk drive of a disk array controller other than that connected to itself, to the hard disk drive <highlight><bold>5</bold></highlight> of the disk array controller connected to itself, the system also suffers a degraded performance due to the data transfer over the data transfer path <highlight><bold>8</bold></highlight>. </paragraph>
<paragraph id="P-0021" lvl="0"><number>&lsqb;0021&rsqb;</number> In the prior art system shown in <cross-reference target="DRAWINGS">FIG. 4</cross-reference>, each host computer <highlight><bold>50</bold></highlight> can access to all disk array controllers <highlight><bold>4</bold></highlight> via the switch-based interconnection <highlight><bold>23</bold></highlight>. However, in order to operate multiple disk array controllers <highlight><bold>4</bold></highlight> as a single disk array controller, each switch of the interconnection <highlight><bold>23</bold></highlight> must have a map indicating as to which of all disk array controllers <highlight><bold>4</bold></highlight> connected to the switch stores data, and must have a function of analyzing the access request from a host computer <highlight><bold>50</bold></highlight> and designating a disk array controller <highlight><bold>4</bold></highlight> which stores the requested data. </paragraph>
<paragraph id="P-0022" lvl="0"><number>&lsqb;0022&rsqb;</number> Due to the need of request command analysis by the switches besides the command analysis by the conventional channel IF units <highlight><bold>11</bold></highlight>, this system suffers a degraded performance in contrast to the direct connection of the host computers <highlight><bold>50</bold></highlight> to the disk array controllers <highlight><bold>4</bold></highlight>. </paragraph>
<paragraph id="P-0023" lvl="0"><number>&lsqb;0023&rsqb;</number> The high-end disk array controllers have following functions. </paragraph>
<paragraph id="P-0024" lvl="0"><number>&lsqb;0024&rsqb;</number> As a specific operational function, a data set (corresponding to a logical volume) for one work is duplicated and stored and both the original and duplicate data sets are updated simultaneously in the ordinary work. At the emergence of the need of backup for the data set for example, updating of the duplicate data set is suspended and it is used for the backup, while the original data set is used continuously for the work, and the original and duplicate data sets are rendered the matching process on completion of backup. </paragraph>
<paragraph id="P-0025" lvl="0"><number>&lsqb;0025&rsqb;</number> For accomplishing this operational function, with duplicate data sets being held in different disk array controllers, the prior art systems shown in <cross-reference target="DRAWINGS">FIG. 2</cross-reference> to <cross-reference target="DRAWINGS">FIG. 4</cross-reference> all need to transfer data sets among the disk array controllers, resulting in a significantly deteriorated system performance. </paragraph>
</section>
<section>
<heading lvl="1">SUMMARY OF THE INVENTION </heading>
<paragraph id="P-0026" lvl="0"><number>&lsqb;0026&rsqb;</number> An object of the present invention is to provide a disk array controller having the scalability so as to be constructed to cover the range from a small to huge-scale controllers based on the same basic architecture of high performance and high reliability. </paragraph>
<paragraph id="P-0027" lvl="0"><number>&lsqb;0027&rsqb;</number> More specifically, the present invention is intended to provide a disk array system which is capable of alleviating the deterioration of performance caused by the data transfer among multiple disk array controllers which are designed to operated as a single disk array controller, and accomplish the function of a disk array controller based on a plurality of disk array controllers while alleviating the deterioration of performance. </paragraph>
<paragraph id="P-0028" lvl="0"><number>&lsqb;0028&rsqb;</number> In order to achieve the above objectives, the present invention resides in a disk array controller which includes a plurality of disk array control units, each having one or more channel interface units for interfacing with a computer, one or more disk interface units for interfacing with disk drives, a cache memory unit which is connected to the channel interface unit and disk interface unit and adapted to store temporarily data which is written to or read out of the disk drives, and a shared memory unit which is connected to the channel interface unit and disk interface unit and adapted to store control information of data transfer between the channel interface unit and disk interface unit and the cache memory unit and control information for the disk drives, and having a disk control function for implementing the data read/write operation in response to a data read/write request from the host computer by operating on the channel interface unit to transfer data between the interface with the host computer and the cache memory unit and operating on the disk interface unit to transfer data between the disk drive and the cache memory unit, and further includes means of interconnecting the shared memory units in the disk array control units and means of interconnecting the cache memory units in the disk array control units, thereby enabling the data read/write access from a channel interface unit or disk interface unit in one disk array control unit to a shared memory unit or cache memory unit in other disk array control unit.</paragraph>
</section>
</summary-of-invention>
<brief-description-of-drawings>
<section>
<heading lvl="1">BRIEF DESCRIPTION OF THE DRAWINGS </heading>
<paragraph id="P-0029" lvl="0"><number>&lsqb;0029&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1</cross-reference> is a block diagram showing the arrangement of a disk array controller based on this invention; </paragraph>
<paragraph id="P-0030" lvl="0"><number>&lsqb;0030&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 2</cross-reference> is a block diagram showing the arrangement of a conventional disk array controller; </paragraph>
<paragraph id="P-0031" lvl="0"><number>&lsqb;0031&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3</cross-reference> is a block diagram showing the arrangement of another conventional disk array controller; </paragraph>
<paragraph id="P-0032" lvl="0"><number>&lsqb;0032&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 4</cross-reference> is a block diagram showing the arrangement of still another conventional disk array controller; </paragraph>
<paragraph id="P-0033" lvl="0"><number>&lsqb;0033&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 5</cross-reference> is a block diagram showing the arrangement of another disk array controller based on this invention; </paragraph>
<paragraph id="P-0034" lvl="0"><number>&lsqb;0034&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 6</cross-reference> is a block diagram showing the arrangement of still another disk array controller based on this invention; </paragraph>
<paragraph id="P-0035" lvl="0"><number>&lsqb;0035&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 7</cross-reference> is a block diagram showing the detailed arrangement of the disk array control unit shown in <cross-reference target="DRAWINGS">FIG. 1</cross-reference>; </paragraph>
<paragraph id="P-0036" lvl="0"><number>&lsqb;0036&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 8</cross-reference> is a block diagram showing the arrangement of a disk array controller made up of two disk array control units shown in <cross-reference target="DRAWINGS">FIG. 7</cross-reference> connected together; </paragraph>
<paragraph id="P-0037" lvl="0"><number>&lsqb;0037&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 9</cross-reference> is a block diagram showing the detailed arrangement of the disk array control unit shown in <cross-reference target="DRAWINGS">FIG. 5</cross-reference>; </paragraph>
<paragraph id="P-0038" lvl="0"><number>&lsqb;0038&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 10</cross-reference> is a block diagram showing the arrangement of a disk array controller made up of two disk array control units shown in <cross-reference target="DRAWINGS">FIG. 9</cross-reference> connected together; </paragraph>
<paragraph id="P-0039" lvl="0"><number>&lsqb;0039&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 11</cross-reference> is a block diagram showing the detailed arrangement of the disk array control unit shown in <cross-reference target="DRAWINGS">FIG. 6</cross-reference>; </paragraph>
<paragraph id="P-0040" lvl="0"><number>&lsqb;0040&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 12</cross-reference> is a block diagram showing the arrangement a disk array controller made up of two disk array control units shown in <cross-reference target="DRAWINGS">FIG. 11</cross-reference> connected together; </paragraph>
<paragraph id="P-0041" lvl="0"><number>&lsqb;0041&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 13</cross-reference> is a block diagram showing the arrangement of a disk array controller made up of three disk array control units shown in <cross-reference target="DRAWINGS">FIG. 7</cross-reference> connected together; </paragraph>
<paragraph id="P-0042" lvl="0"><number>&lsqb;0042&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 14</cross-reference> is a perspective view showing the structure of a disk array control unit built on a rack based on this invention; </paragraph>
<paragraph id="P-0043" lvl="0"><number>&lsqb;0043&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 15</cross-reference> is a perspective view showing the structure of a disk array controller made up of two disk array control units which are built on racks and interconnected; </paragraph>
<paragraph id="P-0044" lvl="0"><number>&lsqb;0044&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 16</cross-reference> is a perspective view showing the structure of a disk array control unit built on a different rack based on this invention; </paragraph>
<paragraph id="P-0045" lvl="0"><number>&lsqb;0045&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 17</cross-reference> is a perspective view showing the structure of a disk array controller made up of four disk array control units which are built on one rack based on this invention; </paragraph>
<paragraph id="P-0046" lvl="0"><number>&lsqb;0046&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 18</cross-reference> is a block diagram showing the wiring scheme for three disk array control units based on inter-rack switches; </paragraph>
<paragraph id="P-0047" lvl="0"><number>&lsqb;0047&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 19</cross-reference> is a perspective view of the structure of the wiring shown in <cross-reference target="DRAWINGS">FIG. 18</cross-reference> based on this invention; </paragraph>
<paragraph id="P-0048" lvl="0"><number>&lsqb;0048&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 20</cross-reference> is a block diagram showing the connection of three disk array control units based on this invention; </paragraph>
<paragraph id="P-0049" lvl="0"><number>&lsqb;0049&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 21</cross-reference> is a diagram showing an example of the data format of information of path switching which is given to the switch box; and </paragraph>
<paragraph id="P-0050" lvl="0"><number>&lsqb;0050&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 22</cross-reference> is a table showing an example of the reference table of information of path switching provided in the switch box.</paragraph>
</section>
</brief-description-of-drawings>
<detailed-description>
<section>
<heading lvl="1">DESCRIPTION OF THE PREFERRED EMBODIMENTS </heading>
<paragraph id="P-0051" lvl="0"><number>&lsqb;0051&rsqb;</number> In the following embodiments of this invention, hard disk drives are adopted for a large-capacity data storage. However, it is not confined in this invention to hard disk drives, but it can be DVDs for example. </paragraph>
<paragraph id="P-0052" lvl="0"><number>&lsqb;0052&rsqb;</number> As a preferred embodiment of this invention, the channel interface units and disk interface units and the cache memory units in the multiple disk array control units are interconnected by a switch-based interconnection which extends across the border of disk array control units, and the channel interface units and disk interface units and the shared memory units are interconnected by another switch-based interconnection which extends across the border of disk array control units. </paragraph>
<paragraph id="P-0053" lvl="0"><number>&lsqb;0053&rsqb;</number> As another preferred embodiment, the channel interface units and disk interface units and the cache memory units in the multiple disk array control units are interconnected by a switch-based interconnection which extends across the border of disk array control units, and the channel interface units and disk interface units and the shared memory units are connected directly for the portion within each disk array control unit and interconnected for the portion between the shared memory units between the disk array control units by a switch-based interconnection which extends across the border of disk array control units. </paragraph>
<paragraph id="P-0054" lvl="0"><number>&lsqb;0054&rsqb;</number> As another preferred embodiment, the channel interface units and disk interface units and the cache memory units in the multiple disk array control units are connected directly for the portion within each disk array control unit and interconnected for the portion between the cache memory units between the disk array control units by a switch-based interconnection which extends across the border of disk array control units, and the channel interface units and disk interface units and the shared memory units are connected directly for the portion within each disk array control unit and interconnected for the portion between shared memory units between the disk array control units by a switch-based interconnection which extends across the border of disk array control units. </paragraph>
<paragraph id="P-0055" lvl="0"><number>&lsqb;0055&rsqb;</number> With respect to the data read/write operation between host computers and the hard disk drives, the inventive disk array controller includes a plurality of disk array control units, each having channel interface units for interfacing with the computers, disk interface units for interfacing with the hard disk drives, a cache memory unit for storing temporarily data which is written to or read out of the hard disk drives, a shared memory unit for storing control information of data transfer between the channel interface units and disk interface units and the cache memory unit and control information for the hard disk drives, means of connecting the channel interface units and disk interface units to the cache memory unit, and means of connecting the channel interface units and disk interface units to the shared memory unit, and implementing data read/write in response to a data read/write request from the host computer by operating on the channel interface units to transfer data between the interface with the host computer and the cache memory unit and operating on the disk interface units to transfer data between the hard disk drive and the cache memory unit, and further includes means of interconnecting the shared memory units in the disk array control units and means of interconnecting the cache memory units in the disk array control units, thereby enabling the data read/write access from a host computer which is connected only to one disk array control unit to a hard disk drive which is connected only to other disk array control unit by way of the interconnection means. </paragraph>
<paragraph id="P-0056" lvl="0"><number>&lsqb;0056&rsqb;</number> Other problems and schemes of solving the problems based on the present invention will become apparent from the following description of embodiments taken in conjunction with the accompanying drawings. </paragraph>
<paragraph id="P-0057" lvl="0"><number>&lsqb;0057&rsqb;</number> Embodiments of the present invention will be explained with respect to the drawings. </paragraph>
<paragraph id="P-0058" lvl="7"><number>&lsqb;0058&rsqb;</number> &lsqb;Embodiment 1&rsqb;</paragraph>
<paragraph id="P-0059" lvl="0"><number>&lsqb;0059&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1</cross-reference>, <cross-reference target="DRAWINGS">FIG. 7</cross-reference> and <cross-reference target="DRAWINGS">FIG. 8</cross-reference> show an embodiment of this invention. Although devices of interconnection used in this embodiment are based on switches, these devices which function to transfer control information and data between two units may otherwise be buses for example. </paragraph>
<paragraph id="P-0060" lvl="0"><number>&lsqb;0060&rsqb;</number> A disk array controller <highlight><bold>1</bold></highlight> of this embodiment is made up of multiple disk array control units <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight> as shown in <cross-reference target="DRAWINGS">FIG. 1</cross-reference>. Each disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight> includes interface units (channel IF units) <highlight><bold>11</bold></highlight> for interfacing with host computers <highlight><bold>50</bold></highlight>, interface units (disk IF units) <highlight><bold>12</bold></highlight> for interfacing with hard disk drives <highlight><bold>5</bold></highlight>, shared memory units <highlight><bold>13</bold></highlight>, and cache memory units <highlight><bold>14</bold></highlight>. The channel IF units <highlight><bold>11</bold></highlight> and disk IF units <highlight><bold>12</bold></highlight> and the shared memory units <highlight><bold>13</bold></highlight> are connected by an interconnection <highlight><bold>210</bold></highlight> which is shared by the disk array control units <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>, and the channel IF units <highlight><bold>11</bold></highlight> and disk IF units <highlight><bold>12</bold></highlight> and the cache memory units <highlight><bold>14</bold></highlight> are connected by another interconnection <highlight><bold>220</bold></highlight> which is shared by the disk array control units <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>. Accordingly, all channel IF units <highlight><bold>11</bold></highlight> and disk IF units <highlight><bold>12</bold></highlight> can access to all shared memory units <highlight><bold>13</bold></highlight> or all cache memory units <highlight><bold>14</bold></highlight> via the interconnection <highlight><bold>210</bold></highlight> or <highlight><bold>220</bold></highlight>. </paragraph>
<paragraph id="P-0061" lvl="0"><number>&lsqb;0061&rsqb;</number> One disk array control unit, which may be either built on a rack or built as a module, can operate as a stand-alone disk array controller. Each disk array control unit is assumed to be built on an individual rack in the explanation of <cross-reference target="DRAWINGS">FIG. 7</cross-reference>. </paragraph>
<paragraph id="P-0062" lvl="0"><number>&lsqb;0062&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 7</cross-reference> shows a specific internal arrangement of the disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>. </paragraph>
<paragraph id="P-0063" lvl="0"><number>&lsqb;0063&rsqb;</number> The disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight> includes two channel IF units <highlight><bold>11</bold></highlight> for interfacing with host computers <highlight><bold>50</bold></highlight>, two disk IF units <highlight><bold>12</bold></highlight> for interfacing with the hard disk drives <highlight><bold>5</bold></highlight>, two shared memory path switches (SM-SWs) <highlight><bold>110</bold></highlight>, two cache memory path switches (CM-SWs) <highlight><bold>111</bold></highlight>, two shared memory units <highlight><bold>13</bold></highlight>, two cache memory units <highlight><bold>14</bold></highlight>, shared memory (SM) access paths <highlight><bold>135</bold></highlight> and <highlight><bold>136</bold></highlight>, cache memory (CM) access paths <highlight><bold>137</bold></highlight> and <highlight><bold>138</bold></highlight>, inter-unit SM paths <highlight><bold>141</bold></highlight>, and inter-unit CM paths <highlight><bold>142</bold></highlight>. The inter-unit SM paths and inter-unit CM paths connect between the disk array control units. </paragraph>
<paragraph id="P-0064" lvl="0"><number>&lsqb;0064&rsqb;</number> The channel IF unit <highlight><bold>11</bold></highlight> includes two host IFs <highlight><bold>102</bold></highlight> for interfacing with the host computers <highlight><bold>50</bold></highlight>, two microprocessors <highlight><bold>101</bold></highlight> which control the data transaction with the host computers <highlight><bold>50</bold></highlight>, an SM access controller <highlight><bold>104</bold></highlight> which controls the access to the shared memory units <highlight><bold>13</bold></highlight>, and a CM access controller <highlight><bold>105</bold></highlight> which controls the access to the cache memory units <highlight><bold>14</bold></highlight>. It implements the data transfer between the host computers <highlight><bold>50</bold></highlight> and the cache memory units <highlight><bold>14</bold></highlight> and the transfer of control information between the microprocessors <highlight><bold>101</bold></highlight> and the shared memory units <highlight><bold>13</bold></highlight>. The microprocessors <highlight><bold>101</bold></highlight> and host IFs <highlight><bold>102</bold></highlight> are connected by an internal bus <highlight><bold>106</bold></highlight>. The CM access controller <highlight><bold>105</bold></highlight> is connected directly to the two host Ifs <highlight><bold>102</bold></highlight>. The SM access controller <highlight><bold>104</bold></highlight> is connected directly to the two microprocessors <highlight><bold>101</bold></highlight>. </paragraph>
<paragraph id="P-0065" lvl="0"><number>&lsqb;0065&rsqb;</number> The disk IF unit <highlight><bold>12</bold></highlight> includes two drive IFs <highlight><bold>103</bold></highlight> for interfacing with hard disk drives <highlight><bold>5</bold></highlight>, two microprocessors <highlight><bold>101</bold></highlight> which control the data transaction with the hard disk drives <highlight><bold>5</bold></highlight>, an SM access controller <highlight><bold>104</bold></highlight> which controls the access to the shared memory units <highlight><bold>13</bold></highlight>, and a CM access controller <highlight><bold>105</bold></highlight> which controls the access to the cache memory units <highlight><bold>14</bold></highlight>. It implements the data transfer between the hard disk drives <highlight><bold>5</bold></highlight> and the cache memory units <highlight><bold>14</bold></highlight> and the transfer of control information between the microprocessors <highlight><bold>101</bold></highlight> and the shared memory units <highlight><bold>13</bold></highlight>. The microprocessors <highlight><bold>101</bold></highlight> and drive IFs <highlight><bold>103</bold></highlight> are connected by an internal bus <highlight><bold>106</bold></highlight>, the CM access controller <highlight><bold>105</bold></highlight> is connected directly to the drive IFs <highlight><bold>103</bold></highlight>, and the SM access controller <highlight><bold>104</bold></highlight> is connected directly to the microprocessors <highlight><bold>101</bold></highlight>. The disk IF unit <highlight><bold>12</bold></highlight> also implement the RAID function. </paragraph>
<paragraph id="P-0066" lvl="0"><number>&lsqb;0066&rsqb;</number> The shared memory unit <highlight><bold>13</bold></highlight> includes a shared memory (SM) controller <highlight><bold>107</bold></highlight> and a memory module <highlight><bold>109</bold></highlight>, and it stores control information of the disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight> (e.g., information on data transfer control between the channel IF units <highlight><bold>11</bold></highlight> and disk IF units <highlight><bold>12</bold></highlight> and the cache memory units <highlight><bold>14</bold></highlight>, and control information for data recorded on the hard disk drives <highlight><bold>5</bold></highlight>). </paragraph>
<paragraph id="P-0067" lvl="0"><number>&lsqb;0067&rsqb;</number> The cache memory unit <highlight><bold>14</bold></highlight> includes a cache memory (CM) controller <highlight><bold>108</bold></highlight> and a memory module <highlight><bold>109</bold></highlight>, and it temporarily stores data to be recorded on the hard disk drives <highlight><bold>5</bold></highlight>. </paragraph>
<paragraph id="P-0068" lvl="0"><number>&lsqb;0068&rsqb;</number> The SM access controller <highlight><bold>104</bold></highlight> is connected to the two SM-SWs <highlight><bold>110</bold></highlight> which is different from each other by two SM access paths <highlight><bold>135</bold></highlight>, and the SM-SWs <highlight><bold>110</bold></highlight> are connected to the two SM controllers <highlight><bold>107</bold></highlight> which is different from each other by two access paths <highlight><bold>136</bold></highlight>. Accordingly, each SM controller <highlight><bold>107</bold></highlight> has the connection of two access paths <highlight><bold>136</bold></highlight> coming from the two SM-SWs <highlight><bold>110</bold></highlight>, enabling each SM controller <highlight><bold>104</bold></highlight> to have two access routes to each SM controller <highlight><bold>107</bold></highlight>. In consequence, in the event of a fault on one access path or in one SM-SW <highlight><bold>110</bold></highlight>, the shared memory units <highlight><bold>13</bold></highlight> are kept accessible through another route. </paragraph>
<paragraph id="P-0069" lvl="0"><number>&lsqb;0069&rsqb;</number> The CM access controller <highlight><bold>105</bold></highlight> is connected to the two CM-SWs <highlight><bold>111</bold></highlight> by two CM access paths <highlight><bold>137</bold></highlight>, and the CM-SWs <highlight><bold>111</bold></highlight> are connected to the two CM controllers <highlight><bold>108</bold></highlight> by two access paths <highlight><bold>138</bold></highlight>. Accordingly, each CM controller <highlight><bold>108</bold></highlight> has the connection of two access paths <highlight><bold>138</bold></highlight> coming from the two CM-SWs <highlight><bold>111</bold></highlight>, enabling each CM controller <highlight><bold>105</bold></highlight> to have two access routes to each CM controller <highlight><bold>108</bold></highlight>. In consequence, in the event of a fault on one access path or in one CM-SW <highlight><bold>111</bold></highlight>, the cache memory units <highlight><bold>14</bold></highlight> are kept accessible through another route. </paragraph>
<paragraph id="P-0070" lvl="0"><number>&lsqb;0070&rsqb;</number> The SM-SW <highlight><bold>110</bold></highlight> has the connection of four SM access paths <highlight><bold>135</bold></highlight> coming from the two channel IF units <highlight><bold>11</bold></highlight> and two disk IF units <highlight><bold>12</bold></highlight>, and also has the connection of two access paths <highlight><bold>136</bold></highlight> going to the two shared memory units <highlight><bold>13</bold></highlight>. The SM-SW <highlight><bold>110</bold></highlight> also has the connection of two inter-unit SM paths <highlight><bold>141</bold></highlight> for the connection with SM-SWs <highlight><bold>110</bold></highlight> of other disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>. These inter-unit SM paths <highlight><bold>141</bold></highlight> may be designed differently for input and output, or may be designed equally for the bidirectional information transfer. </paragraph>
<paragraph id="P-0071" lvl="0"><number>&lsqb;0071&rsqb;</number> The CM-SW <highlight><bold>111</bold></highlight> has the connection of four CM access paths <highlight><bold>137</bold></highlight> coming from the two channel IF units <highlight><bold>11</bold></highlight> and two disk IF units <highlight><bold>12</bold></highlight>, and also has the connection of two access paths <highlight><bold>138</bold></highlight> going to the two cache memory units <highlight><bold>14</bold></highlight>. The CM-SW <highlight><bold>111</bold></highlight> also has the connection of two inter-unit CM paths <highlight><bold>142</bold></highlight> for the connection with CM-SWs <highlight><bold>111</bold></highlight> of other disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>. These inter-unit CM paths <highlight><bold>142</bold></highlight> have the same design as the inter-unit SM paths <highlight><bold>141</bold></highlight>. </paragraph>
<paragraph id="P-0072" lvl="0"><number>&lsqb;0072&rsqb;</number> Based on the above-mentioned access path connection of the SM-SWs <highlight><bold>110</bold></highlight> and CM-SWs <highlight><bold>111</bold></highlight>, these SWs <highlight><bold>110</bold></highlight> and <highlight><bold>111</bold></highlight> have a function of directing access requests from the channel IF units <highlight><bold>11</bold></highlight> and disk IF units <highlight><bold>12</bold></highlight> over the four access paths to the two access paths of the shared memory units <highlight><bold>13</bold></highlight> or cache memory units <highlight><bold>14</bold></highlight> within the self disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight> and the two inter-unit access paths of the shared memory units <highlight><bold>13</bold></highlight> or cache memory units <highlight><bold>14</bold></highlight> of other disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>. </paragraph>
<paragraph id="P-0073" lvl="0"><number>&lsqb;0073&rsqb;</number> In the arrangement of <cross-reference target="DRAWINGS">FIG. 7</cross-reference>, the SM-SWs <highlight><bold>110</bold></highlight> are connection nodes between the channel IF units <highlight><bold>11</bold></highlight> and disk IF units <highlight><bold>12</bold></highlight> and the shared memory units <highlight><bold>13</bold></highlight>, and the CM-SWs <highlight><bold>111</bold></highlight> are connection nodes between the channel IF units <highlight><bold>11</bold></highlight> and disk IF units <highlight><bold>12</bold></highlight> and the cache memory units <highlight><bold>14</bold></highlight>. </paragraph>
<paragraph id="P-0074" lvl="0"><number>&lsqb;0074&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 8</cross-reference> shows an example of the disk array controller <highlight><bold>1</bold></highlight> which is configured by connecting two disk array control units <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight> shown in <cross-reference target="DRAWINGS">FIG. 7</cross-reference>. The two disk array control units <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight> and <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>2</bold></highlight> have their SM-SWs <highlight><bold>110</bold></highlight> interconnected by inter-unit SM paths <highlight><bold>141</bold></highlight> via inter-unit SM-SWs <highlight><bold>121</bold></highlight>. Similarly, the CM-SWs <highlight><bold>111</bold></highlight> of the disk array control units <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight> and <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>2</bold></highlight> are interconnected by inter-unit CM paths <highlight><bold>142</bold></highlight> via inter-unit CM-SWs <highlight><bold>122</bold></highlight>. The SWs <highlight><bold>121</bold></highlight> and <highlight><bold>122</bold></highlight> are mounted as switch boxes. </paragraph>
<paragraph id="P-0075" lvl="0"><number>&lsqb;0075&rsqb;</number> In case, as in this embodiment, the disk array controller is made up of two disk array control units <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>, these units can be connected directly through the inter-unit paths instead of using the inter-unit SWs <highlight><bold>121</bold></highlight> and <highlight><bold>122</bold></highlight> without imposing any problem on this invention, while eliminating the overhead process of data transfer in the inter-unit SWs <highlight><bold>121</bold></highlight> and <highlight><bold>122</bold></highlight>. </paragraph>
<paragraph id="P-0076" lvl="0"><number>&lsqb;0076&rsqb;</number> The disk array controller <highlight><bold>1</bold></highlight> shown in <cross-reference target="DRAWINGS">FIG. 8</cross-reference> will be able to include three or more disk array control units <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight> by designing the inter-unit SWs <highlight><bold>121</bold></highlight> and <highlight><bold>122</bold></highlight> to have an increased number of path connection. The number of the path, which can be mounted to the inter-unit SWs <highlight><bold>121</bold></highlight> and <highlight><bold>122</bold></highlight>, is physically limited. For connecting disk array control units <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight> in excess of the limit in the number of path connection of the inter-unit SWs <highlight><bold>121</bold></highlight> and <highlight><bold>122</bold></highlight>, they cannot be connected by one inter-unit SW. In the case, the inter-units SWs are used in multiple stages to increase the number of the disk array controller connected. </paragraph>
<paragraph id="P-0077" lvl="0"><number>&lsqb;0077&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 19</cross-reference> shows an example of a disk array controller which is made up of three disk array control units built on individual racks and interconnected through a switch box, as will be explained in detail later. </paragraph>
<paragraph id="P-0078" lvl="0"><number>&lsqb;0078&rsqb;</number> For connecting three or more disk array control units <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>, the SM-SWs <highlight><bold>110</bold></highlight> and CM-SWs <highlight><bold>111</bold></highlight> in all units <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight> are each connected in a loop fashion as shown in <cross-reference target="DRAWINGS">FIG. 13</cross-reference>. This interconnecting scheme enables the loop connection of multiple disk array control units <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight> without using the inter-unit SWs <highlight><bold>121</bold></highlight> and <highlight><bold>122</bold></highlight>. Specifically, the inter-unit SM paths of adjacent units <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight> and the inter-unit CM paths of adjacent units <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight> are each connected by connectors. Preferably, these connectors of the inter-unit SM paths <highlight><bold>141</bold></highlight> and inter-unit CM paths are fixed on the exterior wall of the disk array control units <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight> for the convenience of the additional installation of units <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>, although it is not shown in the figure. </paragraph>
<paragraph id="P-0079" lvl="0"><number>&lsqb;0079&rsqb;</number> In the arrangement of <cross-reference target="DRAWINGS">FIG. 8</cross-reference>, the SM-SWs <highlight><bold>110</bold></highlight>, inter-unit SM paths <highlight><bold>141</bold></highlight> and inter-unit SM-SWs <highlight><bold>121</bold></highlight> in unison constitute the interconnection <highlight><bold>210</bold></highlight> shown in <cross-reference target="DRAWINGS">FIG. 1</cross-reference>, and the CM-SWs <highlight><bold>111</bold></highlight>, inter-unit CM paths <highlight><bold>142</bold></highlight> and inter-unit CM-SWs <highlight><bold>122</bold></highlight> in unison constitute the interconnection <highlight><bold>220</bold></highlight>. </paragraph>
<paragraph id="P-0080" lvl="0"><number>&lsqb;0080&rsqb;</number> An example of the operation of the arrangement shown in <cross-reference target="DRAWINGS">FIG. 8</cross-reference> for reading out data from a host computer <highlight><bold>50</bold></highlight> which is connected to the disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight> will be explained. </paragraph>
<paragraph id="P-0081" lvl="0"><number>&lsqb;0081&rsqb;</number> Initially, the host computer <highlight><bold>50</bold></highlight> issues a data read-out request to the channel IF unit <highlight><bold>11</bold></highlight> in the disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight> to which it is connected. The microprocessors <highlight><bold>101</bold></highlight> in the channel IF unit <highlight><bold>11</bold></highlight> which has received the request makes access to both shared memory units <highlight><bold>13</bold></highlight> in both disk array control units <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight> and <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>2</bold></highlight> thereby to find as to which hard disk drive <highlight><bold>5</bold></highlight> stores the requested data. The search is executed based on the conversion table stored in the shared memory units <highlight><bold>13</bold></highlight> indicative of the correspondence of the address of the requested data and hard disk drives which stores the data. </paragraph>
<paragraph id="P-0082" lvl="0"><number>&lsqb;0082&rsqb;</number> Subsequently, the microprocessors <highlight><bold>101</bold></highlight> in the channel IF unit <highlight><bold>11</bold></highlight> which has received the request makes access to both shared memory units <highlight><bold>13</bold></highlight> in both disk array control units <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight> and <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>2</bold></highlight> thereby to find as to whether or not the requested data is present in the cache memory units <highlight><bold>14</bold></highlight> in the disk array control units <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight> and <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>2</bold></highlight>. The search is based on information stored in the shared memory units <highlight><bold>13</bold></highlight> indicative of the directory of data of the cache memory units <highlight><bold>14</bold></highlight>. </paragraph>
<paragraph id="P-0083" lvl="0"><number>&lsqb;0083&rsqb;</number> In one case of finding the requested data in the cache memory unit <highlight><bold>14</bold></highlight> of the disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>, the data is transferred to the channel IF unit <highlight><bold>11</bold></highlight> via the CM-SW <highlight><bold>111</bold></highlight> within the unit <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>, and then it is sent to the host computer <highlight><bold>50</bold></highlight>. In other case of finding the data in the cache memory unit <highlight><bold>14</bold></highlight> of the disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>2</bold></highlight>, the data is transferred to the channel IF unit <highlight><bold>11</bold></highlight> by way of the CM-SW <highlight><bold>111</bold></highlight> within the unit <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>2</bold></highlight>, the inter-unit CM-SW <highlight><bold>122</bold></highlight> and the self CM-SW <highlight><bold>111</bold></highlight>, and then it is sent to the host computer <highlight><bold>50</bold></highlight>. </paragraph>
<paragraph id="P-0084" lvl="0"><number>&lsqb;0084&rsqb;</number> In case the request data does not exist in any cache memory unit <highlight><bold>14</bold></highlight>, the microprocessor <highlight><bold>101</bold></highlight> issues a command to another microprocessor <highlight><bold>101</bold></highlight> in the disk IF units <highlight><bold>12</bold></highlight> which is connected with the hard disk drive <highlight><bold>5</bold></highlight> where the requested data is stored, thereby operating it to read out and store the data from the hard disk drive <highlight><bold>5</bold></highlight> into one cache memory unit <highlight><bold>14</bold></highlight>. On receiving the command, the microprocessor <highlight><bold>101</bold></highlight> in the disk IF unit <highlight><bold>12</bold></highlight> reads the requested data out of the hard disk drive <highlight><bold>5</bold></highlight> and stores the data in the cache memory unit <highlight><bold>14</bold></highlight> of the disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight> or <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>2</bold></highlight>. </paragraph>
<paragraph id="P-0085" lvl="0"><number>&lsqb;0085&rsqb;</number> In one case of storing the data in the cache memory unit <highlight><bold>14</bold></highlight> in the disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>2</bold></highlight> which is connected to the hard disk drive <highlight><bold>5</bold></highlight> where the requested data is stored, the data is transferred to the cache memory unit <highlight><bold>14</bold></highlight> via the CM-SW <highlight><bold>111</bold></highlight> in the disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>2</bold></highlight>. In another case of storing the requested data in the cache memory unit <highlight><bold>14</bold></highlight> in another disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight> which is different from the disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>2</bold></highlight> connected with the hard disk drives <highlight><bold>5</bold></highlight> in which the requested data is stored, the data is transferred by way of the CM-SWs <highlight><bold>111</bold></highlight> of both units <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>2</bold></highlight> and <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight> and the inter-unit CM-SW <highlight><bold>122</bold></highlight>. </paragraph>
<paragraph id="P-0086" lvl="0"><number>&lsqb;0086&rsqb;</number> After the requested data has been stored in the cache memory unit <highlight><bold>14</bold></highlight>, the microprocessor <highlight><bold>101</bold></highlight> in the disk IF unit <highlight><bold>12</bold></highlight> indicates the cache memory unit <highlight><bold>14</bold></highlight> where the data has been stored to the command-issuing microprocessor <highlight><bold>101</bold></highlight> in the channel IF unit <highlight><bold>11</bold></highlight>. In response to this indication, the microprocessor <highlight><bold>101</bold></highlight> in the channel IF unit <highlight><bold>11</bold></highlight> read the data out of the cache memory unit <highlight><bold>14</bold></highlight> where the data has been stored and sends it to the host computer <highlight><bold>50</bold></highlight>. </paragraph>
<paragraph id="P-0087" lvl="0"><number>&lsqb;0087&rsqb;</number> According to this embodiment, a host computer <highlight><bold>50</bold></highlight> can transact data with a hard disk drive <highlight><bold>5</bold></highlight> by simply issuing an access request to the disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight> to which it is connected without being concerned with as to which hard disk drive <highlight><bold>5</bold></highlight> of which disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight> is stored the data in need. Namely, the host computer <highlight><bold>50</bold></highlight> can deal with the multiple disk array control units <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight> virtually as a single disk array controller <highlight><bold>1</bold></highlight>. </paragraph>
<paragraph id="P-0088" lvl="0"><number>&lsqb;0088&rsqb;</number> Furthermore, in the case of reading out data from a hard disk drive <highlight><bold>5</bold></highlight> connected to a disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight> which is different from the unit <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight> that has received the request, the data can be read out by way of the internal interconnection and cache memory unit <highlight><bold>14</bold></highlight>, instead of moving the data through the channel IF units <highlight><bold>11</bold></highlight> of both disk array control units <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>, whereby the deterioration of data read/write performance can be alleviated. </paragraph>
<paragraph id="P-0089" lvl="7"><number>&lsqb;0089&rsqb;</number> &lsqb;Embodiment 2&rsqb;</paragraph>
<paragraph id="P-0090" lvl="0"><number>&lsqb;0090&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 5</cross-reference>, <cross-reference target="DRAWINGS">FIG. 9</cross-reference> and <cross-reference target="DRAWINGS">FIG. 10</cross-reference> show another embodiment of this invention. </paragraph>
<paragraph id="P-0091" lvl="0"><number>&lsqb;0091&rsqb;</number> In <cross-reference target="DRAWINGS">FIG. 5, a</cross-reference> disk array controller <highlight><bold>1</bold></highlight> which is made up of multiple disk array control units <highlight><bold>1</bold></highlight>-<highlight><bold>2</bold></highlight> is arranged identically to the preceding Embodiment 1 shown in <cross-reference target="DRAWINGS">FIG. 1</cross-reference> except for the connection between the channel IF units <highlight><bold>11</bold></highlight> and disk IF units <highlight><bold>12</bold></highlight> and the shared memory units <highlight><bold>13</bold></highlight>. In each disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>2</bold></highlight>, the channel IF units <highlight><bold>11</bold></highlight> and disk IF units <highlight><bold>12</bold></highlight> and the shared memory units <highlight><bold>13</bold></highlight> are connected directly. The shared memory units <highlight><bold>13</bold></highlight> are interconnected via an interconnection <highlight><bold>24</bold></highlight> between the disk array control units <highlight><bold>1</bold></highlight>-<highlight><bold>2</bold></highlight>. Connecting the channel IF units <highlight><bold>11</bold></highlight> and disk IF units <highlight><bold>12</bold></highlight> and the shared memory units <highlight><bold>13</bold></highlight> directly in each disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>2</bold></highlight> reduces the access time to the shared memory units <highlight><bold>13</bold></highlight> as compared with the connection via the interconnection <highlight><bold>210</bold></highlight> which is the case of Embodiment 1. </paragraph>
<paragraph id="P-0092" lvl="0"><number>&lsqb;0092&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 9</cross-reference> shows a specific internal arrangement of the disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>2</bold></highlight>. The internal arrangement of the disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>2</bold></highlight> is identical to the preceding Embodiment 1 shown in <cross-reference target="DRAWINGS">FIG. 7</cross-reference> except for the connection between the channel IF units <highlight><bold>11</bold></highlight> and disk IF units <highlight><bold>12</bold></highlight> and the shared memory units <highlight><bold>13</bold></highlight>. </paragraph>
<paragraph id="P-0093" lvl="0"><number>&lsqb;0093&rsqb;</number> The disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>2</bold></highlight> includes two channel IF units <highlight><bold>11</bold></highlight> for interfacing with computers <highlight><bold>50</bold></highlight>, two disk IF units <highlight><bold>12</bold></highlight> for interfacing with hard disk drives <highlight><bold>5</bold></highlight>, two cache memory path switches (CM-SWs) <highlight><bold>111</bold></highlight>, two shared memory units <highlight><bold>13</bold></highlight>, two cache memory units <highlight><bold>14</bold></highlight>, shared memory (SM) access paths <highlight><bold>139</bold></highlight>, a cache memory (CM) access paths <highlight><bold>137</bold></highlight> and <highlight><bold>138</bold></highlight>, inter-unit SM paths <highlight><bold>143</bold></highlight>, and inter-unit CM paths <highlight><bold>142</bold></highlight>. </paragraph>
<paragraph id="P-0094" lvl="0"><number>&lsqb;0094&rsqb;</number> The SM access controller <highlight><bold>104</bold></highlight> is connected to two SM controllers <highlight><bold>107</bold></highlight> which is different from each other by two SM access paths <highlight><bold>139</bold></highlight>. Accordingly, the SM controller <highlight><bold>107</bold></highlight> has the connection of four SM access paths <highlight><bold>139</bold></highlight> coming from the two channel IF units <highlight><bold>11</bold></highlight> and two disk IF units <highlight><bold>12</bold></highlight>. The SM controller <highlight><bold>107</bold></highlight> also has the connection of two inter-unit SM paths <highlight><bold>143</bold></highlight> for the connection with SM controllers <highlight><bold>107</bold></highlight> of other disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>2</bold></highlight>. </paragraph>
<paragraph id="P-0095" lvl="0"><number>&lsqb;0095&rsqb;</number> Based on the above-mentioned access path connection of the SM controller <highlight><bold>107</bold></highlight>, it has a function of directing access requests from the channel IF units <highlight><bold>11</bold></highlight> and disk IF units <highlight><bold>12</bold></highlight> over the four access paths to the access paths of the memory modules <highlight><bold>109</bold></highlight> and the two inter-unit access paths <highlight><bold>143</bold></highlight> of the shared memory units <highlight><bold>13</bold></highlight> in other disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>2</bold></highlight>. </paragraph>
<paragraph id="P-0096" lvl="0"><number>&lsqb;0096&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 10</cross-reference> shows an example of the disk array controller <highlight><bold>1</bold></highlight> which is configured by connecting two disk array control units <highlight><bold>1</bold></highlight>-<highlight><bold>2</bold></highlight> shown in <cross-reference target="DRAWINGS">FIG. 9</cross-reference>. The two disk array control units <highlight><bold>1</bold></highlight>-<highlight><bold>2</bold></highlight> have their shared memory units <highlight><bold>13</bold></highlight> interconnected by inter-unit SM paths <highlight><bold>143</bold></highlight> via inter-unit SM-SWs <highlight><bold>121</bold></highlight>. The SM controllers <highlight><bold>107</bold></highlight> work for the connection nodes of the channel IF units and disk IF units and the shared memory units. The remaining portion is identical to the arrangement of Embodiment 1 shown in <cross-reference target="DRAWINGS">FIG. 8</cross-reference>. </paragraph>
<paragraph id="P-0097" lvl="0"><number>&lsqb;0097&rsqb;</number> In case the disk array controller is made up of two disk array control units <highlight><bold>1</bold></highlight>-<highlight><bold>2</bold></highlight>, these units can be connected directly through the inter-unit paths instead of using the inter-unit SWs <highlight><bold>121</bold></highlight> and <highlight><bold>122</bold></highlight> without imposing any problem on this invention, while eliminating the overhead process of data transfer in the inter-unit SWs <highlight><bold>121</bold></highlight> and <highlight><bold>122</bold></highlight> to improve the performance, as in the case of Embodiment 1. </paragraph>
<paragraph id="P-0098" lvl="0"><number>&lsqb;0098&rsqb;</number> The disk array controller <highlight><bold>1</bold></highlight> shown in <cross-reference target="DRAWINGS">FIG. 10</cross-reference> will be able to include three or more disk array control units <highlight><bold>1</bold></highlight>-<highlight><bold>2</bold></highlight> by designing the inter-unit SWs <highlight><bold>121</bold></highlight> and <highlight><bold>122</bold></highlight> to have an increased number of path connection, as in the preceding Embodiment 1. </paragraph>
<paragraph id="P-0099" lvl="0"><number>&lsqb;0099&rsqb;</number> The number of the path, which can be mounted to the inter-unit SWs <highlight><bold>121</bold></highlight> and <highlight><bold>122</bold></highlight>, is physically limited. For connecting disk array control units <highlight><bold>1</bold></highlight>-<highlight><bold>2</bold></highlight> in excess of the limit in the number of path connection of the inter-unit SWs <highlight><bold>121</bold></highlight> and <highlight><bold>122</bold></highlight>, they cannot be connected by one inter-unit SW. In the case, the inter-units SWs are used in multiple stages. These inter-unit SWs are built in a switch box, as in the preceding Embodiment 1. </paragraph>
<paragraph id="P-0100" lvl="0"><number>&lsqb;0100&rsqb;</number> Three or more disk array control units <highlight><bold>1</bold></highlight>-<highlight><bold>2</bold></highlight> can be chained in a loop fashion similar to the preceding Embodiment 1 shown in <cross-reference target="DRAWINGS">FIG. 13</cross-reference>. The plural disk array control units <highlight><bold>1</bold></highlight>-<highlight><bold>2</bold></highlight> can be connected without using the inter-unit SWs <highlight><bold>121</bold></highlight> and <highlight><bold>122</bold></highlight>. </paragraph>
<paragraph id="P-0101" lvl="0"><number>&lsqb;0101&rsqb;</number> The operation of the functional units in the disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>2</bold></highlight> for writing or reading out data to/from the hard disk drives <highlight><bold>5</bold></highlight> by the host computers <highlight><bold>50</bold></highlight> is identical to the preceding Embodiment 1 except that the access to the shared memory unit <highlight><bold>13</bold></highlight> in other disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>2</bold></highlight> takes place via the shared memory unit <highlight><bold>13</bold></highlight> in the self unit <highlight><bold>1</bold></highlight>-<highlight><bold>2</bold></highlight> and the interconnection <highlight><bold>24</bold></highlight>. </paragraph>
<paragraph id="P-0102" lvl="0"><number>&lsqb;0102&rsqb;</number> The inter-unit SM paths <highlight><bold>143</bold></highlight>, inter-unit SM-SWs <highlight><bold>121</bold></highlight>, and SM controller <highlight><bold>107</bold></highlight> in unison constitute the interconnection <highlight><bold>24</bold></highlight>. </paragraph>
<paragraph id="P-0103" lvl="0"><number>&lsqb;0103&rsqb;</number> According to this embodiment, a host computer <highlight><bold>50</bold></highlight> can transact data with a hard disk drive <highlight><bold>5</bold></highlight> by simply issuing an access request to the disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>2</bold></highlight> to which it is connected without being concerned with as to which hard disk drive <highlight><bold>5</bold></highlight> of which disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>2</bold></highlight> is stored the data in need. Namely, the host computer <highlight><bold>50</bold></highlight> can deal with the multiple disk array control units <highlight><bold>1</bold></highlight>-<highlight><bold>2</bold></highlight> virtually as a single disk array controller <highlight><bold>1</bold></highlight>. </paragraph>
<paragraph id="P-0104" lvl="0"><number>&lsqb;0104&rsqb;</number> Furthermore, in the case of reading out data from a hard disk drive <highlight><bold>5</bold></highlight> connected to a disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>2</bold></highlight> which is different from the unit <highlight><bold>1</bold></highlight>-<highlight><bold>2</bold></highlight> that has received the request, the data can be read out by way of the internal interconnection and cache memory unit <highlight><bold>14</bold></highlight>, instead of moving the data through the channel IF units <highlight><bold>11</bold></highlight> of both disk array control units <highlight><bold>1</bold></highlight>-<highlight><bold>2</bold></highlight>, whereby the deterioration of data read/write performance can be alleviated. </paragraph>
<paragraph id="P-0105" lvl="7"><number>&lsqb;0105&rsqb;</number> &lsqb;Embodiment 3&rsqb;</paragraph>
<paragraph id="P-0106" lvl="0"><number>&lsqb;0106&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 6</cross-reference>, <cross-reference target="DRAWINGS">FIG. 11</cross-reference> and <cross-reference target="DRAWINGS">FIG. 12</cross-reference> show another embodiment of this invention. </paragraph>
<paragraph id="P-0107" lvl="0"><number>&lsqb;0107&rsqb;</number> In <cross-reference target="DRAWINGS">FIG. 6, a</cross-reference> disk array controller <highlight><bold>1</bold></highlight> which is made up of multiple disk array control units <highlight><bold>1</bold></highlight>-<highlight><bold>3</bold></highlight> is arranged identically to the preceding Embodiment 2 shown in <cross-reference target="DRAWINGS">FIG. 5</cross-reference> except for the connection between the channel IF units <highlight><bold>11</bold></highlight> and disk IF units <highlight><bold>12</bold></highlight> and the cache memory units <highlight><bold>14</bold></highlight>. In each disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>3</bold></highlight>, the channel IF units <highlight><bold>11</bold></highlight> and disk IF units <highlight><bold>12</bold></highlight> and the cache memory units <highlight><bold>14</bold></highlight> are connected by an interconnection <highlight><bold>22</bold></highlight>. The cache memory units <highlight><bold>14</bold></highlight> are interconnected between disk array control units <highlight><bold>1</bold></highlight>-<highlight><bold>3</bold></highlight> by an interconnection <highlight><bold>25</bold></highlight>. The channel IF units <highlight><bold>11</bold></highlight> and disk IF units <highlight><bold>12</bold></highlight> and the shared memory units <highlight><bold>13</bold></highlight> are connected directly, whereas the channel IF units <highlight><bold>11</bold></highlight> and disk IF units <highlight><bold>12</bold></highlight> and the cache memory units <highlight><bold>14</bold></highlight> are connected by the interconnection <highlight><bold>22</bold></highlight>, as in the case of the preceding Embodiment 2, by the following reason. The shared memory unit <highlight><bold>13</bold></highlight> deals with control data having a size of several bytes for example, whereas the cache memory unit <highlight><bold>14</bold></highlight> deals with data having a size of several kilobytes for example. Therefore, it is intended to raise the throughput based on the connection through the interconnection <highlight><bold>22</bold></highlight> with a limited number of pins. </paragraph>
<paragraph id="P-0108" lvl="0"><number>&lsqb;0108&rsqb;</number> By the separate provision of the interconnection <highlight><bold>22</bold></highlight> which connects the channel IF units <highlight><bold>11</bold></highlight> and disk IF units <highlight><bold>12</bold></highlight> and the cache memory units <highlight><bold>14</bold></highlight> and the interconnection <highlight><bold>25</bold></highlight> which connects the cache memory units <highlight><bold>14</bold></highlight> between the disk array control units <highlight><bold>1</bold></highlight>-<highlight><bold>3</bold></highlight>, data transfer between cache memory units <highlight><bold>14</bold></highlight> of different disk array control units <highlight><bold>1</bold></highlight>-<highlight><bold>3</bold></highlight> does not preclude the host computers <highlight><bold>50</bold></highlight> from making access to the cache memory units <highlight><bold>14</bold></highlight>. </paragraph>
<paragraph id="P-0109" lvl="0"><number>&lsqb;0109&rsqb;</number> The disk IF unit implements the data transfer between cache memories. The function of data transfer between cache memory units <highlight><bold>14</bold></highlight> of different disk array control units <highlight><bold>1</bold></highlight>-<highlight><bold>3</bold></highlight> is necessary for moving data to a disk array control unit of less-frequent access in dealing with concentrated accesses from host computers <highlight><bold>50</bold></highlight> to one disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>3</bold></highlight>. </paragraph>
<paragraph id="P-0110" lvl="0"><number>&lsqb;0110&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 11</cross-reference> shows a specific internal arrangement of the disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>3</bold></highlight>. The internal arrangement of the disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>3</bold></highlight> is identical to the preceding Embodiment 2 shown in <cross-reference target="DRAWINGS">FIG. 9</cross-reference> except for the connection between the channel IF units <highlight><bold>11</bold></highlight> and disk IF units <highlight><bold>12</bold></highlight> and the cache memory units <highlight><bold>14</bold></highlight>. The CM controllers <highlight><bold>108</bold></highlight> work for the connection nodes of the channel IF units, disk IF units and cache memory units. </paragraph>
<paragraph id="P-0111" lvl="0"><number>&lsqb;0111&rsqb;</number> The disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>3</bold></highlight> includes two channel IF units <highlight><bold>11</bold></highlight> for interfacing with host computers <highlight><bold>50</bold></highlight>, two disk IF units <highlight><bold>12</bold></highlight> for interfacing with hard disk drives <highlight><bold>5</bold></highlight>, two cache memory path switches (CM-SWs) <highlight><bold>111</bold></highlight>, two shared memory units <highlight><bold>13</bold></highlight>, two cache memory units <highlight><bold>14</bold></highlight>, shared memory (SM) access paths <highlight><bold>139</bold></highlight>, cache memory (CM) access paths <highlight><bold>137</bold></highlight> and <highlight><bold>138</bold></highlight>, inter-unit SM paths <highlight><bold>143</bold></highlight>, and inter-unit CM paths <highlight><bold>144</bold></highlight>. </paragraph>
<paragraph id="P-0112" lvl="0"><number>&lsqb;0112&rsqb;</number> The CM access controller <highlight><bold>105</bold></highlight> is connected to two CM-SWs <highlight><bold>111</bold></highlight> by two CM access paths <highlight><bold>137</bold></highlight>, and the CM-SW <highlight><bold>111</bold></highlight> is connected to two CM controllers <highlight><bold>108</bold></highlight> by two access paths <highlight><bold>138</bold></highlight>. Accordingly, the CM controller <highlight><bold>108</bold></highlight> has the connection of two access paths <highlight><bold>138</bold></highlight> coming from the two CM-SWs <highlight><bold>111</bold></highlight>, and it also has the connection of two inter-unit CM paths <highlight><bold>144</bold></highlight> for the connection with CM controllers <highlight><bold>108</bold></highlight> of other disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>3</bold></highlight>. </paragraph>
<paragraph id="P-0113" lvl="0"><number>&lsqb;0113&rsqb;</number> Based on the above-mentioned access path connection of the CM controller <highlight><bold>108</bold></highlight>, it has a function of directing access requests from the CM-SWs <highlight><bold>111</bold></highlight> over the two CM access paths <highlight><bold>138</bold></highlight> to the access paths of the memory modules <highlight><bold>109</bold></highlight> and the two inter-unit CM access paths <highlight><bold>144</bold></highlight> of the cache memory units <highlight><bold>14</bold></highlight> in other disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>3</bold></highlight>. </paragraph>
<paragraph id="P-0114" lvl="0"><number>&lsqb;0114&rsqb;</number> The CM-SW <highlight><bold>111</bold></highlight> has the connection of four CM access paths <highlight><bold>137</bold></highlight> coming from the two channel IF units <highlight><bold>11</bold></highlight> and two disk IF units <highlight><bold>12</bold></highlight>, and also has the connection of two access paths <highlight><bold>138</bold></highlight> going to the two cache memory units <highlight><bold>14</bold></highlight>. </paragraph>
<paragraph id="P-0115" lvl="0"><number>&lsqb;0115&rsqb;</number> Based on this access path connection of the CM-SW <highlight><bold>111</bold></highlight>, it has a function of directing access requests from the channel IF units <highlight><bold>11</bold></highlight> and disk IF units <highlight><bold>12</bold></highlight> over the four CM access paths <highlight><bold>137</bold></highlight> to the two CM access paths <highlight><bold>138</bold></highlight> of the cache memory units <highlight><bold>14</bold></highlight>. </paragraph>
<paragraph id="P-0116" lvl="0"><number>&lsqb;0116&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 12</cross-reference> shows an example of the disk array controller <highlight><bold>1</bold></highlight> which is configured by connecting two disk array control units <highlight><bold>1</bold></highlight>-<highlight><bold>3</bold></highlight> shown in <cross-reference target="DRAWINGS">FIG. 11</cross-reference>. The two disk array control units <highlight><bold>1</bold></highlight>-<highlight><bold>3</bold></highlight> have their cache memory units <highlight><bold>14</bold></highlight> interconnected by inter-unit CM paths <highlight><bold>144</bold></highlight> via inter-unit CM-SWs <highlight><bold>122</bold></highlight>. The remaining portion is identical to the arrangement of Embodiment 2 shown in <cross-reference target="DRAWINGS">FIG. 10</cross-reference>. </paragraph>
<paragraph id="P-0117" lvl="0"><number>&lsqb;0117&rsqb;</number> In case the disk array controller is made up of two disk array control units <highlight><bold>1</bold></highlight>-<highlight><bold>3</bold></highlight>, these units can be connected directly through the inter-unit paths instead of using the inter-unit SWs <highlight><bold>121</bold></highlight> and <highlight><bold>122</bold></highlight> without imposing any problem on this invention, while eliminating the overhead process of data transfer in the inter-unit SWs <highlight><bold>121</bold></highlight> and <highlight><bold>122</bold></highlight> to improve the performance, as in the case of Embodiment 2. </paragraph>
<paragraph id="P-0118" lvl="0"><number>&lsqb;0118&rsqb;</number> The disk array controller <highlight><bold>1</bold></highlight> shown in <cross-reference target="DRAWINGS">FIG. 12</cross-reference> will be able to include three or more disk array control units <highlight><bold>1</bold></highlight>-<highlight><bold>3</bold></highlight> by designing the inter-unit SWs to have an increased number of path connection, as in the preceding Embodiment 2. The number of the path, which can be mounted to the inter-unit SWs <highlight><bold>121</bold></highlight> and <highlight><bold>122</bold></highlight>, is physically limited. For connecting disk array control units <highlight><bold>1</bold></highlight>-<highlight><bold>3</bold></highlight> in excess of the limit in the number of path connection of the inter-unit SWs <highlight><bold>121</bold></highlight> and <highlight><bold>122</bold></highlight>, they cannot be connected by one inter-unit SW. In the case, the inter-units SWs are used in multiple stages. </paragraph>
<paragraph id="P-0119" lvl="0"><number>&lsqb;0119&rsqb;</number> Three or more disk array control units <highlight><bold>1</bold></highlight>-<highlight><bold>3</bold></highlight> can be chained in a loop fashion similar to the preceding Embodiment 1 shown in <cross-reference target="DRAWINGS">FIG. 13</cross-reference>. The plural disk array control units <highlight><bold>1</bold></highlight>-<highlight><bold>3</bold></highlight> can be connected without using the inter-unit SWs <highlight><bold>121</bold></highlight> and <highlight><bold>122</bold></highlight>. </paragraph>
<paragraph id="P-0120" lvl="0"><number>&lsqb;0120&rsqb;</number> The operation of the functional units in the disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>3</bold></highlight> for transacting data with the hard disk drives <highlight><bold>5</bold></highlight> by the host computers <highlight><bold>50</bold></highlight> is identical to the preceding Embodiment 2 except that the access to the cache memory unit <highlight><bold>14</bold></highlight> in other disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>3</bold></highlight> takes place via the cache memory unit <highlight><bold>14</bold></highlight> in the self unit <highlight><bold>1</bold></highlight>-<highlight><bold>3</bold></highlight> and the interconnection <highlight><bold>25</bold></highlight>. </paragraph>
<paragraph id="P-0121" lvl="0"><number>&lsqb;0121&rsqb;</number> According to this embodiment, a host computer <highlight><bold>50</bold></highlight> can transact data with a hard disk drive <highlight><bold>5</bold></highlight> by simply issuing an access request to the disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>3</bold></highlight> to which it is connected without being concerned with as to which hard disk drive <highlight><bold>5</bold></highlight> of which disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>3</bold></highlight> is stored the data in need. Namely, the host computer <highlight><bold>50</bold></highlight> can deal with the multiple disk array control units <highlight><bold>1</bold></highlight>-<highlight><bold>3</bold></highlight> virtually as a single disk array controller <highlight><bold>1</bold></highlight>. </paragraph>
<paragraph id="P-0122" lvl="0"><number>&lsqb;0122&rsqb;</number> Furthermore, in the case of reading out data from a hard disk drive <highlight><bold>5</bold></highlight> connected to a disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>3</bold></highlight> which is different from the unit <highlight><bold>1</bold></highlight>-<highlight><bold>3</bold></highlight> that has received the request, the data can be read out by way of the internal interconnection and cache memory unit <highlight><bold>14</bold></highlight>, instead of moving the data through the channel IF units <highlight><bold>11</bold></highlight> of both disk array control units <highlight><bold>1</bold></highlight>-<highlight><bold>3</bold></highlight>, whereby the deterioration of data read/write performance can be alleviated. </paragraph>
<paragraph id="P-0123" lvl="0"><number>&lsqb;0123&rsqb;</number> Next, examples of the usage of the embodiments of this invention will be explained. </paragraph>
<paragraph id="P-0124" lvl="0"><number>&lsqb;0124&rsqb;</number> High-end disk array controllers have the following function. In the function, a data set (corresponding to a logical volume) for one work is duplicated and stored, and both the original and duplicate data sets are updated simultaneously in the ordinary work. At the emergence of the need of backup for the data set for example, updating of the duplicate data set is suspended and it is used for the backup, while the original data set is used continuously for the work, and the original and duplicate data sets are rendered the matching process on completion of backup. </paragraph>
<paragraph id="P-0125" lvl="0"><number>&lsqb;0125&rsqb;</number> In a disk array controller <highlight><bold>1</bold></highlight>, which have been explained as Embodiment 1, a method of accomplishing this function for storing a duplicate data set in the different disk array control units <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight> will be explained with reference to <cross-reference target="DRAWINGS">FIG. 8</cross-reference>. It is assumed that an original data set is stored on the hard disk drive <highlight><bold>5</bold></highlight> connected to the disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight> and a duplicate data set is stored on the hard disk drive <highlight><bold>5</bold></highlight> connected to the disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>2</bold></highlight> in <cross-reference target="DRAWINGS">FIG. 8</cross-reference>. It is also assumed that the host computer <highlight><bold>50</bold></highlight> connected to the disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight> works for the ordinary work and the host computer <highlight><bold>50</bold></highlight> connected to the disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>2</bold></highlight> works to backup data on a tape storage unit (not shown) connected to it. </paragraph>
<paragraph id="P-0126" lvl="0"><number>&lsqb;0126&rsqb;</number> In the ordinary work, in the event of a request of the host computer <highlight><bold>50</bold></highlight>, which is connected to the disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>, to write data to an intended data set, the microprocessor <highlight><bold>101</bold></highlight> in the channel IF unit <highlight><bold>11</bold></highlight>, which is connected to the host computer <highlight><bold>50</bold></highlight> connected to the disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>, transfers and writes the data which is sent from the host computer <highlight><bold>50</bold></highlight> into the cache memory unit <highlight><bold>14</bold></highlight> of the disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>. Subsequently, the microprocessor <highlight><bold>101</bold></highlight> issues a command by way of the shared memory unit <highlight><bold>13</bold></highlight> of the disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight> to the microprocessor <highlight><bold>101</bold></highlight> in the disk IF unit <highlight><bold>12</bold></highlight> which is connected to the hard disk drive <highlight><bold>5</bold></highlight> where the original data set is stored, thereby operating on it to read out data from the cache memory unit <highlight><bold>14</bold></highlight> of the disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>, transfers the data to the disk IF unit <highlight><bold>12</bold></highlight> which is connected to the hard disk drive <highlight><bold>5</bold></highlight> where the original data set is stored, and operates on the disk IF unit <highlight><bold>12</bold></highlight> to transfer and write the data onto the hard disk drive <highlight><bold>5</bold></highlight>. </paragraph>
<paragraph id="P-0127" lvl="0"><number>&lsqb;0127&rsqb;</number> The microprocessor <highlight><bold>101</bold></highlight> in the channel IF unit <highlight><bold>11</bold></highlight> of the disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>, which monitors the updating of data of the original data set, stores in the shared memory units <highlight><bold>13</bold></highlight> of the disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight> the control information indicative of the quantity of updated data of the original data set. When the quantity of updated data exceeds a predetermined value, the microprocessor <highlight><bold>101</bold></highlight> issues a command to the microprocessor <highlight><bold>101</bold></highlight> in the disk IF unit <highlight><bold>12</bold></highlight> which is connected with the hard disk drive <highlight><bold>5</bold></highlight> where the original data set is stored, thereby operating on it to revise the duplicate data set to match with the updated content of the original data set. </paragraph>
<paragraph id="P-0128" lvl="0"><number>&lsqb;0128&rsqb;</number> The command receiving microprocessor <highlight><bold>101</bold></highlight> reads out the updated data from the hard disk drive <highlight><bold>5</bold></highlight> and converts the addresses of updated data into addresses of the duplicate data set. It transfers and writes the updated data via the CM-SW <highlight><bold>111</bold></highlight> of the disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>, inter-unit CM-SW <highlight><bold>122</bold></highlight> and CM-SW <highlight><bold>111</bold></highlight> of the disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>2</bold></highlight> into the cache memory unit <highlight><bold>14</bold></highlight> of the disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>2</bold></highlight>. </paragraph>
<paragraph id="P-0129" lvl="0"><number>&lsqb;0129&rsqb;</number> Subsequently, the microprocessor <highlight><bold>101</bold></highlight> reads out the updated data from the cache memory unit <highlight><bold>14</bold></highlight>, transfers the data to the disk IF unit <highlight><bold>12</bold></highlight> which is connected to the hard disk drive <highlight><bold>5</bold></highlight> where the duplicate data set is stored, and the data is transferred and stored onto the hard disk drive <highlight><bold>5</bold></highlight>. </paragraph>
<paragraph id="P-0130" lvl="0"><number>&lsqb;0130&rsqb;</number> Based on the foregoing operation, the disk array controller maintains the original data set and duplicate data set during the ordinary work. </paragraph>
<paragraph id="P-0131" lvl="0"><number>&lsqb;0131&rsqb;</number> In the event of a request of the host computer <highlight><bold>50</bold></highlight>, which is connected to the disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>2</bold></highlight>, to backup data for an intended data set, the microprocessor <highlight><bold>101</bold></highlight> in the channel IF unit <highlight><bold>11</bold></highlight> connected to the host computer <highlight><bold>50</bold></highlight> issues a command by way of the shared memory unit <highlight><bold>13</bold></highlight> of the disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight> to the microprocessor <highlight><bold>101</bold></highlight> in the channel IF unit <highlight><bold>11</bold></highlight> which is connected to the host computer <highlight><bold>50</bold></highlight> having the ordinary work, thereby operating on it to halt the updating of the duplicate data set. The command receiving microprocessor <highlight><bold>101</bold></highlight> halts the updating of duplicate data set. The microprocessor <highlight><bold>101</bold></highlight> in the channel IF unit <highlight><bold>11</bold></highlight>, which is connected to the backup requesting host computer <highlight><bold>50</bold></highlight>, issue a command by way of the shared memory unit <highlight><bold>13</bold></highlight> of the disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>2</bold></highlight> to the microprocessor <highlight><bold>101</bold></highlight> in the disk IF unit <highlight><bold>12</bold></highlight> which is connected to the hard disk drive <highlight><bold>5</bold></highlight> where the duplicate data set is stored, thereby operating on it to read out and transfer the duplicate data set from the hard disk drive <highlight><bold>5</bold></highlight> to the disk IF unit <highlight><bold>12</bold></highlight>, from which it is transferred and written into the cache memory unit <highlight><bold>14</bold></highlight> of the disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>2</bold></highlight>. </paragraph>
<paragraph id="P-0132" lvl="0"><number>&lsqb;0132&rsqb;</number> Subsequently, the microprocessor <highlight><bold>101</bold></highlight> in the channel IF unit <highlight><bold>11</bold></highlight> reads out the duplicate data set from the cache memory unit <highlight><bold>14</bold></highlight> of the disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>2</bold></highlight> and transfers it to the channel IF unit <highlight><bold>11</bold></highlight>, from which it is sent to the backup requesting host computer <highlight><bold>50</bold></highlight>. </paragraph>
<paragraph id="P-0133" lvl="0"><number>&lsqb;0133&rsqb;</number> On completion of backup of data set, the microprocessor <highlight><bold>101</bold></highlight> in the channel IF unit <highlight><bold>11</bold></highlight>, which is connected to the backup requesting host computer <highlight><bold>50</bold></highlight>, issues a command to the microprocessor <highlight><bold>101</bold></highlight> in the channel IF unit <highlight><bold>11</bold></highlight> which is connected to the host computer <highlight><bold>50</bold></highlight> having the ordinary work through the shared memory units <highlight><bold>13</bold></highlight> of the disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>, thereby operating on it to revise the duplicate data set to match with the content of the original data set which has been updated during the backup process. This operation is identical to the data updating in the ordinary work explained previously. </paragraph>
<paragraph id="P-0134" lvl="0"><number>&lsqb;0134&rsqb;</number> In accomplishing the above-mentioned function, this operational scheme enables the movement of data between the two disk array control units <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight> and <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>2</bold></highlight> via the internal interconnections and cache memory units <highlight><bold>14</bold></highlight>, eliminating the need of data transfer via the channel IF units of both disk array control units <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight> and <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>2</bold></highlight>, whereby the deterioration of system performance during the implementation of this function is alleviated and thus the deterioration of efficiency of the user&apos;s ordinary work is prevented. </paragraph>
<paragraph id="P-0135" lvl="0"><number>&lsqb;0135&rsqb;</number> This operational scheme can be carried out equally in the disk array controller <highlight><bold>1</bold></highlight> of Embodiment 2 and Embodiment 3 without problems, and the same effectiveness is attained. </paragraph>
<paragraph id="P-0136" lvl="0"><number>&lsqb;0136&rsqb;</number> Other usages include the following. </paragraph>
<paragraph id="P-0137" lvl="0"><number>&lsqb;0137&rsqb;</number> In the disk array controllers <highlight><bold>1</bold></highlight> of Embodiment 1, Embodiment 2 and Embodiment 3, when a host computer <highlight><bold>50</bold></highlight> sends a data read request, for example, to a disk array control unit and if the data is absent on the hard disk drive <highlight><bold>5</bold></highlight> connected to the unit, it is necessary to read out the data via an interconnection from another disk array control unit connected with a hard disk drive <highlight><bold>5</bold></highlight> where the data is stored and send the data to the requesting host computer <highlight><bold>50</bold></highlight>. The data read/write operation across the border of disk array control units, as in this case, results in the deterioration of performance as compared with the operation within a unit. </paragraph>
<paragraph id="P-0138" lvl="0"><number>&lsqb;0138&rsqb;</number> For avoiding the data transfer between units, it is necessary for the system to have a function of moving data, which is accessed frequently by one host computer <highlight><bold>50</bold></highlight> and is stored on a hard disk drive connected to a disk array control unit other than the control unit connected to the one host computer <highlight><bold>50</bold></highlight>, to the hard disk drive <highlight><bold>5</bold></highlight> of the control unit connected to the one host computer <highlight><bold>50</bold></highlight>. </paragraph>
<paragraph id="P-0139" lvl="0"><number>&lsqb;0139&rsqb;</number> This data moving function implemented by the disk array controller <highlight><bold>1</bold></highlight> of Embodiment 1 will be explained with reference to <cross-reference target="DRAWINGS">FIG. 8</cross-reference>. </paragraph>
<paragraph id="P-0140" lvl="0"><number>&lsqb;0140&rsqb;</number> The microprocessor <highlight><bold>101</bold></highlight> in the channel IF unit <highlight><bold>11</bold></highlight> monitors the frequency of access to data sets (corresponding to logical volumes) on all hard disk drives <highlight><bold>5</bold></highlight>, and stores control information indicative of the access frequency of the data sets in the shared memory units <highlight><bold>13</bold></highlight> within the same disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>. </paragraph>
<paragraph id="P-0141" lvl="0"><number>&lsqb;0141&rsqb;</number> If the host computer <highlight><bold>50</bold></highlight> connected to the disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight> makes access to the data set on the hard disk drive <highlight><bold>5</bold></highlight> connected to another disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>2</bold></highlight> to concentrate the access on the data set, the access frequency is exceed a predetermined rate, the microprocessor <highlight><bold>101</bold></highlight> in the channel IF unit <highlight><bold>11</bold></highlight> of the disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight> issues a command through the shared memory unit <highlight><bold>13</bold></highlight> in the other disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>2</bold></highlight> to the microprocessor <highlight><bold>101</bold></highlight> in the disk IF unit <highlight><bold>12</bold></highlight> which is connected with the hard disk drive <highlight><bold>5</bold></highlight> where the data set is stored, thereby operating on it to read out the data set and transfer and write the data set into the cache memory unit <highlight><bold>14</bold></highlight> of the disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>2</bold></highlight>. </paragraph>
<paragraph id="P-0142" lvl="0"><number>&lsqb;0142&rsqb;</number> Subsequently, the microprocessor <highlight><bold>101</bold></highlight> in the channel IF unit <highlight><bold>11</bold></highlight> of the disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight> reads out and transfers the relevant data from the cache memory unit <highlight><bold>14</bold></highlight> of the disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>2</bold></highlight> to the cache memory unit <highlight><bold>14</bold></highlight> of the disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>. The microprocessor <highlight><bold>101</bold></highlight> subsequently issues a command by way of the shared memory unit <highlight><bold>13</bold></highlight> in the disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight> to the microprocessor <highlight><bold>101</bold></highlight> in the disk IF unit <highlight><bold>12</bold></highlight> of the disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>, thereby operating on it to read out, transfer and write the relevant data from the cache memory unit <highlight><bold>14</bold></highlight> of the disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight> onto the hard disk drive <highlight><bold>5</bold></highlight>. </paragraph>
<paragraph id="P-0143" lvl="0"><number>&lsqb;0143&rsqb;</number> This operational scheme enables the movement of data between two disk array control units <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight> via the internal interconnections and cache memory units <highlight><bold>14</bold></highlight>, eliminating the need of data transfer via the channel IF units of both disk array control units, whereby the deterioration of system performance during the data movement is alleviated and thus the deterioration of efficiency of the user&apos;s ordinary work is prevented. </paragraph>
<paragraph id="P-0144" lvl="0"><number>&lsqb;0144&rsqb;</number> This operational scheme can be carried out equally in the disk array controller <highlight><bold>1</bold></highlight> of Embodiment 2 and Embodiment 3 without problems, and the same effectiveness is attained. </paragraph>
<paragraph id="P-0145" lvl="0"><number>&lsqb;0145&rsqb;</number> Next, the structure of the disk array controllers of Embodiment 1, Embodiment 2 and Embodiment 3 will be explained. </paragraph>
<paragraph id="P-0146" lvl="0"><number>&lsqb;0146&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 14</cross-reference> shows an example of the structure of the disk array control unit <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight> of Embodiment 1 shown in <cross-reference target="DRAWINGS">FIG. 7</cross-reference> built on a rack <highlight><bold>201</bold></highlight>. The channel IF units <highlight><bold>11</bold></highlight> are arranged in channel IF packages (PKs) <highlight><bold>311</bold></highlight>, the disk IF units <highlight><bold>12</bold></highlight> are arranged in disk IF packages <highlight><bold>312</bold></highlight>, the SM-SWs <highlight><bold>110</bold></highlight> and CM-SWs <highlight><bold>111</bold></highlight> are arranged in switch packages <highlight><bold>320</bold></highlight>, and the shared memory units <highlight><bold>13</bold></highlight> and cache memory units <highlight><bold>14</bold></highlight> are arranged in memory packages <highlight><bold>330</bold></highlight>. These packages are plugged into the sockets on a back board <highlight><bold>340</bold></highlight>, which has the wiring of the SM access paths <highlight><bold>135</bold></highlight> and <highlight><bold>136</bold></highlight> and the CM access paths <highlight><bold>137</bold></highlight> and <highlight><bold>138</bold></highlight>. </paragraph>
<paragraph id="P-0147" lvl="0"><number>&lsqb;0147&rsqb;</number> The switch packages <highlight><bold>320</bold></highlight> has the connection of cables of the inter-unit SM paths <highlight><bold>141</bold></highlight> and cables of the inter-unit CM paths <highlight><bold>142</bold></highlight>, and these cables have other ends connected to connectors <highlight><bold>221</bold></highlight> and <highlight><bold>222</bold></highlight>, respectively, on the side wall of the rack <highlight><bold>201</bold></highlight>. The cables are not shown. A power unit <highlight><bold>350</bold></highlight> supplies electric power to the packages. The disk array control unit built on a rack as shown operates as a stand-alone disk array controller. </paragraph>
<paragraph id="P-0148" lvl="0"><number>&lsqb;0148&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 15</cross-reference> shows an example of the interconnection of two sets of the disk array control unit built on the rack <highlight><bold>201</bold></highlight> shown in <cross-reference target="DRAWINGS">FIG. 14</cross-reference>. </paragraph>
<paragraph id="P-0149" lvl="0"><number>&lsqb;0149&rsqb;</number> A switch box <highlight><bold>210</bold></highlight> houses the inter-unit SM-SWs <highlight><bold>121</bold></highlight> and inter-unit CM-SWs <highlight><bold>122</bold></highlight> shown in <cross-reference target="DRAWINGS">FIG. 8</cross-reference>. The inter-unit SM paths <highlight><bold>141</bold></highlight> coming from the inter-unit SM-SWs <highlight><bold>121</bold></highlight> are connected to connectors <highlight><bold>221</bold></highlight>, and the inter-unit CM paths <highlight><bold>142</bold></highlight> coming from the inter-unit CM-SWs <highlight><bold>122</bold></highlight> are connected to connectors <highlight><bold>222</bold></highlight>. </paragraph>
<paragraph id="P-0150" lvl="0"><number>&lsqb;0150&rsqb;</number> For interconnecting the two disk array control units on the racks <highlight><bold>201</bold></highlight> and <highlight><bold>202</bold></highlight>, the inter-unit SM path connectors <highlight><bold>221</bold></highlight> on the rack <highlight><bold>201</bold></highlight> are connected to the connectors <highlight><bold>221</bold></highlight> on the switch box <highlight><bold>210</bold></highlight> with cables <highlight><bold>231</bold></highlight>, and the inter-unit CM path connectors <highlight><bold>222</bold></highlight> on the rack <highlight><bold>201</bold></highlight> are connected to the connectors <highlight><bold>222</bold></highlight> on the switch box <highlight><bold>210</bold></highlight> with cables <highlight><bold>232</bold></highlight>. Similarly, the connectors <highlight><bold>221</bold></highlight> on the rack <highlight><bold>202</bold></highlight> are connected to the connectors <highlight><bold>221</bold></highlight> on the switch box <highlight><bold>210</bold></highlight> with cables <highlight><bold>231</bold></highlight>, and the inter-unit CM path connectors <highlight><bold>222</bold></highlight> on the rack <highlight><bold>202</bold></highlight> are connected to the connectors <highlight><bold>222</bold></highlight> on the switch box <highlight><bold>210</bold></highlight> with cables <highlight><bold>232</bold></highlight>. </paragraph>
<paragraph id="P-0151" lvl="0"><number>&lsqb;0151&rsqb;</number> The disk array controller built on two racks in this manner can deal with an increased number of host computer channels and an increased storage capability. </paragraph>
<paragraph id="P-0152" lvl="0"><number>&lsqb;0152&rsqb;</number> By designating the racks <highlight><bold>201</bold></highlight> and <highlight><bold>202</bold></highlight> to be a basic and extension racks, respectively, and accommodating the switch box <highlight><bold>210</bold></highlight> inside the extension rack <highlight><bold>202</bold></highlight>, it becomes possible to eliminate the floor space for the switch box <highlight><bold>210</bold></highlight> without increasing the manufacturing cost of the basic rack <highlight><bold>201</bold></highlight>. </paragraph>
<paragraph id="P-0153" lvl="0"><number>&lsqb;0153&rsqb;</number> This structural scheme can also be applied to the disk array controllers of Embodiment 2 and Embodiment 3 without any problem. </paragraph>
<paragraph id="P-0154" lvl="0"><number>&lsqb;0154&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 18</cross-reference> shows the interconnection of three disk array control units by inter-unit SM-SWs <highlight><bold>121</bold></highlight> and CM-SWs <highlight><bold>122</bold></highlight>. Each switch (SW) which connects three disk array control units must have a larger capability as compared with the case of connecting two units. Specifically, disk array control units <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>, <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>2</bold></highlight> and <highlight><bold>1</bold></highlight>-<highlight><bold>1</bold></highlight>-<highlight><bold>3</bold></highlight> are interconnected through inter-unit SM paths <highlight><bold>141</bold></highlight> and inter-unit CM paths <highlight><bold>142</bold></highlight> via the inter-unit SM-SWs <highlight><bold>121</bold></highlight> and CM-SWs <highlight><bold>122</bold></highlight>, and function as a disk array controller. </paragraph>
<paragraph id="P-0155" lvl="0"><number>&lsqb;0155&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 19</cross-reference> shows the structure of this disk array controller. The switch box <highlight><bold>210</bold></highlight> has a separate rack. The disk array control units built on individual racks <highlight><bold>201</bold></highlight>, <highlight><bold>202</bold></highlight> and <highlight><bold>203</bold></highlight> are interconnected by inter-unit SM path cables <highlight><bold>231</bold></highlight> and connectors <highlight><bold>221</bold></highlight> and inter-unit CM path cables <highlight><bold>232</bold></highlight> and connectors <highlight><bold>222</bold></highlight>. Providing more capability and more connectors for the switch box <highlight><bold>210</bold></highlight> for connecting four or more disk array control units facilitates the additional installation in the future. </paragraph>
<paragraph id="P-0156" lvl="0"><number>&lsqb;0156&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 21</cross-reference> shows the format of data which is transferred through the switch box <highlight><bold>210</bold></highlight>. Data has a form of packet, and it consists of a destination address field <highlight><bold>401</bold></highlight>, command field <highlight><bold>402</bold></highlight> and data field <highlight><bold>403</bold></highlight>. The address is of the shared memory and cache memory. </paragraph>
<paragraph id="P-0157" lvl="0"><number>&lsqb;0157&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 22</cross-reference> shows a reference table <highlight><bold>410</bold></highlight> for path switching provided in the switch box <highlight><bold>210</bold></highlight>. This table contains the correspondence between the destination address and the port number of the disk array control unit. The switch box <highlight><bold>210</bold></highlight> makes reference to the path switching table to determine a destination unit based on the address <highlight><bold>401</bold></highlight> in the packet data <highlight><bold>400</bold></highlight> and implements the path switching. </paragraph>
<paragraph id="P-0158" lvl="0"><number>&lsqb;0158&rsqb;</number> Additional installation of disk array control units is carried out based on the following procedure. If the switch box <highlight><bold>210</bold></highlight> has spare connectors for additional disk array control units, cables <highlight><bold>231</bold></highlight> and <highlight><bold>232</bold></highlight> are connected to these connectors. If there are no spare connectors, another switch box is added in a multi-stage configuration and cables <highlight><bold>231</bold></highlight> and <highlight><bold>232</bold></highlight> are connected to it. The path switching table <highlight><bold>410</bold></highlight> in the switch box <highlight><bold>210</bold></highlight> is revised to include the addresses and port numbers for the additional disk array control units. An alternative design of the table is to preset additional addresses with flags so that address flags are turned on for the additional unit installation. </paragraph>
<paragraph id="P-0159" lvl="0"><number>&lsqb;0159&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 20</cross-reference> shows another unit interconnection scheme. In a disk array controller, three disk array control units are interconnected in series. SM-SWs <highlight><bold>110</bold></highlight> and CM-SWs <highlight><bold>111</bold></highlight> have a bridge function of transferring incoming data intact to other disk array control unit. These SM-SWs <highlight><bold>110</bold></highlight> and CM-SWs <highlight><bold>111</bold></highlight> may be replaced with common buses, by which multiple disk array control units are interconnected. </paragraph>
<paragraph id="P-0160" lvl="0"><number>&lsqb;0160&rsqb;</number> Further the other embodiment will be shown as follows. </paragraph>
<paragraph id="P-0161" lvl="0"><number>&lsqb;0161&rsqb;</number> As shown in <cross-reference target="DRAWINGS">FIG. 16, a</cross-reference> disk array control unit made up of a minimal number of packages (PKs), which are used in the unit rack <highlight><bold>201</bold></highlight> shown in <cross-reference target="DRAWINGS">FIG. 14</cross-reference>, is built on a rack <highlight><bold>205</bold></highlight>. </paragraph>
<paragraph id="P-0162" lvl="0"><number>&lsqb;0162&rsqb;</number> As shown in <cross-reference target="DRAWINGS">FIG. 17</cross-reference>, two or more unit racks <highlight><bold>205</bold></highlight> and a switch box <highlight><bold>210</bold></highlight> are built on a large rack <highlight><bold>206</bold></highlight>, and the units on the racks <highlight><bold>205</bold></highlight> are interconnected via the switch box <highlight><bold>210</bold></highlight> based on the interconnection scheme of the sixth embodiment. This structure is suitable for middle-scale to large-scale disk array controllers. The rack <highlight><bold>205</bold></highlight> has the same role for the disk array control unit as of the foregoing one, or alternatively the disk array control unit may have a module structure. Each disk array control unit on the rack <highlight><bold>206</bold></highlight> may include an individual power unit, or all units may be supplied with power from a single power unit. </paragraph>
<paragraph id="P-0163" lvl="0"><number>&lsqb;0163&rsqb;</number> According to the present invention, it becomes possible to construct a disk array system which is based on the operation of multiple disk array control units as a single disk array controller and is capable of alleviating the deterioration of performance caused by the movement of data between the disk array control units. </paragraph>
</section>
</detailed-description>
</subdoc-description>
<subdoc-claims>
<claim id="CLM-00001">
<claim-text><highlight><bold>1</bold></highlight>. A disk array controller comprising: 
<claim-text>a plurality of disk array control units, each having one or more channel interface units for interfacing with a host computer; one or more disk interface units for interfacing with disk drives; a cache memory unit for temporarily storing data which is written to or read out of said disk drives; and a shared memory unit for storing control information of data transfer between said channel interface unit and disk interface unit and said cache memory unit and control information for said disk drives, </claim-text>
<claim-text>said disk array control unit implementing the data read/write operation in response to a data read/write request from said host computer by operating on said channel interface unit to transfer data between said interface with said host computer and said cache memory unit and operating on said disk interface unit to transfer data between said disk drive and said cache memory unit, </claim-text>
<claim-text>said channel interface units and disk interface units and said cache memory units in said disk array control units having their connection nodes interconnected through a first interconnection across the border of disk array control units, </claim-text>
<claim-text>said channel interface units and disk interface units and said shared memory units in said disk array control units having their connection nodes interconnected through a second interconnection across the border of disk array control units.</claim-text>
</claim-text>
</claim>
</subdoc-claims>
<subdoc-drawings id="DRAWINGS">
<heading lvl="0" align="CENTER">Drawings</heading>
<representative-figure>1</representative-figure>
<figure id="figure-D00000">
<image id="EMI-D00000" file="US20030005221A1-20030102-D00000.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00001">
<image id="EMI-D00001" file="US20030005221A1-20030102-D00001.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00002">
<image id="EMI-D00002" file="US20030005221A1-20030102-D00002.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00003">
<image id="EMI-D00003" file="US20030005221A1-20030102-D00003.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00004">
<image id="EMI-D00004" file="US20030005221A1-20030102-D00004.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00005">
<image id="EMI-D00005" file="US20030005221A1-20030102-D00005.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00006">
<image id="EMI-D00006" file="US20030005221A1-20030102-D00006.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00007">
<image id="EMI-D00007" file="US20030005221A1-20030102-D00007.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00008">
<image id="EMI-D00008" file="US20030005221A1-20030102-D00008.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00009">
<image id="EMI-D00009" file="US20030005221A1-20030102-D00009.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00010">
<image id="EMI-D00010" file="US20030005221A1-20030102-D00010.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00011">
<image id="EMI-D00011" file="US20030005221A1-20030102-D00011.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00012">
<image id="EMI-D00012" file="US20030005221A1-20030102-D00012.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00013">
<image id="EMI-D00013" file="US20030005221A1-20030102-D00013.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00014">
<image id="EMI-D00014" file="US20030005221A1-20030102-D00014.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00015">
<image id="EMI-D00015" file="US20030005221A1-20030102-D00015.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00016">
<image id="EMI-D00016" file="US20030005221A1-20030102-D00016.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00017">
<image id="EMI-D00017" file="US20030005221A1-20030102-D00017.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00018">
<image id="EMI-D00018" file="US20030005221A1-20030102-D00018.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00019">
<image id="EMI-D00019" file="US20030005221A1-20030102-D00019.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00020">
<image id="EMI-D00020" file="US20030005221A1-20030102-D00020.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00021">
<image id="EMI-D00021" file="US20030005221A1-20030102-D00021.TIF" imf="TIFF" ti="DR"/>
</figure>
</subdoc-drawings>
</patent-application-publication>
