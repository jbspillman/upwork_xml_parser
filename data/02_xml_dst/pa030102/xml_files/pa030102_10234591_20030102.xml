<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE patent-application-publication SYSTEM "pap-v16-2002-01-01.dtd" [
<!ENTITY US20030001807A1-20030102-D00000.TIF SYSTEM "US20030001807A1-20030102-D00000.TIF" NDATA TIF>
<!ENTITY US20030001807A1-20030102-D00001.TIF SYSTEM "US20030001807A1-20030102-D00001.TIF" NDATA TIF>
<!ENTITY US20030001807A1-20030102-D00002.TIF SYSTEM "US20030001807A1-20030102-D00002.TIF" NDATA TIF>
<!ENTITY US20030001807A1-20030102-D00003.TIF SYSTEM "US20030001807A1-20030102-D00003.TIF" NDATA TIF>
<!ENTITY US20030001807A1-20030102-D00004.TIF SYSTEM "US20030001807A1-20030102-D00004.TIF" NDATA TIF>
<!ENTITY US20030001807A1-20030102-D00005.TIF SYSTEM "US20030001807A1-20030102-D00005.TIF" NDATA TIF>
<!ENTITY US20030001807A1-20030102-D00006.TIF SYSTEM "US20030001807A1-20030102-D00006.TIF" NDATA TIF>
<!ENTITY US20030001807A1-20030102-D00007.TIF SYSTEM "US20030001807A1-20030102-D00007.TIF" NDATA TIF>
<!ENTITY US20030001807A1-20030102-D00008.TIF SYSTEM "US20030001807A1-20030102-D00008.TIF" NDATA TIF>
<!ENTITY US20030001807A1-20030102-D00009.TIF SYSTEM "US20030001807A1-20030102-D00009.TIF" NDATA TIF>
<!ENTITY US20030001807A1-20030102-D00010.TIF SYSTEM "US20030001807A1-20030102-D00010.TIF" NDATA TIF>
<!ENTITY US20030001807A1-20030102-D00011.TIF SYSTEM "US20030001807A1-20030102-D00011.TIF" NDATA TIF>
]>
<patent-application-publication>
<subdoc-bibliographic-information>
<document-id>
<doc-number>20030001807</doc-number>
<kind-code>A1</kind-code>
<document-date>20030102</document-date>
</document-id>
<publication-filing-type>new</publication-filing-type>
<domestic-filing-data>
<application-number>
<doc-number>10234591</doc-number>
</application-number>
<application-number-series-code>10</application-number-series-code>
<filing-date>20020904</filing-date>
</domestic-filing-data>
<technical-information>
<classification-ipc>
<classification-ipc-primary>
<ipc>G09G003/32</ipc>
</classification-ipc-primary>
<classification-ipc-edition>07</classification-ipc-edition>
</classification-ipc>
<classification-us>
<classification-us-primary>
<uspc>
<class>345</class>
<subclass>082000</subclass>
</uspc>
</classification-us-primary>
</classification-us>
<title-of-invention>Intelligent light source</title-of-invention>
</technical-information>
<continuity-data>
<continuations>
<continuation-of>
<parent-child>
<child>
<document-id>
<doc-number>10234591</doc-number>
<kind-code>A1</kind-code>
<document-date>20020904</document-date>
</document-id>
</child>
<parent>
<document-id>
<doc-number>09362583</doc-number>
<document-date>19990728</document-date>
<country-code>US</country-code>
</document-id>
</parent>
<parent-status>PENDING</parent-status>
</parent-child>
</continuation-of>
</continuations>
<continuations>
<continuation-of>
<parent-child>
<child>
<document-id>
<doc-number>10234591</doc-number>
<kind-code>A1</kind-code>
<document-date>20020904</document-date>
</document-id>
</child>
<parent>
<document-id>
<doc-number>09532603</doc-number>
<document-date>20000322</document-date>
<country-code>US</country-code>
</document-id>
</parent>
<parent-status>GRANTED</parent-status>
<parent-patent>
<document-id>
<doc-number>6473062</doc-number>
<country-code>US</country-code>
</document-id>
</parent-patent>
</parent-child>
</continuation-of>
</continuations>
</continuity-data>
<inventors>
<first-named-inventor>
<name>
<given-name>Jacques</given-name>
<family-name>Debiez</family-name>
</name>
<residence>
<residence-non-us>
<city>Cugnaux</city>
<country-code>FR</country-code>
</residence-non-us>
</residence>
<authority-applicant>INV</authority-applicant>
</first-named-inventor>
<inventor>
<name>
<given-name>Francois</given-name>
<family-name>Lerat</family-name>
</name>
<residence>
<residence-non-us>
<city>Tournefeuille</city>
<country-code>FR</country-code>
</residence-non-us>
</residence>
<authority-applicant>INV</authority-applicant>
</inventor>
</inventors>
<assignee>
<organization-name>Storage Technology Corporation</organization-name>
<assignee-type>03</assignee-type>
</assignee>
<correspondence-address>
<name-1>Wayne P. Bailey</name-1>
<name-2>Storage Technology Corporation</name-2>
<address>
<address-1>One StorageTek Drive, MS-4309</address-1>
<city>Louisville</city>
<state>CO</state>
<postalcode>80028-4309</postalcode>
<country>
<country-code>US</country-code>
</country>
</address>
</correspondence-address>
</subdoc-bibliographic-information>
<subdoc-abstract>
<paragraph id="A-0001" lvl="0">Disclosed is a intelligent light source that is capable of providing a uniform illumination image across the surface of an illuminated object analyzed by an optical detector. This is accomplished by individually controlling each light-emitting element of a linear array of light elements. Calibration of the array is accomplished by sequentially illuminating each optical element of the source and building an array of normalized detected data. The matrix is then inverted and multiplied by a linear array of ones to generate the calibration data. The calibration data are then used to program a simple logic device that allows accurate digital control of the intensity of each individual light element. </paragraph>
</subdoc-abstract>
<subdoc-description>
<summary-of-invention>
<section>
<heading lvl="1">BACKGROUND OF THE INVENTION </heading>
<paragraph id="P-0001" lvl="0"><number>&lsqb;0001&rsqb;</number> A. Field of the Invention </paragraph>
<paragraph id="P-0002" lvl="0"><number>&lsqb;0002&rsqb;</number> The present invention pertains generally to optics and more particularly to methods and apparatus for generating a uniform light source. </paragraph>
<paragraph id="P-0003" lvl="0"><number>&lsqb;0003&rsqb;</number> B. Description of the Background </paragraph>
<paragraph id="P-0004" lvl="0"><number>&lsqb;0004&rsqb;</number> Many different optical applications require the generation of light that has a uniform intensity over a predetermined spatial region. For example, a uniform source of light can be used to illuminate various objects for imaging or scanning applications. One specific example relates to the scanning of bar codes using an optical detector, usually a linear Charged Coupled Device (CCD) array. </paragraph>
<paragraph id="P-0005" lvl="0"><number>&lsqb;0005&rsqb;</number> A common way of illuminating targets such a bar codes for scanning purposes is to use a linear array of light emitting diodes (LED) or laser diodes, such as illustrated in <cross-reference target="DRAWINGS">FIG. 4</cross-reference>. These sources of light, however, can vary greatly in intensity. For example, typical light emitting diodes can indiviually vary by as much as a factor of 4. To overcome this problem, selection processes are used to select LEDs that have substantially the same intensity output. However, these processes of selecting LEDs are expensive and substantially increase the cost of the resultant array. Though this method can be used, the forward current in each individual LED has to be accurate enough to obtain a uniform source. </paragraph>
<paragraph id="P-0006" lvl="0"><number>&lsqb;0006&rsqb;</number> Further, when mounting the LEDs in the array it is difficult to insure that each of the LEDs is aligned in a common direction. In the process of mounting these LEDs it is common for the LEDs to be slightly skewed or mounted off axis so that a uniform output is not provided. Techniques for insuring that each of these LEDs is properly aligned also substantially increases the cost of the LED array. </paragraph>
<paragraph id="P-0007" lvl="0"><number>&lsqb;0007&rsqb;</number> When illuminating a predetermined spatial region such as a bar code with a linear array, it is desirable to get a uniform signal at sensor output. Other problems exist in generating an intensity of light that gives an uniform signal at the output of the CCD such as lens vignetting, field attenuation that varies by the square of the distance along the length of the target, and even sensor sensitivity non-uniformity. These problems can be overcome, to some extent, by the use of compound lenses or other optics that are placed in front of the CCD sensor. However, compound lenses are expensive and normally cannot provide a complete correction of these problems unless they are custom designed for each individual application. </paragraph>
<paragraph id="P-0008" lvl="0"><number>&lsqb;0008&rsqb;</number> Further, light sources such as LEDs tend to age such that they produce a decreasing intensity over time. Initial calibration of an LED array will not necessarily result in a calibrated array after a period of time. Hence, the expensive calibration techniques that may be used to provide a uniform output intensity over a predetermined spatial region may be ineffective after a period of time especially since the individual sources of light may age differently. Other components in the system may also age which will also affect the ability to provide a source of light that is spatially uniform over a predetermined region. </paragraph>
<paragraph id="P-0009" lvl="0"><number>&lsqb;0009&rsqb;</number> It would therefore be desirable to have a system that is capable of calibrating the individual light source elements so that a uniform output can be achieved and therefore reduce the cost of the necessary optics and eliminate sorting procedures for selecting light elements having similar outputs. U.S. Pat. No. 5,382,782 issued Jan. 17, 1995 to Hasegawa et al. discloses a system for calibrating LEDs in an array. Hasegawa et al. discloses an iterative process of detecting and altering the output of an array in an attempt to provide a substantially uniform output. Adjustment of the elements is done by detecting where the luminance is higher and lower and then adjusting the LEDs in those particular areas. Some degree of uniformity can be achieved by repeating the process in an interative manner. </paragraph>
<paragraph id="P-0010" lvl="0"><number>&lsqb;0010&rsqb;</number> It would therefore be advantageous to provide a method of accurately adjusting the LEDs to provide a highly uniform output in a simple and easy fashion. </paragraph>
</section>
<section>
<heading lvl="1">SUMMARY OF THE INVENTION </heading>
<paragraph id="P-0011" lvl="0"><number>&lsqb;0011&rsqb;</number> The present invention overcomes the disadvantages and limitations of the prior art by providing a method of calibrating an array of light sources to provide an accurate and uniform output light intensity over a predetermined spatial area. </paragraph>
<paragraph id="P-0012" lvl="0"><number>&lsqb;0012&rsqb;</number> The present invention may therefore comprise a method of calibrating an array of light sources to provide a substantially uniform output over a predetermined area comprising; sequentially activating each light source of the array of light sources; sampling light intensity over the predetermined area for each light source to generate a plurality of intensity signals; generating a normalized matrix of the plurality of intensity signals; inverting the matrix to produce an inverted matrix; calculating driver intensity data from the inverted matrix; using the driver intensity data to generate calibrated driver signals. </paragraph>
<paragraph id="P-0013" lvl="0"><number>&lsqb;0013&rsqb;</number> The advantages of the present invention are that a complete and accurate calibration of the light emitting diodes can be performed in a single step and in a very accurate manner that does not require multiple iterations. The response of the signal issubstantially uniformly flat at the CCD output, so the control of the light source compensates any defects from the power source to the CCD output, including the optical path. This includes: </paragraph>
<paragraph id="P-0014" lvl="2"><number>&lsqb;0014&rsqb;</number> 1. Variations in LED efficiency, including relative LED efficiency versus forward current, peak current and angular displacement, </paragraph>
<paragraph id="P-0015" lvl="2"><number>&lsqb;0015&rsqb;</number> 2. Variations in LED forward voltage, </paragraph>
<paragraph id="P-0016" lvl="2"><number>&lsqb;0016&rsqb;</number> 3. Variations in analog parts driving the LEDs, </paragraph>
<paragraph id="P-0017" lvl="2"><number>&lsqb;0017&rsqb;</number> 4. LED off-axis tilt, </paragraph>
<paragraph id="P-0018" lvl="2"><number>&lsqb;0018&rsqb;</number> 5. Relative LED off-axis positioning, </paragraph>
<paragraph id="P-0019" lvl="2"><number>&lsqb;0019&rsqb;</number> 6. Optical focusing systems transmission defects, </paragraph>
<paragraph id="P-0020" lvl="2"><number>&lsqb;0020&rsqb;</number> 7. CCD sensitivity, and </paragraph>
<paragraph id="P-0021" lvl="2"><number>&lsqb;0021&rsqb;</number> 8. CCD sensitivity resulting from non -uniformity. </paragraph>
<paragraph id="P-0022" lvl="0"><number>&lsqb;0022&rsqb;</number> Since only electrical parameters can be controlled and analyzed within the system, the calibration procedures act on the electrical power control of each individual LED to provide an accurate analysis of the CCD output signal. </paragraph>
<paragraph id="P-0023" lvl="0"><number>&lsqb;0023&rsqb;</number> Also, light emitting diodes do not have to be sorted to match diodes having similar outputs. Standard diodes can be used that have not gone through a sorting process. No fine-tuning of the analog discrete parts associated with the LED forward current setting has to be done either. Further, special aligning techniques do not have to be used for mounting the LEDs in a linear array. The LEDs can be mounted in accordance with the standard mounting procedures that-are accurate enough with respect to the calibration method used, and still be able to provide the desired uniform output. Further, expensive compound optics do not have to be used to generate a uniform output along the length of the target. By calibrating the system to adjust the intensities of the various light sources, expensive optical designs are not required. Additionally, even residual variations in the detected signal can be further adjusted by modulating the CCD array output signal with the inverse ripple signal that is used to adjust the sensitivity of the array. In this manner, a very accurate output can be produced, that gives the real reflectivity of the target which is analyzed, with a constant Signal to Noise Ratio across the field of view of the scanning device. This is required in most imaging applications.</paragraph>
</section>
</summary-of-invention>
<brief-description-of-drawings>
<section>
<heading lvl="1">BRIEF DESCRIPTION OF THE DRAWINGS </heading>
<paragraph id="P-0024" lvl="0"><number>&lsqb;0024&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1</cross-reference> schematically illustrates the manner in which a linear array of light sources can be used to illuminate a bar code that is imaged by a detector such as a CCD array. </paragraph>
<paragraph id="P-0025" lvl="0"><number>&lsqb;0025&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 2</cross-reference> is a side view illustrating the manner in which an LED array can illuminate an object to be scanned. </paragraph>
<paragraph id="P-0026" lvl="0"><number>&lsqb;0026&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 3</cross-reference> schematically illustrates selected pixels within a CCD array. </paragraph>
<paragraph id="P-0027" lvl="0"><number>&lsqb;0027&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 4</cross-reference> is a front view of an LED array. </paragraph>
<paragraph id="P-0028" lvl="0"><number>&lsqb;0028&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 5</cross-reference> is an output illustrating an exemplary output of an LED array. </paragraph>
<paragraph id="P-0029" lvl="0"><number>&lsqb;0029&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 6</cross-reference> illustrates a uniform output of an LED array and the resultant illuminated signal. </paragraph>
<paragraph id="P-0030" lvl="0"><number>&lsqb;0030&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 7</cross-reference> schematically illustrates the initial pulse duration matrix. </paragraph>
<paragraph id="P-0031" lvl="0"><number>&lsqb;0031&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 8</cross-reference> schematically illustrates normalization equation of the detected illumination. </paragraph>
<paragraph id="P-0032" lvl="0"><number>&lsqb;0032&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 9</cross-reference> schematically illustrates a normalized detected intensity matrix. </paragraph>
<paragraph id="P-0033" lvl="0"><number>&lsqb;0033&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 10</cross-reference> schematically illustrates a matrix product giving the uniform output level. </paragraph>
<paragraph id="P-0034" lvl="0"><number>&lsqb;0034&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 11</cross-reference> illustrates a matrix multiplication for determining desired intensities in accordance with the present invention. </paragraph>
<paragraph id="P-0035" lvl="0"><number>&lsqb;0035&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 12</cross-reference> is a schematic block diagram illustrating primary components of the present invention. </paragraph>
<paragraph id="P-0036" lvl="0"><number>&lsqb;0036&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 13</cross-reference> is a flow diagram illustrating the manner of calibration used in accordance with the present invention. </paragraph>
<paragraph id="P-0037" lvl="0"><number>&lsqb;0037&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 14</cross-reference> is a flow diagram of the operational steps for illuminationg a target in accordance with the present invention. </paragraph>
<paragraph id="P-0038" lvl="0"><number>&lsqb;0038&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 15</cross-reference> illustrates the overall timing diagram of one representative implementation of the present invention. </paragraph>
<paragraph id="P-0039" lvl="0"><number>&lsqb;0039&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 16</cross-reference> illustrates a programmable logic device for implementation of the light source control sequencer, highlighting the ease of implementation in standard programmable logic devices.</paragraph>
</section>
</brief-description-of-drawings>
<detailed-description>
<section>
<heading lvl="1">DETAILED DESCRIPTION OF THE INVENTION </heading>
<paragraph id="P-0040" lvl="0"><number>&lsqb;0040&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 1</cross-reference> schematically illustrates the manner in which a linear array of optical elements <highlight><bold>10</bold></highlight> can be used to illuminate an object such as a bar code <highlight><bold>12</bold></highlight> for scanning by an image or scanning device, such as a linear CCD array <highlight><bold>14</bold></highlight>. Typically, a single electrical power source <highlight><bold>16</bold></highlight> is used to provide power to the LEDs for illumination. The image information is generated by the imaging device <highlight><bold>14</bold></highlight> that may contain a linear array of CCD elements and is transmitted via connector <highlight><bold>18</bold></highlight>. The linear array of optical elements <highlight><bold>10</bold></highlight> can comprise light emitting diodes, laser diodes or any desired sources of light. The object to be imaged, of course, can comprise any object that can be scanned or imaged. The present invention is not specifically limited to the scanning of bar codes. Similarly, the linear CCD array can comprise any detector elements including standard semi-conductor photo-detectors, photo-multiplier tubes or any similar type of detectors. The scanning or imaging device <highlight><bold>14</bold></highlight> may also include optics <highlight><bold>15</bold></highlight> for focusing of light from the object <highlight><bold>12</bold></highlight> being imaged. In accordance with the present invention, simple optics can be used, as disclosed below, to focus the object being scanned on the detector array, since the present invention provides a uniform response at the CCD output across the length of the object being scanned, such as a bar code <highlight><bold>12</bold></highlight>. Additionally, in accordance with the present invention, a separate power control <highlight><bold>16</bold></highlight> is provided for each optical element of the linear array of LEDs. In this fashion, each optical element is separately controlled so that the intensity of each of these elements can be separately illuminated and corrected. </paragraph>
<paragraph id="P-0041" lvl="0"><number>&lsqb;0041&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 2</cross-reference> schematically illustrates a side view of the manner in which a linear array <highlight><bold>10</bold></highlight> of optical elements, such as an LED array <highlight><bold>10</bold></highlight>, is aligned to illuminate a scanned or imaged object <highlight><bold>12</bold></highlight>. In accordance with the present invention, the luminous intensity of each of the N optical elements of the LED array <highlight><bold>10</bold></highlight> is calibrated so that a uniform signal is achieved at CCD output over the analyzed field of view. N is the number of LEDs, usually in the range 8 to 40 or more. Of course, the higher the number of LEDs, the flatter the response and the easier it is to control the source. The LEDs may be evenly or unevenly spaced. Usually they are evenly spaced, but in some applications (for example where the angle of view is very wide), it could be useful to reduce the LED spacing at the edges of the source. As a matter of convenience, the further description will assume evenly spaced elements. </paragraph>
<paragraph id="P-0042" lvl="0"><number>&lsqb;0042&rsqb;</number> In order to calibrate the LED array <highlight><bold>10</bold></highlight>, it is necessary to analyze the image data generated during the scanning process of a specific reference white target. The target has to have a uniform reflectivity over the analyzed field of view and should be representative of the white level usually observed (i.e., the maximum reflectivity). In order to provide a suitable quantity of data to analyze, selected pixels from the CCD array <highlight><bold>24</bold></highlight> are used. As shown in <cross-reference target="DRAWINGS">FIG. 3, N</cross-reference> selected pixel elements <highlight><bold>26</bold></highlight> that are evenly spaced along the linear array are selected for collection of data. A typical linear CCD array, for example, may include from 1024 to 6144 pixels. As shown in <cross-reference target="DRAWINGS">FIG. 3, N</cross-reference> evenly spaced pixel elements are selected for collection of data. Alternatively, several pixel elements that are adjacent to each other or even multiple subsequent scan of the same pixels may be used and combined as a single element to reduce the effects of a single faulty element or of acquisition noise. </paragraph>
<paragraph id="P-0043" lvl="0"><number>&lsqb;0043&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 4</cross-reference> is a schematic front view of an LED array <highlight><bold>10</bold></highlight>, which has N equally spaced LEDs. Due to the magnification of the optical system or lens in front of the CCD, the LED array <highlight><bold>10</bold></highlight> has a different physical size than the CCD array <highlight><bold>24</bold></highlight>, but each has equally spaced elements. As a matter of convenience, the same number of selected pixels <highlight><bold>26</bold></highlight> are used as the number of LED elements, so that a square matrix of data can be formed that is collected in accordance with the present invention. </paragraph>
<paragraph id="P-0044" lvl="0"><number>&lsqb;0044&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 5</cross-reference> is a graph illustrating optical intensity versus the spacing <highlight><bold>30</bold></highlight> of the LEDs along the length of the LED array <highlight><bold>10</bold></highlight>. The graph of <cross-reference target="DRAWINGS">FIG. 5</cross-reference> is aligned with each of the optical elements of the LED array of <cross-reference target="DRAWINGS">FIG. 4</cross-reference> for schematic purposes. As shown in <cross-reference target="DRAWINGS">FIG. 5</cross-reference>, the output of each of the LEDs is illustrated as plot <highlight><bold>28</bold></highlight>. The outputs can vary by as much as by a factor of 4. The optical intensity at the surface of the object being illuminated, such as object <highlight><bold>12</bold></highlight> in <cross-reference target="DRAWINGS">FIG. 2</cross-reference>, is shown in plot <highlight><bold>32</bold></highlight>. As is apparent from plot <highlight><bold>32</bold></highlight>, the illumination of the surface of the object varies greatly with the distance along the object. In this manner, a very non-uniform illumination occurs along the image of the object <highlight><bold>12</bold></highlight> as a result of a combination of distance attenuation, lens vignetting and variations in sensitivity of the CCD picture elements. </paragraph>
<paragraph id="P-0045" lvl="0"><number>&lsqb;0045&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 6</cross-reference> is a plot of optical intensity <highlight><bold>34</bold></highlight> versus spacing <highlight><bold>36</bold></highlight> of optical elements such as LEDs. Plot <highlight><bold>38</bold></highlight> is a plot of the individual intensities of each of the LEDs. As can be seen from <cross-reference target="DRAWINGS">FIG. 6</cross-reference>, each of the LEDs has a uniform output. When the LEDs have a uniform output as shown in <cross-reference target="DRAWINGS">FIG. 6</cross-reference>, the light intensity along the surface of the object being illuminated when imaged, using simple optics, is shown in plot <highlight><bold>40</bold></highlight>. As can be seen, contribution of light rays cause the intensity output to be greater towards the middle of the array. Hence, even assuming that each of the LEDs could be perfectly aligned and provide an equal output, the intensity of the light on the surface of the illuminated object, when imaged using simple optics, would still be non-uniform as shown by plot <highlight><bold>40</bold></highlight>. As shown by plot <highlight><bold>42</bold></highlight>, the use of compound optics can correct some of these non-uniformity problems, assuming that the LED source is perfectly homogeneous. As can be seen from the graphs from <cross-reference target="DRAWINGS">FIG. 5</cross-reference> and <cross-reference target="DRAWINGS">FIG. 6</cross-reference>, individual control of the output of each of the optical elements, in accordance with the present invention, may provide the ability to correct the non-uniformities that are illustrated in <cross-reference target="DRAWINGS">FIG. 5</cross-reference> and <cross-reference target="DRAWINGS">FIG. 6</cross-reference>. </paragraph>
<paragraph id="P-0046" lvl="0"><number>&lsqb;0046&rsqb;</number> Although individual control of elements or groups of elements has been disclosed in U.S. Pat. No. 5,382,782 issued to Hasegawa et al., a comprehensive and accurate technique for determining how to adjust each of the optical elements has not been disclosed. Trial and error techniques of calibration have resulted in multiple iterations with imperfect results. In addition, the complexity of the implementation and the processing horsepower needed to control one LED limits the number of LEDs individually driven and requires LED grouping. </paragraph>
<paragraph id="P-0047" lvl="0"><number>&lsqb;0047&rsqb;</number> In contrast, the present invention uses a calibration technique for adjusting each of the individual elements to provide highly accurate results in a single step, and allows easy implementation in inexpensive logic devices with capabilities to individually control a high count of LEDs without using processor horsepower for normal operation. These techniques are illustrated in <cross-reference target="DRAWINGS">FIG. 7</cross-reference> through <cross-reference target="DRAWINGS">FIG. 11</cross-reference>. A typical implementation is described in <cross-reference target="DRAWINGS">FIG. 12</cross-reference> through <cross-reference target="DRAWINGS">FIG. 16</cross-reference>. </paragraph>
<paragraph id="P-0048" lvl="0"><number>&lsqb;0048&rsqb;</number> The first step of the calibration process, in accordance with the present invention, is illustrated in <cross-reference target="DRAWINGS">FIG. 7</cross-reference>. The LED array is aligned with a reference calibration area, usually an uniform white target. The usual way of modulating the light intensity is to drive the LED current. The preferred method to control this current digitally is to pulse a high current in the LED during a controlled amount of time. To make it compatible with the CCD acquisition, the pulse can be synchronized with the CCD charge transfer signal, by using the scan synchronization signal for the linear CCD. Since each LED is controlled individually, the control is characterized by the matrix <highlight><bold>43</bold></highlight>, where &sgr;<highlight><subscript>01 </subscript></highlight>is the pulse duration for LED <highlight><bold>1</bold></highlight>, and &tgr;<highlight><subscript>ON </subscript></highlight>is the pulse duration for LED N. </paragraph>
<paragraph id="P-0049" lvl="0"><number>&lsqb;0049&rsqb;</number> For the first calibration, since no assumption can be made, the pulse duration can be fixed to a given value To for every LED so that &tgr;<highlight><subscript>0</subscript></highlight>&equals;&tgr;<highlight><subscript>01</subscript></highlight>&equals;&tgr;<highlight><subscript>02</subscript></highlight>. . . &equals;&tgr;<highlight><subscript>ON </subscript></highlight>to form the initial pulse duration matrix <highlight><bold>43</bold></highlight>. For the subsequent calibrations, the values in use from the latest calibration can be used, giving even more accurate results since these values are closer to the final computed value. The method of controlling the light intensity is not limited to the pulsewidth modulation technique described above. Any method where the light intensity is proportional to one controllable parameter is usable. As a matter of convenience, pulsewidth modulation will be used hereafter for the description of the method used. For example, current intensity may altentatively be used to obtain similar results. </paragraph>
<paragraph id="P-0050" lvl="0"><number>&lsqb;0050&rsqb;</number> In accordance with the calibration technique of the present invention, each individual optical element of the optical array is sequentially pulsed-on and CCD output data collected. For example the first LED is pulsed-on alone during &tgr;<highlight><subscript>01</subscript></highlight>. The CCD array then images the white calibration area and samples are taken at N equally spaced CCD elements along the array as shown in <cross-reference target="DRAWINGS">FIG. 3</cross-reference>. Each of these data points is normalized using equation 45 with i&equals;1, where V<highlight><subscript>ij </subscript></highlight>is the value measured at the output of the CCD, &tgr;<highlight><subscript>oi </subscript></highlight>is the parameter controlling the intensity, and V<highlight><subscript>Ref </subscript></highlight>the desired constant value at the CCD output over the useful field of view. I<highlight><subscript>1j </subscript></highlight>is then recorded and forms the first column of the matrix illustrated in <cross-reference target="DRAWINGS">FIG. 9</cross-reference>. For example, the first selected pixel corresponds to the intensity I<highlight><subscript>l,l </subscript></highlight>while the last pixel corresponds to I<highlight><subscript>l,N</subscript></highlight>. Then, the first LED is turned off and the second LED is pulsed on during &tgr;<highlight><subscript>02</subscript></highlight>. Each of the selected pixels then detects the intensity of the light along the white calibration area and these data points are normalized then stored as the second column in the matrix. This process continues until a square N by N normalized intensity matrix <highlight><bold>44</bold></highlight> is developed as shown in <cross-reference target="DRAWINGS">FIG. 9</cross-reference> by sequentially turning on each of the LEDs and sampling the data reflected from the white calibration area. </paragraph>
<paragraph id="P-0051" lvl="0"><number>&lsqb;0051&rsqb;</number> Once the normalized intensity matrix <highlight><bold>44</bold></highlight> is established as shown in <cross-reference target="DRAWINGS">FIG. 9</cross-reference>, an equation can be written such as shown in <cross-reference target="DRAWINGS">FIG. 10</cross-reference>. If the normalized intensity matrix <highlight><bold>44</bold></highlight> is multiplied by the corrected LED intensity control matrix <highlight><bold>46</bold></highlight>, this matrix multiplication can be made equal to a unity matrix <highlight><bold>48</bold></highlight>, so that the detected signal at the output of the CCD is uniform. In other words, the corrected intensity control matrix <highlight><bold>46</bold></highlight> is a linear matrix that when multiplied by the normalized intensity matrix <highlight><bold>44</bold></highlight> generates a unity matrix <highlight><bold>48</bold></highlight>. Since the unity matrix <highlight><bold>48</bold></highlight> represents the signal that is actually detected by the CCD array for the N selected samples, which includes the optical elements of the system and any deviations in the CCD array, by setting the unity matrix at 1, the detected light intensity across the surface of the illuminated reference white target, as it is sensed by the CCD array, is uniform and measured as V<highlight><subscript>Ref</subscript></highlight>. Additionally, by varying the values in the matrix <highlight><bold>48</bold></highlight> with values different from the unity matrix, allows the formation of a beam that can be moved and controlled across the surface of the target. Of course, the corrected intensity control matrix <highlight><bold>46</bold></highlight> is representative of the individual values at which each of the LED optical elements should be set to produce the unity matrix <highlight><bold>48</bold></highlight> when multiplied by the normalized detected intensity matrix <highlight><bold>44</bold></highlight>. </paragraph>
<paragraph id="P-0052" lvl="0"><number>&lsqb;0052&rsqb;</number> As shown in <cross-reference target="DRAWINGS">FIG. 11</cross-reference>, the equation can be solved for the corrected intensity control matrix <highlight><bold>46</bold></highlight> by inverting the normalized detected intensity matrix <highlight><bold>44</bold></highlight> and multiplying the inverted normalized detected intensity matrix <highlight><bold>44</bold></highlight> by the unity matrix <highlight><bold>48</bold></highlight>. In this manner, each of the individual parameter controlling the intensity values for the optical elements, i.e., &tgr;<highlight><subscript>Ci</subscript></highlight>, can be directly calculated for the LED array <highlight><bold>10</bold></highlight> in one deterministic step. </paragraph>
<paragraph id="P-0053" lvl="0"><number>&lsqb;0053&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 12</cross-reference> is a schematic block diagram of the device for carrying out the present invention. As shown in <cross-reference target="DRAWINGS">FIG. 12</cross-reference>, the LED array <highlight><bold>10</bold></highlight> generates light that is reflected off an object and detected by CCD array <highlight><bold>24</bold></highlight>. CCD array <highlight><bold>24</bold></highlight> is usually controlled by a CCD sequencer <highlight><bold>27</bold></highlight>, which provides all of the clocks and synchronization signals for the CCD and the system. CCD array <highlight><bold>24</bold></highlight> generates an analog signal that is applied to an analog to digital converter <highlight><bold>50</bold></highlight> that samples the signal synchronously at the pixel rate <highlight><bold>25</bold></highlight>. The digital signal that is representative of the detected intensity of the light that is imaged from the illuminated object is applied to a digital signal processor (DSP), micro-controller or microprocessor that usually processes the images acquired, hereinafter referred to as processor <highlight><bold>52</bold></highlight>. Processor <highlight><bold>52</bold></highlight> has the necessary memory resources, I/O and computing capabilities to handle the interface and algorithms described herein. The digitizing performed by ADC <highlight><bold>50</bold></highlight> and the processing performed by processor <highlight><bold>52</bold></highlight> can be deported to separate calibration or processing equipment, if the system does not require standalone calibration or sophisticated processing. The processor <highlight><bold>52</bold></highlight> controls all of the calibration steps as described herein. The values of the corrected intensity matrix <highlight><bold>46</bold></highlight> are calculated in processor <highlight><bold>52</bold></highlight>. These values are then converted per <cross-reference target="DRAWINGS">FIG. 14</cross-reference> and loaded in the programmable light source sequencer <highlight><bold>56</bold></highlight>. The light source sequencer is a logic device that has: </paragraph>
<paragraph id="P-0054" lvl="2"><number>&lsqb;0054&rsqb;</number> either ISP (In Situ Programming) capability, such as a CPLD (Complex Programmable Logic Device), or FPGA (Field Programmable Gate Array) using Flash, E<highlight><superscript>2 </superscript></highlight>or RAM based technology, </paragraph>
<paragraph id="P-0055" lvl="2"><number>&lsqb;0055&rsqb;</number> or any equivalent capability that allows full programming of a individual pulse width control on many outputs, </paragraph>
<paragraph id="P-0056" lvl="7"><number>&lsqb;0056&rsqb;</number> to perform the process steps as described in <cross-reference target="DRAWINGS">FIGS. 13 and 14</cross-reference>. Usually, these programmable devices have a simple, three or four wire serial programming interface <highlight><bold>51</bold></highlight>, such as JTAG (IEEE-1149). The Programming I/O interface <highlight><bold>53</bold></highlight> between the processor <highlight><bold>52</bold></highlight> and the light source sequencer <highlight><bold>56</bold></highlight> could be a simple I/O port, usually embedded in the micro-controllers or DSP. The sequencer <highlight><bold>56</bold></highlight> generates the driver signals, as described in the calibration cycle with regard to <cross-reference target="DRAWINGS">FIG. 13</cross-reference>, and the run cycle with regard to <cross-reference target="DRAWINGS">FIG. 14</cross-reference>. </paragraph>
<paragraph id="P-0057" lvl="0"><number>&lsqb;0057&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 13</cross-reference> illustrates the calibration steps <highlight><bold>64</bold></highlight> that are carried out by the apparatus of the present invention. At step <highlight><bold>66</bold></highlight>, the system positions the LED array and the CCD array adjacent a reference white calibration area for calibrating the LED array. At step <highlight><bold>68</bold></highlight> each LED is sequentially activated one by one,.using the previous or a standard driver intensity control. At step <highlight><bold>70</bold></highlight> data from a selected sample of pixels is detected and corrected to generate a normalized detected intensity matrix <highlight><bold>44</bold></highlight>. As indicated above, N pixels that are evenly spaced along the LED array are selected for collection of data. As also indicated above, these can comprise pixel pairs, pixel triplets or even multiple scans of the said pixels to minimize the effect of sensitivity of any individual pixel element, or acquisition noise. </paragraph>
<paragraph id="P-0058" lvl="0"><number>&lsqb;0058&rsqb;</number> At step <highlight><bold>72</bold></highlight> of <cross-reference target="DRAWINGS">FIG. 13</cross-reference>, the normalized detected intensity matrix is inverted and multiplied by a linear matrix of ones to generate a corrected intensity control matrix <highlight><bold>46</bold></highlight>. Each of these steps is performed by the processor <highlight><bold>52</bold></highlight>. The new calculated driver intensity control data is then used to program the sequencer at step <highlight><bold>76</bold></highlight>, which is programmed through a programming I/O interface <highlight><bold>53</bold></highlight>. The sequencer <highlight><bold>56</bold></highlight> then generates driver signals from the driver intensity control data at step <highlight><bold>78</bold></highlight>, simultaneously for all the LEDs. The driver signals are applied to power drivers <highlight><bold>58</bold></highlight> and the LED array <highlight><bold>10</bold></highlight> is activated to illuminate the white calibration area at step <highlight><bold>80</bold></highlight>. </paragraph>
<paragraph id="P-0059" lvl="0"><number>&lsqb;0059&rsqb;</number> At this point, a separate calibration can be performed on the system. Referring again to <cross-reference target="DRAWINGS">FIG. 13</cross-reference>, the CCD array detects the signal from the white calibration area, at step <highlight><bold>80</bold></highlight>, which is digitized in the A/D converter <highlight><bold>50</bold></highlight>. This signal is then analyzed by the processor <highlight><bold>52</bold></highlight> to determine if any ripple in the signal exists. Ripple in this case is used to describe any small residual variations in the detected signal, since the calibration method actually fixes only N points or pixels neighborhoods over the total number of pixels of the CCD. In the source design, N, which is the number of LEDs, should be sufficient to get a sufficient uniformity. Most of the time, this is directly achievable, since for the most of the LEDs the function giving the relative intensity vs. angular displacement off-axis has smooth variations. However, if this is not sufficient, for each pixel k of the CCD, the processor calculates the ratio V<highlight><subscript>Ref</subscript></highlight>/V<highlight><subscript>k</subscript></highlight>, which characterizes the deviation from the perfect flat/uniform response. So, at step <highlight><bold>84</bold></highlight> the reference value V<highlight><subscript>ref </subscript></highlight>is retreived. At step <highlight><bold>86</bold></highlight> the ratio V<highlight><subscript>ref</subscript></highlight>/V<highlight><subscript>k </subscript></highlight>is calculated for each pixel or group of pixels. The processor <highlight><bold>52</bold></highlight> then generates and saves these values at step <highlight><bold>88</bold></highlight> that could be used to slightly adjust the sensitivity of the CCD array, as indicated at step <highlight><bold>90</bold></highlight> of <cross-reference target="DRAWINGS">FIG. 13</cross-reference>. The accuracy and the performance of this calibration system provides for added functionality, such as LED failure detection and compensation, or thermal compensation of the LED array for high luminosity sources. Also, if the acquisition system between the target <highlight><bold>12</bold></highlight> and the processing <highlight><bold>52</bold></highlight> is perfectly linear and uniform by itself, then the target itself is uniformly illuminated. </paragraph>
<paragraph id="P-0060" lvl="0"><number>&lsqb;0060&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 14</cross-reference> is a flow diagram illustrating the steps for normal operation of the system. <cross-reference target="DRAWINGS">FIG. 14</cross-reference> indicates the operation steps <highlight><bold>92</bold></highlight> for operating the device of the present invention. At step <highlight><bold>94</bold></highlight> a scan synchronization signal <highlight><bold>28</bold></highlight> is transmitted by the CCD sequencer <highlight><bold>27</bold></highlight> to start the scan operation. A counter within the sequencer <highlight><bold>56</bold></highlight>, clocked by a high frequency clock <highlight><bold>29</bold></highlight> is cleared at step <highlight><bold>96</bold></highlight>. Usually, the high frequency clock <highlight><bold>29</bold></highlight> is derived from the pixel clock of the CCD, and can be either a multiple or a sub-multiple of this clock, depending on the desired accuracy in the intensity control, but can be independent and asynchronous. At step <highlight><bold>98</bold></highlight>, the sequencer <highlight><bold>56</bold></highlight> uses the corrected intensity control data to switch off the driver. As disclosed above, the corrected intensity control matrix <highlight><bold>46</bold></highlight> is calculated by the processor <highlight><bold>52</bold></highlight>. The driver intensity control data is then used by the sequencer <highlight><bold>56</bold></highlight> to determine the length of the pulse width (i.e., the number of clock pulses of clock <highlight><bold>29</bold></highlight>) for driving each of the elements of the LED array <highlight><bold>10</bold></highlight>. The N LEDs in the array could be turned on simultaneously. However, an improvement and to reduce the electromagnetic interference and noise generated by switching a rather high current simultaneously in all the power drivers for the LEDs simultaneously, the sequencer <highlight><bold>56</bold></highlight> sequentially turns on the LEDs, such that only one LED is switched on or off during the scan period, while maximizing the overlap of the lighting of the set of LEDs. To sequentially turn on the LEDs, different start &amp; stop clock counts are calculated by the processor <highlight><bold>52</bold></highlight> for each LED, while respecting the calculated pulsewidth required for each individual LED. At step <highlight><bold>102</bold></highlight> the counter counts the clock signals. The clock signals are then compared in comparators in the sequencer <highlight><bold>56</bold></highlight> with the start and stop counts for each LED at step <highlight><bold>102</bold></highlight>. At step <highlight><bold>106</bold></highlight>, driver signals are generated in response to the output of the comparator to active and deactivate the LED drivers. </paragraph>
<paragraph id="P-0061" lvl="0"><number>&lsqb;0061&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 15</cross-reference> is a graph that illustrates, by a timing diagram the calibration phase <highlight><bold>60</bold></highlight> and the normal operation phase <highlight><bold>92</bold></highlight> before and after calibration, and shows the signals involved at light source sequencer level and at CCD output. <cross-reference target="DRAWINGS">FIG. 15</cross-reference> shows a nonuniform response <highlight><bold>110</bold></highlight> over an effective field of view during an uncalibrated or previously calibrated operation period <highlight><bold>112</bold></highlight>. <cross-reference target="DRAWINGS">FIG. 15</cross-reference> also shows the aquisition of responses for individual LEDs and optics transfer characteristics during period <highlight><bold>114</bold></highlight>, as well as the period <highlight><bold>118</bold></highlight> of pulsewidth correction calculation and the period <highlight><bold>120</bold></highlight> of LED pulsewidth in situ programming. The flat response <highlight><bold>122</bold></highlight> over the effective field of view is shown for the normal calibration operation period <highlight><bold>124</bold></highlight>. </paragraph>
<paragraph id="P-0062" lvl="0"><number>&lsqb;0062&rsqb;</number> <cross-reference target="DRAWINGS">FIG. 16</cross-reference> shows a typical implementation that highlights the straightforward manner of using a standard CPLD structure, taking advantage of the programmable wired-AND to set and reset each driver Flip Flop at a certain value of the time counter. The rest of the logic is fixed and implements both calibration and normal run functions. The driver signals are then applied to power drivers <highlight><bold>58</bold></highlight> which individually switch on/off each element of the LED array <highlight><bold>10</bold></highlight> so that the CCD array <highlight><bold>24</bold></highlight> senses the illuminated object <highlight><bold>12</bold></highlight> having a uniform intensity, although the real radiometric intensity on the target <highlight><bold>12</bold></highlight> is not really uniform, since some defects can occur after reflection on the target <highlight><bold>12</bold></highlight>. </paragraph>
<paragraph id="P-0063" lvl="0"><number>&lsqb;0063&rsqb;</number> As shown in <cross-reference target="DRAWINGS">FIG. 16</cross-reference>, clock <highlight><bold>130</bold></highlight> is a high frequency clock that has a clock rate that usually corresponds to the pixel rate or some multiple, or sub-multiple of the pixel rate, if higher or lower pulse width resolution is required. Clock <highlight><bold>130</bold></highlight> is coupled to and drives the illumination time counter <highlight><bold>132</bold></highlight> and the flip-flop clocks for the flip-flops contained within the macrocell <highlight><bold>142</bold></highlight>. The illumination time counter <highlight><bold>132</bold></highlight> is a k-bit binary counter. The pulse width of the illumination time counter <highlight><bold>132</bold></highlight> is 2<highlight><superscript>k</superscript></highlight>. Scan sync signal <highlight><bold>133</bold></highlight> is used to reset counter <highlight><bold>132</bold></highlight> and functions as the counter for LED counter <highlight><bold>136</bold></highlight>. LED counter <highlight><bold>136</bold></highlight> receives the clock signal from scan sync <highlight><bold>133</bold></highlight> and is used for counting the LEDs from 1 to N for calibration. Control signal <highlight><bold>138</bold></highlight>, as illustrated in <cross-reference target="DRAWINGS">FIG. 16</cross-reference>, functions to reset the LED counter <highlight><bold>136</bold></highlight> and thereby ensure that all of the LEDs are simultaneously lit during the pulse-width that is programmed for each of the LEDs during normal run mode. During calibration mode, the control signal <highlight><bold>138</bold></highlight> causes each of the LEDs to be sequentially lit, as indicated above. Macrocell <highlight><bold>142</bold></highlight>, as illustrated in <cross-reference target="DRAWINGS">FIG. 16</cross-reference>, is a representation of a standard macrocell configured as a D flip-flop for driving the LED drivers <highlight><bold>144</bold></highlight>. The flip-flops of the macrocell <highlight><bold>142</bold></highlight> are set by the start count provided by illumination time counter <highlight><bold>132</bold></highlight> for each LED, and are reset by the stop count provided by illumination time counter <highlight><bold>132</bold></highlight>. Each of the boxes <highlight><bold>140</bold></highlight> illustrates the connection for each LED that is activated by the LED counter <highlight><bold>136</bold></highlight>. Section <highlight><bold>134</bold></highlight> of the CPLD illustrated in <cross-reference target="DRAWINGS">FIG. 16</cross-reference> is the programmable portion of the chip. Section <highlight><bold>134</bold></highlight> can be dymanically programmed to set the start and stop count for each LED. </paragraph>
<paragraph id="P-0064" lvl="0"><number>&lsqb;0064&rsqb;</number> The present invention therefore provides a system that is capable of illuminating a target using an array of optical elements such that the illuminated image is dectected as uniformly illuminated across the surface of the target. This reduces the cost of optics that are required to image the signal. Additionally, the calibration can be performed in one simple and very accurate step. </paragraph>
<paragraph id="P-0065" lvl="0"><number>&lsqb;0065&rsqb;</number> The foregoing description of the invention has been presented for purposes of illustration and description. It is not intended to be exhaustive or to limit the invention to the precise form disclosed, and other modifications and variations may be possible in light of the above teachings. The embodiments disclosed were chosen and described in order to best explain the principles of the invention and practical applications of the invention to thereby enable others skilled in the art to best utilize the invention in various embodiments and various modifications as are suited to the particular use contemplated. It is intended that the appended claims be construed to include other alternative embodiments of the invention except insofar as limited by the prior art. </paragraph>
</section>
</detailed-description>
</subdoc-description>
<subdoc-claims>
<heading lvl="1">What is claimed is: </heading>
<claim id="CLM-00001">
<claim-text><highlight><bold>1</bold></highlight>. A method of calibrating an array of light sources to provide a substantially uniform output over a predetermined area comprising: 
<claim-text>positioning the said array of light sources and the associated detector in front of a reference target in the said predetermined area; </claim-text>
<claim-text>sequentially activating each light source of said array of light sources; </claim-text>
<claim-text>sampling light intensity over said predetermined area for each light source to generate a plurality of intensity signal; </claim-text>
<claim-text>generating a square matrix of said plurality of intensity signals that are normalized by initial intensity control parameters of each light source and a desired calibrated intensity; </claim-text>
<claim-text>inverting said matrix to produce an inverted matrix; </claim-text>
<claim-text>calculating corrected driver intensity control data from said inverted matrix; </claim-text>
<claim-text>using said corrected driver intensity data to generate calibrated driver signals. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00002">
<claim-text><highlight><bold>2</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference> wherein said step of calculating corrected driver intensity data further comprises: 
<claim-text>multiplying said inverted matrix by a linear unity matrix to generate a linear corrected matrix; </claim-text>
<claim-text>generating a pulsewidth count for each light source based upon said linear corrected matrix. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00003">
<claim-text><highlight><bold>3</bold></highlight>. The method of <dependent-claim-reference depends_on="CLM-00002">claim 2</dependent-claim-reference> further comprising: 
<claim-text>generating start and stop counts for each light source to stagger times and provide proper pulse width. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00004">
<claim-text><highlight><bold>4</bold></highlight>. The method of calibrating in accordance with <dependent-claim-reference depends_on="CLM-00001">claim 1</dependent-claim-reference> further comprising: 
<claim-text>illuminating the said reference target by applying said driver signals to said array of light sources; </claim-text>
<claim-text>sensing said target with an imaging array; </claim-text>
<claim-text>generating a ripple signal that indicates residual variations in a detected signal; </claim-text>
<claim-text>adjusting sensitivity of said imaging array with said inverse ripple signal. </claim-text>
</claim-text>
</claim>
<claim id="CLM-00005">
<claim-text><highlight><bold>5</bold></highlight>. A light source that includes an array of individual light elements that are calibrated to provide a substantially uniform intensity over a spatial region, said array of elements being calibrated by: 
<claim-text>generating a matrix of said plurality of intensity signals using a reference target; </claim-text>
<claim-text>inverting said matrix to produce an inverted matrix; </claim-text>
<claim-text>calculating corrected driver intensity control data from said inverted matrix; </claim-text>
<claim-text>using said driver intensity data to generate calibrated driver signals.</claim-text>
</claim-text>
</claim>
</subdoc-claims>
<subdoc-drawings id="DRAWINGS">
<heading lvl="0" align="CENTER">Drawings</heading>
<representative-figure>12</representative-figure>
<figure id="figure-D00000">
<image id="EMI-D00000" file="US20030001807A1-20030102-D00000.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00001">
<image id="EMI-D00001" file="US20030001807A1-20030102-D00001.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00002">
<image id="EMI-D00002" file="US20030001807A1-20030102-D00002.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00003">
<image id="EMI-D00003" file="US20030001807A1-20030102-D00003.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00004">
<image id="EMI-D00004" file="US20030001807A1-20030102-D00004.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00005">
<image id="EMI-D00005" file="US20030001807A1-20030102-D00005.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00006">
<image id="EMI-D00006" file="US20030001807A1-20030102-D00006.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00007">
<image id="EMI-D00007" file="US20030001807A1-20030102-D00007.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00008">
<image id="EMI-D00008" file="US20030001807A1-20030102-D00008.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00009">
<image id="EMI-D00009" file="US20030001807A1-20030102-D00009.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00010">
<image id="EMI-D00010" file="US20030001807A1-20030102-D00010.TIF" imf="TIFF" ti="DR"/>
</figure>
<figure id="figure-D00011">
<image id="EMI-D00011" file="US20030001807A1-20030102-D00011.TIF" imf="TIFF" ti="DR"/>
</figure>
</subdoc-drawings>
</patent-application-publication>
